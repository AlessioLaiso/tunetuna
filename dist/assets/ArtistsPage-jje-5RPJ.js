import{b as Me,r as n,g as q,j as e,U as J,f as C,C as Te,u as $e,a as we,e as Ue,i as He,G as ye,P as Ne,L as Ie,D as De}from"./index-Cmx2dfPc.js";import{u as Be,f as Ye,S as Ce}from"./search-CXNk5K3W.js";import{P as Qe}from"./Pagination-CoXb8w4w.js";import{F as Ve}from"./FilterBottomSheet-CgixwTy9.js";import{A as Xe}from"./arrow-up-down-DnbYmK42.js";const ee=new Map;function We({artist:s,onContextMenu:v,contextMenuItemId:w}){var F,G;const E=Me(),[P,b]=n.useState(!1),[g,y]=n.useState(!1),[A,N]=n.useState("mobile"),[h,p]=n.useState(null),o=n.useRef(!1),[c,a]=n.useState(null),d=w===s.Id;n.useEffect(()=>{var I;if((I=s.ImageTags)!=null&&I.Primary){a(null);return}const u=ee.get(s.Id);if(u!==void 0){a(u);return}let j=!1;return(async()=>{try{const{albums:i,songs:U}=await C.getArtistItems(s.Id),K=i[0],Q=U.find(V=>V.AlbumId)||U[0],M=K||Q,H=M?M.AlbumId||M.Id:null,B=H?C.getAlbumArtUrl(H,96):null;ee.set(s.Id,B),j||a(B)}catch(i){console.error("Failed to load fallback album art for artist:",s.Id,i),ee.set(s.Id,null)}})(),()=>{j=!0}},[s.Id,s.ImageTags]);const _=u=>{if(o.current){u.preventDefault(),o.current=!1;return}E(`/artist/${s.Id}`)},S=q({onLongPress:u=>{u.preventDefault(),v?(o.current=!0,v(s,"artist","mobile")):(o.current=!0,N("mobile"),p(null),y(!0))}}),x=u=>{var j,O,I,i;u.preventDefault(),u.stopPropagation(),(O=(j=u.nativeEvent)==null?void 0:j.preventDefault)==null||O.call(j),(i=(I=u.nativeEvent)==null?void 0:I.stopImmediatePropagation)==null||i.call(I),o.current=!0,v?v(s,"artist","desktop",{x:u.clientX,y:u.clientY}):(N("desktop"),p({x:u.clientX,y:u.clientY}),y(!0)),setTimeout(()=>{o.current=!1},300)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:u=>{if(g||o.current){u.preventDefault(),u.stopPropagation();return}_(u)},onContextMenu:x,...S,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors group px-4 h-[72px] ${d?"bg-white/10":""}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:P?e.jsx(J,{className:"w-6 h-6 text-gray-500"}):(F=s.ImageTags)!=null&&F.Primary||c?e.jsx("img",{src:(G=s.ImageTags)!=null&&G.Primary?C.getArtistImageUrl(s.Id,96):c||"",alt:s.Name,className:"w-full h-full object-cover",onError:()=>b(!0),loading:"lazy"}):e.jsx(J,{className:"w-6 h-6 text-gray-500"})}),e.jsx("div",{className:"flex-1 min-w-0 text-left",children:e.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:s.Name})})]}),e.jsx(Te,{item:s,itemType:"artist",isOpen:g,onClose:()=>y(!1),zIndex:99999,mode:A,position:h||void 0})]})}const te=new Map;function Ae({artist:s,onClick:v,onContextMenu:w,contextMenuItemId:E}){var c;const[P,b]=n.useState(!1),g=n.useRef(!1),y=E===s.Id,[A,N]=n.useState(null);n.useEffect(()=>{var S;if((S=s.ImageTags)!=null&&S.Primary){N(null);return}const a=te.get(s.Id);if(a!==void 0){N(a);return}let d=!1;return(async()=>{try{const{albums:x,songs:F}=await C.getArtistItems(s.Id),G=x[0],u=F.find(i=>i.AlbumId)||F[0],j=G||u,O=j?j.AlbumId||j.Id:null,I=O?C.getAlbumArtUrl(O,96):null;te.set(s.Id,I),d||N(I)}catch(x){console.error("Failed to load fallback album art for artist (search item):",s.Id,x),te.set(s.Id,null)}})(),()=>{d=!0}},[s.Id,s.ImageTags]);const h=a=>{if(y||g.current){a.preventDefault(),a.stopPropagation(),g.current=!1;return}v(s.Id)},p=a=>{a.preventDefault(),a.stopPropagation(),g.current=!0,w(s,"artist","desktop",{x:a.clientX,y:a.clientY}),setTimeout(()=>{g.current=!1},300)},o=q({onLongPress:a=>{a.preventDefault(),g.current=!0,w(s,"artist","mobile")},onClick:h});return e.jsxs("button",{onClick:h,onContextMenu:p,...o,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left cursor-pointer px-4 h-[72px] ${y?"bg-white/10":""}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:P?e.jsx(J,{className:"w-6 h-6 text-gray-500"}):A||(c=s.ImageTags)!=null&&c.Primary?e.jsx("img",{src:A||C.getArtistImageUrl(s.Id,96),alt:s.Name,className:"w-full h-full object-cover",onError:()=>b(!0),loading:"lazy"}):e.jsx(J,{className:"w-6 h-6 text-gray-500"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:s.Name})})]})}function Se({album:s,onClick:v,onContextMenu:w,contextMenuItemId:E}){var p,o;const[P,b]=n.useState(!1),g=n.useRef(!1),y=E===s.Id,A=c=>{if(y||g.current){c.preventDefault(),c.stopPropagation(),g.current=!1;return}v(s.Id)},N=c=>{c.preventDefault(),c.stopPropagation(),g.current=!0,w(s,"album","desktop",{x:c.clientX,y:c.clientY}),setTimeout(()=>{g.current=!1},300)},h=q({onLongPress:c=>{c.preventDefault(),g.current=!0,w(s,"album","mobile")},onClick:A});return e.jsxs("button",{onClick:A,onContextMenu:N,...h,className:"text-left group",children:[e.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:P?e.jsx(De,{className:"w-12 h-12 text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:C.getAlbumArtUrl(s.Id,474),alt:s.Name,className:"w-full h-full object-cover",onError:()=>b(!0)}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),e.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:s.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:s.AlbumArtist||((o=(p=s.ArtistItems)==null?void 0:p[0])==null?void 0:o.Name)||"Unknown Artist"})]})}function ke({song:s,onClick:v,onContextMenu:w,contextMenuItemId:E,showImage:P=!0}){var c,a;const b=n.useRef(!1),g=E===s.Id,[y,A]=n.useState(!1),N=d=>{const _=Math.floor(d/1e7),S=Math.floor(_/60),x=_%60;return`${S}:${x.toString().padStart(2,"0")}`},h=d=>{if(g||b.current){d.preventDefault(),d.stopPropagation(),b.current=!1;return}v(s)},p=d=>{d.preventDefault(),d.stopPropagation(),b.current=!0,w(s,"song","desktop",{x:d.clientX,y:d.clientY}),setTimeout(()=>{b.current=!1},300)},o=q({onLongPress:d=>{d.preventDefault(),b.current=!0,w(s,"song","mobile")},onClick:h});return e.jsxs("button",{onClick:h,onContextMenu:p,...o,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${g?"bg-white/10":""}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:y?e.jsx(De,{className:"w-7 h-7 text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:C.getAlbumArtUrl(s.AlbumId||s.Id,96),alt:s.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>A(!0)}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:s.Name}),e.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[s.AlbumArtist||((a=(c=s.ArtistItems)==null?void 0:c[0])==null?void 0:a.Name)||"Unknown Artist",s.Album&&` â€¢ ${s.Album}`]})]}),s.RunTimeTicks&&e.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:N(s.RunTimeTicks)})]})}const $=90,Ee=45,Je=45,Pe=45,qe=45;function nt(){const{artists:s,setArtists:v,sortPreferences:w,setSortPreference:E,setLoading:P,loading:b,genres:g}=$e(),{playTrack:y,playAlbum:A,addToQueue:N}=we(),[h,p]=n.useState(""),[o,c]=n.useState(!1),[a,d]=n.useState(null),[_,S]=n.useState(!1),x=n.useRef(null),[F,G]=n.useState(!1),[u,j]=n.useState("mobile"),[O,I]=n.useState(null),[i,U]=n.useState(null),[K,Q]=n.useState(null),[M,H]=n.useState(0),[B,V]=n.useState(0),[Le,se]=n.useState(Pe),Z=Me(),ne=n.useRef(null),le=n.useRef(null),[T,re]=n.useState([]),[ze,ae]=n.useState(!1),[_e,Oe]=n.useState(null),R=w.artists,X=n.useRef(!0),[Re,ie]=n.useState(!1),oe=n.useRef(R),[ce,de]=n.useState(Ee),Y=we(t=>t.isQueueSidebarOpen),ue=T.length>0;n.useEffect(()=>{x.current&&x.current.abort();const t=h.trim().length>0;if(t||ue){S(!0),x.current=new AbortController;const r=window.setTimeout(async()=>{var m,f,k,L;if(!((m=x.current)!=null&&m.signal.aborted))try{let z;t?z=await Be(h,450):z=await Ye(450),(f=x.current)!=null&&f.signal.aborted||d(z)}catch(z){(k=x.current)!=null&&k.signal.aborted||(console.error("Search failed:",z),d(null))}finally{(L=x.current)!=null&&L.signal.aborted||S(!1)}},250);return()=>{window.clearTimeout(r),x.current&&x.current.abort()}}else x.current=null,d(null),S(!1)},[h,ue]);const l=n.useMemo(()=>{if(!a)return null;const t=m=>{if(T.length>0){const f=m.Genres||[];if(!T.some(L=>f.some(z=>z.toLowerCase()===L.toLowerCase())))return!1}return!0},r=m=>{if(T.length>0){const f=m.Genres||[];if(!T.some(L=>f.some(z=>z.toLowerCase()===L.toLowerCase())))return!1}return!0};return{artists:a.artists.filter(t),albums:a.albums.filter(r),playlists:a.playlists||[],songs:a.songs.filter(r)}},[a,T]);n.useEffect(()=>{if(o){const r=window.matchMedia("(hover: hover) and (pointer: fine) and (min-width: 1024px)").matches?le:ne;setTimeout(()=>{var m;if((m=r.current)==null||m.focus(),r.current){const f=r.current.value.length;r.current.setSelectionRange(f,f)}},50)}},[o]),n.useEffect(()=>{if(!o)return;const t=r=>{r.key==="Escape"&&(r.preventDefault(),r.stopPropagation(),W())};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[o]),n.useEffect(()=>()=>{x.current&&x.current.abort()},[]);const me=t=>{p(t),t.trim().length>0&&!o&&c(!0)},he=()=>{p(""),d(null)},W=()=>{c(!1),p(""),d(null),re([])},xe=()=>{Oe("genre"),ae(!0)},Fe=t=>{re(t)},fe=t=>{Z(`/artist/${t}`),c(!1),p(""),d(null)},ge=t=>{Z(`/album/${t}`),c(!1),p(""),d(null)},pe=t=>{y(t,[t])},be=t=>{t.preventDefault(),t.stopPropagation(),l!=null&&l.songs&&l.songs.length>0&&A(l.songs)},ve=t=>{t.preventDefault(),t.stopPropagation(),l!=null&&l.songs&&l.songs.length>0&&N(l.songs)},je=t=>{Z(`/playlist/${t}`),c(!1),p(""),d(null)},D=(t,r,m="mobile",f)=>{U(t),Q(r),j(m),I(f||null),G(!0)},Ge=async()=>{var r;const t=Date.now();P("artists",!0);try{const m={limit:$,startIndex:M*$};R==="RecentlyAdded"?(m.sortBy=["DateCreated"],m.sortOrder="Descending"):(m.sortBy=["SortName"],m.sortOrder="Ascending");let f=await C.getArtists(m);(((r=f.Items)==null?void 0:r.length)||0)===0&&(f=await C.getArtists({limit:$,startIndex:M*$}));const k=f.Items||[];V(f.TotalRecordCount||0);const L=Date.now()-t;v(k)}catch(m){console.error("Failed to load artists:",m),v([]),V(0)}finally{P("artists",!1),ie(!1)}};return n.useEffect(()=>{!h.trim()&&!o&&H(0)},[R,h,o]),n.useEffect(()=>{de(Ee)},[h,o,a==null?void 0:a.songs.length]),n.useEffect(()=>{var r;if(!o||!((r=a==null?void 0:a.songs)!=null&&r.length))return;const t=()=>{const m=window.scrollY||document.documentElement.scrollTop,f=window.innerHeight||document.documentElement.clientHeight,k=document.documentElement.scrollHeight;m+f*1.5>=k&&de(L=>Math.min(L+Je,a.songs.length))};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[o,a==null?void 0:a.songs.length]),n.useEffect(()=>{se(Pe)},[M,s.length]),n.useEffect(()=>{const t=()=>{const r=window.scrollY||document.documentElement.scrollTop,m=window.innerHeight||document.documentElement.clientHeight,f=document.documentElement.scrollHeight;r+m*1.5>=f&&se(k=>Math.min(k+qe,s.length))};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[s.length]),n.useEffect(()=>{!h.trim()&&!o&&(!X.current&&oe.current!==R&&ie(!0),oe.current=R,Ge())},[M,R,h,o]),n.useEffect(()=>{X.current&&(X.current=!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pb-20",children:[e.jsx("div",{className:`fixed top-0 left-0 right-0 bg-black z-10 lg:left-16 transition-[left,right] duration-300 ${Y?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:e.jsx("div",{className:"max-w-[768px] mx-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Artists"}),e.jsx("button",{onClick:()=>c(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!o&&e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("button",{onClick:()=>E("artists",R==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[R==="RecentlyAdded"?"Recently Added":"Alphabetically",e.jsx(Xe,{className:"w-4 h-4"})]}),b.artists&&!X.current&&e.jsx("div",{className:"flex items-center",children:e.jsx(He,{})})]})]})})}),e.jsx("div",{className:`fixed left-0 right-0 z-10 lg:left-16 transition-[left,right] duration-300 ${Y?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 7rem - 8px)",height:"24px",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent)"}}),e.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:e.jsxs("div",{className:`${Re?"opacity-50 pointer-events-none":""} ${o?"hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:block":""}`,children:[s.length===0&&!b.artists&&e.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:e.jsx("p",{children:"No artists found"})}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-0",children:s.slice(0,Le).map(t=>e.jsx(We,{artist:t,onContextMenu:D,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))}),e.jsx(Qe,{currentPage:M,totalPages:Math.ceil(B/$),onPageChange:H,itemsPerPage:$,totalItems:B})]})]})})]}),o&&Ue.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:block fixed inset-0 z-[9998] bg-black/50",onClick:W}),e.jsx("div",{className:`hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:flex fixed top-0 left-16 z-[9999] justify-center pointer-events-none ${Y?"":"right-0"}`,style:Y?{right:"var(--sidebar-width)"}:void 0,children:e.jsxs("div",{className:"w-[768px] max-h-[80vh] overflow-y-auto bg-zinc-900 rounded-b-xl shadow-2xl pointer-events-auto border-l border-r border-b border-zinc-800",children:[e.jsxs("div",{className:"px-4 pt-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:"Search"}),e.jsx("button",{onClick:W,className:"px-3 py-1.5 text-white text-sm font-medium hover:bg-zinc-800 rounded-lg transition-colors",children:"Cancel"})]}),e.jsx(Ce,{ref:le,value:h,onChange:me,placeholder:"Search for artists, albums, songs...",showClearButton:h.trim().length>0,onClear:he})]}),e.jsx("div",{className:"flex items-center gap-3 px-4 pt-3 pb-4",children:e.jsxs("button",{onClick:xe,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${T.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Genre"})]})}),e.jsx("div",{className:"px-4 pb-8",children:_?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):l?e.jsxs("div",{className:"space-y-8",children:[l.artists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Artists"}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.artists.map(t=>e.jsx(Ae,{artist:t,onClick:fe,onContextMenu:D,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.albums.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:l.albums.slice(0,12).map(t=>e.jsx(Se,{album:t,onClick:ge,onContextMenu:D,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.playlists&&l.playlists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Playlists"}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.playlists.map(t=>e.jsxs("button",{onClick:()=>je(t.Id),onContextMenu:r=>{r.preventDefault(),r.stopPropagation(),D(t,"playlist","desktop",{x:r.clientX,y:r.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:e.jsx("img",{src:C.getAlbumArtUrl(t.Id,96),alt:t.Name,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:t.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:"Playlist"})]})]},t.Id))})]}),l.songs.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:be,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:ve,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:e.jsx(Ie,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.songs.map((t,r)=>e.jsx(ke,{song:t,onClick:pe,onContextMenu:D,contextMenuItemId:(i==null?void 0:i.Id)||null,showImage:r<ce},t.Id))})]}),l.artists.length===0&&l.albums.length===0&&(!l.playlists||l.playlists.length===0)&&l.songs.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[e.jsx("div",{className:"text-lg mb-2",children:"No results found"}),e.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400"})})]})}),e.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0 [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:e.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ce,{ref:ne,value:h,onChange:me,showClearButton:h.trim().length>0,onClear:he})}),e.jsx("button",{onClick:W,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),e.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[e.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4",style:{top:"calc(76px + env(safe-area-inset-top))"},children:e.jsx("div",{className:"flex items-center gap-3 px-4",children:e.jsxs("button",{onClick:xe,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${T.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Genre"})]})})}),e.jsx("div",{className:`fixed left-0 right-0 z-[60] lg:left-16 transition-[left,right] duration-300 ${Y?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 76px + 4rem)",height:"24px",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent)"}}),e.jsx("div",{className:"pb-32",style:{paddingTop:"40px"},children:_?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):l?e.jsxs("div",{className:"space-y-8",children:[l.artists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),e.jsx("div",{className:"space-y-0",children:l.artists.map(t=>e.jsx(Ae,{artist:t,onClick:fe,onContextMenu:D,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.albums.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:l.albums.slice(0,12).map(t=>e.jsx(Se,{album:t,onClick:ge,onContextMenu:D,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.playlists&&l.playlists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),e.jsx("div",{className:"space-y-0",children:l.playlists.map(t=>e.jsxs("button",{onClick:()=>je(t.Id),onContextMenu:r=>{r.preventDefault(),r.stopPropagation(),D(t,"playlist","desktop",{x:r.clientX,y:r.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:e.jsx("img",{src:C.getAlbumArtUrl(t.Id,96),alt:t.Name,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:t.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:"Playlist"})]})]},t.Id))})]}),l.songs.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:be,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:ve,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:e.jsx(Ie,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"space-y-0",children:l.songs.map((t,r)=>e.jsx(ke,{song:t,onClick:pe,onContextMenu:D,contextMenuItemId:(i==null?void 0:i.Id)||null,showImage:r<ce},t.Id))})]}),l.artists.length===0&&l.albums.length===0&&(!l.playlists||l.playlists.length===0)&&l.songs.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[e.jsx("div",{className:"text-lg mb-2",children:"No results found"}),e.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})]}),document.body),_e==="genre"&&e.jsx(Ve,{isOpen:ze,onClose:()=>ae(!1),filterType:"genre",genres:g,selectedValues:T,onApply:Fe}),e.jsx(Te,{item:i,itemType:K,isOpen:F,onClose:()=>{G(!1),U(null),Q(null)},zIndex:99999,mode:u,position:O||void 0})]})}export{nt as default};
