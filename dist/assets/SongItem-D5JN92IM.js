import{a as P,g as S,r as o,f as D,j as s,D as T,I as E,e as O,C as R}from"./index-scgXBtC7.js";function z({song:t,showImage:v=!0,onContextMenu:l,contextMenuItemId:j}){var f,p;const{playTrack:b}=P(),c=S(),[m,u]=o.useState(!1),[g,x]=o.useState("mobile"),[w,d]=o.useState(null),n=o.useRef(!1),[I,M]=o.useState(!1),N=j===t.Id,y=e=>{const r=Math.floor(e/1e7),i=Math.floor(r/60),a=r%60;return`${i}:${a.toString().padStart(2,"0")}`},k=e=>{if(n.current){e.preventDefault(),n.current=!1;return}b(t)},A=e=>{var r,i,a,h;e.preventDefault(),e.stopPropagation(),(i=(r=e.nativeEvent)==null?void 0:r.preventDefault)==null||i.call(r),(h=(a=e.nativeEvent)==null?void 0:a.stopImmediatePropagation)==null||h.call(a),n.current=!0,l?l(t,"song","desktop",{x:e.clientX,y:e.clientY}):(x("desktop"),d({x:e.clientX,y:e.clientY}),u(!0)),setTimeout(()=>{n.current=!1},300)},C=D({onLongPress:e=>{e.preventDefault(),l?(n.current=!0,l(t,"song","mobile")):(n.current=!0,x("mobile"),d(null),u(!0))}});return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:e=>{if(m||n.current){e.preventDefault(),e.stopPropagation();return}k(e)},onContextMenu:A,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${N?"bg-white/10":""}`,...C,children:[s.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:I?s.jsx(T,{className:"w-7 h-7 text-gray-500"}):v?s.jsx(E,{src:O.getAlbumArtUrl(t.AlbumId||t.Id,96),alt:t.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>M(!0)}):s.jsx("div",{className:"w-full h-full bg-zinc-900"})}),s.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[s.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(c==null?void 0:c.Id)===t.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:t.Name}),s.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[t.AlbumArtist||((p=(f=t.ArtistItems)==null?void 0:f[0])==null?void 0:p.Name)||"Unknown Artist",t.Album&&` â€¢ ${t.Album}`]})]}),t.RunTimeTicks&&s.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:y(t.RunTimeTicks)})]}),s.jsx(R,{item:t,itemType:"song",isOpen:m,onClose:()=>u(!1),mode:g,position:w||void 0})]})}export{z as S};
