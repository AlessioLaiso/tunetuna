var cm=Object.defineProperty;var um=(e,t,n)=>t in e?cm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zn=(e,t,n)=>um(e,typeof t!="symbol"?t+"":t,n);function dm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Tu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ru={exports:{}},_l={},Lu={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=Symbol.for("react.element"),fm=Symbol.for("react.portal"),mm=Symbol.for("react.fragment"),hm=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),gm=Symbol.for("react.provider"),xm=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),wm=Symbol.for("react.memo"),Sm=Symbol.for("react.lazy"),qi=Symbol.iterator;function Nm(e){return e===null||typeof e!="object"?null:(e=qi&&e[qi]||e["@@iterator"],typeof e=="function"?e:null)}var zu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ou=Object.assign,_u={};function Pr(e,t,n){this.props=e,this.context=t,this.refs=_u,this.updater=n||zu}Pr.prototype.isReactComponent={};Pr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Du(){}Du.prototype=Pr.prototype;function Da(e,t,n){this.props=e,this.context=t,this.refs=_u,this.updater=n||zu}var $a=Da.prototype=new Du;$a.constructor=Da;Ou($a,Pr.prototype);$a.isPureReactComponent=!0;var Xi=Array.isArray,$u=Object.prototype.hasOwnProperty,Fa={current:null},Fu={key:!0,ref:!0,__self:!0,__source:!0};function Uu(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)$u.call(t,r)&&!Fu.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:bs,type:e,key:o,ref:a,props:s,_owner:Fa.current}}function jm(e,t){return{$$typeof:bs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ua(e){return typeof e=="object"&&e!==null&&e.$$typeof===bs}function bm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ki=/\/+/g;function lo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bm(""+e.key):t.toString(36)}function Zs(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case bs:case fm:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+lo(a,0):r,Xi(s)?(n="",e!=null&&(n=e.replace(Ki,"$&/")+"/"),Zs(s,t,n,"",function(d){return d})):s!=null&&(Ua(s)&&(s=jm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ki,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Xi(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+lo(o,i);a+=Zs(o,t,n,c,s)}else if(c=Nm(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+lo(o,i++),a+=Zs(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ts(e,t,n){if(e==null)return e;var r=[],s=0;return Zs(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Im(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},el={transition:null},km={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:el,ReactCurrentOwner:Fa};function Bu(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Ts,forEach:function(e,t,n){Ts(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ts(e,function(){t++}),t},toArray:function(e){return Ts(e,function(t){return t})||[]},only:function(e){if(!Ua(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=Pr;ye.Fragment=mm;ye.Profiler=pm;ye.PureComponent=Da;ye.StrictMode=hm;ye.Suspense=ym;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=km;ye.act=Bu;ye.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ou({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Fa.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)$u.call(t,c)&&!Fu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:bs,type:e.type,key:s,ref:o,props:r,_owner:a}};ye.createContext=function(e){return e={$$typeof:xm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gm,_context:e},e.Consumer=e};ye.createElement=Uu;ye.createFactory=function(e){var t=Uu.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:vm,render:e}};ye.isValidElement=Ua;ye.lazy=function(e){return{$$typeof:Sm,_payload:{_status:-1,_result:e},_init:Im}};ye.memo=function(e,t){return{$$typeof:wm,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=el.transition;el.transition={};try{e()}finally{el.transition=t}};ye.unstable_act=Bu;ye.useCallback=function(e,t){return ut.current.useCallback(e,t)};ye.useContext=function(e){return ut.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};ye.useEffect=function(e,t){return ut.current.useEffect(e,t)};ye.useId=function(){return ut.current.useId()};ye.useImperativeHandle=function(e,t,n){return ut.current.useImperativeHandle(e,t,n)};ye.useInsertionEffect=function(e,t){return ut.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return ut.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return ut.current.useMemo(e,t)};ye.useReducer=function(e,t,n){return ut.current.useReducer(e,t,n)};ye.useRef=function(e){return ut.current.useRef(e)};ye.useState=function(e){return ut.current.useState(e)};ye.useSyncExternalStore=function(e,t,n){return ut.current.useSyncExternalStore(e,t,n)};ye.useTransition=function(){return ut.current.useTransition()};ye.version="18.3.1";Lu.exports=ye;var u=Lu.exports;const Ba=Tu(u),Cm=dm({__proto__:null,default:Ba},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=u,Pm=Symbol.for("react.element"),Em=Symbol.for("react.fragment"),Mm=Object.prototype.hasOwnProperty,Tm=Am.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rm={key:!0,ref:!0,__self:!0,__source:!0};function Gu(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Mm.call(t,r)&&!Rm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Pm,type:e,key:o,ref:a,props:s,_owner:Tm.current}}_l.Fragment=Em;_l.jsx=Gu;_l.jsxs=Gu;Ru.exports=_l;var l=Ru.exports,Uo={},Hu={exports:{}},Nt={},Vu={exports:{}},Yu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,U){var B=D.length;D.push(U);e:for(;0<B;){var J=B-1>>>1,Q=D[J];if(0<s(Q,U))D[J]=U,D[B]=Q,B=J;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var U=D[0],B=D.pop();if(B!==U){D[0]=B;e:for(var J=0,Q=D.length,ge=Q>>>1;J<ge;){var ae=2*(J+1)-1,pe=D[ae],H=ae+1,$=D[H];if(0>s(pe,B))H<Q&&0>s($,pe)?(D[J]=$,D[H]=B,J=H):(D[J]=pe,D[ae]=B,J=ae);else if(H<Q&&0>s($,B))D[J]=$,D[H]=B,J=H;else break e}}return U}function s(D,U){var B=D.sortIndex-U.sortIndex;return B!==0?B:D.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],f=1,p=null,h=3,y=!1,w=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=D)r(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(d)}}function N(D){if(g=!1,v(D),!w)if(n(c)!==null)w=!0,fe(j);else{var U=n(d);U!==null&&W(N,U.startTime-D)}}function j(D,U){w=!1,g&&(g=!1,x(I),I=-1),y=!0;var B=h;try{for(v(U),p=n(c);p!==null&&(!(p.expirationTime>U)||D&&!P());){var J=p.callback;if(typeof J=="function"){p.callback=null,h=p.priorityLevel;var Q=J(p.expirationTime<=U);U=e.unstable_now(),typeof Q=="function"?p.callback=Q:p===n(c)&&r(c),v(U)}else r(c);p=n(c)}if(p!==null)var ge=!0;else{var ae=n(d);ae!==null&&W(N,ae.startTime-U),ge=!1}return ge}finally{p=null,h=B,y=!1}}var b=!1,k=null,I=-1,M=5,E=-1;function P(){return!(e.unstable_now()-E<M)}function V(){if(k!==null){var D=e.unstable_now();E=D;var U=!0;try{U=k(!0,D)}finally{U?Z():(b=!1,k=null)}}else b=!1}var Z;if(typeof m=="function")Z=function(){m(V)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ue=le.port2;le.port1.onmessage=V,Z=function(){ue.postMessage(null)}}else Z=function(){S(V,0)};function fe(D){k=D,b||(b=!0,Z())}function W(D,U){I=S(function(){D(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,fe(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var B=h;h=U;try{return D()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,U){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=h;h=D;try{return U()}finally{h=B}},e.unstable_scheduleCallback=function(D,U,B){var J=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?J+B:J):B=J,D){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=B+Q,D={id:f++,callback:U,priorityLevel:D,startTime:B,expirationTime:Q,sortIndex:-1},B>J?(D.sortIndex=B,t(d,D),n(c)===null&&D===n(d)&&(g?(x(I),I=-1):g=!0,W(N,B-J))):(D.sortIndex=Q,t(c,D),w||y||(w=!0,fe(j))),D},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(D){var U=h;return function(){var B=h;h=U;try{return D.apply(this,arguments)}finally{h=B}}}})(Yu);Vu.exports=Yu;var Lm=Vu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=u,St=Lm;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qu=new Set,rs={};function Jn(e,t){Sr(e,t),Sr(e+"Capture",t)}function Sr(e,t){for(rs[e]=t,e=0;e<t.length;e++)Qu.add(t[e])}var nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bo=Object.prototype.hasOwnProperty,Om=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ji={},Zi={};function _m(e){return Bo.call(Zi,e)?!0:Bo.call(Ji,e)?!1:Om.test(e)?Zi[e]=!0:(Ji[e]=!0,!1)}function Dm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $m(e,t,n,r){if(t===null||typeof t>"u"||Dm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){et[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];et[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){et[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){et[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){et[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){et[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){et[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){et[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){et[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ga=/[\-:]([a-z])/g;function Ha(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ga,Ha);et[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ga,Ha);et[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ga,Ha);et[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){et[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});et.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){et[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Va(e,t,n,r){var s=et.hasOwnProperty(t)?et[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($m(t,n,s,r)&&(n=null),r||s===null?_m(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var on=zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rs=Symbol.for("react.element"),rr=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),Ya=Symbol.for("react.strict_mode"),Go=Symbol.for("react.profiler"),Wu=Symbol.for("react.provider"),qu=Symbol.for("react.context"),Qa=Symbol.for("react.forward_ref"),Ho=Symbol.for("react.suspense"),Vo=Symbol.for("react.suspense_list"),Wa=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),Xu=Symbol.for("react.offscreen"),ec=Symbol.iterator;function zr(e){return e===null||typeof e!="object"?null:(e=ec&&e[ec]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,oo;function Gr(e){if(oo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);oo=t&&t[1]||""}return`
`+oo+e}var ao=!1;function io(e,t){if(!e||ao)return"";ao=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{ao=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Gr(e):""}function Fm(e){switch(e.tag){case 5:return Gr(e.type);case 16:return Gr("Lazy");case 13:return Gr("Suspense");case 19:return Gr("SuspenseList");case 0:case 2:case 15:return e=io(e.type,!1),e;case 11:return e=io(e.type.render,!1),e;case 1:return e=io(e.type,!0),e;default:return""}}function Yo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sr:return"Fragment";case rr:return"Portal";case Go:return"Profiler";case Ya:return"StrictMode";case Ho:return"Suspense";case Vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qu:return(e.displayName||"Context")+".Consumer";case Wu:return(e._context.displayName||"Context")+".Provider";case Qa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wa:return t=e.displayName||null,t!==null?t:Yo(e.type)||"Memo";case dn:t=e._payload,e=e._init;try{return Yo(e(t))}catch{}}return null}function Um(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yo(t);case 8:return t===Ya?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ku(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bm(e){var t=Ku(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ls(e){e._valueTracker||(e._valueTracker=Bm(e))}function Ju(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ku(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qo(e,t){var n=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function tc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zu(e,t){t=t.checked,t!=null&&Va(e,"checked",t,!1)}function Wo(e,t){Zu(e,t);var n=Cn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qo(e,t.type,n):t.hasOwnProperty("defaultValue")&&qo(e,t.type,Cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function qo(e,t,n){(t!=="number"||fl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Hr=Array.isArray;function pr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Xo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(Hr(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cn(n)}}function ed(e,t){var n=Cn(t.value),r=Cn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function td(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ko(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?td(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zs,nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ss(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gm=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(e){Gm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qr[t]=Qr[e]})});function rd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Qr.hasOwnProperty(e)&&Qr[e]?(""+t).trim():t+"px"}function sd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=rd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Hm=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jo(e,t){if(t){if(Hm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Zo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ea=null;function qa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ta=null,gr=null,xr=null;function lc(e){if(e=Cs(e)){if(typeof ta!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Bl(t),ta(e.stateNode,e.type,t))}}function ld(e){gr?xr?xr.push(e):xr=[e]:gr=e}function od(){if(gr){var e=gr,t=xr;if(xr=gr=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function ad(e,t){return e(t)}function id(){}var co=!1;function cd(e,t,n){if(co)return e(t,n);co=!0;try{return ad(e,t,n)}finally{co=!1,(gr!==null||xr!==null)&&(id(),od())}}function ls(e,t){var n=e.stateNode;if(n===null)return null;var r=Bl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var na=!1;if(nn)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){na=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{na=!1}function Vm(e,t,n,r,s,o,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var Wr=!1,ml=null,hl=!1,ra=null,Ym={onError:function(e){Wr=!0,ml=e}};function Qm(e,t,n,r,s,o,a,i,c){Wr=!1,ml=null,Vm.apply(Ym,arguments)}function Wm(e,t,n,r,s,o,a,i,c){if(Qm.apply(this,arguments),Wr){if(Wr){var d=ml;Wr=!1,ml=null}else throw Error(G(198));hl||(hl=!0,ra=d)}}function Zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ud(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oc(e){if(Zn(e)!==e)throw Error(G(188))}function qm(e){var t=e.alternate;if(!t){if(t=Zn(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return oc(s),e;if(o===r)return oc(s),t;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function dd(e){return e=qm(e),e!==null?fd(e):null}function fd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fd(e);if(t!==null)return t;e=e.sibling}return null}var md=St.unstable_scheduleCallback,ac=St.unstable_cancelCallback,Xm=St.unstable_shouldYield,Km=St.unstable_requestPaint,Ue=St.unstable_now,Jm=St.unstable_getCurrentPriorityLevel,Xa=St.unstable_ImmediatePriority,hd=St.unstable_UserBlockingPriority,pl=St.unstable_NormalPriority,Zm=St.unstable_LowPriority,pd=St.unstable_IdlePriority,Dl=null,Vt=null;function eh(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Dl,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:rh,th=Math.log,nh=Math.LN2;function rh(e){return e>>>=0,e===0?32:31-(th(e)/nh|0)|0}var Os=64,_s=4194304;function Vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Vr(i):(o&=a,o!==0&&(r=Vr(o)))}else a=n&~s,a!==0?r=Vr(a):o!==0&&(r=Vr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_t(t),s=1<<n,r|=e[n],t&=~s;return r}function sh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-_t(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=sh(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function sa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gd(){var e=Os;return Os<<=1,!(Os&4194240)&&(Os=64),e}function uo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Is(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=n}function oh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-_t(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Ka(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_t(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ae=0;function xd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vd,Ja,yd,wd,Sd,la=!1,Ds=[],vn=null,yn=null,wn=null,os=new Map,as=new Map,mn=[],ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ic(e,t){switch(e){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":os.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":as.delete(t.pointerId)}}function _r(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Cs(t),t!==null&&Ja(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function ih(e,t,n,r,s){switch(t){case"focusin":return vn=_r(vn,e,t,n,r,s),!0;case"dragenter":return yn=_r(yn,e,t,n,r,s),!0;case"mouseover":return wn=_r(wn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return os.set(o,_r(os.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,as.set(o,_r(as.get(o)||null,e,t,n,r,s)),!0}return!1}function Nd(e){var t=Dn(e.target);if(t!==null){var n=Zn(t);if(n!==null){if(t=n.tag,t===13){if(t=ud(n),t!==null){e.blockedOn=t,Sd(e.priority,function(){yd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=oa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ea=r,n.target.dispatchEvent(r),ea=null}else return t=Cs(n),t!==null&&Ja(t),e.blockedOn=n,!1;t.shift()}return!0}function cc(e,t,n){tl(e)&&n.delete(t)}function ch(){la=!1,vn!==null&&tl(vn)&&(vn=null),yn!==null&&tl(yn)&&(yn=null),wn!==null&&tl(wn)&&(wn=null),os.forEach(cc),as.forEach(cc)}function Dr(e,t){e.blockedOn===t&&(e.blockedOn=null,la||(la=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,ch)))}function is(e){function t(s){return Dr(s,e)}if(0<Ds.length){Dr(Ds[0],e);for(var n=1;n<Ds.length;n++){var r=Ds[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vn!==null&&Dr(vn,e),yn!==null&&Dr(yn,e),wn!==null&&Dr(wn,e),os.forEach(t),as.forEach(t),n=0;n<mn.length;n++)r=mn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mn.length&&(n=mn[0],n.blockedOn===null);)Nd(n),n.blockedOn===null&&mn.shift()}var vr=on.ReactCurrentBatchConfig,xl=!0;function uh(e,t,n,r){var s=Ae,o=vr.transition;vr.transition=null;try{Ae=1,Za(e,t,n,r)}finally{Ae=s,vr.transition=o}}function dh(e,t,n,r){var s=Ae,o=vr.transition;vr.transition=null;try{Ae=4,Za(e,t,n,r)}finally{Ae=s,vr.transition=o}}function Za(e,t,n,r){if(xl){var s=oa(e,t,n,r);if(s===null)So(e,t,r,vl,n),ic(e,r);else if(ih(s,e,t,n,r))r.stopPropagation();else if(ic(e,r),t&4&&-1<ah.indexOf(e)){for(;s!==null;){var o=Cs(s);if(o!==null&&vd(o),o=oa(e,t,n,r),o===null&&So(e,t,r,vl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else So(e,t,r,null,n)}}var vl=null;function oa(e,t,n,r){if(vl=null,e=qa(r),e=Dn(e),e!==null)if(t=Zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ud(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vl=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jm()){case Xa:return 1;case hd:return 4;case pl:case Zm:return 16;case pd:return 536870912;default:return 16}default:return 16}}var pn=null,ei=null,nl=null;function bd(){if(nl)return nl;var e,t=ei,n=t.length,r,s="value"in pn?pn.value:pn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return nl=s.slice(e,1<r?1-r:void 0)}function rl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $s(){return!0}function uc(){return!1}function jt(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$s:uc,this.isPropagationStopped=uc,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),t}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ti=jt(Er),ks=De({},Er,{view:0,detail:0}),fh=jt(ks),fo,mo,$r,$l=De({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ni,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(fo=e.screenX-$r.screenX,mo=e.screenY-$r.screenY):mo=fo=0,$r=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:mo}}),dc=jt($l),mh=De({},$l,{dataTransfer:0}),hh=jt(mh),ph=De({},ks,{relatedTarget:0}),ho=jt(ph),gh=De({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),xh=jt(gh),vh=De({},Er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yh=jt(vh),wh=De({},Er,{data:0}),fc=jt(wh),Sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jh[e])?!!t[e]:!1}function ni(){return bh}var Ih=De({},ks,{key:function(e){if(e.key){var t=Sh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ni,charCode:function(e){return e.type==="keypress"?rl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kh=jt(Ih),Ch=De({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=jt(Ch),Ah=De({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ni}),Ph=jt(Ah),Eh=De({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mh=jt(Eh),Th=De({},$l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rh=jt(Th),Lh=[9,13,27,32],ri=nn&&"CompositionEvent"in window,qr=null;nn&&"documentMode"in document&&(qr=document.documentMode);var zh=nn&&"TextEvent"in window&&!qr,Id=nn&&(!ri||qr&&8<qr&&11>=qr),hc=" ",pc=!1;function kd(e,t){switch(e){case"keyup":return Lh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lr=!1;function Oh(e,t){switch(e){case"compositionend":return Cd(t);case"keypress":return t.which!==32?null:(pc=!0,hc);case"textInput":return e=t.data,e===hc&&pc?null:e;default:return null}}function _h(e,t){if(lr)return e==="compositionend"||!ri&&kd(e,t)?(e=bd(),nl=ei=pn=null,lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Id&&t.locale!=="ko"?null:t.data;default:return null}}var Dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Dh[e.type]:t==="textarea"}function Ad(e,t,n,r){ld(r),t=yl(t,"onChange"),0<t.length&&(n=new ti("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xr=null,cs=null;function $h(e){$d(e,0)}function Fl(e){var t=ir(e);if(Ju(t))return e}function Fh(e,t){if(e==="change")return t}var Pd=!1;if(nn){var po;if(nn){var go="oninput"in document;if(!go){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),go=typeof xc.oninput=="function"}po=go}else po=!1;Pd=po&&(!document.documentMode||9<document.documentMode)}function vc(){Xr&&(Xr.detachEvent("onpropertychange",Ed),cs=Xr=null)}function Ed(e){if(e.propertyName==="value"&&Fl(cs)){var t=[];Ad(t,cs,e,qa(e)),cd($h,t)}}function Uh(e,t,n){e==="focusin"?(vc(),Xr=t,cs=n,Xr.attachEvent("onpropertychange",Ed)):e==="focusout"&&vc()}function Bh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fl(cs)}function Gh(e,t){if(e==="click")return Fl(t)}function Hh(e,t){if(e==="input"||e==="change")return Fl(t)}function Vh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:Vh;function us(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Bo.call(t,s)||!$t(e[s],t[s]))return!1}return!0}function yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wc(e,t){var n=yc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yc(n)}}function Md(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Md(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Td(){for(var e=window,t=fl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fl(e.document)}return t}function si(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Yh(e){var t=Td(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Md(n.ownerDocument.documentElement,n)){if(r!==null&&si(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=wc(n,o);var a=wc(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qh=nn&&"documentMode"in document&&11>=document.documentMode,or=null,aa=null,Kr=null,ia=!1;function Sc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ia||or==null||or!==fl(r)||(r=or,"selectionStart"in r&&si(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kr&&us(Kr,r)||(Kr=r,r=yl(aa,"onSelect"),0<r.length&&(t=new ti("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function Fs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ar={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionend:Fs("Transition","TransitionEnd")},xo={},Rd={};nn&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function Ul(e){if(xo[e])return xo[e];if(!ar[e])return e;var t=ar[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rd)return xo[e]=t[n];return e}var Ld=Ul("animationend"),zd=Ul("animationiteration"),Od=Ul("animationstart"),_d=Ul("transitionend"),Dd=new Map,Nc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(e,t){Dd.set(e,t),Jn(t,[e])}for(var vo=0;vo<Nc.length;vo++){var yo=Nc[vo],Wh=yo.toLowerCase(),qh=yo[0].toUpperCase()+yo.slice(1);En(Wh,"on"+qh)}En(Ld,"onAnimationEnd");En(zd,"onAnimationIteration");En(Od,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(_d,"onTransitionEnd");Sr("onMouseEnter",["mouseout","mouseover"]);Sr("onMouseLeave",["mouseout","mouseover"]);Sr("onPointerEnter",["pointerout","pointerover"]);Sr("onPointerLeave",["pointerout","pointerover"]);Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yr));function jc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Wm(r,t,void 0,e),e.currentTarget=null}function $d(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;jc(s,i,d),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;jc(s,i,d),o=c}}}if(hl)throw e=ra,hl=!1,ra=null,e}function Re(e,t){var n=t[ma];n===void 0&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Fd(t,e,2,!1),n.add(r))}function wo(e,t,n){var r=0;t&&(r|=4),Fd(n,e,r,t)}var Us="_reactListening"+Math.random().toString(36).slice(2);function ds(e){if(!e[Us]){e[Us]=!0,Qu.forEach(function(n){n!=="selectionchange"&&(Xh.has(n)||wo(n,!1,e),wo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Us]||(t[Us]=!0,wo("selectionchange",!1,t))}}function Fd(e,t,n,r){switch(jd(t)){case 1:var s=uh;break;case 4:s=dh;break;default:s=Za}n=s.bind(null,t,n,e),s=void 0,!na||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function So(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Dn(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}cd(function(){var d=o,f=qa(n),p=[];e:{var h=Dd.get(e);if(h!==void 0){var y=ti,w=e;switch(e){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":y=kh;break;case"focusin":w="focus",y=ho;break;case"focusout":w="blur",y=ho;break;case"beforeblur":case"afterblur":y=ho;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Ph;break;case Ld:case zd:case Od:y=xh;break;case _d:y=Mh;break;case"scroll":y=fh;break;case"wheel":y=Rh;break;case"copy":case"cut":case"paste":y=yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mc}var g=(t&4)!==0,S=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var m=d,v;m!==null;){v=m;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,x!==null&&(N=ls(m,x),N!=null&&g.push(fs(m,N,v)))),S)break;m=m.return}0<g.length&&(h=new y(h,w,null,n,f),p.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==ea&&(w=n.relatedTarget||n.fromElement)&&(Dn(w)||w[rn]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=d,w=w?Dn(w):null,w!==null&&(S=Zn(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=d),y!==w)){if(g=dc,N="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=mc,N="onPointerLeave",x="onPointerEnter",m="pointer"),S=y==null?h:ir(y),v=w==null?h:ir(w),h=new g(N,m+"leave",y,n,f),h.target=S,h.relatedTarget=v,N=null,Dn(f)===d&&(g=new g(x,m+"enter",w,n,f),g.target=v,g.relatedTarget=S,N=g),S=N,y&&w)t:{for(g=y,x=w,m=0,v=g;v;v=tr(v))m++;for(v=0,N=x;N;N=tr(N))v++;for(;0<m-v;)g=tr(g),m--;for(;0<v-m;)x=tr(x),v--;for(;m--;){if(g===x||x!==null&&g===x.alternate)break t;g=tr(g),x=tr(x)}g=null}else g=null;y!==null&&bc(p,h,y,g,!1),w!==null&&S!==null&&bc(p,S,w,g,!0)}}e:{if(h=d?ir(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var j=Fh;else if(gc(h))if(Pd)j=Hh;else{j=Bh;var b=Uh}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Gh);if(j&&(j=j(e,d))){Ad(p,j,n,f);break e}b&&b(e,h,d),e==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&qo(h,"number",h.value)}switch(b=d?ir(d):window,e){case"focusin":(gc(b)||b.contentEditable==="true")&&(or=b,aa=d,Kr=null);break;case"focusout":Kr=aa=or=null;break;case"mousedown":ia=!0;break;case"contextmenu":case"mouseup":case"dragend":ia=!1,Sc(p,n,f);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":Sc(p,n,f)}var k;if(ri)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else lr?kd(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Id&&n.locale!=="ko"&&(lr||I!=="onCompositionStart"?I==="onCompositionEnd"&&lr&&(k=bd()):(pn=f,ei="value"in pn?pn.value:pn.textContent,lr=!0)),b=yl(d,I),0<b.length&&(I=new fc(I,e,null,n,f),p.push({event:I,listeners:b}),k?I.data=k:(k=Cd(n),k!==null&&(I.data=k)))),(k=zh?Oh(e,n):_h(e,n))&&(d=yl(d,"onBeforeInput"),0<d.length&&(f=new fc("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=k))}$d(p,t)})}function fs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ls(e,n),o!=null&&r.unshift(fs(e,o,s)),o=ls(e,t),o!=null&&r.push(fs(e,o,s))),e=e.return}return r}function tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bc(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=ls(n,o),c!=null&&a.unshift(fs(n,c,i))):s||(c=ls(n,o),c!=null&&a.push(fs(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Kh=/\r\n?/g,Jh=/\u0000|\uFFFD/g;function Ic(e){return(typeof e=="string"?e:""+e).replace(Kh,`
`).replace(Jh,"")}function Bs(e,t,n){if(t=Ic(t),Ic(e)!==t&&n)throw Error(G(425))}function wl(){}var ca=null,ua=null;function da(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fa=typeof setTimeout=="function"?setTimeout:void 0,Zh=typeof clearTimeout=="function"?clearTimeout:void 0,kc=typeof Promise=="function"?Promise:void 0,ep=typeof queueMicrotask=="function"?queueMicrotask:typeof kc<"u"?function(e){return kc.resolve(null).then(e).catch(tp)}:fa;function tp(e){setTimeout(function(){throw e})}function No(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),is(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);is(t)}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Mr,ms="__reactProps$"+Mr,rn="__reactContainer$"+Mr,ma="__reactEvents$"+Mr,np="__reactListeners$"+Mr,rp="__reactHandles$"+Mr;function Dn(e){var t=e[Ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rn]||n[Ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Cc(e);e!==null;){if(n=e[Ht])return n;e=Cc(e)}return t}e=n,n=e.parentNode}return null}function Cs(e){return e=e[Ht]||e[rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Bl(e){return e[ms]||null}var ha=[],cr=-1;function Mn(e){return{current:e}}function Le(e){0>cr||(e.current=ha[cr],ha[cr]=null,cr--)}function Me(e,t){cr++,ha[cr]=e.current,e.current=t}var An={},lt=Mn(An),ht=Mn(!1),Hn=An;function Nr(e,t){var n=e.type.contextTypes;if(!n)return An;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function pt(e){return e=e.childContextTypes,e!=null}function Sl(){Le(ht),Le(lt)}function Ac(e,t,n){if(lt.current!==An)throw Error(G(168));Me(lt,t),Me(ht,n)}function Ud(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(G(108,Um(e)||"Unknown",s));return De({},n,r)}function Nl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||An,Hn=lt.current,Me(lt,e),Me(ht,ht.current),!0}function Pc(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=Ud(e,t,Hn),r.__reactInternalMemoizedMergedChildContext=e,Le(ht),Le(lt),Me(lt,e)):Le(ht),Me(ht,n)}var Kt=null,Gl=!1,jo=!1;function Bd(e){Kt===null?Kt=[e]:Kt.push(e)}function sp(e){Gl=!0,Bd(e)}function Tn(){if(!jo&&Kt!==null){jo=!0;var e=0,t=Ae;try{var n=Kt;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kt=null,Gl=!1}catch(s){throw Kt!==null&&(Kt=Kt.slice(e+1)),md(Xa,Tn),s}finally{Ae=t,jo=!1}}return null}var ur=[],dr=0,jl=null,bl=0,It=[],kt=0,Vn=null,Jt=1,Zt="";function On(e,t){ur[dr++]=bl,ur[dr++]=jl,jl=e,bl=t}function Gd(e,t,n){It[kt++]=Jt,It[kt++]=Zt,It[kt++]=Vn,Vn=e;var r=Jt;e=Zt;var s=32-_t(r)-1;r&=~(1<<s),n+=1;var o=32-_t(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Jt=1<<32-_t(t)+s|n<<s|r,Zt=o+e}else Jt=1<<o|n<<s|r,Zt=e}function li(e){e.return!==null&&(On(e,1),Gd(e,1,0))}function oi(e){for(;e===jl;)jl=ur[--dr],ur[dr]=null,bl=ur[--dr],ur[dr]=null;for(;e===Vn;)Vn=It[--kt],It[kt]=null,Zt=It[--kt],It[kt]=null,Jt=It[--kt],It[kt]=null}var wt=null,yt=null,ze=!1,zt=null;function Hd(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ec(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,yt=Sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:Jt,overflow:Zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wt=e,yt=null,!0):!1;default:return!1}}function pa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ga(e){if(ze){var t=yt;if(t){var n=t;if(!Ec(e,t)){if(pa(e))throw Error(G(418));t=Sn(n.nextSibling);var r=wt;t&&Ec(e,t)?Hd(r,n):(e.flags=e.flags&-4097|2,ze=!1,wt=e)}}else{if(pa(e))throw Error(G(418));e.flags=e.flags&-4097|2,ze=!1,wt=e}}}function Mc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function Gs(e){if(e!==wt)return!1;if(!ze)return Mc(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!da(e.type,e.memoizedProps)),t&&(t=yt)){if(pa(e))throw Vd(),Error(G(418));for(;t;)Hd(e,t),t=Sn(t.nextSibling)}if(Mc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=Sn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=wt?Sn(e.stateNode.nextSibling):null;return!0}function Vd(){for(var e=yt;e;)e=Sn(e.nextSibling)}function jr(){yt=wt=null,ze=!1}function ai(e){zt===null?zt=[e]:zt.push(e)}var lp=on.ReactCurrentBatchConfig;function Fr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tc(e){var t=e._init;return t(e._payload)}function Yd(e){function t(x,m){if(e){var v=x.deletions;v===null?(x.deletions=[m],x.flags|=16):v.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function r(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function s(x,m){return x=In(x,m),x.index=0,x.sibling=null,x}function o(x,m,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<m?(x.flags|=2,m):v):(x.flags|=2,m)):(x.flags|=1048576,m)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function i(x,m,v,N){return m===null||m.tag!==6?(m=Eo(v,x.mode,N),m.return=x,m):(m=s(m,v),m.return=x,m)}function c(x,m,v,N){var j=v.type;return j===sr?f(x,m,v.props.children,N,v.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===dn&&Tc(j)===m.type)?(N=s(m,v.props),N.ref=Fr(x,m,v),N.return=x,N):(N=ul(v.type,v.key,v.props,null,x.mode,N),N.ref=Fr(x,m,v),N.return=x,N)}function d(x,m,v,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Mo(v,x.mode,N),m.return=x,m):(m=s(m,v.children||[]),m.return=x,m)}function f(x,m,v,N,j){return m===null||m.tag!==7?(m=Bn(v,x.mode,N,j),m.return=x,m):(m=s(m,v),m.return=x,m)}function p(x,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Eo(""+m,x.mode,v),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Rs:return v=ul(m.type,m.key,m.props,null,x.mode,v),v.ref=Fr(x,null,m),v.return=x,v;case rr:return m=Mo(m,x.mode,v),m.return=x,m;case dn:var N=m._init;return p(x,N(m._payload),v)}if(Hr(m)||zr(m))return m=Bn(m,x.mode,v,null),m.return=x,m;Hs(x,m)}return null}function h(x,m,v,N){var j=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:i(x,m,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Rs:return v.key===j?c(x,m,v,N):null;case rr:return v.key===j?d(x,m,v,N):null;case dn:return j=v._init,h(x,m,j(v._payload),N)}if(Hr(v)||zr(v))return j!==null?null:f(x,m,v,N,null);Hs(x,v)}return null}function y(x,m,v,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(v)||null,i(m,x,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Rs:return x=x.get(N.key===null?v:N.key)||null,c(m,x,N,j);case rr:return x=x.get(N.key===null?v:N.key)||null,d(m,x,N,j);case dn:var b=N._init;return y(x,m,v,b(N._payload),j)}if(Hr(N)||zr(N))return x=x.get(v)||null,f(m,x,N,j,null);Hs(m,N)}return null}function w(x,m,v,N){for(var j=null,b=null,k=m,I=m=0,M=null;k!==null&&I<v.length;I++){k.index>I?(M=k,k=null):M=k.sibling;var E=h(x,k,v[I],N);if(E===null){k===null&&(k=M);break}e&&k&&E.alternate===null&&t(x,k),m=o(E,m,I),b===null?j=E:b.sibling=E,b=E,k=M}if(I===v.length)return n(x,k),ze&&On(x,I),j;if(k===null){for(;I<v.length;I++)k=p(x,v[I],N),k!==null&&(m=o(k,m,I),b===null?j=k:b.sibling=k,b=k);return ze&&On(x,I),j}for(k=r(x,k);I<v.length;I++)M=y(k,x,I,v[I],N),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?I:M.key),m=o(M,m,I),b===null?j=M:b.sibling=M,b=M);return e&&k.forEach(function(P){return t(x,P)}),ze&&On(x,I),j}function g(x,m,v,N){var j=zr(v);if(typeof j!="function")throw Error(G(150));if(v=j.call(v),v==null)throw Error(G(151));for(var b=j=null,k=m,I=m=0,M=null,E=v.next();k!==null&&!E.done;I++,E=v.next()){k.index>I?(M=k,k=null):M=k.sibling;var P=h(x,k,E.value,N);if(P===null){k===null&&(k=M);break}e&&k&&P.alternate===null&&t(x,k),m=o(P,m,I),b===null?j=P:b.sibling=P,b=P,k=M}if(E.done)return n(x,k),ze&&On(x,I),j;if(k===null){for(;!E.done;I++,E=v.next())E=p(x,E.value,N),E!==null&&(m=o(E,m,I),b===null?j=E:b.sibling=E,b=E);return ze&&On(x,I),j}for(k=r(x,k);!E.done;I++,E=v.next())E=y(k,x,I,E.value,N),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?I:E.key),m=o(E,m,I),b===null?j=E:b.sibling=E,b=E);return e&&k.forEach(function(V){return t(x,V)}),ze&&On(x,I),j}function S(x,m,v,N){if(typeof v=="object"&&v!==null&&v.type===sr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Rs:e:{for(var j=v.key,b=m;b!==null;){if(b.key===j){if(j=v.type,j===sr){if(b.tag===7){n(x,b.sibling),m=s(b,v.props.children),m.return=x,x=m;break e}}else if(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===dn&&Tc(j)===b.type){n(x,b.sibling),m=s(b,v.props),m.ref=Fr(x,b,v),m.return=x,x=m;break e}n(x,b);break}else t(x,b);b=b.sibling}v.type===sr?(m=Bn(v.props.children,x.mode,N,v.key),m.return=x,x=m):(N=ul(v.type,v.key,v.props,null,x.mode,N),N.ref=Fr(x,m,v),N.return=x,x=N)}return a(x);case rr:e:{for(b=v.key;m!==null;){if(m.key===b)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(x,m.sibling),m=s(m,v.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=Mo(v,x.mode,N),m.return=x,x=m}return a(x);case dn:return b=v._init,S(x,m,b(v._payload),N)}if(Hr(v))return w(x,m,v,N);if(zr(v))return g(x,m,v,N);Hs(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(x,m.sibling),m=s(m,v),m.return=x,x=m):(n(x,m),m=Eo(v,x.mode,N),m.return=x,x=m),a(x)):n(x,m)}return S}var br=Yd(!0),Qd=Yd(!1),Il=Mn(null),kl=null,fr=null,ii=null;function ci(){ii=fr=kl=null}function ui(e){var t=Il.current;Le(Il),e._currentValue=t}function xa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yr(e,t){kl=e,ii=fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mt=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(ii!==e)if(e={context:e,memoizedValue:t,next:null},fr===null){if(kl===null)throw Error(G(308));fr=e,kl.dependencies={lanes:0,firstContext:e}}else fr=fr.next=e;return t}var $n=null;function di(e){$n===null?$n=[e]:$n.push(e)}function Wd(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,di(t)):(n.next=s.next,s.next=n),t.interleaved=n,sn(e,r)}function sn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fn=!1;function fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function en(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,sn(e,n)}return s=r.interleaved,s===null?(t.next=t,di(r)):(t.next=s.next,s.next=t),r.interleaved=t,sn(e,n)}function sl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ka(e,n)}}function Rc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cl(e,t,n,r){var s=e.updateQueue;fn=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,i=f.lastBaseUpdate,i!==a&&(i===null?f.firstBaseUpdate=d:i.next=d,f.lastBaseUpdate=c))}if(o!==null){var p=s.baseState;a=0,f=d=c=null,i=o;do{var h=i.lane,y=i.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,g=i;switch(h=t,y=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){p=w.call(y,p,h);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,h=typeof w=="function"?w.call(y,p,h):w,h==null)break e;p=De({},p,h);break e;case 2:fn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else y={eventTime:y,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},f===null?(d=f=y,c=p):f=f.next=y,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Qn|=a,e.lanes=a,e.memoizedState=p}}function Lc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var As={},Yt=Mn(As),hs=Mn(As),ps=Mn(As);function Fn(e){if(e===As)throw Error(G(174));return e}function mi(e,t){switch(Me(ps,t),Me(hs,e),Me(Yt,As),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ko(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ko(t,e)}Le(Yt),Me(Yt,t)}function Ir(){Le(Yt),Le(hs),Le(ps)}function Xd(e){Fn(ps.current);var t=Fn(Yt.current),n=Ko(t,e.type);t!==n&&(Me(hs,e),Me(Yt,n))}function hi(e){hs.current===e&&(Le(Yt),Le(hs))}var Oe=Mn(0);function Al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bo=[];function pi(){for(var e=0;e<bo.length;e++)bo[e]._workInProgressVersionPrimary=null;bo.length=0}var ll=on.ReactCurrentDispatcher,Io=on.ReactCurrentBatchConfig,Yn=0,_e=null,Ve=null,qe=null,Pl=!1,Jr=!1,gs=0,op=0;function nt(){throw Error(G(321))}function gi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$t(e[n],t[n]))return!1;return!0}function xi(e,t,n,r,s,o){if(Yn=o,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ll.current=e===null||e.memoizedState===null?up:dp,e=n(r,s),Jr){o=0;do{if(Jr=!1,gs=0,25<=o)throw Error(G(301));o+=1,qe=Ve=null,t.updateQueue=null,ll.current=fp,e=n(r,s)}while(Jr)}if(ll.current=El,t=Ve!==null&&Ve.next!==null,Yn=0,qe=Ve=_e=null,Pl=!1,t)throw Error(G(300));return e}function vi(){var e=gs!==0;return gs=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?_e.memoizedState=qe=e:qe=qe.next=e,qe}function Mt(){if(Ve===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=qe===null?_e.memoizedState:qe.next;if(t!==null)qe=t,Ve=e;else{if(e===null)throw Error(G(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},qe===null?_e.memoizedState=qe=e:qe=qe.next=e}return qe}function xs(e,t){return typeof t=="function"?t(e):t}function ko(e){var t=Mt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=Ve,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,d=o;do{var f=d.lane;if((Yn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=p,a=r):c=c.next=p,_e.lanes|=f,Qn|=f}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=i,$t(r,t.memoizedState)||(mt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,_e.lanes|=o,Qn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Co(e){var t=Mt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);$t(o,t.memoizedState)||(mt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Kd(){}function Jd(e,t){var n=_e,r=Mt(),s=t(),o=!$t(r.memoizedState,s);if(o&&(r.memoizedState=s,mt=!0),r=r.queue,yi(tf.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,vs(9,ef.bind(null,n,r,s,t),void 0,null),Xe===null)throw Error(G(349));Yn&30||Zd(n,t,s)}return s}function Zd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ef(e,t,n,r){t.value=n,t.getSnapshot=r,nf(t)&&rf(e)}function tf(e,t,n){return n(function(){nf(t)&&rf(e)})}function nf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$t(e,n)}catch{return!0}}function rf(e){var t=sn(e,1);t!==null&&Dt(t,e,1,-1)}function zc(e){var t=Gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=cp.bind(null,_e,e),[t.memoizedState,e]}function vs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sf(){return Mt().memoizedState}function ol(e,t,n,r){var s=Gt();_e.flags|=e,s.memoizedState=vs(1|t,n,void 0,r===void 0?null:r)}function Hl(e,t,n,r){var s=Mt();r=r===void 0?null:r;var o=void 0;if(Ve!==null){var a=Ve.memoizedState;if(o=a.destroy,r!==null&&gi(r,a.deps)){s.memoizedState=vs(t,n,o,r);return}}_e.flags|=e,s.memoizedState=vs(1|t,n,o,r)}function Oc(e,t){return ol(8390656,8,e,t)}function yi(e,t){return Hl(2048,8,e,t)}function lf(e,t){return Hl(4,2,e,t)}function of(e,t){return Hl(4,4,e,t)}function af(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cf(e,t,n){return n=n!=null?n.concat([e]):null,Hl(4,4,af.bind(null,t,e),n)}function wi(){}function uf(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function df(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ff(e,t,n){return Yn&21?($t(n,t)||(n=gd(),_e.lanes|=n,Qn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=n)}function ap(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=Io.transition;Io.transition={};try{e(!1),t()}finally{Ae=n,Io.transition=r}}function mf(){return Mt().memoizedState}function ip(e,t,n){var r=bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hf(e))pf(t,n);else if(n=Wd(e,t,n,r),n!==null){var s=it();Dt(n,e,r,s),gf(n,t,r)}}function cp(e,t,n){var r=bn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hf(e))pf(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,$t(i,a)){var c=t.interleaved;c===null?(s.next=s,di(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Wd(e,t,s,r),n!==null&&(s=it(),Dt(n,e,r,s),gf(n,t,r))}}function hf(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function pf(e,t){Jr=Pl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ka(e,n)}}var El={readContext:Et,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},up={readContext:Et,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:Oc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ol(4194308,4,af.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ol(4194308,4,e,t)},useInsertionEffect:function(e,t){return ol(4,2,e,t)},useMemo:function(e,t){var n=Gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ip.bind(null,_e,e),[r.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:zc,useDebugValue:wi,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=zc(!1),t=e[0];return e=ap.bind(null,e[1]),Gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_e,s=Gt();if(ze){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),Xe===null)throw Error(G(349));Yn&30||Zd(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Oc(tf.bind(null,r,o,e),[e]),r.flags|=2048,vs(9,ef.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Gt(),t=Xe.identifierPrefix;if(ze){var n=Zt,r=Jt;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=op++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dp={readContext:Et,useCallback:uf,useContext:Et,useEffect:yi,useImperativeHandle:cf,useInsertionEffect:lf,useLayoutEffect:of,useMemo:df,useReducer:ko,useRef:sf,useState:function(){return ko(xs)},useDebugValue:wi,useDeferredValue:function(e){var t=Mt();return ff(t,Ve.memoizedState,e)},useTransition:function(){var e=ko(xs)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:Kd,useSyncExternalStore:Jd,useId:mf,unstable_isNewReconciler:!1},fp={readContext:Et,useCallback:uf,useContext:Et,useEffect:yi,useImperativeHandle:cf,useInsertionEffect:lf,useLayoutEffect:of,useMemo:df,useReducer:Co,useRef:sf,useState:function(){return Co(xs)},useDebugValue:wi,useDeferredValue:function(e){var t=Mt();return Ve===null?t.memoizedState=e:ff(t,Ve.memoizedState,e)},useTransition:function(){var e=Co(xs)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:Kd,useSyncExternalStore:Jd,useId:mf,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function va(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:De({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vl={isMounted:function(e){return(e=e._reactInternals)?Zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=it(),s=bn(e),o=en(r,s);o.payload=t,n!=null&&(o.callback=n),t=Nn(e,o,s),t!==null&&(Dt(t,e,s,r),sl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=it(),s=bn(e),o=en(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Nn(e,o,s),t!==null&&(Dt(t,e,s,r),sl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),r=bn(e),s=en(n,r);s.tag=2,t!=null&&(s.callback=t),t=Nn(e,s,r),t!==null&&(Dt(t,e,r,n),sl(t,e,r))}};function _c(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!us(n,r)||!us(s,o):!0}function xf(e,t,n){var r=!1,s=An,o=t.contextType;return typeof o=="object"&&o!==null?o=Et(o):(s=pt(t)?Hn:lt.current,r=t.contextTypes,o=(r=r!=null)?Nr(e,s):An),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Dc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vl.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},fi(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Et(o):(o=pt(t)?Hn:lt.current,s.context=Nr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(va(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vl.enqueueReplaceState(s,s.state,null),Cl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function kr(e,t){try{var n="",r=t;do n+=Fm(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Ao(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mp=typeof WeakMap=="function"?WeakMap:Map;function vf(e,t,n){n=en(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Tl||(Tl=!0,Ea=r),wa(e,t)},n}function yf(e,t,n){n=en(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){wa(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){wa(e,t),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function $c(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cp.bind(null,e,t,n),t.then(e,e))}function Fc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=en(-1,1),t.tag=2,Nn(n,t,1))),n.lanes|=1),e)}var hp=on.ReactCurrentOwner,mt=!1;function at(e,t,n,r){t.child=e===null?Qd(t,null,n,r):br(t,e.child,n,r)}function Bc(e,t,n,r,s){n=n.render;var o=t.ref;return yr(t,s),r=xi(e,t,n,r,o,s),n=vi(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ln(e,t,s)):(ze&&n&&li(t),t.flags|=1,at(e,t,r,s),t.child)}function Gc(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Ai(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,wf(e,t,o,r,s)):(e=ul(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:us,n(a,r)&&e.ref===t.ref)return ln(e,t,s)}return t.flags|=1,e=In(o,r),e.ref=t.ref,e.return=t,t.child=e}function wf(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(us(o,r)&&e.ref===t.ref)if(mt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(mt=!0);else return t.lanes=e.lanes,ln(e,t,s)}return Sa(e,t,n,r,s)}function Sf(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(hr,vt),vt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(hr,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Me(hr,vt),vt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Me(hr,vt),vt|=r;return at(e,t,s,n),t.child}function Nf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sa(e,t,n,r,s){var o=pt(n)?Hn:lt.current;return o=Nr(t,o),yr(t,s),n=xi(e,t,n,r,o,s),r=vi(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ln(e,t,s)):(ze&&r&&li(t),t.flags|=1,at(e,t,n,s),t.child)}function Hc(e,t,n,r,s){if(pt(n)){var o=!0;Nl(t)}else o=!1;if(yr(t,s),t.stateNode===null)al(e,t),xf(t,n,r),ya(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Et(d):(d=pt(n)?Hn:lt.current,d=Nr(t,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&Dc(t,a,r,d),fn=!1;var h=t.memoizedState;a.state=h,Cl(t,r,a,s),c=t.memoizedState,i!==r||h!==c||ht.current||fn?(typeof f=="function"&&(va(t,n,f,r),c=t.memoizedState),(i=fn||_c(t,n,i,r,h,c,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,qd(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Rt(t.type,i),a.props=d,p=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=pt(n)?Hn:lt.current,c=Nr(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||h!==c)&&Dc(t,a,r,c),fn=!1,h=t.memoizedState,a.state=h,Cl(t,r,a,s);var w=t.memoizedState;i!==p||h!==w||ht.current||fn?(typeof y=="function"&&(va(t,n,y,r),w=t.memoizedState),(d=fn||_c(t,n,d,r,h,w,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,o,s)}function Na(e,t,n,r,s,o){Nf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Pc(t,n,!1),ln(e,t,o);r=t.stateNode,hp.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=br(t,e.child,null,o),t.child=br(t,null,i,o)):at(e,t,i,o),t.memoizedState=r.state,s&&Pc(t,n,!0),t.child}function jf(e){var t=e.stateNode;t.pendingContext?Ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ac(e,t.context,!1),mi(e,t.containerInfo)}function Vc(e,t,n,r,s){return jr(),ai(s),t.flags|=256,at(e,t,n,r),t.child}var ja={dehydrated:null,treeContext:null,retryLane:0};function ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function bf(e,t,n){var r=t.pendingProps,s=Oe.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Me(Oe,s&1),e===null)return ga(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Wl(a,r,0,null),e=Bn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ba(n),t.memoizedState=ja,e):Si(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return pp(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=In(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=In(i,o):(o=Bn(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ba(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=ja,r}return o=e.child,e=o.sibling,r=In(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Si(e,t){return t=Wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vs(e,t,n,r){return r!==null&&ai(r),br(t,e.child,null,n),e=Si(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pp(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Ao(Error(G(422))),Vs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Wl({mode:"visible",children:r.children},s,0,null),o=Bn(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&br(t,e.child,null,a),t.child.memoizedState=ba(a),t.memoizedState=ja,o);if(!(t.mode&1))return Vs(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(G(419)),r=Ao(o,r,void 0),Vs(e,t,a,r)}if(i=(a&e.childLanes)!==0,mt||i){if(r=Xe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,sn(e,s),Dt(r,e,s,-1))}return Ci(),r=Ao(Error(G(421))),Vs(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ap.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,yt=Sn(s.nextSibling),wt=t,ze=!0,zt=null,e!==null&&(It[kt++]=Jt,It[kt++]=Zt,It[kt++]=Vn,Jt=e.id,Zt=e.overflow,Vn=t),t=Si(t,r.children),t.flags|=4096,t)}function Yc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),xa(e.return,t,n)}function Po(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function If(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(at(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yc(e,n,t);else if(e.tag===19)Yc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Me(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Al(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Po(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Al(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Po(t,!0,n,null,o);break;case"together":Po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function al(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=In(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=In(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gp(e,t,n){switch(t.tag){case 3:jf(t),jr();break;case 5:Xd(t);break;case 1:pt(t.type)&&Nl(t);break;case 4:mi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Me(Il,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Me(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?bf(e,t,n):(Me(Oe,Oe.current&1),e=ln(e,t,n),e!==null?e.sibling:null);Me(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return If(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,Sf(e,t,n)}return ln(e,t,n)}var kf,Ia,Cf,Af;kf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ia=function(){};Cf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Fn(Yt.current);var o=null;switch(n){case"input":s=Qo(e,s),r=Qo(e,r),o=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),o=[];break;case"textarea":s=Xo(e,s),r=Xo(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wl)}Jo(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(rs.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(rs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Af=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ur(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xp(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return pt(t.type)&&Sl(),rt(t),null;case 3:return r=t.stateNode,Ir(),Le(ht),Le(lt),pi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Gs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(Ra(zt),zt=null))),Ia(e,t),rt(t),null;case 5:hi(t);var s=Fn(ps.current);if(n=t.type,e!==null&&t.stateNode!=null)Cf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return rt(t),null}if(e=Fn(Yt.current),Gs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ht]=t,r[ms]=o,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Yr.length;s++)Re(Yr[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":tc(r,o),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Re("invalid",r);break;case"textarea":rc(r,o),Re("invalid",r)}Jo(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&Bs(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Bs(r.textContent,i,e),s=["children",""+i]):rs.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":Ls(r),nc(r,o,!0);break;case"textarea":Ls(r),sc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=wl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=td(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ht]=t,e[ms]=r,kf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Zo(n,r),n){case"dialog":Re("cancel",e),Re("close",e),s=r;break;case"iframe":case"object":case"embed":Re("load",e),s=r;break;case"video":case"audio":for(s=0;s<Yr.length;s++)Re(Yr[s],e);s=r;break;case"source":Re("error",e),s=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),s=r;break;case"details":Re("toggle",e),s=r;break;case"input":tc(e,r),s=Qo(e,r),Re("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Re("invalid",e);break;case"textarea":rc(e,r),s=Xo(e,r),Re("invalid",e);break;default:s=r}Jo(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?sd(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nd(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ss(e,c):typeof c=="number"&&ss(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(rs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Re("scroll",e):c!=null&&Va(e,o,c,a))}switch(n){case"input":Ls(e),nc(e,r,!1);break;case"textarea":Ls(e),sc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?pr(e,!!r.multiple,o,!1):r.defaultValue!=null&&pr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=wl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)Af(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=Fn(ps.current),Fn(Yt.current),Gs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ht]=t,(o=r.nodeValue!==n)&&(e=wt,e!==null))switch(e.tag){case 3:Bs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ht]=t,t.stateNode=r}return rt(t),null;case 13:if(Le(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&yt!==null&&t.mode&1&&!(t.flags&128))Vd(),jr(),t.flags|=98560,o=!1;else if(o=Gs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(G(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[Ht]=t}else jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rt(t),o=!1}else zt!==null&&(Ra(zt),zt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?Ye===0&&(Ye=3):Ci())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return Ir(),Ia(e,t),e===null&&ds(t.stateNode.containerInfo),rt(t),null;case 10:return ui(t.type._context),rt(t),null;case 17:return pt(t.type)&&Sl(),rt(t),null;case 19:if(Le(Oe),o=t.memoizedState,o===null)return rt(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ur(o,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Al(e),a!==null){for(t.flags|=128,Ur(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Me(Oe,Oe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ue()>Cr&&(t.flags|=128,r=!0,Ur(o,!1),t.lanes=4194304)}else{if(!r)if(e=Al(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ur(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ze)return rt(t),null}else 2*Ue()-o.renderingStartTime>Cr&&n!==1073741824&&(t.flags|=128,r=!0,Ur(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ue(),t.sibling=null,n=Oe.current,Me(Oe,r?n&1|2:n&1),t):(rt(t),null);case 22:case 23:return ki(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?vt&1073741824&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function vp(e,t){switch(oi(t),t.tag){case 1:return pt(t.type)&&Sl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ir(),Le(ht),Le(lt),pi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hi(t),null;case 13:if(Le(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Le(Oe),null;case 4:return Ir(),null;case 10:return ui(t.type._context),null;case 22:case 23:return ki(),null;case 24:return null;default:return null}}var Ys=!1,st=!1,yp=typeof WeakSet=="function"?WeakSet:Set,se=null;function mr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function ka(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Qc=!1;function wp(e,t){if(ca=xl,e=Td(),si(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,c=-1,d=0,f=0,p=e,h=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(i=a+s),p!==o||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===e)break t;if(h===n&&++d===s&&(i=a),h===o&&++f===r&&(c=a),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ua={focusedElem:e,selectionRange:n},xl=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,S=w.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Rt(t.type,g),S);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(N){Fe(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return w=Qc,Qc=!1,w}function Zr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&ka(t,n,o)}s=s.next}while(s!==r)}}function Yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ca(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Pf(e){var t=e.alternate;t!==null&&(e.alternate=null,Pf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[ms],delete t[ma],delete t[np],delete t[rp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ef(e){return e.tag===5||e.tag===3||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ef(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Aa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wl));else if(r!==4&&(e=e.child,e!==null))for(Aa(e,t,n),e=e.sibling;e!==null;)Aa(e,t,n),e=e.sibling}function Pa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Pa(e,t,n),e=e.sibling;e!==null;)Pa(e,t,n),e=e.sibling}var Ke=null,Lt=!1;function un(e,t,n){for(n=n.child;n!==null;)Mf(e,t,n),n=n.sibling}function Mf(e,t,n){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Dl,n)}catch{}switch(n.tag){case 5:st||mr(n,t);case 6:var r=Ke,s=Lt;Ke=null,un(e,t,n),Ke=r,Lt=s,Ke!==null&&(Lt?(e=Ke,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Lt?(e=Ke,n=n.stateNode,e.nodeType===8?No(e.parentNode,n):e.nodeType===1&&No(e,n),is(e)):No(Ke,n.stateNode));break;case 4:r=Ke,s=Lt,Ke=n.stateNode.containerInfo,Lt=!0,un(e,t,n),Ke=r,Lt=s;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ka(n,t,a),s=s.next}while(s!==r)}un(e,t,n);break;case 1:if(!st&&(mr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Fe(n,t,i)}un(e,t,n);break;case 21:un(e,t,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,un(e,t,n),st=r):un(e,t,n);break;default:un(e,t,n)}}function qc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yp),t.forEach(function(r){var s=Pp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Tt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Ke=i.stateNode,Lt=!1;break e;case 3:Ke=i.stateNode.containerInfo,Lt=!0;break e;case 4:Ke=i.stateNode.containerInfo,Lt=!0;break e}i=i.return}if(Ke===null)throw Error(G(160));Mf(o,a,s),Ke=null,Lt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Fe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Tf(t,e),t=t.sibling}function Tf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Ut(e),r&4){try{Zr(3,e,e.return),Yl(3,e)}catch(g){Fe(e,e.return,g)}try{Zr(5,e,e.return)}catch(g){Fe(e,e.return,g)}}break;case 1:Tt(t,e),Ut(e),r&512&&n!==null&&mr(n,n.return);break;case 5:if(Tt(t,e),Ut(e),r&512&&n!==null&&mr(n,n.return),e.flags&32){var s=e.stateNode;try{ss(s,"")}catch(g){Fe(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&Zu(s,o),Zo(i,a);var d=Zo(i,o);for(a=0;a<c.length;a+=2){var f=c[a],p=c[a+1];f==="style"?sd(s,p):f==="dangerouslySetInnerHTML"?nd(s,p):f==="children"?ss(s,p):Va(s,f,p,d)}switch(i){case"input":Wo(s,o);break;case"textarea":ed(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?pr(s,!!o.multiple,y,!1):h!==!!o.multiple&&(o.defaultValue!=null?pr(s,!!o.multiple,o.defaultValue,!0):pr(s,!!o.multiple,o.multiple?[]:"",!1))}s[ms]=o}catch(g){Fe(e,e.return,g)}}break;case 6:if(Tt(t,e),Ut(e),r&4){if(e.stateNode===null)throw Error(G(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){Fe(e,e.return,g)}}break;case 3:if(Tt(t,e),Ut(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(t.containerInfo)}catch(g){Fe(e,e.return,g)}break;case 4:Tt(t,e),Ut(e);break;case 13:Tt(t,e),Ut(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(bi=Ue())),r&4&&qc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(st=(d=st)||f,Tt(t,e),st=d):Tt(t,e),Ut(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(se=e,f=e.child;f!==null;){for(p=se=f;se!==null;){switch(h=se,y=h.child,h.tag){case 0:case 11:case 14:case 15:Zr(4,h,h.return);break;case 1:mr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(g){Fe(r,n,g)}}break;case 5:mr(h,h.return);break;case 22:if(h.memoizedState!==null){Kc(p);continue}}y!==null?(y.return=h,se=y):Kc(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=rd("display",a))}catch(g){Fe(e,e.return,g)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(g){Fe(e,e.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Tt(t,e),Ut(e),r&4&&qc(e);break;case 21:break;default:Tt(t,e),Ut(e)}}function Ut(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ef(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ss(s,""),r.flags&=-33);var o=Wc(e);Pa(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Wc(e);Aa(e,i,a);break;default:throw Error(G(161))}}catch(c){Fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sp(e,t,n){se=e,Rf(e)}function Rf(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var s=se,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ys;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||st;i=Ys;var d=st;if(Ys=a,(st=c)&&!d)for(se=s;se!==null;)a=se,c=a.child,a.tag===22&&a.memoizedState!==null?Jc(s):c!==null?(c.return=a,se=c):Jc(s);for(;o!==null;)se=o,Rf(o),o=o.sibling;se=s,Ys=i,st=d}Xc(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,se=o):Xc(e)}}function Xc(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||Yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!st)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Rt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Lc(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lc(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&is(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}st||t.flags&512&&Ca(t)}catch(h){Fe(t,t.return,h)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function Kc(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Jc(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yl(4,t)}catch(c){Fe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Fe(t,s,c)}}var o=t.return;try{Ca(t)}catch(c){Fe(t,o,c)}break;case 5:var a=t.return;try{Ca(t)}catch(c){Fe(t,a,c)}}}catch(c){Fe(t,t.return,c)}if(t===e){se=null;break}var i=t.sibling;if(i!==null){i.return=t.return,se=i;break}se=t.return}}var Np=Math.ceil,Ml=on.ReactCurrentDispatcher,Ni=on.ReactCurrentOwner,Pt=on.ReactCurrentBatchConfig,be=0,Xe=null,Ge=null,Je=0,vt=0,hr=Mn(0),Ye=0,ys=null,Qn=0,Ql=0,ji=0,es=null,ft=null,bi=0,Cr=1/0,Xt=null,Tl=!1,Ea=null,jn=null,Qs=!1,gn=null,Rl=0,ts=0,Ma=null,il=-1,cl=0;function it(){return be&6?Ue():il!==-1?il:il=Ue()}function bn(e){return e.mode&1?be&2&&Je!==0?Je&-Je:lp.transition!==null?(cl===0&&(cl=gd()),cl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function Dt(e,t,n,r){if(50<ts)throw ts=0,Ma=null,Error(G(185));Is(e,n,r),(!(be&2)||e!==Xe)&&(e===Xe&&(!(be&2)&&(Ql|=n),Ye===4&&hn(e,Je)),gt(e,r),n===1&&be===0&&!(t.mode&1)&&(Cr=Ue()+500,Gl&&Tn()))}function gt(e,t){var n=e.callbackNode;lh(e,t);var r=gl(e,e===Xe?Je:0);if(r===0)n!==null&&ac(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ac(n),t===1)e.tag===0?sp(Zc.bind(null,e)):Bd(Zc.bind(null,e)),ep(function(){!(be&6)&&Tn()}),n=null;else{switch(xd(r)){case 1:n=Xa;break;case 4:n=hd;break;case 16:n=pl;break;case 536870912:n=pd;break;default:n=pl}n=Uf(n,Lf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Lf(e,t){if(il=-1,cl=0,be&6)throw Error(G(327));var n=e.callbackNode;if(wr()&&e.callbackNode!==n)return null;var r=gl(e,e===Xe?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ll(e,r);else{t=r;var s=be;be|=2;var o=Of();(Xe!==e||Je!==t)&&(Xt=null,Cr=Ue()+500,Un(e,t));do try{Ip();break}catch(i){zf(e,i)}while(!0);ci(),Ml.current=o,be=s,Ge!==null?t=0:(Xe=null,Je=0,t=Ye)}if(t!==0){if(t===2&&(s=sa(e),s!==0&&(r=s,t=Ta(e,s))),t===1)throw n=ys,Un(e,0),hn(e,r),gt(e,Ue()),n;if(t===6)hn(e,r);else{if(s=e.current.alternate,!(r&30)&&!jp(s)&&(t=Ll(e,r),t===2&&(o=sa(e),o!==0&&(r=o,t=Ta(e,o))),t===1))throw n=ys,Un(e,0),hn(e,r),gt(e,Ue()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:_n(e,ft,Xt);break;case 3:if(hn(e,r),(r&130023424)===r&&(t=bi+500-Ue(),10<t)){if(gl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){it(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=fa(_n.bind(null,e,ft,Xt),t);break}_n(e,ft,Xt);break;case 4:if(hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-_t(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Np(r/1960))-r,10<r){e.timeoutHandle=fa(_n.bind(null,e,ft,Xt),r);break}_n(e,ft,Xt);break;case 5:_n(e,ft,Xt);break;default:throw Error(G(329))}}}return gt(e,Ue()),e.callbackNode===n?Lf.bind(null,e):null}function Ta(e,t){var n=es;return e.current.memoizedState.isDehydrated&&(Un(e,t).flags|=256),e=Ll(e,t),e!==2&&(t=ft,ft=n,t!==null&&Ra(t)),e}function Ra(e){ft===null?ft=e:ft.push.apply(ft,e)}function jp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!$t(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hn(e,t){for(t&=~ji,t&=~Ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function Zc(e){if(be&6)throw Error(G(327));wr();var t=gl(e,0);if(!(t&1))return gt(e,Ue()),null;var n=Ll(e,t);if(e.tag!==0&&n===2){var r=sa(e);r!==0&&(t=r,n=Ta(e,r))}if(n===1)throw n=ys,Un(e,0),hn(e,t),gt(e,Ue()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_n(e,ft,Xt),gt(e,Ue()),null}function Ii(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(Cr=Ue()+500,Gl&&Tn())}}function Wn(e){gn!==null&&gn.tag===0&&!(be&6)&&wr();var t=be;be|=1;var n=Pt.transition,r=Ae;try{if(Pt.transition=null,Ae=1,e)return e()}finally{Ae=r,Pt.transition=n,be=t,!(be&6)&&Tn()}}function ki(){vt=hr.current,Le(hr)}function Un(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zh(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(oi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sl();break;case 3:Ir(),Le(ht),Le(lt),pi();break;case 5:hi(r);break;case 4:Ir();break;case 13:Le(Oe);break;case 19:Le(Oe);break;case 10:ui(r.type._context);break;case 22:case 23:ki()}n=n.return}if(Xe=e,Ge=e=In(e.current,null),Je=vt=t,Ye=0,ys=null,ji=Ql=Qn=0,ft=es=null,$n!==null){for(t=0;t<$n.length;t++)if(n=$n[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}$n=null}return e}function zf(e,t){do{var n=Ge;try{if(ci(),ll.current=El,Pl){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pl=!1}if(Yn=0,qe=Ve=_e=null,Jr=!1,gs=0,Ni.current=null,n===null||n.return===null){Ye=1,ys=t,Ge=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=Je,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=i,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Fc(a);if(y!==null){y.flags&=-257,Uc(y,a,i,o,t),y.mode&1&&$c(o,d,t),t=y,c=d;var w=t.updateQueue;if(w===null){var g=new Set;g.add(c),t.updateQueue=g}else w.add(c);break e}else{if(!(t&1)){$c(o,d,t),Ci();break e}c=Error(G(426))}}else if(ze&&i.mode&1){var S=Fc(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Uc(S,a,i,o,t),ai(kr(c,i));break e}}o=c=kr(c,i),Ye!==4&&(Ye=2),es===null?es=[o]:es.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=vf(o,c,t);Rc(o,x);break e;case 1:i=c;var m=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(jn===null||!jn.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=yf(o,i,t);Rc(o,N);break e}}o=o.return}while(o!==null)}Df(n)}catch(j){t=j,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Of(){var e=Ml.current;return Ml.current=El,e===null?El:e}function Ci(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Xe===null||!(Qn&268435455)&&!(Ql&268435455)||hn(Xe,Je)}function Ll(e,t){var n=be;be|=2;var r=Of();(Xe!==e||Je!==t)&&(Xt=null,Un(e,t));do try{bp();break}catch(s){zf(e,s)}while(!0);if(ci(),be=n,Ml.current=r,Ge!==null)throw Error(G(261));return Xe=null,Je=0,Ye}function bp(){for(;Ge!==null;)_f(Ge)}function Ip(){for(;Ge!==null&&!Xm();)_f(Ge)}function _f(e){var t=Ff(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Df(e):Ge=t,Ni.current=null}function Df(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vp(n,t),n!==null){n.flags&=32767,Ge=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Ge=null;return}}else if(n=xp(n,t,vt),n!==null){Ge=n;return}if(t=t.sibling,t!==null){Ge=t;return}Ge=t=e}while(t!==null);Ye===0&&(Ye=5)}function _n(e,t,n){var r=Ae,s=Pt.transition;try{Pt.transition=null,Ae=1,kp(e,t,n,r)}finally{Pt.transition=s,Ae=r}return null}function kp(e,t,n,r){do wr();while(gn!==null);if(be&6)throw Error(G(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(oh(e,o),e===Xe&&(Ge=Xe=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qs||(Qs=!0,Uf(pl,function(){return wr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pt.transition,Pt.transition=null;var a=Ae;Ae=1;var i=be;be|=4,Ni.current=null,wp(e,n),Tf(n,e),Yh(ua),xl=!!ca,ua=ca=null,e.current=n,Sp(n),Km(),be=i,Ae=a,Pt.transition=o}else e.current=n;if(Qs&&(Qs=!1,gn=e,Rl=s),o=e.pendingLanes,o===0&&(jn=null),eh(n.stateNode),gt(e,Ue()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Tl)throw Tl=!1,e=Ea,Ea=null,e;return Rl&1&&e.tag!==0&&wr(),o=e.pendingLanes,o&1?e===Ma?ts++:(ts=0,Ma=e):ts=0,Tn(),null}function wr(){if(gn!==null){var e=xd(Rl),t=Pt.transition,n=Ae;try{if(Pt.transition=null,Ae=16>e?16:e,gn===null)var r=!1;else{if(e=gn,gn=null,Rl=0,be&6)throw Error(G(331));var s=be;for(be|=4,se=e.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(se=d;se!==null;){var f=se;switch(f.tag){case 0:case 11:case 15:Zr(8,f,o)}var p=f.child;if(p!==null)p.return=f,se=p;else for(;se!==null;){f=se;var h=f.sibling,y=f.return;if(Pf(f),f===d){se=null;break}if(h!==null){h.return=y,se=h;break}se=y}}}var w=o.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Zr(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,se=x;break e}se=o.return}}var m=e.current;for(se=m;se!==null;){a=se;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,se=v;else e:for(a=m;se!==null;){if(i=se,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Yl(9,i)}}catch(j){Fe(i,i.return,j)}if(i===a){se=null;break e}var N=i.sibling;if(N!==null){N.return=i.return,se=N;break e}se=i.return}}if(be=s,Tn(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Dl,e)}catch{}r=!0}return r}finally{Ae=n,Pt.transition=t}}return!1}function eu(e,t,n){t=kr(n,t),t=vf(e,t,1),e=Nn(e,t,1),t=it(),e!==null&&(Is(e,1,t),gt(e,t))}function Fe(e,t,n){if(e.tag===3)eu(e,e,n);else for(;t!==null;){if(t.tag===3){eu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){e=kr(n,e),e=yf(t,e,1),t=Nn(t,e,1),e=it(),t!==null&&(Is(t,1,e),gt(t,e));break}}t=t.return}}function Cp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Xe===e&&(Je&n)===n&&(Ye===4||Ye===3&&(Je&130023424)===Je&&500>Ue()-bi?Un(e,0):ji|=n),gt(e,t)}function $f(e,t){t===0&&(e.mode&1?(t=_s,_s<<=1,!(_s&130023424)&&(_s=4194304)):t=1);var n=it();e=sn(e,t),e!==null&&(Is(e,t,n),gt(e,n))}function Ap(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$f(e,n)}function Pp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),$f(e,n)}var Ff;Ff=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mt=!1,gp(e,t,n);mt=!!(e.flags&131072)}else mt=!1,ze&&t.flags&1048576&&Gd(t,bl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;al(e,t),e=t.pendingProps;var s=Nr(t,lt.current);yr(t,n),s=xi(null,t,r,e,s,n);var o=vi();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(o=!0,Nl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fi(t),s.updater=Vl,t.stateNode=s,s._reactInternals=t,ya(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,ze&&o&&li(t),at(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(al(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Mp(r),e=Rt(r,e),s){case 0:t=Sa(null,t,r,e,n);break e;case 1:t=Hc(null,t,r,e,n);break e;case 11:t=Bc(null,t,r,e,n);break e;case 14:t=Gc(null,t,r,Rt(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Sa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Hc(e,t,r,s,n);case 3:e:{if(jf(t),e===null)throw Error(G(387));r=t.pendingProps,o=t.memoizedState,s=o.element,qd(e,t),Cl(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=kr(Error(G(423)),t),t=Vc(e,t,r,n,s);break e}else if(r!==s){s=kr(Error(G(424)),t),t=Vc(e,t,r,n,s);break e}else for(yt=Sn(t.stateNode.containerInfo.firstChild),wt=t,ze=!0,zt=null,n=Qd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jr(),r===s){t=ln(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return Xd(t),e===null&&ga(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,da(r,s)?a=null:o!==null&&da(r,o)&&(t.flags|=32),Nf(e,t),at(e,t,a,n),t.child;case 6:return e===null&&ga(t),null;case 13:return bf(e,t,n);case 4:return mi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=br(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Bc(e,t,r,s,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Me(Il,r._currentValue),r._currentValue=a,o!==null)if($t(o.value,a)){if(o.children===s.children&&!ht.current){t=ln(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=en(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),xa(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(G(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),xa(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}at(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,yr(t,n),s=Et(s),r=r(s),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,s=Rt(r,t.pendingProps),s=Rt(r.type,s),Gc(e,t,r,s,n);case 15:return wf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),al(e,t),t.tag=1,pt(r)?(e=!0,Nl(t)):e=!1,yr(t,n),xf(t,r,s),ya(t,r,s,n),Na(null,t,r,!0,e,n);case 19:return If(e,t,n);case 22:return Sf(e,t,n)}throw Error(G(156,t.tag))};function Uf(e,t){return md(e,t)}function Ep(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,r){return new Ep(e,t,n,r)}function Ai(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mp(e){if(typeof e=="function")return Ai(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qa)return 11;if(e===Wa)return 14}return 2}function In(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ul(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Ai(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case sr:return Bn(n.children,s,o,t);case Ya:a=8,s|=8;break;case Go:return e=Ct(12,n,t,s|2),e.elementType=Go,e.lanes=o,e;case Ho:return e=Ct(13,n,t,s),e.elementType=Ho,e.lanes=o,e;case Vo:return e=Ct(19,n,t,s),e.elementType=Vo,e.lanes=o,e;case Xu:return Wl(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wu:a=10;break e;case qu:a=9;break e;case Qa:a=11;break e;case Wa:a=14;break e;case dn:a=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Ct(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Bn(e,t,n,r){return e=Ct(7,e,r,t),e.lanes=n,e}function Wl(e,t,n,r){return e=Ct(22,e,r,t),e.elementType=Xu,e.lanes=n,e.stateNode={isHidden:!1},e}function Eo(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function Mo(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Pi(e,t,n,r,s,o,a,i,c){return e=new Tp(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ct(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fi(o),e}function Rp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bf(e){if(!e)return An;e=e._reactInternals;e:{if(Zn(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(pt(n))return Ud(e,n,t)}return t}function Gf(e,t,n,r,s,o,a,i,c){return e=Pi(n,r,!0,e,s,o,a,i,c),e.context=Bf(null),n=e.current,r=it(),s=bn(n),o=en(r,s),o.callback=t??null,Nn(n,o,s),e.current.lanes=s,Is(e,s,r),gt(e,r),e}function ql(e,t,n,r){var s=t.current,o=it(),a=bn(s);return n=Bf(n),t.context===null?t.context=n:t.pendingContext=n,t=en(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Nn(s,t,a),e!==null&&(Dt(e,s,a,o),sl(e,s,a)),a}function zl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ei(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function Lp(){return null}var Hf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mi(e){this._internalRoot=e}Xl.prototype.render=Mi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));ql(e,t,null,null)};Xl.prototype.unmount=Mi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wn(function(){ql(null,e,null,null)}),t[rn]=null}};function Xl(e){this._internalRoot=e}Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=wd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mn.length&&t!==0&&t<mn[n].priority;n++);mn.splice(n,0,e),n===0&&Nd(e)}};function Ti(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nu(){}function zp(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=zl(a);o.call(d)}}var a=Gf(t,r,e,0,null,!1,!1,"",nu);return e._reactRootContainer=a,e[rn]=a.current,ds(e.nodeType===8?e.parentNode:e),Wn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=zl(c);i.call(d)}}var c=Pi(e,0,!1,null,null,!1,!1,"",nu);return e._reactRootContainer=c,e[rn]=c.current,ds(e.nodeType===8?e.parentNode:e),Wn(function(){ql(t,c,n,r)}),c}function Jl(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=zl(a);i.call(c)}}ql(t,a,e,s)}else a=zp(n,t,e,s,r);return zl(a)}vd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vr(t.pendingLanes);n!==0&&(Ka(t,n|1),gt(t,Ue()),!(be&6)&&(Cr=Ue()+500,Tn()))}break;case 13:Wn(function(){var r=sn(e,1);if(r!==null){var s=it();Dt(r,e,1,s)}}),Ei(e,1)}};Ja=function(e){if(e.tag===13){var t=sn(e,134217728);if(t!==null){var n=it();Dt(t,e,134217728,n)}Ei(e,134217728)}};yd=function(e){if(e.tag===13){var t=bn(e),n=sn(e,t);if(n!==null){var r=it();Dt(n,e,t,r)}Ei(e,t)}};wd=function(){return Ae};Sd=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};ta=function(e,t,n){switch(t){case"input":if(Wo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Bl(r);if(!s)throw Error(G(90));Ju(r),Wo(r,s)}}}break;case"textarea":ed(e,n);break;case"select":t=n.value,t!=null&&pr(e,!!n.multiple,t,!1)}};ad=Ii;id=Wn;var Op={usingClientEntryPoint:!1,Events:[Cs,ir,Bl,ld,od,Ii]},Br={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_p={bundleType:Br.bundleType,version:Br.version,rendererPackageName:Br.rendererPackageName,rendererConfig:Br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:on.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dd(e),e===null?null:e.stateNode},findFiberByHostInstance:Br.findFiberByHostInstance||Lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ws=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ws.isDisabled&&Ws.supportsFiber)try{Dl=Ws.inject(_p),Vt=Ws}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Op;Nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ti(t))throw Error(G(200));return Rp(e,t,null,n)};Nt.createRoot=function(e,t){if(!Ti(e))throw Error(G(299));var n=!1,r="",s=Hf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Pi(e,1,!1,null,null,n,!1,r,s),e[rn]=t.current,ds(e.nodeType===8?e.parentNode:e),new Mi(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=dd(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return Wn(e)};Nt.hydrate=function(e,t,n){if(!Kl(t))throw Error(G(200));return Jl(null,e,t,!0,n)};Nt.hydrateRoot=function(e,t,n){if(!Ti(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=Hf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Gf(t,null,e,1,n??null,s,!1,o,a),e[rn]=t.current,ds(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xl(t)};Nt.render=function(e,t,n){if(!Kl(t))throw Error(G(200));return Jl(null,e,t,!1,n)};Nt.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(G(40));return e._reactRootContainer?(Wn(function(){Jl(null,null,e,!1,function(){e._reactRootContainer=null,e[rn]=null})}),!0):!1};Nt.unstable_batchedUpdates=Ii;Nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kl(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Jl(e,t,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function Vf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vf)}catch(e){console.error(e)}}Vf(),Hu.exports=Nt;var er=Hu.exports,ru=er;Uo.createRoot=ru.createRoot,Uo.hydrateRoot=ru.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ws(){return ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ws.apply(this,arguments)}var xn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xn||(xn={}));const su="popstate";function Dp(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:a,hash:i}=r.location;return La("",{pathname:o,search:a,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ol(s)}return Fp(t,n,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ri(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $p(){return Math.random().toString(36).substr(2,8)}function lu(e,t){return{usr:e.state,key:e.key,idx:t}}function La(e,t,n,r){return n===void 0&&(n=null),ws({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tr(t):t,{state:n,key:t&&t.key||r||$p()})}function Ol(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Tr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Fp(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=xn.Pop,c=null,d=f();d==null&&(d=0,a.replaceState(ws({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){i=xn.Pop;let S=f(),x=S==null?null:S-d;d=S,c&&c({action:i,location:g.location,delta:x})}function h(S,x){i=xn.Push;let m=La(g.location,S,x);d=f()+1;let v=lu(m,d),N=g.createHref(m);try{a.pushState(v,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(N)}o&&c&&c({action:i,location:g.location,delta:1})}function y(S,x){i=xn.Replace;let m=La(g.location,S,x);d=f();let v=lu(m,d),N=g.createHref(m);a.replaceState(v,"",N),o&&c&&c({action:i,location:g.location,delta:0})}function w(S){let x=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof S=="string"?S:Ol(S);return m=m.replace(/ $/,"%20"),Be(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let g={get action(){return i},get location(){return e(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(su,p),c=S,()=>{s.removeEventListener(su,p),c=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let x=w(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:y,go(S){return a.go(S)}};return g}var ou;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ou||(ou={}));function Up(e,t,n){return n===void 0&&(n="/"),Bp(e,t,n)}function Bp(e,t,n,r){let s=typeof t=="string"?Tr(t):t,o=Li(s.pathname||"/",n);if(o==null)return null;let a=Yf(e);Gp(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=tg(o);i=Jp(a[c],d)}return i}function Yf(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Be(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=kn([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(Be(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Yf(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:Xp(d,o.index),routesMeta:f})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of Qf(o.path))s(o,a,c)}),t}function Qf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=Qf(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Gp(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Kp(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Hp=/^:[\w-]+$/,Vp=3,Yp=2,Qp=1,Wp=10,qp=-2,au=e=>e==="*";function Xp(e,t){let n=e.split("/"),r=n.length;return n.some(au)&&(r+=qp),t&&(r+=Yp),n.filter(s=>!au(s)).reduce((s,o)=>s+(Hp.test(o)?Vp:o===""?Qp:Wp),r)}function Kp(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Jp(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",p=Zp({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),h=c.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:kn([o,p.pathname]),pathnameBase:og(kn([o,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(o=kn([o,p.pathnameBase]))}return a}function Zp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=eg(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:h,isOptional:y}=f;if(h==="*"){let g=i[p]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const w=i[p];return y&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function eg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ri(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function tg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ri(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Li(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const ng=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rg=e=>ng.test(e);function sg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Tr(e):e,o;if(n)if(rg(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ri(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=iu(n.substring(1),"/"):o=iu(n,t)}else o=t;return{pathname:o,search:ag(r),hash:ig(s)}}function iu(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function To(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zi(e,t){let n=lg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Oi(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Tr(e):(s=ws({},e),Be(!s.pathname||!s.pathname.includes("?"),To("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),To("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),To("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),p-=1;s.pathname=h.join("/")}i=p>=0?t[p]:"/"}let c=sg(s,i),d=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const kn=e=>e.join("/").replace(/\/\/+/g,"/"),og=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ag=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ig=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Wf=["post","put","patch","delete"];new Set(Wf);const ug=["get",...Wf];new Set(ug);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ss.apply(this,arguments)}const _i=u.createContext(null),dg=u.createContext(null),Rn=u.createContext(null),Zl=u.createContext(null),an=u.createContext({outlet:null,matches:[],isDataRoute:!1}),qf=u.createContext(null);function fg(e,t){let{relative:n}=t===void 0?{}:t;Rr()||Be(!1);let{basename:r,navigator:s}=u.useContext(Rn),{hash:o,pathname:a,search:i}=Kf(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:kn([r,a])),s.createHref({pathname:c,search:i,hash:o})}function Rr(){return u.useContext(Zl)!=null}function cn(){return Rr()||Be(!1),u.useContext(Zl).location}function Xf(e){u.useContext(Rn).static||u.useLayoutEffect(e)}function He(){let{isDataRoute:e}=u.useContext(an);return e?Ig():mg()}function mg(){Rr()||Be(!1);let e=u.useContext(_i),{basename:t,future:n,navigator:r}=u.useContext(Rn),{matches:s}=u.useContext(an),{pathname:o}=cn(),a=JSON.stringify(zi(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return Xf(()=>{i.current=!0}),u.useCallback(function(d,f){if(f===void 0&&(f={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let p=Oi(d,JSON.parse(a),o,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:kn([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,a,o,e])}function eo(){let{matches:e}=u.useContext(an),t=e[e.length-1];return t?t.params:{}}function Kf(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(Rn),{matches:s}=u.useContext(an),{pathname:o}=cn(),a=JSON.stringify(zi(s,r.v7_relativeSplatPath));return u.useMemo(()=>Oi(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function hg(e,t){return pg(e,t)}function pg(e,t,n,r){Rr()||Be(!1);let{navigator:s}=u.useContext(Rn),{matches:o}=u.useContext(an),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=cn(),f;if(t){var p;let S=typeof t=="string"?Tr(t):t;c==="/"||(p=S.pathname)!=null&&p.startsWith(c)||Be(!1),f=S}else f=d;let h=f.pathname||"/",y=h;if(c!=="/"){let S=c.replace(/^\//,"").split("/");y="/"+h.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=Up(e,{pathname:y}),g=wg(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},i,S.params),pathname:kn([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:kn([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return t&&g?u.createElement(Zl.Provider,{value:{location:Ss({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:xn.Pop}},g):g}function gg(){let e=bg(),t=cg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const xg=u.createElement(gg,null);class vg extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(an.Provider,{value:this.props.routeContext},u.createElement(qf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yg(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(_i);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(an.Provider,{value:t},r)}function wg(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let f=a.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);f>=0||Be(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:h,errors:y}=n,w=p.route.loader&&h[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,h)=>{let y,w=!1,g=null,S=null;n&&(y=i&&p.route.id?i[p.route.id]:void 0,g=p.route.errorElement||xg,c&&(d<0&&h===0?(kg("route-fallback"),w=!0,S=null):d===h&&(w=!0,S=p.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,h+1)),m=()=>{let v;return y?v=g:w?v=S:p.route.Component?v=u.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,u.createElement(yg,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?u.createElement(vg,{location:n.location,revalidation:n.revalidation,component:g,error:y,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var Jf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Jf||{}),Zf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zf||{});function Sg(e){let t=u.useContext(_i);return t||Be(!1),t}function Ng(e){let t=u.useContext(dg);return t||Be(!1),t}function jg(e){let t=u.useContext(an);return t||Be(!1),t}function em(e){let t=jg(),n=t.matches[t.matches.length-1];return n.route.id||Be(!1),n.route.id}function bg(){var e;let t=u.useContext(qf),n=Ng(),r=em();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ig(){let{router:e}=Sg(Jf.UseNavigateStable),t=em(Zf.UseNavigateStable),n=u.useRef(!1);return Xf(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ss({fromRouteId:t},o)))},[e,t])}const cu={};function kg(e,t,n){cu[e]||(cu[e]=!0)}function Cg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ag(e){let{to:t,replace:n,state:r,relative:s}=e;Rr()||Be(!1);let{future:o,static:a}=u.useContext(Rn),{matches:i}=u.useContext(an),{pathname:c}=cn(),d=He(),f=Oi(t,zi(i,o.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return u.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function xt(e){Be(!1)}function Pg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=xn.Pop,navigator:o,static:a=!1,future:i}=e;Rr()&&Be(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:a,future:Ss({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=Tr(r));let{pathname:f="/",search:p="",hash:h="",state:y=null,key:w="default"}=r,g=u.useMemo(()=>{let S=Li(f,c);return S==null?null:{location:{pathname:S,search:p,hash:h,state:y,key:w},navigationType:s}},[c,f,p,h,y,w,s]);return g==null?null:u.createElement(Rn.Provider,{value:d},u.createElement(Zl.Provider,{children:n,value:g}))}function Eg(e){let{children:t,location:n}=e;return hg(za(t),n)}new Promise(()=>{});function za(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,za(r.props.children,o));return}r.type!==xt&&Be(!1),!r.props.index||!r.props.children||Be(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=za(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oa.apply(this,arguments)}function Mg(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Tg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Rg(e,t){return e.button===0&&(!t||t==="_self")&&!Tg(e)}function _a(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Lg(e,t){let n=_a(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const zg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Og="6";try{window.__reactRouterVersion=Og}catch{}const _g="startTransition",uu=Cm[_g];function Dg(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=Dp({window:s,v5Compat:!0}));let a=o.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=u.useCallback(p=>{d&&uu?uu(()=>c(p)):c(p)},[c,d]);return u.useLayoutEffect(()=>a.listen(f),[a,f]),u.useEffect(()=>Cg(r),[r]),u.createElement(Pg,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}const $g=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ug=u.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:i,target:c,to:d,preventScrollReset:f,viewTransition:p}=t,h=Mg(t,zg),{basename:y}=u.useContext(Rn),w,g=!1;if(typeof d=="string"&&Fg.test(d)&&(w=d,$g))try{let v=new URL(window.location.href),N=d.startsWith("//")?new URL(v.protocol+d):new URL(d),j=Li(N.pathname,y);N.origin===v.origin&&j!=null?d=j+N.search+N.hash:g=!0}catch{}let S=fg(d,{relative:s}),x=Bg(d,{replace:a,state:i,target:c,preventScrollReset:f,relative:s,viewTransition:p});function m(v){r&&r(v),v.defaultPrevented||x(v)}return u.createElement("a",Oa({},h,{href:w||S,onClick:g||o?r:m,ref:n,target:c}))});var du;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(du||(du={}));var fu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fu||(fu={}));function Bg(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:i}=t===void 0?{}:t,c=He(),d=cn(),f=Kf(e,{relative:a});return u.useCallback(p=>{if(Rg(p,n)){p.preventDefault();let h=r!==void 0?r:Ol(d)===Ol(f);c(e,{replace:h,state:s,preventScrollReset:o,relative:a,viewTransition:i})}},[d,c,f,r,s,n,e,o,a,i])}function Gg(e){let t=u.useRef(_a(e)),n=u.useRef(!1),r=cn(),s=u.useMemo(()=>Lg(r.search,n.current?null:t.current),[r.search]),o=He(),a=u.useCallback((i,c)=>{const d=_a(typeof i=="function"?i(s):i);n.current=!0,o("?"+d,c)},[o,s]);return[s,a]}const Hg={},mu=e=>{let t;const n=new Set,r=(f,p)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const y=t;t=p??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(w=>w(t,y))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Hg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,s,c);return c},Vg=e=>e?mu(e):mu;var tm={exports:{}},nm={},rm={exports:{}},sm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ar=u;function Yg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qg=typeof Object.is=="function"?Object.is:Yg,Wg=Ar.useState,qg=Ar.useEffect,Xg=Ar.useLayoutEffect,Kg=Ar.useDebugValue;function Jg(e,t){var n=t(),r=Wg({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return Xg(function(){s.value=n,s.getSnapshot=t,Ro(s)&&o({inst:s})},[e,n,t]),qg(function(){return Ro(s)&&o({inst:s}),e(function(){Ro(s)&&o({inst:s})})},[e]),Kg(n),n}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qg(e,n)}catch{return!0}}function Zg(e,t){return t()}var ex=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Zg:Jg;sm.useSyncExternalStore=Ar.useSyncExternalStore!==void 0?Ar.useSyncExternalStore:ex;rm.exports=sm;var tx=rm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=u,nx=tx;function rx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sx=typeof Object.is=="function"?Object.is:rx,lx=nx.useSyncExternalStore,ox=to.useRef,ax=to.useEffect,ix=to.useMemo,cx=to.useDebugValue;nm.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=ox(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=ix(function(){function c(y){if(!d){if(d=!0,f=y,y=r(y),s!==void 0&&a.hasValue){var w=a.value;if(s(w,y))return p=w}return p=y}if(w=p,sx(f,y))return w;var g=r(y);return s!==void 0&&s(w,g)?(f=y,w):(f=y,p=g)}var d=!1,f,p,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,s]);var i=lx(e,o[0],o[1]);return ax(function(){a.hasValue=!0,a.value=i},[i]),cx(i),i};tm.exports=nm;var ux=tm.exports;const dx=Tu(ux),lm={},{useDebugValue:fx}=Ba,{useSyncExternalStoreWithSelector:mx}=dx;let hu=!1;const hx=e=>e;function px(e,t=hx,n){(lm?"production":void 0)!=="production"&&n&&!hu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hu=!0);const r=mx(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return fx(r),r}const pu=e=>{(lm?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Vg(e):e,n=(r,s)=>px(t,r,s);return Object.assign(n,t),n},Ps=e=>e?pu(e):pu,gx={};function xx(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const a=c=>c===null?null:JSON.parse(c,void 0),i=(o=n.getItem(s))!=null?o:null;return i instanceof Promise?i.then(a):a(i)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const Ns=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Ns(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ns(r)(n)}}}},vx=(e,t)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,x)=>({...x,...S}),...t},a=!1;const i=new Set,c=new Set;let d;try{d=o.getStorage()}catch{}if(!d)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...S)},r,s);const f=Ns(o.serialize),p=()=>{const S=o.partialize({...r()});let x;const m=f({state:S,version:o.version}).then(v=>d.setItem(o.name,v)).catch(v=>{x=v});if(x)throw x;return m},h=s.setState;s.setState=(S,x)=>{h(S,x),p()};const y=e((...S)=>{n(...S),p()},r,s);let w;const g=()=>{var S;if(!d)return;a=!1,i.forEach(m=>m(r()));const x=((S=o.onRehydrateStorage)==null?void 0:S.call(o,r()))||void 0;return Ns(d.getItem.bind(d))(o.name).then(m=>{if(m)return o.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return o.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var v;return w=o.merge(m,(v=r())!=null?v:y),n(w,!0),p()}).then(()=>{x==null||x(w,void 0),a=!0,c.forEach(m=>m(w))}).catch(m=>{x==null||x(void 0,m)})};return s.persist={setOptions:S=>{o={...o,...S},S.getStorage&&(d=S.getStorage())},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:S=>(i.add(S),()=>{i.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},g(),w||y},yx=(e,t)=>(n,r,s)=>{let o={storage:xx(()=>localStorage),partialize:g=>g,version:0,merge:(g,S)=>({...S,...g}),...t},a=!1;const i=new Set,c=new Set;let d=o.storage;if(!d)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,s);const f=()=>{const g=o.partialize({...r()});return d.setItem(o.name,{state:g,version:o.version})},p=s.setState;s.setState=(g,S)=>{p(g,S),f()};const h=e((...g)=>{n(...g),f()},r,s);s.getInitialState=()=>h;let y;const w=()=>{var g,S;if(!d)return;a=!1,i.forEach(m=>{var v;return m((v=r())!=null?v:h)});const x=((S=o.onRehydrateStorage)==null?void 0:S.call(o,(g=r())!=null?g:h))||void 0;return Ns(d.getItem.bind(d))(o.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return[!0,o.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var v;const[N,j]=m;if(y=o.merge(j,(v=r())!=null?v:h),n(y,!0),N)return f()}).then(()=>{x==null||x(y,void 0),y=r(),a=!0,c.forEach(m=>m(y))}).catch(m=>{x==null||x(void 0,m)})};return s.persist={setOptions:g=>{o={...o,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>w(),hasHydrated:()=>a,onHydrate:g=>(i.add(g),()=>{i.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},o.skipHydration||w(),y||h},wx=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((gx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),vx(e,t)):yx(e,t),no=wx,js={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){console.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){console.error("Failed to clear localStorage:",e)}}};function Sx(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}const Nx={getItem:async e=>new Promise(t=>{const n=indexedDB.open("tunetuna-storage",1);n.onupgradeneeded=()=>{n.result.createObjectStore("zustand")},n.onsuccess=()=>{const a=n.result.transaction(["zustand"],"readonly").objectStore("zustand").get(e);a.onsuccess=()=>{t(a.result||null)},a.onerror=()=>{t(null)}},n.onerror=()=>{t(null)}}),setItem:async(e,t)=>new Promise((n,r)=>{const s=indexedDB.open("tunetuna-storage",1);s.onupgradeneeded=()=>{s.result.createObjectStore("zustand")},s.onsuccess=()=>{const c=s.result.transaction(["zustand"],"readwrite").objectStore("zustand").put(t,e);c.onsuccess=()=>{n()},c.onerror=()=>{r(c.error)}},s.onerror=()=>{r(s.error)}}),removeItem:async e=>new Promise(t=>{const n=indexedDB.open("tunetuna-storage",1);n.onsuccess=()=>{const a=n.result.transaction(["zustand"],"readwrite").objectStore("zustand").delete(e);a.onsuccess=()=>{t()},a.onerror=()=>{t()}},n.onerror=()=>{t()}})},Ne=Ps()(no(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],shufflePool:[],lastPoolUpdate:null,loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1},sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(o=>o.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t}),refreshShufflePool:()=>e(t=>{let r=t.songs;const s=Object.values(t.genreSongs).flat().length;if(t.songs.length===0&&s>0&&(r=Object.values(t.genreSongs).flat()),r.length===0)return{shufflePool:[]};const o=new Set(t.recentlyPlayed.slice(0,10).map(d=>d.Id));r=r.filter(d=>!o.has(d.Id));let a=r;if(a.length<30){const d=t.recentlyPlayed.slice(0,30-a.length);a=[...a,...d.map(f=>t.songs.find(p=>p.Id===f.Id)).filter(Boolean)]}const i=[...a];for(let d=i.length-1;d>0;d--){const f=Math.floor(Math.random()*(d+1));[i[d],i[f]]=[i[f],i[d]]}return{shufflePool:i.slice(0,30),lastPoolUpdate:Date.now()}})}),{name:"music-storage",storage:Nx,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,shufflePool:e.shufflePool,lastPoolUpdate:e.lastPoolUpdate,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed})}));function dl(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function Bt(e){return e&&dl(e).replace(/'/g,"")}class jx{constructor(){zn(this,"baseUrl","");zn(this,"accessToken","");zn(this,"userId","");zn(this,"genresCache",null);zn(this,"isPreloading",!1)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":`MediaBrowser Client="Tunetuna", Device="Web", DeviceId="${this.getDeviceId()}", Version="1.0.0"`}}getDeviceId(){let t=js.get("deviceId");return t||(t=Sx(),js.set("deviceId",t)),t}async request(t,n={}){const r=`${this.baseUrl}${t}`,s=await fetch(r,{...n,headers:{...this.getHeaders(),...n.headers}});if(!s.ok)throw s.status===401?new Error("Unauthorized - please login again"):new Error(`API request failed: ${s.statusText}`);return s.json()}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",o=new AbortController,a=setTimeout(()=>{console.warn("Authentication request timed out after 30 seconds"),o.abort()},3e4);let i;try{i=await fetch(s,{method:"POST",signal:o.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":`MediaBrowser Client="Tunetuna", Device="Web", DeviceId="${this.getDeviceId()}", Version="1.0.0"`},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(a)}catch(d){if(clearTimeout(a),d instanceof Error&&d.name==="AbortError"){const p=/^https?:\/\/100\.\d+\.\d+\.\d+/.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:"";throw new Error(`Request timeout - server did not respond within 30 seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${p}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(d instanceof TypeError){const f=d.message.toLowerCase();if(f.includes("failed to fetch")||f.includes("networkerror")){const h=/^https?:\/\/100\.\d+\.\d+\.\d+/.test(t)?`
  VPN/Tailscale IP detected. Your phone may not be able to access this IP.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:"";throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${h}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${d.message}`)}throw d}if(!i.ok){const d=await i.text().catch(()=>"");throw new Error(d||`Authentication failed (${i.status})`)}const c=await i.json();return this.setCredentials(t,c.AccessToken,c.User.Id),c}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,i=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&i.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${i.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&r.append("SortOrder",t.sortOrder),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,ProductionYear,DateCreated,DateModified,DateLastSaved"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=Ne.getState(),r=12*60*60*1e3;if(!t&&n.genres.length>0&&n.genresLastUpdated){const s=Date.now(),o=n.genresLastChecked||0;if(!(s-o>=r))return this.genresCache=n.genres,n.genres;try{const i=await this.getRecentlyAdded(50),c=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),d=[...i.Items||[],...c.Items||[]];let f=0;for(const p of d){if(p.DateCreated){const h=new Date(p.DateCreated).getTime();h>f&&(f=h)}if(p.DateLastSaved){const h=new Date(p.DateLastSaved).getTime();h>f&&(f=h)}}if(Ne.setState({genresLastChecked:s}),f<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch(i){return console.warn("[getGenres] Failed to check for new/modified tracks, using cached genres:",i),this.genresCache=n.genres,n.genres}}try{const s=new Map;let o=0;const a=200;let i=!0;for(;i;){const x=(await this.getAlbums({limit:a,startIndex:o})).Items||[];if(x.forEach(m=>{m.Genres&&m.Genres.forEach(v=>{const N=v.toLowerCase();s.has(N)||s.set(N,v)})}),i=x.length===a,o+=a,o>1e4)break}const c=new Set;let d=0,f=!0;for(;f;){const x=(await this.getSongs({limit:200,startIndex:d})).Items||[];if(x.forEach(m=>{m.Genres&&m.Genres.forEach(v=>{c.add(v.toLowerCase())})}),f=x.length===200,d+=200,d>1e4)break}const p=new Map,h=new Map;try{const S=new URLSearchParams({UserId:this.userId,Recursive:"true"}),x=await this.request(`/Genres?${S}`);let m=[];Array.isArray(x)?m=x:x&&typeof x=="object"&&"Items"in x&&(m=x.Items||[]),m.forEach(v=>{if(v.Name){const N=v.Name.toLowerCase();s.has(N)&&(p.set(N,v.Id),h.set(v.Id,v))}})}catch(S){console.warn("[getGenres] Failed to get genre IDs from API, will use synthetic IDs:",S)}const y=[],w=new Set;for(const[S,x]of s){if(w.has(S)||!c.has(S))continue;const m=p.get(S);if(m){const v=h.get(m);v&&(y.push(v),w.add(S))}else y.push({Id:`synthetic-${S.replace(/\s+/g,"-")}`,Name:x,Type:"Genre"}),w.add(S)}const g=Date.now();return Ne.getState().setGenres(y),Ne.setState({genresLastUpdated:g,genresLastChecked:g}),this.genresCache=y,y}catch(s){return console.error("[getGenres] Failed to build music genres:",s),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=Ne.getState(),r=12*60*60*1e3;if(!t&&n.years.length>0&&n.yearsLastUpdated){const s=Date.now(),o=n.yearsLastChecked||0;if(!(s-o>=r))return n.years;try{const c=(await this.getRecentlyAdded(50)).Items||[];let d=0;for(const f of c)if(f.DateCreated){const p=new Date(f.DateCreated).getTime();p>d&&(d=p)}if(Ne.setState({yearsLastChecked:s}),d<=n.yearsLastUpdated)return n.years}catch(i){return console.warn("[getYears] Failed to check for new tracks, using cached years:",i),n.years}}try{const s=new Set;let o=0;const a=200;let i=!0;for(;i;){const p=(await this.getSongs({limit:a,startIndex:o})).Items||[];if(p.forEach(h=>{h.ProductionYear&&h.ProductionYear>0&&s.add(h.ProductionYear)}),i=p.length===a,o+=a,o>1e4)break}const c=Array.from(s).sort((f,p)=>f-p),d=Date.now();return Ne.getState().setYears(c),Ne.setState({yearsLastUpdated:d,yearsLastChecked:d}),c}catch(s){return console.error("[getYears] Failed to extract years:",s),n.years.length>0?n.years:[]}}async getGenreSongs(t,n,r=!1){let s=[];if(t.startsWith("synthetic-")||r){let i=0;const c=200;let d=!0;for(;d;){const p=(await this.getSongs({limit:c,startIndex:i},!0)).Items||[];if(s.push(...p),d=p.length===c,i+=c,i>5e4)break}}else{let i=0;const c=200;let d=!0;for(;d;){const p=(await this.getSongs({genreIds:[t],limit:c,startIndex:i})).Items||[];if(s.push(...p),d=p.length===c,i+=c,i>5e4)break}}return s.filter(i=>{var d;return(d=i.Genres)==null?void 0:d.some(f=>f.toLowerCase()===n.toLowerCase())}).map(i=>({Id:i.Id,Name:i.Name,AlbumArtist:i.AlbumArtist,ArtistItems:i.ArtistItems,Album:i.Album,AlbumId:i.AlbumId,IndexNumber:i.IndexNumber,ProductionYear:i.ProductionYear,PremiereDate:i.PremiereDate,RunTimeTicks:i.RunTimeTicks,Genres:i.Genres}))}async syncLibrary(t={scope:"incremental"}){const n=Ne.getState();if(t.scope==="incremental"){const o=n.lastSyncCompleted,a=await this.getGenres(!1);let i=[];if(o){let g=0;const S=200;let x=!0;for(;x;){const v=(await this.getSongs({minDateLastSaved:new Date(o),limit:S,startIndex:g},!0)).Items||[];if(i.push(...v),x=v.length===S,g+=S,g>1e4)break}}else i=(await this.getSongs({limit:1e3,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const c=i.map(g=>({Id:g.Id,Name:g.Name,AlbumArtist:g.AlbumArtist,ArtistItems:g.ArtistItems,Album:g.Album,AlbumId:g.AlbumId,IndexNumber:g.IndexNumber,ProductionYear:g.ProductionYear,PremiereDate:g.PremiereDate,RunTimeTicks:g.RunTimeTicks,Genres:g.Genres})),d=n.songs,f=new Set(d.map(g=>g.Id)),p=c.filter(g=>!f.has(g.Id)),h=[...d,...p];try{n.setSongs(h)}catch(g){throw g instanceof DOMException&&g.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):g}const y=new Set;p.forEach(g=>{var S;(S=g.Genres)==null||S.forEach(x=>{a.forEach(m=>{var v;((v=m.Name)==null?void 0:v.toLowerCase())===x.toLowerCase()&&y.add(m.Id)})})});const w=Array.from(y).map(async g=>{const S=a.find(N=>N.Id===g);if(!(S!=null&&S.Name))return;const x=n.genreSongs[g]||[];new Set(x.map(N=>N.Id));const m=p.filter(N=>{var j;return(j=N.Genres)==null?void 0:j.some(b=>b.toLowerCase()===S.Name.toLowerCase())}),v=[...x,...m];n.setGenreSongs(g,v)});await Promise.all(w);return}this.clearGenresCache(),n.clearGenreSongs();const s=(await this.getGenres(!0)).map(async o=>{if(!(!o.Name||!o.Id))try{const a=await this.getGenreSongs(o.Id,o.Name);n.setGenreSongs(o.Id,a)}catch(a){console.warn(`[syncLibrary] Failed to load songs for genre ${o.Name}:`,a)}});await Promise.all(s)}async search(t,n=20){const r=t?dl(t.trim()):"",s=r.length>0,o=r.length,a=s&&o<3,i={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0};s&&(i.searchTerm=r,o>=3&&(i.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const c=this.buildQueryString(i),d=await this.request(`/Items?${c}`);let f=[];const p=[],h=[],y=[],w=new Set;if(d.Items.forEach(g=>{g.Type==="MusicArtist"?f.push(g):g.Type==="MusicAlbum"?p.push(g):g.Type==="Playlist"?h.push(g):g.Type==="Audio"&&(y.push(g),w.add(g.Id))}),a)try{const g=await this.getArtists({limit:1e3}),S=r.toLowerCase();f=(g.Items||[]).filter(x=>dl(x.Name||"").toLowerCase().includes(S))}catch(g){console.error("Failed to fetch all artists for short query:",g)}if(s&&f.length>0){const g=r.toLowerCase(),x=f.filter(v=>dl(v.Name||"").toLowerCase().includes(g)).map(v=>this.getArtistItems(v.Id).catch(N=>(console.error(`Failed to fetch songs for artist ${v.Id}:`,N),{albums:[],songs:[]})));(await Promise.all(x)).forEach(({songs:v})=>{v.forEach(N=>{w.has(N.Id)||(y.push(N),w.add(N.Id))})})}return{Artists:{Items:f,TotalRecordCount:f.length,StartIndex:0},Albums:{Items:p,TotalRecordCount:p.length,StartIndex:0},Playlists:{Items:h,TotalRecordCount:h.length,StartIndex:0},Songs:{Items:y,TotalRecordCount:y.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"}),r=await this.request(`/Items?${n}`),s=[],o=[];return r.Items.forEach(a=>{a.Type==="MusicAlbum"?s.push(a):a.Type==="Audio"&&o.push(a)}),{albums:s,songs:o}}async getGenreItems(t,n=50){const r=this.buildQueryString({genreIds:[t],includeItemTypes:["MusicAlbum"],recursive:!0,limit:n,sortBy:["DateCreated"],sortOrder:"Descending"});return this.request(`/Items?${r}`)}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch(n){console.warn("Failed to mark item as played:",n)}}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const o=new URLSearchParams({UserId:this.userId}),a=`${this.baseUrl}${s}?${o}`;try{const i=await fetch(a,{headers:this.getHeaders()});if(i.ok){const c=await i.json();if(c.Lyrics&&Array.isArray(c.Lyrics)&&c.Lyrics.length>0)return c.Lyrics.map(f=>f.Text||"").join(`
`);if(typeof c=="string")return c;if(c.Text)return c.Text}else if(i.status===404){r=`404 for ${s}`;continue}else{const c=await i.text().catch(()=>"");r=`${i.status}: ${c}`;continue}}catch(i){r=i instanceof Error?i.message:String(i);continue}}return null}catch(n){return console.warn("[getLyrics] Failed to fetch lyrics:",n),null}}}const O=new jx,Di=Ps()(no(e=>({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await O.authenticate(t,n,r);e({serverUrl:t,username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),O.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{e({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),js.remove("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),O.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId&&O.setCredentials(e.serverUrl,e.accessToken,e.userId)}})),Ft=Ps()(no(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),showQueueRecommendations:!0,setShowQueueRecommendations:t=>e({showQueueRecommendations:t}),recommendationsQuality:"good",setRecommendationsQuality:t=>e({recommendationsQuality:t})}),{name:"settings-storage"})),gu="last-server-url";function bx(){const[e,t]=u.useState(""),[n,r]=u.useState(""),[s,o]=u.useState(""),[a,i]=u.useState(""),[c,d]=u.useState(!1),f=Di(h=>h.login);u.useEffect(()=>{const h=js.get(gu);h&&t(h)},[]);const p=async h=>{h.preventDefault(),i(""),d(!0),e.trim()&&js.set(gu,e.trim());try{await f(e,n,s)}catch(y){i(y instanceof Error?y.message:"Login failed. Please check your credentials.")}finally{d(!1)}};return l.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),l.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),l.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:h=>t(h.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),l.jsx("input",{id:"username",type:"text",value:n,onChange:h=>r(h.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:s,onChange:h=>o(h.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),a&&l.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:a}),l.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:c?"Signing in...":"Sign In"})]})]})})}/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kx=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),xu=e=>{const t=kx(e);return t.charAt(0).toUpperCase()+t.slice(1)},om=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Cx=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ax={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...Ax,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:om("lucide",s),...!o&&!Cx(i)&&{"aria-hidden":"true"},...i},[...a.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,t)=>{const n=u.forwardRef(({className:r,...s},o)=>u.createElement(Px,{ref:o,iconNode:t,className:om(`lucide-${Ix(xu(e))}`,`lucide-${e}`,r),...s}));return n.displayName=xu(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Gn=xe("arrow-left",Ex);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Lr=xe("arrow-up-down",Mx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$i=xe("calendar",Tx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fi=xe("chevron-down",Rx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zx=xe("chevron-left",Lx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_x=xe("chevron-right",Ox);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],am=xe("chevron-up",Dx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],We=xe("disc",$x);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ui=xe("ellipsis",Fx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Bx=xe("github",Ux);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Hx=xe("grip-horizontal",Gx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],qn=xe("guitar",Vx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],Qx=xe("heart-handshake",Yx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],qx=xe("house",Wx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],Ot=xe("list-end",Xx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Jx=xe("list-music",Kx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],qs=xe("list-start",Zx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],t0=xe("list-video",e0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],r0=xe("log-out",n0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],l0=xe("mic-vocal",s0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],a0=xe("music",o0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Pn=xe("pause",i0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ze=xe("play",c0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]],d0=xe("rabbit",u0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ns=xe("refresh-cw",f0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Bi=xe("repeat-1",m0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Gi=xe("repeat",h0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],g0=xe("settings",p0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],tn=xe("shuffle",x0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Hi=xe("skip-back",v0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Vi=xe("skip-forward",y0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],S0=xe("square-play",w0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4Z",key:"1lbbv7"}],["path",{d:"M4.82 7.9 8 10",key:"m9wose"}],["path",{d:"M15.18 7.9 12 10",key:"p8dp2u"}],["path",{d:"M16.93 10H20a2 2 0 0 1 0 4H2",key:"12nsm7"}]],j0=xe("turtle",N0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ot=xe("user",b0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],k0=xe("volume-1",I0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],A0=xe("volume-2",C0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],E0=xe("volume",P0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],T0=xe("x",M0),R0=new Set,vu=new Map;function L0(e,t,n=5e3){const r=setTimeout(async()=>{const s=t();if((s==null?void 0:s.Id)===e)try{await O.markItemAsPlayed(e),R0.add(e),setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}}))},4e3)}catch{}vu.delete(e)},n);vu.set(e,r)}function qt(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}const bt=()=>{const{songs:e,currentIndex:t}=je();return t>=0&&e.length>t?e[t]:null},Yi=()=>{const{lastPlayedTrack:e}=je();return e},je=Ps()(no((e,t)=>({songs:[],currentIndex:-1,previousIndex:-1,standardOrder:[],shuffleOrder:[],isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,isFetchingRecommendations:!1,isLoadingMoreSongs:!1,shuffleHasMoreSongs:!1,lastPlayedTrack:null,isShuffleAllActive:!1,isShuffleGenreActive:!1,manuallyCleared:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setIsLoadingMoreSongs:n=>{e({isLoadingMoreSongs:n})},setCurrentTime:n=>{e({currentTime:n})},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n)},clearQueue:()=>{e(n=>{const r=n.currentIndex>=0?[n.songs[n.currentIndex]]:[];return{songs:r,currentIndex:r.length>0?0:-1,previousIndex:-1,standardOrder:r.map(s=>s.Id),shuffleOrder:r.map(s=>s.Id),manuallyCleared:!0}})},addToQueue:(n,r=!1,s="user")=>{e(o=>{const a=n.map(y=>({...y,source:s}));o.songs.filter(y=>y.source==="user"),o.songs.filter(y=>y.source==="recommendation");let i,c=[...o.standardOrder],d=[...o.shuffleOrder],f;if(r){const y=o.shuffle?qt([...a]):a,w=o.currentIndex+1,g=o.songs.slice(0,w),S=o.songs.slice(w);f=[...g,...y,...S],i=f.filter(m=>m.source==="user"),f.filter(m=>m.source==="recommendation");const x=y.map(m=>m.Id);if(o.shuffle){const m=o.currentIndex;d=[...o.shuffleOrder.slice(0,m+1),...x,...o.shuffleOrder.slice(m+1)]}else c=i.map(m=>m.Id)}else{const y=a,w=o.currentIndex>=0?o.songs[o.currentIndex]:null;if((w==null?void 0:w.source)==="recommendation"){const S=o.songs.slice(o.currentIndex+1).filter(m=>m.source==="recommendation"),x=o.currentIndex+1;f=[...o.songs.slice(0,x),...y,...S,...o.songs.slice(o.currentIndex+1+S.length)]}else f=[...o.songs,...y];i=f.filter(S=>S.source==="user");const g=y.map(S=>S.Id);if(o.shuffle){const S=(w==null?void 0:w.source)==="recommendation"?o.currentIndex+1:o.shuffleOrder.length;d=[...o.shuffleOrder.slice(0,S),...g,...o.shuffleOrder.slice(S)]}else{const S=(w==null?void 0:w.source)==="recommendation"?o.currentIndex+1:o.standardOrder.length;c=[...o.standardOrder.slice(0,S),...g,...o.standardOrder.slice(S)]}}let p=o.currentIndex;if(r)p=o.currentIndex;else if(o.currentIndex>=0){const y=o.songs[o.currentIndex];p=f.findIndex(w=>w.Id===(y==null?void 0:y.Id))}let h=f;if(f.length>1e3){const y=p>=0?f[p]:null,w=f.slice(0,p),g=f.slice(p+1),S=w.slice(-5),x=g,m=1e3-S.length-(y?1:0)-x.length,v=w.slice(-Math.max(0,m));h=[...v,...y?[y]:[],...x],p=y?v.length:-1}return{songs:h,currentIndex:p,standardOrder:c,shuffleOrder:d,manuallyCleared:!1}})},removeFromQueue:n=>{e(r=>{if(n<0||n>=r.songs.length)return r;const s=r.songs[n],o=r.songs.filter((f,p)=>p!==n);let a=r.standardOrder.filter(f=>f!==s.Id),i=r.shuffleOrder.filter(f=>f!==s.Id),c=r.currentIndex,d=r.previousIndex;return n<r.currentIndex?c=r.currentIndex-1:n===r.currentIndex&&(c=-1),n<r.previousIndex?d=r.previousIndex-1:n===r.previousIndex&&(d=-1),{songs:o,currentIndex:c,previousIndex:d,standardOrder:a,shuffleOrder:i}})},reorderQueue:(n,r)=>{e(s=>{if(n<0||r<0||n>=s.songs.length||r>=s.songs.length||n===r)return s;const o=s.songs[n],a=s.songs[r];if(o.source!==a.source)return s;const i=[...s.songs],[c]=i.splice(n,1);if(i.splice(r,0,c),o.source==="user"){const f=s.shuffle?"shuffleOrder":"standardOrder",p=s[f],h=p.indexOf(o.Id);if(h>=0){const y=[...p];y.splice(h,1);const g=i.slice(0,r+1).filter(x=>x.source==="user").length-1;y.splice(g,0,o.Id);const S=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:i,[f]:y,currentIndex:S,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}}}const d=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:i,currentIndex:d,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}})},play:()=>{const{audioElement:n,currentIndex:r,songs:s}=t();if(n&&r>=0&&r<s.length){const o=s[r],a=O.serverBaseUrl,i=a?`${a}/Audio/${o.Id}/stream?static=true`:"";n.src!==i&&(n.src=i,n.load()),n.play().then(()=>{e({isPlaying:!0}),L0(o.Id,()=>t().songs[t().currentIndex]||null),Ne.getState().addToRecentlyPlayed(o)}).catch(c=>{console.error("Playback error:",c),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const{songs:n,currentIndex:r,repeat:s,previousIndex:o}=t();if(n.length===0)return;let a=r+1;if(a>=n.length)if(s==="all")a=0;else return;const i=r>=0?n[r]:null;e({previousIndex:r,currentIndex:a,lastPlayedTrack:i}),t().play()},previous:()=>{const{songs:n,currentIndex:r,previousIndex:s}=t();if(n.length===0)return;let o=r,a=r;if(r>0)o=r-1;else{const{repeat:i}=t();if(i==="all")o=n.length-1;else return}e({currentIndex:o,previousIndex:a}),t().play()},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n}))},toggleShuffle:()=>{e(n=>{const r=!n.shuffle;if(r){const s=n.songs.slice(0,n.currentIndex),o=n.currentIndex>=0?n.songs[n.currentIndex]:null,a=n.songs.slice(n.currentIndex+1).filter(h=>h.source==="user"),i=n.songs.filter(h=>h.source==="recommendation"),c=qt(a.map(h=>h.Id)),d=c.map(h=>a.find(y=>y.Id===h)).filter(Boolean),f=[...s,...o?[o]:[],...d,...i],p=[...n.standardOrder.slice(0,n.currentIndex+1),...c];return{shuffle:r,shuffleOrder:p,songs:f}}else{const s=n.songs.slice(0,n.currentIndex),o=n.currentIndex>=0?n.songs[n.currentIndex]:null,i=n.standardOrder.slice(n.currentIndex+1).map(f=>n.songs.find(p=>p.Id===f&&p.source==="user")).filter(Boolean),c=n.songs.filter(f=>f.source==="recommendation"),d=[...s,...o?[o]:[],...i,...c];return{shuffle:r,songs:d}}})},toggleRepeat:()=>{e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{let s,o;r?(s=r,o=r.findIndex(i=>i.Id===n.Id),o===-1&&(s=[n,...r.filter(i=>i.Id!==n.Id)],o=0)):(s=[n],o=0);const a=s.map(i=>({...i,source:"user"}));e({songs:a,standardOrder:a.map(i=>i.Id),shuffleOrder:a.map(i=>i.Id),currentIndex:o,previousIndex:o>0?o-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playAlbum:(n,r=0)=>{const s=n.map(o=>({...o,source:"user"}));e({songs:s,standardOrder:s.map(o=>o.Id),shuffleOrder:s.map(o=>o.Id),currentIndex:r,previousIndex:r>0?r-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playNext:n=>{t().addToQueue(n,!0)},shuffleArtist:n=>{const s=qt(n).map(o=>({...o,source:"user"}));e({songs:s,standardOrder:s.map(o=>o.Id),shuffleOrder:s.map(o=>o.Id),currentIndex:0,previousIndex:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},shuffleAllSongs:async()=>{t().clearQueue();const{setShowQueueRecommendations:n}=Ft.getState();n(!1);const s=typeof window<"u"&&window.innerWidth<768?400:800,o=Ne.getState();let a=[];if(o.shufflePool.length>=1){const p=Math.min(5,o.shufflePool.length);a=o.shufflePool.slice(0,p);const h=o.shufflePool.slice(p),y=o.songs,w=new Set(o.recentlyPlayed.slice(0,10).map(m=>m.Id)),g=y.filter(m=>!w.has(m.Id)),S=qt(g).slice(0,p),x=[...h,...S];Ne.setState({shufflePool:x,lastPoolUpdate:Date.now()})}else{let p=o.songs;if(!p||p.length===0)try{p=(await O.getSongs({limit:Math.max(50,s),sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]}catch(h){console.error("Failed to fetch songs for shuffle all:",h);return}a=qt(p).slice(0,5),p.filter(h=>!a.some(y=>y.Id===h.Id)),Ne.setState({songs:p,shufflePool:qt(p).slice(0,30),lastPoolUpdate:Date.now()})}const i=a.map(p=>({...p,source:"user"})),c=a.length,f=o.songs.length+Object.values(o.genreSongs).flat().length>a.length;e({songs:i,standardOrder:i.map(p=>p.Id),shuffleOrder:i.map(p=>p.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:f,manuallyCleared:!0}),t().play(),setTimeout(async()=>{try{const p=t();if(!p.shuffle||p.songs.length!==c)return;let h=o.songs;(!h||h.length===0)&&(h=(await O.getSongs({limit:s,sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]);const y=Object.values(o.genreSongs).flat(),w=[...h,...y],g=new Map;w.forEach(v=>g.set(v.Id,v));const S=Array.from(g.values()),x=new Set(i.map(v=>v.Id)),m=S.filter(v=>!x.has(v.Id));if(m.length>0){const v=Math.min(s-c,m.length),j=qt(m).slice(0,v).map(k=>({...k,source:"user"})),b=[...i,...j];e({songs:b,standardOrder:b.map(k=>k.Id),shuffleOrder:b.map(k=>k.Id),shuffleHasMoreSongs:m.length>v}),Ne.getState().refreshShufflePool()}}catch(p){console.error("Failed to expand shuffle queue:",p)}},100)},shuffleGenreSongs:async(n,r)=>{t().clearQueue();const{setShowQueueRecommendations:s}=Ft.getState();s(!1);const a=typeof window<"u"&&window.innerWidth<768?400:800,i=Ne.getState().genreSongs[n];if(!i||i.length===0){console.warn(`No songs found for genre: ${r}`);return}const c=qt(i).slice(0,5),d=i.filter(h=>!c.some(y=>y.Id===h.Id)),f=c.map(h=>({...h,source:"user"})),p=i.length>5;e({songs:f,standardOrder:f.map(h=>h.Id),shuffleOrder:f.map(h=>h.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:p,manuallyCleared:!0}),t().play(),setTimeout(async()=>{try{const h=t();if(!h.shuffle||h.songs.length!==5)return;if(d.length>0){const y=Math.min(a-5,d.length),g=qt(d).slice(0,y).map(x=>({...x,source:"user"})),S=[...f,...g];e({songs:S,standardOrder:S.map(x=>x.Id),shuffleOrder:S.map(x=>x.Id),shuffleHasMoreSongs:d.length>y})}}catch(h){console.error("Failed to expand genre shuffle queue:",h)}},100)},skipToTrack:n=>{const{songs:r,currentIndex:s}=t();if(n<0||n>=r.length)return;const o=s>=0?r[s]:null;e({previousIndex:s>=0?s:-1,currentIndex:n,lastPlayedTrack:o}),t().play()},refreshCurrentTrack:async()=>{const{currentIndex:n,songs:r}=t();if(n<0||n>=r.length)return;const s=r[n];try{const o=await O.getSongById(s.Id);o&&e(a=>{const i=[...a.songs];return i[a.currentIndex]={...i[a.currentIndex],...o},{songs:i}})}catch(o){console.error("Failed to refresh current track:",o)}}}),{name:"player-storage",partialize:e=>({songs:e.songs,currentIndex:e.currentIndex,previousIndex:e.previousIndex,standardOrder:e.standardOrder,shuffleOrder:e.shuffleOrder,volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,isShuffleAllActive:e.isShuffleAllActive,isShuffleGenreActive:e.isShuffleGenreActive,manuallyCleared:e.manuallyCleared}),onRehydrateStorage:e=>{e&&(e.isPlaying=!1,e.currentTime=0,e.duration=0,e.audioElement=null,e.isFetchingRecommendations=!1,e.isShuffleAllActive=!1,e.isShuffleGenreActive=!1)}}));function At({variant:e="horizontal",onClose:t,onOpenPopover:n,popoverPosition:r,popoverDirection:s="up",className:o}){const{volume:a,setVolume:i}=je(),[c,d]=u.useState(!1),[f,p]=u.useState(1),h=u.useRef(null),y=u.useRef(null);u.useEffect(()=>{const M=localStorage.getItem("lastNonZeroVolume");M?p(Math.max(.01,Math.min(1,parseFloat(M)))):a>0&&p(a)},[]),u.useEffect(()=>{a>0&&(p(a),localStorage.setItem("lastNonZeroVolume",a.toString()))},[a]);const w=()=>a===0?E0:a<=.5?k0:A0,g=u.useCallback(M=>{if(!h.current)return;const E=h.current.getBoundingClientRect();let P,V;if(M instanceof TouchEvent||M.touches?(P=M.touches[0].clientX,V=M.touches[0].clientY):(P=M.clientX,V=M.clientY),e==="horizontal"){const Z=P-E.left,le=Math.max(0,Math.min(1,Z/E.width));i(le)}else{const Z=E.bottom-V,le=Math.max(0,Math.min(1,Z/E.height));i(le)}},[i,e]),S=M=>{M.preventDefault(),d(!0),g(M)},x=u.useCallback(M=>{c&&g(M)},[c,g]),m=u.useCallback(()=>{d(!1)},[]),v=M=>{d(!0),g(M)},N=u.useCallback(M=>{c&&(M.preventDefault(),g(M))},[c,g]),j=u.useCallback(()=>{d(!1)},[]),b=M=>{M.stopPropagation(),je.getState().volume>0?i(0):i(f)};u.useEffect(()=>{if(c)return document.addEventListener("mousemove",x),document.addEventListener("mouseup",m),document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("touchend",j),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",j)}},[c,x,m,N,j]);const k=w();if(e==="compact")return l.jsx("button",{ref:y,onClick:M=>{M.stopPropagation(),n&&n()},className:o||"text-gray-400 hover:text-zinc-300 transition-colors",children:l.jsx(k,{className:"w-5 h-5"})});if(e==="horizontal")return l.jsxs("div",{className:"flex items-center gap-2 px-2 select-none",style:{width:"120px"},children:[l.jsx("button",{onClick:b,className:"text-gray-400 hover:text-zinc-300 flex-shrink-0",children:l.jsx(k,{className:"w-4 h-4"})}),l.jsx("div",{ref:h,className:"flex-1 relative cursor-pointer",style:{height:"24px"},onMouseDown:S,onTouchStart:v,children:l.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 h-1 bg-zinc-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gray-400 rounded-full transition-all duration-100",style:{width:`${a*100}%`}})})})]});const I=r?{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,transform:s==="down"?"translate(-50%, 8px)":"translate(-50%, calc(-100% - 8px))"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return l.jsxs("div",{className:"fixed inset-0 z-50",children:[l.jsx("div",{className:"fixed inset-0",onClick:t}),l.jsx("div",{className:"relative z-10 bg-zinc-800 rounded-lg p-4 shadow-xl border border-zinc-700",style:I,children:l.jsxs("div",{ref:h,onMouseDown:S,onTouchStart:v,className:"h-[200px] w-1 bg-zinc-800 rounded-full cursor-pointer group relative flex flex-col justify-end",children:[l.jsx("div",{className:"w-full bg-gray-400 rounded-full transition-all",style:{height:`${a*100}%`}}),l.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",style:{bottom:`${a*100}%`,transform:"translate(-50%, 50%)"}})]})})]})}const z0=[{path:"/",label:"Home",icon:qx,key:"home"},{path:"/artists",label:"Artists",icon:ot,key:"artists"},{path:"/albums",label:"Albums",icon:We,key:"albums"},{path:"/songs",label:"Songs",icon:a0,key:"songs"},{path:"/genres",label:"Genres",icon:qn,key:"genres"},{path:"/playlists",label:"Playlists",icon:Jx,key:"playlists"}];function O0(){const e=cn(),{pageVisibility:t}=Ft(),[n,r]=u.useState(!1),s=z0.filter(a=>a.key==="home"?!0:t[a.key]),o=(a,i)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===i&&a.preventDefault()};return l.jsxs("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:[l.jsxs("div",{className:"relative h-16",children:[l.jsx("div",{className:"max-w-[600px] mx-auto h-full",children:l.jsx("div",{className:"flex justify-around items-center h-full",children:s.map(a=>{const i=e.pathname===a.path,c=a.icon;return l.jsxs(Ug,{to:a.path,onClick:d=>o(d,a.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${i?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[l.jsx(c,{className:"w-5 h-5 mb-1"}),l.jsx("span",{className:"text-xs font-medium",children:a.label})]},a.path)})})}),l.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 hidden lg:block",children:l.jsx(At,{variant:"horizontal"})})]}),n&&l.jsx(At,{variant:"vertical",onClose:()=>r(!1)})]})}function ct({src:e,alt:t,className:n="",fallback:r,style:s,showOutline:o,rounded:a="rounded",onError:i}){const[c,d]=u.useState(e),[f,p]=u.useState(!1),[h,y]=u.useState(!1);u.useEffect(()=>{d(e),p(!1),y(!1)},[e]);const w=()=>{!f&&r?(d(r),p(!0)):i?(i(),y(!0)):d('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="300"%3E%3Crect fill="%23333" width="300" height="300"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="20" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3ENo Image%3C/text%3E%3C/svg%3E')};return h?null:l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("img",{src:c,alt:t,className:`block ${n}`,onError:w,loading:"lazy",style:s}),o&&l.jsx("div",{className:`absolute inset-0 pointer-events-none border ${a}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function Qt(){return l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function Qi({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,o]=u.useState(!1),[a,i]=u.useState(!1);if(u.useEffect(()=>{if(e)o(!1),i(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0)})}),document.body.style.overflow="hidden";else{o(!1);const d=setTimeout(()=>{i(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(d),document.body.style.overflow=""}}},[e]),!a)return null;const c=l.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[l.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),l.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out ${s?"translate-y-0":"translate-y-full"}`,onClick:d=>d.stopPropagation(),children:l.jsx("div",{className:"pb-safe pt-4",children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})})]});return er.createPortal(c,document.body)}const ro=Ps((e,t)=>({state:"idle",source:null,message:null,abortController:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null})}}));function Qe({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:o,mode:a="mobile",position:i}){const c=He(),[d,f]=u.useState(!1),[p,h]=u.useState(null),{playTrack:y,playAlbum:w,addToQueue:g,playNext:S,shuffleArtist:x,toggleShuffle:m}=je(),{startSync:v,completeSync:N}=ro(),{genres:j}=Ne();if(!e||!t)return null;const b=P=>{if(!P)return null;const V=j.find(Z=>{var le;return((le=Z.Name)==null?void 0:le.toLowerCase())===P.toLowerCase()});return(V==null?void 0:V.Id)||null},k=async P=>{var V,Z,le,ue,fe;if(e){if(P.startsWith("goTo")){if(r(),o&&o(),P==="goToArtist"){const W=((Z=(V=e.ArtistItems)==null?void 0:V[0])==null?void 0:Z.Id)||((ue=(le=e.AlbumArtists)==null?void 0:le[0])==null?void 0:ue.Id);W&&c(`/artist/${W}`)}else if(P==="goToAlbum")e.AlbumId&&c(`/album/${e.AlbumId}`);else if(P==="goToGenre"){const W=(fe=e.Genres)==null?void 0:fe[0];if(W){const D=b(W);if(D)c(`/genre/${D}`);else{const B=(await O.getGenres()).find(J=>{var Q;return((Q=J.Name)==null?void 0:Q.toLowerCase())===W.toLowerCase()});B!=null&&B.Id&&c(`/genre/${B.Id}`)}}}return}f(!0),h(P);try{switch(t){case"album":{if(P==="play"){const W=await O.getAlbumTracks(e.Id),{shuffle:D}=je.getState();D&&m(),w(W)}else if(P==="shuffle"){const W=await O.getAlbumTracks(e.Id),{shuffle:D}=je.getState();D&&m(),w(W),requestAnimationFrame(()=>{const{shuffle:U}=je.getState();U||m()})}else if(P==="playNext"){const W=await O.getAlbumTracks(e.Id);S(W)}else if(P==="addToQueue"){const W=await O.getAlbumTracks(e.Id);g(W)}else if(P==="sync"){v("context-menu",`Syncing ${e.Name}...`);try{await O.getAlbumTracks(e.Id),N(!0,`${e.Name} synced`)}catch{N(!1,`Failed to sync ${e.Name}`)}}break}case"song":{if(P==="play")console.log("ContextMenu: Playing song",e.Name),y(e);else if(P==="playNext")console.log("ContextMenu: Adding song to play next",e.Name),S([e]);else if(P==="addToQueue")console.log("ContextMenu: Adding song to queue",e.Name),g([e]);else if(P==="sync"){v("context-menu",`Syncing ${e.Name}...`);try{const W=await O.getSongById(e.Id);if(W.Genres){const D=await O.getGenres();W.Genres.forEach(U=>{const B=D.find(J=>{var Q;return((Q=J.Name)==null?void 0:Q.toLowerCase())===U.toLowerCase()});B!=null&&B.Id&&Ne.getState().clearGenreSongsForGenre(B.Id)})}N(!0,`${e.Name} synced`)}catch{N(!1,`Failed to sync ${e.Name}`)}}break}case"artist":{if(P==="shuffle"){const{songs:W}=await O.getArtistItems(e.Id);x(W)}else if(P==="playNext"){const{songs:W}=await O.getArtistItems(e.Id);S(W)}else if(P==="addToQueue"){const{songs:W}=await O.getArtistItems(e.Id);g(W)}else if(P==="sync"){v("context-menu",`Syncing ${e.Name}...`);try{await O.getArtistItems(e.Id),N(!0,`${e.Name} synced`)}catch{N(!1,`Failed to sync ${e.Name}`)}}break}case"playlist":{if(P==="play"){const W=await O.getAlbumTracks(e.Id),{shuffle:D}=je.getState();D&&m(),w(W)}else if(P==="shuffle"){const W=await O.getAlbumTracks(e.Id),{shuffle:D}=je.getState();D&&m(),w(W),requestAnimationFrame(()=>{const{shuffle:U}=je.getState();U||m()})}else if(P==="playNext"){const W=await O.getAlbumTracks(e.Id);S(W)}else if(P==="addToQueue"){const W=await O.getAlbumTracks(e.Id);g(W)}break}}r()}catch(W){console.error("Context menu action failed:",W)}finally{f(!1),h(null)}}},M=(()=>{var P,V,Z,le,ue,fe,W,D;switch(t){case"album":{const U=((V=(P=e.ArtistItems)==null?void 0:P[0])==null?void 0:V.Name)||((le=(Z=e.AlbumArtists)==null?void 0:Z[0])==null?void 0:le.Name)||"Artist",B=((ue=e.Genres)==null?void 0:ue[0])||"Genre";return[{id:"play",label:"Play",icon:Ze},{id:"shuffle",label:"Shuffle",icon:tn},{id:"playNext",label:"Play Next",icon:qs},{id:"addToQueue",label:"Add to Queue",icon:Ot},{id:"goToArtist",label:`Go to ${U}`,icon:ot},{id:"goToGenre",label:`Go to ${B}`,icon:qn},{id:"sync",label:"Sync",icon:ns}]}case"song":{const U=((W=(fe=e.ArtistItems)==null?void 0:fe[0])==null?void 0:W.Name)||e.AlbumArtist||"Artist",B=e.Album||"Album",J=((D=e.Genres)==null?void 0:D[0])||"Genre";return[{id:"play",label:"Play",icon:Ze},{id:"playNext",label:"Play Next",icon:qs},{id:"addToQueue",label:"Add to Queue",icon:Ot},{id:"goToArtist",label:`Go to ${U}`,icon:ot},{id:"goToAlbum",label:`Go to ${B}`,icon:We},{id:"goToGenre",label:`Go to ${J}`,icon:qn},{id:"sync",label:"Sync",icon:ns}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:tn},{id:"playNext",label:"Play Next",icon:qs},{id:"addToQueue",label:"Add to Queue",icon:Ot},{id:"sync",label:"Sync",icon:ns}];case"playlist":return[{id:"play",label:"Play",icon:Ze},{id:"shuffle",label:"Shuffle",icon:tn},{id:"playNext",label:"Play Next",icon:qs},{id:"addToQueue",label:"Add to Queue",icon:Ot}];default:return[]}})(),E=e.Name||"Unknown";if(a==="desktop"&&n){const V=Math.min(400,M.length*44+8);let Z=(i==null?void 0:i.x)||100,le=(i==null?void 0:i.y)||100;return Z+240>window.innerWidth&&(Z=window.innerWidth-240-10),le+V>window.innerHeight&&(le=window.innerHeight-V-10),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),l.jsx("div",{className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:Z,top:le,zIndex:s},onClick:ue=>ue.stopPropagation(),children:l.jsx("div",{className:"space-y-0",children:M.map(ue=>{const fe=ue.icon,W=d&&p===ue.id;return l.jsxs("button",{onClick:()=>k(ue.id),disabled:d,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[l.jsx(fe,{className:"w-4 h-4 text-white flex-shrink-0"}),l.jsx("span",{className:"flex-1 text-sm text-white",children:ue.label}),W&&l.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},ue.id)})})})]})}return l.jsx(Qi,{isOpen:n,onClose:r,zIndex:s,children:l.jsxs("div",{className:"pb-6",children:[l.jsx("div",{className:"mb-4 ml-4",children:l.jsx("div",{className:"text-lg font-semibold text-white break-words",children:E})}),l.jsx("div",{className:"space-y-1",children:M.map(P=>{const V=P.icon,Z=d&&p===P.id;return l.jsxs("button",{onClick:()=>k(P.id),disabled:d,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(V,{className:"w-5 h-5 text-white"}),l.jsx("span",{className:"flex-1 text-left text-white font-medium",children:P.label}),Z&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},P.id)})})]})})}function Ee({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=u.useRef(null),o=u.useRef(null),a=u.useRef(!1),i=u.useRef(null),c=u.useRef(!1),d=u.useCallback(h=>{h.preventDefault(),a.current=!1,c.current=!1,o.current=h.target,"touches"in h&&h.touches.length>0?i.current={x:h.touches[0].clientX,y:h.touches[0].clientY}:i.current=null,s.current=setTimeout(()=>{c.current||(a.current=!0,e(h))},n)},[e,n]),f=u.useCallback(h=>{if(!i.current||h.touches.length===0)return;const y=h.touches[0].clientX,w=h.touches[0].clientY,g=Math.abs(y-i.current.x),S=Math.abs(w-i.current.y);Math.sqrt(g*g+S*S)>r&&(c.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),p=u.useCallback(h=>{const y=a.current;s.current&&(clearTimeout(s.current),s.current=null),t&&o.current===h.target&&!y&&!c.current&&t(h),a.current=!1,c.current=!1,o.current=null,i.current=null},[t]);return{onMouseDown:d,onTouchStart:d,onTouchMove:f,onMouseUp:p,onMouseLeave:h=>{s.current&&(clearTimeout(s.current),s.current=null),a.current=!1,c.current=!1,o.current=null,i.current=null},onTouchEnd:p}}const _0=45,D0=45;function Xs({track:e,index:t,isCurrent:n,isPlaying:r,showRemoveButton:s=!0,onClick:o,onRemove:a,onReorderDragStart:i,onReorderDrop:c,onContextMenu:d,isDragOver:f,onDragEnterRow:p}){var y,w;const h=Ee({onLongPress:g=>{g.preventDefault(),d(e)}});return l.jsxs("div",{draggable:!n,onDragOver:g=>{g.preventDefault(),g.dataTransfer.dropEffect="move"},onDragEnter:g=>{g.preventDefault(),n||p(t)},onDrop:g=>!n&&c(g,t),className:`queue-row flex items-center gap-3 p-3 ${n?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${n?"bg-zinc-900":""} relative`,onClick:n?void 0:o,onContextMenu:g=>{g.preventDefault(),d(e)},children:[f&&!n&&l.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),l.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:l.jsx(ct,{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0",...h,children:[l.jsx("div",{className:`text-sm font-medium truncate ${n?"text-[var(--accent-color)]":"text-white"}`,children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((w=(y=e.ArtistItems)==null?void 0:y[0])==null?void 0:w.Name)||"Unknown Artist"})]}),n?l.jsx("button",{onClick:g=>{g.stopPropagation(),o()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2",children:r?l.jsx(Pn,{className:"w-5 h-5"}):l.jsx(Ze,{className:"w-5 h-5"})}):l.jsx(l.Fragment,{children:s&&l.jsxs(l.Fragment,{children:[l.jsx("button",{draggable:!0,onDragStart:g=>i(g,t),className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing",children:l.jsx(Hx,{className:"w-4 h-4"})}),a&&l.jsx("button",{onClick:g=>{g.stopPropagation(),a()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}function $0({onClose:e,onNavigateFromContextMenu:t}){const n=u.useRef(null),[r,s]=u.useState(!1),[o,a]=u.useState(null),[i,c]=u.useState(null),[d,f]=u.useState(null),[p,h]=u.useState(_0),[y,w]=u.useState(!1),[g,S]=u.useState(!1),[x,m]=u.useState(null),v=u.useRef(null),{songs:N,currentIndex:j,clearQueue:b,isPlaying:k,shuffle:I,repeat:M,togglePlayPause:E,toggleShuffle:P,toggleRepeat:V,next:Z,previous:le,skipToTrack:ue,removeFromQueue:fe,reorderQueue:W,isFetchingRecommendations:D,isLoadingMoreSongs:U,shuffleHasMoreSongs:B}=je(),{showQueueRecommendations:J,setShowQueueRecommendations:Q,recommendationsQuality:ge}=Ft(),ae=(A,F)=>{A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/plain",F.toString()),f(F);const R=A.currentTarget,C=R==null?void 0:R.closest(".queue-row");if(C&&A.dataTransfer.setDragImage){const ie=C.querySelector(".queue-drag-art")??C,oe=ie.getBoundingClientRect();A.dataTransfer.setDragImage(ie,oe.width/2,oe.height/2)}},pe=(A,F)=>{A.preventDefault();const R=A.dataTransfer.getData("text/plain")||A.dataTransfer.getData("text/html"),C=parseInt(R,10);if(Number.isNaN(C))return;const ie=N[d??C],oe=N[F];if(ie&&oe&&ie.source!==oe.source){c(null),f(null);return}C!==F&&W(C,F),c(null),f(null)},H=j>=0?N[j]:null,$=N.filter((A,F)=>F<j),ee=N.filter((A,F)=>A.source==="user"&&F>j),te=N.filter((A,F)=>A.source==="recommendation"&&F>j);let ne=p;const L=$.slice(-Math.min(ne,$.length));ne-=L.length,ne-=H?1:0;const z=ee.slice(0,Math.max(0,ne));ne-=z.length;const X=te.slice(0,Math.max(0,ne)),K=j>=0&&j<N.length-1,we=j>0;N.length===0||z.length===0&&X.length;const Se=A=>{a(A),s(!0)},ke=A=>{if(d==null)return;const F=N[d],R=N[A];if(!(!F||!R)){if(F.source!==R.source){c(null);return}c(A)}},$e=()=>{if(v.current){const A=v.current.getBoundingClientRect();m({top:A.top,left:A.left+A.width/2}),S(!0)}};return u.useEffect(()=>{const A=document.querySelector(".queue-container");if(!A)return;const F=()=>{const R=A.scrollTop,C=A.clientHeight,q=A.scrollHeight;R+C*2.5>=q&&h(ie=>Math.min(ie+D0,N.length))};return A.addEventListener("scroll",F,{passive:!0}),()=>A.removeEventListener("scroll",F)},[N.length]),l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 max-w-[768px] mx-auto w-full",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[l.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 queue-container",style:{paddingBottom:"8rem"},children:N.length===0&&!H?l.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:l.jsx("p",{children:"Queue is empty"})}):l.jsxs("div",{children:[L.length>0&&y&&l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[l.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Previous"}),l.jsx("button",{onClick:()=>w(!1),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Hide"})]}),L.map((A,F)=>{const R=N.indexOf(A);return l.jsx(Xs,{track:A,index:R,isCurrent:!1,isPlaying:!1,showRemoveButton:!1,onClick:()=>ue(R),onReorderDragStart:ae,onReorderDrop:pe,onContextMenu:Se,isDragOver:!1,onDragEnterRow:ke},`${A.Id}-${F}`)})]}),H&&l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[l.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Now Playing"}),L.length>0&&!y&&l.jsx("button",{onClick:()=>w(!0),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Show Previous"})]}),l.jsx(Xs,{track:H,index:j,isCurrent:!0,isPlaying:k,showRemoveButton:!1,onClick:E,onReorderDragStart:ae,onReorderDrop:pe,onContextMenu:Se,isDragOver:!1,onDragEnterRow:ke})]}),z.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[l.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Coming Up"}),l.jsx("button",{onClick:()=>{const F=N.filter((C,q)=>q<=j||C.source==="recommendation"),R=Math.min(j,F.length-1);je.setState({songs:F,currentIndex:R,standardOrder:F.filter(C=>C.source==="user").map(C=>C.Id),shuffleOrder:F.filter(C=>C.source==="user").map(C=>C.Id)})},className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]}),z.map((A,F)=>{const R=N.indexOf(A);return l.jsx(Xs,{track:A,index:R,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>ue(R),onRemove:()=>fe(R),onReorderDragStart:ae,onReorderDrop:pe,onContextMenu:Se,isDragOver:i===R,onDragEnterRow:ke},`${A.Id}-${F}`)}),U&&l.jsxs("div",{className:"flex items-center justify-center py-4",children:[l.jsx(Qt,{size:"sm"}),l.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading more songs..."})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[l.jsxs("div",{className:"text-base font-bold text-white tracking-wider flex items-baseline gap-2",children:["Recommendations",D&&l.jsx("span",{className:"text-xs text-gray-400 font-normal",children:"Syncing genres..."}),!D&&ge==="failed"&&l.jsx("span",{className:"text-xs text-red-400 font-normal",children:"(Unable to generate)"})]}),l.jsx("button",{onClick:()=>{const A=!J;if(Q(A),!A){const F=N.filter(C=>C.source!=="recommendation"),R=Math.min(j,F.length-1);je.setState({songs:F,currentIndex:R,standardOrder:F.filter(C=>C.source==="user").map(C=>C.Id),shuffleOrder:F.filter(C=>C.source==="user").map(C=>C.Id)})}},className:`relative w-12 h-6 rounded-full transition-colors ${J?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:l.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${J?"translate-x-6":"translate-x-0"}`})})]}),J&&l.jsxs(l.Fragment,{children:[X.map((A,F)=>{const R=N.indexOf(A);return l.jsx(Xs,{track:A,index:R,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>ue(R),onRemove:()=>fe(R),onReorderDragStart:ae,onReorderDrop:pe,onContextMenu:Se,isDragOver:i===R,onDragEnterRow:ke},`${A.Id}-${F}`)}),D&&l.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:l.jsx(Qt,{})})]})]})]})}),l.jsx(Qe,{item:o,itemType:o?"song":null,isOpen:r,onClose:()=>{s(!1),a(null)},onNavigate:t}),l.jsx("div",{ref:n,className:"px-6 pt-2 space-y-6 flex-shrink-0",style:{paddingBottom:"1.5rem"},children:l.jsxs("div",{className:"flex items-center justify-center gap-8 relative",children:[l.jsx("button",{onClick:P,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${I?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(tn,{className:"w-6 h-6"})}),l.jsx("button",{onClick:le,disabled:!we,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${we?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:l.jsx(Hi,{className:"w-8 h-8"})}),l.jsx("button",{onClick:E,className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:k?l.jsx(Pn,{className:"w-8 h-8"}):l.jsx(Ze,{className:"w-8 h-8"})}),l.jsx("button",{onClick:Z,disabled:!K,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${K?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:l.jsx(Vi,{className:"w-8 h-8"})}),l.jsx("button",{onClick:V,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${M!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:M==="one"?l.jsx(Bi,{className:"w-6 h-6"}):l.jsx(Gi,{className:"w-6 h-6"})}),l.jsx("div",{ref:v,className:"absolute right-0 top-1/2 -translate-y-1/2 hidden md:flex lg:hidden",children:l.jsx(At,{variant:"compact",onOpenPopover:$e})}),l.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 hidden lg:flex",children:l.jsx(At,{variant:"horizontal"})})]})}),g&&x&&l.jsx(At,{variant:"vertical",onClose:()=>S(!1),popoverPosition:x})]})}function F0({onClose:e}){const t=bt(),n=Yi(),r=t||n,[s,o]=u.useState(null),[a,i]=u.useState(!1);return u.useEffect(()=>{(async()=>{if(!r){o(null);return}i(!0);try{const d=await O.getLyrics(r.Id);o(d)}catch(d){console.error("Failed to fetch lyrics:",d),o(null)}finally{i(!1)}})()},[r]),r?l.jsx("div",{className:"fixed left-0 right-0 bg-zinc-900 z-[55] flex flex-col",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:l.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 px-6 py-4 relative",children:[l.jsx("div",{className:"sticky left-0 right-0 h-16 bg-gradient-to-b from-zinc-900 via-zinc-900/50 to-transparent pointer-events-none z-10 -mx-6",style:{top:"-24px"}}),a?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"text-gray-400",children:"Loading lyrics..."})}):s?l.jsx("div",{className:"max-w-[768px] mx-auto pb-8",children:l.jsx("div",{className:"text-white text-left whitespace-pre-line leading-relaxed",children:s.split(`
`).map((c,d)=>l.jsx("div",{className:"mb-2",children:c},d))})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"text-gray-400 text-center",children:"This song has no lyrics"})}),l.jsx("div",{className:"sticky left-0 right-0 h-16 bg-gradient-to-t from-zinc-900 via-zinc-900/50 to-transparent pointer-events-none z-10 -mx-6",style:{bottom:"-16px"}})]})}):null}function U0({onClose:e,onClosingStart:t,closeRef:n}){const r=He(),{songs:s,currentIndex:o,isPlaying:a,currentTime:i,duration:c,shuffle:d,repeat:f,togglePlayPause:p,next:h,previous:y,seek:w,setVolume:g,toggleShuffle:S,toggleRepeat:x,playTrack:m}=je(),v=bt(),N=Yi(),j=v||N,[b,k]=u.useState(!1);u.useEffect(()=>{k(!1)},[]);const[I,M]=u.useState(!1),[E,P]=u.useState(!1),[V,Z]=u.useState(null),[le,ue]=u.useState("up"),fe=u.useRef(null),W=u.useRef(null),[D,U]=u.useState(!1),[B,J]=u.useState(!1),[Q,ge]=u.useState(!1),[ae,pe]=u.useState(!1),H=u.useRef(null),$=u.useRef(null),ee=u.useRef(null),te=u.useRef(null),ne=u.useRef(!1),L=u.useRef(null);u.useEffect(()=>{const re=window.getComputedStyle(document.body).overflowY,ce=window.getComputedStyle(document.documentElement).overflowY,_=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const T=document.getElementById("root");return T&&(T.style.overflowY="hidden"),()=>{document.body.style.overflowY=re,document.documentElement.style.overflowY=ce,T&&(T.style.overflowY=_!=="N/A"?_:"")}},[]),u.useEffect(()=>{requestAnimationFrame(()=>{ge(!0)})},[]);const z=o>=0&&o<s.length-1,X=o>0;u.useEffect(()=>{g(1)},[g]),u.useEffect(()=>{(async()=>{if(!j){U(!1);return}try{const ce=await O.getLyrics(j.Id),_=ce!==null&&ce.trim().length>0;U(_)}catch(ce){console.warn("[PlayerModal] Lyrics check failed:",ce),U(!1)}})()},[j]);const K=re=>{if(!re)return"Unknown";if(re.Name&&re.Name.trim())return re.Name;const ce=re.Path;return ce&&typeof ce=="string"&&(ce.split("/").pop()||ce.split("\\").pop())||"Unknown"},we=re=>{var ce,_;return re&&(re.AlbumArtist||((_=(ce=re.ArtistItems)==null?void 0:ce[0])==null?void 0:_.Name))||""};if(u.useEffect(()=>{"mediaSession"in navigator&&j&&(navigator.mediaSession.metadata=new MediaMetadata({title:K(j),artist:we(j),album:j.Album||"",artwork:[{src:O.getAlbumArtUrl(j.AlbumId||j.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",p),navigator.mediaSession.setActionHandler("pause",p),navigator.mediaSession.setActionHandler("previoustrack",y),navigator.mediaSession.setActionHandler("nexttrack",h))},[j,a,p,h,y]),u.useEffect(()=>{pe(!1)},[j==null?void 0:j.Id]),!j)return null;const Se=c>0?i/c*100:0,ke=re=>{const ce=Math.floor(re/60),_=Math.floor(re%60);return`${ce}:${_.toString().padStart(2,"0")}`},$e=()=>{if(j.Name&&j.Name.trim())return j.Name;const re=j.Path;return re&&typeof re=="string"&&(re.split("/").pop()||re.split("\\").pop())||"Unknown"},A=()=>{var re,ce;return j.AlbumArtist||((ce=(re=j.ArtistItems)==null?void 0:re[0])==null?void 0:ce.Name)},F=j.AlbumId&&j.Album&&j.Album.trim(),R=re=>{if(!H.current||!c||ne.current)return;const ce=H.current.getBoundingClientRect(),_=(re.clientX-ce.left)/ce.width;w(Math.max(0,Math.min(1,_))*c)},C=re=>{if(!H.current||!c)return;ne.current=!0,L.current=re.clientX;const ce=H.current.getBoundingClientRect(),_=(re.clientX-ce.left)/ce.width;w(Math.max(0,Math.min(1,_))*c)},q=()=>{ne.current=!1,L.current=null},ie=re=>{if(!H.current||!c)return;re.stopPropagation(),ne.current=!0;const ce=re.touches[0],_=H.current.getBoundingClientRect(),T=(ce.clientX-_.left)/_.width;w(Math.max(0,Math.min(1,T))*c)},oe=re=>{if(!ne.current||!H.current||!c)return;re.stopPropagation(),re.preventDefault();const ce=re.touches[0],_=H.current.getBoundingClientRect(),T=(ce.clientX-_.left)/_.width;w(Math.max(0,Math.min(1,T))*c)},me=re=>{re.stopPropagation(),ne.current=!1,L.current=null};u.useEffect(()=>{const re=_=>{if(!ne.current||!H.current||!c)return;const T=H.current.getBoundingClientRect(),de=(_.clientX-T.left)/T.width;w(Math.max(0,Math.min(1,de))*c)},ce=()=>{ne.current&&(ne.current=!1,L.current=null)};return document.addEventListener("mousemove",re),document.addEventListener("mouseup",ce),()=>{document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",ce)}},[c,w]);const ve=()=>{J(!0),t==null||t(),setTimeout(()=>{e()},300)},Y=(re="up")=>{const ce=re==="down"?W:fe;if(ce.current){const _=ce.current.getBoundingClientRect();Z({top:re==="down"?_.bottom:_.top,left:_.left+_.width/2}),ue(re),P(!0)}};u.useEffect(()=>(n&&(n.current=ve),()=>{n&&(n.current=null)}),[n]);const he=re=>{b||I||($.current=re.touches[0].clientY,ee.current=Date.now())},Te=re=>{if(b||I||$.current===null)return;const _=re.touches[0].clientY-$.current;if(_>0&&te.current){const T=Math.min(_,window.innerHeight*.5);te.current.style.transform=`translateY(${T}px)`}},Pe=re=>{if(b||I||$.current===null||ee.current===null){$.current=null,ee.current=null,te.current&&(te.current.style.transform="");return}const _=re.changedTouches[0].clientY-$.current,T=Date.now()-ee.current,de=50,Ce=.3;te.current&&(te.current.style.transform="");const Ie=_/T;(_>de||_>30&&Ie>Ce)&&ve(),$.current=null,ee.current=null};return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }

      @media (min-width: 1024px) {
        .lg\\:max-w-\\[864px\\] { max-width: 864px; }
      }
    `}),l.jsxs("div",{ref:te,onTouchStart:he,onTouchMove:Te,onTouchEnd:Pe,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex flex-col transition-transform duration-300 ease-out ${B?"translate-y-full":Q?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:$.current===null?"transform 300ms ease-out":"none"},children:[l.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[l.jsx("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:l.jsx("button",{onClick:ve,className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:l.jsx(Fi,{className:"w-8 h-8"})})}),I&&j&&l.jsx("h2",{className:"absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:$e()}),l.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[l.jsx("div",{className:"md:hidden",ref:W,children:l.jsx(At,{variant:"compact",onOpenPopover:()=>Y("down")})}),D&&!b&&l.jsx("button",{onClick:()=>M(!I),className:`transition-colors pr-2 ${I?"text-[var(--accent-color)] hover:text-[var(--accent-color)]":"text-white hover:text-zinc-300"}`,children:l.jsx(l0,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>{b||M(!1),k(!b)},className:"text-white hover:text-zinc-300 transition-colors",children:b?l.jsx(S0,{className:"w-6 h-6"}):l.jsx(t0,{className:"w-6 h-6"})})]})]}),b?l.jsx($0,{onClose:()=>k(!1),onNavigateFromContextMenu:()=>{ve()}}):l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full relative",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[l.jsx("div",{className:"flex-1 overflow-hidden min-h-0 flex items-center justify-center",children:l.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8 md:pr-0",children:l.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[l.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:l.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 bg-zinc-900 ${ae?"":"shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:ae?l.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-zinc-900 flex items-center justify-center relative",children:l.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:re=>{console.error("Failed to load vinyl image"),re.currentTarget.style.display="none"}})}):l.jsx(ct,{src:O.getAlbumArtUrl(j.AlbumId||j.Id),alt:j.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>pe(!0)})})}),l.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[l.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:$e()}),A()&&l.jsxs("button",{onClick:()=>{var ce,_;const re=(_=(ce=j.ArtistItems)==null?void 0:ce[0])==null?void 0:_.Id;re&&(e(),r(`/artist/${re}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-gray-400 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[l.jsx(ot,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("span",{className:"break-words min-w-0",children:A()})]}),F&&l.jsxs("button",{onClick:()=>{e(),r(`/album/${j.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-gray-400 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[l.jsx(We,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("span",{className:"break-words min-w-0",children:j.Album})]})]})]})})}),l.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[l.jsx("div",{className:"space-y-3 px-4 w-full",children:l.jsxs("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto",children:[l.jsx("div",{ref:H,className:"h-2 bg-zinc-800 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:R,onMouseDown:C,onMouseUp:q,onMouseLeave:q,onTouchStart:ie,onTouchMove:oe,onTouchEnd:me,children:l.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${Se}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:Se>=100?"9999px":"0",borderBottomRightRadius:Se>=100?"9999px":"0"}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[l.jsx("span",{children:ke(i)}),l.jsx("span",{children:ke(c)})]})]})}),l.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 relative",children:[l.jsx("button",{onClick:S,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${d?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(tn,{className:"w-6 h-6"})}),l.jsx("button",{onClick:y,disabled:!X,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${X?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Hi,{className:"w-8 h-8"})}),l.jsx("button",{onClick:()=>{v?p():j&&m(j)},className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:a&&v?l.jsx(Pn,{className:"w-8 h-8"}):l.jsx(Ze,{className:"w-8 h-8"})}),l.jsx("button",{onClick:h,disabled:!z,className:`w-12 h-12 flex-shrink-0 aspect-square md:flex items-center justify-center rounded-full transition-colors hidden ${z?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Vi,{className:"w-8 h-8"})}),l.jsx("button",{onClick:x,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${f!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:f==="one"?l.jsx(Bi,{className:"w-6 h-6"}):l.jsx(Gi,{className:"w-6 h-6"})}),l.jsx("div",{ref:fe,className:"absolute right-0 top-1/2 -translate-y-1/2 hidden md:flex lg:hidden",children:l.jsx(At,{variant:"compact",onOpenPopover:()=>Y("up")})}),l.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 hidden lg:flex",children:l.jsx(At,{variant:"horizontal"})})]})]})]}),I&&l.jsx(F0,{onClose:()=>M(!1)}),E&&V&&l.jsx(At,{variant:"vertical",onClose:()=>P(!1),popoverPosition:V,popoverDirection:le})]})]})}function B0(){var te,ne;const{songs:e,currentIndex:t,isPlaying:n,currentTime:r,duration:s,audioElement:o,setAudioElement:a,togglePlayPause:i,next:c,setCurrentTime:d,setDuration:f,playTrack:p,repeat:h,shuffle:y,toggleShuffle:w,toggleRepeat:g,previous:S,seek:x}=je(),m=bt(),v=Yi(),[N,j]=u.useState(!1),[b,k]=u.useState(!1),[I,M]=u.useState(!1),[E,P]=u.useState(!1),[V,Z]=u.useState(null),le=u.useRef(null),ue=u.useRef(null),fe=u.useRef(null),W=cn(),D=u.useRef(null),U=u.useRef(null),B=u.useRef(null);u.useEffect(()=>{N&&(k(!0),setTimeout(()=>{j(!1),k(!1)},300))},[W.pathname]),u.useEffect(()=>{j(!1),k(!1)},[]),u.useEffect(()=>{const L=()=>{N&&ue.current&&ue.current()};return window.addEventListener("closePlayerModal",L),()=>{window.removeEventListener("closePlayerModal",L)}},[N]);const J=()=>{k(!0),setTimeout(()=>{j(!1),k(!1)},300)};u.useEffect(()=>{le.current||(le.current=new Audio,le.current.setAttribute("playsinline","true"),le.current.setAttribute("preload","auto"),a(le.current));const L=le.current;if(!L)return;const z=()=>{d(L.currentTime)},X=()=>{f(L.duration)},K=async()=>{if(m)try{await O.markItemAsPlayed(m.Id),setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:m.Id}}))},4e3)}catch{}c()},we=()=>{je.setState({isPlaying:!0})},Se=()=>{je.setState({isPlaying:!1})};return L.addEventListener("timeupdate",z),L.addEventListener("loadedmetadata",X),L.addEventListener("ended",K),L.addEventListener("play",we),L.addEventListener("pause",Se),()=>{L.removeEventListener("timeupdate",z),L.removeEventListener("loadedmetadata",X),L.removeEventListener("ended",K),L.removeEventListener("play",we),L.removeEventListener("pause",Se)}},[a,d,f,c]),u.useEffect(()=>{le.current&&(le.current.volume=je.getState().volume)},[]),u.useEffect(()=>{if(m&&!n&&o){const L=O.serverBaseUrl,z=L?`${L}/Audio/${m.Id}/stream?static=true`:"";o.src!==z&&(o.src=z,o.load())}},[m,n,o]),u.useEffect(()=>{if(o&&m&&!n){const L=O.serverBaseUrl,z=L?`${L}/Audio/${m.Id}/stream?static=true`:"";o.src!==z&&(o.src=z,o.load())}},[o,m,n]);const Q=m||v;u.useEffect(()=>{M(!1)},[Q==null?void 0:Q.Id]);const ge=s>0?r/s*100:0,ae=e.length>0&&(t<0||t<e.length-1||h==="all"),pe=t>0,H=()=>{if(fe.current){const L=fe.current.getBoundingClientRect();Z({top:L.top,left:L.left+L.width/2}),P(!0)}},$=L=>{D.current=L.touches[0].clientX,U.current=Date.now()},ee=L=>{if(D.current===null||U.current===null){D.current=null,U.current=null;return}const X=L.changedTouches[0].clientX-D.current,K=Date.now()-U.current,we=50,Se=.3,ke=Math.abs(X)/K;X>we||X>30&&ke>Se?pe&&S():(X<-we||X<-30&&ke>Se)&&ae&&c(),D.current=null,U.current=null};return Q?l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:B,className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer",style:{bottom:"calc(4rem + env(safe-area-inset-bottom) - 8px)"},onClick:()=>{j(!0)},onTouchStart:$,onTouchEnd:ee,children:[l.jsxs("div",{className:"flex items-center gap-3 py-3 pr-3 pl-4",children:[!I&&l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:l.jsx(ct,{src:O.getAlbumArtUrl((m||Q).AlbumId||(m||Q).Id,96),alt:(m||Q).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>M(!0)},(m==null?void 0:m.Id)||Q.Id)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate",children:(m||Q).Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:(m||Q).AlbumArtist||((ne=(te=(m||Q).ArtistItems)==null?void 0:te[0])==null?void 0:ne.Name)||"Unknown Artist"})]}),l.jsxs("div",{className:"flex items-center md:hidden gap-2",children:[l.jsx("div",{ref:fe,className:"flex items-center",children:l.jsx(At,{variant:"compact",onOpenPopover:H,className:"text-white hover:text-zinc-300 transition-colors"})}),l.jsx("button",{onClick:L=>{L.stopPropagation(),m?i():Q&&p(Q)},className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors",children:n&&m?l.jsx(Pn,{className:"w-5 h-5"}):l.jsx(Ze,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-1 ml-4",children:[l.jsx("button",{onClick:L=>{L.stopPropagation(),w()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${y?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(tn,{className:"w-5 h-5"})}),l.jsx("button",{onClick:L=>{L.stopPropagation(),pe&&S()},disabled:!pe,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${pe?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Hi,{className:"w-5 h-5"})}),l.jsx("button",{onClick:L=>{L.stopPropagation(),m?i():Q&&p(Q)},className:"w-10 h-10 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&m?l.jsx(Pn,{className:"w-5 h-5"}):l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{onClick:L=>{L.stopPropagation(),ae&&c()},disabled:!ae,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${ae?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Vi,{className:"w-5 h-5"})}),l.jsx("button",{onClick:L=>{L.stopPropagation(),g()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${h!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:h==="one"?l.jsx(Bi,{className:"w-5 h-5"}):l.jsx(Gi,{className:"w-5 h-5"})}),l.jsx("div",{ref:fe,className:"lg:hidden ml-2",children:l.jsx(At,{variant:"compact",onOpenPopover:H,className:"text-gray-400 hover:text-zinc-300 transition-colors"})})]})]}),Q&&l.jsx("div",{className:"h-1 bg-zinc-800 hover:bg-zinc-600 cursor-pointer transition-colors duration-200",onClick:L=>{if(L.stopPropagation(),!s)return;const z=L.currentTarget.getBoundingClientRect(),X=(L.clientX-z.left)/z.width;x(Math.max(0,Math.min(1,X))*s)},onTouchStart:L=>{if(L.stopPropagation(),!s)return;const z=L.touches[0],X=L.currentTarget.getBoundingClientRect(),K=(z.clientX-X.left)/X.width;x(Math.max(0,Math.min(1,K))*s)},children:l.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${ge}%`}})})]}),N&&l.jsx(U0,{onClose:J,onClosingStart:()=>k(!0),closeRef:ue}),E&&V&&l.jsx(At,{variant:"vertical",onClose:()=>P(!1),popoverPosition:V})]}):null}function G0(){const{state:e,message:t,cancelSync:n}=ro();if(e==="idle")return null;const r=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}};return l.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${r()} transition-colors duration-300`,style:{height:"28px",top:"0px"},children:l.jsxs("div",{className:"max-w-[768px] mx-auto h-full flex items-center justify-between px-4",children:[l.jsx("span",{className:"text-white text-sm font-medium truncate",children:t}),e==="syncing"&&l.jsx("button",{onClick:n,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors",children:"Cancel"})]})})}const Lo=new Set;async function H0(e){const t=e.toLowerCase();if(Lo.has(t)){console.log(`[Recommendations] Genre "${e}" is already being synced, skipping...`);return}Lo.add(t);try{console.log(`[Recommendations] Auto-syncing genre "${e}" for better recommendations...`);const{genres:n,setGenreSongs:r}=Ne.getState();let s=n;s.length===0&&(s=await O.getGenres());const o=s.find(i=>i.Name&&e&&i.Name.toLowerCase()===e.toLowerCase());if(!o||!o.Id){console.warn(`[Recommendations] Genre "${e}" not found in server`);return}console.log(`[Recommendations] Fetching songs for genre "${e}"...`);const a=await O.getGenreSongs(o.Id,e);a.length>0?(r(o.Id,a),console.log(`[Recommendations]  Successfully cached ${a.length} songs for genre "${e}"`)):console.warn(`[Recommendations] No songs found for genre "${e}" on server`)}catch(n){console.error(`[Recommendations] Failed to sync genre "${e}":`,n)}finally{setTimeout(()=>{Lo.delete(t)},1e4)}}async function V0({currentTrack:e,queue:t}){var g,S;const n=((S=(g=import.meta)==null?void 0:g.env)==null?void 0:S.DEV)??!1;if(!e)return n&&console.log("[Recommendations] No current track"),{recommendations:[],hasGenreMatches:!1};const{songs:r,genreSongs:s,genres:o}=Ne.getState(),a=e.Genres||[];let i=[];if(a.length>0&&o.length>0){const x=o.filter(m=>m.Name&&a.some(v=>v.toLowerCase()===m.Name.toLowerCase())).map(m=>m.Id).filter(m=>s[m]&&s[m].length>0);x.length>0&&(i=x.flatMap(m=>s[m]),n&&console.log(`[Recommendations] Using ${i.length} pre-filtered songs from ${x.length} matching genres`))}if(i.length===0&&r.length>0&&(i=r,n&&console.log(`[Recommendations] Using ${i.length} songs from main cache`)),i.length===0){const x=Object.values(s).flat();x.length>0&&(i=x,n&&console.log(`[Recommendations] Using ${i.length} songs from all genre caches`))}if(i.length===0){n&&console.log("[Recommendations] No cached songs available");const{setRecommendationsQuality:x}=Ft.getState();return x("failed"),console.warn("Couldn't generate recommendations. Try syncing your library"),{recommendations:[],hasGenreMatches:!1}}n&&(console.log("[Recommendations] Using",i.length,"available songs"),console.log("[Recommendations] Current track genres:",a,"(count:",a.length+")"),console.log("[Recommendations] Current track year:",e.ProductionYear),console.log("[Recommendations] Queue size:",t.length),console.log("[Recommendations] Sample available songs:",i.slice(0,3).map(x=>{var m;return`${x.Name} (${x.ProductionYear}) [${(m=x.Genres)==null?void 0:m.join(", ")}]`})));let c=[],d=!1;const f=()=>c.flatMap(x=>{var m;return((m=x.ArtistItems)==null?void 0:m.map(v=>v.Id))||[]});if(a.length>0){let x=0,m=0,v=0,N=0;const j=i.filter(b=>{var P,V;return((P=b.Genres)==null?void 0:P.some(Z=>a.some(le=>Z.toLowerCase()===le.toLowerCase())))?(x++,b.Id!==e.Id?t.some(Z=>Z.Id===b.Id)?(v++,!1):(V=b.ArtistItems)!=null&&V.some(Z=>f().includes(Z.Id))?(N++,!1):!0:(m++,!1)):!1});if(console.log("[Recommendations] Genre matching results:",{totalGenreMatches:x,filteredByCurrentTrack:m,filteredByQueue:v,filteredByArtist:N,passedAllFilters:j.length}),x===0&&a.length>0){console.log("[Recommendations] No songs found matching genres:",a),console.log("[Recommendations] Triggering auto-sync for these genres...");for(const b of a)H0(b).catch(k=>console.error(`[Recommendations] Genre sync failed for ${b}:`,k));return{recommendations:[],hasGenreMatches:!1,triggeredGenreSync:!0}}c.push(...j.slice(0,8)),n&&console.log(`[Recommendations] Added ${Math.min(j.length,8)} genre matches to recommendations`),a.length>0&&j.length>0?d=!0:a.length>0&&j.length===0&&(console.warn("[Recommendations] No genre matches passed filters - falling back to year/artist matching"),d=!1)}else n&&console.log("[Recommendations] No genres on current track");const p=e.ProductionYear;if(p&&c.length<10){const x=[{range:3,years:Array.from({length:7},(N,j)=>p-3+j)},{range:6,years:Array.from({length:13},(N,j)=>p-6+j)},{range:10,years:Array.from({length:21},(N,j)=>p-10+j)}];let m=[];for(const{years:N}of x){if(m.length>=12)break;const j=i.filter(b=>{var V;const k=b.ProductionYear&&N.includes(b.ProductionYear),I=!t.some(Z=>Z.Id===b.Id),M=!c.some(Z=>Z.Id===b.Id),E=b.Id!==e.Id,P=!((V=b.ArtistItems)!=null&&V.some(Z=>f().includes(Z.Id)));return k&&E&&I&&M&&P});m.push(...j)}const v=m.slice(0,12);c.push(...v),n&&console.log(`[Recommendations] Total year matches used: ${v.length}`)}const y=Y0(c).slice(0,12),{setRecommendationsQuality:w}=Ft.getState();return console.log("[Recommendations] Quality decision:",{finalRecommendationsCount:y.length,genreMatchSuccess:d,hasGenres:a.length>0,availableSongsCount:i.length}),y.length===0?(console.log("[Recommendations] Got 0 final recommendations"),w("failed")):!d&&a.length>0?(console.log("[Recommendations] No genre matches found, setting degraded quality"),w("degraded")):w("good"),n&&(console.log(`[Recommendations] Generated ${y.length} recommendations`),y.length>0&&console.log("[Recommendations] Sample:",y.slice(0,3).map(x=>x.Name))),{recommendations:y,hasGenreMatches:d,triggeredGenreSync:!1}}function Y0(e){if(e.length<=1)return[...e];const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function Q0(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function W0(){const{songs:e,currentIndex:t,addToQueue:n,refreshCurrentTrack:r,isFetchingRecommendations:s,setIsFetchingRecommendations:o}=je(),{showQueueRecommendations:a}=Ft(),i=u.useRef([]),c=u.useRef(!1),d=u.useRef(0);u.useEffect(()=>{i.current=e.slice(-20)},[e]),u.useEffect(()=>{d.current=0},[t]),u.useEffect(()=>{d.current=0},[a]),u.useEffect(()=>{const f=e.slice(t+1).filter(w=>w.source==="recommendation").length,p=Date.now()-d.current;if(!!!(a&&!c.current&&!s&&t>=0&&f<12&&p>1e4))return;(async()=>{var g;console.log("[Recommendations] Starting fetch, setting isRecommending = true"),c.current=!0,o(!0);const w=setTimeout(()=>{console.log("[Recommendations] Safety timeout triggered, resetting flags"),c.current=!1,o(!1)},3e4);try{await r();const S=e[t];if(!S)return;const x=[S],m=[t-1,t+1,t+2];for(const E of m)if(E>=0&&E<e.length&&x.length<3){const P=e[E];P&&!x.some(V=>V.Id===P.Id)&&x.push(P)}console.log("[Recommendations] Using seed tracks:",x.map((E,P)=>{var V;return`${P+1}. ${E.Name} (${E.ProductionYear}) [${((V=E.Genres)==null?void 0:V.join(", "))||"no genres"}]`}));const v=[];for(const E of x){console.log(`[Recommendations] Generating recommendations for seed: ${E.Name}`);const P=await V0({currentTrack:E,queue:e,recentQueue:i.current,lastPlayedTrack:null});if(console.log(`[Recommendations] Result for seed ${E.Name}:`,{recommendationsCount:((g=P.recommendations)==null?void 0:g.length)||0,hasGenreMatches:P.hasGenreMatches,triggeredGenreSync:P.triggeredGenreSync,resultType:typeof P,isArray:Array.isArray(P)}),P.triggeredGenreSync){console.log("[Recommendations] Genre sync triggered for this seed, skipping it and will retry in 5 seconds..."),setTimeout(()=>{d.current=0},5e3);return}P.recommendations&&Array.isArray(P.recommendations)?v.push(P):console.warn(`[Recommendations] Invalid result for seed ${E.Name}:`,P)}const N=v.filter(E=>E.hasGenreMatches);if(console.log(`[Recommendations] ${N.length} out of ${x.length} seeds found genre matches`),N.length===0){const{setRecommendationsQuality:E}=Ft.getState();E("degraded"),console.log("[Recommendations] No genre matches found - falling back to year/artist only")}const j=N.length>0?N:v,b=Math.ceil(12/j.length),k=[];for(const E of j){const P=E.recommendations.filter(Z=>{const le=e.some(fe=>fe.Id===Z.Id),ue=k.some(fe=>fe.Id===Z.Id);return!le&&!ue}),V=P.slice(0,b);k.push(...V),console.log(`[Recommendations] Added ${V.length} recommendations from seed (${P.length} available, genreMatch: ${E.hasGenreMatches})`)}const I=k.slice(0,12),M=Q0(I);if(console.log(`[Recommendations] Final ${I.length} recommendations (distributed across ${x.length} seeds)`),M.length>0){const E=e.slice(t+1).filter(P=>P.source==="recommendation").length+M.length;console.log(`[Recommendations] Adding ${M.length} recommendations. Upcoming recommendations will be: ${E}`),console.log("[Recommendations] Recommendations to add:",M.map(P=>P.Name)),n(M,!1,"recommendation"),console.log("[Recommendations] Successfully added recommendations to queue"),d.current=0}else console.log("[Recommendations] No safe recommendations to add - marking as failed attempt"),d.current=Date.now()}catch(S){console.error("[Recommendations Hook] Failed to get recommendations:",S),c.current=!1,o(!1)}finally{clearTimeout(w),console.log("[Recommendations] Finished fetch, setting isRecommending = false"),c.current=!1,o(!1)}})()},[e,t,n,r,a,s,o])}const yu={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function q0({children:e}){W0();const{accentColor:t}=Ft(),{genres:n,songs:r,genreSongs:s}=Ne(),{state:o}=ro(),a=i=>{const c=[...i];for(let d=c.length-1;d>0;d--){const f=Math.floor(Math.random()*(d+1));[c[d],c[f]]=[c[f],c[d]]}return c};return u.useEffect(()=>{const i=yu[t]||yu.blue;document.documentElement.style.setProperty("--accent-color",i)},[t]),u.useEffect(()=>{const i=o!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",i)},[o]),u.useEffect(()=>{n.length===0&&O.getGenres().catch(i=>{console.warn("Background genre preload failed:",i)})},[n.length]),u.useEffect(()=>{const i=Ne.getState(),c=r.length+Object.values(s).flat().length;c>0&&i.shufflePool.length===0?i.refreshShufflePool():c===0&&setTimeout(async()=>{try{const f=(await O.getSongs({limit:1})).TotalRecordCount||1e3,p=[];for(let g=0;g<3;g++){const S=Math.floor(Math.random()*f);p.push(S)}const h=p.map(g=>O.getSongs({limit:1,sortBy:["SortName"],sortOrder:"Ascending",startIndex:g})),w=(await Promise.all(h)).flatMap(g=>g.Items||[]);if(w.length>0){const g=w.map(S=>({Id:S.Id,Name:S.Name,AlbumArtist:S.AlbumArtist,ArtistItems:S.ArtistItems,Album:S.Album,AlbumId:S.AlbumId,IndexNumber:S.IndexNumber,ProductionYear:S.ProductionYear,PremiereDate:S.PremiereDate,RunTimeTicks:S.RunTimeTicks,Genres:S.Genres}));Ne.setState({songs:g,shufflePool:a(g),lastPoolUpdate:Date.now()})}}catch(d){console.warn("Minimal song preload failed:",d)}},300)},[r.length,s]),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:o!=="idle"?"28px":"0px"}}),l.jsx(G0,{}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),l.jsxs("div",{className:"min-h-screen bg-black text-white",style:{paddingBottom:"calc(4rem + env(safe-area-inset-bottom) - 8px)",paddingTop:o!=="idle"?"28px":"0",overflowX:"hidden",maxWidth:"100vw",width:"100%"},children:[l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:e}),l.jsx(B0,{}),l.jsx(O0,{})]})]})}const Xn=u.forwardRef(({value:e,onChange:t,placeholder:n="Search...",debounceMs:r=300,showClearButton:s=!1,onClear:o},a)=>{const[i,c]=u.useState(e),d=u.useRef(t),f=u.useRef(null),p=h=>{f.current=h,typeof a=="function"?a(h):a&&(a.current=h)};return u.useEffect(()=>{d.current=t},[t]),u.useEffect(()=>{const h=setTimeout(()=>{d.current(i)},r);return()=>clearTimeout(h)},[i,r]),u.useEffect(()=>{c(e)},[e]),l.jsxs("div",{className:"relative",children:[l.jsx("input",{ref:p,type:"text",value:i,onChange:h=>{c(h.target.value)},placeholder:n,className:"w-full px-4 py-2 pl-10 pr-10 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),l.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l.jsx("button",{onClick:h=>{h.preventDefault(),h.stopPropagation(),c(""),o&&o(),setTimeout(()=>{var y;(y=f.current)==null||y.focus()},0)},className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-opacity ${s&&i?"text-gray-400 hover:text-white opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-label":"Clear search",type:"button",children:l.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})});Xn.displayName="SearchInput";function Kn({isOpen:e,onClose:t,filterType:n,availableYears:r=[],yearRange:s={min:null,max:null},onApplyYear:o,genres:a=[],selectedValues:i=[],onApply:c}){const[d,f]=u.useState(s),[p,h]=u.useState(i),y=u.useRef(null),w=u.useRef(null);u.useEffect(()=>{f(s)},[s]),u.useEffect(()=>{h(i)},[i]);const g=b=>{h(k=>k.includes(b)?k.filter(I=>I!==b):[...k,b])},S=()=>{n==="year"&&o?o(d):n==="genre"&&c&&c(p),t()},x=()=>{n==="year"?(f({min:null,max:null}),o&&o({min:null,max:null})):n==="genre"&&h([]),t()},m=r.length>0?r[0]:1900,v=r.length>0?r[r.length-1]:new Date().getFullYear();u.useEffect(()=>{if(n==="year"&&e&&r.length>0){if(y.current&&d.min!==null){const b=r.indexOf(d.min);b!==-1&&setTimeout(()=>{var I;const k=(I=y.current)==null?void 0:I.querySelector(`[data-year-index="${b}"]`);k&&k.scrollIntoView({behavior:"smooth",block:"center"})},100)}if(w.current&&d.max!==null){const b=r.indexOf(d.max);b!==-1&&setTimeout(()=>{var I;const k=(I=w.current)==null?void 0:I.querySelector(`[data-year-index="${b}"]`);k&&k.scrollIntoView({behavior:"smooth",block:"center"})},100)}}},[n,e,d.min,d.max,r]);const N=(b,k)=>{f(I=>{if(b==="min"){const M=I.max!==null&&k>I.max?I.max:k;return setTimeout(()=>{const E=r.indexOf(M);if(E!==-1&&y.current){const P=y.current.querySelector(`[data-year-index="${E}"]`);P&&P.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...I,min:M}}else{const M=I.min!==null&&k<I.min?I.min:k;return setTimeout(()=>{const E=r.indexOf(M);if(E!==-1&&w.current){const P=w.current.querySelector(`[data-year-index="${E}"]`);P&&P.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...I,max:M}}})},j=(d.min===null||d.min===m)&&(d.max===null||d.max===v)&&s.min===null&&s.max===null;return l.jsx(Qi,{isOpen:e,onClose:t,zIndex:10001,children:l.jsxs("div",{className:"pb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsxs("div",{className:"text-lg font-semibold text-white",children:["Filter by ",n==="genre"?"Genre":"Year"]}),l.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Close",children:l.jsx(T0,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"px-4 max-h-[75vh] overflow-y-auto",children:n==="year"?l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{ref:y,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:r.length>0?r.map((b,k)=>{const I=d.min===b,M=d.max!==null&&b>d.max;return l.jsx("button",{"data-year-index":k,onClick:()=>N("min",b),disabled:M,className:`w-full py-3 px-4 text-center snap-center transition-colors ${I?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":M?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:b},b)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No years available"})})}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 bg-gradient-to-b from-zinc-900 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-zinc-900 to-transparent pointer-events-none"})]}),l.jsx("div",{className:"text-white font-medium self-center",children:"to"}),l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{ref:w,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:r.length>0?r.map((b,k)=>{const I=d.max===b,M=d.min!==null&&b<d.min;return l.jsx("button",{"data-year-index":k,onClick:()=>N("max",b),disabled:M,className:`w-full py-3 px-4 text-center snap-center transition-colors ${I?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":M?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:b},b)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No years available"})})}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-14 bg-gradient-to-b from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-14 bg-gradient-to-t from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"})]})]})}):l.jsx("div",{className:"space-y-2",children:n==="genre"?a.length>0?[...a].sort((b,k)=>(b.Name||"").localeCompare(k.Name||"")).map(b=>{const k=b.Name||"",I=p.includes(k);return l.jsxs("button",{onClick:()=>g(k),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-white/10 transition-colors text-left",children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${I?"bg-white border-white":"border-white/40 bg-transparent"}`,children:I&&l.jsx("svg",{className:"w-3 h-3 text-zinc-900",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),l.jsx("span",{className:"text-white font-medium",children:k})]},b.Id)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No genres available"})}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No genres available"})})})}),l.jsxs("div",{className:"flex gap-3 mt-6 px-4",children:[l.jsx("button",{onClick:x,disabled:n==="year"&&j,className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 disabled:opacity-30 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:"Clear"}),l.jsx("button",{onClick:S,className:"flex-1 px-4 py-3 bg-white text-zinc-900 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Apply"})]})]})})}async function Es(e,t){var w,g,S,x;const n=await O.search(e,t);let r=((w=n.Songs)==null?void 0:w.Items)||[],s=((g=n.Albums)==null?void 0:g.Items)||[],o=((S=n.Artists)==null?void 0:S.Items)||[],a=((x=n.Playlists)==null?void 0:x.Items)||[];if(!(r.length>0||s.length>0||o.length>0||a.length>0)&&e.trim().length>0){const m=await Ms(t);r=m.songs,s=m.albums,o=m.artists,a=m.playlists}const d=Bt(e).toLowerCase().trim(),f=r.filter(m=>{var j,b,k;if(Bt(m.Name||"").toLowerCase().includes(d))return!0;const N=[];return m.AlbumArtist&&N.push(Bt(m.AlbumArtist)),(j=m.AlbumArtists)!=null&&j.length&&N.push(...m.AlbumArtists.map(I=>Bt(I.Name||"")).filter(Boolean)),(b=m.ArtistItems)!=null&&b.length&&N.push(...m.ArtistItems.map(I=>Bt(I.Name||"")).filter(Boolean)),!!(N.some(I=>I.toLowerCase().includes(d))||(k=m.Genres)!=null&&k.some(I=>Bt(I).toLowerCase().includes(d)))}),p=o.filter(m=>Bt(m.Name||"").toLowerCase().includes(d)),h=s.filter(m=>{var j,b;const v=Bt(m.Name||""),N=Bt(m.AlbumArtist||((b=(j=m.ArtistItems)==null?void 0:j[0])==null?void 0:b.Name)||"");return v.toLowerCase().includes(d)||N.toLowerCase().includes(d)}),y=a.filter(m=>Bt(m.Name||"").toLowerCase().includes(d));return{artists:p,albums:h,playlists:y,songs:f}}async function Ms(e){const[t,n,r,s]=await Promise.all([O.getArtists({limit:e}),O.getAlbums({limit:e}),O.getPlaylists({limit:e}),O.getSongs({limit:e})]);return{artists:t.Items||[],albums:n.Items||[],playlists:r.Items||[],songs:s.Items||[]}}const zo=new Map;function X0({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var y,w;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,[c,d]=u.useState(null);u.useEffect(()=>{var m;if((m=e.ImageTags)!=null&&m.Primary){d(null);return}const g=zo.get(e.Id);if(g!==void 0){d(g);return}let S=!1;return(async()=>{try{const{albums:v,songs:N}=await O.getArtistItems(e.Id),j=v[0],b=N.find(E=>E.AlbumId)||N[0],k=j||b,I=k?k.AlbumId||k.Id:null,M=I?O.getAlbumArtUrl(I,96):null;zo.set(e.Id,M),S||d(M)}catch(v){console.error("Failed to load fallback album art for artist (home search):",e.Id,v),zo.set(e.Id,null)}})(),()=>{S=!0}},[e.Id,e.ImageTags]);const f=g=>{if(i||a.current){g.preventDefault(),g.stopPropagation(),a.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{a.current=!1},100)},h=Ee({onLongPress:g=>{g.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(ot,{className:"w-6 h-6 text-gray-500"}):(y=e.ImageTags)!=null&&y.Primary||c?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?O.getArtistImageUrl(e.Id,96):c||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(ot,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function K0({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,h;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,c=y=>{if(i||a.current){y.preventDefault(),y.stopPropagation(),a.current=!1;return}t(e.Id)},d=y=>{y.preventDefault(),y.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:y.clientX,y:y.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ee({onLongPress:y=>{y.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:d,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((h=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:h.Name)||"Unknown Artist"})]})}function J0({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var w,g;const o=bt(),a=u.useRef(!1),i=r===e.Id,[c,d]=u.useState(!1),f=S=>{const x=Math.floor(S/1e7),m=Math.floor(x/60),v=x%60;return`${m}:${v.toString().padStart(2,"0")}`},p=S=>{if(i||a.current){S.preventDefault(),S.stopPropagation(),a.current=!1;return}t(e)},h=S=>{S.preventDefault(),S.stopPropagation(),a.current=!0,n(e,"song","desktop",{x:S.clientX,y:S.clientY}),setTimeout(()=>{a.current=!1},100)},y=Ee({onLongPress:S=>{S.preventDefault(),a.current=!0,n(e,"song","mobile")},onClick:p});return l.jsxs("button",{onClick:p,onContextMenu:h,...y,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:c?l.jsx(We,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>d(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(o==null?void 0:o.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((g=(w=e.ArtistItems)==null?void 0:w[0])==null?void 0:g.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:f(e.RunTimeTicks)})]})}function Z0({onSearchStateChange:e}){const[t,n]=u.useState(""),[r,s]=u.useState(!1),[o,a]=u.useState(null),[i,c]=u.useState(!1),[d,f]=u.useState(!1),[p,h]=u.useState("mobile"),[y,w]=u.useState(null),[g,S]=u.useState(null),[x,m]=u.useState(null),v=u.useRef(null),[N,j]=u.useState([]),[b,k]=u.useState({min:null,max:null}),[I,M]=u.useState(!1),[E,P]=u.useState(null),{genres:V}=Ne(),[Z,le]=u.useState([]),[ue,fe]=u.useState(!1),[W,D]=u.useState(45),{playAlbum:U,addToQueue:B,playTrack:J,shuffleAllSongs:Q}=je(),[ge,ae]=u.useState(!1);u.useEffect(()=>{if(ge){const C=setTimeout(()=>{ae(!1)},1e4);return()=>clearTimeout(C)}},[ge]);const pe=He();u.useEffect(()=>{(async()=>{fe(!0);try{const q=Ne.getState();if(q.years.length>0)le(q.years);else{const ie=await O.getYears();le(ie)}}catch(q){console.error("Failed to load filter values:",q)}finally{fe(!1)}})()},[]);const H=N.length>0||b.min!==null||b.max!==null;u.useEffect(()=>{const C=t.trim().length>0;if(C||H){c(!0);const q=window.setTimeout(()=>{(async()=>{try{if(C){const oe=await Es(t,450);a(oe)}else{const oe=await Ms(450);a(oe)}}catch(oe){console.error("Search failed:",oe),a(null)}finally{c(!1)}})()},250);return()=>{window.clearTimeout(q)}}else a(null),c(!1)},[t,H]),u.useEffect(()=>{D(45)},[t,r,o==null?void 0:o.songs.length]),u.useEffect(()=>{var q;if(!r||!((q=o==null?void 0:o.songs)!=null&&q.length))return;const C=()=>{const ie=window.scrollY||document.documentElement.scrollTop,oe=window.innerHeight||document.documentElement.clientHeight,me=document.documentElement.scrollHeight;ie+oe*1.5>=me&&D(ve=>Math.min(ve+45,o.songs.length))};return window.addEventListener("scroll",C,{passive:!0}),()=>window.removeEventListener("scroll",C)},[r,o==null?void 0:o.songs.length]);const $=u.useMemo(()=>{if(!o)return null;const C=oe=>{if(b.min!==null||b.max!==null)return!1;if(N.length>0){const me=oe.Genres||[];if(!N.some(Y=>me.some(he=>he.toLowerCase()===Y.toLowerCase())))return!1}return!0},q=oe=>{if(N.length>0){const me=oe.Genres||[];if(!N.some(Y=>me.some(he=>he.toLowerCase()===Y.toLowerCase())))return!1}if(b.min!==null||b.max!==null){const me=oe.ProductionYear;if(!me||me<=0||b.min!==null&&me<b.min||b.max!==null&&me>b.max)return!1}return!0},ie=oe=>!(b.min!==null||b.max!==null||N.length>0);return{artists:o.artists.filter(C),albums:o.albums.filter(q),playlists:(o.playlists||[]).filter(ie),songs:o.songs.filter(q)}},[o,N,b]),ee=C=>{n(C),C.trim().length>0&&!r&&s(!0)},te=C=>{pe(`/artist/${C}`),s(!1),n(""),setSearchResults(null)},ne=C=>{pe(`/album/${C}`),s(!1),n(""),setSearchResults(null)},L=C=>{J(C,[C])},z=C=>{pe(`/playlist/${C}`),s(!1),n(""),setSearchResults(null)},X=(C,q,ie="mobile",oe)=>{S(C),m(q),h(ie),w(oe||null),f(!0)},K=()=>{n(""),a(null)},we=()=>{s(!1),n(""),a(null),j([]),k({min:null,max:null})},Se=C=>{P(C),M(!0)},ke=C=>{j(C)},$e=C=>{k(C)},A=C=>{C.preventDefault(),C.stopPropagation(),$!=null&&$.songs&&$.songs.length>0&&U($.songs)},F=C=>{C.preventDefault(),C.stopPropagation(),$!=null&&$.songs&&$.songs.length>0&&B($.songs)},R=r;return u.useEffect(()=>{e&&e(R)},[R,e]),u.useEffect(()=>{var C;if(r&&((C=v.current)==null||C.focus(),v.current)){const q=v.current.value.length;v.current.setSelectionRange(q,q)}},[r]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"Tunetuna"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:async()=>{const C=je.getState(),{isShuffleAllActive:q,isShuffleGenreActive:ie,shuffle:oe}=C;if(!(ge||q||ie)){ae(!0);try{await Q()}catch(me){console.error("Home shuffle button - shuffleAllSongs failed:",me),console.error("Shuffle all failed:",me)}finally{ae(!1)}}},disabled:ge,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50","aria-label":"Shuffle all songs",children:ge?l.jsx("div",{className:"w-4 h-4 border-2 border-zinc-400 border-t-white rounded-full animate-spin"}):l.jsx(tn,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>pe("/settings"),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Settings",children:l.jsx(g0,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"relative",onClick:()=>s(!0),children:l.jsx(Xn,{value:t,onChange:ee,placeholder:"Search for artists, albums, songs...",showClearButton:t.trim().length>0,onClear:K})})]}),r&&er.createPortal(l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Xn,{ref:v,value:t,onChange:ee,showClearButton:t.trim().length>0,onClear:K})}),l.jsx("button",{onClick:we,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>Se("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${N.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(qn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>Se("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${b.min!==null||b.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx($i,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:i?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):$?l.jsxs("div",{className:"space-y-8",children:[$.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:$.artists.slice(0,5).map(C=>l.jsx(X0,{artist:C,onClick:te,onContextMenu:X,contextMenuItemId:(g==null?void 0:g.Id)||null},C.Id))})]}),$.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:$.albums.slice(0,12).map(C=>l.jsx(K0,{album:C,onClick:ne,onContextMenu:X,contextMenuItemId:(g==null?void 0:g.Id)||null},C.Id))})]}),$.playlists&&$.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:$.playlists.map(C=>l.jsxs("button",{onClick:()=>z(C.Id),onContextMenu:q=>{q.preventDefault(),q.stopPropagation(),X(C,"playlist","desktop",{x:q.clientX,y:q.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:O.getAlbumArtUrl(C.Id,96),alt:C.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:C.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:C.ChildCount?`${C.ChildCount} tracks`:"Playlist"})]})]},C.Id))})]}),$.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:A,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:F,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ot,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:$.songs.map((C,q)=>l.jsx(J0,{song:C,onClick:L,onContextMenu:X,contextMenuItemId:(g==null?void 0:g.Id)||null,showImage:q<W},C.Id))})]}),$.artists.length===0&&$.albums.length===0&&(!$.playlists||$.playlists.length===0)&&$.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]}),l.jsx(Qe,{item:g,itemType:x,isOpen:d,onClose:()=>{f(!1),S(null),m(null)},zIndex:999999,mode:p,position:y||void 0})]}),document.body),E==="genre"&&l.jsx(Kn,{isOpen:I,onClose:()=>M(!1),filterType:"genre",genres:V,selectedValues:N,onApply:ke}),E==="year"&&l.jsx(Kn,{isOpen:I,onClose:()=>M(!1),filterType:"year",availableYears:Z,yearRange:b,onApplyYear:$e})]})}function wu({album:e,onNavigate:t,onContextMenu:n}){var d,f;const[r,s]=u.useState(!1),o=u.useRef(!1),a=p=>{if(o.current){p.preventDefault(),p.stopPropagation(),o.current=!1;return}t(e.Id)},i=p=>{p.preventDefault(),p.stopPropagation(),o.current=!0,n(e,"desktop",{x:p.clientX,y:p.clientY}),setTimeout(()=>{o.current=!1},100)},c=Ee({onLongPress:p=>{p.preventDefault(),o.current=!0,n(e,"mobile")},onClick:a});return l.jsxs("button",{onClick:a,onContextMenu:i,...c,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:r?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsx(ct,{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>s(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((f=(d=e.ArtistItems)==null?void 0:d[0])==null?void 0:f.Name)||"Unknown Artist"})]})}function ev(){const{recentlyAdded:e,setRecentlyAdded:t,setLoading:n}=Ne(),r=He(),s=u.useRef(null),[o,a]=u.useState(0),[i,c]=u.useState(!1),[d,f]=u.useState("mobile"),[p,h]=u.useState(null),[y,w]=u.useState(null);u.useEffect(()=>{(async()=>{n("recentlyAdded",!0);try{const N=await O.getRecentlyAdded(18);t(N.Items||[])}catch(N){console.error("Failed to load recently added:",N)}finally{n("recentlyAdded",!1)}})()},[t,n]);const g=()=>{if(!s.current)return;const v=s.current,N=v.scrollLeft,j=v.clientWidth,b=Math.round(N/j);a(b)},S=v=>{if(!s.current)return;const N=s.current,j=N.clientWidth;N.scrollTo({left:v*j,behavior:"smooth"})};if(!e||e.length===0)return null;const x=6,m=[];for(let v=0;v<e.length;v+=x)m.push(e.slice(v,v+x));return l.jsxs("div",{className:"px-4 mb-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recently Added"}),l.jsxs("div",{className:"md:hidden",children:[l.jsx("div",{ref:s,onScroll:g,className:"overflow-x-auto snap-x snap-mandatory scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:l.jsx("div",{className:"flex",style:{width:`${m.length*100}%`},children:m.map((v,N)=>{const j=Math.ceil(v.length/3);return l.jsx("div",{className:"snap-start flex-shrink-0 w-full",style:{width:`${100/m.length}%`},children:l.jsx("div",{className:"grid grid-cols-3 gap-3",style:{gridTemplateRows:`repeat(${j}, minmax(0, 1fr))`},children:v.map(b=>l.jsx(wu,{album:b,onNavigate:k=>r(`/album/${k}`),onContextMenu:(k,I,M)=>{w(k),f(I||"desktop"),h(M||null),c(!0)}},b.Id))})},N)})})}),m.length>1&&l.jsx("div",{className:"flex justify-center gap-2 mt-4",children:m.map((v,N)=>l.jsx("button",{onClick:()=>S(N),className:`w-2 h-2 rounded-full transition-colors ${N===o?"bg-white":"bg-zinc-600"}`,"aria-label":`Go to page ${N+1}`},N))})]}),l.jsx("div",{className:"hidden md:block",children:l.jsx("div",{className:"grid grid-cols-4 gap-3",children:e.slice(0,8).map(v=>l.jsx(wu,{album:v,onNavigate:N=>r(`/album/${N}`),onContextMenu:(N,j,b)=>{w(N),f(j||"desktop"),h(b||null),c(!0)}},v.Id))})}),l.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `}),l.jsx(Qe,{item:y,itemType:"album",isOpen:i,onClose:()=>{c(!1),w(null)},zIndex:999999,mode:d,position:p||void 0})]})}function tv({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var f,p;const s=bt(),[o,a]=u.useState(!1),i=r===e.Id,c=h=>{const y=Math.floor(h/1e7),w=Math.floor(y/60),g=y%60;return`${w}:${g.toString().padStart(2,"0")}`},d=Ee({onLongPress:h=>{h.preventDefault(),n(e,"mobile")},onClick:()=>t(e)});return l.jsxs("button",{onClick:()=>t(e),onContextMenu:h=>{h.preventDefault(),n(e,"desktop",{x:h.clientX,y:h.clientY})},...d,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:o?l.jsx(We,{className:"w-7 h-7 text-gray-500"}):l.jsx(ct,{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>a(!0)})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(s==null?void 0:s.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((p=(f=e.ArtistItems)==null?void 0:f[0])==null?void 0:p.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:c(e.RunTimeTicks)})]})}function nv(){const{recentlyPlayed:e}=Ne(),{playTrack:t}=je(),[n,r]=u.useState(!1),[s,o]=u.useState("mobile"),[a,i]=u.useState(null),[c,d]=u.useState(null),f=p=>{t(p,e)};return!e||e.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-2 px-4",children:"Recently Played"}),l.jsx("div",{className:"space-y-0",children:e.map(p=>l.jsx(tv,{song:p,onClick:f,onContextMenu:(h,y,w)=>{d(h),o(y||"mobile"),i(w||null),r(!0)},contextMenuItemId:(c==null?void 0:c.Id)||null},p.Id))}),l.jsx(Qe,{item:c,itemType:"song",isOpen:n,onClose:()=>{r(!1),d(null)},zIndex:99999,mode:s,position:a||void 0})]})}function rv(){const[e,t]=u.useState(!1),{recentlyAdded:n,recentlyPlayed:r,loading:s}=Ne(),o=u.useRef(!1);u.useEffect(()=>{(s.recentlyAdded||s.recentlyPlayed)&&(o.current=!0)},[s.recentlyAdded,s.recentlyPlayed]);const a=o.current&&!s.recentlyAdded&&!s.recentlyPlayed&&n.length===0&&r.length===0;return l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx(Z0,{onSearchStateChange:t})})}),l.jsxs("div",{className:e?"hidden":"",style:{paddingTop:"calc(env(safe-area-inset-top) + 7.5rem)"},children:[l.jsx(ev,{}),l.jsx(nv,{}),a&&l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No music found"})})]})]})}const Oo=new Map;function sv({artist:e}){var S,x;const t=He(),[n,r]=u.useState(!1),[s,o]=u.useState(!1),[a,i]=u.useState("mobile"),[c,d]=u.useState(null),f=u.useRef(!1),[p,h]=u.useState(null);u.useEffect(()=>{var j;if((j=e.ImageTags)!=null&&j.Primary){h(null);return}const m=Oo.get(e.Id);if(m!==void 0){h(m);return}let v=!1;return(async()=>{try{const{albums:b,songs:k}=await O.getArtistItems(e.Id),I=b[0],M=k.find(Z=>Z.AlbumId)||k[0],E=I||M,P=E?E.AlbumId||E.Id:null,V=P?O.getAlbumArtUrl(P,96):null;Oo.set(e.Id,V),v||h(V)}catch(b){console.error("Failed to load fallback album art for artist:",e.Id,b),Oo.set(e.Id,null)}})(),()=>{v=!0}},[e.Id,e.ImageTags]);const y=m=>{if(f.current){m.preventDefault(),f.current=!1;return}t(`/artist/${e.Id}`)},w=Ee({onLongPress:m=>{m.preventDefault(),f.current=!0,i("mobile"),d(null),o(!0)},onClick:y}),g=m=>{m.preventDefault(),m.stopPropagation(),f.current=!0,i("desktop"),d({x:m.clientX,y:m.clientY}),o(!0),setTimeout(()=>{f.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:y,onContextMenu:g,...w,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors group px-4 h-[72px] ${s?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:n?l.jsx(ot,{className:"w-6 h-6 text-gray-500"}):(S=e.ImageTags)!=null&&S.Primary||p?l.jsx("img",{src:(x=e.ImageTags)!=null&&x.Primary?O.getArtistImageUrl(e.Id,96):p||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>r(!0),loading:"lazy"}):l.jsx(ot,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]}),l.jsx(Qe,{item:e,itemType:"artist",isOpen:s,onClose:()=>o(!1),zIndex:99999,mode:a,position:c||void 0})]})}function Wi({currentPage:e,totalPages:t,onPageChange:n,itemsPerPage:r,totalItems:s}){if(t<=1)return null;const o=e*r+1,a=Math.min((e+1)*r,s);return l.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[l.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",o,"-",a," of ",s]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>n(e-1),disabled:e===0,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:l.jsx(zx,{className:"w-5 h-5"})}),l.jsxs("div",{className:"text-sm text-white min-w-[60px] text-center",children:[e+1," / ",t]}),l.jsx("button",{onClick:()=>n(e+1),disabled:e>=t-1,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:l.jsx(_x,{className:"w-5 h-5"})})]})]})}const _o=new Map;function lv({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var y;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,[c,d]=u.useState(null);u.useEffect(()=>{var x;if((x=e.ImageTags)!=null&&x.Primary){d(null);return}const w=_o.get(e.Id);if(w!==void 0){d(w);return}let g=!1;return(async()=>{try{const{albums:m,songs:v}=await O.getArtistItems(e.Id),N=m[0],j=v.find(M=>M.AlbumId)||v[0],b=N||j,k=b?b.AlbumId||b.Id:null,I=k?O.getAlbumArtUrl(k,96):null;_o.set(e.Id,I),g||d(I)}catch(m){console.error("Failed to load fallback album art for artist (search item):",e.Id,m),_o.set(e.Id,null)}})(),()=>{g=!0}},[e.Id,e.ImageTags]);const f=w=>{if(i||a.current){w.preventDefault(),w.stopPropagation(),a.current=!1;return}t(e.Id)},p=w=>{w.preventDefault(),w.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:w.clientX,y:w.clientY}),setTimeout(()=>{a.current=!1},100)},h=Ee({onLongPress:w=>{w.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left cursor-pointer px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(ot,{className:"w-6 h-6 text-gray-500"}):c||(y=e.ImageTags)!=null&&y.Primary?l.jsx("img",{src:c||O.getArtistImageUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(ot,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function ov({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,h;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,c=y=>{if(i||a.current){y.preventDefault(),y.stopPropagation(),a.current=!1;return}t(e.Id)},d=y=>{y.preventDefault(),y.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:y.clientX,y:y.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ee({onLongPress:y=>{y.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:d,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((h=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:h.Name)||"Unknown Artist"})]})}function av({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var y,w;const o=u.useRef(!1),a=r===e.Id,[i,c]=u.useState(!1),d=g=>{const S=Math.floor(g/1e7),x=Math.floor(S/60),m=S%60;return`${x}:${m.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},h=Ee({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(We,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(y=e.ArtistItems)==null?void 0:y[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:d(e.RunTimeTicks)})]})}const nr=90,Su=45,iv=45,Nu=45,cv=45;function uv(){const{artists:e,setArtists:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:a}=Ne(),{playTrack:i,playAlbum:c,addToQueue:d}=je(),[f,p]=u.useState(""),[h,y]=u.useState(!1),[w,g]=u.useState(null),[S,x]=u.useState(!1),[m,v]=u.useState(!1),[N,j]=u.useState("mobile"),[b,k]=u.useState(null),[I,M]=u.useState(null),[E,P]=u.useState(null),[V,Z]=u.useState(0),[le,ue]=u.useState(0),[fe,W]=u.useState(Nu),D=He(),U=u.useRef(null),[B,J]=u.useState([]),[Q,ge]=u.useState(!1),[ae,pe]=u.useState(null),H=n.artists,$=u.useRef(!0),[ee,te]=u.useState(!1),ne=u.useRef(H),[L,z]=u.useState(Su),X=B.length>0;u.useEffect(()=>{const Y=f.trim().length>0;if(Y||X){x(!0);const he=window.setTimeout(()=>{(async()=>{try{if(Y){const Pe=await Es(f,450);g(Pe)}else{const Pe=await Ms(450);g(Pe)}}catch(Pe){console.error("Search failed:",Pe),g(null)}finally{x(!1)}})()},250);return()=>{window.clearTimeout(he)}}else g(null),x(!1)},[f,X]);const K=u.useMemo(()=>{if(!w)return null;const Y=Te=>{if(B.length>0){const Pe=Te.Genres||[];if(!B.some(ce=>Pe.some(_=>_.toLowerCase()===ce.toLowerCase())))return!1}return!0},he=Te=>{if(B.length>0){const Pe=Te.Genres||[];if(!B.some(ce=>Pe.some(_=>_.toLowerCase()===ce.toLowerCase())))return!1}return!0};return{artists:w.artists.filter(Y),albums:w.albums.filter(he),playlists:w.playlists||[],songs:w.songs.filter(he)}},[w,B]);u.useEffect(()=>{var Y;if(h&&((Y=U.current)==null||Y.focus(),U.current)){const he=U.current.value.length;U.current.setSelectionRange(he,he)}},[h]);const we=Y=>{p(Y),Y.trim().length>0&&!h&&y(!0)},Se=()=>{p(""),g(null)},ke=()=>{y(!1),p(""),g(null),J([])},$e=()=>{pe("genre"),ge(!0)},A=Y=>{J(Y)},F=Y=>{D(`/artist/${Y}`),y(!1),p(""),g(null)},R=Y=>{D(`/album/${Y}`),y(!1),p(""),g(null)},C=Y=>{i(Y,[Y])},q=Y=>{Y.preventDefault(),Y.stopPropagation(),K!=null&&K.songs&&K.songs.length>0&&c(K.songs)},ie=Y=>{Y.preventDefault(),Y.stopPropagation(),K!=null&&K.songs&&K.songs.length>0&&d(K.songs)},oe=Y=>{D(`/playlist/${Y}`),y(!1),p(""),g(null)},me=(Y,he,Te="mobile",Pe)=>{M(Y),P(he),j(Te),k(Pe||null),v(!0)},ve=async()=>{var he;const Y=Date.now();s("artists",!0);try{const Te={limit:nr,startIndex:V*nr};H==="RecentlyAdded"?(Te.sortBy=["DateCreated"],Te.sortOrder="Descending"):(Te.sortBy=["SortName"],Te.sortOrder="Ascending");let Pe=await O.getArtists(Te);(((he=Pe.Items)==null?void 0:he.length)||0)===0&&(Pe=await O.getArtists({limit:nr,startIndex:V*nr}));const re=Pe.Items||[];ue(Pe.TotalRecordCount||0);const ce=Date.now()-Y;t(re)}catch(Te){console.error("Failed to load artists:",Te),t([]),ue(0)}finally{s("artists",!1),te(!1)}};return u.useEffect(()=>{!f.trim()&&!h&&Z(0)},[H,f,h]),u.useEffect(()=>{z(Su)},[f,h,w==null?void 0:w.songs.length]),u.useEffect(()=>{var he;if(!h||!((he=w==null?void 0:w.songs)!=null&&he.length))return;const Y=()=>{const Te=window.scrollY||document.documentElement.scrollTop,Pe=window.innerHeight||document.documentElement.clientHeight,re=document.documentElement.scrollHeight;Te+Pe*1.5>=re&&z(ce=>Math.min(ce+iv,w.songs.length))};return window.addEventListener("scroll",Y,{passive:!0}),()=>window.removeEventListener("scroll",Y)},[h,w==null?void 0:w.songs.length]),u.useEffect(()=>{W(Nu)},[V,e.length]),u.useEffect(()=>{const Y=()=>{const he=window.scrollY||document.documentElement.scrollTop,Te=window.innerHeight||document.documentElement.clientHeight,Pe=document.documentElement.scrollHeight;he+Te*1.5>=Pe&&W(re=>Math.min(re+cv,e.length))};return window.addEventListener("scroll",Y,{passive:!0}),()=>window.removeEventListener("scroll",Y)},[e.length]),u.useEffect(()=>{!f.trim()&&!h&&(!$.current&&ne.current!==H&&te(!0),ne.current=H,ve())},[V,H,f,h]),u.useEffect(()=>{$.current&&($.current=!1)},[]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Artists"}),l.jsx("button",{onClick:()=>y(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!h&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("artists",H==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[H==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(Lr,{className:"w-4 h-4"})]}),o.artists&&!$.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Qt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!h&&l.jsxs("div",{className:ee?"opacity-50 pointer-events-none":"",children:[e.length===0&&!o.artists&&l.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:l.jsx("p",{children:"No artists found"})}),e.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-0",children:e.slice(0,fe).map(Y=>l.jsx(sv,{artist:Y},Y.Id))}),l.jsx(Wi,{currentPage:V,totalPages:Math.ceil(le/nr),onPageChange:Z,itemsPerPage:nr,totalItems:le})]})]})})]}),h&&er.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Xn,{ref:U,value:f,onChange:we,showClearButton:f.trim().length>0,onClear:Se})}),l.jsx("button",{onClick:ke,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsx("div",{className:"flex items-center gap-3 px-4",children:l.jsxs("button",{onClick:$e,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${B.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(qn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]})})}),l.jsx("div",{className:"pb-32 pt-4",children:S?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):K?l.jsxs("div",{className:"space-y-8",children:[K.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:K.artists.map(Y=>l.jsx(lv,{artist:Y,onClick:F,onContextMenu:me,contextMenuItemId:(I==null?void 0:I.Id)||null},Y.Id))})]}),K.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:K.albums.slice(0,12).map(Y=>l.jsx(ov,{album:Y,onClick:R,onContextMenu:me,contextMenuItemId:(I==null?void 0:I.Id)||null},Y.Id))})]}),K.playlists&&K.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:K.playlists.map(Y=>l.jsxs("button",{onClick:()=>oe(Y.Id),onContextMenu:he=>{he.preventDefault(),he.stopPropagation(),me(Y,"playlist","desktop",{x:he.clientX,y:he.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:O.getAlbumArtUrl(Y.Id,96),alt:Y.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:Y.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:"Playlist"})]})]},Y.Id))})]}),K.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:q,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:ie,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ot,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:K.songs.map((Y,he)=>l.jsx(av,{song:Y,onClick:C,onContextMenu:me,contextMenuItemId:(I==null?void 0:I.Id)||null,showImage:he<L},Y.Id))})]}),K.artists.length===0&&K.albums.length===0&&(!K.playlists||K.playlists.length===0)&&K.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),ae==="genre"&&l.jsx(Kn,{isOpen:Q,onClose:()=>ge(!1),filterType:"genre",genres:a,selectedValues:B,onApply:A}),l.jsx(Qe,{item:I,itemType:E,isOpen:m,onClose:()=>{v(!1),M(null),P(null)},zIndex:99999,mode:N,position:b||void 0})]})}function dv({album:e}){var w,g;const t=He(),[n,r]=u.useState(!1),[s,o]=u.useState("mobile"),[a,i]=u.useState(null),[c,d]=u.useState(!1),f=u.useRef(!1),p=S=>{if(f.current){S.preventDefault(),f.current=!1;return}t(`/album/${e.Id}`)},h=Ee({onLongPress:S=>{S.preventDefault(),f.current=!0,o("mobile"),i(null),r(!0)},onClick:p}),y=S=>{S.preventDefault(),S.stopPropagation(),f.current=!0,o("desktop"),i({x:S.clientX,y:S.clientY}),r(!0),setTimeout(()=>{f.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:p,onContextMenu:y,...h,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 relative flex items-center justify-center",children:c?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsx(ct,{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>d(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((g=(w=e.ArtistItems)==null?void 0:w[0])==null?void 0:g.Name)||"Unknown Artist"})]}),l.jsx(Qe,{item:e,itemType:"album",isOpen:n,onClose:()=>r(!1),mode:s,position:a||void 0})]})}const Do=new Map;function fv({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var y,w;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,[c,d]=u.useState(null);u.useEffect(()=>{var m;if((m=e.ImageTags)!=null&&m.Primary){d(null);return}const g=Do.get(e.Id);if(g!==void 0){d(g);return}let S=!1;return(async()=>{try{const{albums:v,songs:N}=await O.getArtistItems(e.Id),j=v[0],b=N.find(E=>E.AlbumId)||N[0],k=j||b,I=k?k.AlbumId||k.Id:null,M=I?O.getAlbumArtUrl(I,96):null;Do.set(e.Id,M),S||d(M)}catch(v){console.error("Failed to load fallback album art for artist (albums search):",e.Id,v),Do.set(e.Id,null)}})(),()=>{S=!0}},[e.Id,e.ImageTags]);const f=g=>{if(i||a.current){g.preventDefault(),g.stopPropagation(),a.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{a.current=!1},100)},h=Ee({onLongPress:g=>{g.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(ot,{className:"w-6 h-6 text-gray-500"}):(y=e.ImageTags)!=null&&y.Primary||c?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?O.getArtistImageUrl(e.Id,96):c||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(ot,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function mv({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,h;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,c=y=>{if(i||a.current){y.preventDefault(),y.stopPropagation(),a.current=!1;return}t(e.Id)},d=y=>{y.preventDefault(),y.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:y.clientX,y:y.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ee({onLongPress:y=>{y.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:d,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((h=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:h.Name)||"Unknown Artist"})]})}function hv({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var y,w;const o=u.useRef(!1),a=r===e.Id,[i,c]=u.useState(!1),d=g=>{const S=Math.floor(g/1e7),x=Math.floor(S/60),m=S%60;return`${x}:${m.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},h=Ee({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(We,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(y=e.ArtistItems)==null?void 0:y[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:d(e.RunTimeTicks)})]})}const Ks=90,ju=45,pv=45,bu=45,gv=45;function xv(){const{albums:e,setAlbums:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:a}=Ne(),{playTrack:i,playAlbum:c,addToQueue:d}=je(),[f,p]=u.useState(""),[h,y]=u.useState(!1),[w,g]=u.useState(null),[S,x]=u.useState(!1),[m,v]=u.useState(!1),[N,j]=u.useState("mobile"),[b,k]=u.useState(null),[I,M]=u.useState(null),[E,P]=u.useState(null),[V,Z]=u.useState(0),[le,ue]=u.useState(0),[fe,W]=u.useState(ju),D=He(),[U,B]=Gg(),J=u.useRef(null),[Q,ge]=u.useState([]),[ae,pe]=u.useState({min:null,max:null}),[H,$]=u.useState(!1),[ee,te]=u.useState(null),[ne,L]=u.useState([]),z=n.albums,X=u.useRef(!0),[K,we]=u.useState(!1),Se=u.useRef(z),[ke,$e]=u.useState(bu);u.useEffect(()=>{const T=U.get("year");if(T){const de=parseInt(T,10);!isNaN(de)&&de>0&&(pe({min:de,max:de}),y(!0),B({},{replace:!0}))}},[U,B]),u.useEffect(()=>{(async()=>{try{const de=Ne.getState();if(de.years.length>0)L(de.years);else{const Ce=await O.getYears();L(Ce)}}catch(de){console.error("Failed to load filter values:",de)}})()},[]);const A=Q.length>0||ae.min!==null||ae.max!==null;u.useEffect(()=>{const T=f.trim().length>0;if(T||A){x(!0);const de=window.setTimeout(()=>{(async()=>{try{if(T){const Ie=await Es(f,450);g(Ie)}else{const Ie=await Ms(450);g(Ie)}}catch(Ie){console.error("Search failed:",Ie),g(null)}finally{x(!1)}})()},250);return()=>{window.clearTimeout(de)}}else g(null),x(!1)},[f,A]);const F=u.useMemo(()=>{if(!w)return null;const T=Ie=>{if(ae.min!==null||ae.max!==null)return!1;if(Q.length>0){const tt=Ie.Genres||[];if(!Q.some(Ln=>tt.some(so=>so.toLowerCase()===Ln.toLowerCase())))return!1}return!0},de=Ie=>{if(Q.length>0){const tt=Ie.Genres||[];if(!Q.some(Ln=>tt.some(so=>so.toLowerCase()===Ln.toLowerCase())))return!1}if(ae.min!==null||ae.max!==null){const tt=Ie.ProductionYear;if(!tt||tt<=0||ae.min!==null&&tt<ae.min||ae.max!==null&&tt>ae.max)return!1}return!0},Ce=Ie=>!(ae.min!==null||ae.max!==null||Q.length>0);return{albums:w.albums.filter(de),artists:w.artists.filter(T),playlists:(w.playlists||[]).filter(Ce),songs:w.songs.filter(de)}},[w,Q,ae]);u.useEffect(()=>{var T;if(h&&((T=J.current)==null||T.focus(),J.current)){const de=J.current.value.length;J.current.setSelectionRange(de,de)}},[h]);const R=T=>{p(T),T.trim().length>0&&!h&&y(!0)},C=()=>{p(""),g(null)},q=()=>{y(!1),p(""),g(null),ge([]),pe({min:null,max:null})},ie=T=>{te(T),$(!0)},oe=T=>{ge(T)},me=T=>{pe(T)},ve=T=>{D(`/artist/${T}`),y(!1),p(""),g(null)},Y=T=>{D(`/album/${T}`),y(!1),p(""),g(null)},he=T=>{i(T,[T])},Te=T=>{T.preventDefault(),T.stopPropagation(),F!=null&&F.songs&&F.songs.length>0&&c(F.songs)},Pe=T=>{T.preventDefault(),T.stopPropagation(),F!=null&&F.songs&&F.songs.length>0&&d(F.songs)},re=T=>{D(`/playlist/${T}`),y(!1),p(""),g(null)},ce=(T,de,Ce="mobile",Ie)=>{M(T),P(de),j(Ce),k(Ie||null),v(!0)};u.useEffect(()=>{f.trim()||Z(0)},[z,f]),u.useEffect(()=>{$e(bu)},[f,h,w==null?void 0:w.songs.length]),u.useEffect(()=>{var de;if(!h||!((de=w==null?void 0:w.songs)!=null&&de.length))return;const T=()=>{const Ce=window.scrollY||document.documentElement.scrollTop,Ie=window.innerHeight||document.documentElement.clientHeight,tt=document.documentElement.scrollHeight;Ce+Ie*1.5>=tt&&$e(Wt=>Math.min(Wt+gv,w.songs.length))};return window.addEventListener("scroll",T,{passive:!0}),()=>window.removeEventListener("scroll",T)},[h,w==null?void 0:w.songs.length]),u.useEffect(()=>{W(ju)},[V,e.length]),u.useEffect(()=>{const T=()=>{const de=window.scrollY||document.documentElement.scrollTop,Ce=window.innerHeight||document.documentElement.clientHeight,Ie=document.documentElement.scrollHeight;de+Ce*1.5>=Ie&&W(tt=>Math.min(tt+pv,e.length))};return window.addEventListener("scroll",T,{passive:!0}),()=>window.removeEventListener("scroll",T)},[e.length]),u.useEffect(()=>{f.trim()||(!X.current&&Se.current!==z&&we(!0),Se.current=z,_())},[V,z,f]),u.useEffect(()=>{X.current&&(X.current=!1)},[]);const _=async()=>{s("albums",!0);try{const T={limit:Ks,startIndex:V*Ks};z==="RecentlyAdded"?(T.sortBy=["DateCreated"],T.sortOrder="Descending"):z==="Newest"?(T.sortBy=["ProductionYear","SortName"],T.sortOrder=["Descending","Ascending"]):(T.sortBy=["SortName"],T.sortOrder="Ascending");const de=await O.getAlbums(T);t(de.Items),ue(de.TotalRecordCount||0)}catch(T){console.error("Failed to load albums:",T),t([]),ue(0)}finally{s("albums",!1),we(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Albums"}),l.jsx("button",{onClick:()=>y(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!h&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>{r("albums",z==="RecentlyAdded"?"Alphabetical":z==="Alphabetical"?"Newest":"RecentlyAdded")},className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[z==="RecentlyAdded"?"Recently Added":z==="Newest"?"Newest":"Alphabetically",l.jsx(Lr,{className:"w-4 h-4"})]}),o.albums&&!X.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Qt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!h&&l.jsx("div",{className:K?"opacity-50 pointer-events-none":"",children:e.length===0&&!o.albums?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No albums found"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:e.slice(0,fe).map(T=>l.jsx(dv,{album:T},T.Id))})}),l.jsx(Wi,{currentPage:V,totalPages:Math.ceil(le/Ks),onPageChange:Z,itemsPerPage:Ks,totalItems:le})]})})})]}),h&&er.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Xn,{ref:J,value:f,onChange:R,showClearButton:f.trim().length>0,onClear:C})}),l.jsx("button",{onClick:q,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>ie("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${Q.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(qn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>ie("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${ae.min!==null||ae.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx($i,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:S?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):F?l.jsxs("div",{className:"space-y-8",children:[F.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:F.albums.map(T=>l.jsx(mv,{album:T,onClick:Y,onContextMenu:ce,contextMenuItemId:(I==null?void 0:I.Id)||null},T.Id))})]}),F.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:F.artists.slice(0,5).map(T=>l.jsx(fv,{artist:T,onClick:ve,onContextMenu:ce,contextMenuItemId:(I==null?void 0:I.Id)||null},T.Id))})]}),F.playlists&&F.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:F.playlists.map(T=>l.jsxs("button",{onClick:()=>re(T.Id),onContextMenu:de=>{de.preventDefault(),de.stopPropagation(),ce(T,"playlist","desktop",{x:de.clientX,y:de.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:O.getAlbumArtUrl(T.Id,96),alt:T.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:T.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:T.ChildCount?`${T.ChildCount} tracks`:"Playlist"})]})]},T.Id))})]}),F.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:Te,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Pe,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ot,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:F.songs.map((T,de)=>l.jsx(hv,{song:T,onClick:he,onContextMenu:ce,contextMenuItemId:(I==null?void 0:I.Id)||null,showImage:de<ke},T.Id))})]}),F.artists.length===0&&F.albums.length===0&&(!F.playlists||F.playlists.length===0)&&F.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),ee==="genre"&&l.jsx(Kn,{isOpen:H,onClose:()=>$(!1),filterType:"genre",genres:a,selectedValues:Q,onApply:oe}),ee==="year"&&l.jsx(Kn,{isOpen:H,onClose:()=>$(!1),filterType:"year",availableYears:ne,yearRange:ae,onApplyYear:me}),l.jsx(Qe,{item:I,itemType:E,isOpen:m,onClose:()=>{v(!1),M(null),P(null)},zIndex:99999,mode:N,position:b||void 0})]})}function im({song:e,showImage:t=!0}){var x,m;const{playTrack:n}=je(),r=bt(),[s,o]=u.useState(!1),[a,i]=u.useState("mobile"),[c,d]=u.useState(null),f=u.useRef(!1),[p,h]=u.useState(!1),y=v=>{const N=Math.floor(v/1e7),j=Math.floor(N/60),b=N%60;return`${j}:${b.toString().padStart(2,"0")}`},w=v=>{if(f.current){v.preventDefault(),f.current=!1;return}n(e)},g=Ee({onLongPress:v=>{v.preventDefault(),f.current=!0,i("mobile"),d(null),o(!0)},onClick:w}),S=v=>{v.preventDefault(),v.stopPropagation(),f.current=!0,i("desktop"),d({x:v.clientX,y:v.clientY}),o(!0),setTimeout(()=>{f.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:v=>{if(s||f.current){v.preventDefault(),v.stopPropagation();return}w(v)},onContextMenu:S,...g,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${s?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:p?l.jsx(We,{className:"w-7 h-7 text-gray-500"}):t?l.jsx(ct,{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>h(!0)}):l.jsx("div",{className:"w-full h-full bg-zinc-900"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(r==null?void 0:r.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((m=(x=e.ArtistItems)==null?void 0:x[0])==null?void 0:m.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:y(e.RunTimeTicks)})]}),l.jsx(Qe,{item:e,itemType:"song",isOpen:s,onClose:()=>o(!1),mode:a,position:c||void 0})]})}const $o=new Map;function vv({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var y;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,[c,d]=u.useState(null);u.useEffect(()=>{var x;if((x=e.ImageTags)!=null&&x.Primary){d(null);return}const w=$o.get(e.Id);if(w!==void 0){d(w);return}let g=!1;return(async()=>{try{const{albums:m,songs:v}=await O.getArtistItems(e.Id),N=m[0],j=v.find(M=>M.AlbumId)||v[0],b=N||j,k=b?b.AlbumId||b.Id:null,I=k?O.getAlbumArtUrl(k,96):null;$o.set(e.Id,I),g||d(I)}catch(m){console.error("Failed to load fallback album art for artist (search item):",e.Id,m),$o.set(e.Id,null)}})(),()=>{g=!0}},[e.Id,e.ImageTags]);const f=w=>{if(i||a.current){w.preventDefault(),w.stopPropagation(),a.current=!1;return}t(e.Id)},p=w=>{w.preventDefault(),w.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:w.clientX,y:w.clientY}),setTimeout(()=>{a.current=!1},100)},h=Ee({onLongPress:w=>{w.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left cursor-pointer px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(ot,{className:"w-6 h-6 text-gray-500"}):c||(y=e.ImageTags)!=null&&y.Primary?l.jsx("img",{src:c||O.getArtistImageUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(ot,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function yv({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,h;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,c=y=>{if(i||a.current){y.preventDefault(),y.stopPropagation(),a.current=!1;return}t(e.Id)},d=y=>{y.preventDefault(),y.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:y.clientX,y:y.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ee({onLongPress:y=>{y.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:d,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((h=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:h.Name)||"Unknown Artist"})]})}function wv({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var y,w;const o=u.useRef(!1),a=r===e.Id,[i,c]=u.useState(!1),d=g=>{const S=Math.floor(g/1e7),x=Math.floor(S/60),m=S%60;return`${x}:${m.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},h=Ee({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(We,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(y=e.ArtistItems)==null?void 0:y[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:d(e.RunTimeTicks)})]})}const Js=90,Iu=45,Sv=45,ku=45,Nv=45;function jv(){const{songs:e,setSongs:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:a}=Ne(),{playTrack:i,playAlbum:c,addToQueue:d}=je(),[f,p]=u.useState(""),[h,y]=u.useState(!1),[w,g]=u.useState(null),[S,x]=u.useState(!1),[m,v]=u.useState("mobile"),[N,j]=u.useState(null),[b,k]=u.useState(null),[I,M]=u.useState(null),[E,P]=u.useState(!1),[V,Z]=u.useState(0),[le,ue]=u.useState(0),fe=He(),W=u.useRef(null),D=u.useRef(null),[U,B]=u.useState([]),[J,Q]=u.useState({min:null,max:null}),[ge,ae]=u.useState(!1),[pe,H]=u.useState(null),[$,ee]=u.useState([]),te=n.songs,ne=u.useRef(!0),[L,z]=u.useState(!1),X=u.useRef(te),[K,we]=u.useState(Iu),[Se,ke]=u.useState(ku);u.useEffect(()=>{(async()=>{try{const T=Ne.getState();if(T.years.length>0)ee(T.years);else{const de=await O.getYears();ee(de)}}catch(T){console.error("Failed to load filter values:",T)}})()},[]);const $e=U.length>0||J.min!==null||J.max!==null;u.useEffect(()=>{const _=f.trim().length>0;if(_||$e){P(!0);const T=window.setTimeout(()=>{(async()=>{try{if(_){const Ce=await Es(f,450);g(Ce)}else{const Ce=await Ms(450);g(Ce)}}catch(Ce){console.error("Search failed:",Ce),g(null)}finally{P(!1)}})()},250);return()=>{window.clearTimeout(T)}}else g(null),P(!1)},[f,$e]);const A=u.useMemo(()=>{if(!w)return null;const _=Ce=>{if(J.min!==null||J.max!==null)return!1;if(U.length>0){const Ie=Ce.Genres||[];if(!U.some(Wt=>Ie.some(Ln=>Ln.toLowerCase()===Wt.toLowerCase())))return!1}return!0},T=Ce=>{if(U.length>0){const Ie=Ce.Genres||[];if(!U.some(Wt=>Ie.some(Ln=>Ln.toLowerCase()===Wt.toLowerCase())))return!1}if(J.min!==null||J.max!==null){const Ie=Ce.ProductionYear;if(!Ie||Ie<=0||J.min!==null&&Ie<J.min||J.max!==null&&Ie>J.max)return!1}return!0},de=Ce=>!(J.min!==null||J.max!==null||U.length>0);return{songs:w.songs.filter(T),artists:w.artists.filter(_),albums:w.albums.filter(T),playlists:(w.playlists||[]).filter(de)}},[w,U,J]);u.useEffect(()=>{var _;if(h&&((_=W.current)==null||_.focus(),W.current)){const T=W.current.value.length;W.current.setSelectionRange(T,T)}},[h]);const F=_=>{p(_),_.trim().length>0&&!h&&y(!0)},R=()=>{p(""),g(null)},C=()=>{y(!1),p(""),g(null),B([]),Q({min:null,max:null})},q=_=>{H(_),ae(!0)},ie=_=>{B(_)},oe=_=>{Q(_)},me=_=>{fe(`/artist/${_}`),y(!1),p(""),g(null)},ve=_=>{fe(`/album/${_}`),y(!1),p(""),g(null)},Y=_=>{i(_,[_])},he=_=>{_.preventDefault(),_.stopPropagation(),A!=null&&A.songs&&A.songs.length>0&&c(A.songs)},Te=_=>{_.preventDefault(),_.stopPropagation(),A!=null&&A.songs&&A.songs.length>0&&d(A.songs)},Pe=_=>{fe(`/playlist/${_}`),y(!1),p(""),g(null)},re=(_,T,de="mobile",Ce)=>{k(_),M(T),v(de),j(Ce||null),x(!0)};u.useEffect(()=>{f.trim()||Z(0)},[te,f]),u.useEffect(()=>{ke(ku)},[f,h,w==null?void 0:w.songs.length]),u.useEffect(()=>{var de;const _=D.current;if(!h||!_||!((de=w==null?void 0:w.songs)!=null&&de.length))return;const T=()=>{const Ce=_.scrollTop,Ie=_.clientHeight,tt=_.scrollHeight;Ce+Ie*1.5>=tt&&ke(Wt=>Math.min(Wt+Nv,w.songs.length))};return _.addEventListener("scroll",T,{passive:!0}),()=>_.removeEventListener("scroll",T)},[h,w==null?void 0:w.songs.length,Se]),u.useEffect(()=>{we(Iu)},[V,e.length]),u.useEffect(()=>{const _=()=>{const T=window.scrollY||document.documentElement.scrollTop,de=window.innerHeight||document.documentElement.clientHeight,Ce=document.documentElement.scrollHeight;T+de*1.5>=Ce&&we(Ie=>Math.min(Ie+Sv,e.length))};return window.addEventListener("scroll",_,{passive:!0}),()=>window.removeEventListener("scroll",_)},[e.length]),u.useEffect(()=>{f.trim()||(!ne.current&&X.current!==te&&z(!0),X.current=te,ce())},[V,te,f]),u.useEffect(()=>{ne.current&&(ne.current=!1)},[]);const ce=async()=>{s("songs",!0);try{const _={limit:Js,startIndex:V*Js};te==="RecentlyAdded"?(_.sortBy=["DateCreated"],_.sortOrder="Descending"):(_.sortBy=["SortName"],_.sortOrder="Ascending");const T=await O.getSongs(_);t(T.Items),ue(T.TotalRecordCount||0)}catch(_){console.error("Failed to load songs:",_),t([]),ue(0)}finally{s("songs",!1),z(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Songs"}),l.jsx("button",{onClick:()=>y(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!h&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("songs",te==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[te==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(Lr,{className:"w-4 h-4"})]}),o.songs&&!ne.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Qt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!h&&l.jsx("div",{className:L?"opacity-50 pointer-events-none":"",children:e.length===0&&!o.songs?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No songs found"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-0",children:e.map((_,T)=>l.jsx(im,{song:_,showImage:T<K},_.Id))}),l.jsx(Wi,{currentPage:V,totalPages:Math.ceil(le/Js),onPageChange:Z,itemsPerPage:Js,totalItems:le})]})})})]}),h&&er.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{ref:D,className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Xn,{ref:W,value:f,onChange:F,showClearButton:f.trim().length>0,onClear:R})}),l.jsx("button",{onClick:C,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>q("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${U.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(qn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>q("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${J.min!==null||J.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx($i,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:E?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):A?l.jsxs("div",{className:"space-y-8",children:[A.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:he,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Te,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ot,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:A.songs.map((_,T)=>l.jsx(wv,{song:_,onClick:Y,onContextMenu:re,contextMenuItemId:(b==null?void 0:b.Id)||null,showImage:T<Se},_.Id))})]}),A.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:A.artists.slice(0,5).map(_=>l.jsx(vv,{artist:_,onClick:me,onContextMenu:re,contextMenuItemId:(b==null?void 0:b.Id)||null},_.Id))})]}),A.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:A.albums.slice(0,12).map(_=>l.jsx(yv,{album:_,onClick:ve,onContextMenu:re,contextMenuItemId:(b==null?void 0:b.Id)||null},_.Id))})]}),A.playlists&&A.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:A.playlists.map(_=>l.jsxs("button",{onClick:()=>Pe(_.Id),onContextMenu:T=>{T.preventDefault(),T.stopPropagation(),re(_,"playlist","desktop",{x:T.clientX,y:T.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:O.getAlbumArtUrl(_.Id,96),alt:_.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:_.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:_.ChildCount?`${_.ChildCount} tracks`:"Playlist"})]})]},_.Id))})]}),A.artists.length===0&&A.albums.length===0&&(!A.playlists||A.playlists.length===0)&&A.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),pe==="genre"&&l.jsx(Kn,{isOpen:ge,onClose:()=>ae(!1),filterType:"genre",genres:a,selectedValues:U,onApply:ie}),pe==="year"&&l.jsx(Kn,{isOpen:ge,onClose:()=>ae(!1),filterType:"year",availableYears:$,yearRange:J,onApplyYear:oe}),l.jsx(Qe,{item:b,itemType:I,isOpen:S,onClose:()=>{x(!1),k(null),M(null)},zIndex:99999,mode:m,position:N||void 0})]})}function bv({genre:e}){const t=He();return l.jsx("button",{onClick:()=>t(`/genre/${e.Id}`),className:"w-full flex items-center justify-between h-12 pl-4 pr-4 hover:bg-zinc-900 transition-colors group",children:l.jsx("div",{className:"text-base font-medium text-white group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})}function Iv(){const{genres:e,setGenres:t,setLoading:n,loading:r}=Ne();return u.useEffect(()=>{if(e.length>0)return;(async()=>{n("genres",!0);try{const a=(await O.getGenres()||[]).sort((i,c)=>(i.Name||"").localeCompare(c.Name||""));t(a)}catch(o){console.error("Failed to load genres:",o),t([])}finally{n("genres",!1)}})()},[e.length,t,n]),l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Genres"}),r.genres&&l.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:l.jsx(Qt,{})}),!r.genres&&l.jsx("div",{className:"w-10 h-10"})]})})})}),l.jsxs("div",{className:"pb-4",style:{paddingTop:"calc(env(safe-area-inset-top) + 6rem)"},children:[e.length===0&&!r.genres&&l.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:l.jsx("p",{children:"No genres found"})}),e.length>0&&l.jsx("div",{className:"space-y-2",children:[...e].sort((s,o)=>(s.Name||"").localeCompare(o.Name||"")).map(s=>l.jsx(bv,{genre:s},s.Id))})]})]})}function kv({playlist:e}){const t=He(),[n,r]=u.useState(!1),[s,o]=u.useState("mobile"),[a,i]=u.useState(null),c=u.useRef(!1),d=h=>{if(c.current){h.preventDefault(),c.current=!1;return}t(`/playlist/${e.Id}`)},f=Ee({onLongPress:h=>{h.preventDefault(),c.current=!0,o("mobile"),i(null),r(!0)},onClick:d}),p=h=>{h.preventDefault(),h.stopPropagation(),c.current=!0,o("desktop"),i({x:h.clientX,y:h.clientY}),r(!0),setTimeout(()=>{c.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:h=>{if(n||c.current){h.preventDefault(),h.stopPropagation();return}d(h)},onContextMenu:p,...f,className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(ct,{src:O.getAlbumArtUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left flex flex-col justify-center",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.ChildCount?`${e.ChildCount} tracks`:"Playlist"})]})]}),l.jsx(Qe,{item:e,itemType:"playlist",isOpen:n,onClose:()=>r(!1),mode:s,position:a||void 0})]})}const Fo=new Map;function Cv({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var y,w;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,[c,d]=u.useState(null);u.useEffect(()=>{var m;if((m=e.ImageTags)!=null&&m.Primary){d(null);return}const g=Fo.get(e.Id);if(g!==void 0){d(g);return}let S=!1;return(async()=>{try{const{albums:v,songs:N}=await O.getArtistItems(e.Id),j=v[0],b=N.find(E=>E.AlbumId)||N[0],k=j||b,I=k?k.AlbumId||k.Id:null,M=I?O.getAlbumArtUrl(I,96):null;Fo.set(e.Id,M),S||d(M)}catch(v){console.error("Failed to load fallback album art for artist (playlists search):",e.Id,v),Fo.set(e.Id,null)}})(),()=>{S=!0}},[e.Id,e.ImageTags]);const f=g=>{if(i||a.current){g.preventDefault(),g.stopPropagation(),a.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),a.current=!0,n(e,"artist"),setTimeout(()=>{a.current=!1},100)},h=Ee({onLongPress:g=>{g.preventDefault(),a.current=!0,n(e,"artist")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(ot,{className:"w-6 h-6 text-gray-500"}):(y=e.ImageTags)!=null&&y.Primary||c?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?O.getArtistImageUrl(e.Id,96):c||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(ot,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function Av({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,h;const[s,o]=u.useState(!1),a=u.useRef(!1),i=r===e.Id,c=y=>{if(i||a.current){y.preventDefault(),y.stopPropagation(),a.current=!1;return}t(e.Id)},d=y=>{y.preventDefault(),y.stopPropagation(),a.current=!0,n(e,"album"),setTimeout(()=>{a.current=!1},100)},f=Ee({onLongPress:y=>{y.preventDefault(),a.current=!0,n(e,"album")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:d,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((h=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:h.Name)||"Unknown Artist"})]})}function Pv({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var y,w;const o=u.useRef(!1),a=r===e.Id,[i,c]=u.useState(!1),d=g=>{const S=Math.floor(g/1e7),x=Math.floor(S/60),m=S%60;return`${x}:${m.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song"),setTimeout(()=>{o.current=!1},100)},h=Ee({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...h,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(We,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(y=e.ArtistItems)==null?void 0:y[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:d(e.RunTimeTicks)})]})}function Ev(){const[e,t]=u.useState([]),[n,r]=u.useState(!0),{sortPreferences:s,setSortPreference:o}=Ne(),{playTrack:a,playAlbum:i,addToQueue:c}=je(),d=s.playlists,f=u.useRef(!0),[p,h]=u.useState(!1),y=u.useRef(d),w=He(),g=u.useRef(null),[S,x]=u.useState(""),[m,v]=u.useState(!1),[N,j]=u.useState(null),[b,k]=u.useState(!1),[I,M]=u.useState(!1),[E,P]=u.useState(null),[V,Z]=u.useState(null),[le,ue]=u.useState("mobile"),[fe,W]=u.useState(null),[D,U]=u.useState(45);u.useEffect(()=>{m||(!f.current&&y.current!==d&&h(!0),y.current=d,B())},[d,m]),u.useEffect(()=>{f.current&&(f.current=!1)},[]),u.useEffect(()=>{if(S.trim()){k(!0);const z=window.setTimeout(()=>{(async()=>{try{const K=await Es(S,450);j(K)}catch(K){console.error("Search failed:",K),j(null)}finally{k(!1)}})()},250);return()=>{window.clearTimeout(z)}}else j(null),k(!1)},[S]),u.useEffect(()=>{U(45)},[S,m,N==null?void 0:N.songs.length]),u.useEffect(()=>{var X;if(!m||!((X=N==null?void 0:N.songs)!=null&&X.length))return;const z=()=>{const K=window.scrollY||document.documentElement.scrollTop,we=window.innerHeight||document.documentElement.clientHeight,Se=document.documentElement.scrollHeight;K+we*1.5>=Se&&U(ke=>Math.min(ke+45,N.songs.length))};return window.addEventListener("scroll",z,{passive:!0}),()=>window.removeEventListener("scroll",z)},[m,N==null?void 0:N.songs.length]),u.useEffect(()=>{var z;if(m&&((z=g.current)==null||z.focus(),g.current)){const X=g.current.value.length;g.current.setSelectionRange(X,X)}},[m]);const B=async()=>{r(!0);try{const z={limit:100};d==="RecentlyAdded"?(z.sortBy=["DateCreated"],z.sortOrder="Descending"):(z.sortBy=["SortName"],z.sortOrder="Ascending");const X=await O.getPlaylists(z);t(X.Items)}catch(z){console.error("Failed to load playlists:",z)}finally{r(!1),h(!1)}},J=z=>{x(z),z.trim().length>0&&!m&&v(!0)},Q=()=>{x(""),j(null)},ge=()=>{v(!1),x(""),j(null)},ae=z=>{w(`/artist/${z}`),v(!1),x(""),j(null)},pe=z=>{w(`/album/${z}`),v(!1),x(""),j(null)},H=z=>{a(z,[z])},$=z=>{z.preventDefault(),z.stopPropagation(),L!=null&&L.songs&&L.songs.length>0&&i(L.songs)},ee=z=>{z.preventDefault(),z.stopPropagation(),L!=null&&L.songs&&L.songs.length>0&&c(L.songs)},te=z=>{w(`/playlist/${z}`),v(!1),x(""),j(null)},ne=(z,X,K="mobile",we)=>{P(z),Z(X),ue(K),W(we||null),M(!0)},L=u.useMemo(()=>N?{playlists:N.playlists||[],artists:N.artists||[],albums:N.albums||[],songs:N.songs||[]}:null,[N]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Playlists"}),l.jsx("button",{onClick:()=>v(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!m&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>o("playlists",d==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[d==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(Lr,{className:"w-4 h-4"})]}),n&&!f.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Qt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!m&&l.jsx("div",{className:p?"opacity-50 pointer-events-none":"",children:e.length===0&&!n?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No playlists found"})}):l.jsx("div",{className:"space-y-0",children:e.map(z=>l.jsx(kv,{playlist:z},z.Id))})})})]}),m&&er.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Xn,{ref:g,value:S,onChange:J,showClearButton:S.trim().length>0,onClear:Q})}),l.jsx("button",{onClick:ge,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsx("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:l.jsx("div",{className:"pb-32 pt-4",children:b?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):L?l.jsxs("div",{className:"space-y-8",children:[L.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:L.playlists.map(z=>l.jsxs("button",{onClick:()=>te(z.Id),onContextMenu:X=>{X.preventDefault(),X.stopPropagation(),ne(z,"playlist","desktop",{x:X.clientX,y:X.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:O.getAlbumArtUrl(z.Id,96),alt:z.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:z.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:z.ChildCount?`${z.ChildCount} tracks`:"Playlist"})]})]},z.Id))})]}),L.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:L.artists.slice(0,5).map(z=>l.jsx(Cv,{artist:z,onClick:ae,onContextMenu:ne,contextMenuItemId:(E==null?void 0:E.Id)||null},z.Id))})]}),L.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:L.albums.slice(0,12).map(z=>l.jsx(Av,{album:z,onClick:pe,onContextMenu:ne,contextMenuItemId:(E==null?void 0:E.Id)||null},z.Id))})]}),L.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:$,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:ee,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ot,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:L.songs.map((z,X)=>l.jsx(Pv,{song:z,onClick:H,onContextMenu:ne,contextMenuItemId:(E==null?void 0:E.Id)||null,showImage:X<D},z.Id))})]}),L.playlists.length===0&&L.artists.length===0&&L.albums.length===0&&L.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})})]})}),document.body),l.jsx(Qe,{item:E,itemType:V,isOpen:I,onClose:()=>{M(!1),P(null),Z(null)},zIndex:99999,mode:le,position:fe||void 0})]})}const Cu=45,Mv=45;function Tv({track:e,index:t,tracks:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){var f,p;const a=o===e.Id,i=bt(),c=h=>{const y=Math.floor(h/1e7),w=Math.floor(y/60),g=y%60;return`${w}:${g.toString().padStart(2,"0")}`},d=Ee({onLongPress:h=>{h.preventDefault(),s(e,"mobile")},onClick:()=>r(e,n)});return l.jsxs("button",{onClick:()=>r(e,n),onContextMenu:h=>{h.preventDefault(),s(e,"desktop",{x:h.clientX,y:h.clientY})},...d,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(ct,{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((p=(f=e.ArtistItems)==null?void 0:f[0])==null?void 0:p.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:c(e.RunTimeTicks)})]})}function Rv(){const{id:e}=eo(),t=He(),{playAlbum:n,playTrack:r,isPlaying:s}=je(),o=bt(),[a,i]=u.useState(null),[c,d]=u.useState([]),[f,p]=u.useState(!0),[h,y]=u.useState(!1),[w,g]=u.useState(null),[S,x]=u.useState(!1),[m,v]=u.useState("mobile"),[N,j]=u.useState(null),[b,k]=u.useState(Cu);u.useEffect(()=>{if(!e)return;(async()=>{p(!0);try{const P=await O.getAlbumTracks(e);d(P);const Z=(await O.getPlaylists({limit:1e3})).Items.find(le=>le.Id===e);Z?i(Z):P.length>0&&i({Id:e,Name:"Playlist",Type:"Playlist"})}catch(P){console.error("Failed to load playlist data:",P)}finally{p(!1)}})()},[e]),u.useEffect(()=>{k(Cu)},[c.length]),u.useEffect(()=>{const E=()=>{const P=window.scrollY||document.documentElement.scrollTop,V=window.innerHeight||document.documentElement.clientHeight,Z=document.documentElement.scrollHeight;P+V*1.5>=Z&&k(le=>Math.min(le+Mv,c.length))};return window.addEventListener("scroll",E,{passive:!0}),()=>window.removeEventListener("scroll",E)},[c.length]);const I=()=>{c.length>0&&n(c)},M=()=>!c.length||!o?!1:c.some(E=>E.Id===o.Id);return f?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Loading..."})})}):!a||c.length===0?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Playlist not found"})})}):l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center justify-between gap-4 px-4",style:{paddingTop:"calc(1rem + 8px)",paddingBottom:"1rem"},children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Gn,{className:"w-6 h-6"})}),a&&l.jsx("button",{onClick:E=>{const P=E.currentTarget.getBoundingClientRect();v("desktop"),j({x:P.left+P.width/2,y:P.bottom+5}),x(!0)},className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Ui,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{className:"pt-20",children:[l.jsx("div",{className:"mb-6 px-4 pt-4",children:l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-0.5 text-left break-words",children:a.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("div",{className:"text-gray-400",children:[c.length," ",c.length===1?"track":"tracks"]}),l.jsx("button",{onClick:M()&&s?()=>je.getState().pause():I,className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:M()&&s?l.jsxs(l.Fragment,{children:[l.jsx(Pn,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(Ze,{className:"w-3.5 h-3.5"}),"Play"]})})]})]})}),l.jsx("div",{children:l.jsx("div",{className:"space-y-0",children:c.slice(0,b).map((E,P)=>l.jsx(Tv,{track:E,index:P,tracks:c,onClick:V=>r(V,c),onContextMenu:(V,Z,le)=>{g(V),setContextMenuMode(Z||"mobile"),setContextMenuPosition(le||null),y(!0)},contextMenuItemId:(w==null?void 0:w.Id)||null},E.Id))})})]}),l.jsx(Qe,{item:w,itemType:"song",isOpen:h,onClose:()=>{y(!1),g(null)}}),l.jsx(Qe,{item:a,itemType:"playlist",isOpen:S,onClose:()=>{x(!1)},mode:m,position:N||void 0})]})}const Lv=[{name:"zinc",hex:"#71717a"},{name:"red",hex:"#ef4444"},{name:"orange",hex:"#f97316"},{name:"amber",hex:"#f59e0b"},{name:"yellow",hex:"#eab308"},{name:"lime",hex:"#84cc16"},{name:"green",hex:"#22c55e"},{name:"emerald",hex:"#10b981"},{name:"teal",hex:"#14b8a6"},{name:"cyan",hex:"#06b6d4"},{name:"sky",hex:"#0ea5e9"},{name:"blue",hex:"#3b82f6"},{name:"indigo",hex:"#6366f1"},{name:"violet",hex:"#8b5cf6"},{name:"purple",hex:"#a855f7"},{name:"fuchsia",hex:"#d946ef"},{name:"pink",hex:"#ec4899"},{name:"rose",hex:"#f43f5e"}];function zv(){const e=He(),{pageVisibility:t,setPageVisibility:n,accentColor:r,setAccentColor:s}=Ft(),{logout:o,serverUrl:a}=Di(),{setGenres:i,lastSyncCompleted:c,setLastSyncCompleted:d}=Ne(),{state:f,startSync:p,completeSync:h}=ro(),[y,w]=u.useState(!1),[g,S]=u.useState(!1),[x,m]=u.useState({scope:"incremental"}),v=()=>{S(!1),m({scope:"incremental"})},N=()=>{o(),e("/")},j=I=>{n({[I]:!t[I]})},b=async()=>{const I=(x.scope==="full","Syncing...");p("settings",I);try{await O.syncLibrary(x);const E=(await O.getGenres()||[]).sort((P,V)=>(P.Name||"").localeCompare(V.Name||""));i(E),d(Date.now()),h(!0,"Library synced successfully")}catch(M){h(!1,M instanceof Error?M.message:"Failed to sync library")}},k=async()=>{if(a)try{await navigator.clipboard.writeText(a),w(!0),setTimeout(()=>w(!1),1500)}catch{}};return l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>e("/"),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Gn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1",children:"Settings"})]})})}),l.jsxs("div",{className:"p-4 space-y-8",style:{paddingTop:"calc(env(safe-area-inset-top) + 4.5rem + 1rem)"},children:[l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Page Visibility"}),l.jsx("div",{className:"space-y-3",children:["artists","albums","songs","genres","playlists"].map(I=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-lg",children:[l.jsx("label",{className:"text-white capitalize font-medium",children:I}),l.jsx("button",{onClick:()=>j(I),className:`relative w-12 h-6 rounded-full transition-colors ${t[I]?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:l.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${t[I]?"translate-x-6":"translate-x-0"}`})})]},I))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Accent Color"}),l.jsx("div",{className:"grid grid-cols-6 md:grid-cols-9 gap-3 mb-6",children:Lv.map(I=>l.jsx("button",{onClick:()=>s(I.name),className:`aspect-square rounded-lg transition-all ${r===I.name?"ring-2 ring-white ring-offset-2 ring-offset-black scale-110":"hover:scale-105"}`,style:{backgroundColor:I.hex},"aria-label":`Select ${I.name} color`},I.name))}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"About Tunetuna"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("a",{href:"https://github.com/AlessioLaiso/tunetuna",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[l.jsx(Bx,{className:"w-5 h-5"}),l.jsx("span",{children:"GitHub"})]}),l.jsxs("a",{href:"https://www.paypal.com/donate/?hosted_button_id=XBVKHU3JV9W8N",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[l.jsx(Qx,{className:"w-5 h-5"}),l.jsx("span",{children:"Donate"})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Jellyfin Library"}),l.jsxs("div",{className:"relative inline-block mb-2",children:[l.jsx("button",{type:"button",onClick:k,disabled:!a,className:`text-left text-xs break-all transition-colors ${a?"text-gray-400 hover:text-gray-200 cursor-pointer":"text-gray-600 cursor-not-allowed"}`,children:a?`Server: ${a}`:"Server: Not configured"}),y&&l.jsx("div",{className:"absolute left-0 mt-1 px-2 py-1 rounded bg-zinc-800 text-[10px] text-white shadow-lg",children:"Copied to clipboard"})]}),f==="idle"&&c&&l.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Last synced: ",new Date(c).getFullYear()," ",new Date(c).toLocaleString("default",{month:"short"})," ",new Date(c).getDate().toString().padStart(2,"0")," at ",new Date(c).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>S(!0),disabled:f==="syncing",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 disabled:opacity-50 disabled:cursor-not-allowed font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:f==="syncing"?l.jsxs(l.Fragment,{children:[l.jsx(ns,{className:"w-5 h-5 animate-spin"}),l.jsx("span",{children:"Syncing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(ns,{className:"w-5 h-5"}),l.jsx("span",{children:"Sync"})]})}),l.jsxs("button",{onClick:N,className:"flex-1 px-4 py-3 bg-transparent border border-red-500 text-red-500 hover:bg-red-500/10 font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:[l.jsx(r0,{className:"w-5 h-5"}),l.jsx("span",{children:"Log Out"})]})]})]}),l.jsx(Qi,{isOpen:g,onClose:v,zIndex:10001,children:l.jsxs("div",{className:"pb-6",children:[l.jsxs("div",{className:"mb-6 pl-4 pr-4",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"Sync"}),l.jsx("div",{className:"text-sm text-gray-400 mt-1",children:"Cache song metadata to speed up search and loading times"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>{m({scope:"incremental"}),S(!1),b()},disabled:f==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[l.jsx(d0,{className:"w-5 h-5 text-white flex-shrink-0"}),l.jsx("span",{className:"font-medium",children:"New and updated files"})]}),l.jsxs("button",{onClick:()=>{m({scope:"full"}),S(!1),b()},disabled:f==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[l.jsx(j0,{className:"w-5 h-5 text-white flex-shrink-0"}),l.jsx("span",{className:"font-medium",children:"All files (slower)"})]})]})]})})]})]})}const Au=45,Ov=45,Pu=45,_v=45;function Dv({album:e,year:t,onNavigate:n,onContextMenu:r}){const[s,o]=u.useState(!1),a=u.useRef(!1),i=f=>{if(a.current){f.preventDefault(),f.stopPropagation(),a.current=!1;return}n(e.Id)},c=f=>{f.preventDefault(),f.stopPropagation(),a.current=!0,r(e,"desktop",{x:f.clientX,y:f.clientY}),setTimeout(()=>{a.current=!1},100)},d=Ee({onLongPress:f=>{f.preventDefault(),a.current=!0,r(e,"mobile")},onClick:i});return l.jsxs("button",{onClick:i,onContextMenu:c,...d,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsx(ct,{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>o(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),t&&l.jsx("div",{className:"text-xs text-gray-400 truncate",children:t})]})}function $v({song:e,album:t,year:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){const a=o===e.Id,i=bt(),c=f=>{const p=Math.floor(f/1e7),h=Math.floor(p/60),y=p%60;return`${h}:${y.toString().padStart(2,"0")}`},d=Ee({onLongPress:f=>{f.preventDefault(),s(e,"mobile")},onClick:()=>r(e)});return l.jsxs("button",{onClick:()=>r(e),onContextMenu:f=>{f.preventDefault(),s(e,"desktop",{x:f.clientX,y:f.clientY})},...d,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(ct,{src:O.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),(t||n)&&l.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1 min-w-0",children:[t&&l.jsx("span",{className:"truncate",children:t}),t&&n&&l.jsx("span",{className:"flex-shrink-0",children:""}),n&&l.jsx("span",{className:"flex-shrink-0",children:n})]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:c(e.RunTimeTicks)})]})}function Fv(){var $e;const{id:e}=eo(),t=He(),{playAlbum:n,playTrack:r,isPlaying:s,pause:o,addToQueue:a}=je(),i=bt(),[c,d]=u.useState(null),[f,p]=u.useState([]),[h,y]=u.useState([]),[w,g]=u.useState(!0),[S,x]=u.useState(!1),[m,v]=u.useState(!0),[N,j]=u.useState(!0),[b,k]=u.useState(!1),[I,M]=u.useState("mobile"),[E,P]=u.useState(null),[V,Z]=u.useState(null),[le,ue]=u.useState(null),[fe,W]=u.useState(!1),[D,U]=u.useState("mobile"),[B,J]=u.useState(null),[Q,ge]=u.useState("Alphabetical"),[ae,pe]=u.useState(Au),[H,$]=u.useState(Pu),ee=u.useRef(null);u.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[e]);const te=A=>A.toLowerCase().replace(/[_\*\-\.]/g,"").trim();u.useEffect(()=>{if(!e)return;(async()=>{var F;g(!0);try{let C=await O.getArtistById(e);if(!C){const me=(await O.getArtists({limit:1e3})).Items.find(ve=>ve.Id===e);me&&(C=me)}if(!C){g(!1);return}d(C),j(!0);const q=await O.getArtistItems(e);if(q.albums.length===0&&q.songs.length===0&&C.Name){const oe=te(C.Name),ve=((F=(await O.search(C.Name,50)).Artists)==null?void 0:F.Items)||[];for(const Y of ve)if(Y.Id!==e&&te(Y.Name)===oe){const he=await O.getArtistItems(Y.Id);if(he.albums.length>0||he.songs.length>0){t(`/artist/${Y.Id}`,{replace:!0});return}}}const ie=[...q.albums].sort((oe,me)=>{const ve=oe.ProductionYear||(oe.PremiereDate?new Date(oe.PremiereDate).getFullYear():0);return(me.ProductionYear||(me.PremiereDate?new Date(me.PremiereDate).getFullYear():0))-ve});p(ie),y(q.songs)}catch(R){console.error("Failed to load artist data:",R)}finally{g(!1)}})()},[e,t]),u.useEffect(()=>{if(!(c!=null&&c.Overview))return;v(!0);let A=null,F=null,R=null,C=!1;const q=()=>{const me=ee.current;if(!me||!(c!=null&&c.Overview)){v(!1);return}const ve=window.getComputedStyle(me);let Y=parseFloat(ve.lineHeight||"0");if((!Number.isFinite(Y)||Y===0)&&(Y=parseFloat(ve.fontSize||"16")*1.5),Y===0){v(!1);return}const he=me.scrollHeight;if(he===0&&!C){C=!0,ie();return}const Pe=Math.round(he/Y)>2;v(Pe)},ie=()=>{A!==null&&cancelAnimationFrame(A),F!==null&&clearTimeout(F),A=requestAnimationFrame(()=>{F=window.setTimeout(q,0)}),R!==null&&clearTimeout(R),R=window.setTimeout(()=>{C=!1,q()},300)},oe=()=>{C=!1,ie()};return ie(),window.addEventListener("resize",oe),()=>{A!==null&&cancelAnimationFrame(A),F!==null&&clearTimeout(F),R!==null&&clearTimeout(R),window.removeEventListener("resize",oe)}},[c==null?void 0:c.Overview]),u.useEffect(()=>{pe(Au)},[f.length]),u.useEffect(()=>{const A=()=>{const F=window.scrollY||document.documentElement.scrollTop,R=window.innerHeight||document.documentElement.clientHeight,C=document.documentElement.scrollHeight;F+R*1.5>=C&&pe(q=>Math.min(q+Ov,f.length))};return window.addEventListener("scroll",A,{passive:!0}),()=>window.removeEventListener("scroll",A)},[f.length]),u.useEffect(()=>{$(Pu)},[h.length]),u.useEffect(()=>{const A=()=>{const F=window.scrollY||document.documentElement.scrollTop,R=window.innerHeight||document.documentElement.clientHeight,C=document.documentElement.scrollHeight;F+R*1.5>=C&&$(q=>Math.min(q+_v,h.length))};return window.addEventListener("scroll",A,{passive:!0}),()=>window.removeEventListener("scroll",A)},[h.length]);const ne=()=>{if(K.length>0){const A=[...K].sort(()=>Math.random()-.5);n(A)}},L=A=>A.ProductionYear?A.ProductionYear.toString():A.PremiereDate?new Date(A.PremiereDate).getFullYear().toString():null,z=A=>{const F=A.Album||null;let R=null;if(A.AlbumId){const C=f.find(q=>q.Id===A.AlbumId);C&&(R=L(C))}return{album:F,year:R}},X=A=>{if(A.AlbumId){const R=f.find(C=>C.Id===A.AlbumId);if(R){const C=R.ProductionYear||(R.PremiereDate?new Date(R.PremiereDate).getFullYear():0);return R.PremiereDate&&new Date(R.PremiereDate).getMonth(),R.PremiereDate&&new Date(R.PremiereDate).getDate(),R.PremiereDate?new Date(R.PremiereDate).getTime():C*1e4}}const F=A.ProductionYear||(A.PremiereDate?new Date(A.PremiereDate).getFullYear():0);return A.PremiereDate?new Date(A.PremiereDate).getTime():F*1e4},K=u.useMemo(()=>{if(Q==="Alphabetical")return[...h].sort((R,C)=>{const q=R.Name||"",ie=C.Name||"";return q.localeCompare(ie)});const A=(R,C,q)=>{const ie=X(R),oe=X(C),me=R.AlbumId||"",ve=C.AlbumId||"";if(ie!==oe)return q?oe-ie:ie-oe;if(me!==ve)return me.localeCompare(ve);const Y=R.IndexNumber||0,he=C.IndexNumber||0;return Y!==he?Y-he:(R.Name||"").localeCompare(C.Name||"")},F=Q==="Newest";return[...h].sort((R,C)=>A(R,C,F))},[h,Q,f]),we=A=>{A.preventDefault(),A.stopPropagation(),K.length>0&&n(K)},Se=A=>{A.preventDefault(),A.stopPropagation(),K.length>0&&a(K)},ke=()=>{ge(A=>A==="Alphabetical"?"Newest":A==="Newest"?"Oldest":"Alphabetical")};return w?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx(Qt,{})})}):c?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60]",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"relative flex items-center justify-between gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors z-10",children:l.jsx(Gn,{className:"w-6 h-6"})}),c&&l.jsx("button",{onClick:A=>{const F=A.currentTarget.getBoundingClientRect();U("desktop"),J({x:F.left+F.width/2,y:F.bottom+5}),W(!0)},className:"text-white hover:text-zinc-300 transition-colors z-10",children:l.jsx(Ui,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{className:"relative z-30 w-screen",style:{marginTop:"calc(-1 * env(safe-area-inset-top))",marginLeft:"calc(50% - 50vw)",marginRight:"calc(50% - 50vw)"},children:[N&&l.jsxs("div",{className:"relative w-full min-h-64 md:min-h-80 bg-black",style:{paddingTop:"env(safe-area-inset-top)"},children:[l.jsx("div",{className:"w-full flex items-center justify-center md:hidden",children:l.jsx(ct,{src:O.getArtistImageUrl(c.Id),alt:c.Name,className:"w-full h-auto object-contain",onError:()=>j(!1)})}),l.jsx("div",{className:"hidden md:block w-full h-80",children:l.jsx("img",{src:O.getArtistBackdropUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover",onError:()=>j(!1)})}),l.jsx("div",{className:"absolute inset-x-0 top-0 bottom-[-1px] bg-gradient-to-b from-transparent via-black/60 to-black pointer-events-none"})]}),l.jsx("div",{className:`left-0 right-0 ${N?"absolute":"relative"} ${N?"pt-16":"pt-12"}`,style:N?{bottom:"-28px",paddingBottom:"1.5rem"}:{},children:l.jsxs("div",{className:"max-w-[768px] mx-auto px-4 flex items-end gap-6 md:grid md:grid-cols-3 md:gap-4",children:[N&&l.jsx("div",{className:"hidden md:block md:col-span-1",children:l.jsx("div",{className:"aspect-square rounded overflow-hidden bg-zinc-900 flex items-center justify-center",children:l.jsx(ct,{src:O.getArtistImageUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded"})})}),l.jsx("div",{className:`flex-1 min-w-0 pb-2 ${N?"md:col-span-2":"md:col-span-3"}`,children:l.jsxs("div",{className:"mb-4 mt-4",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-2 break-words",children:c.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("p",{className:"text-sm text-gray-300",children:[f.length," ",f.length===1?"album":"albums","  ",K.length," ",K.length===1?"song":"songs"]}),l.jsx("button",{onClick:()=>{var F;i&&s&&(((F=i.ArtistItems)==null?void 0:F.some(R=>R.Id===e))||i.AlbumArtist===(c==null?void 0:c.Name))?o():ne()},className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:i&&s&&(($e=i.ArtistItems)!=null&&$e.some(A=>A.Id===e)||i.AlbumArtist===(c==null?void 0:c.Name))?l.jsxs(l.Fragment,{children:[l.jsx(Pn,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(tn,{className:"w-3.5 h-3.5"}),"Shuffle"]})})]})]})})]})})]}),l.jsxs("div",{className:"pt-6 md:pt-10",children:[c.Overview&&l.jsx("div",{className:"mb-6 -mt-4 px-4",children:l.jsxs("div",{className:"text-white relative",children:[l.jsx("p",{ref:ee,className:"text-sm text-gray-300 leading-relaxed absolute opacity-0 pointer-events-none -z-10",children:c.Overview}),!S&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>x(!0),className:"flex-1 text-left min-w-0",children:l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-2",children:c.Overview})}),l.jsx("button",{onClick:()=>x(!0),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:l.jsx(Fi,{className:"w-4 h-4"})})]}),S&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:c.Overview}),l.jsxs("button",{onClick:()=>x(!1),className:"mt-2 flex items-center gap-1 text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:["Show less",l.jsx(am,{className:"w-4 h-4"})]})]})]})}),f.length>0&&l.jsxs("div",{className:"mb-10 px-4",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Albums (",f.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:f.slice(0,ae).map(A=>{const F=L(A);return l.jsx(Dv,{album:A,year:F,onNavigate:R=>t(`/album/${R}`),onContextMenu:(R,C,q)=>{Z(R),ue("album"),M(C||"mobile"),P(q||null),k(!0)}},A.Id)})})]}),h.length>0&&l.jsxs("div",{id:"songs-section",children:[l.jsxs("div",{className:"px-4 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Songs (",h.length,")"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:we,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Se,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ot,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"mt-1",children:l.jsxs("button",{type:"button",onClick:ke,className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[Q,l.jsx(Lr,{className:"w-4 h-4"})]})})]}),l.jsx("div",{className:"space-y-0",children:K.slice(0,H).map(A=>{const{album:F,year:R}=z(A);return l.jsx($v,{song:A,album:F,year:R,onClick:r,onContextMenu:(C,q,ie)=>{Z(C),ue("song"),M(q||"mobile"),P(ie||null),k(!0)},contextMenuItemId:(V==null?void 0:V.Id)||null},A.Id)})})]})]}),l.jsx(Qe,{item:V,itemType:le,isOpen:b,onClose:()=>{k(!1),Z(null),ue(null)},zIndex:99999,mode:I,position:E||void 0}),l.jsx(Qe,{item:c,itemType:"artist",isOpen:fe,onClose:()=>{W(!1)},mode:D,position:B||void 0})]}):l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Artist not found on the Jellyfin server"})})})}function Uv({track:e,trackNumber:t,tracks:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){const a=o===e.Id,i=bt(),c=f=>{const p=Math.floor(f/1e7),h=Math.floor(p/60),y=p%60;return`${h}:${y.toString().padStart(2,"0")}`},d=Ee({onLongPress:f=>{f.preventDefault(),s(e,"mobile")},onClick:()=>r(e,n)});return l.jsxs("button",{onClick:()=>r(e,n),onContextMenu:f=>{f.preventDefault(),s(e,"desktop",{x:f.clientX,y:f.clientY})},...d,className:`w-full flex items-baseline hover:bg-white/10 transition-colors group py-3 ${a?"bg-white/10":""}`,children:[l.jsx("span",{className:`text-sm w-6 text-right flex-shrink-0 mr-4 ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-gray-500"}`,children:t&&t>0?t:"-"}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name})}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right mr-4",children:c(e.RunTimeTicks)})]})}function Bv(){const{id:e}=eo(),t=He(),{playAlbum:n,playTrack:r,isPlaying:s,play:o,pause:a}=je(),i=bt(),[c,d]=u.useState(null),[f,p]=u.useState([]),[h,y]=u.useState(!0),[w,g]=u.useState(!1),[S,x]=u.useState(!0),[m,v]=u.useState(!1),[N,j]=u.useState("mobile"),[b,k]=u.useState(null),[I,M]=u.useState(null),[E,P]=u.useState(!1),[V,Z]=u.useState("mobile"),[le,ue]=u.useState(null),[fe,W]=u.useState(null),[D,U]=u.useState(!1),[B,J]=u.useState(!1),[Q,ge]=u.useState(!1),ae=u.useRef(!1),pe=u.useRef(!1),[H,$]=u.useState(0),ee=u.useRef(0),te=u.useRef(null),ne=u.useRef(0),L=u.useRef(!1),z=u.useRef(null),X=u.useRef(null),K=u.useRef(!1);u.useEffect(()=>{if(!e)return;(async()=>{var C;y(!0);try{const q=await O.getAlbumTracks(e);p(q);let oe=await O.getAlbumById(e);if(!oe){const Y=(await O.getAlbums({limit:1})).Items.find(he=>he.Id===e);Y&&(oe=Y)}oe||q.length>0&&q[0].AlbumId===e&&(oe={Id:e,Name:q[0].Album||"Unknown Album",AlbumArtist:q[0].AlbumArtist}),oe&&(d(oe),x(!0));const me=we(q,oe);if(me)try{const ve=await O.getArtistById(me);(C=ve==null?void 0:ve.ImageTags)!=null&&C.Logo?(W(O.getImageUrl(me,"Logo")),U(!0)):(U(!1),W(null))}catch(ve){console.warn("Failed to load artist logo:",ve),U(!1),W(null)}else U(!1),W(null)}catch(q){console.error("Failed to load album data:",q)}finally{y(!1)}})()},[e]),u.useEffect(()=>{const R=(i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s,C=(c==null?void 0:c.Id)||null,q=X.current!==null&&X.current!==C;if(K.current!==R&&(ae.current=!1),K.current=R,!S){J(!1),ge(!1),X.current=C;return}R?((q||!L.current||!B)&&(J(!0),ge(!1),L.current=!0),pe.current=window.innerWidth>=560,ae.current||(ae.current=!0,setTimeout(()=>{(i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s&&ge(!0)},500)),X.current=C):L.current&&B&&!R?(ae.current||(ae.current=!0,ge(!1)),X.current=C):L.current?(J(!1),ge(!1),X.current=C):(J(!1),ge(!1),L.current=!0,X.current=C)},[i==null?void 0:i.AlbumId,c==null?void 0:c.Id,s,B,S,Q]),u.useEffect(()=>{const R=()=>{if((i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s&&B){const q=window.innerWidth>=560;pe.current=q,Q&&(ge(!1),setTimeout(()=>ge(!0),10))}};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[i==null?void 0:i.AlbumId,c==null?void 0:c.Id,s,B,Q]),u.useEffect(()=>{if((i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s){const C=q=>{ne.current===0&&(ne.current=q);const ie=q-ne.current,oe=360/1e4;ee.current=(ee.current+oe*ie)%360,$(ee.current),ne.current=q,te.current=requestAnimationFrame(C)};ne.current=0,te.current=requestAnimationFrame(C)}else te.current&&(cancelAnimationFrame(te.current),te.current=null),ne.current=0;return()=>{te.current&&cancelAnimationFrame(te.current)}},[i==null?void 0:i.AlbumId,c==null?void 0:c.Id,s]);const we=(R,C)=>R.length>0&&R[0].ArtistItems&&R[0].ArtistItems.length>0?R[0].ArtistItems[0].Id:C!=null&&C.ArtistItems&&C.ArtistItems.length>0?C.ArtistItems[0].Id:null,Se=()=>{f.length>0&&n(f)},ke=()=>{if(f.length>0){const R=f[0];if(R.ProductionYear&&R.ProductionYear>0)return R.ProductionYear.toString();if(R.PremiereDate){const C=new Date(R.PremiereDate).getFullYear();if(C>0)return C.toString()}}return null},$e=()=>f.length>0&&f[0].ArtistItems&&f[0].ArtistItems.length>0?f[0].ArtistItems[0].Id:c!=null&&c.ArtistItems&&c.ArtistItems.length>0?c.ArtistItems[0].Id:null,A=()=>{var R,C;return c.AlbumArtist||((C=(R=c.ArtistItems)==null?void 0:R[0])==null?void 0:C.Name)||null},F=()=>{const R=$e();R&&t(`/artist/${R}`)};return h?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen",children:l.jsx(Qt,{})})}):!c||f.length===0?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Album not found"})})}):l.jsxs("div",{className:"pb-20",style:{overflowX:"hidden",maxWidth:"100vw",width:"100%"},children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[55] pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)",background:"transparent"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 z-10 pointer-events-none",style:{height:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",top:"var(--header-offset, 0px)",background:`linear-gradient(to bottom,
            #000000 0%,
            #000000 calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 0.5rem),
            rgba(0, 0, 0, 0.95) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 1rem),
            rgba(0, 0, 0, 0.85) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 1.5rem),
            rgba(0, 0, 0, 0.7) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 2rem),
            rgba(0, 0, 0, 0.5) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 2.5rem),
            rgba(0, 0, 0, 0.3) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 3rem),
            rgba(0, 0, 0, 0.15) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 3.5rem),
            rgba(0, 0, 0, 0) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)
          )`}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 z-20",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto relative",children:l.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 relative z-10",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Gn,{className:"w-6 h-6"})}),c&&l.jsx("button",{onClick:R=>{const C=R.currentTarget.getBoundingClientRect();Z("desktop"),ue({x:C.left+C.width/2,y:C.bottom+5}),P(!0)},className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Ui,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{style:{paddingTop:"calc(5rem + 12px - 48px)"},children:[l.jsxs("div",{className:"mb-6 px-4 pt-4",style:{overflow:"visible"},children:[S&&l.jsx("div",{className:"flex justify-center mb-6 relative",style:{overflowX:"visible",overflowY:"visible",paddingLeft:"16px",paddingRight:"16px"},children:l.jsxs("div",{ref:z,className:"w-64 h-64 relative",style:{overflow:"visible"},children:[l.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",style:{opacity:B?1:0,zIndex:1,transform:(i==null?void 0:i.AlbumId)===c.Id&&s&&pe.current?"translateX(calc(50% + 8px))":"translateX(0)",transition:"transform 500ms ease-in-out, opacity 300ms ease-in-out"},children:l.jsxs("div",{className:"w-full h-full",style:{transformOrigin:"center center",transform:`rotate(${H}deg)`},children:[l.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:R=>{console.error("Failed to load vinyl image"),R.currentTarget.style.display="none"}}),l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full",style:{width:"52%",height:"52%",backgroundColor:"#a1a1aa",transform:"translate(-50%, -50%)",transformOrigin:"center center"}}),D&&fe?l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full overflow-hidden flex items-center justify-center",style:{width:"47%",height:"47%",transform:"translate(-50%, -50%)",transformOrigin:"center center"},children:l.jsx("img",{src:fe,alt:"Artist Logo",className:"w-full h-full object-contain",onError:()=>{U(!1),W(null)}})}):S?l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full overflow-hidden flex items-center justify-center",style:{width:"52%",height:"52%",transform:"translate(-50%, -50%)",transformOrigin:"center center"},children:l.jsx("img",{src:O.getAlbumArtUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover"})}):null]})}),l.jsx("div",{className:"absolute inset-0 rounded overflow-hidden bg-zinc-900 transition-all duration-500",style:{transform:(i==null?void 0:i.AlbumId)===c.Id&&s||Q?pe.current?"translateX(calc(-50% - 8px))":"translateX(calc(-100% - 24px))":"translateX(0)",opacity:1,transitionProperty:"transform",transitionDuration:"500ms",transitionTimingFunction:"ease-in-out",zIndex:10},children:l.jsx(ct,{src:O.getAlbumArtUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>x(!1)})})]})}),l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-0.5 text-left break-words",children:c.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("div",{className:"text-gray-400 flex items-center gap-1.5",children:[A()&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:F,className:`hover:text-white transition-colors ${$e()?"cursor-pointer":"cursor-default"}`,children:A()}),ke()&&l.jsx("span",{children:""})]}),ke()&&l.jsx("button",{onClick:()=>t(`/albums?year=${ke()}`),className:"hover:text-white transition-colors cursor-pointer",children:ke()})]}),l.jsx("button",{onClick:()=>{(i==null?void 0:i.AlbumId)===c.Id&&s?a():(i==null?void 0:i.AlbumId)===c.Id&&!s?o():Se()},className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:(i==null?void 0:i.AlbumId)===c.Id&&s?l.jsxs(l.Fragment,{children:[l.jsx(Pn,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(Ze,{className:"w-3.5 h-3.5"}),"Play"]})})]})]})]}),c.Overview&&l.jsx("div",{className:"mb-6 px-4",children:l.jsxs("div",{className:"text-white relative",children:[!w&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>g(!0),className:"flex-1 text-left min-w-0",children:l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-2",children:c.Overview})}),l.jsx("button",{onClick:()=>g(!0),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:l.jsx(Fi,{className:"w-4 h-4"})})]}),w&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:c.Overview}),l.jsxs("button",{onClick:()=>g(!1),className:"mt-2 flex items-center gap-1 text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:["Show less",l.jsx(am,{className:"w-4 h-4"})]})]})]})}),l.jsx("div",{children:l.jsx("div",{className:"space-y-0",children:(()=>{const R=new Map;f.forEach(ie=>{const oe=ie.ParentIndexNumber??1;R.has(oe)||R.set(oe,[]),R.get(oe).push(ie)});const C=R.size>1;return Array.from(R.keys()).sort((ie,oe)=>ie-oe).map(ie=>{const oe=R.get(ie);return l.jsxs("div",{children:[C&&l.jsxs("div",{className:`px-4 py-2 text-xs font-medium text-gray-400 uppercase tracking-wider ${ie>1?"pt-4":""}`,children:["Disc ",ie]}),oe.map(me=>l.jsx(Uv,{track:me,trackNumber:me.IndexNumber??null,tracks:f,onClick:ve=>r(ve,f),onContextMenu:(ve,Y,he)=>{M(ve),j(Y||"mobile"),k(he||null),v(!0)},contextMenuItemId:(I==null?void 0:I.Id)||null},me.Id))]},ie)})})()})})]}),l.jsx(Qe,{item:I,itemType:"song",isOpen:m,onClose:()=>{v(!1),M(null)},mode:N,position:b||void 0}),l.jsx(Qe,{item:c,itemType:"album",isOpen:E,onClose:()=>{P(!1)},mode:V,position:le||void 0})]})}const Eu=45,Gv=45,Mu=45,Hv=45;function Vv({album:e,year:t,onNavigate:n,onContextMenu:r}){const[s,o]=u.useState(!1),a=Ee({onLongPress:i=>{i.preventDefault(),r(e,"mobile")},onClick:()=>n(e.Id)});return l.jsxs("button",{onClick:()=>n(e.Id),onContextMenu:i=>{i.preventDefault(),r(e,"desktop",{x:i.clientX,y:i.clientY})},...a,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(We,{className:"w-12 h-12 text-gray-500"}):l.jsx(ct,{src:O.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>o(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),t&&l.jsx("div",{className:"text-xs text-gray-400 truncate",children:t})]})}function Yv(){const{id:e}=eo(),t=He(),{playAlbum:n,toggleShuffle:r,isPlaying:s,pause:o,shuffleGenreSongs:a,addToQueue:i}=je();bt();const{genres:c,genreSongs:d,setGenreSongs:f}=Ne(),[p,h]=u.useState(null),[y,w]=u.useState([]),[g,S]=u.useState(!0),[x,m]=u.useState(!1),[v,N]=u.useState("mobile"),[j,b]=u.useState(null),[k,I]=u.useState(null),[M,E]=u.useState(null),[P,V]=u.useState(Eu),[Z,le]=u.useState(Mu),[ue,fe]=u.useState(!1),[W,D]=u.useState("Alphabetical");u.useEffect(()=>{if(ue){const H=setTimeout(()=>{fe(!1)},1e4);return()=>clearTimeout(H)}},[ue]),u.useEffect(()=>{if(!e)return;(async()=>{const $=d[e];if($&&$.length>0){let ee=c;ee.length===0&&(ee=await O.getGenres());const te=ee.find(ne=>ne.Id===e);te&&h(te),w($),S(!1);return}S(!0);try{let ee=c;ee.length===0&&(ee=await O.getGenres());const te=ee.find(z=>z.Id===e);if(!te){S(!1);return}h(te);const ne=te.Name;if(!ne){S(!1);return}const L=await O.getGenreSongs(e,ne);f(e,L),w(L)}catch(ee){console.error("Failed to load genre songs:",ee)}finally{S(!1)}})()},[e,c,d,f]);const U=async()=>{if(y.length>0&&(p!=null&&p.Id)&&(p!=null&&p.Name)&&!ue){const H=je.getState(),{isShuffleAllActive:$,isShuffleGenreActive:ee,shuffle:te}=H;if($||ee)return;fe(!0);try{await a(p.Id,p.Name)}catch(ne){console.error("Failed to shuffle genre:",ne)}finally{fe(!1)}}},B=u.useMemo(()=>{const H=new Map;return y.forEach($=>{$.AlbumId&&$.Album&&(H.has($.AlbumId)||H.set($.AlbumId,{Id:$.AlbumId,Name:$.Album,AlbumArtist:$.AlbumArtist,ArtistItems:$.ArtistItems,ProductionYear:$.ProductionYear,PremiereDate:$.PremiereDate}))}),Array.from(H.values()).sort(($,ee)=>{const te=$.ProductionYear||($.PremiereDate?new Date($.PremiereDate).getFullYear():0),ne=ee.ProductionYear||(ee.PremiereDate?new Date(ee.PremiereDate).getFullYear():0);if(te!==ne)return ne-te;const L=$.Name||"",z=ee.Name||"";return L.localeCompare(z)})},[y]);u.useMemo(()=>{const H=new Map;y.forEach(ee=>{var z,X;const te=ee.AlbumArtist||((X=(z=ee.ArtistItems)==null?void 0:z[0])==null?void 0:X.Name)||"Unknown Artist",ne=ee.AlbumId||"no-album";H.has(te)||H.set(te,new Map);const L=H.get(te);L.has(ne)||L.set(ne,[]),L.get(ne).push(ee)});const $=[];return H.forEach((ee,te)=>{const ne=[];ee.forEach((L,z)=>{var we;const X=[...L].sort((Se,ke)=>{const $e=Se.IndexNumber||0,A=ke.IndexNumber||0;return $e-A}),K=((we=X[0])==null?void 0:we.Album)||"Unknown Album";ne.push({albumId:z,albumName:K,songs:X})}),ne.sort((L,z)=>{const X=L.songs[0],K=z.songs[0],we=(X==null?void 0:X.ProductionYear)||(X!=null&&X.PremiereDate?new Date(X.PremiereDate).getFullYear():0),Se=(K==null?void 0:K.ProductionYear)||(K!=null&&K.PremiereDate?new Date(K.PremiereDate).getFullYear():0);return we!==Se?Se-we:L.albumName.localeCompare(z.albumName)}),$.push({artist:te,albums:ne})}),$.sort((ee,te)=>ee.artist.localeCompare(te.artist)),$},[y]);const J=(H,$)=>{const ee=$.find(te=>te.Id===H.AlbumId);return ee?ee.ProductionYear?ee.ProductionYear:ee.PremiereDate?new Date(ee.PremiereDate).getFullYear():0:0},Q=u.useMemo(()=>W==="Alphabetical"?[...y].sort((H,$)=>{const ee=H.Name||"",te=$.Name||"";return ee.localeCompare(te)}):[...y].sort((H,$)=>{const ee=J(H,B),te=J($,B);if(ee!==te)return W==="Newest"?te-ee:ee-te;const ne=H.AlbumId||"",L=$.AlbumId||"";if(ne!==L)return ne.localeCompare(L);const z=H.IndexNumber||0,X=$.IndexNumber||0;if(z!==X)return z-X;const K=H.Name||"",we=$.Name||"";return K.localeCompare(we)}),[y,W,B]),ge=()=>{D(H=>H==="Alphabetical"?"Newest":H==="Newest"?"Oldest":"Alphabetical")},ae=()=>{Q.length>0&&n(Q)},pe=()=>{Q.length>0&&i(Q)};return u.useEffect(()=>{V(Eu)},[B.length]),u.useEffect(()=>{const H=()=>{const $=window.scrollY||document.documentElement.scrollTop,ee=window.innerHeight||document.documentElement.clientHeight,te=document.documentElement.scrollHeight;$+ee*1.5>=te&&V(ne=>Math.min(ne+Gv,B.length))};return window.addEventListener("scroll",H,{passive:!0}),()=>window.removeEventListener("scroll",H)},[B.length]),u.useEffect(()=>{le(Mu)},[Q.length]),u.useEffect(()=>{const H=()=>{const $=window.scrollY||document.documentElement.scrollTop,ee=window.innerHeight||document.documentElement.clientHeight,te=document.documentElement.scrollHeight;$+ee*1.5>=te&&le(ne=>Math.min(ne+Hv,Q.length))};return window.addEventListener("scroll",H,{passive:!0}),()=>window.removeEventListener("scroll",H)},[Q.length]),g?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Gn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:(p==null?void 0:p.Name)||""}),l.jsx("div",{className:"flex items-center",children:l.jsx(Qt,{})})]})})}),l.jsx("div",{className:"pt-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400"})})]}):!p||y.length===0?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Gn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:"Genre"})]})})}),l.jsx("div",{className:"pt-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Genre not found or no songs available"})})})]}):l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"env(safe-area-inset-top)"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Gn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:p.Name}),l.jsx("button",{onClick:U,disabled:ue,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50","aria-label":"Shuffle genre songs",children:ue?l.jsx("div",{className:"w-4 h-4 border-2 border-zinc-400 border-t-white rounded-full animate-spin"}):l.jsx(tn,{className:"w-5 h-5"})})]})})}),l.jsxs("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 5rem)"},children:[B.length>0&&l.jsxs("div",{className:"mb-10 px-4 pt-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Albums (",B.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:B.slice(0,P).map(H=>{const $=H.ProductionYear||(H.PremiereDate?new Date(H.PremiereDate).getFullYear():null);return l.jsx(Vv,{album:H,year:$,onNavigate:ee=>t(`/album/${ee}`),onContextMenu:(ee,te,ne)=>{I(ee),E("album"),N(te||"mobile"),b(ne||null),m(!0)}},H.Id)})})]}),y.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Songs (",y.length,")"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:ae,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(Ze,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:pe,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ot,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"mt-1",children:l.jsxs("button",{type:"button",onClick:ge,className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[W,l.jsx(Lr,{className:"w-4 h-4"})]})})]}),l.jsx("div",{className:"space-y-0",children:Q.slice(0,Z).map(H=>l.jsx(im,{song:H},H.Id))})]})]}),l.jsx(Qe,{item:k,itemType:M,isOpen:x,onClose:()=>{m(!1),I(null),E(null)},mode:v,position:j||void 0})]})}function Qv(){const{pathname:e}=cn();return u.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[e]),null}function Wv(){const{isAuthenticated:e,logout:t}=Di(),{pageVisibility:n}=Ft();return u.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?l.jsxs(Dg,{children:[l.jsx(Qv,{}),l.jsx(q0,{children:l.jsxs(Eg,{children:[l.jsx(xt,{path:"/",element:l.jsx(rv,{})}),l.jsx(xt,{path:"/settings",element:l.jsx(zv,{})}),n.artists&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/artists",element:l.jsx(uv,{})}),l.jsx(xt,{path:"/artist/:id",element:l.jsx(Fv,{})})]}),n.albums&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/albums",element:l.jsx(xv,{})}),l.jsx(xt,{path:"/album/:id",element:l.jsx(Bv,{})})]}),n.songs&&l.jsx(xt,{path:"/songs",element:l.jsx(jv,{})}),n.genres&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/genres",element:l.jsx(Iv,{})}),l.jsx(xt,{path:"/genre/:id",element:l.jsx(Yv,{})})]}),n.playlists&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/playlists",element:l.jsx(Ev,{})}),l.jsx(xt,{path:"/playlist/:id",element:l.jsx(Rv,{})})]}),l.jsx(xt,{path:"*",element:l.jsx(Ag,{to:"/",replace:!0})})]})})]}):l.jsx(bx,{})}class qv extends u.Component{constructor(){super(...arguments);zn(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),l.jsx("p",{className:"text-gray-400 mb-4",children:(n=this.state.error)==null?void 0:n.message}),l.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"})]})}):this.props.children}}Uo.createRoot(document.getElementById("root")).render(l.jsx(Ba.StrictMode,{children:l.jsx(qv,{children:l.jsx(Wv,{})})}));
