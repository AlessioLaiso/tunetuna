import{r as n,a as P,k as T,e as D,f as S,j as s,D as E,I as O,y as R,C as U}from"./index-DNl72U49.js";const L=n.memo(function({song:e,showImage:v=!0,onContextMenu:a,contextMenuItemId:j}){var d,f;const b=P(t=>t.playTrack),o=T(),[u,c]=n.useState(!1),[I,m]=n.useState("mobile"),[y,x]=n.useState(null),r=n.useRef(!1),[k,w]=n.useState(!1),N=j===e.Id,g=n.useMemo(()=>D.getAlbumArtUrl(e.AlbumId||e.Id,96),[e.AlbumId,e.Id]),M=t=>{if(r.current){t.preventDefault(),r.current=!1;return}b(e)},A=t=>{var l,p,i,h;t.preventDefault(),t.stopPropagation(),(p=(l=t.nativeEvent)==null?void 0:l.preventDefault)==null||p.call(l),(h=(i=t.nativeEvent)==null?void 0:i.stopImmediatePropagation)==null||h.call(i),r.current=!0,a?a(e,"song","desktop",{x:t.clientX,y:t.clientY}):(m("desktop"),x({x:t.clientX,y:t.clientY}),c(!0)),setTimeout(()=>{r.current=!1},300)},C=S({onLongPress:t=>{t.preventDefault(),a?(r.current=!0,a(e,"song","mobile")):(r.current=!0,m("mobile"),x(null),c(!0))}});return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:t=>{if(u||r.current){t.preventDefault(),t.stopPropagation();return}M(t)},onContextMenu:A,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${N?"bg-white/10":""}`,...C,children:[s.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:k?s.jsx(E,{className:"w-6 h-6 text-gray-500"}):v?s.jsx(O,{src:g,alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>w(!0)}):s.jsx("div",{className:"w-full h-full bg-zinc-900"})}),s.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[s.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(o==null?void 0:o.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),s.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[((f=(d=e.ArtistItems)==null?void 0:d[0])==null?void 0:f.Name)||e.AlbumArtist||"Unknown Artist",e.Album&&` â€¢ ${e.Album}`]})]}),e.RunTimeTicks&&s.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:R(e.RunTimeTicks)})]}),s.jsx(U,{item:e,itemType:"song",isOpen:u,onClose:()=>c(!1),mode:I,position:y||void 0})]})});export{L as S};
