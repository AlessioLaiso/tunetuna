var am=Object.defineProperty;var im=(e,t,n)=>t in e?am(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ln=(e,t,n)=>im(e,typeof t!="symbol"?t+"":t,n);function cm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Pu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mu={exports:{}},_l={},Tu={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ns=Symbol.for("react.element"),um=Symbol.for("react.portal"),dm=Symbol.for("react.fragment"),fm=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),hm=Symbol.for("react.provider"),pm=Symbol.for("react.context"),gm=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),vm=Symbol.for("react.memo"),ym=Symbol.for("react.lazy"),Qi=Symbol.iterator;function wm(e){return e===null||typeof e!="object"?null:(e=Qi&&e[Qi]||e["@@iterator"],typeof e=="function"?e:null)}var Ru={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lu=Object.assign,zu={};function Ar(e,t,n){this.props=e,this.context=t,this.refs=zu,this.updater=n||Ru}Ar.prototype.isReactComponent={};Ar.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ar.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ou(){}Ou.prototype=Ar.prototype;function _a(e,t,n){this.props=e,this.context=t,this.refs=zu,this.updater=n||Ru}var Da=_a.prototype=new Ou;Da.constructor=_a;Lu(Da,Ar.prototype);Da.isPureReactComponent=!0;var Wi=Array.isArray,_u=Object.prototype.hasOwnProperty,$a={current:null},Du={key:!0,ref:!0,__self:!0,__source:!0};function $u(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)_u.call(t,r)&&!Du.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Ns,type:e,key:o,ref:a,props:s,_owner:$a.current}}function Sm(e,t){return{$$typeof:Ns,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ns}function Nm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var qi=/\/+/g;function lo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nm(""+e.key):t.toString(36)}function Js(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ns:case um:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+lo(a,0):r,Wi(s)?(n="",e!=null&&(n=e.replace(qi,"$&/")+"/"),Js(s,t,n,"",function(u){return u})):s!=null&&(Fa(s)&&(s=Sm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(qi,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Wi(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+lo(o,i);a+=Js(o,t,n,c,s)}else if(c=wm(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+lo(o,i++),a+=Js(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ms(e,t,n){if(e==null)return e;var r=[],s=0;return Js(e,r,"","",function(o){return t.call(n,o,s++)}),r}function jm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},Zs={transition:null},Im={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Zs,ReactCurrentOwner:$a};function Fu(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Ms,forEach:function(e,t,n){Ms(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ms(e,function(){t++}),t},toArray:function(e){return Ms(e,function(t){return t})||[]},only:function(e){if(!Fa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=Ar;he.Fragment=dm;he.Profiler=mm;he.PureComponent=_a;he.StrictMode=fm;he.Suspense=xm;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Im;he.act=Fu;he.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Lu({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=$a.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)_u.call(t,c)&&!Du.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:Ns,type:e.type,key:s,ref:o,props:r,_owner:a}};he.createContext=function(e){return e={$$typeof:pm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hm,_context:e},e.Consumer=e};he.createElement=$u;he.createFactory=function(e){var t=$u.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:gm,render:e}};he.isValidElement=Fa;he.lazy=function(e){return{$$typeof:ym,_payload:{_status:-1,_result:e},_init:jm}};he.memo=function(e,t){return{$$typeof:vm,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=Zs.transition;Zs.transition={};try{e()}finally{Zs.transition=t}};he.unstable_act=Fu;he.useCallback=function(e,t){return ct.current.useCallback(e,t)};he.useContext=function(e){return ct.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};he.useEffect=function(e,t){return ct.current.useEffect(e,t)};he.useId=function(){return ct.current.useId()};he.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};he.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return ct.current.useMemo(e,t)};he.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};he.useRef=function(e){return ct.current.useRef(e)};he.useState=function(e){return ct.current.useState(e)};he.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};he.useTransition=function(){return ct.current.useTransition()};he.version="18.3.1";Tu.exports=he;var d=Tu.exports;const Ua=Pu(d),bm=cm({__proto__:null,default:Ua},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=d,Cm=Symbol.for("react.element"),Am=Symbol.for("react.fragment"),Em=Object.prototype.hasOwnProperty,Pm=km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mm={key:!0,ref:!0,__self:!0,__source:!0};function Uu(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Em.call(t,r)&&!Mm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Cm,type:e,key:o,ref:a,props:s,_owner:Pm.current}}_l.Fragment=Am;_l.jsx=Uu;_l.jsxs=Uu;Mu.exports=_l;var l=Mu.exports,Fo={},Bu={exports:{}},Nt={},Hu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,P){var C=A.length;A.push(P);e:for(;0<C;){var O=C-1>>>1,D=A[O];if(0<s(D,P))A[O]=P,A[C]=D,C=O;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var P=A[0],C=A.pop();if(C!==P){A[0]=C;e:for(var O=0,D=A.length,re=D>>>1;O<re;){var Z=2*(O+1)-1,V=A[Z],K=Z+1,Q=A[K];if(0>s(V,C))K<D&&0>s(Q,V)?(A[O]=Q,A[K]=C,O=K):(A[O]=V,A[Z]=C,O=Z);else if(K<D&&0>s(Q,C))A[O]=Q,A[K]=C,O=K;else break e}}return P}function s(A,P){var C=A.sortIndex-P.sortIndex;return C!==0?C:A.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],f=1,p=null,m=3,v=!1,w=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=A)r(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=n(u)}}function N(A){if(g=!1,x(A),!w)if(n(c)!==null)w=!0,ae(b);else{var P=n(u);P!==null&&B(N,P.startTime-A)}}function b(A,P){w=!1,g&&(g=!1,y(I),I=-1),v=!0;var C=m;try{for(x(P),p=n(c);p!==null&&(!(p.expirationTime>P)||A&&!z());){var O=p.callback;if(typeof O=="function"){p.callback=null,m=p.priorityLevel;var D=O(p.expirationTime<=P);P=e.unstable_now(),typeof D=="function"?p.callback=D:p===n(c)&&r(c),x(P)}else r(c);p=n(c)}if(p!==null)var re=!0;else{var Z=n(u);Z!==null&&B(N,Z.startTime-P),re=!1}return re}finally{p=null,m=C,v=!1}}var j=!1,k=null,I=-1,R=5,L=-1;function z(){return!(e.unstable_now()-L<R)}function X(){if(k!==null){var A=e.unstable_now();L=A;var P=!0;try{P=k(!0,A)}finally{P?ne():(j=!1,k=null)}}else j=!1}var ne;if(typeof h=="function")ne=function(){h(X)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ce=J.port2;J.port1.onmessage=X,ne=function(){ce.postMessage(null)}}else ne=function(){S(X,0)};function ae(A){k=A,j||(j=!0,ne())}function B(A,P){I=S(function(){A(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,ae(b))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var P=3;break;default:P=m}var C=m;m=P;try{return A()}finally{m=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,P){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var C=m;m=A;try{return P()}finally{m=C}},e.unstable_scheduleCallback=function(A,P,C){var O=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?O+C:O):C=O,A){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=C+D,A={id:f++,callback:P,priorityLevel:A,startTime:C,expirationTime:D,sortIndex:-1},C>O?(A.sortIndex=C,t(u,A),n(c)===null&&A===n(u)&&(g?(y(I),I=-1):g=!0,B(N,C-O))):(A.sortIndex=D,t(c,A),w||v||(w=!0,ae(b))),A},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(A){var P=m;return function(){var C=m;m=P;try{return A.apply(this,arguments)}finally{m=C}}}})(Gu);Hu.exports=Gu;var Tm=Hu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=d,St=Tm;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vu=new Set,ts={};function Kn(e,t){wr(e,t),wr(e+"Capture",t)}function wr(e,t){for(ts[e]=t,e=0;e<t.length;e++)Vu.add(t[e])}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=Object.prototype.hasOwnProperty,Lm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xi={},Ki={};function zm(e){return Uo.call(Ki,e)?!0:Uo.call(Xi,e)?!1:Lm.test(e)?Ki[e]=!0:(Xi[e]=!0,!1)}function Om(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _m(e,t,n,r){if(t===null||typeof t>"u"||Om(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ba=/[\-:]([a-z])/g;function Ha(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ba,Ha);Ke[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ba,Ha);Ke[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ba,Ha);Ke[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ga(e,t,n,r){var s=Ke.hasOwnProperty(t)?Ke[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_m(t,n,s,r)&&(n=null),r||s===null?zm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ln=Rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=Symbol.for("react.element"),nr=Symbol.for("react.portal"),rr=Symbol.for("react.fragment"),Va=Symbol.for("react.strict_mode"),Bo=Symbol.for("react.profiler"),Yu=Symbol.for("react.provider"),Qu=Symbol.for("react.context"),Ya=Symbol.for("react.forward_ref"),Ho=Symbol.for("react.suspense"),Go=Symbol.for("react.suspense_list"),Qa=Symbol.for("react.memo"),un=Symbol.for("react.lazy"),Wu=Symbol.for("react.offscreen"),Ji=Symbol.iterator;function Rr(e){return e===null||typeof e!="object"?null:(e=Ji&&e[Ji]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,oo;function Ur(e){if(oo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);oo=t&&t[1]||""}return`
`+oo+e}var ao=!1;function io(e,t){if(!e||ao)return"";ao=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{ao=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ur(e):""}function Dm(e){switch(e.tag){case 5:return Ur(e.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return e=io(e.type,!1),e;case 11:return e=io(e.type.render,!1),e;case 1:return e=io(e.type,!0),e;default:return""}}function Vo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rr:return"Fragment";case nr:return"Portal";case Bo:return"Profiler";case Va:return"StrictMode";case Ho:return"Suspense";case Go:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qu:return(e.displayName||"Context")+".Consumer";case Yu:return(e._context.displayName||"Context")+".Provider";case Ya:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qa:return t=e.displayName||null,t!==null?t:Vo(e.type)||"Memo";case un:t=e._payload,e=e._init;try{return Vo(e(t))}catch{}}return null}function $m(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vo(t);case 8:return t===Va?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fm(e){var t=qu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rs(e){e._valueTracker||(e._valueTracker=Fm(e))}function Xu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function dl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yo(e,t){var n=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zi(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ku(e,t){t=t.checked,t!=null&&Ga(e,"checked",t,!1)}function Qo(e,t){Ku(e,t);var n=kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wo(e,t.type,kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ec(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wo(e,t,n){(t!=="number"||dl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Br=Array.isArray;function hr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function qo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(Br(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kn(n)}}function Ju(e,t){var n=kn(t.value),r=kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ls,ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ls=Ls||document.createElement("div"),Ls.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ls.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ns(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Um=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){Um.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function td(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function nd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=td(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Bm=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ko(e,t){if(t){if(Bm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function Jo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=null;function Wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ea=null,pr=null,gr=null;function rc(e){if(e=bs(e)){if(typeof ea!="function")throw Error(F(280));var t=e.stateNode;t&&(t=Bl(t),ea(e.stateNode,e.type,t))}}function rd(e){pr?gr?gr.push(e):gr=[e]:pr=e}function sd(){if(pr){var e=pr,t=gr;if(gr=pr=null,rc(e),t)for(e=0;e<t.length;e++)rc(t[e])}}function ld(e,t){return e(t)}function od(){}var co=!1;function ad(e,t,n){if(co)return e(t,n);co=!0;try{return ld(e,t,n)}finally{co=!1,(pr!==null||gr!==null)&&(od(),sd())}}function rs(e,t){var n=e.stateNode;if(n===null)return null;var r=Bl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var ta=!1;if(tn)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){ta=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{ta=!1}function Hm(e,t,n,r,s,o,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Yr=!1,fl=null,ml=!1,na=null,Gm={onError:function(e){Yr=!0,fl=e}};function Vm(e,t,n,r,s,o,a,i,c){Yr=!1,fl=null,Hm.apply(Gm,arguments)}function Ym(e,t,n,r,s,o,a,i,c){if(Vm.apply(this,arguments),Yr){if(Yr){var u=fl;Yr=!1,fl=null}else throw Error(F(198));ml||(ml=!0,na=u)}}function Jn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function id(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sc(e){if(Jn(e)!==e)throw Error(F(188))}function Qm(e){var t=e.alternate;if(!t){if(t=Jn(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return sc(s),e;if(o===r)return sc(s),t;o=o.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function cd(e){return e=Qm(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var dd=St.unstable_scheduleCallback,lc=St.unstable_cancelCallback,Wm=St.unstable_shouldYield,qm=St.unstable_requestPaint,ze=St.unstable_now,Xm=St.unstable_getCurrentPriorityLevel,qa=St.unstable_ImmediatePriority,fd=St.unstable_UserBlockingPriority,hl=St.unstable_NormalPriority,Km=St.unstable_LowPriority,md=St.unstable_IdlePriority,Dl=null,Gt=null;function Jm(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Dl,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:th,Zm=Math.log,eh=Math.LN2;function th(e){return e>>>=0,e===0?32:31-(Zm(e)/eh|0)|0}var zs=64,Os=4194304;function Hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Hr(i):(o&=a,o!==0&&(r=Hr(o)))}else a=n&~s,a!==0?r=Hr(a):o!==0&&(r=Hr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zt(t),s=1<<n,r|=e[n],t&=~s;return r}function nh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-zt(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=nh(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function ra(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hd(){var e=zs;return zs<<=1,!(zs&4194240)&&(zs=64),e}function uo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function js(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function sh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-zt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Xa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ne=0;function pd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gd,Ka,xd,vd,yd,sa=!1,_s=[],xn=null,vn=null,yn=null,ss=new Map,ls=new Map,fn=[],lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oc(e,t){switch(e){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":ss.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(t.pointerId)}}function zr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=bs(t),t!==null&&Ka(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function oh(e,t,n,r,s){switch(t){case"focusin":return xn=zr(xn,e,t,n,r,s),!0;case"dragenter":return vn=zr(vn,e,t,n,r,s),!0;case"mouseover":return yn=zr(yn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return ss.set(o,zr(ss.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,ls.set(o,zr(ls.get(o)||null,e,t,n,r,s)),!0}return!1}function wd(e){var t=_n(e.target);if(t!==null){var n=Jn(t);if(n!==null){if(t=n.tag,t===13){if(t=id(n),t!==null){e.blockedOn=t,yd(e.priority,function(){xd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function el(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=la(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Zo=r,n.target.dispatchEvent(r),Zo=null}else return t=bs(n),t!==null&&Ka(t),e.blockedOn=n,!1;t.shift()}return!0}function ac(e,t,n){el(e)&&n.delete(t)}function ah(){sa=!1,xn!==null&&el(xn)&&(xn=null),vn!==null&&el(vn)&&(vn=null),yn!==null&&el(yn)&&(yn=null),ss.forEach(ac),ls.forEach(ac)}function Or(e,t){e.blockedOn===t&&(e.blockedOn=null,sa||(sa=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,ah)))}function os(e){function t(s){return Or(s,e)}if(0<_s.length){Or(_s[0],e);for(var n=1;n<_s.length;n++){var r=_s[n];r.blockedOn===e&&(r.blockedOn=null)}}for(xn!==null&&Or(xn,e),vn!==null&&Or(vn,e),yn!==null&&Or(yn,e),ss.forEach(t),ls.forEach(t),n=0;n<fn.length;n++)r=fn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fn.length&&(n=fn[0],n.blockedOn===null);)wd(n),n.blockedOn===null&&fn.shift()}var xr=ln.ReactCurrentBatchConfig,gl=!0;function ih(e,t,n,r){var s=Ne,o=xr.transition;xr.transition=null;try{Ne=1,Ja(e,t,n,r)}finally{Ne=s,xr.transition=o}}function ch(e,t,n,r){var s=Ne,o=xr.transition;xr.transition=null;try{Ne=4,Ja(e,t,n,r)}finally{Ne=s,xr.transition=o}}function Ja(e,t,n,r){if(gl){var s=la(e,t,n,r);if(s===null)So(e,t,r,xl,n),oc(e,r);else if(oh(s,e,t,n,r))r.stopPropagation();else if(oc(e,r),t&4&&-1<lh.indexOf(e)){for(;s!==null;){var o=bs(s);if(o!==null&&gd(o),o=la(e,t,n,r),o===null&&So(e,t,r,xl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else So(e,t,r,null,n)}}var xl=null;function la(e,t,n,r){if(xl=null,e=Wa(r),e=_n(e),e!==null)if(t=Jn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=id(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xl=e,null}function Sd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xm()){case qa:return 1;case fd:return 4;case hl:case Km:return 16;case md:return 536870912;default:return 16}default:return 16}}var hn=null,Za=null,tl=null;function Nd(){if(tl)return tl;var e,t=Za,n=t.length,r,s="value"in hn?hn.value:hn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return tl=s.slice(e,1<r?1-r:void 0)}function nl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ds(){return!0}function ic(){return!1}function jt(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ds:ic,this.isPropagationStopped=ic,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),t}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ei=jt(Er),Is=Re({},Er,{view:0,detail:0}),uh=jt(Is),fo,mo,_r,$l=Re({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ti,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_r&&(_r&&e.type==="mousemove"?(fo=e.screenX-_r.screenX,mo=e.screenY-_r.screenY):mo=fo=0,_r=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:mo}}),cc=jt($l),dh=Re({},$l,{dataTransfer:0}),fh=jt(dh),mh=Re({},Is,{relatedTarget:0}),ho=jt(mh),hh=Re({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),ph=jt(hh),gh=Re({},Er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xh=jt(gh),vh=Re({},Er,{data:0}),uc=jt(vh),yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sh[e])?!!t[e]:!1}function ti(){return Nh}var jh=Re({},Is,{key:function(e){if(e.key){var t=yh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ti,charCode:function(e){return e.type==="keypress"?nl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ih=jt(jh),bh=Re({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dc=jt(bh),kh=Re({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ti}),Ch=jt(kh),Ah=Re({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eh=jt(Ah),Ph=Re({},$l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mh=jt(Ph),Th=[9,13,27,32],ni=tn&&"CompositionEvent"in window,Qr=null;tn&&"documentMode"in document&&(Qr=document.documentMode);var Rh=tn&&"TextEvent"in window&&!Qr,jd=tn&&(!ni||Qr&&8<Qr&&11>=Qr),fc=" ",mc=!1;function Id(e,t){switch(e){case"keyup":return Th.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sr=!1;function Lh(e,t){switch(e){case"compositionend":return bd(t);case"keypress":return t.which!==32?null:(mc=!0,fc);case"textInput":return e=t.data,e===fc&&mc?null:e;default:return null}}function zh(e,t){if(sr)return e==="compositionend"||!ni&&Id(e,t)?(e=Nd(),tl=Za=hn=null,sr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jd&&t.locale!=="ko"?null:t.data;default:return null}}var Oh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Oh[e.type]:t==="textarea"}function kd(e,t,n,r){rd(r),t=vl(t,"onChange"),0<t.length&&(n=new ei("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wr=null,as=null;function _h(e){_d(e,0)}function Fl(e){var t=ar(e);if(Xu(t))return e}function Dh(e,t){if(e==="change")return t}var Cd=!1;if(tn){var po;if(tn){var go="oninput"in document;if(!go){var pc=document.createElement("div");pc.setAttribute("oninput","return;"),go=typeof pc.oninput=="function"}po=go}else po=!1;Cd=po&&(!document.documentMode||9<document.documentMode)}function gc(){Wr&&(Wr.detachEvent("onpropertychange",Ad),as=Wr=null)}function Ad(e){if(e.propertyName==="value"&&Fl(as)){var t=[];kd(t,as,e,Wa(e)),ad(_h,t)}}function $h(e,t,n){e==="focusin"?(gc(),Wr=t,as=n,Wr.attachEvent("onpropertychange",Ad)):e==="focusout"&&gc()}function Fh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fl(as)}function Uh(e,t){if(e==="click")return Fl(t)}function Bh(e,t){if(e==="input"||e==="change")return Fl(t)}function Hh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Hh;function is(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Uo.call(t,s)||!_t(e[s],t[s]))return!1}return!0}function xc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vc(e,t){var n=xc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xc(n)}}function Ed(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ed(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pd(){for(var e=window,t=dl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=dl(e.document)}return t}function ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gh(e){var t=Pd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ed(n.ownerDocument.documentElement,n)){if(r!==null&&ri(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=vc(n,o);var a=vc(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vh=tn&&"documentMode"in document&&11>=document.documentMode,lr=null,oa=null,qr=null,aa=!1;function yc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aa||lr==null||lr!==dl(r)||(r=lr,"selectionStart"in r&&ri(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qr&&is(qr,r)||(qr=r,r=vl(oa,"onSelect"),0<r.length&&(t=new ei("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=lr)))}function $s(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var or={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionend:$s("Transition","TransitionEnd")},xo={},Md={};tn&&(Md=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Ul(e){if(xo[e])return xo[e];if(!or[e])return e;var t=or[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Md)return xo[e]=t[n];return e}var Td=Ul("animationend"),Rd=Ul("animationiteration"),Ld=Ul("animationstart"),zd=Ul("transitionend"),Od=new Map,wc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(e,t){Od.set(e,t),Kn(t,[e])}for(var vo=0;vo<wc.length;vo++){var yo=wc[vo],Yh=yo.toLowerCase(),Qh=yo[0].toUpperCase()+yo.slice(1);En(Yh,"on"+Qh)}En(Td,"onAnimationEnd");En(Rd,"onAnimationIteration");En(Ld,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(zd,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gr));function Sc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ym(r,t,void 0,e),e.currentTarget=null}function _d(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;Sc(s,i,u),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;Sc(s,i,u),o=c}}}if(ml)throw e=na,ml=!1,na=null,e}function Ce(e,t){var n=t[fa];n===void 0&&(n=t[fa]=new Set);var r=e+"__bubble";n.has(r)||(Dd(t,e,2,!1),n.add(r))}function wo(e,t,n){var r=0;t&&(r|=4),Dd(n,e,r,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function cs(e){if(!e[Fs]){e[Fs]=!0,Vu.forEach(function(n){n!=="selectionchange"&&(Wh.has(n)||wo(n,!1,e),wo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,wo("selectionchange",!1,t))}}function Dd(e,t,n,r){switch(Sd(t)){case 1:var s=ih;break;case 4:s=ch;break;default:s=Ja}n=s.bind(null,t,n,e),s=void 0,!ta||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function So(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=_n(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}ad(function(){var u=o,f=Wa(n),p=[];e:{var m=Od.get(e);if(m!==void 0){var v=ei,w=e;switch(e){case"keypress":if(nl(n)===0)break e;case"keydown":case"keyup":v=Ih;break;case"focusin":w="focus",v=ho;break;case"focusout":w="blur",v=ho;break;case"beforeblur":case"afterblur":v=ho;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ch;break;case Td:case Rd:case Ld:v=ph;break;case zd:v=Eh;break;case"scroll":v=uh;break;case"wheel":v=Mh;break;case"copy":case"cut":case"paste":v=xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=dc}var g=(t&4)!==0,S=!g&&e==="scroll",y=g?m!==null?m+"Capture":null:m;g=[];for(var h=u,x;h!==null;){x=h;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,y!==null&&(N=rs(h,y),N!=null&&g.push(us(h,N,x)))),S)break;h=h.return}0<g.length&&(m=new v(m,w,null,n,f),p.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==Zo&&(w=n.relatedTarget||n.fromElement)&&(_n(w)||w[nn]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=u,w=w?_n(w):null,w!==null&&(S=Jn(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=u),v!==w)){if(g=cc,N="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(g=dc,N="onPointerLeave",y="onPointerEnter",h="pointer"),S=v==null?m:ar(v),x=w==null?m:ar(w),m=new g(N,h+"leave",v,n,f),m.target=S,m.relatedTarget=x,N=null,_n(f)===u&&(g=new g(y,h+"enter",w,n,f),g.target=x,g.relatedTarget=S,N=g),S=N,v&&w)t:{for(g=v,y=w,h=0,x=g;x;x=er(x))h++;for(x=0,N=y;N;N=er(N))x++;for(;0<h-x;)g=er(g),h--;for(;0<x-h;)y=er(y),x--;for(;h--;){if(g===y||y!==null&&g===y.alternate)break t;g=er(g),y=er(y)}g=null}else g=null;v!==null&&Nc(p,m,v,g,!1),w!==null&&S!==null&&Nc(p,S,w,g,!0)}}e:{if(m=u?ar(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var b=Dh;else if(hc(m))if(Cd)b=Bh;else{b=Fh;var j=$h}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=Uh);if(b&&(b=b(e,u))){kd(p,b,n,f);break e}j&&j(e,m,u),e==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Wo(m,"number",m.value)}switch(j=u?ar(u):window,e){case"focusin":(hc(j)||j.contentEditable==="true")&&(lr=j,oa=u,qr=null);break;case"focusout":qr=oa=lr=null;break;case"mousedown":aa=!0;break;case"contextmenu":case"mouseup":case"dragend":aa=!1,yc(p,n,f);break;case"selectionchange":if(Vh)break;case"keydown":case"keyup":yc(p,n,f)}var k;if(ni)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else sr?Id(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(jd&&n.locale!=="ko"&&(sr||I!=="onCompositionStart"?I==="onCompositionEnd"&&sr&&(k=Nd()):(hn=f,Za="value"in hn?hn.value:hn.textContent,sr=!0)),j=vl(u,I),0<j.length&&(I=new uc(I,e,null,n,f),p.push({event:I,listeners:j}),k?I.data=k:(k=bd(n),k!==null&&(I.data=k)))),(k=Rh?Lh(e,n):zh(e,n))&&(u=vl(u,"onBeforeInput"),0<u.length&&(f=new uc("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:u}),f.data=k))}_d(p,t)})}function us(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=rs(e,n),o!=null&&r.unshift(us(e,o,s)),o=rs(e,t),o!=null&&r.push(us(e,o,s))),e=e.return}return r}function er(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nc(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,s?(c=rs(n,o),c!=null&&a.unshift(us(n,c,i))):s||(c=rs(n,o),c!=null&&a.push(us(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var qh=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function jc(e){return(typeof e=="string"?e:""+e).replace(qh,`
`).replace(Xh,"")}function Us(e,t,n){if(t=jc(t),jc(e)!==t&&n)throw Error(F(425))}function yl(){}var ia=null,ca=null;function ua(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var da=typeof setTimeout=="function"?setTimeout:void 0,Kh=typeof clearTimeout=="function"?clearTimeout:void 0,Ic=typeof Promise=="function"?Promise:void 0,Jh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ic<"u"?function(e){return Ic.resolve(null).then(e).catch(Zh)}:da;function Zh(e){setTimeout(function(){throw e})}function No(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),os(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);os(t)}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Pr,ds="__reactProps$"+Pr,nn="__reactContainer$"+Pr,fa="__reactEvents$"+Pr,ep="__reactListeners$"+Pr,tp="__reactHandles$"+Pr;function _n(e){var t=e[Bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nn]||n[Bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bc(e);e!==null;){if(n=e[Bt])return n;e=bc(e)}return t}e=n,n=e.parentNode}return null}function bs(e){return e=e[Bt]||e[nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function Bl(e){return e[ds]||null}var ma=[],ir=-1;function Pn(e){return{current:e}}function Ae(e){0>ir||(e.current=ma[ir],ma[ir]=null,ir--)}function ke(e,t){ir++,ma[ir]=e.current,e.current=t}var Cn={},rt=Pn(Cn),mt=Pn(!1),Hn=Cn;function Sr(e,t){var n=e.type.contextTypes;if(!n)return Cn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ht(e){return e=e.childContextTypes,e!=null}function wl(){Ae(mt),Ae(rt)}function kc(e,t,n){if(rt.current!==Cn)throw Error(F(168));ke(rt,t),ke(mt,n)}function $d(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(F(108,$m(e)||"Unknown",s));return Re({},n,r)}function Sl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Hn=rt.current,ke(rt,e),ke(mt,mt.current),!0}function Cc(e,t,n){var r=e.stateNode;if(!r)throw Error(F(169));n?(e=$d(e,t,Hn),r.__reactInternalMemoizedMergedChildContext=e,Ae(mt),Ae(rt),ke(rt,e)):Ae(mt),ke(mt,n)}var Xt=null,Hl=!1,jo=!1;function Fd(e){Xt===null?Xt=[e]:Xt.push(e)}function np(e){Hl=!0,Fd(e)}function Mn(){if(!jo&&Xt!==null){jo=!0;var e=0,t=Ne;try{var n=Xt;for(Ne=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xt=null,Hl=!1}catch(s){throw Xt!==null&&(Xt=Xt.slice(e+1)),dd(qa,Mn),s}finally{Ne=t,jo=!1}}return null}var cr=[],ur=0,Nl=null,jl=0,bt=[],kt=0,Gn=null,Kt=1,Jt="";function zn(e,t){cr[ur++]=jl,cr[ur++]=Nl,Nl=e,jl=t}function Ud(e,t,n){bt[kt++]=Kt,bt[kt++]=Jt,bt[kt++]=Gn,Gn=e;var r=Kt;e=Jt;var s=32-zt(r)-1;r&=~(1<<s),n+=1;var o=32-zt(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Kt=1<<32-zt(t)+s|n<<s|r,Jt=o+e}else Kt=1<<o|n<<s|r,Jt=e}function si(e){e.return!==null&&(zn(e,1),Ud(e,1,0))}function li(e){for(;e===Nl;)Nl=cr[--ur],cr[ur]=null,jl=cr[--ur],cr[ur]=null;for(;e===Gn;)Gn=bt[--kt],bt[kt]=null,Jt=bt[--kt],bt[kt]=null,Kt=bt[--kt],bt[kt]=null}var wt=null,yt=null,Ee=!1,Lt=null;function Bd(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ac(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,yt=wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Gn!==null?{id:Kt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wt=e,yt=null,!0):!1;default:return!1}}function ha(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pa(e){if(Ee){var t=yt;if(t){var n=t;if(!Ac(e,t)){if(ha(e))throw Error(F(418));t=wn(n.nextSibling);var r=wt;t&&Ac(e,t)?Bd(r,n):(e.flags=e.flags&-4097|2,Ee=!1,wt=e)}}else{if(ha(e))throw Error(F(418));e.flags=e.flags&-4097|2,Ee=!1,wt=e}}}function Ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function Bs(e){if(e!==wt)return!1;if(!Ee)return Ec(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ua(e.type,e.memoizedProps)),t&&(t=yt)){if(ha(e))throw Hd(),Error(F(418));for(;t;)Bd(e,t),t=wn(t.nextSibling)}if(Ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=wt?wn(e.stateNode.nextSibling):null;return!0}function Hd(){for(var e=yt;e;)e=wn(e.nextSibling)}function Nr(){yt=wt=null,Ee=!1}function oi(e){Lt===null?Lt=[e]:Lt.push(e)}var rp=ln.ReactCurrentBatchConfig;function Dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pc(e){var t=e._init;return t(e._payload)}function Gd(e){function t(y,h){if(e){var x=y.deletions;x===null?(y.deletions=[h],y.flags|=16):x.push(h)}}function n(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function r(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function s(y,h){return y=In(y,h),y.index=0,y.sibling=null,y}function o(y,h,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<h?(y.flags|=2,h):x):(y.flags|=2,h)):(y.flags|=1048576,h)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function i(y,h,x,N){return h===null||h.tag!==6?(h=Po(x,y.mode,N),h.return=y,h):(h=s(h,x),h.return=y,h)}function c(y,h,x,N){var b=x.type;return b===rr?f(y,h,x.props.children,N,x.key):h!==null&&(h.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===un&&Pc(b)===h.type)?(N=s(h,x.props),N.ref=Dr(y,h,x),N.return=y,N):(N=cl(x.type,x.key,x.props,null,y.mode,N),N.ref=Dr(y,h,x),N.return=y,N)}function u(y,h,x,N){return h===null||h.tag!==4||h.stateNode.containerInfo!==x.containerInfo||h.stateNode.implementation!==x.implementation?(h=Mo(x,y.mode,N),h.return=y,h):(h=s(h,x.children||[]),h.return=y,h)}function f(y,h,x,N,b){return h===null||h.tag!==7?(h=Un(x,y.mode,N,b),h.return=y,h):(h=s(h,x),h.return=y,h)}function p(y,h,x){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Po(""+h,y.mode,x),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ts:return x=cl(h.type,h.key,h.props,null,y.mode,x),x.ref=Dr(y,null,h),x.return=y,x;case nr:return h=Mo(h,y.mode,x),h.return=y,h;case un:var N=h._init;return p(y,N(h._payload),x)}if(Br(h)||Rr(h))return h=Un(h,y.mode,x,null),h.return=y,h;Hs(y,h)}return null}function m(y,h,x,N){var b=h!==null?h.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:i(y,h,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ts:return x.key===b?c(y,h,x,N):null;case nr:return x.key===b?u(y,h,x,N):null;case un:return b=x._init,m(y,h,b(x._payload),N)}if(Br(x)||Rr(x))return b!==null?null:f(y,h,x,N,null);Hs(y,x)}return null}function v(y,h,x,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(x)||null,i(h,y,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ts:return y=y.get(N.key===null?x:N.key)||null,c(h,y,N,b);case nr:return y=y.get(N.key===null?x:N.key)||null,u(h,y,N,b);case un:var j=N._init;return v(y,h,x,j(N._payload),b)}if(Br(N)||Rr(N))return y=y.get(x)||null,f(h,y,N,b,null);Hs(h,N)}return null}function w(y,h,x,N){for(var b=null,j=null,k=h,I=h=0,R=null;k!==null&&I<x.length;I++){k.index>I?(R=k,k=null):R=k.sibling;var L=m(y,k,x[I],N);if(L===null){k===null&&(k=R);break}e&&k&&L.alternate===null&&t(y,k),h=o(L,h,I),j===null?b=L:j.sibling=L,j=L,k=R}if(I===x.length)return n(y,k),Ee&&zn(y,I),b;if(k===null){for(;I<x.length;I++)k=p(y,x[I],N),k!==null&&(h=o(k,h,I),j===null?b=k:j.sibling=k,j=k);return Ee&&zn(y,I),b}for(k=r(y,k);I<x.length;I++)R=v(k,y,I,x[I],N),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?I:R.key),h=o(R,h,I),j===null?b=R:j.sibling=R,j=R);return e&&k.forEach(function(z){return t(y,z)}),Ee&&zn(y,I),b}function g(y,h,x,N){var b=Rr(x);if(typeof b!="function")throw Error(F(150));if(x=b.call(x),x==null)throw Error(F(151));for(var j=b=null,k=h,I=h=0,R=null,L=x.next();k!==null&&!L.done;I++,L=x.next()){k.index>I?(R=k,k=null):R=k.sibling;var z=m(y,k,L.value,N);if(z===null){k===null&&(k=R);break}e&&k&&z.alternate===null&&t(y,k),h=o(z,h,I),j===null?b=z:j.sibling=z,j=z,k=R}if(L.done)return n(y,k),Ee&&zn(y,I),b;if(k===null){for(;!L.done;I++,L=x.next())L=p(y,L.value,N),L!==null&&(h=o(L,h,I),j===null?b=L:j.sibling=L,j=L);return Ee&&zn(y,I),b}for(k=r(y,k);!L.done;I++,L=x.next())L=v(k,y,I,L.value,N),L!==null&&(e&&L.alternate!==null&&k.delete(L.key===null?I:L.key),h=o(L,h,I),j===null?b=L:j.sibling=L,j=L);return e&&k.forEach(function(X){return t(y,X)}),Ee&&zn(y,I),b}function S(y,h,x,N){if(typeof x=="object"&&x!==null&&x.type===rr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ts:e:{for(var b=x.key,j=h;j!==null;){if(j.key===b){if(b=x.type,b===rr){if(j.tag===7){n(y,j.sibling),h=s(j,x.props.children),h.return=y,y=h;break e}}else if(j.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===un&&Pc(b)===j.type){n(y,j.sibling),h=s(j,x.props),h.ref=Dr(y,j,x),h.return=y,y=h;break e}n(y,j);break}else t(y,j);j=j.sibling}x.type===rr?(h=Un(x.props.children,y.mode,N,x.key),h.return=y,y=h):(N=cl(x.type,x.key,x.props,null,y.mode,N),N.ref=Dr(y,h,x),N.return=y,y=N)}return a(y);case nr:e:{for(j=x.key;h!==null;){if(h.key===j)if(h.tag===4&&h.stateNode.containerInfo===x.containerInfo&&h.stateNode.implementation===x.implementation){n(y,h.sibling),h=s(h,x.children||[]),h.return=y,y=h;break e}else{n(y,h);break}else t(y,h);h=h.sibling}h=Mo(x,y.mode,N),h.return=y,y=h}return a(y);case un:return j=x._init,S(y,h,j(x._payload),N)}if(Br(x))return w(y,h,x,N);if(Rr(x))return g(y,h,x,N);Hs(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,h!==null&&h.tag===6?(n(y,h.sibling),h=s(h,x),h.return=y,y=h):(n(y,h),h=Po(x,y.mode,N),h.return=y,y=h),a(y)):n(y,h)}return S}var jr=Gd(!0),Vd=Gd(!1),Il=Pn(null),bl=null,dr=null,ai=null;function ii(){ai=dr=bl=null}function ci(e){var t=Il.current;Ae(Il),e._currentValue=t}function ga(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vr(e,t){bl=e,ai=dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(ai!==e)if(e={context:e,memoizedValue:t,next:null},dr===null){if(bl===null)throw Error(F(308));dr=e,bl.dependencies={lanes:0,firstContext:e}}else dr=dr.next=e;return t}var Dn=null;function ui(e){Dn===null?Dn=[e]:Dn.push(e)}function Yd(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ui(t)):(n.next=s.next,s.next=n),t.interleaved=n,rn(e,r)}function rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dn=!1;function di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,rn(e,n)}return s=r.interleaved,s===null?(t.next=t,ui(r)):(t.next=s.next,s.next=t),r.interleaved=t,rn(e,n)}function rl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xa(e,n)}}function Mc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function kl(e,t,n,r){var s=e.updateQueue;dn=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,i=f.lastBaseUpdate,i!==a&&(i===null?f.firstBaseUpdate=u:i.next=u,f.lastBaseUpdate=c))}if(o!==null){var p=s.baseState;a=0,f=u=c=null,i=o;do{var m=i.lane,v=i.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:v,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,g=i;switch(m=t,v=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){p=w.call(v,p,m);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,m=typeof w=="function"?w.call(v,p,m):w,m==null)break e;p=Re({},p,m);break e;case 2:dn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[i]:m.push(i))}else v={eventTime:v,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},f===null?(u=f=v,c=p):f=f.next=v,a|=m;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;m=i,i=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Yn|=a,e.lanes=a,e.memoizedState=p}}function Tc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var ks={},Vt=Pn(ks),fs=Pn(ks),ms=Pn(ks);function $n(e){if(e===ks)throw Error(F(174));return e}function fi(e,t){switch(ke(ms,t),ke(fs,e),ke(Vt,ks),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xo(t,e)}Ae(Vt),ke(Vt,t)}function Ir(){Ae(Vt),Ae(fs),Ae(ms)}function Wd(e){$n(ms.current);var t=$n(Vt.current),n=Xo(t,e.type);t!==n&&(ke(fs,e),ke(Vt,n))}function mi(e){fs.current===e&&(Ae(Vt),Ae(fs))}var Me=Pn(0);function Cl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Io=[];function hi(){for(var e=0;e<Io.length;e++)Io[e]._workInProgressVersionPrimary=null;Io.length=0}var sl=ln.ReactCurrentDispatcher,bo=ln.ReactCurrentBatchConfig,Vn=0,Te=null,Ue=null,Ye=null,Al=!1,Xr=!1,hs=0,sp=0;function Ze(){throw Error(F(321))}function pi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_t(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,s,o){if(Vn=o,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sl.current=e===null||e.memoizedState===null?ip:cp,e=n(r,s),Xr){o=0;do{if(Xr=!1,hs=0,25<=o)throw Error(F(301));o+=1,Ye=Ue=null,t.updateQueue=null,sl.current=up,e=n(r,s)}while(Xr)}if(sl.current=El,t=Ue!==null&&Ue.next!==null,Vn=0,Ye=Ue=Te=null,Al=!1,t)throw Error(F(300));return e}function xi(){var e=hs!==0;return hs=0,e}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Te.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Pt(){if(Ue===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Ye===null?Te.memoizedState:Ye.next;if(t!==null)Ye=t,Ue=e;else{if(e===null)throw Error(F(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ye===null?Te.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function ps(e,t){return typeof t=="function"?t(e):t}function ko(e){var t=Pt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=Ue,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,u=o;do{var f=u.lane;if((Vn&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=p,a=r):c=c.next=p,Te.lanes|=f,Yn|=f}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=i,_t(r,t.memoizedState)||(ft=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Te.lanes|=o,Yn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Co(e){var t=Pt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);_t(o,t.memoizedState)||(ft=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function qd(){}function Xd(e,t){var n=Te,r=Pt(),s=t(),o=!_t(r.memoizedState,s);if(o&&(r.memoizedState=s,ft=!0),r=r.queue,vi(Zd.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,gs(9,Jd.bind(null,n,r,s,t),void 0,null),Qe===null)throw Error(F(349));Vn&30||Kd(n,t,s)}return s}function Kd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jd(e,t,n,r){t.value=n,t.getSnapshot=r,ef(t)&&tf(e)}function Zd(e,t,n){return n(function(){ef(t)&&tf(e)})}function ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_t(e,n)}catch{return!0}}function tf(e){var t=rn(e,1);t!==null&&Ot(t,e,1,-1)}function Rc(e){var t=Ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t.queue=e,e=e.dispatch=ap.bind(null,Te,e),[t.memoizedState,e]}function gs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nf(){return Pt().memoizedState}function ll(e,t,n,r){var s=Ut();Te.flags|=e,s.memoizedState=gs(1|t,n,void 0,r===void 0?null:r)}function Gl(e,t,n,r){var s=Pt();r=r===void 0?null:r;var o=void 0;if(Ue!==null){var a=Ue.memoizedState;if(o=a.destroy,r!==null&&pi(r,a.deps)){s.memoizedState=gs(t,n,o,r);return}}Te.flags|=e,s.memoizedState=gs(1|t,n,o,r)}function Lc(e,t){return ll(8390656,8,e,t)}function vi(e,t){return Gl(2048,8,e,t)}function rf(e,t){return Gl(4,2,e,t)}function sf(e,t){return Gl(4,4,e,t)}function lf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function of(e,t,n){return n=n!=null?n.concat([e]):null,Gl(4,4,lf.bind(null,t,e),n)}function yi(){}function af(e,t){var n=Pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cf(e,t){var n=Pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uf(e,t,n){return Vn&21?(_t(n,t)||(n=hd(),Te.lanes|=n,Yn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function lp(e,t){var n=Ne;Ne=n!==0&&4>n?n:4,e(!0);var r=bo.transition;bo.transition={};try{e(!1),t()}finally{Ne=n,bo.transition=r}}function df(){return Pt().memoizedState}function op(e,t,n){var r=jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ff(e))mf(t,n);else if(n=Yd(e,t,n,r),n!==null){var s=at();Ot(n,e,r,s),hf(n,t,r)}}function ap(e,t,n){var r=jn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ff(e))mf(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,_t(i,a)){var c=t.interleaved;c===null?(s.next=s,ui(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Yd(e,t,s,r),n!==null&&(s=at(),Ot(n,e,r,s),hf(n,t,r))}}function ff(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function mf(e,t){Xr=Al=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xa(e,n)}}var El={readContext:Et,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},ip={readContext:Et,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:Lc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ll(4194308,4,lf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ll(4194308,4,e,t)},useInsertionEffect:function(e,t){return ll(4,2,e,t)},useMemo:function(e,t){var n=Ut();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ut();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=op.bind(null,Te,e),[r.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:Rc,useDebugValue:yi,useDeferredValue:function(e){return Ut().memoizedState=e},useTransition:function(){var e=Rc(!1),t=e[0];return e=lp.bind(null,e[1]),Ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Te,s=Ut();if(Ee){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),Qe===null)throw Error(F(349));Vn&30||Kd(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Lc(Zd.bind(null,r,o,e),[e]),r.flags|=2048,gs(9,Jd.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ut(),t=Qe.identifierPrefix;if(Ee){var n=Jt,r=Kt;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cp={readContext:Et,useCallback:af,useContext:Et,useEffect:vi,useImperativeHandle:of,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:ko,useRef:nf,useState:function(){return ko(ps)},useDebugValue:yi,useDeferredValue:function(e){var t=Pt();return uf(t,Ue.memoizedState,e)},useTransition:function(){var e=ko(ps)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Xd,useId:df,unstable_isNewReconciler:!1},up={readContext:Et,useCallback:af,useContext:Et,useEffect:vi,useImperativeHandle:of,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:Co,useRef:nf,useState:function(){return Co(ps)},useDebugValue:yi,useDeferredValue:function(e){var t=Pt();return Ue===null?t.memoizedState=e:uf(t,Ue.memoizedState,e)},useTransition:function(){var e=Co(ps)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Xd,useId:df,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function xa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vl={isMounted:function(e){return(e=e._reactInternals)?Jn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=at(),s=jn(e),o=Zt(r,s);o.payload=t,n!=null&&(o.callback=n),t=Sn(e,o,s),t!==null&&(Ot(t,e,s,r),rl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=at(),s=jn(e),o=Zt(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Sn(e,o,s),t!==null&&(Ot(t,e,s,r),rl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=at(),r=jn(e),s=Zt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Sn(e,s,r),t!==null&&(Ot(t,e,r,n),rl(t,e,r))}};function zc(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!is(n,r)||!is(s,o):!0}function pf(e,t,n){var r=!1,s=Cn,o=t.contextType;return typeof o=="object"&&o!==null?o=Et(o):(s=ht(t)?Hn:rt.current,r=t.contextTypes,o=(r=r!=null)?Sr(e,s):Cn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Oc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vl.enqueueReplaceState(t,t.state,null)}function va(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},di(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Et(o):(o=ht(t)?Hn:rt.current,s.context=Sr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(xa(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vl.enqueueReplaceState(s,s.state,null),kl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function br(e,t){try{var n="",r=t;do n+=Dm(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Ao(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ya(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dp=typeof WeakMap=="function"?WeakMap:Map;function gf(e,t,n){n=Zt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ml||(Ml=!0,Ea=r),ya(e,t)},n}function xf(e,t,n){n=Zt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ya(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ya(e,t),typeof r!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function _c(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new dp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=bp.bind(null,e,t,n),t.then(e,e))}function Dc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $c(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zt(-1,1),t.tag=2,Sn(n,t,1))),n.lanes|=1),e)}var fp=ln.ReactCurrentOwner,ft=!1;function ot(e,t,n,r){t.child=e===null?Vd(t,null,n,r):jr(t,e.child,n,r)}function Fc(e,t,n,r,s){n=n.render;var o=t.ref;return vr(t,s),r=gi(e,t,n,r,o,s),n=xi(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,sn(e,t,s)):(Ee&&n&&si(t),t.flags|=1,ot(e,t,r,s),t.child)}function Uc(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Ci(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,vf(e,t,o,r,s)):(e=cl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:is,n(a,r)&&e.ref===t.ref)return sn(e,t,s)}return t.flags|=1,e=In(o,r),e.ref=t.ref,e.return=t,t.child=e}function vf(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(is(o,r)&&e.ref===t.ref)if(ft=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,sn(e,t,s)}return wa(e,t,n,r,s)}function yf(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(mr,vt),vt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(mr,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ke(mr,vt),vt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ke(mr,vt),vt|=r;return ot(e,t,s,n),t.child}function wf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wa(e,t,n,r,s){var o=ht(n)?Hn:rt.current;return o=Sr(t,o),vr(t,s),n=gi(e,t,n,r,o,s),r=xi(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,sn(e,t,s)):(Ee&&r&&si(t),t.flags|=1,ot(e,t,n,s),t.child)}function Bc(e,t,n,r,s){if(ht(n)){var o=!0;Sl(t)}else o=!1;if(vr(t,s),t.stateNode===null)ol(e,t),pf(t,n,r),va(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Et(u):(u=ht(n)?Hn:rt.current,u=Sr(t,u));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&Oc(t,a,r,u),dn=!1;var m=t.memoizedState;a.state=m,kl(t,r,a,s),c=t.memoizedState,i!==r||m!==c||mt.current||dn?(typeof f=="function"&&(xa(t,n,f,r),c=t.memoizedState),(i=dn||zc(t,n,i,r,m,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Qd(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Tt(t.type,i),a.props=u,p=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=ht(n)?Hn:rt.current,c=Sr(t,c));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||m!==c)&&Oc(t,a,r,c),dn=!1,m=t.memoizedState,a.state=m,kl(t,r,a,s);var w=t.memoizedState;i!==p||m!==w||mt.current||dn?(typeof v=="function"&&(xa(t,n,v,r),w=t.memoizedState),(u=dn||zc(t,n,u,r,m,w,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Sa(e,t,n,r,o,s)}function Sa(e,t,n,r,s,o){wf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Cc(t,n,!1),sn(e,t,o);r=t.stateNode,fp.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=jr(t,e.child,null,o),t.child=jr(t,null,i,o)):ot(e,t,i,o),t.memoizedState=r.state,s&&Cc(t,n,!0),t.child}function Sf(e){var t=e.stateNode;t.pendingContext?kc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kc(e,t.context,!1),fi(e,t.containerInfo)}function Hc(e,t,n,r,s){return Nr(),oi(s),t.flags|=256,ot(e,t,n,r),t.child}var Na={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nf(e,t,n){var r=t.pendingProps,s=Me.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ke(Me,s&1),e===null)return pa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Wl(a,r,0,null),e=Un(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ja(n),t.memoizedState=Na,e):wi(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return mp(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=In(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=In(i,o):(o=Un(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ja(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Na,r}return o=e.child,e=o.sibling,r=In(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wi(e,t){return t=Wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gs(e,t,n,r){return r!==null&&oi(r),jr(t,e.child,null,n),e=wi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mp(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Ao(Error(F(422))),Gs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Wl({mode:"visible",children:r.children},s,0,null),o=Un(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&jr(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Na,o);if(!(t.mode&1))return Gs(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(F(419)),r=Ao(o,r,void 0),Gs(e,t,a,r)}if(i=(a&e.childLanes)!==0,ft||i){if(r=Qe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,rn(e,s),Ot(r,e,s,-1))}return ki(),r=Ao(Error(F(421))),Gs(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=kp.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,yt=wn(s.nextSibling),wt=t,Ee=!0,Lt=null,e!==null&&(bt[kt++]=Kt,bt[kt++]=Jt,bt[kt++]=Gn,Kt=e.id,Jt=e.overflow,Gn=t),t=wi(t,r.children),t.flags|=4096,t)}function Gc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ga(e.return,t,n)}function Eo(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function jf(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ot(e,t,r.children,n),r=Me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gc(e,n,t);else if(e.tag===19)Gc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ke(Me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Cl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Eo(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Cl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Eo(t,!0,n,null,o);break;case"together":Eo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ol(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=In(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=In(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hp(e,t,n){switch(t.tag){case 3:Sf(t),Nr();break;case 5:Wd(t);break;case 1:ht(t.type)&&Sl(t);break;case 4:fi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ke(Il,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ke(Me,Me.current&1),t.flags|=128,null):n&t.child.childLanes?Nf(e,t,n):(ke(Me,Me.current&1),e=sn(e,t,n),e!==null?e.sibling:null);ke(Me,Me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return jf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Me,Me.current),r)break;return null;case 22:case 23:return t.lanes=0,yf(e,t,n)}return sn(e,t,n)}var If,Ia,bf,kf;If=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ia=function(){};bf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,$n(Vt.current);var o=null;switch(n){case"input":s=Yo(e,s),r=Yo(e,r),o=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),o=[];break;case"textarea":s=qo(e,s),r=qo(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=yl)}Ko(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ts.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(i=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ts.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ce("scroll",e),o||i===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};kf=function(e,t,n,r){n!==r&&(t.flags|=4)};function $r(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pp(e,t,n){var r=t.pendingProps;switch(li(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return ht(t.type)&&wl(),et(t),null;case 3:return r=t.stateNode,Ir(),Ae(mt),Ae(rt),hi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Lt!==null&&(Ta(Lt),Lt=null))),Ia(e,t),et(t),null;case 5:mi(t);var s=$n(ms.current);if(n=t.type,e!==null&&t.stateNode!=null)bf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(F(166));return et(t),null}if(e=$n(Vt.current),Bs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Bt]=t,r[ds]=o,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<Gr.length;s++)Ce(Gr[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Zi(r,o),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ce("invalid",r);break;case"textarea":tc(r,o),Ce("invalid",r)}Ko(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&Us(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Us(r.textContent,i,e),s=["children",""+i]):ts.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Rs(r),ec(r,o,!0);break;case"textarea":Rs(r),nc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=yl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Bt]=t,e[ds]=r,If(e,t,!1,!1),t.stateNode=e;e:{switch(a=Jo(n,r),n){case"dialog":Ce("cancel",e),Ce("close",e),s=r;break;case"iframe":case"object":case"embed":Ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<Gr.length;s++)Ce(Gr[s],e);s=r;break;case"source":Ce("error",e),s=r;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),s=r;break;case"details":Ce("toggle",e),s=r;break;case"input":Zi(e,r),s=Yo(e,r),Ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Ce("invalid",e);break;case"textarea":tc(e,r),s=qo(e,r),Ce("invalid",e);break;default:s=r}Ko(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?nd(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ed(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ns(e,c):typeof c=="number"&&ns(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ts.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ce("scroll",e):c!=null&&Ga(e,o,c,a))}switch(n){case"input":Rs(e),ec(e,r,!1);break;case"textarea":Rs(e),nc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?hr(e,!!r.multiple,o,!1):r.defaultValue!=null&&hr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)kf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(F(166));if(n=$n(ms.current),$n(Vt.current),Bs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bt]=t,(o=r.nodeValue!==n)&&(e=wt,e!==null))switch(e.tag){case 3:Us(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Us(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bt]=t,t.stateNode=r}return et(t),null;case 13:if(Ae(Me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&yt!==null&&t.mode&1&&!(t.flags&128))Hd(),Nr(),t.flags|=98560,o=!1;else if(o=Bs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(F(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(F(317));o[Bt]=t}else Nr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),o=!1}else Lt!==null&&(Ta(Lt),Lt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?Be===0&&(Be=3):ki())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return Ir(),Ia(e,t),e===null&&cs(t.stateNode.containerInfo),et(t),null;case 10:return ci(t.type._context),et(t),null;case 17:return ht(t.type)&&wl(),et(t),null;case 19:if(Ae(Me),o=t.memoizedState,o===null)return et(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)$r(o,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Cl(e),a!==null){for(t.flags|=128,$r(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ke(Me,Me.current&1|2),t.child}e=e.sibling}o.tail!==null&&ze()>kr&&(t.flags|=128,r=!0,$r(o,!1),t.lanes=4194304)}else{if(!r)if(e=Cl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$r(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ee)return et(t),null}else 2*ze()-o.renderingStartTime>kr&&n!==1073741824&&(t.flags|=128,r=!0,$r(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ze(),t.sibling=null,n=Me.current,ke(Me,r?n&1|2:n&1),t):(et(t),null);case 22:case 23:return bi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?vt&1073741824&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function gp(e,t){switch(li(t),t.tag){case 1:return ht(t.type)&&wl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ir(),Ae(mt),Ae(rt),hi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mi(t),null;case 13:if(Ae(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Me),null;case 4:return Ir(),null;case 10:return ci(t.type._context),null;case 22:case 23:return bi(),null;case 24:return null;default:return null}}var Vs=!1,tt=!1,xp=typeof WeakSet=="function"?WeakSet:Set,ee=null;function fr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(e,t,r)}else n.current=null}function ba(e,t,n){try{n()}catch(r){Le(e,t,r)}}var Vc=!1;function vp(e,t){if(ia=gl,e=Pd(),ri(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,c=-1,u=0,f=0,p=e,m=null;t:for(;;){for(var v;p!==n||s!==0&&p.nodeType!==3||(i=a+s),p!==o||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===e)break t;if(m===n&&++u===s&&(i=a),m===o&&++f===r&&(c=a),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ca={focusedElem:e,selectionRange:n},gl=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,S=w.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Tt(t.type,g),S);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(N){Le(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return w=Vc,Vc=!1,w}function Kr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&ba(t,n,o)}s=s.next}while(s!==r)}}function Yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ka(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cf(e){var t=e.alternate;t!==null&&(e.alternate=null,Cf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[ds],delete t[fa],delete t[ep],delete t[tp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Af(e){return e.tag===5||e.tag===3||e.tag===4}function Yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Af(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ca(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yl));else if(r!==4&&(e=e.child,e!==null))for(Ca(e,t,n),e=e.sibling;e!==null;)Ca(e,t,n),e=e.sibling}function Aa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Aa(e,t,n),e=e.sibling;e!==null;)Aa(e,t,n),e=e.sibling}var qe=null,Rt=!1;function cn(e,t,n){for(n=n.child;n!==null;)Ef(e,t,n),n=n.sibling}function Ef(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Dl,n)}catch{}switch(n.tag){case 5:tt||fr(n,t);case 6:var r=qe,s=Rt;qe=null,cn(e,t,n),qe=r,Rt=s,qe!==null&&(Rt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Rt?(e=qe,n=n.stateNode,e.nodeType===8?No(e.parentNode,n):e.nodeType===1&&No(e,n),os(e)):No(qe,n.stateNode));break;case 4:r=qe,s=Rt,qe=n.stateNode.containerInfo,Rt=!0,cn(e,t,n),qe=r,Rt=s;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ba(n,t,a),s=s.next}while(s!==r)}cn(e,t,n);break;case 1:if(!tt&&(fr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Le(n,t,i)}cn(e,t,n);break;case 21:cn(e,t,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,cn(e,t,n),tt=r):cn(e,t,n);break;default:cn(e,t,n)}}function Qc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xp),t.forEach(function(r){var s=Cp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:qe=i.stateNode,Rt=!1;break e;case 3:qe=i.stateNode.containerInfo,Rt=!0;break e;case 4:qe=i.stateNode.containerInfo,Rt=!0;break e}i=i.return}if(qe===null)throw Error(F(160));Ef(o,a,s),qe=null,Rt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Le(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pf(t,e),t=t.sibling}function Pf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),$t(e),r&4){try{Kr(3,e,e.return),Yl(3,e)}catch(g){Le(e,e.return,g)}try{Kr(5,e,e.return)}catch(g){Le(e,e.return,g)}}break;case 1:Mt(t,e),$t(e),r&512&&n!==null&&fr(n,n.return);break;case 5:if(Mt(t,e),$t(e),r&512&&n!==null&&fr(n,n.return),e.flags&32){var s=e.stateNode;try{ns(s,"")}catch(g){Le(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&Ku(s,o),Jo(i,a);var u=Jo(i,o);for(a=0;a<c.length;a+=2){var f=c[a],p=c[a+1];f==="style"?nd(s,p):f==="dangerouslySetInnerHTML"?ed(s,p):f==="children"?ns(s,p):Ga(s,f,p,u)}switch(i){case"input":Qo(s,o);break;case"textarea":Ju(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?hr(s,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?hr(s,!!o.multiple,o.defaultValue,!0):hr(s,!!o.multiple,o.multiple?[]:"",!1))}s[ds]=o}catch(g){Le(e,e.return,g)}}break;case 6:if(Mt(t,e),$t(e),r&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){Le(e,e.return,g)}}break;case 3:if(Mt(t,e),$t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{os(t.containerInfo)}catch(g){Le(e,e.return,g)}break;case 4:Mt(t,e),$t(e);break;case 13:Mt(t,e),$t(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(ji=ze())),r&4&&Qc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(tt=(u=tt)||f,Mt(t,e),tt=u):Mt(t,e),$t(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ee=e,f=e.child;f!==null;){for(p=ee=f;ee!==null;){switch(m=ee,v=m.child,m.tag){case 0:case 11:case 14:case 15:Kr(4,m,m.return);break;case 1:fr(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(g){Le(r,n,g)}}break;case 5:fr(m,m.return);break;case 22:if(m.memoizedState!==null){qc(p);continue}}v!==null?(v.return=m,ee=v):qc(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=td("display",a))}catch(g){Le(e,e.return,g)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){Le(e,e.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Mt(t,e),$t(e),r&4&&Qc(e);break;case 21:break;default:Mt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Af(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ns(s,""),r.flags&=-33);var o=Yc(e);Aa(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Yc(e);Ca(e,i,a);break;default:throw Error(F(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yp(e,t,n){ee=e,Mf(e)}function Mf(e,t,n){for(var r=(e.mode&1)!==0;ee!==null;){var s=ee,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Vs;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||tt;i=Vs;var u=tt;if(Vs=a,(tt=c)&&!u)for(ee=s;ee!==null;)a=ee,c=a.child,a.tag===22&&a.memoizedState!==null?Xc(s):c!==null?(c.return=a,ee=c):Xc(s);for(;o!==null;)ee=o,Mf(o),o=o.sibling;ee=s,Vs=i,tt=u}Wc(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ee=o):Wc(e)}}function Wc(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tt||Yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!tt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Tc(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tc(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&os(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}tt||t.flags&512&&ka(t)}catch(m){Le(t,t.return,m)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function qc(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function Xc(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yl(4,t)}catch(c){Le(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Le(t,s,c)}}var o=t.return;try{ka(t)}catch(c){Le(t,o,c)}break;case 5:var a=t.return;try{ka(t)}catch(c){Le(t,a,c)}}}catch(c){Le(t,t.return,c)}if(t===e){ee=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ee=i;break}ee=t.return}}var wp=Math.ceil,Pl=ln.ReactCurrentDispatcher,Si=ln.ReactCurrentOwner,At=ln.ReactCurrentBatchConfig,ye=0,Qe=null,De=null,Xe=0,vt=0,mr=Pn(0),Be=0,xs=null,Yn=0,Ql=0,Ni=0,Jr=null,dt=null,ji=0,kr=1/0,qt=null,Ml=!1,Ea=null,Nn=null,Ys=!1,pn=null,Tl=0,Zr=0,Pa=null,al=-1,il=0;function at(){return ye&6?ze():al!==-1?al:al=ze()}function jn(e){return e.mode&1?ye&2&&Xe!==0?Xe&-Xe:rp.transition!==null?(il===0&&(il=hd()),il):(e=Ne,e!==0||(e=window.event,e=e===void 0?16:Sd(e.type)),e):1}function Ot(e,t,n,r){if(50<Zr)throw Zr=0,Pa=null,Error(F(185));js(e,n,r),(!(ye&2)||e!==Qe)&&(e===Qe&&(!(ye&2)&&(Ql|=n),Be===4&&mn(e,Xe)),pt(e,r),n===1&&ye===0&&!(t.mode&1)&&(kr=ze()+500,Hl&&Mn()))}function pt(e,t){var n=e.callbackNode;rh(e,t);var r=pl(e,e===Qe?Xe:0);if(r===0)n!==null&&lc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lc(n),t===1)e.tag===0?np(Kc.bind(null,e)):Fd(Kc.bind(null,e)),Jh(function(){!(ye&6)&&Mn()}),n=null;else{switch(pd(r)){case 1:n=qa;break;case 4:n=fd;break;case 16:n=hl;break;case 536870912:n=md;break;default:n=hl}n=$f(n,Tf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Tf(e,t){if(al=-1,il=0,ye&6)throw Error(F(327));var n=e.callbackNode;if(yr()&&e.callbackNode!==n)return null;var r=pl(e,e===Qe?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Rl(e,r);else{t=r;var s=ye;ye|=2;var o=Lf();(Qe!==e||Xe!==t)&&(qt=null,kr=ze()+500,Fn(e,t));do try{jp();break}catch(i){Rf(e,i)}while(!0);ii(),Pl.current=o,ye=s,De!==null?t=0:(Qe=null,Xe=0,t=Be)}if(t!==0){if(t===2&&(s=ra(e),s!==0&&(r=s,t=Ma(e,s))),t===1)throw n=xs,Fn(e,0),mn(e,r),pt(e,ze()),n;if(t===6)mn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Sp(s)&&(t=Rl(e,r),t===2&&(o=ra(e),o!==0&&(r=o,t=Ma(e,o))),t===1))throw n=xs,Fn(e,0),mn(e,r),pt(e,ze()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(F(345));case 2:On(e,dt,qt);break;case 3:if(mn(e,r),(r&130023424)===r&&(t=ji+500-ze(),10<t)){if(pl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){at(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=da(On.bind(null,e,dt,qt),t);break}On(e,dt,qt);break;case 4:if(mn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-zt(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wp(r/1960))-r,10<r){e.timeoutHandle=da(On.bind(null,e,dt,qt),r);break}On(e,dt,qt);break;case 5:On(e,dt,qt);break;default:throw Error(F(329))}}}return pt(e,ze()),e.callbackNode===n?Tf.bind(null,e):null}function Ma(e,t){var n=Jr;return e.current.memoizedState.isDehydrated&&(Fn(e,t).flags|=256),e=Rl(e,t),e!==2&&(t=dt,dt=n,t!==null&&Ta(t)),e}function Ta(e){dt===null?dt=e:dt.push.apply(dt,e)}function Sp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!_t(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mn(e,t){for(t&=~Ni,t&=~Ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function Kc(e){if(ye&6)throw Error(F(327));yr();var t=pl(e,0);if(!(t&1))return pt(e,ze()),null;var n=Rl(e,t);if(e.tag!==0&&n===2){var r=ra(e);r!==0&&(t=r,n=Ma(e,r))}if(n===1)throw n=xs,Fn(e,0),mn(e,t),pt(e,ze()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,On(e,dt,qt),pt(e,ze()),null}function Ii(e,t){var n=ye;ye|=1;try{return e(t)}finally{ye=n,ye===0&&(kr=ze()+500,Hl&&Mn())}}function Qn(e){pn!==null&&pn.tag===0&&!(ye&6)&&yr();var t=ye;ye|=1;var n=At.transition,r=Ne;try{if(At.transition=null,Ne=1,e)return e()}finally{Ne=r,At.transition=n,ye=t,!(ye&6)&&Mn()}}function bi(){vt=mr.current,Ae(mr)}function Fn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kh(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(li(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wl();break;case 3:Ir(),Ae(mt),Ae(rt),hi();break;case 5:mi(r);break;case 4:Ir();break;case 13:Ae(Me);break;case 19:Ae(Me);break;case 10:ci(r.type._context);break;case 22:case 23:bi()}n=n.return}if(Qe=e,De=e=In(e.current,null),Xe=vt=t,Be=0,xs=null,Ni=Ql=Yn=0,dt=Jr=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Dn=null}return e}function Rf(e,t){do{var n=De;try{if(ii(),sl.current=El,Al){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Al=!1}if(Vn=0,Ye=Ue=Te=null,Xr=!1,hs=0,Si.current=null,n===null||n.return===null){Be=1,xs=t,De=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=Xe,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=i,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Dc(a);if(v!==null){v.flags&=-257,$c(v,a,i,o,t),v.mode&1&&_c(o,u,t),t=v,c=u;var w=t.updateQueue;if(w===null){var g=new Set;g.add(c),t.updateQueue=g}else w.add(c);break e}else{if(!(t&1)){_c(o,u,t),ki();break e}c=Error(F(426))}}else if(Ee&&i.mode&1){var S=Dc(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),$c(S,a,i,o,t),oi(br(c,i));break e}}o=c=br(c,i),Be!==4&&(Be=2),Jr===null?Jr=[o]:Jr.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=gf(o,c,t);Mc(o,y);break e;case 1:i=c;var h=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Nn===null||!Nn.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=xf(o,i,t);Mc(o,N);break e}}o=o.return}while(o!==null)}Of(n)}catch(b){t=b,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function Lf(){var e=Pl.current;return Pl.current=El,e===null?El:e}function ki(){(Be===0||Be===3||Be===2)&&(Be=4),Qe===null||!(Yn&268435455)&&!(Ql&268435455)||mn(Qe,Xe)}function Rl(e,t){var n=ye;ye|=2;var r=Lf();(Qe!==e||Xe!==t)&&(qt=null,Fn(e,t));do try{Np();break}catch(s){Rf(e,s)}while(!0);if(ii(),ye=n,Pl.current=r,De!==null)throw Error(F(261));return Qe=null,Xe=0,Be}function Np(){for(;De!==null;)zf(De)}function jp(){for(;De!==null&&!Wm();)zf(De)}function zf(e){var t=Df(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Of(e):De=t,Si.current=null}function Of(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gp(n,t),n!==null){n.flags&=32767,De=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,De=null;return}}else if(n=pp(n,t,vt),n!==null){De=n;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Be===0&&(Be=5)}function On(e,t,n){var r=Ne,s=At.transition;try{At.transition=null,Ne=1,Ip(e,t,n,r)}finally{At.transition=s,Ne=r}return null}function Ip(e,t,n,r){do yr();while(pn!==null);if(ye&6)throw Error(F(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(sh(e,o),e===Qe&&(De=Qe=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ys||(Ys=!0,$f(hl,function(){return yr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=At.transition,At.transition=null;var a=Ne;Ne=1;var i=ye;ye|=4,Si.current=null,vp(e,n),Pf(n,e),Gh(ca),gl=!!ia,ca=ia=null,e.current=n,yp(n),qm(),ye=i,Ne=a,At.transition=o}else e.current=n;if(Ys&&(Ys=!1,pn=e,Tl=s),o=e.pendingLanes,o===0&&(Nn=null),Jm(n.stateNode),pt(e,ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ml)throw Ml=!1,e=Ea,Ea=null,e;return Tl&1&&e.tag!==0&&yr(),o=e.pendingLanes,o&1?e===Pa?Zr++:(Zr=0,Pa=e):Zr=0,Mn(),null}function yr(){if(pn!==null){var e=pd(Tl),t=At.transition,n=Ne;try{if(At.transition=null,Ne=16>e?16:e,pn===null)var r=!1;else{if(e=pn,pn=null,Tl=0,ye&6)throw Error(F(331));var s=ye;for(ye|=4,ee=e.current;ee!==null;){var o=ee,a=o.child;if(ee.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(ee=u;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:Kr(8,f,o)}var p=f.child;if(p!==null)p.return=f,ee=p;else for(;ee!==null;){f=ee;var m=f.sibling,v=f.return;if(Cf(f),f===u){ee=null;break}if(m!==null){m.return=v,ee=m;break}ee=v}}}var w=o.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}ee=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ee=a;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Kr(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,ee=y;break e}ee=o.return}}var h=e.current;for(ee=h;ee!==null;){a=ee;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ee=x;else e:for(a=h;ee!==null;){if(i=ee,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Yl(9,i)}}catch(b){Le(i,i.return,b)}if(i===a){ee=null;break e}var N=i.sibling;if(N!==null){N.return=i.return,ee=N;break e}ee=i.return}}if(ye=s,Mn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Dl,e)}catch{}r=!0}return r}finally{Ne=n,At.transition=t}}return!1}function Jc(e,t,n){t=br(n,t),t=gf(e,t,1),e=Sn(e,t,1),t=at(),e!==null&&(js(e,1,t),pt(e,t))}function Le(e,t,n){if(e.tag===3)Jc(e,e,n);else for(;t!==null;){if(t.tag===3){Jc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nn===null||!Nn.has(r))){e=br(n,e),e=xf(t,e,1),t=Sn(t,e,1),e=at(),t!==null&&(js(t,1,e),pt(t,e));break}}t=t.return}}function bp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(Xe&n)===n&&(Be===4||Be===3&&(Xe&130023424)===Xe&&500>ze()-ji?Fn(e,0):Ni|=n),pt(e,t)}function _f(e,t){t===0&&(e.mode&1?(t=Os,Os<<=1,!(Os&130023424)&&(Os=4194304)):t=1);var n=at();e=rn(e,t),e!==null&&(js(e,t,n),pt(e,n))}function kp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_f(e,n)}function Cp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(t),_f(e,n)}var Df;Df=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ft=!1,hp(e,t,n);ft=!!(e.flags&131072)}else ft=!1,Ee&&t.flags&1048576&&Ud(t,jl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ol(e,t),e=t.pendingProps;var s=Sr(t,rt.current);vr(t,n),s=gi(null,t,r,e,s,n);var o=xi();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(r)?(o=!0,Sl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,di(t),s.updater=Vl,t.stateNode=s,s._reactInternals=t,va(t,r,e,n),t=Sa(null,t,r,!0,o,n)):(t.tag=0,Ee&&o&&si(t),ot(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ol(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Ep(r),e=Tt(r,e),s){case 0:t=wa(null,t,r,e,n);break e;case 1:t=Bc(null,t,r,e,n);break e;case 11:t=Fc(null,t,r,e,n);break e;case 14:t=Uc(null,t,r,Tt(r.type,e),n);break e}throw Error(F(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),wa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Bc(e,t,r,s,n);case 3:e:{if(Sf(t),e===null)throw Error(F(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Qd(e,t),kl(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=br(Error(F(423)),t),t=Hc(e,t,r,n,s);break e}else if(r!==s){s=br(Error(F(424)),t),t=Hc(e,t,r,n,s);break e}else for(yt=wn(t.stateNode.containerInfo.firstChild),wt=t,Ee=!0,Lt=null,n=Vd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nr(),r===s){t=sn(e,t,n);break e}ot(e,t,r,n)}t=t.child}return t;case 5:return Wd(t),e===null&&pa(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,ua(r,s)?a=null:o!==null&&ua(r,o)&&(t.flags|=32),wf(e,t),ot(e,t,a,n),t.child;case 6:return e===null&&pa(t),null;case 13:return Nf(e,t,n);case 4:return fi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=jr(t,null,r,n):ot(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Fc(e,t,r,s,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ke(Il,r._currentValue),r._currentValue=a,o!==null)if(_t(o.value,a)){if(o.children===s.children&&!mt.current){t=sn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Zt(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ga(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(F(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),ga(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}ot(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,vr(t,n),s=Et(s),r=r(s),t.flags|=1,ot(e,t,r,n),t.child;case 14:return r=t.type,s=Tt(r,t.pendingProps),s=Tt(r.type,s),Uc(e,t,r,s,n);case 15:return vf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),ol(e,t),t.tag=1,ht(r)?(e=!0,Sl(t)):e=!1,vr(t,n),pf(t,r,s),va(t,r,s,n),Sa(null,t,r,!0,e,n);case 19:return jf(e,t,n);case 22:return yf(e,t,n)}throw Error(F(156,t.tag))};function $f(e,t){return dd(e,t)}function Ap(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,r){return new Ap(e,t,n,r)}function Ci(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ep(e){if(typeof e=="function")return Ci(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ya)return 11;if(e===Qa)return 14}return 2}function In(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function cl(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Ci(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case rr:return Un(n.children,s,o,t);case Va:a=8,s|=8;break;case Bo:return e=Ct(12,n,t,s|2),e.elementType=Bo,e.lanes=o,e;case Ho:return e=Ct(13,n,t,s),e.elementType=Ho,e.lanes=o,e;case Go:return e=Ct(19,n,t,s),e.elementType=Go,e.lanes=o,e;case Wu:return Wl(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yu:a=10;break e;case Qu:a=9;break e;case Ya:a=11;break e;case Qa:a=14;break e;case un:a=16,r=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=Ct(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Un(e,t,n,r){return e=Ct(7,e,r,t),e.lanes=n,e}function Wl(e,t,n,r){return e=Ct(22,e,r,t),e.elementType=Wu,e.lanes=n,e.stateNode={isHidden:!1},e}function Po(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function Mo(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ai(e,t,n,r,s,o,a,i,c){return e=new Pp(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ct(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},di(o),e}function Mp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ff(e){if(!e)return Cn;e=e._reactInternals;e:{if(Jn(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(ht(n))return $d(e,n,t)}return t}function Uf(e,t,n,r,s,o,a,i,c){return e=Ai(n,r,!0,e,s,o,a,i,c),e.context=Ff(null),n=e.current,r=at(),s=jn(n),o=Zt(r,s),o.callback=t??null,Sn(n,o,s),e.current.lanes=s,js(e,s,r),pt(e,r),e}function ql(e,t,n,r){var s=t.current,o=at(),a=jn(s);return n=Ff(n),t.context===null?t.context=n:t.pendingContext=n,t=Zt(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Sn(s,t,a),e!==null&&(Ot(e,s,a,o),rl(e,s,a)),a}function Ll(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ei(e,t){Zc(e,t),(e=e.alternate)&&Zc(e,t)}function Tp(){return null}var Bf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pi(e){this._internalRoot=e}Xl.prototype.render=Pi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));ql(e,t,null,null)};Xl.prototype.unmount=Pi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qn(function(){ql(null,e,null,null)}),t[nn]=null}};function Xl(e){this._internalRoot=e}Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=vd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fn.length&&t!==0&&t<fn[n].priority;n++);fn.splice(n,0,e),n===0&&wd(e)}};function Mi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eu(){}function Rp(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Ll(a);o.call(u)}}var a=Uf(t,r,e,0,null,!1,!1,"",eu);return e._reactRootContainer=a,e[nn]=a.current,cs(e.nodeType===8?e.parentNode:e),Qn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var u=Ll(c);i.call(u)}}var c=Ai(e,0,!1,null,null,!1,!1,"",eu);return e._reactRootContainer=c,e[nn]=c.current,cs(e.nodeType===8?e.parentNode:e),Qn(function(){ql(t,c,n,r)}),c}function Jl(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=Ll(a);i.call(c)}}ql(t,a,e,s)}else a=Rp(n,t,e,s,r);return Ll(a)}gd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hr(t.pendingLanes);n!==0&&(Xa(t,n|1),pt(t,ze()),!(ye&6)&&(kr=ze()+500,Mn()))}break;case 13:Qn(function(){var r=rn(e,1);if(r!==null){var s=at();Ot(r,e,1,s)}}),Ei(e,1)}};Ka=function(e){if(e.tag===13){var t=rn(e,134217728);if(t!==null){var n=at();Ot(t,e,134217728,n)}Ei(e,134217728)}};xd=function(e){if(e.tag===13){var t=jn(e),n=rn(e,t);if(n!==null){var r=at();Ot(n,e,t,r)}Ei(e,t)}};vd=function(){return Ne};yd=function(e,t){var n=Ne;try{return Ne=e,t()}finally{Ne=n}};ea=function(e,t,n){switch(t){case"input":if(Qo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Bl(r);if(!s)throw Error(F(90));Xu(r),Qo(r,s)}}}break;case"textarea":Ju(e,n);break;case"select":t=n.value,t!=null&&hr(e,!!n.multiple,t,!1)}};ld=Ii;od=Qn;var Lp={usingClientEntryPoint:!1,Events:[bs,ar,Bl,rd,sd,Ii]},Fr={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:Fr.bundleType,version:Fr.version,rendererPackageName:Fr.rendererPackageName,rendererConfig:Fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cd(e),e===null?null:e.stateNode},findFiberByHostInstance:Fr.findFiberByHostInstance||Tp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qs.isDisabled&&Qs.supportsFiber)try{Dl=Qs.inject(zp),Gt=Qs}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lp;Nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mi(t))throw Error(F(200));return Mp(e,t,null,n)};Nt.createRoot=function(e,t){if(!Mi(e))throw Error(F(299));var n=!1,r="",s=Bf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ai(e,1,!1,null,null,n,!1,r,s),e[nn]=t.current,cs(e.nodeType===8?e.parentNode:e),new Pi(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=cd(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return Qn(e)};Nt.hydrate=function(e,t,n){if(!Kl(t))throw Error(F(200));return Jl(null,e,t,!0,n)};Nt.hydrateRoot=function(e,t,n){if(!Mi(e))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=Bf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Uf(t,null,e,1,n??null,s,!1,o,a),e[nn]=t.current,cs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xl(t)};Nt.render=function(e,t,n){if(!Kl(t))throw Error(F(200));return Jl(null,e,t,!1,n)};Nt.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(F(40));return e._reactRootContainer?(Qn(function(){Jl(null,null,e,!1,function(){e._reactRootContainer=null,e[nn]=null})}),!0):!1};Nt.unstable_batchedUpdates=Ii;Nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kl(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return Jl(e,t,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function Hf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hf)}catch(e){console.error(e)}}Hf(),Bu.exports=Nt;var Zn=Bu.exports,tu=Zn;Fo.createRoot=tu.createRoot,Fo.hydrateRoot=tu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vs(){return vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vs.apply(this,arguments)}var gn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gn||(gn={}));const nu="popstate";function Op(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:a,hash:i}=r.location;return Ra("",{pathname:o,search:a,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zl(s)}return Dp(t,n,null,e)}function Oe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ti(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _p(){return Math.random().toString(36).substr(2,8)}function ru(e,t){return{usr:e.state,key:e.key,idx:t}}function Ra(e,t,n,r){return n===void 0&&(n=null),vs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Mr(t):t,{state:n,key:t&&t.key||r||_p()})}function zl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Mr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Dp(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=gn.Pop,c=null,u=f();u==null&&(u=0,a.replaceState(vs({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function p(){i=gn.Pop;let S=f(),y=S==null?null:S-u;u=S,c&&c({action:i,location:g.location,delta:y})}function m(S,y){i=gn.Push;let h=Ra(g.location,S,y);u=f()+1;let x=ru(h,u),N=g.createHref(h);try{a.pushState(x,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(N)}o&&c&&c({action:i,location:g.location,delta:1})}function v(S,y){i=gn.Replace;let h=Ra(g.location,S,y);u=f();let x=ru(h,u),N=g.createHref(h);a.replaceState(x,"",N),o&&c&&c({action:i,location:g.location,delta:0})}function w(S){let y=s.location.origin!=="null"?s.location.origin:s.location.href,h=typeof S=="string"?S:zl(S);return h=h.replace(/ $/,"%20"),Oe(y,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,y)}let g={get action(){return i},get location(){return e(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(nu,p),c=S,()=>{s.removeEventListener(nu,p),c=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let y=w(S);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:v,go(S){return a.go(S)}};return g}var su;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(su||(su={}));function $p(e,t,n){return n===void 0&&(n="/"),Fp(e,t,n)}function Fp(e,t,n,r){let s=typeof t=="string"?Mr(t):t,o=Ri(s.pathname||"/",n);if(o==null)return null;let a=Gf(e);Up(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=Zp(o);i=Xp(a[c],u)}return i}function Gf(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Oe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=bn([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(Oe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Gf(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:Wp(u,o.index),routesMeta:f})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of Vf(o.path))s(o,a,c)}),t}function Vf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=Vf(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Up(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qp(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Bp=/^:[\w-]+$/,Hp=3,Gp=2,Vp=1,Yp=10,Qp=-2,lu=e=>e==="*";function Wp(e,t){let n=e.split("/"),r=n.length;return n.some(lu)&&(r+=Qp),t&&(r+=Gp),n.filter(s=>!lu(s)).reduce((s,o)=>s+(Bp.test(o)?Hp:o===""?Vp:Yp),r)}function qp(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Xp(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",p=Kp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:bn([o,p.pathname]),pathnameBase:sg(bn([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=bn([o,p.pathnameBase]))}return a}function Kp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Jp(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((u,f,p)=>{let{paramName:m,isOptional:v}=f;if(m==="*"){let g=i[p]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const w=i[p];return v&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function Jp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ti(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Zp(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ti(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ri(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const eg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tg=e=>eg.test(e);function ng(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Mr(e):e,o;if(n)if(tg(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ti(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=ou(n.substring(1),"/"):o=ou(n,t)}else o=t;return{pathname:o,search:lg(r),hash:og(s)}}function ou(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function To(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Li(e,t){let n=rg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zi(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Mr(e):(s=vs({},e),Oe(!s.pathname||!s.pathname.includes("?"),To("?","pathname","search",s)),Oe(!s.pathname||!s.pathname.includes("#"),To("#","pathname","hash",s)),Oe(!s.search||!s.search.includes("#"),To("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}i=p>=0?t[p]:"/"}let c=ng(s,i),u=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const bn=e=>e.join("/").replace(/\/\/+/g,"/"),sg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,og=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ag(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Yf=["post","put","patch","delete"];new Set(Yf);const ig=["get",...Yf];new Set(ig);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ys.apply(this,arguments)}const Oi=d.createContext(null),cg=d.createContext(null),Tn=d.createContext(null),Zl=d.createContext(null),on=d.createContext({outlet:null,matches:[],isDataRoute:!1}),Qf=d.createContext(null);function ug(e,t){let{relative:n}=t===void 0?{}:t;Tr()||Oe(!1);let{basename:r,navigator:s}=d.useContext(Tn),{hash:o,pathname:a,search:i}=qf(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:bn([r,a])),s.createHref({pathname:c,search:i,hash:o})}function Tr(){return d.useContext(Zl)!=null}function an(){return Tr()||Oe(!1),d.useContext(Zl).location}function Wf(e){d.useContext(Tn).static||d.useLayoutEffect(e)}function $e(){let{isDataRoute:e}=d.useContext(on);return e?jg():dg()}function dg(){Tr()||Oe(!1);let e=d.useContext(Oi),{basename:t,future:n,navigator:r}=d.useContext(Tn),{matches:s}=d.useContext(on),{pathname:o}=an(),a=JSON.stringify(Li(s,n.v7_relativeSplatPath)),i=d.useRef(!1);return Wf(()=>{i.current=!0}),d.useCallback(function(u,f){if(f===void 0&&(f={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let p=zi(u,JSON.parse(a),o,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:bn([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,a,o,e])}function eo(){let{matches:e}=d.useContext(on),t=e[e.length-1];return t?t.params:{}}function qf(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=d.useContext(Tn),{matches:s}=d.useContext(on),{pathname:o}=an(),a=JSON.stringify(Li(s,r.v7_relativeSplatPath));return d.useMemo(()=>zi(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function fg(e,t){return mg(e,t)}function mg(e,t,n,r){Tr()||Oe(!1);let{navigator:s}=d.useContext(Tn),{matches:o}=d.useContext(on),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=an(),f;if(t){var p;let S=typeof t=="string"?Mr(t):t;c==="/"||(p=S.pathname)!=null&&p.startsWith(c)||Oe(!1),f=S}else f=u;let m=f.pathname||"/",v=m;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=$p(e,{pathname:v}),g=vg(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},i,S.params),pathname:bn([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:bn([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return t&&g?d.createElement(Zl.Provider,{value:{location:ys({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:gn.Pop}},g):g}function hg(){let e=Ng(),t=ag(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),n?d.createElement("pre",{style:s},n):null,null)}const pg=d.createElement(hg,null);class gg extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?d.createElement(on.Provider,{value:this.props.routeContext},d.createElement(Qf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xg(e){let{routeContext:t,match:n,children:r}=e,s=d.useContext(Oi);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(on.Provider,{value:t},r)}function vg(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let f=a.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);f>=0||Oe(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:m,errors:v}=n,w=p.route.loader&&m[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let v,w=!1,g=null,S=null;n&&(v=i&&p.route.id?i[p.route.id]:void 0,g=p.route.errorElement||pg,c&&(u<0&&m===0?(Ig("route-fallback"),w=!0,S=null):u===m&&(w=!0,S=p.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,m+1)),h=()=>{let x;return v?x=g:w?x=S:p.route.Component?x=d.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=f,d.createElement(xg,{match:p,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?d.createElement(gg,{location:n.location,revalidation:n.revalidation,component:g,error:v,children:h(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):h()},null)}var Xf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Xf||{}),Kf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Kf||{});function yg(e){let t=d.useContext(Oi);return t||Oe(!1),t}function wg(e){let t=d.useContext(cg);return t||Oe(!1),t}function Sg(e){let t=d.useContext(on);return t||Oe(!1),t}function Jf(e){let t=Sg(),n=t.matches[t.matches.length-1];return n.route.id||Oe(!1),n.route.id}function Ng(){var e;let t=d.useContext(Qf),n=wg(),r=Jf();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function jg(){let{router:e}=yg(Xf.UseNavigateStable),t=Jf(Kf.UseNavigateStable),n=d.useRef(!1);return Wf(()=>{n.current=!0}),d.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ys({fromRouteId:t},o)))},[e,t])}const au={};function Ig(e,t,n){au[e]||(au[e]=!0)}function bg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function kg(e){let{to:t,replace:n,state:r,relative:s}=e;Tr()||Oe(!1);let{future:o,static:a}=d.useContext(Tn),{matches:i}=d.useContext(on),{pathname:c}=an(),u=$e(),f=zi(t,Li(i,o.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return d.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:s}),[u,p,s,n,r]),null}function xt(e){Oe(!1)}function Cg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=gn.Pop,navigator:o,static:a=!1,future:i}=e;Tr()&&Oe(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:o,static:a,future:ys({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=Mr(r));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:w="default"}=r,g=d.useMemo(()=>{let S=Ri(f,c);return S==null?null:{location:{pathname:S,search:p,hash:m,state:v,key:w},navigationType:s}},[c,f,p,m,v,w,s]);return g==null?null:d.createElement(Tn.Provider,{value:u},d.createElement(Zl.Provider,{children:n,value:g}))}function Ag(e){let{children:t,location:n}=e;return fg(La(t),n)}new Promise(()=>{});function La(e,t){t===void 0&&(t=[]);let n=[];return d.Children.forEach(e,(r,s)=>{if(!d.isValidElement(r))return;let o=[...t,s];if(r.type===d.Fragment){n.push.apply(n,La(r.props.children,o));return}r.type!==xt&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=La(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},za.apply(this,arguments)}function Eg(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Pg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Mg(e,t){return e.button===0&&(!t||t==="_self")&&!Pg(e)}function Oa(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Tg(e,t){let n=Oa(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const Rg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Lg="6";try{window.__reactRouterVersion=Lg}catch{}const zg="startTransition",iu=bm[zg];function Og(e){let{basename:t,children:n,future:r,window:s}=e,o=d.useRef();o.current==null&&(o.current=Op({window:s,v5Compat:!0}));let a=o.current,[i,c]=d.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},f=d.useCallback(p=>{u&&iu?iu(()=>c(p)):c(p)},[c,u]);return d.useLayoutEffect(()=>a.listen(f),[a,f]),d.useEffect(()=>bg(r),[r]),d.createElement(Cg,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}const _g=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Dg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$g=d.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:i,target:c,to:u,preventScrollReset:f,viewTransition:p}=t,m=Eg(t,Rg),{basename:v}=d.useContext(Tn),w,g=!1;if(typeof u=="string"&&Dg.test(u)&&(w=u,_g))try{let x=new URL(window.location.href),N=u.startsWith("//")?new URL(x.protocol+u):new URL(u),b=Ri(N.pathname,v);N.origin===x.origin&&b!=null?u=b+N.search+N.hash:g=!0}catch{}let S=ug(u,{relative:s}),y=Fg(u,{replace:a,state:i,target:c,preventScrollReset:f,relative:s,viewTransition:p});function h(x){r&&r(x),x.defaultPrevented||y(x)}return d.createElement("a",za({},m,{href:w||S,onClick:g||o?r:h,ref:n,target:c}))});var cu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(cu||(cu={}));var uu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uu||(uu={}));function Fg(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:i}=t===void 0?{}:t,c=$e(),u=an(),f=qf(e,{relative:a});return d.useCallback(p=>{if(Mg(p,n)){p.preventDefault();let m=r!==void 0?r:zl(u)===zl(f);c(e,{replace:m,state:s,preventScrollReset:o,relative:a,viewTransition:i})}},[u,c,f,r,s,n,e,o,a,i])}function Ug(e){let t=d.useRef(Oa(e)),n=d.useRef(!1),r=an(),s=d.useMemo(()=>Tg(r.search,n.current?null:t.current),[r.search]),o=$e(),a=d.useCallback((i,c)=>{const u=Oa(typeof i=="function"?i(s):i);n.current=!0,o("?"+u,c)},[o,s]);return[s,a]}const Bg={},du=e=>{let t;const n=new Set,r=(f,p)=>{const m=typeof f=="function"?f(t):f;if(!Object.is(m,t)){const v=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(w=>w(t,v))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Bg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},Hg=e=>e?du(e):du;var Zf={exports:{}},em={},tm={exports:{}},nm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=d;function Gg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vg=typeof Object.is=="function"?Object.is:Gg,Yg=Cr.useState,Qg=Cr.useEffect,Wg=Cr.useLayoutEffect,qg=Cr.useDebugValue;function Xg(e,t){var n=t(),r=Yg({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return Wg(function(){s.value=n,s.getSnapshot=t,Ro(s)&&o({inst:s})},[e,n,t]),Qg(function(){return Ro(s)&&o({inst:s}),e(function(){Ro(s)&&o({inst:s})})},[e]),qg(n),n}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vg(e,n)}catch{return!0}}function Kg(e,t){return t()}var Jg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kg:Xg;nm.useSyncExternalStore=Cr.useSyncExternalStore!==void 0?Cr.useSyncExternalStore:Jg;tm.exports=nm;var Zg=tm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=d,ex=Zg;function tx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nx=typeof Object.is=="function"?Object.is:tx,rx=ex.useSyncExternalStore,sx=to.useRef,lx=to.useEffect,ox=to.useMemo,ax=to.useDebugValue;em.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=sx(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=ox(function(){function c(v){if(!u){if(u=!0,f=v,v=r(v),s!==void 0&&a.hasValue){var w=a.value;if(s(w,v))return p=w}return p=v}if(w=p,nx(f,v))return w;var g=r(v);return s!==void 0&&s(w,g)?(f=v,w):(f=v,p=g)}var u=!1,f,p,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,s]);var i=rx(e,o[0],o[1]);return lx(function(){a.hasValue=!0,a.value=i},[i]),ax(i),i};Zf.exports=em;var ix=Zf.exports;const cx=Pu(ix),rm={},{useDebugValue:ux}=Ua,{useSyncExternalStoreWithSelector:dx}=cx;let fu=!1;const fx=e=>e;function mx(e,t=fx,n){(rm?"production":void 0)!=="production"&&n&&!fu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fu=!0);const r=dx(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ux(r),r}const mu=e=>{(rm?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Hg(e):e,n=(r,s)=>mx(t,r,s);return Object.assign(n,t),n},Cs=e=>e?mu(e):mu,hx={};function px(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const a=c=>c===null?null:JSON.parse(c,void 0),i=(o=n.getItem(s))!=null?o:null;return i instanceof Promise?i.then(a):a(i)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const ws=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return ws(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ws(r)(n)}}}},gx=(e,t)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,y)=>({...y,...S}),...t},a=!1;const i=new Set,c=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...S)},r,s);const f=ws(o.serialize),p=()=>{const S=o.partialize({...r()});let y;const h=f({state:S,version:o.version}).then(x=>u.setItem(o.name,x)).catch(x=>{y=x});if(y)throw y;return h},m=s.setState;s.setState=(S,y)=>{m(S,y),p()};const v=e((...S)=>{n(...S),p()},r,s);let w;const g=()=>{var S;if(!u)return;a=!1,i.forEach(h=>h(r()));const y=((S=o.onRehydrateStorage)==null?void 0:S.call(o,r()))||void 0;return ws(u.getItem.bind(u))(o.name).then(h=>{if(h)return o.deserialize(h)}).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==o.version){if(o.migrate)return o.migrate(h.state,h.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return h.state}).then(h=>{var x;return w=o.merge(h,(x=r())!=null?x:v),n(w,!0),p()}).then(()=>{y==null||y(w,void 0),a=!0,c.forEach(h=>h(w))}).catch(h=>{y==null||y(void 0,h)})};return s.persist={setOptions:S=>{o={...o,...S},S.getStorage&&(u=S.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:S=>(i.add(S),()=>{i.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},g(),w||v},xx=(e,t)=>(n,r,s)=>{let o={storage:px(()=>localStorage),partialize:g=>g,version:0,merge:(g,S)=>({...S,...g}),...t},a=!1;const i=new Set,c=new Set;let u=o.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,s);const f=()=>{const g=o.partialize({...r()});return u.setItem(o.name,{state:g,version:o.version})},p=s.setState;s.setState=(g,S)=>{p(g,S),f()};const m=e((...g)=>{n(...g),f()},r,s);s.getInitialState=()=>m;let v;const w=()=>{var g,S;if(!u)return;a=!1,i.forEach(h=>{var x;return h((x=r())!=null?x:m)});const y=((S=o.onRehydrateStorage)==null?void 0:S.call(o,(g=r())!=null?g:m))||void 0;return ws(u.getItem.bind(u))(o.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==o.version){if(o.migrate)return[!0,o.migrate(h.state,h.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var x;const[N,b]=h;if(v=o.merge(b,(x=r())!=null?x:m),n(v,!0),N)return f()}).then(()=>{y==null||y(v,void 0),v=r(),a=!0,c.forEach(h=>h(v))}).catch(h=>{y==null||y(void 0,h)})};return s.persist={setOptions:g=>{o={...o,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>w(),hasHydrated:()=>a,onHydrate:g=>(i.add(g),()=>{i.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},o.skipHydration||w(),v||m},vx=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((hx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),gx(e,t)):xx(e,t),no=vx,Ss={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){console.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){console.error("Failed to clear localStorage:",e)}}};function yx(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}const wx={getItem:async e=>new Promise(t=>{const n=indexedDB.open("tunetuna-storage",1);n.onupgradeneeded=()=>{n.result.createObjectStore("zustand")},n.onsuccess=()=>{const a=n.result.transaction(["zustand"],"readonly").objectStore("zustand").get(e);a.onsuccess=()=>{t(a.result||null)},a.onerror=()=>{t(null)}},n.onerror=()=>{t(null)}}),setItem:async(e,t)=>new Promise((n,r)=>{const s=indexedDB.open("tunetuna-storage",1);s.onupgradeneeded=()=>{s.result.createObjectStore("zustand")},s.onsuccess=()=>{const c=s.result.transaction(["zustand"],"readwrite").objectStore("zustand").put(t,e);c.onsuccess=()=>{n()},c.onerror=()=>{r(c.error)}},s.onerror=()=>{r(s.error)}}),removeItem:async e=>new Promise(t=>{const n=indexedDB.open("tunetuna-storage",1);n.onsuccess=()=>{const a=n.result.transaction(["zustand"],"readwrite").objectStore("zustand").delete(e);a.onsuccess=()=>{t()},a.onerror=()=>{t()}},n.onerror=()=>{t()}})},xe=Cs()(no(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],shufflePool:[],lastPoolUpdate:null,loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1},sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(o=>o.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t}),refreshShufflePool:()=>e(t=>{let r=t.songs;const s=Object.values(t.genreSongs).flat().length;if(t.songs.length===0&&s>0&&(r=Object.values(t.genreSongs).flat()),r.length===0)return{shufflePool:[]};const o=new Set(t.recentlyPlayed.slice(0,10).map(u=>u.Id));r=r.filter(u=>!o.has(u.Id));let a=r;if(a.length<30){const u=t.recentlyPlayed.slice(0,30-a.length);a=[...a,...u.map(f=>t.songs.find(p=>p.Id===f.Id)).filter(Boolean)]}const i=[...a];for(let u=i.length-1;u>0;u--){const f=Math.floor(Math.random()*(u+1));[i[u],i[f]]=[i[f],i[u]]}return{shufflePool:i.slice(0,30),lastPoolUpdate:Date.now()}})}),{name:"music-storage",storage:wx,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,shufflePool:e.shufflePool,lastPoolUpdate:e.lastPoolUpdate,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed})}));function ul(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function Ft(e){return e&&ul(e).replace(/'/g,"")}class Sx{constructor(){Ln(this,"baseUrl","");Ln(this,"accessToken","");Ln(this,"userId","");Ln(this,"genresCache",null);Ln(this,"isPreloading",!1)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":`MediaBrowser Client="Tunetuna", Device="Web", DeviceId="${this.getDeviceId()}", Version="1.0.0"`}}getDeviceId(){let t=Ss.get("deviceId");return t||(t=yx(),Ss.set("deviceId",t)),t}async request(t,n={}){const r=`${this.baseUrl}${t}`,s=await fetch(r,{...n,headers:{...this.getHeaders(),...n.headers}});if(!s.ok)throw s.status===401?new Error("Unauthorized - please login again"):new Error(`API request failed: ${s.statusText}`);return s.json()}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",o=new AbortController,a=setTimeout(()=>{console.warn("Authentication request timed out after 30 seconds"),o.abort()},3e4);let i;try{i=await fetch(s,{method:"POST",signal:o.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":`MediaBrowser Client="Tunetuna", Device="Web", DeviceId="${this.getDeviceId()}", Version="1.0.0"`},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(a)}catch(u){if(clearTimeout(a),u instanceof Error&&u.name==="AbortError"){const p=/^https?:\/\/100\.\d+\.\d+\.\d+/.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:"";throw new Error(`Request timeout - server did not respond within 30 seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${p}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(u instanceof TypeError){const f=u.message.toLowerCase();if(f.includes("failed to fetch")||f.includes("networkerror")){const m=/^https?:\/\/100\.\d+\.\d+\.\d+/.test(t)?`
  VPN/Tailscale IP detected. Your phone may not be able to access this IP.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:"";throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${m}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${u.message}`)}throw u}if(!i.ok){const u=await i.text().catch(()=>"");throw new Error(u||`Authentication failed (${i.status})`)}const c=await i.json();return this.setCredentials(t,c.AccessToken,c.User.Id),c}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,i=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&i.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${i.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&r.append("SortOrder",t.sortOrder),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,ProductionYear,DateCreated,DateModified,DateLastSaved"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=xe.getState(),r=12*60*60*1e3;if(!t&&n.genres.length>0&&n.genresLastUpdated){const s=Date.now(),o=n.genresLastChecked||0;if(!(s-o>=r))return this.genresCache=n.genres,n.genres;try{const i=await this.getRecentlyAdded(50),c=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),u=[...i.Items||[],...c.Items||[]];let f=0;for(const p of u){if(p.DateCreated){const m=new Date(p.DateCreated).getTime();m>f&&(f=m)}if(p.DateLastSaved){const m=new Date(p.DateLastSaved).getTime();m>f&&(f=m)}}if(xe.setState({genresLastChecked:s}),f<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch(i){return console.warn("[getGenres] Failed to check for new/modified tracks, using cached genres:",i),this.genresCache=n.genres,n.genres}}try{const s=new Map;let o=0;const a=200;let i=!0;for(;i;){const y=(await this.getAlbums({limit:a,startIndex:o})).Items||[];if(y.forEach(h=>{h.Genres&&h.Genres.forEach(x=>{const N=x.toLowerCase();s.has(N)||s.set(N,x)})}),i=y.length===a,o+=a,o>1e4)break}const c=new Set;let u=0,f=!0;for(;f;){const y=(await this.getSongs({limit:200,startIndex:u})).Items||[];if(y.forEach(h=>{h.Genres&&h.Genres.forEach(x=>{c.add(x.toLowerCase())})}),f=y.length===200,u+=200,u>1e4)break}const p=new Map,m=new Map;try{const S=new URLSearchParams({UserId:this.userId,Recursive:"true"}),y=await this.request(`/Genres?${S}`);let h=[];Array.isArray(y)?h=y:y&&typeof y=="object"&&"Items"in y&&(h=y.Items||[]),h.forEach(x=>{if(x.Name){const N=x.Name.toLowerCase();s.has(N)&&(p.set(N,x.Id),m.set(x.Id,x))}})}catch(S){console.warn("[getGenres] Failed to get genre IDs from API, will use synthetic IDs:",S)}const v=[],w=new Set;for(const[S,y]of s){if(w.has(S)||!c.has(S))continue;const h=p.get(S);if(h){const x=m.get(h);x&&(v.push(x),w.add(S))}else v.push({Id:`synthetic-${S.replace(/\s+/g,"-")}`,Name:y,Type:"Genre"}),w.add(S)}const g=Date.now();return xe.getState().setGenres(v),xe.setState({genresLastUpdated:g,genresLastChecked:g}),this.genresCache=v,v}catch(s){return console.error("[getGenres] Failed to build music genres:",s),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=xe.getState(),r=12*60*60*1e3;if(!t&&n.years.length>0&&n.yearsLastUpdated){const s=Date.now(),o=n.yearsLastChecked||0;if(!(s-o>=r))return n.years;try{const c=(await this.getRecentlyAdded(50)).Items||[];let u=0;for(const f of c)if(f.DateCreated){const p=new Date(f.DateCreated).getTime();p>u&&(u=p)}if(xe.setState({yearsLastChecked:s}),u<=n.yearsLastUpdated)return n.years}catch(i){return console.warn("[getYears] Failed to check for new tracks, using cached years:",i),n.years}}try{const s=new Set;let o=0;const a=200;let i=!0;for(;i;){const p=(await this.getSongs({limit:a,startIndex:o})).Items||[];if(p.forEach(m=>{m.ProductionYear&&m.ProductionYear>0&&s.add(m.ProductionYear)}),i=p.length===a,o+=a,o>1e4)break}const c=Array.from(s).sort((f,p)=>f-p),u=Date.now();return xe.getState().setYears(c),xe.setState({yearsLastUpdated:u,yearsLastChecked:u}),c}catch(s){return console.error("[getYears] Failed to extract years:",s),n.years.length>0?n.years:[]}}async getGenreSongs(t,n,r=!1){let s=[];if(t.startsWith("synthetic-")||r){let i=0;const c=200;let u=!0;for(;u;){const p=(await this.getSongs({limit:c,startIndex:i},!0)).Items||[];if(s.push(...p),u=p.length===c,i+=c,i>5e4)break}}else{let i=0;const c=200;let u=!0;for(;u;){const p=(await this.getSongs({genreIds:[t],limit:c,startIndex:i})).Items||[];if(s.push(...p),u=p.length===c,i+=c,i>5e4)break}}return s.filter(i=>{var u;return(u=i.Genres)==null?void 0:u.some(f=>f.toLowerCase()===n.toLowerCase())}).map(i=>({Id:i.Id,Name:i.Name,AlbumArtist:i.AlbumArtist,ArtistItems:i.ArtistItems,Album:i.Album,AlbumId:i.AlbumId,IndexNumber:i.IndexNumber,ProductionYear:i.ProductionYear,PremiereDate:i.PremiereDate,RunTimeTicks:i.RunTimeTicks,Genres:i.Genres}))}async syncLibrary(t={scope:"incremental"}){const n=xe.getState();if(t.scope==="incremental"){const o=n.lastSyncCompleted,a=await this.getGenres(!1);let i=[];if(o){let g=0;const S=200;let y=!0;for(;y;){const x=(await this.getSongs({minDateLastSaved:new Date(o),limit:S,startIndex:g},!0)).Items||[];if(i.push(...x),y=x.length===S,g+=S,g>1e4)break}}else i=(await this.getSongs({limit:1e3,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const c=i.map(g=>({Id:g.Id,Name:g.Name,AlbumArtist:g.AlbumArtist,ArtistItems:g.ArtistItems,Album:g.Album,AlbumId:g.AlbumId,IndexNumber:g.IndexNumber,ProductionYear:g.ProductionYear,PremiereDate:g.PremiereDate,RunTimeTicks:g.RunTimeTicks,Genres:g.Genres})),u=n.songs,f=new Set(u.map(g=>g.Id)),p=c.filter(g=>!f.has(g.Id)),m=[...u,...p];try{n.setSongs(m)}catch(g){throw g instanceof DOMException&&g.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):g}const v=new Set;p.forEach(g=>{var S;(S=g.Genres)==null||S.forEach(y=>{a.forEach(h=>{var x;((x=h.Name)==null?void 0:x.toLowerCase())===y.toLowerCase()&&v.add(h.Id)})})});const w=Array.from(v).map(async g=>{const S=a.find(N=>N.Id===g);if(!(S!=null&&S.Name))return;const y=n.genreSongs[g]||[];new Set(y.map(N=>N.Id));const h=p.filter(N=>{var b;return(b=N.Genres)==null?void 0:b.some(j=>j.toLowerCase()===S.Name.toLowerCase())}),x=[...y,...h];n.setGenreSongs(g,x)});await Promise.all(w);return}this.clearGenresCache(),n.clearGenreSongs();const s=(await this.getGenres(!0)).map(async o=>{if(!(!o.Name||!o.Id))try{const a=await this.getGenreSongs(o.Id,o.Name);n.setGenreSongs(o.Id,a)}catch(a){console.warn(`[syncLibrary] Failed to load songs for genre ${o.Name}:`,a)}});await Promise.all(s)}async search(t,n=20){const r=t?ul(t.trim()):"",s=r.length>0,o=r.length,a=s&&o<3,i={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0};s&&(i.searchTerm=r,o>=3&&(i.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const c=this.buildQueryString(i),u=await this.request(`/Items?${c}`);let f=[];const p=[],m=[],v=[],w=new Set;if(u.Items.forEach(g=>{g.Type==="MusicArtist"?f.push(g):g.Type==="MusicAlbum"?p.push(g):g.Type==="Playlist"?m.push(g):g.Type==="Audio"&&(v.push(g),w.add(g.Id))}),a)try{const g=await this.getArtists({limit:1e3}),S=r.toLowerCase();f=(g.Items||[]).filter(y=>ul(y.Name||"").toLowerCase().includes(S))}catch(g){console.error("Failed to fetch all artists for short query:",g)}if(s&&f.length>0){const g=r.toLowerCase(),y=f.filter(x=>ul(x.Name||"").toLowerCase().includes(g)).map(x=>this.getArtistItems(x.Id).catch(N=>(console.error(`Failed to fetch songs for artist ${x.Id}:`,N),{albums:[],songs:[]})));(await Promise.all(y)).forEach(({songs:x})=>{x.forEach(N=>{w.has(N.Id)||(v.push(N),w.add(N.Id))})})}return{Artists:{Items:f,TotalRecordCount:f.length,StartIndex:0},Albums:{Items:p,TotalRecordCount:p.length,StartIndex:0},Playlists:{Items:m,TotalRecordCount:m.length,StartIndex:0},Songs:{Items:v,TotalRecordCount:v.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"}),r=await this.request(`/Items?${n}`),s=[],o=[];return r.Items.forEach(a=>{a.Type==="MusicAlbum"?s.push(a):a.Type==="Audio"&&o.push(a)}),{albums:s,songs:o}}async getGenreItems(t,n=50){const r=this.buildQueryString({genreIds:[t],includeItemTypes:["MusicAlbum"],recursive:!0,limit:n,sortBy:["DateCreated"],sortOrder:"Descending"});return this.request(`/Items?${r}`)}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch(n){console.warn("Failed to mark item as played:",n)}}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const o=new URLSearchParams({UserId:this.userId}),a=`${this.baseUrl}${s}?${o}`;try{const i=await fetch(a,{headers:this.getHeaders()});if(i.ok){const c=await i.json();if(c.Lyrics&&Array.isArray(c.Lyrics)&&c.Lyrics.length>0)return c.Lyrics.map(f=>f.Text||"").join(`
`);if(typeof c=="string")return c;if(c.Text)return c.Text}else if(i.status===404){r=`404 for ${s}`;continue}else{const c=await i.text().catch(()=>"");r=`${i.status}: ${c}`;continue}}catch(i){r=i instanceof Error?i.message:String(i);continue}}return null}catch(n){return console.warn("[getLyrics] Failed to fetch lyrics:",n),null}}}const T=new Sx,_i=Cs()(no(e=>({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await T.authenticate(t,n,r);e({serverUrl:t,username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),T.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{e({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),Ss.remove("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),T.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId&&T.setCredentials(e.serverUrl,e.accessToken,e.userId)}})),Dt=Cs()(no(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),showQueueRecommendations:!0,setShowQueueRecommendations:t=>e({showQueueRecommendations:t}),recommendationsQuality:"good",setRecommendationsQuality:t=>e({recommendationsQuality:t})}),{name:"settings-storage"})),hu="last-server-url";function Nx(){const[e,t]=d.useState(""),[n,r]=d.useState(""),[s,o]=d.useState(""),[a,i]=d.useState(""),[c,u]=d.useState(!1),f=_i(m=>m.login);d.useEffect(()=>{const m=Ss.get(hu);m&&t(m)},[]);const p=async m=>{m.preventDefault(),i(""),u(!0),e.trim()&&Ss.set(hu,e.trim());try{await f(e,n,s)}catch(v){i(v instanceof Error?v.message:"Login failed. Please check your credentials.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),l.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),l.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:m=>t(m.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),l.jsx("input",{id:"username",type:"text",value:n,onChange:m=>r(m.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:s,onChange:m=>o(m.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),a&&l.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:a}),l.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:c?"Signing in...":"Sign In"})]})]})})}/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ix=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),pu=e=>{const t=Ix(e);return t.charAt(0).toUpperCase()+t.slice(1)},sm=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),bx=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},c)=>d.createElement("svg",{ref:c,...kx,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:sm("lucide",s),...!o&&!bx(i)&&{"aria-hidden":"true"},...i},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(e,t)=>{const n=d.forwardRef(({className:r,...s},o)=>d.createElement(Cx,{ref:o,iconNode:t,className:sm(`lucide-${jx(pu(e))}`,`lucide-${e}`,r),...s}));return n.displayName=pu(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bn=ve("arrow-left",Ax);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],As=ve("arrow-up-down",Ex);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Di=ve("calendar",Px);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$i=ve("chevron-down",Mx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Rx=ve("chevron-left",Tx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zx=ve("chevron-right",Lx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lm=ve("chevron-up",Ox);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ge=ve("disc",_x);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Fi=ve("ellipsis",Dx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Fx=ve("github",$x);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Bx=ve("grip-horizontal",Ux);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],Wn=ve("guitar",Hx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],Vx=ve("heart-handshake",Gx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Qx=ve("house",Yx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],Ht=ve("list-end",Wx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Xx=ve("list-music",qx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],Ws=ve("list-start",Kx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],Zx=ve("list-video",Jx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],t0=ve("log-out",e0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],r0=ve("mic-vocal",n0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],l0=ve("music",s0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],An=ve("pause",o0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nt=ve("play",a0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]],c0=ve("rabbit",i0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],es=ve("refresh-cw",u0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Ui=ve("repeat-1",d0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Bi=ve("repeat",f0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],h0=ve("settings",m0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],en=ve("shuffle",p0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Hi=ve("skip-back",g0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Ol=ve("skip-forward",x0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],y0=ve("square-play",v0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["path",{d:"m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4Z",key:"1lbbv7"}],["path",{d:"M4.82 7.9 8 10",key:"m9wose"}],["path",{d:"M15.18 7.9 12 10",key:"p8dp2u"}],["path",{d:"M16.93 10H20a2 2 0 0 1 0 4H2",key:"12nsm7"}]],S0=ve("turtle",w0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],st=ve("user",N0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],I0=ve("x",j0),b0=[{path:"/",label:"Home",icon:Qx,key:"home"},{path:"/artists",label:"Artists",icon:st,key:"artists"},{path:"/albums",label:"Albums",icon:Ge,key:"albums"},{path:"/songs",label:"Songs",icon:l0,key:"songs"},{path:"/genres",label:"Genres",icon:Wn,key:"genres"},{path:"/playlists",label:"Playlists",icon:Xx,key:"playlists"}];function k0(){const e=an(),{pageVisibility:t}=Dt(),n=b0.filter(s=>s.key==="home"?!0:t[s.key]),r=(s,o)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===o&&s.preventDefault()};return l.jsx("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(s=>{const o=e.pathname===s.path,a=s.icon;return l.jsxs($g,{to:s.path,onClick:i=>r(i,s.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${o?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[l.jsx(a,{className:"w-5 h-5 mb-1"}),l.jsx("span",{className:"text-xs font-medium",children:s.label})]},s.path)})})})})}const C0=new Set,gu=new Map;function A0(e,t,n=5e3){const r=setTimeout(async()=>{const s=t();if((s==null?void 0:s.Id)===e)try{await T.markItemAsPlayed(e),C0.add(e),setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}}))},4e3)}catch{}gu.delete(e)},n);gu.set(e,r)}function Wt(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}const It=()=>{const{songs:e,currentIndex:t}=we();return t>=0&&e.length>t?e[t]:null},Gi=()=>{const{lastPlayedTrack:e}=we();return e},we=Cs()(no((e,t)=>({songs:[],currentIndex:-1,previousIndex:-1,standardOrder:[],shuffleOrder:[],isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,isFetchingRecommendations:!1,isLoadingMoreSongs:!1,shuffleHasMoreSongs:!1,lastPlayedTrack:null,isShuffleAllActive:!1,isShuffleGenreActive:!1,manuallyCleared:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setIsLoadingMoreSongs:n=>{e({isLoadingMoreSongs:n})},setCurrentTime:n=>{e({currentTime:n})},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n)},clearQueue:()=>{e(n=>{const r=n.currentIndex>=0?[n.songs[n.currentIndex]]:[];return{songs:r,currentIndex:r.length>0?0:-1,previousIndex:-1,standardOrder:r.map(s=>s.Id),shuffleOrder:r.map(s=>s.Id),manuallyCleared:!0}})},addToQueue:(n,r=!1,s="user")=>{e(o=>{const a=n.map(v=>({...v,source:s}));o.songs.filter(v=>v.source==="user"),o.songs.filter(v=>v.source==="recommendation");let i,c=[...o.standardOrder],u=[...o.shuffleOrder],f;if(r){const v=o.shuffle?Wt([...a]):a,w=o.currentIndex+1,g=o.songs.slice(0,w),S=o.songs.slice(w);f=[...g,...v,...S],i=f.filter(h=>h.source==="user"),f.filter(h=>h.source==="recommendation");const y=v.map(h=>h.Id);if(o.shuffle){const h=o.currentIndex;u=[...o.shuffleOrder.slice(0,h+1),...y,...o.shuffleOrder.slice(h+1)]}else c=i.map(h=>h.Id)}else{const v=a,w=o.currentIndex>=0?o.songs[o.currentIndex]:null;if((w==null?void 0:w.source)==="recommendation"){const S=o.songs.slice(o.currentIndex+1).filter(h=>h.source==="recommendation"),y=o.currentIndex+1;f=[...o.songs.slice(0,y),...v,...S,...o.songs.slice(o.currentIndex+1+S.length)]}else f=[...o.songs,...v];i=f.filter(S=>S.source==="user");const g=v.map(S=>S.Id);if(o.shuffle){const S=(w==null?void 0:w.source)==="recommendation"?o.currentIndex+1:o.shuffleOrder.length;u=[...o.shuffleOrder.slice(0,S),...g,...o.shuffleOrder.slice(S)]}else{const S=(w==null?void 0:w.source)==="recommendation"?o.currentIndex+1:o.standardOrder.length;c=[...o.standardOrder.slice(0,S),...g,...o.standardOrder.slice(S)]}}let p=o.currentIndex;if(r)p=o.currentIndex;else if(o.currentIndex>=0){const v=o.songs[o.currentIndex];p=f.findIndex(w=>w.Id===(v==null?void 0:v.Id))}let m=f;if(f.length>1e3){const v=p>=0?f[p]:null,w=f.slice(0,p),g=f.slice(p+1),S=w.slice(-5),y=g,h=1e3-S.length-(v?1:0)-y.length,x=w.slice(-Math.max(0,h));m=[...x,...v?[v]:[],...y],p=v?x.length:-1}return{songs:m,currentIndex:p,standardOrder:c,shuffleOrder:u,manuallyCleared:!1}})},removeFromQueue:n=>{e(r=>{if(n<0||n>=r.songs.length)return r;const s=r.songs[n],o=r.songs.filter((f,p)=>p!==n);let a=r.standardOrder.filter(f=>f!==s.Id),i=r.shuffleOrder.filter(f=>f!==s.Id),c=r.currentIndex,u=r.previousIndex;return n<r.currentIndex?c=r.currentIndex-1:n===r.currentIndex&&(c=-1),n<r.previousIndex?u=r.previousIndex-1:n===r.previousIndex&&(u=-1),{songs:o,currentIndex:c,previousIndex:u,standardOrder:a,shuffleOrder:i}})},reorderQueue:(n,r)=>{e(s=>{if(n<0||r<0||n>=s.songs.length||r>=s.songs.length||n===r)return s;const o=s.songs[n],a=s.songs[r];if(o.source!==a.source)return s;const i=[...s.songs],[c]=i.splice(n,1);if(i.splice(r,0,c),o.source==="user"){const f=s.shuffle?"shuffleOrder":"standardOrder",p=s[f],m=p.indexOf(o.Id);if(m>=0){const v=[...p];v.splice(m,1);const g=i.slice(0,r+1).filter(y=>y.source==="user").length-1;v.splice(g,0,o.Id);const S=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:i,[f]:v,currentIndex:S,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}}}const u=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:i,currentIndex:u,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}})},play:()=>{const{audioElement:n,currentIndex:r,songs:s}=t();if(n&&r>=0&&r<s.length){const o=s[r],a=T.serverBaseUrl,i=a?`${a}/Audio/${o.Id}/stream?static=true`:"";n.src!==i&&(n.src=i,n.load()),n.play().then(()=>{e({isPlaying:!0}),A0(o.Id,()=>t().songs[t().currentIndex]||null),xe.getState().addToRecentlyPlayed(o)}).catch(c=>{console.error("Playback error:",c),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const{songs:n,currentIndex:r,repeat:s,previousIndex:o}=t();if(n.length===0)return;let a=r+1;if(a>=n.length)if(s==="all")a=0;else return;const i=r>=0?n[r]:null;e({previousIndex:r,currentIndex:a,lastPlayedTrack:i}),t().play()},previous:()=>{const{songs:n,currentIndex:r,previousIndex:s}=t();if(n.length===0)return;let o=r,a=r;if(r>0)o=r-1;else{const{repeat:i}=t();if(i==="all")o=n.length-1;else return}e({currentIndex:o,previousIndex:a}),t().play()},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n}))},toggleShuffle:()=>{e(n=>{const r=!n.shuffle;if(r){const s=n.songs.slice(0,n.currentIndex),o=n.currentIndex>=0?n.songs[n.currentIndex]:null,a=n.songs.slice(n.currentIndex+1).filter(m=>m.source==="user"),i=n.songs.filter(m=>m.source==="recommendation"),c=Wt(a.map(m=>m.Id)),u=c.map(m=>a.find(v=>v.Id===m)).filter(Boolean),f=[...s,...o?[o]:[],...u,...i],p=[...n.standardOrder.slice(0,n.currentIndex+1),...c];return{shuffle:r,shuffleOrder:p,songs:f}}else{const s=n.songs.slice(0,n.currentIndex),o=n.currentIndex>=0?n.songs[n.currentIndex]:null,i=n.standardOrder.slice(n.currentIndex+1).map(f=>n.songs.find(p=>p.Id===f&&p.source==="user")).filter(Boolean),c=n.songs.filter(f=>f.source==="recommendation"),u=[...s,...o?[o]:[],...i,...c];return{shuffle:r,songs:u}}})},toggleRepeat:()=>{e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{let s,o;r?(s=r,o=r.findIndex(i=>i.Id===n.Id),o===-1&&(s=[n,...r.filter(i=>i.Id!==n.Id)],o=0)):(s=[n],o=0);const a=s.map(i=>({...i,source:"user"}));e({songs:a,standardOrder:a.map(i=>i.Id),shuffleOrder:a.map(i=>i.Id),currentIndex:o,previousIndex:o>0?o-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playAlbum:(n,r=0)=>{const s=n.map(o=>({...o,source:"user"}));e({songs:s,standardOrder:s.map(o=>o.Id),shuffleOrder:s.map(o=>o.Id),currentIndex:r,previousIndex:r>0?r-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playNext:n=>{t().addToQueue(n,!0)},shuffleArtist:n=>{const s=Wt(n).map(o=>({...o,source:"user"}));e({songs:s,standardOrder:s.map(o=>o.Id),shuffleOrder:s.map(o=>o.Id),currentIndex:0,previousIndex:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},shuffleAllSongs:async()=>{t().clearQueue();const{setShowQueueRecommendations:n}=Dt.getState();n(!1);const s=typeof window<"u"&&window.innerWidth<768?400:800,o=xe.getState();let a=[];if(o.shufflePool.length>=1){const p=Math.min(5,o.shufflePool.length);a=o.shufflePool.slice(0,p);const m=o.shufflePool.slice(p),v=o.songs,w=new Set(o.recentlyPlayed.slice(0,10).map(h=>h.Id)),g=v.filter(h=>!w.has(h.Id)),S=Wt(g).slice(0,p),y=[...m,...S];xe.setState({shufflePool:y,lastPoolUpdate:Date.now()})}else{let p=o.songs;if(!p||p.length===0)try{p=(await T.getSongs({limit:Math.max(50,s),sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]}catch(m){console.error("Failed to fetch songs for shuffle all:",m);return}a=Wt(p).slice(0,5),p.filter(m=>!a.some(v=>v.Id===m.Id)),xe.setState({songs:p,shufflePool:Wt(p).slice(0,30),lastPoolUpdate:Date.now()})}const i=a.map(p=>({...p,source:"user"})),c=a.length,f=o.songs.length+Object.values(o.genreSongs).flat().length>a.length;e({songs:i,standardOrder:i.map(p=>p.Id),shuffleOrder:i.map(p=>p.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:f,manuallyCleared:!0}),t().play(),setTimeout(async()=>{try{const p=t();if(!p.shuffle||p.songs.length!==c)return;let m=o.songs;(!m||m.length===0)&&(m=(await T.getSongs({limit:s,sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]);const v=Object.values(o.genreSongs).flat(),w=[...m,...v],g=new Map;w.forEach(x=>g.set(x.Id,x));const S=Array.from(g.values()),y=new Set(i.map(x=>x.Id)),h=S.filter(x=>!y.has(x.Id));if(h.length>0){const x=Math.min(s-c,h.length),b=Wt(h).slice(0,x).map(k=>({...k,source:"user"})),j=[...i,...b];e({songs:j,standardOrder:j.map(k=>k.Id),shuffleOrder:j.map(k=>k.Id),shuffleHasMoreSongs:h.length>x}),xe.getState().refreshShufflePool()}}catch(p){console.error("Failed to expand shuffle queue:",p)}},100)},shuffleGenreSongs:async(n,r)=>{t().clearQueue();const{setShowQueueRecommendations:s}=Dt.getState();s(!1);const a=typeof window<"u"&&window.innerWidth<768?400:800,i=xe.getState().genreSongs[n];if(!i||i.length===0){console.warn(`No songs found for genre: ${r}`);return}const c=Wt(i).slice(0,5),u=i.filter(m=>!c.some(v=>v.Id===m.Id)),f=c.map(m=>({...m,source:"user"})),p=i.length>5;e({songs:f,standardOrder:f.map(m=>m.Id),shuffleOrder:f.map(m=>m.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:p,manuallyCleared:!0}),t().play(),setTimeout(async()=>{try{const m=t();if(!m.shuffle||m.songs.length!==5)return;if(u.length>0){const v=Math.min(a-5,u.length),g=Wt(u).slice(0,v).map(y=>({...y,source:"user"})),S=[...f,...g];e({songs:S,standardOrder:S.map(y=>y.Id),shuffleOrder:S.map(y=>y.Id),shuffleHasMoreSongs:u.length>v})}}catch(m){console.error("Failed to expand genre shuffle queue:",m)}},100)},skipToTrack:n=>{const{songs:r,currentIndex:s}=t();if(n<0||n>=r.length)return;const o=s>=0?r[s]:null;e({previousIndex:s>=0?s:-1,currentIndex:n,lastPlayedTrack:o}),t().play()},refreshCurrentTrack:async()=>{const{currentIndex:n,songs:r}=t();if(n<0||n>=r.length)return;const s=r[n];try{const o=await T.getSongById(s.Id);o&&e(a=>{const i=[...a.songs];return i[a.currentIndex]={...i[a.currentIndex],...o},{songs:i}})}catch(o){console.error("Failed to refresh current track:",o)}}}),{name:"player-storage",partialize:e=>({songs:e.songs,currentIndex:e.currentIndex,previousIndex:e.previousIndex,standardOrder:e.standardOrder,shuffleOrder:e.shuffleOrder,volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,isShuffleAllActive:e.isShuffleAllActive,isShuffleGenreActive:e.isShuffleGenreActive,manuallyCleared:e.manuallyCleared}),onRehydrateStorage:e=>{e&&(e.isPlaying=!1,e.currentTime=0,e.duration=0,e.audioElement=null,e.isFetchingRecommendations=!1,e.isShuffleAllActive=!1,e.isShuffleGenreActive=!1)}}));function it({src:e,alt:t,className:n="",fallback:r,style:s,showOutline:o,rounded:a="rounded",onError:i}){const[c,u]=d.useState(e),[f,p]=d.useState(!1),[m,v]=d.useState(!1);d.useEffect(()=>{u(e),p(!1),v(!1)},[e]);const w=()=>{!f&&r?(u(r),p(!0)):i?(i(),v(!0)):u('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="300"%3E%3Crect fill="%23333" width="300" height="300"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="20" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3ENo Image%3C/text%3E%3C/svg%3E')};return m?null:l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("img",{src:c,alt:t,className:`block ${n}`,onError:w,loading:"lazy",style:s}),o&&l.jsx("div",{className:`absolute inset-0 pointer-events-none border ${a}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function Yt(){return l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function Vi({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,o]=d.useState(!1),[a,i]=d.useState(!1);if(d.useEffect(()=>{if(e)o(!1),i(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0)})}),document.body.style.overflow="hidden";else{o(!1);const u=setTimeout(()=>{i(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(u),document.body.style.overflow=""}}},[e]),!a)return null;const c=l.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[l.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),l.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out ${s?"translate-y-0":"translate-y-full"}`,onClick:u=>u.stopPropagation(),children:l.jsx("div",{className:"pb-safe pt-4",children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})})]});return Zn.createPortal(c,document.body)}const ro=Cs((e,t)=>({state:"idle",source:null,message:null,abortController:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null})}}));function He({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:o,mode:a="mobile",position:i}){const c=$e(),[u,f]=d.useState(!1),[p,m]=d.useState(null),{playTrack:v,playAlbum:w,addToQueue:g,playNext:S,shuffleArtist:y,toggleShuffle:h}=we(),{startSync:x,completeSync:N}=ro(),{genres:b}=xe();if(!e||!t)return null;const j=z=>{if(!z)return null;const X=b.find(ne=>{var J;return((J=ne.Name)==null?void 0:J.toLowerCase())===z.toLowerCase()});return(X==null?void 0:X.Id)||null},k=async z=>{var X,ne,J,ce,ae;if(e){if(z.startsWith("goTo")){if(r(),o&&o(),z==="goToArtist"){const B=((ne=(X=e.ArtistItems)==null?void 0:X[0])==null?void 0:ne.Id)||((ce=(J=e.AlbumArtists)==null?void 0:J[0])==null?void 0:ce.Id);B&&c(`/artist/${B}`)}else if(z==="goToAlbum")e.AlbumId&&c(`/album/${e.AlbumId}`);else if(z==="goToGenre"){const B=(ae=e.Genres)==null?void 0:ae[0];if(B){const A=j(B);if(A)c(`/genre/${A}`);else{const C=(await T.getGenres()).find(O=>{var D;return((D=O.Name)==null?void 0:D.toLowerCase())===B.toLowerCase()});C!=null&&C.Id&&c(`/genre/${C.Id}`)}}}return}f(!0),m(z);try{switch(t){case"album":{if(z==="play"){const B=await T.getAlbumTracks(e.Id),{shuffle:A}=we.getState();A&&h(),w(B)}else if(z==="shuffle"){const B=await T.getAlbumTracks(e.Id),{shuffle:A}=we.getState();A&&h(),w(B),requestAnimationFrame(()=>{const{shuffle:P}=we.getState();P||h()})}else if(z==="playNext"){const B=await T.getAlbumTracks(e.Id);S(B)}else if(z==="addToQueue"){const B=await T.getAlbumTracks(e.Id);g(B)}else if(z==="sync"){x("context-menu",`Syncing ${e.Name}...`);try{await T.getAlbumTracks(e.Id),N(!0,`${e.Name} synced`)}catch{N(!1,`Failed to sync ${e.Name}`)}}break}case"song":{if(z==="play")console.log("ContextMenu: Playing song",e.Name),v(e);else if(z==="playNext")console.log("ContextMenu: Adding song to play next",e.Name),S([e]);else if(z==="addToQueue")console.log("ContextMenu: Adding song to queue",e.Name),g([e]);else if(z==="sync"){x("context-menu",`Syncing ${e.Name}...`);try{const B=await T.getSongById(e.Id);if(B.Genres){const A=await T.getGenres();B.Genres.forEach(P=>{const C=A.find(O=>{var D;return((D=O.Name)==null?void 0:D.toLowerCase())===P.toLowerCase()});C!=null&&C.Id&&xe.getState().clearGenreSongsForGenre(C.Id)})}N(!0,`${e.Name} synced`)}catch{N(!1,`Failed to sync ${e.Name}`)}}break}case"artist":{if(z==="shuffle"){const{songs:B}=await T.getArtistItems(e.Id);y(B)}else if(z==="playNext"){const{songs:B}=await T.getArtistItems(e.Id);S(B)}else if(z==="addToQueue"){const{songs:B}=await T.getArtistItems(e.Id);g(B)}else if(z==="sync"){x("context-menu",`Syncing ${e.Name}...`);try{await T.getArtistItems(e.Id),N(!0,`${e.Name} synced`)}catch{N(!1,`Failed to sync ${e.Name}`)}}break}case"playlist":{if(z==="play"){const B=await T.getAlbumTracks(e.Id),{shuffle:A}=we.getState();A&&h(),w(B)}else if(z==="shuffle"){const B=await T.getAlbumTracks(e.Id),{shuffle:A}=we.getState();A&&h(),w(B),requestAnimationFrame(()=>{const{shuffle:P}=we.getState();P||h()})}else if(z==="playNext"){const B=await T.getAlbumTracks(e.Id);S(B)}else if(z==="addToQueue"){const B=await T.getAlbumTracks(e.Id);g(B)}break}}r()}catch(B){console.error("Context menu action failed:",B)}finally{f(!1),m(null)}}},R=(()=>{var z,X,ne,J,ce,ae,B,A;switch(t){case"album":{const P=((X=(z=e.ArtistItems)==null?void 0:z[0])==null?void 0:X.Name)||((J=(ne=e.AlbumArtists)==null?void 0:ne[0])==null?void 0:J.Name)||"Artist",C=((ce=e.Genres)==null?void 0:ce[0])||"Genre";return[{id:"play",label:"Play",icon:nt},{id:"shuffle",label:"Shuffle",icon:en},{id:"playNext",label:"Play Next",icon:Ws},{id:"addToQueue",label:"Add to Queue",icon:Ht},{id:"goToArtist",label:`Go to ${P}`,icon:st},{id:"goToGenre",label:`Go to ${C}`,icon:Wn},{id:"sync",label:"Sync",icon:es}]}case"song":{const P=((B=(ae=e.ArtistItems)==null?void 0:ae[0])==null?void 0:B.Name)||e.AlbumArtist||"Artist",C=e.Album||"Album",O=((A=e.Genres)==null?void 0:A[0])||"Genre";return[{id:"play",label:"Play",icon:nt},{id:"playNext",label:"Play Next",icon:Ws},{id:"addToQueue",label:"Add to Queue",icon:Ht},{id:"goToArtist",label:`Go to ${P}`,icon:st},{id:"goToAlbum",label:`Go to ${C}`,icon:Ge},{id:"goToGenre",label:`Go to ${O}`,icon:Wn},{id:"sync",label:"Sync",icon:es}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:en},{id:"playNext",label:"Play Next",icon:Ws},{id:"addToQueue",label:"Add to Queue",icon:Ht},{id:"sync",label:"Sync",icon:es}];case"playlist":return[{id:"play",label:"Play",icon:nt},{id:"shuffle",label:"Shuffle",icon:en},{id:"playNext",label:"Play Next",icon:Ws},{id:"addToQueue",label:"Add to Queue",icon:Ht}];default:return[]}})(),L=e.Name||"Unknown";if(a==="desktop"&&n){const X=Math.min(400,R.length*44+8);let ne=(i==null?void 0:i.x)||100,J=(i==null?void 0:i.y)||100;return ne+240>window.innerWidth&&(ne=window.innerWidth-240-10),J+X>window.innerHeight&&(J=window.innerHeight-X-10),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),l.jsx("div",{className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:ne,top:J,zIndex:s},onClick:ce=>ce.stopPropagation(),children:l.jsx("div",{className:"space-y-0",children:R.map(ce=>{const ae=ce.icon,B=u&&p===ce.id;return l.jsxs("button",{onClick:()=>k(ce.id),disabled:u,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[l.jsx(ae,{className:"w-4 h-4 text-white flex-shrink-0"}),l.jsx("span",{className:"flex-1 text-sm text-white",children:ce.label}),B&&l.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},ce.id)})})})]})}return l.jsx(Vi,{isOpen:n,onClose:r,zIndex:s,children:l.jsxs("div",{className:"pb-6",children:[l.jsx("div",{className:"mb-4 ml-4",children:l.jsx("div",{className:"text-lg font-semibold text-white break-words",children:L})}),l.jsx("div",{className:"space-y-1",children:R.map(z=>{const X=z.icon,ne=u&&p===z.id;return l.jsxs("button",{onClick:()=>k(z.id),disabled:u,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(X,{className:"w-5 h-5 text-white"}),l.jsx("span",{className:"flex-1 text-left text-white font-medium",children:z.label}),ne&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},z.id)})})]})})}function Ie({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=d.useRef(null),o=d.useRef(null),a=d.useRef(!1),i=d.useRef(null),c=d.useRef(!1),u=d.useCallback(m=>{m.preventDefault(),a.current=!1,c.current=!1,o.current=m.target,"touches"in m&&m.touches.length>0?i.current={x:m.touches[0].clientX,y:m.touches[0].clientY}:i.current=null,s.current=setTimeout(()=>{c.current||(a.current=!0,e(m))},n)},[e,n]),f=d.useCallback(m=>{if(!i.current||m.touches.length===0)return;const v=m.touches[0].clientX,w=m.touches[0].clientY,g=Math.abs(v-i.current.x),S=Math.abs(w-i.current.y);Math.sqrt(g*g+S*S)>r&&(c.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),p=d.useCallback(m=>{const v=a.current;s.current&&(clearTimeout(s.current),s.current=null),t&&o.current===m.target&&!v&&!c.current&&t(m),a.current=!1,c.current=!1,o.current=null,i.current=null},[t]);return{onMouseDown:u,onTouchStart:u,onTouchMove:f,onMouseUp:p,onMouseLeave:m=>{s.current&&(clearTimeout(s.current),s.current=null),a.current=!1,c.current=!1,o.current=null,i.current=null},onTouchEnd:p}}function qs({track:e,index:t,isCurrent:n,isPlaying:r,showRemoveButton:s=!0,onClick:o,onRemove:a,onReorderDragStart:i,onReorderDrop:c,onContextMenu:u,isDragOver:f,onDragEnterRow:p}){var v,w;const m=Ie({onLongPress:g=>{g.preventDefault(),u(e)}});return l.jsxs("div",{draggable:!n,onDragOver:g=>{g.preventDefault(),g.dataTransfer.dropEffect="move"},onDragEnter:g=>{g.preventDefault(),n||p(t)},onDrop:g=>!n&&c(g,t),className:`queue-row flex items-center gap-3 p-3 ${n?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${n?"bg-zinc-900":""} relative`,onClick:n?void 0:o,onContextMenu:g=>{g.preventDefault(),u(e)},children:[f&&!n&&l.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),l.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:l.jsx(it,{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0",...m,children:[l.jsx("div",{className:`text-sm font-medium truncate ${n?"text-[var(--accent-color)]":"text-white"}`,children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((w=(v=e.ArtistItems)==null?void 0:v[0])==null?void 0:w.Name)||"Unknown Artist"})]}),n?l.jsx("button",{onClick:g=>{g.stopPropagation(),o()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2",children:r?l.jsx(An,{className:"w-5 h-5"}):l.jsx(nt,{className:"w-5 h-5"})}):l.jsx(l.Fragment,{children:s&&l.jsxs(l.Fragment,{children:[l.jsx("button",{draggable:!0,onDragStart:g=>i(g,t),className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing",children:l.jsx(Bx,{className:"w-4 h-4"})}),a&&l.jsx("button",{onClick:g=>{g.stopPropagation(),a()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}function E0({onClose:e,onNavigateFromContextMenu:t}){const n=d.useRef(null),[r,s]=d.useState(!1),[o,a]=d.useState(null),[i,c]=d.useState(null),[u,f]=d.useState(null),{songs:p,currentIndex:m,clearQueue:v,isPlaying:w,shuffle:g,repeat:S,togglePlayPause:y,toggleShuffle:h,toggleRepeat:x,next:N,previous:b,skipToTrack:j,removeFromQueue:k,reorderQueue:I,isFetchingRecommendations:R,isLoadingMoreSongs:L,shuffleHasMoreSongs:z}=we(),{showQueueRecommendations:X,setShowQueueRecommendations:ne,recommendationsQuality:J}=Dt(),ce=(V,K)=>{V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",K.toString()),f(K);const Q=V.currentTarget,le=Q==null?void 0:Q.closest(".queue-row");if(le&&V.dataTransfer.setDragImage){const pe=le.querySelector(".queue-drag-art")??le,ie=pe.getBoundingClientRect();V.dataTransfer.setDragImage(pe,ie.width/2,ie.height/2)}},ae=(V,K)=>{V.preventDefault();const Q=V.dataTransfer.getData("text/plain")||V.dataTransfer.getData("text/html"),le=parseInt(Q,10);if(Number.isNaN(le))return;const pe=p[u??le],ie=p[K];if(pe&&ie&&pe.source!==ie.source){c(null),f(null);return}le!==K&&I(le,K),c(null),f(null)},B=m>=0?p[m]:null,A=p.filter((V,K)=>K<m),P=p.filter((V,K)=>V.source==="user"&&K>m),C=p.filter((V,K)=>V.source==="recommendation"&&K>m),O=m>=0&&m<p.length-1,D=m>0;p.length===0||P.length===0&&C.length;const re=V=>{a(V),s(!0)},Z=V=>{if(u==null)return;const K=p[u],Q=p[V];if(!(!K||!Q)){if(K.source!==Q.source){c(null);return}c(V)}};return l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 max-w-[768px] mx-auto w-full",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[l.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{paddingBottom:"8rem"},children:p.length===0&&!B?l.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:l.jsx("p",{children:"Queue is empty"})}):l.jsxs("div",{children:[A.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 pb-0 pt-7 text-base font-bold text-white tracking-wider",children:"Previous"}),A.map((V,K)=>{const Q=p.indexOf(V);return l.jsx(qs,{track:V,index:Q,isCurrent:!1,isPlaying:!1,showRemoveButton:!1,onClick:()=>j(Q),onReorderDragStart:ce,onReorderDrop:ae,onContextMenu:re,isDragOver:!1,onDragEnterRow:Z},`${V.Id}-${K}`)})]}),B&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 pb-0 pt-7 text-base font-bold text-white tracking-wider",children:"Now Playing"}),l.jsx(qs,{track:B,index:m,isCurrent:!0,isPlaying:w,showRemoveButton:!1,onClick:y,onReorderDragStart:ce,onReorderDrop:ae,onContextMenu:re,isDragOver:!1,onDragEnterRow:Z})]}),P.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[l.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Coming Up"}),l.jsx("button",{onClick:()=>{const K=p.filter((le,me)=>me<=m||le.source==="recommendation"),Q=Math.min(m,K.length-1);we.setState({songs:K,currentIndex:Q,standardOrder:K.filter(le=>le.source==="user").map(le=>le.Id),shuffleOrder:K.filter(le=>le.source==="user").map(le=>le.Id)})},className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]}),P.map((V,K)=>{const Q=p.indexOf(V);return l.jsx(qs,{track:V,index:Q,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>j(Q),onRemove:()=>k(Q),onReorderDragStart:ce,onReorderDrop:ae,onContextMenu:re,isDragOver:i===Q,onDragEnterRow:Z},`${V.Id}-${K}`)}),L&&l.jsxs("div",{className:"flex items-center justify-center py-4",children:[l.jsx(Yt,{size:"sm"}),l.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading more songs..."})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[l.jsxs("div",{className:"text-base font-bold text-white tracking-wider flex items-baseline gap-2",children:["Recommendations",J==="degraded"&&l.jsx("span",{className:"text-xs text-gray-400 font-normal",children:"Sync your library for better results"}),J==="failed"&&l.jsx("span",{className:"text-xs text-red-400 font-normal",children:"(Unable to generate)"})]}),l.jsx("button",{onClick:()=>{const V=!X;if(ne(V),!V){const K=p.filter(le=>le.source!=="recommendation"),Q=Math.min(m,K.length-1);we.setState({songs:K,currentIndex:Q,standardOrder:K.filter(le=>le.source==="user").map(le=>le.Id),shuffleOrder:K.filter(le=>le.source==="user").map(le=>le.Id)})}},className:`relative w-12 h-6 rounded-full transition-colors ${X?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:l.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${X?"translate-x-6":"translate-x-0"}`})})]}),X&&l.jsxs(l.Fragment,{children:[C.map((V,K)=>{const Q=p.indexOf(V);return l.jsx(qs,{track:V,index:Q,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>j(Q),onRemove:()=>k(Q),onReorderDragStart:ce,onReorderDrop:ae,onContextMenu:re,isDragOver:i===Q,onDragEnterRow:Z},`${V.Id}-${K}`)}),R&&l.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:l.jsx(Yt,{})})]})]})]})}),l.jsx(He,{item:o,itemType:o?"song":null,isOpen:r,onClose:()=>{s(!1),a(null)},onNavigate:t}),l.jsx("div",{ref:n,className:"px-6 pt-2 space-y-6 flex-shrink-0",style:{paddingBottom:"1.5rem"},children:l.jsxs("div",{className:"flex items-center justify-center gap-8",children:[l.jsx("button",{onClick:h,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${g?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(en,{className:"w-6 h-6"})}),l.jsx("button",{onClick:b,disabled:!D,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${D?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:l.jsx(Hi,{className:"w-8 h-8"})}),l.jsx("button",{onClick:y,className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:w?l.jsx(An,{className:"w-8 h-8"}):l.jsx(nt,{className:"w-8 h-8"})}),l.jsx("button",{onClick:N,disabled:!O,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${O?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:l.jsx(Ol,{className:"w-8 h-8"})}),l.jsx("button",{onClick:x,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${S!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:S==="one"?l.jsx(Ui,{className:"w-6 h-6"}):l.jsx(Bi,{className:"w-6 h-6"})})]})})]})}function P0({onClose:e}){const t=It(),n=Gi(),r=t||n,[s,o]=d.useState(null),[a,i]=d.useState(!1);return d.useEffect(()=>{(async()=>{if(!r){o(null);return}i(!0);try{const u=await T.getLyrics(r.Id);o(u)}catch(u){console.error("Failed to fetch lyrics:",u),o(null)}finally{i(!1)}})()},[r]),r?l.jsx("div",{className:"fixed left-0 right-0 bg-zinc-900 z-[55] flex flex-col",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:l.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 px-6 py-4 relative",children:[l.jsx("div",{className:"sticky left-0 right-0 h-16 bg-gradient-to-b from-zinc-900 via-zinc-900/50 to-transparent pointer-events-none z-10 -mx-6",style:{top:"-24px"}}),a?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"text-gray-400",children:"Loading lyrics..."})}):s?l.jsx("div",{className:"max-w-[768px] mx-auto pb-8",children:l.jsx("div",{className:"text-white text-left whitespace-pre-line leading-relaxed",children:s.split(`
`).map((c,u)=>l.jsx("div",{className:"mb-2",children:c},u))})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"text-gray-400 text-center",children:"This song has no lyrics"})}),l.jsx("div",{className:"sticky left-0 right-0 h-16 bg-gradient-to-t from-zinc-900 via-zinc-900/50 to-transparent pointer-events-none z-10 -mx-6",style:{bottom:"-16px"}})]})}):null}function M0({onClose:e,onClosingStart:t,closeRef:n}){const r=$e(),{songs:s,currentIndex:o,isPlaying:a,currentTime:i,duration:c,shuffle:u,repeat:f,togglePlayPause:p,next:m,previous:v,seek:w,setVolume:g,toggleShuffle:S,toggleRepeat:y,playTrack:h}=we(),x=It(),N=Gi(),b=x||N,[j,k]=d.useState(!1),[I,R]=d.useState(!1),[L,z]=d.useState(!1),[X,ne]=d.useState(!1),[J,ce]=d.useState(!1),[ae,B]=d.useState(!1),A=d.useRef(null),P=d.useRef(null),C=d.useRef(null),O=d.useRef(null),D=d.useRef(!1),re=d.useRef(null);d.useEffect(()=>{const M=window.getComputedStyle(document.body).overflowY,Y=window.getComputedStyle(document.documentElement).overflowY,H=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const se=document.getElementById("root");return se&&(se.style.overflowY="hidden"),()=>{document.body.style.overflowY=M,document.documentElement.style.overflowY=Y,se&&(se.style.overflowY=H!=="N/A"?H:"")}},[]),d.useEffect(()=>{requestAnimationFrame(()=>{ce(!0)})},[]);const Z=o>=0&&o<s.length-1,V=o>0;d.useEffect(()=>{g(1)},[g]),d.useEffect(()=>{(async()=>{if(!b){z(!1);return}try{const Y=await T.getLyrics(b.Id),H=Y!==null&&Y.trim().length>0;z(H)}catch(Y){console.warn("[PlayerModal] Lyrics check failed:",Y),z(!1)}})()},[b]);const K=M=>{if(!M)return"Unknown";if(M.Name&&M.Name.trim())return M.Name;const Y=M.Path;return Y&&typeof Y=="string"&&(Y.split("/").pop()||Y.split("\\").pop())||"Unknown"},Q=M=>{var Y,H;return M&&(M.AlbumArtist||((H=(Y=M.ArtistItems)==null?void 0:Y[0])==null?void 0:H.Name))||""};if(d.useEffect(()=>{"mediaSession"in navigator&&b&&(navigator.mediaSession.metadata=new MediaMetadata({title:K(b),artist:Q(b),album:b.Album||"",artwork:[{src:T.getAlbumArtUrl(b.AlbumId||b.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",p),navigator.mediaSession.setActionHandler("pause",p),navigator.mediaSession.setActionHandler("previoustrack",v),navigator.mediaSession.setActionHandler("nexttrack",m))},[b,a,p,m,v]),d.useEffect(()=>{B(!1)},[b==null?void 0:b.Id]),!b)return null;const le=c>0?i/c*100:0,me=M=>{const Y=Math.floor(M/60),H=Math.floor(M%60);return`${Y}:${H.toString().padStart(2,"0")}`},pe=()=>{if(b.Name&&b.Name.trim())return b.Name;const M=b.Path;return M&&typeof M=="string"&&(M.split("/").pop()||M.split("\\").pop())||"Unknown"},ie=()=>{var M,Y;return b.AlbumArtist||((Y=(M=b.ArtistItems)==null?void 0:M[0])==null?void 0:Y.Name)},W=b.AlbumId&&b.Album&&b.Album.trim(),de=M=>{if(!A.current||!c||D.current)return;const Y=A.current.getBoundingClientRect(),H=(M.clientX-Y.left)/Y.width;w(Math.max(0,Math.min(1,H))*c)},oe=M=>{if(!A.current||!c)return;D.current=!0,re.current=M.clientX;const Y=A.current.getBoundingClientRect(),H=(M.clientX-Y.left)/Y.width;w(Math.max(0,Math.min(1,H))*c)},_e=()=>{D.current=!1,re.current=null},Ve=M=>{if(!A.current||!c)return;M.stopPropagation(),D.current=!0;const Y=M.touches[0],H=A.current.getBoundingClientRect(),se=(Y.clientX-H.left)/H.width;w(Math.max(0,Math.min(1,se))*c)},Fe=M=>{if(!D.current||!A.current||!c)return;M.stopPropagation(),M.preventDefault();const Y=M.touches[0],H=A.current.getBoundingClientRect(),se=(Y.clientX-H.left)/H.width;w(Math.max(0,Math.min(1,se))*c)},We=M=>{M.stopPropagation(),D.current=!1,re.current=null};d.useEffect(()=>{const M=H=>{if(!D.current||!A.current||!c)return;const se=A.current.getBoundingClientRect(),ge=(H.clientX-se.left)/se.width;w(Math.max(0,Math.min(1,ge))*c)},Y=()=>{D.current&&(D.current=!1,re.current=null)};return document.addEventListener("mousemove",M),document.addEventListener("mouseup",Y),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",Y)}},[c,w]);const $=()=>{ne(!0),t==null||t(),setTimeout(()=>{e()},300)};d.useEffect(()=>(n&&(n.current=$),()=>{n&&(n.current=null)}),[n]);const te=M=>{j||I||(P.current=M.touches[0].clientY,C.current=Date.now())},U=M=>{if(j||I||P.current===null)return;const H=M.touches[0].clientY-P.current;if(H>0&&O.current){const se=Math.min(H,window.innerHeight*.5);O.current.style.transform=`translateY(${se}px)`}},E=M=>{if(j||I||P.current===null||C.current===null){P.current=null,C.current=null,O.current&&(O.current.style.transform="");return}const H=M.changedTouches[0].clientY-P.current,se=Date.now()-C.current,ge=50,G=.3;O.current&&(O.current.style.transform="");const ue=H/se;(H>ge||H>30&&ue>G)&&$(),P.current=null,C.current=null};return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }

      @media (min-width: 1024px) {
        .lg\\:max-w-\\[864px\\] { max-width: 864px; }
      }
    `}),l.jsxs("div",{ref:O,onTouchStart:te,onTouchMove:U,onTouchEnd:E,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex flex-col transition-transform duration-300 ease-out ${X?"translate-y-full":J?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:P.current===null?"transform 300ms ease-out":"none"},children:[l.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[l.jsx("button",{onClick:$,className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:l.jsx($i,{className:"w-8 h-8"})}),I&&b&&l.jsx("h2",{className:"absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:pe()}),l.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[L&&!j&&l.jsx("button",{onClick:()=>R(!I),className:`transition-colors pr-2 ${I?"text-[var(--accent-color)] hover:text-[var(--accent-color)]":"text-white hover:text-zinc-300"}`,children:l.jsx(r0,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>{j||R(!1),k(!j)},className:"text-white hover:text-zinc-300 transition-colors",children:j?l.jsx(y0,{className:"w-6 h-6"}):l.jsx(Zx,{className:"w-6 h-6"})})]})]}),j?l.jsx(E0,{onClose:()=>k(!1),onNavigateFromContextMenu:()=>{$()}}):l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full relative",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[l.jsx("div",{className:"flex-1 overflow-hidden min-h-0 flex items-center justify-center",children:l.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8 md:pr-0",children:l.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[l.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:l.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 bg-zinc-900 ${ae?"":"shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:ae?l.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-zinc-900 flex items-center justify-center relative",children:l.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:M=>{console.error("Failed to load vinyl image"),M.currentTarget.style.display="none"}})}):l.jsx(it,{src:T.getAlbumArtUrl(b.AlbumId||b.Id),alt:b.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>B(!0)})})}),l.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[l.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:pe()}),ie()&&l.jsxs("button",{onClick:()=>{var Y,H;const M=(H=(Y=b.ArtistItems)==null?void 0:Y[0])==null?void 0:H.Id;M&&(e(),r(`/artist/${M}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-gray-400 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[l.jsx(st,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("span",{className:"break-words min-w-0",children:ie()})]}),W&&l.jsxs("button",{onClick:()=>{e(),r(`/album/${b.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-gray-400 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[l.jsx(Ge,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("span",{className:"break-words min-w-0",children:b.Album})]})]})]})})}),l.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[l.jsx("div",{className:"space-y-3 px-4 w-full",children:l.jsxs("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto",children:[l.jsx("div",{ref:A,className:"h-2 bg-zinc-800 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:de,onMouseDown:oe,onMouseUp:_e,onMouseLeave:_e,onTouchStart:Ve,onTouchMove:Fe,onTouchEnd:We,children:l.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${le}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:le>=100?"9999px":"0",borderBottomRightRadius:le>=100?"9999px":"0"}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[l.jsx("span",{children:me(i)}),l.jsx("span",{children:me(c)})]})]})}),l.jsxs("div",{className:"flex items-center justify-center gap-8 px-6",children:[l.jsx("button",{onClick:S,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${u?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(en,{className:"w-6 h-6"})}),l.jsx("button",{onClick:v,disabled:!V,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${V?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Hi,{className:"w-8 h-8"})}),l.jsx("button",{onClick:()=>{x?p():b&&h(b)},className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:a&&x?l.jsx(An,{className:"w-8 h-8"}):l.jsx(nt,{className:"w-8 h-8"})}),l.jsx("button",{onClick:m,disabled:!Z,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Z?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Ol,{className:"w-8 h-8"})}),l.jsx("button",{onClick:y,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${f!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:f==="one"?l.jsx(Ui,{className:"w-6 h-6"}):l.jsx(Bi,{className:"w-6 h-6"})})]})]})]}),I&&l.jsx(P0,{onClose:()=>R(!1)})]})]})}function T0(){var A,P;const{songs:e,currentIndex:t,isPlaying:n,currentTime:r,duration:s,audioElement:o,setAudioElement:a,togglePlayPause:i,next:c,setCurrentTime:u,setDuration:f,playTrack:p,repeat:m,shuffle:v,toggleShuffle:w,toggleRepeat:g,previous:S,seek:y}=we(),h=It(),x=Gi(),[N,b]=d.useState(!1),[j,k]=d.useState(!1),[I,R]=d.useState(!1),L=d.useRef(null),z=d.useRef(null),X=an();d.useEffect(()=>{N&&(k(!0),setTimeout(()=>{b(!1),k(!1)},300))},[X.pathname]),d.useEffect(()=>{const C=()=>{N&&z.current&&z.current()};return window.addEventListener("closePlayerModal",C),()=>{window.removeEventListener("closePlayerModal",C)}},[N]);const ne=()=>{k(!0),setTimeout(()=>{b(!1),k(!1)},300)};d.useEffect(()=>{L.current||(L.current=new Audio,L.current.setAttribute("playsinline","true"),L.current.setAttribute("preload","auto"),a(L.current));const C=L.current;if(!C)return;const O=()=>{u(C.currentTime)},D=()=>{f(C.duration)},re=async()=>{if(h)try{await T.markItemAsPlayed(h.Id),setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:h.Id}}))},4e3)}catch{}c()},Z=()=>{we.setState({isPlaying:!0})},V=()=>{we.setState({isPlaying:!1})};return C.addEventListener("timeupdate",O),C.addEventListener("loadedmetadata",D),C.addEventListener("ended",re),C.addEventListener("play",Z),C.addEventListener("pause",V),()=>{C.removeEventListener("timeupdate",O),C.removeEventListener("loadedmetadata",D),C.removeEventListener("ended",re),C.removeEventListener("play",Z),C.removeEventListener("pause",V)}},[a,u,f,c]),d.useEffect(()=>{L.current&&(L.current.volume=we.getState().volume)},[]),d.useEffect(()=>{if(h&&!n&&o){const C=T.serverBaseUrl,O=C?`${C}/Audio/${h.Id}/stream?static=true`:"";o.src!==O&&(o.src=O,o.load())}},[h,n,o]),d.useEffect(()=>{if(o&&h&&!n){const C=T.serverBaseUrl,O=C?`${C}/Audio/${h.Id}/stream?static=true`:"";o.src!==O&&(o.src=O,o.load())}},[o,h,n]);const J=h||x;d.useEffect(()=>{R(!1)},[J==null?void 0:J.Id]);const ce=s>0?r/s*100:0,ae=e.length>0&&(t<0||t<e.length-1||m==="all"),B=t>0;return J?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer",style:{bottom:"calc(4rem + env(safe-area-inset-bottom) - 8px)"},onClick:()=>{b(!0)},children:[l.jsxs("div",{className:"flex items-center gap-3 py-3 pr-3 pl-4",children:[!I&&l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:l.jsx(it,{src:T.getAlbumArtUrl((h||J).AlbumId||(h||J).Id,96),alt:(h||J).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>R(!0)},(h==null?void 0:h.Id)||J.Id)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate",children:(h||J).Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:(h||J).AlbumArtist||((P=(A=(h||J).ArtistItems)==null?void 0:A[0])==null?void 0:P.Name)||"Unknown Artist"})]}),l.jsxs("div",{className:"flex items-center md:hidden",children:[l.jsx("button",{onClick:C=>{C.stopPropagation(),h?i():J&&p(J)},className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors ml-4",children:n&&h?l.jsx(An,{className:"w-5 h-5"}):l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{onClick:C=>{C.stopPropagation(),ae&&c()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ml-1 ${ae?"text-white hover:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,disabled:!ae,children:l.jsx(Ol,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-1 ml-4",children:[l.jsx("button",{onClick:C=>{C.stopPropagation(),w()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${v?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(en,{className:"w-5 h-5"})}),l.jsx("button",{onClick:C=>{C.stopPropagation(),B&&S()},disabled:!B,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${B?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Hi,{className:"w-5 h-5"})}),l.jsx("button",{onClick:C=>{C.stopPropagation(),h?i():J&&p(J)},className:"w-10 h-10 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&h?l.jsx(An,{className:"w-5 h-5"}):l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{onClick:C=>{C.stopPropagation(),ae&&c()},disabled:!ae,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${ae?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Ol,{className:"w-5 h-5"})}),l.jsx("button",{onClick:C=>{C.stopPropagation(),g()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${m!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:m==="one"?l.jsx(Ui,{className:"w-5 h-5"}):l.jsx(Bi,{className:"w-5 h-5"})})]})]}),J&&l.jsx("div",{className:"h-1 bg-zinc-800 hover:bg-zinc-600 cursor-pointer transition-colors duration-200",onClick:C=>{if(C.stopPropagation(),!s)return;const O=C.currentTarget.getBoundingClientRect(),D=(C.clientX-O.left)/O.width;y(Math.max(0,Math.min(1,D))*s)},onTouchStart:C=>{if(C.stopPropagation(),!s)return;const O=C.touches[0],D=C.currentTarget.getBoundingClientRect(),re=(O.clientX-D.left)/D.width;y(Math.max(0,Math.min(1,re))*s)},children:l.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${ce}%`}})})]}),N&&l.jsx(M0,{onClose:ne,onClosingStart:()=>k(!0),closeRef:z})]}):null}function R0(){const{state:e,message:t,cancelSync:n}=ro();if(e==="idle")return null;const r=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}};return l.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${r()} transition-colors duration-300`,style:{height:"28px",top:"0px"},children:l.jsxs("div",{className:"max-w-[768px] mx-auto h-full flex items-center justify-between px-4",children:[l.jsx("span",{className:"text-white text-sm font-medium truncate",children:t}),e==="syncing"&&l.jsx("button",{onClick:n,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors",children:"Cancel"})]})})}async function L0({currentTrack:e,queue:t,recentQueue:n,lastPlayedTrack:r}){var y,h;const s=((h=(y=import.meta)==null?void 0:y.env)==null?void 0:h.DEV)??!1;if(!e)return s&&console.log("[Recommendations] No current track"),[];const{songs:o,genreSongs:a,genres:i}=xe.getState(),c=e.Genres||[];let u=[];if(c.length>0&&i.length>0){const x=i.filter(N=>N.Name&&c.some(b=>b.toLowerCase()===N.Name.toLowerCase())).map(N=>N.Id).filter(N=>a[N]&&a[N].length>0);x.length>0&&(u=x.flatMap(N=>a[N]),s&&console.log(`[Recommendations] Using ${u.length} pre-filtered songs from ${x.length} matching genres`))}if(u.length===0&&o.length>0&&(u=o,s&&console.log(`[Recommendations] Using ${u.length} songs from main cache`)),u.length===0){const x=Object.values(a).flat();x.length>0&&(u=x,s&&console.log(`[Recommendations] Using ${u.length} songs from all genre caches`))}if(u.length===0){s&&console.log("[Recommendations] No cached songs available");const{setRecommendationsQuality:x}=Dt.getState();return x("failed"),console.warn("Couldn't generate recommendations. Try syncing your library"),[]}s&&(console.log("[Recommendations] Using",u.length,"available songs"),console.log("[Recommendations] Current track genres:",c,"(count:",c.length+")"),console.log("[Recommendations] Current track year:",e.ProductionYear));let f=[],p=!1;const m=()=>f.flatMap(x=>{var N;return((N=x.ArtistItems)==null?void 0:N.map(b=>b.Id))||[]});if(c.length>0){const x=u.filter(N=>{var R,L;const b=(R=N.Genres)==null?void 0:R.some(z=>c.some(X=>z.toLowerCase()===X.toLowerCase())),j=N.Id!==e.Id,k=!t.some(z=>z.Id===N.Id),I=!((L=N.ArtistItems)!=null&&L.some(z=>m().includes(z.Id)));return b&&j&&k&&console.log("[DEBUG] Genre match found:",{songName:N.Name,songGenres:N.Genres,songYear:N.ProductionYear,trackGenres:c}),b&&j&&k&&I});f.push(...x.slice(0,8)),s&&console.log(`[Recommendations] Found ${x.length} exact genre matches`),c.length>0&&x.length>0?p=!0:c.length>0&&x.length===0&&(console.warn("[Recommendations] No genre matches found - falling back to year/artist matching"),p=!1)}else s&&console.log("[Recommendations] No genres on current track");const v=e.ProductionYear;if(v&&f.length<10){const x=[{range:3,years:Array.from({length:7},(j,k)=>v-3+k)},{range:6,years:Array.from({length:13},(j,k)=>v-6+k)},{range:10,years:Array.from({length:21},(j,k)=>v-10+k)}];console.log("[DEBUG] Year ranges for current year",v,":"),x.forEach(({range:j,years:k})=>{console.log(`[DEBUG] ${j} years: ${k.join(", ")}`)});let N=[];for(const{range:j,years:k}of x){if(N.length>=12)break;const I=u.filter(R=>{var ce;const L=!t.some(ae=>ae.Id===R.Id),z=!f.some(ae=>ae.Id===R.Id),X=R.Id!==e.Id,ne=!((ce=R.ArtistItems)!=null&&ce.some(ae=>m().includes(ae.Id))),J=R.ProductionYear&&k.includes(R.ProductionYear);return J&&X&&L&&z&&ne&&console.log(`[DEBUG] Year match ${j}: ${R.Name} (${R.ProductionYear})`),J&&X&&L&&z&&ne});N.push(...I),s&&console.log(`[Recommendations] ${j} years: found ${I.length} songs (${N.length} total so far)`)}const b=N.slice(0,12);f.push(...b),s&&console.log(`[Recommendations] Total year matches used: ${b.length}`)}const g=z0(f).slice(0,12),{setRecommendationsQuality:S}=Dt.getState();return g.length===0?S("failed"):!p&&c.length>0?S("degraded"):S("good"),s&&(console.log(`[Recommendations] Generated ${g.length} recommendations`),g.length>0&&console.log("[Recommendations] Sample:",g.slice(0,3).map(x=>x.Name))),{recommendations:g,hasGenreMatches:p}}function z0(e){if(e.length<=1)return[...e];const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function O0(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function _0(){const{songs:e,currentIndex:t,addToQueue:n,refreshCurrentTrack:r,isFetchingRecommendations:s,setIsFetchingRecommendations:o}=we(),{showQueueRecommendations:a}=Dt(),i=d.useRef([]),c=d.useRef(!1);d.useEffect(()=>{i.current=e.slice(-20)},[e]),d.useEffect(()=>{const u=e.slice(t+1).filter(m=>m.source==="recommendation").length;if(!!!(a&&!c.current&&t>=0&&u<12))return;(async()=>{console.log("[Recommendations] Starting fetch, setting isRecommending = true"),c.current=!0,o(!0);const m=setTimeout(()=>{console.log("[Recommendations] Safety timeout triggered, resetting flags"),c.current=!1,o(!1)},3e4);try{await r();const v=e[t];if(!v)return;const w=[v],g=[t-1,t+1,t+2];for(const k of g)if(k>=0&&k<e.length&&w.length<3){const I=e[k];I&&!w.some(R=>R.Id===I.Id)&&w.push(I)}console.log("[Recommendations] Using seed tracks:",w.map((k,I)=>{var R;return`${I+1}. ${k.Name} (${k.ProductionYear}) [${((R=k.Genres)==null?void 0:R.join(", "))||"no genres"}]`}));const S=[];for(const k of w){console.log(`[Recommendations] Generating recommendations for seed: ${k.Name}`);const I=await L0({currentTrack:k,queue:e,recentQueue:i.current,lastPlayedTrack:null});I.recommendations&&Array.isArray(I.recommendations)&&S.push(I)}const y=S.filter(k=>k.hasGenreMatches);if(console.log(`[Recommendations] ${y.length} out of ${w.length} seeds found genre matches`),y.length===0){const{setRecommendationsQuality:k}=Dt.getState();k("degraded"),console.log("[Recommendations] No genre matches found - falling back to year/artist only")}const h=y.length>0?y:S,x=Math.ceil(12/h.length),N=[];for(const k of h){const I=k.recommendations.filter(L=>{const z=e.some(ne=>ne.Id===L.Id),X=N.some(ne=>ne.Id===L.Id);return!z&&!X}),R=I.slice(0,x);N.push(...R),console.log(`[Recommendations] Added ${R.length} recommendations from seed (${I.length} available, genreMatch: ${k.hasGenreMatches})`)}const b=N.slice(0,12),j=O0(b);if(console.log(`[Recommendations] Final ${b.length} recommendations (distributed across ${w.length} seeds)`),j.length>0){const k=e.slice(t+1).filter(I=>I.source==="recommendation").length+j.length;console.log(`[Recommendations] Adding ${j.length} recommendations. Upcoming recommendations will be: ${k}`),console.log("[Recommendations] Recommendations to add:",j.map(I=>I.Name)),n(j,!1,"recommendation"),console.log("[Recommendations] Successfully added recommendations to queue")}else console.log("[Recommendations] No safe recommendations to add")}catch(v){console.error("[Recommendations Hook] Failed to get recommendations:",v),c.current=!1,o(!1)}finally{clearTimeout(m),console.log("[Recommendations] Finished fetch, setting isRecommending = false"),c.current=!1,o(!1)}})()},[e,t,n,r,a,s,o])}const xu={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function D0({children:e}){_0();const{accentColor:t}=Dt(),{genres:n,songs:r,genreSongs:s}=xe(),{state:o}=ro(),a=i=>{const c=[...i];for(let u=c.length-1;u>0;u--){const f=Math.floor(Math.random()*(u+1));[c[u],c[f]]=[c[f],c[u]]}return c};return d.useEffect(()=>{const i=xu[t]||xu.blue;document.documentElement.style.setProperty("--accent-color",i)},[t]),d.useEffect(()=>{const i=o!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",i)},[o]),d.useEffect(()=>{n.length===0&&T.getGenres().catch(i=>{console.warn("Background genre preload failed:",i)})},[n.length]),d.useEffect(()=>{const i=xe.getState(),c=r.length+Object.values(s).flat().length;c>0&&i.shufflePool.length===0?i.refreshShufflePool():c===0&&setTimeout(async()=>{try{const f=(await T.getSongs({limit:1})).TotalRecordCount||1e3,p=[];for(let g=0;g<3;g++){const S=Math.floor(Math.random()*f);p.push(S)}const m=p.map(g=>T.getSongs({limit:1,sortBy:["SortName"],sortOrder:"Ascending",startIndex:g})),w=(await Promise.all(m)).flatMap(g=>g.Items||[]);if(w.length>0){const g=w.map(S=>({Id:S.Id,Name:S.Name,AlbumArtist:S.AlbumArtist,ArtistItems:S.ArtistItems,Album:S.Album,AlbumId:S.AlbumId,IndexNumber:S.IndexNumber,ProductionYear:S.ProductionYear,PremiereDate:S.PremiereDate,RunTimeTicks:S.RunTimeTicks,Genres:S.Genres}));xe.setState({songs:g,shufflePool:a(g),lastPoolUpdate:Date.now()})}}catch(u){console.warn("Minimal song preload failed:",u)}},300)},[r.length,s]),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:o!=="idle"?"28px":"0px"}}),l.jsx(R0,{}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),l.jsxs("div",{className:"min-h-screen bg-black text-white",style:{paddingBottom:"calc(4rem + env(safe-area-inset-bottom) - 8px)",paddingTop:o!=="idle"?"28px":"0",overflowX:"hidden",maxWidth:"100vw",width:"100%"},children:[l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:e}),l.jsx(T0,{}),l.jsx(k0,{})]})]})}const qn=d.forwardRef(({value:e,onChange:t,placeholder:n="Search...",debounceMs:r=300,showClearButton:s=!1,onClear:o},a)=>{const[i,c]=d.useState(e),u=d.useRef(t),f=d.useRef(null),p=m=>{f.current=m,typeof a=="function"?a(m):a&&(a.current=m)};return d.useEffect(()=>{u.current=t},[t]),d.useEffect(()=>{const m=setTimeout(()=>{u.current(i)},r);return()=>clearTimeout(m)},[i,r]),d.useEffect(()=>{c(e)},[e]),l.jsxs("div",{className:"relative",children:[l.jsx("input",{ref:p,type:"text",value:i,onChange:m=>{c(m.target.value)},placeholder:n,className:"w-full px-4 py-2 pl-10 pr-10 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),l.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l.jsx("button",{onClick:m=>{m.preventDefault(),m.stopPropagation(),c(""),o&&o(),setTimeout(()=>{var v;(v=f.current)==null||v.focus()},0)},className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-opacity ${s&&i?"text-gray-400 hover:text-white opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-label":"Clear search",type:"button",children:l.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})});qn.displayName="SearchInput";function Xn({isOpen:e,onClose:t,filterType:n,availableYears:r=[],yearRange:s={min:null,max:null},onApplyYear:o,genres:a=[],selectedValues:i=[],onApply:c}){const[u,f]=d.useState(s),[p,m]=d.useState(i),v=d.useRef(null),w=d.useRef(null);d.useEffect(()=>{f(s)},[s]),d.useEffect(()=>{m(i)},[i]);const g=j=>{m(k=>k.includes(j)?k.filter(I=>I!==j):[...k,j])},S=()=>{n==="year"&&o?o(u):n==="genre"&&c&&c(p),t()},y=()=>{n==="year"?(f({min:null,max:null}),o&&o({min:null,max:null})):n==="genre"&&m([]),t()},h=r.length>0?r[0]:1900,x=r.length>0?r[r.length-1]:new Date().getFullYear();d.useEffect(()=>{if(n==="year"&&e&&r.length>0){if(v.current&&u.min!==null){const j=r.indexOf(u.min);j!==-1&&setTimeout(()=>{var I;const k=(I=v.current)==null?void 0:I.querySelector(`[data-year-index="${j}"]`);k&&k.scrollIntoView({behavior:"smooth",block:"center"})},100)}if(w.current&&u.max!==null){const j=r.indexOf(u.max);j!==-1&&setTimeout(()=>{var I;const k=(I=w.current)==null?void 0:I.querySelector(`[data-year-index="${j}"]`);k&&k.scrollIntoView({behavior:"smooth",block:"center"})},100)}}},[n,e,u.min,u.max,r]);const N=(j,k)=>{f(I=>{if(j==="min"){const R=I.max!==null&&k>I.max?I.max:k;return setTimeout(()=>{const L=r.indexOf(R);if(L!==-1&&v.current){const z=v.current.querySelector(`[data-year-index="${L}"]`);z&&z.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...I,min:R}}else{const R=I.min!==null&&k<I.min?I.min:k;return setTimeout(()=>{const L=r.indexOf(R);if(L!==-1&&w.current){const z=w.current.querySelector(`[data-year-index="${L}"]`);z&&z.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...I,max:R}}})},b=(u.min===null||u.min===h)&&(u.max===null||u.max===x)&&s.min===null&&s.max===null;return l.jsx(Vi,{isOpen:e,onClose:t,zIndex:10001,children:l.jsxs("div",{className:"pb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsxs("div",{className:"text-lg font-semibold text-white",children:["Filter by ",n==="genre"?"Genre":"Year"]}),l.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Close",children:l.jsx(I0,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"px-4 max-h-[75vh] overflow-y-auto",children:n==="year"?l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{ref:v,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:r.length>0?r.map((j,k)=>{const I=u.min===j,R=u.max!==null&&j>u.max;return l.jsx("button",{"data-year-index":k,onClick:()=>N("min",j),disabled:R,className:`w-full py-3 px-4 text-center snap-center transition-colors ${I?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":R?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:j},j)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No years available"})})}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 bg-gradient-to-b from-zinc-900 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-zinc-900 to-transparent pointer-events-none"})]}),l.jsx("div",{className:"text-white font-medium self-center",children:"to"}),l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{ref:w,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:r.length>0?r.map((j,k)=>{const I=u.max===j,R=u.min!==null&&j<u.min;return l.jsx("button",{"data-year-index":k,onClick:()=>N("max",j),disabled:R,className:`w-full py-3 px-4 text-center snap-center transition-colors ${I?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":R?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:j},j)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No years available"})})}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-14 bg-gradient-to-b from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-14 bg-gradient-to-t from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"})]})]})}):l.jsx("div",{className:"space-y-2",children:n==="genre"?a.length>0?[...a].sort((j,k)=>(j.Name||"").localeCompare(k.Name||"")).map(j=>{const k=j.Name||"",I=p.includes(k);return l.jsxs("button",{onClick:()=>g(k),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-white/10 transition-colors text-left",children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${I?"bg-white border-white":"border-white/40 bg-transparent"}`,children:I&&l.jsx("svg",{className:"w-3 h-3 text-zinc-900",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),l.jsx("span",{className:"text-white font-medium",children:k})]},j.Id)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No genres available"})}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No genres available"})})})}),l.jsxs("div",{className:"flex gap-3 mt-6 px-4",children:[l.jsx("button",{onClick:y,disabled:n==="year"&&b,className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 disabled:opacity-30 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:"Clear"}),l.jsx("button",{onClick:S,className:"flex-1 px-4 py-3 bg-white text-zinc-900 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Apply"})]})]})})}async function Es(e,t){var w,g,S,y;const n=await T.search(e,t);let r=((w=n.Songs)==null?void 0:w.Items)||[],s=((g=n.Albums)==null?void 0:g.Items)||[],o=((S=n.Artists)==null?void 0:S.Items)||[],a=((y=n.Playlists)==null?void 0:y.Items)||[];if(!(r.length>0||s.length>0||o.length>0||a.length>0)&&e.trim().length>0){const h=await Ps(t);r=h.songs,s=h.albums,o=h.artists,a=h.playlists}const u=Ft(e).toLowerCase().trim(),f=r.filter(h=>{var b,j,k;if(Ft(h.Name||"").toLowerCase().includes(u))return!0;const N=[];return h.AlbumArtist&&N.push(Ft(h.AlbumArtist)),(b=h.AlbumArtists)!=null&&b.length&&N.push(...h.AlbumArtists.map(I=>Ft(I.Name||"")).filter(Boolean)),(j=h.ArtistItems)!=null&&j.length&&N.push(...h.ArtistItems.map(I=>Ft(I.Name||"")).filter(Boolean)),!!(N.some(I=>I.toLowerCase().includes(u))||(k=h.Genres)!=null&&k.some(I=>Ft(I).toLowerCase().includes(u)))}),p=o.filter(h=>Ft(h.Name||"").toLowerCase().includes(u)),m=s.filter(h=>{var b,j;const x=Ft(h.Name||""),N=Ft(h.AlbumArtist||((j=(b=h.ArtistItems)==null?void 0:b[0])==null?void 0:j.Name)||"");return x.toLowerCase().includes(u)||N.toLowerCase().includes(u)}),v=a.filter(h=>Ft(h.Name||"").toLowerCase().includes(u));return{artists:p,albums:m,playlists:v,songs:f}}async function Ps(e){const[t,n,r,s]=await Promise.all([T.getArtists({limit:e}),T.getAlbums({limit:e}),T.getPlaylists({limit:e}),T.getSongs({limit:e})]);return{artists:t.Items||[],albums:n.Items||[],playlists:r.Items||[],songs:s.Items||[]}}const Lo=new Map;function $0({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var v,w;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,[c,u]=d.useState(null);d.useEffect(()=>{var h;if((h=e.ImageTags)!=null&&h.Primary){u(null);return}const g=Lo.get(e.Id);if(g!==void 0){u(g);return}let S=!1;return(async()=>{try{const{albums:x,songs:N}=await T.getArtistItems(e.Id),b=x[0],j=N.find(L=>L.AlbumId)||N[0],k=b||j,I=k?k.AlbumId||k.Id:null,R=I?T.getAlbumArtUrl(I,96):null;Lo.set(e.Id,R),S||u(R)}catch(x){console.error("Failed to load fallback album art for artist (home search):",e.Id,x),Lo.set(e.Id,null)}})(),()=>{S=!0}},[e.Id,e.ImageTags]);const f=g=>{if(i||a.current){g.preventDefault(),g.stopPropagation(),a.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{a.current=!1},100)},m=Ie({onLongPress:g=>{g.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(v=e.ImageTags)!=null&&v.Primary||c?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?T.getArtistImageUrl(e.Id,96):c||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function F0({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,m;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,c=v=>{if(i||a.current){v.preventDefault(),v.stopPropagation(),a.current=!1;return}t(e.Id)},u=v=>{v.preventDefault(),v.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:v.clientX,y:v.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ie({onLongPress:v=>{v.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:u,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((m=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:m.Name)||"Unknown Artist"})]})}function U0({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var w,g;const o=It(),a=d.useRef(!1),i=r===e.Id,[c,u]=d.useState(!1),f=S=>{const y=Math.floor(S/1e7),h=Math.floor(y/60),x=y%60;return`${h}:${x.toString().padStart(2,"0")}`},p=S=>{if(i||a.current){S.preventDefault(),S.stopPropagation(),a.current=!1;return}t(e)},m=S=>{S.preventDefault(),S.stopPropagation(),a.current=!0,n(e,"song","desktop",{x:S.clientX,y:S.clientY}),setTimeout(()=>{a.current=!1},100)},v=Ie({onLongPress:S=>{S.preventDefault(),a.current=!0,n(e,"song","mobile")},onClick:p});return l.jsxs("button",{onClick:p,onContextMenu:m,...v,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:c?l.jsx(Ge,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>u(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(o==null?void 0:o.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((g=(w=e.ArtistItems)==null?void 0:w[0])==null?void 0:g.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:f(e.RunTimeTicks)})]})}function B0({onSearchStateChange:e}){const[t,n]=d.useState(""),[r,s]=d.useState(!1),[o,a]=d.useState(null),[i,c]=d.useState(!1),[u,f]=d.useState(!1),[p,m]=d.useState("mobile"),[v,w]=d.useState(null),[g,S]=d.useState(null),[y,h]=d.useState(null),x=d.useRef(null),[N,b]=d.useState([]),[j,k]=d.useState({min:null,max:null}),[I,R]=d.useState(!1),[L,z]=d.useState(null),{genres:X}=xe(),[ne,J]=d.useState([]),[ce,ae]=d.useState(!1),[B,A]=d.useState(45),{playAlbum:P,addToQueue:C,playTrack:O,shuffleAllSongs:D}=we(),[re,Z]=d.useState(!1);d.useEffect(()=>{if(re){const E=setTimeout(()=>{Z(!1)},1e4);return()=>clearTimeout(E)}},[re]);const V=$e();d.useEffect(()=>{(async()=>{ae(!0);try{const M=xe.getState();if(M.years.length>0)J(M.years);else{const Y=await T.getYears();J(Y)}}catch(M){console.error("Failed to load filter values:",M)}finally{ae(!1)}})()},[]);const K=N.length>0||j.min!==null||j.max!==null;d.useEffect(()=>{const E=t.trim().length>0;if(E||K){c(!0);const M=window.setTimeout(()=>{(async()=>{try{if(E){const H=await Es(t,450);a(H)}else{const H=await Ps(450);a(H)}}catch(H){console.error("Search failed:",H),a(null)}finally{c(!1)}})()},250);return()=>{window.clearTimeout(M)}}else a(null),c(!1)},[t,K]),d.useEffect(()=>{A(45)},[t,r,o==null?void 0:o.songs.length]),d.useEffect(()=>{var M;if(!r||!((M=o==null?void 0:o.songs)!=null&&M.length))return;const E=()=>{const Y=window.scrollY||document.documentElement.scrollTop,H=window.innerHeight||document.documentElement.clientHeight,se=document.documentElement.scrollHeight;Y+H*1.5>=se&&A(ge=>Math.min(ge+45,o.songs.length))};return window.addEventListener("scroll",E,{passive:!0}),()=>window.removeEventListener("scroll",E)},[r,o==null?void 0:o.songs.length]);const Q=d.useMemo(()=>{if(!o)return null;const E=H=>{if(j.min!==null||j.max!==null)return!1;if(N.length>0){const se=H.Genres||[];if(!N.some(G=>se.some(ue=>ue.toLowerCase()===G.toLowerCase())))return!1}return!0},M=H=>{if(N.length>0){const se=H.Genres||[];if(!N.some(G=>se.some(ue=>ue.toLowerCase()===G.toLowerCase())))return!1}if(j.min!==null||j.max!==null){const se=H.ProductionYear;if(!se||se<=0||j.min!==null&&se<j.min||j.max!==null&&se>j.max)return!1}return!0},Y=H=>!(j.min!==null||j.max!==null||N.length>0);return{artists:o.artists.filter(E),albums:o.albums.filter(M),playlists:(o.playlists||[]).filter(Y),songs:o.songs.filter(M)}},[o,N,j]),le=E=>{n(E),E.trim().length>0&&!r&&s(!0)},me=E=>{V(`/artist/${E}`),s(!1),n(""),setSearchResults(null)},pe=E=>{V(`/album/${E}`),s(!1),n(""),setSearchResults(null)},ie=E=>{O(E,[E])},W=E=>{V(`/playlist/${E}`),s(!1),n(""),setSearchResults(null)},de=(E,M,Y="mobile",H)=>{S(E),h(M),m(Y),w(H||null),f(!0)},oe=()=>{n(""),a(null)},_e=()=>{s(!1),n(""),a(null),b([]),k({min:null,max:null})},Ve=E=>{z(E),R(!0)},Fe=E=>{b(E)},We=E=>{k(E)},$=E=>{E.preventDefault(),E.stopPropagation(),Q!=null&&Q.songs&&Q.songs.length>0&&P(Q.songs)},te=E=>{E.preventDefault(),E.stopPropagation(),Q!=null&&Q.songs&&Q.songs.length>0&&C(Q.songs)},U=r;return d.useEffect(()=>{e&&e(U)},[U,e]),d.useEffect(()=>{var E;if(r&&((E=x.current)==null||E.focus(),x.current)){const M=x.current.value.length;x.current.setSelectionRange(M,M)}},[r]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"Tunetuna"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:async()=>{const E=we.getState(),{isShuffleAllActive:M,isShuffleGenreActive:Y,shuffle:H}=E;if(!(re||M||Y)){Z(!0);try{await D()}catch(se){console.error("Home shuffle button - shuffleAllSongs failed:",se),console.error("Shuffle all failed:",se)}finally{Z(!1)}}},disabled:re,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50","aria-label":"Shuffle all songs",children:re?l.jsx("div",{className:"w-4 h-4 border-2 border-zinc-400 border-t-white rounded-full animate-spin"}):l.jsx(en,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>V("/settings"),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Settings",children:l.jsx(h0,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"relative",onClick:()=>s(!0),children:l.jsx(qn,{value:t,onChange:le,placeholder:"Search for artists, albums, songs...",showClearButton:t.trim().length>0,onClear:oe})})]}),r&&Zn.createPortal(l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(qn,{ref:x,value:t,onChange:le,showClearButton:t.trim().length>0,onClear:oe})}),l.jsx("button",{onClick:_e,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>Ve("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${N.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Wn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>Ve("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${j.min!==null||j.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx(Di,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:i?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):Q?l.jsxs("div",{className:"space-y-8",children:[Q.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:Q.artists.slice(0,5).map(E=>l.jsx($0,{artist:E,onClick:me,onContextMenu:de,contextMenuItemId:(g==null?void 0:g.Id)||null},E.Id))})]}),Q.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:Q.albums.slice(0,12).map(E=>l.jsx(F0,{album:E,onClick:pe,onContextMenu:de,contextMenuItemId:(g==null?void 0:g.Id)||null},E.Id))})]}),Q.playlists&&Q.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:Q.playlists.map(E=>l.jsxs("button",{onClick:()=>W(E.Id),onContextMenu:M=>{M.preventDefault(),M.stopPropagation(),de(E,"playlist","desktop",{x:M.clientX,y:M.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:T.getAlbumArtUrl(E.Id,96),alt:E.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:E.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:E.ChildCount?`${E.ChildCount} tracks`:"Playlist"})]})]},E.Id))})]}),Q.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:$,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:te,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ht,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:Q.songs.map((E,M)=>l.jsx(U0,{song:E,onClick:ie,onContextMenu:de,contextMenuItemId:(g==null?void 0:g.Id)||null,showImage:M<B},E.Id))})]}),Q.artists.length===0&&Q.albums.length===0&&(!Q.playlists||Q.playlists.length===0)&&Q.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]}),l.jsx(He,{item:g,itemType:y,isOpen:u,onClose:()=>{f(!1),S(null),h(null)},zIndex:999999,mode:p,position:v||void 0})]}),document.body),L==="genre"&&l.jsx(Xn,{isOpen:I,onClose:()=>R(!1),filterType:"genre",genres:X,selectedValues:N,onApply:Fe}),L==="year"&&l.jsx(Xn,{isOpen:I,onClose:()=>R(!1),filterType:"year",availableYears:ne,yearRange:j,onApplyYear:We})]})}function vu({album:e,onNavigate:t,onContextMenu:n}){var u,f;const[r,s]=d.useState(!1),o=d.useRef(!1),a=p=>{if(o.current){p.preventDefault(),p.stopPropagation(),o.current=!1;return}t(e.Id)},i=p=>{p.preventDefault(),p.stopPropagation(),o.current=!0,n(e,"desktop",{x:p.clientX,y:p.clientY}),setTimeout(()=>{o.current=!1},100)},c=Ie({onLongPress:p=>{p.preventDefault(),o.current=!0,n(e,"mobile")},onClick:a});return l.jsxs("button",{onClick:a,onContextMenu:i,...c,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:r?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsx(it,{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>s(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((f=(u=e.ArtistItems)==null?void 0:u[0])==null?void 0:f.Name)||"Unknown Artist"})]})}function H0(){const{recentlyAdded:e,setRecentlyAdded:t,setLoading:n}=xe(),r=$e(),s=d.useRef(null),[o,a]=d.useState(0),[i,c]=d.useState(!1),[u,f]=d.useState("mobile"),[p,m]=d.useState(null),[v,w]=d.useState(null);d.useEffect(()=>{(async()=>{n("recentlyAdded",!0);try{const N=await T.getRecentlyAdded(18);t(N.Items||[])}catch(N){console.error("Failed to load recently added:",N)}finally{n("recentlyAdded",!1)}})()},[t,n]);const g=()=>{if(!s.current)return;const x=s.current,N=x.scrollLeft,b=x.clientWidth,j=Math.round(N/b);a(j)},S=x=>{if(!s.current)return;const N=s.current,b=N.clientWidth;N.scrollTo({left:x*b,behavior:"smooth"})};if(!e||e.length===0)return null;const y=6,h=[];for(let x=0;x<e.length;x+=y)h.push(e.slice(x,x+y));return l.jsxs("div",{className:"px-4 mb-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recently Added"}),l.jsxs("div",{className:"md:hidden",children:[l.jsx("div",{ref:s,onScroll:g,className:"overflow-x-auto snap-x snap-mandatory scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:l.jsx("div",{className:"flex",style:{width:`${h.length*100}%`},children:h.map((x,N)=>{const b=Math.ceil(x.length/3);return l.jsx("div",{className:"snap-start flex-shrink-0 w-full",style:{width:`${100/h.length}%`},children:l.jsx("div",{className:"grid grid-cols-3 gap-3",style:{gridTemplateRows:`repeat(${b}, minmax(0, 1fr))`},children:x.map(j=>l.jsx(vu,{album:j,onNavigate:k=>r(`/album/${k}`),onContextMenu:(k,I,R)=>{w(k),f(I||"desktop"),m(R||null),c(!0)}},j.Id))})},N)})})}),h.length>1&&l.jsx("div",{className:"flex justify-center gap-2 mt-4",children:h.map((x,N)=>l.jsx("button",{onClick:()=>S(N),className:`w-2 h-2 rounded-full transition-colors ${N===o?"bg-white":"bg-zinc-600"}`,"aria-label":`Go to page ${N+1}`},N))})]}),l.jsx("div",{className:"hidden md:block",children:l.jsx("div",{className:"grid grid-cols-4 gap-3",children:e.slice(0,8).map(x=>l.jsx(vu,{album:x,onNavigate:N=>r(`/album/${N}`),onContextMenu:(N,b,j)=>{w(N),f(b||"desktop"),m(j||null),c(!0)}},x.Id))})}),l.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `}),l.jsx(He,{item:v,itemType:"album",isOpen:i,onClose:()=>{c(!1),w(null)},zIndex:999999,mode:u,position:p||void 0})]})}function G0({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var f,p;const s=It(),[o,a]=d.useState(!1),i=r===e.Id,c=m=>{const v=Math.floor(m/1e7),w=Math.floor(v/60),g=v%60;return`${w}:${g.toString().padStart(2,"0")}`},u=Ie({onLongPress:m=>{m.preventDefault(),n(e,"mobile")},onClick:()=>t(e)});return l.jsxs("button",{onClick:()=>t(e),onContextMenu:m=>{m.preventDefault(),n(e,"desktop",{x:m.clientX,y:m.clientY})},...u,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:o?l.jsx(Ge,{className:"w-7 h-7 text-gray-500"}):l.jsx(it,{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>a(!0)})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(s==null?void 0:s.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((p=(f=e.ArtistItems)==null?void 0:f[0])==null?void 0:p.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:c(e.RunTimeTicks)})]})}function V0(){const{recentlyPlayed:e}=xe(),{playTrack:t}=we(),[n,r]=d.useState(!1),[s,o]=d.useState("mobile"),[a,i]=d.useState(null),[c,u]=d.useState(null),f=p=>{t(p,e)};return!e||e.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-2 px-4",children:"Recently Played"}),l.jsx("div",{className:"space-y-0",children:e.map(p=>l.jsx(G0,{song:p,onClick:f,onContextMenu:(m,v,w)=>{u(m),o(v||"mobile"),i(w||null),r(!0)},contextMenuItemId:(c==null?void 0:c.Id)||null},p.Id))}),l.jsx(He,{item:c,itemType:"song",isOpen:n,onClose:()=>{r(!1),u(null)},zIndex:99999,mode:s,position:a||void 0})]})}function Y0(){const[e,t]=d.useState(!1),{recentlyAdded:n,recentlyPlayed:r,loading:s}=xe(),o=d.useRef(!1);d.useEffect(()=>{(s.recentlyAdded||s.recentlyPlayed)&&(o.current=!0)},[s.recentlyAdded,s.recentlyPlayed]);const a=o.current&&!s.recentlyAdded&&!s.recentlyPlayed&&n.length===0&&r.length===0;return l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx(B0,{onSearchStateChange:t})})}),l.jsxs("div",{className:e?"hidden":"",style:{paddingTop:"calc(env(safe-area-inset-top) + 7.5rem)"},children:[l.jsx(H0,{}),l.jsx(V0,{}),a&&l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No music found"})})]})]})}const zo=new Map;function Q0({artist:e}){var S,y;const t=$e(),[n,r]=d.useState(!1),[s,o]=d.useState(!1),[a,i]=d.useState("mobile"),[c,u]=d.useState(null),f=d.useRef(!1),[p,m]=d.useState(null);d.useEffect(()=>{var b;if((b=e.ImageTags)!=null&&b.Primary){m(null);return}const h=zo.get(e.Id);if(h!==void 0){m(h);return}let x=!1;return(async()=>{try{const{albums:j,songs:k}=await T.getArtistItems(e.Id),I=j[0],R=k.find(ne=>ne.AlbumId)||k[0],L=I||R,z=L?L.AlbumId||L.Id:null,X=z?T.getAlbumArtUrl(z,96):null;zo.set(e.Id,X),x||m(X)}catch(j){console.error("Failed to load fallback album art for artist:",e.Id,j),zo.set(e.Id,null)}})(),()=>{x=!0}},[e.Id,e.ImageTags]);const v=h=>{if(f.current){h.preventDefault(),f.current=!1;return}t(`/artist/${e.Id}`)},w=Ie({onLongPress:h=>{h.preventDefault(),f.current=!0,i("mobile"),u(null),o(!0)},onClick:v}),g=h=>{h.preventDefault(),h.stopPropagation(),f.current=!0,i("desktop"),u({x:h.clientX,y:h.clientY}),o(!0),setTimeout(()=>{f.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:v,onContextMenu:g,...w,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors group px-4 h-[72px] ${s?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:n?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(S=e.ImageTags)!=null&&S.Primary||p?l.jsx("img",{src:(y=e.ImageTags)!=null&&y.Primary?T.getArtistImageUrl(e.Id,96):p||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>r(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]}),l.jsx(He,{item:e,itemType:"artist",isOpen:s,onClose:()=>o(!1),zIndex:99999,mode:a,position:c||void 0})]})}function Yi({currentPage:e,totalPages:t,onPageChange:n,itemsPerPage:r,totalItems:s}){if(t<=1)return null;const o=e*r+1,a=Math.min((e+1)*r,s);return l.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[l.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",o,"-",a," of ",s]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>n(e-1),disabled:e===0,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:l.jsx(Rx,{className:"w-5 h-5"})}),l.jsxs("div",{className:"text-sm text-white min-w-[60px] text-center",children:[e+1," / ",t]}),l.jsx("button",{onClick:()=>n(e+1),disabled:e>=t-1,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:l.jsx(zx,{className:"w-5 h-5"})})]})]})}const Oo=new Map;function W0({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var v;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,[c,u]=d.useState(null);d.useEffect(()=>{var y;if((y=e.ImageTags)!=null&&y.Primary){u(null);return}const w=Oo.get(e.Id);if(w!==void 0){u(w);return}let g=!1;return(async()=>{try{const{albums:h,songs:x}=await T.getArtistItems(e.Id),N=h[0],b=x.find(R=>R.AlbumId)||x[0],j=N||b,k=j?j.AlbumId||j.Id:null,I=k?T.getAlbumArtUrl(k,96):null;Oo.set(e.Id,I),g||u(I)}catch(h){console.error("Failed to load fallback album art for artist (search item):",e.Id,h),Oo.set(e.Id,null)}})(),()=>{g=!0}},[e.Id,e.ImageTags]);const f=w=>{if(i||a.current){w.preventDefault(),w.stopPropagation(),a.current=!1;return}t(e.Id)},p=w=>{w.preventDefault(),w.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:w.clientX,y:w.clientY}),setTimeout(()=>{a.current=!1},100)},m=Ie({onLongPress:w=>{w.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left cursor-pointer px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):c||(v=e.ImageTags)!=null&&v.Primary?l.jsx("img",{src:c||T.getArtistImageUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function q0({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,m;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,c=v=>{if(i||a.current){v.preventDefault(),v.stopPropagation(),a.current=!1;return}t(e.Id)},u=v=>{v.preventDefault(),v.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:v.clientX,y:v.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ie({onLongPress:v=>{v.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:u,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((m=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:m.Name)||"Unknown Artist"})]})}function X0({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var v,w;const o=d.useRef(!1),a=r===e.Id,[i,c]=d.useState(!1),u=g=>{const S=Math.floor(g/1e7),y=Math.floor(S/60),h=S%60;return`${y}:${h.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},m=Ie({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(Ge,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(v=e.ArtistItems)==null?void 0:v[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}const tr=90,yu=45,K0=45,wu=45,J0=45;function Z0(){const{artists:e,setArtists:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:a}=xe(),{playTrack:i,playAlbum:c,addToQueue:u}=we(),[f,p]=d.useState(""),[m,v]=d.useState(!1),[w,g]=d.useState(null),[S,y]=d.useState(!1),[h,x]=d.useState(!1),[N,b]=d.useState("mobile"),[j,k]=d.useState(null),[I,R]=d.useState(null),[L,z]=d.useState(null),[X,ne]=d.useState(0),[J,ce]=d.useState(0),[ae,B]=d.useState(wu),A=$e(),P=d.useRef(null),[C,O]=d.useState([]),[D,re]=d.useState(!1),[Z,V]=d.useState(null),K=n.artists,Q=d.useRef(!0),[le,me]=d.useState(!1),pe=d.useRef(K),[ie,W]=d.useState(yu),de=C.length>0;d.useEffect(()=>{const G=f.trim().length>0;if(G||de){y(!0);const ue=window.setTimeout(()=>{(async()=>{try{if(G){const be=await Es(f,450);g(be)}else{const be=await Ps(450);g(be)}}catch(be){console.error("Search failed:",be),g(null)}finally{y(!1)}})()},250);return()=>{window.clearTimeout(ue)}}else g(null),y(!1)},[f,de]);const oe=d.useMemo(()=>{if(!w)return null;const G=Pe=>{if(C.length>0){const be=Pe.Genres||[];if(!C.some(gt=>be.some(q=>q.toLowerCase()===gt.toLowerCase())))return!1}return!0},ue=Pe=>{if(C.length>0){const be=Pe.Genres||[];if(!C.some(gt=>be.some(q=>q.toLowerCase()===gt.toLowerCase())))return!1}return!0};return{artists:w.artists.filter(G),albums:w.albums.filter(ue),playlists:w.playlists||[],songs:w.songs.filter(ue)}},[w,C]);d.useEffect(()=>{var G;if(m&&((G=P.current)==null||G.focus(),P.current)){const ue=P.current.value.length;P.current.setSelectionRange(ue,ue)}},[m]);const _e=G=>{p(G),G.trim().length>0&&!m&&v(!0)},Ve=()=>{p(""),g(null)},Fe=()=>{v(!1),p(""),g(null),O([])},We=()=>{V("genre"),re(!0)},$=G=>{O(G)},te=G=>{A(`/artist/${G}`),v(!1),p(""),g(null)},U=G=>{A(`/album/${G}`),v(!1),p(""),g(null)},E=G=>{i(G,[G])},M=G=>{G.preventDefault(),G.stopPropagation(),oe!=null&&oe.songs&&oe.songs.length>0&&c(oe.songs)},Y=G=>{G.preventDefault(),G.stopPropagation(),oe!=null&&oe.songs&&oe.songs.length>0&&u(oe.songs)},H=G=>{A(`/playlist/${G}`),v(!1),p(""),g(null)},se=(G,ue,Pe="mobile",be)=>{R(G),z(ue),b(Pe),k(be||null),x(!0)},ge=async()=>{var ue;const G=Date.now();s("artists",!0);try{const Pe={limit:tr,startIndex:X*tr};K==="RecentlyAdded"?(Pe.sortBy=["DateCreated"],Pe.sortOrder="Descending"):(Pe.sortBy=["SortName"],Pe.sortOrder="Ascending");let be=await T.getArtists(Pe);(((ue=be.Items)==null?void 0:ue.length)||0)===0&&(be=await T.getArtists({limit:tr,startIndex:X*tr}));const lt=be.Items||[];ce(be.TotalRecordCount||0);const gt=Date.now()-G;t(lt)}catch(Pe){console.error("Failed to load artists:",Pe),t([]),ce(0)}finally{s("artists",!1),me(!1)}};return d.useEffect(()=>{!f.trim()&&!m&&ne(0)},[K,f,m]),d.useEffect(()=>{W(yu)},[f,m,w==null?void 0:w.songs.length]),d.useEffect(()=>{var ue;if(!m||!((ue=w==null?void 0:w.songs)!=null&&ue.length))return;const G=()=>{const Pe=window.scrollY||document.documentElement.scrollTop,be=window.innerHeight||document.documentElement.clientHeight,lt=document.documentElement.scrollHeight;Pe+be*1.5>=lt&&W(gt=>Math.min(gt+K0,w.songs.length))};return window.addEventListener("scroll",G,{passive:!0}),()=>window.removeEventListener("scroll",G)},[m,w==null?void 0:w.songs.length]),d.useEffect(()=>{B(wu)},[X,e.length]),d.useEffect(()=>{const G=()=>{const ue=window.scrollY||document.documentElement.scrollTop,Pe=window.innerHeight||document.documentElement.clientHeight,be=document.documentElement.scrollHeight;ue+Pe*1.5>=be&&B(lt=>Math.min(lt+J0,e.length))};return window.addEventListener("scroll",G,{passive:!0}),()=>window.removeEventListener("scroll",G)},[e.length]),d.useEffect(()=>{!f.trim()&&!m&&(!Q.current&&pe.current!==K&&me(!0),pe.current=K,ge())},[X,K,f,m]),d.useEffect(()=>{Q.current&&(Q.current=!1)},[]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Artists"}),l.jsx("button",{onClick:()=>v(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!m&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("artists",K==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[K==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(As,{className:"w-4 h-4"})]}),o.artists&&!Q.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Yt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!m&&l.jsxs("div",{className:le?"opacity-50 pointer-events-none":"",children:[e.length===0&&!o.artists&&l.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:l.jsx("p",{children:"No artists found"})}),e.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-0",children:e.slice(0,ae).map(G=>l.jsx(Q0,{artist:G},G.Id))}),l.jsx(Yi,{currentPage:X,totalPages:Math.ceil(J/tr),onPageChange:ne,itemsPerPage:tr,totalItems:J})]})]})})]}),m&&Zn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(qn,{ref:P,value:f,onChange:_e,showClearButton:f.trim().length>0,onClear:Ve})}),l.jsx("button",{onClick:Fe,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsx("div",{className:"flex items-center gap-3 px-4",children:l.jsxs("button",{onClick:We,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${C.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Wn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]})})}),l.jsx("div",{className:"pb-32 pt-4",children:S?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):oe?l.jsxs("div",{className:"space-y-8",children:[oe.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:oe.artists.map(G=>l.jsx(W0,{artist:G,onClick:te,onContextMenu:se,contextMenuItemId:(I==null?void 0:I.Id)||null},G.Id))})]}),oe.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:oe.albums.slice(0,12).map(G=>l.jsx(q0,{album:G,onClick:U,onContextMenu:se,contextMenuItemId:(I==null?void 0:I.Id)||null},G.Id))})]}),oe.playlists&&oe.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:oe.playlists.map(G=>l.jsxs("button",{onClick:()=>H(G.Id),onContextMenu:ue=>{ue.preventDefault(),ue.stopPropagation(),se(G,"playlist","desktop",{x:ue.clientX,y:ue.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:T.getAlbumArtUrl(G.Id,96),alt:G.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:G.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:"Playlist"})]})]},G.Id))})]}),oe.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:M,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Y,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ht,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:oe.songs.map((G,ue)=>l.jsx(X0,{song:G,onClick:E,onContextMenu:se,contextMenuItemId:(I==null?void 0:I.Id)||null,showImage:ue<ie},G.Id))})]}),oe.artists.length===0&&oe.albums.length===0&&(!oe.playlists||oe.playlists.length===0)&&oe.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),Z==="genre"&&l.jsx(Xn,{isOpen:D,onClose:()=>re(!1),filterType:"genre",genres:a,selectedValues:C,onApply:$}),l.jsx(He,{item:I,itemType:L,isOpen:h,onClose:()=>{x(!1),R(null),z(null)},zIndex:99999,mode:N,position:j||void 0})]})}function ev({album:e}){var w,g;const t=$e(),[n,r]=d.useState(!1),[s,o]=d.useState("mobile"),[a,i]=d.useState(null),[c,u]=d.useState(!1),f=d.useRef(!1),p=S=>{if(f.current){S.preventDefault(),f.current=!1;return}t(`/album/${e.Id}`)},m=Ie({onLongPress:S=>{S.preventDefault(),f.current=!0,o("mobile"),i(null),r(!0)},onClick:p}),v=S=>{S.preventDefault(),S.stopPropagation(),f.current=!0,o("desktop"),i({x:S.clientX,y:S.clientY}),r(!0),setTimeout(()=>{f.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:p,onContextMenu:v,...m,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 relative flex items-center justify-center",children:c?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsx(it,{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>u(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((g=(w=e.ArtistItems)==null?void 0:w[0])==null?void 0:g.Name)||"Unknown Artist"})]}),l.jsx(He,{item:e,itemType:"album",isOpen:n,onClose:()=>r(!1),mode:s,position:a||void 0})]})}const _o=new Map;function tv({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var v,w;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,[c,u]=d.useState(null);d.useEffect(()=>{var h;if((h=e.ImageTags)!=null&&h.Primary){u(null);return}const g=_o.get(e.Id);if(g!==void 0){u(g);return}let S=!1;return(async()=>{try{const{albums:x,songs:N}=await T.getArtistItems(e.Id),b=x[0],j=N.find(L=>L.AlbumId)||N[0],k=b||j,I=k?k.AlbumId||k.Id:null,R=I?T.getAlbumArtUrl(I,96):null;_o.set(e.Id,R),S||u(R)}catch(x){console.error("Failed to load fallback album art for artist (albums search):",e.Id,x),_o.set(e.Id,null)}})(),()=>{S=!0}},[e.Id,e.ImageTags]);const f=g=>{if(i||a.current){g.preventDefault(),g.stopPropagation(),a.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{a.current=!1},100)},m=Ie({onLongPress:g=>{g.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(v=e.ImageTags)!=null&&v.Primary||c?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?T.getArtistImageUrl(e.Id,96):c||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function nv({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,m;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,c=v=>{if(i||a.current){v.preventDefault(),v.stopPropagation(),a.current=!1;return}t(e.Id)},u=v=>{v.preventDefault(),v.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:v.clientX,y:v.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ie({onLongPress:v=>{v.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:u,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((m=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:m.Name)||"Unknown Artist"})]})}function rv({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var v,w;const o=d.useRef(!1),a=r===e.Id,[i,c]=d.useState(!1),u=g=>{const S=Math.floor(g/1e7),y=Math.floor(S/60),h=S%60;return`${y}:${h.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},m=Ie({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(Ge,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(v=e.ArtistItems)==null?void 0:v[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}const Xs=90,Su=45,sv=45,Nu=45,lv=45;function ov(){const{albums:e,setAlbums:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:a}=xe(),{playTrack:i,playAlbum:c,addToQueue:u}=we(),[f,p]=d.useState(""),[m,v]=d.useState(!1),[w,g]=d.useState(null),[S,y]=d.useState(!1),[h,x]=d.useState(!1),[N,b]=d.useState("mobile"),[j,k]=d.useState(null),[I,R]=d.useState(null),[L,z]=d.useState(null),[X,ne]=d.useState(0),[J,ce]=d.useState(0),[ae,B]=d.useState(Su),A=$e(),[P,C]=Ug(),O=d.useRef(null),[D,re]=d.useState([]),[Z,V]=d.useState({min:null,max:null}),[K,Q]=d.useState(!1),[le,me]=d.useState(null),[pe,ie]=d.useState([]),W=n.albums,de=d.useRef(!0),[oe,_e]=d.useState(!1),Ve=d.useRef(W),[Fe,We]=d.useState(Nu);d.useEffect(()=>{const _=P.get("year");if(_){const fe=parseInt(_,10);!isNaN(fe)&&fe>0&&(V({min:fe,max:fe}),v(!0),C({},{replace:!0}))}},[P,C]),d.useEffect(()=>{(async()=>{try{const fe=xe.getState();if(fe.years.length>0)ie(fe.years);else{const je=await T.getYears();ie(je)}}catch(fe){console.error("Failed to load filter values:",fe)}})()},[]);const $=D.length>0||Z.min!==null||Z.max!==null;d.useEffect(()=>{const _=f.trim().length>0;if(_||$){y(!0);const fe=window.setTimeout(()=>{(async()=>{try{if(_){const Se=await Es(f,450);g(Se)}else{const Se=await Ps(450);g(Se)}}catch(Se){console.error("Search failed:",Se),g(null)}finally{y(!1)}})()},250);return()=>{window.clearTimeout(fe)}}else g(null),y(!1)},[f,$]);const te=d.useMemo(()=>{if(!w)return null;const _=Se=>{if(Z.min!==null||Z.max!==null)return!1;if(D.length>0){const Je=Se.Genres||[];if(!D.some(Rn=>Je.some(so=>so.toLowerCase()===Rn.toLowerCase())))return!1}return!0},fe=Se=>{if(D.length>0){const Je=Se.Genres||[];if(!D.some(Rn=>Je.some(so=>so.toLowerCase()===Rn.toLowerCase())))return!1}if(Z.min!==null||Z.max!==null){const Je=Se.ProductionYear;if(!Je||Je<=0||Z.min!==null&&Je<Z.min||Z.max!==null&&Je>Z.max)return!1}return!0},je=Se=>!(Z.min!==null||Z.max!==null||D.length>0);return{albums:w.albums.filter(fe),artists:w.artists.filter(_),playlists:(w.playlists||[]).filter(je),songs:w.songs.filter(fe)}},[w,D,Z]);d.useEffect(()=>{var _;if(m&&((_=O.current)==null||_.focus(),O.current)){const fe=O.current.value.length;O.current.setSelectionRange(fe,fe)}},[m]);const U=_=>{p(_),_.trim().length>0&&!m&&v(!0)},E=()=>{p(""),g(null)},M=()=>{v(!1),p(""),g(null),re([]),V({min:null,max:null})},Y=_=>{me(_),Q(!0)},H=_=>{re(_)},se=_=>{V(_)},ge=_=>{A(`/artist/${_}`),v(!1),p(""),g(null)},G=_=>{A(`/album/${_}`),v(!1),p(""),g(null)},ue=_=>{i(_,[_])},Pe=_=>{_.preventDefault(),_.stopPropagation(),te!=null&&te.songs&&te.songs.length>0&&c(te.songs)},be=_=>{_.preventDefault(),_.stopPropagation(),te!=null&&te.songs&&te.songs.length>0&&u(te.songs)},lt=_=>{A(`/playlist/${_}`),v(!1),p(""),g(null)},gt=(_,fe,je="mobile",Se)=>{R(_),z(fe),b(je),k(Se||null),x(!0)};d.useEffect(()=>{f.trim()||ne(0)},[W,f]),d.useEffect(()=>{We(Nu)},[f,m,w==null?void 0:w.songs.length]),d.useEffect(()=>{var fe;if(!m||!((fe=w==null?void 0:w.songs)!=null&&fe.length))return;const _=()=>{const je=window.scrollY||document.documentElement.scrollTop,Se=window.innerHeight||document.documentElement.clientHeight,Je=document.documentElement.scrollHeight;je+Se*1.5>=Je&&We(Qt=>Math.min(Qt+lv,w.songs.length))};return window.addEventListener("scroll",_,{passive:!0}),()=>window.removeEventListener("scroll",_)},[m,w==null?void 0:w.songs.length]),d.useEffect(()=>{B(Su)},[X,e.length]),d.useEffect(()=>{const _=()=>{const fe=window.scrollY||document.documentElement.scrollTop,je=window.innerHeight||document.documentElement.clientHeight,Se=document.documentElement.scrollHeight;fe+je*1.5>=Se&&B(Je=>Math.min(Je+sv,e.length))};return window.addEventListener("scroll",_,{passive:!0}),()=>window.removeEventListener("scroll",_)},[e.length]),d.useEffect(()=>{f.trim()||(!de.current&&Ve.current!==W&&_e(!0),Ve.current=W,q())},[X,W,f]),d.useEffect(()=>{de.current&&(de.current=!1)},[]);const q=async()=>{s("albums",!0);try{const _={limit:Xs,startIndex:X*Xs};W==="RecentlyAdded"?(_.sortBy=["DateCreated"],_.sortOrder="Descending"):(_.sortBy=["SortName"],_.sortOrder="Ascending");const fe=await T.getAlbums(_);t(fe.Items),ce(fe.TotalRecordCount||0)}catch(_){console.error("Failed to load albums:",_),t([]),ce(0)}finally{s("albums",!1),_e(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Albums"}),l.jsx("button",{onClick:()=>v(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!m&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("albums",W==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[W==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(As,{className:"w-4 h-4"})]}),o.albums&&!de.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Yt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!m&&l.jsx("div",{className:oe?"opacity-50 pointer-events-none":"",children:e.length===0&&!o.albums?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No albums found"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:e.slice(0,ae).map(_=>l.jsx(ev,{album:_},_.Id))})}),l.jsx(Yi,{currentPage:X,totalPages:Math.ceil(J/Xs),onPageChange:ne,itemsPerPage:Xs,totalItems:J})]})})})]}),m&&Zn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(qn,{ref:O,value:f,onChange:U,showClearButton:f.trim().length>0,onClear:E})}),l.jsx("button",{onClick:M,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>Y("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${D.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Wn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>Y("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${Z.min!==null||Z.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx(Di,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:S?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):te?l.jsxs("div",{className:"space-y-8",children:[te.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:te.albums.map(_=>l.jsx(nv,{album:_,onClick:G,onContextMenu:gt,contextMenuItemId:(I==null?void 0:I.Id)||null},_.Id))})]}),te.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:te.artists.slice(0,5).map(_=>l.jsx(tv,{artist:_,onClick:ge,onContextMenu:gt,contextMenuItemId:(I==null?void 0:I.Id)||null},_.Id))})]}),te.playlists&&te.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:te.playlists.map(_=>l.jsxs("button",{onClick:()=>lt(_.Id),onContextMenu:fe=>{fe.preventDefault(),fe.stopPropagation(),gt(_,"playlist","desktop",{x:fe.clientX,y:fe.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:T.getAlbumArtUrl(_.Id,96),alt:_.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:_.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:_.ChildCount?`${_.ChildCount} tracks`:"Playlist"})]})]},_.Id))})]}),te.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:Pe,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:be,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ht,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:te.songs.map((_,fe)=>l.jsx(rv,{song:_,onClick:ue,onContextMenu:gt,contextMenuItemId:(I==null?void 0:I.Id)||null,showImage:fe<Fe},_.Id))})]}),te.artists.length===0&&te.albums.length===0&&(!te.playlists||te.playlists.length===0)&&te.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),le==="genre"&&l.jsx(Xn,{isOpen:K,onClose:()=>Q(!1),filterType:"genre",genres:a,selectedValues:D,onApply:H}),le==="year"&&l.jsx(Xn,{isOpen:K,onClose:()=>Q(!1),filterType:"year",availableYears:pe,yearRange:Z,onApplyYear:se}),l.jsx(He,{item:I,itemType:L,isOpen:h,onClose:()=>{x(!1),R(null),z(null)},zIndex:99999,mode:N,position:j||void 0})]})}function om({song:e,showImage:t=!0}){var y,h;const{playTrack:n}=we(),r=It(),[s,o]=d.useState(!1),[a,i]=d.useState("mobile"),[c,u]=d.useState(null),f=d.useRef(!1),[p,m]=d.useState(!1),v=x=>{const N=Math.floor(x/1e7),b=Math.floor(N/60),j=N%60;return`${b}:${j.toString().padStart(2,"0")}`},w=x=>{if(f.current){x.preventDefault(),f.current=!1;return}n(e)},g=Ie({onLongPress:x=>{x.preventDefault(),f.current=!0,i("mobile"),u(null),o(!0)},onClick:w}),S=x=>{x.preventDefault(),x.stopPropagation(),f.current=!0,i("desktop"),u({x:x.clientX,y:x.clientY}),o(!0),setTimeout(()=>{f.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:x=>{if(s||f.current){x.preventDefault(),x.stopPropagation();return}w(x)},onContextMenu:S,...g,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${s?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:p?l.jsx(Ge,{className:"w-7 h-7 text-gray-500"}):t?l.jsx(it,{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>m(!0)}):l.jsx("div",{className:"w-full h-full bg-zinc-900"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(r==null?void 0:r.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((h=(y=e.ArtistItems)==null?void 0:y[0])==null?void 0:h.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:v(e.RunTimeTicks)})]}),l.jsx(He,{item:e,itemType:"song",isOpen:s,onClose:()=>o(!1),mode:a,position:c||void 0})]})}const Do=new Map;function av({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var v;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,[c,u]=d.useState(null);d.useEffect(()=>{var y;if((y=e.ImageTags)!=null&&y.Primary){u(null);return}const w=Do.get(e.Id);if(w!==void 0){u(w);return}let g=!1;return(async()=>{try{const{albums:h,songs:x}=await T.getArtistItems(e.Id),N=h[0],b=x.find(R=>R.AlbumId)||x[0],j=N||b,k=j?j.AlbumId||j.Id:null,I=k?T.getAlbumArtUrl(k,96):null;Do.set(e.Id,I),g||u(I)}catch(h){console.error("Failed to load fallback album art for artist (search item):",e.Id,h),Do.set(e.Id,null)}})(),()=>{g=!0}},[e.Id,e.ImageTags]);const f=w=>{if(i||a.current){w.preventDefault(),w.stopPropagation(),a.current=!1;return}t(e.Id)},p=w=>{w.preventDefault(),w.stopPropagation(),a.current=!0,n(e,"artist","desktop",{x:w.clientX,y:w.clientY}),setTimeout(()=>{a.current=!1},100)},m=Ie({onLongPress:w=>{w.preventDefault(),a.current=!0,n(e,"artist","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left cursor-pointer px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):c||(v=e.ImageTags)!=null&&v.Primary?l.jsx("img",{src:c||T.getArtistImageUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function iv({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,m;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,c=v=>{if(i||a.current){v.preventDefault(),v.stopPropagation(),a.current=!1;return}t(e.Id)},u=v=>{v.preventDefault(),v.stopPropagation(),a.current=!0,n(e,"album","desktop",{x:v.clientX,y:v.clientY}),setTimeout(()=>{a.current=!1},100)},f=Ie({onLongPress:v=>{v.preventDefault(),a.current=!0,n(e,"album","mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:u,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((m=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:m.Name)||"Unknown Artist"})]})}function cv({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var v,w;const o=d.useRef(!1),a=r===e.Id,[i,c]=d.useState(!1),u=g=>{const S=Math.floor(g/1e7),y=Math.floor(S/60),h=S%60;return`${y}:${h.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},m=Ie({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(Ge,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(v=e.ArtistItems)==null?void 0:v[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}const Ks=90,ju=45,uv=45,Iu=45,dv=45;function fv(){const{songs:e,setSongs:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:a}=xe(),{playTrack:i,playAlbum:c,addToQueue:u}=we(),[f,p]=d.useState(""),[m,v]=d.useState(!1),[w,g]=d.useState(null),[S,y]=d.useState(!1),[h,x]=d.useState("mobile"),[N,b]=d.useState(null),[j,k]=d.useState(null),[I,R]=d.useState(null),[L,z]=d.useState(!1),[X,ne]=d.useState(0),[J,ce]=d.useState(0),ae=$e(),B=d.useRef(null),A=d.useRef(null),[P,C]=d.useState([]),[O,D]=d.useState({min:null,max:null}),[re,Z]=d.useState(!1),[V,K]=d.useState(null),[Q,le]=d.useState([]),me=n.songs,pe=d.useRef(!0),[ie,W]=d.useState(!1),de=d.useRef(me),[oe,_e]=d.useState(ju),[Ve,Fe]=d.useState(Iu);d.useEffect(()=>{(async()=>{try{const _=xe.getState();if(_.years.length>0)le(_.years);else{const fe=await T.getYears();le(fe)}}catch(_){console.error("Failed to load filter values:",_)}})()},[]);const We=P.length>0||O.min!==null||O.max!==null;d.useEffect(()=>{const q=f.trim().length>0;if(q||We){z(!0);const _=window.setTimeout(()=>{(async()=>{try{if(q){const je=await Es(f,450);g(je)}else{const je=await Ps(450);g(je)}}catch(je){console.error("Search failed:",je),g(null)}finally{z(!1)}})()},250);return()=>{window.clearTimeout(_)}}else g(null),z(!1)},[f,We]);const $=d.useMemo(()=>{if(!w)return null;const q=je=>{if(O.min!==null||O.max!==null)return!1;if(P.length>0){const Se=je.Genres||[];if(!P.some(Qt=>Se.some(Rn=>Rn.toLowerCase()===Qt.toLowerCase())))return!1}return!0},_=je=>{if(P.length>0){const Se=je.Genres||[];if(!P.some(Qt=>Se.some(Rn=>Rn.toLowerCase()===Qt.toLowerCase())))return!1}if(O.min!==null||O.max!==null){const Se=je.ProductionYear;if(!Se||Se<=0||O.min!==null&&Se<O.min||O.max!==null&&Se>O.max)return!1}return!0},fe=je=>!(O.min!==null||O.max!==null||P.length>0);return{songs:w.songs.filter(_),artists:w.artists.filter(q),albums:w.albums.filter(_),playlists:(w.playlists||[]).filter(fe)}},[w,P,O]);d.useEffect(()=>{var q;if(m&&((q=B.current)==null||q.focus(),B.current)){const _=B.current.value.length;B.current.setSelectionRange(_,_)}},[m]);const te=q=>{p(q),q.trim().length>0&&!m&&v(!0)},U=()=>{p(""),g(null)},E=()=>{v(!1),p(""),g(null),C([]),D({min:null,max:null})},M=q=>{K(q),Z(!0)},Y=q=>{C(q)},H=q=>{D(q)},se=q=>{ae(`/artist/${q}`),v(!1),p(""),g(null)},ge=q=>{ae(`/album/${q}`),v(!1),p(""),g(null)},G=q=>{i(q,[q])},ue=q=>{q.preventDefault(),q.stopPropagation(),$!=null&&$.songs&&$.songs.length>0&&c($.songs)},Pe=q=>{q.preventDefault(),q.stopPropagation(),$!=null&&$.songs&&$.songs.length>0&&u($.songs)},be=q=>{ae(`/playlist/${q}`),v(!1),p(""),g(null)},lt=(q,_,fe="mobile",je)=>{k(q),R(_),x(fe),b(je||null),y(!0)};d.useEffect(()=>{f.trim()||ne(0)},[me,f]),d.useEffect(()=>{Fe(Iu)},[f,m,w==null?void 0:w.songs.length]),d.useEffect(()=>{var fe;const q=A.current;if(!m||!q||!((fe=w==null?void 0:w.songs)!=null&&fe.length))return;const _=()=>{const je=q.scrollTop,Se=q.clientHeight,Je=q.scrollHeight;je+Se*1.5>=Je&&Fe(Qt=>Math.min(Qt+dv,w.songs.length))};return q.addEventListener("scroll",_,{passive:!0}),()=>q.removeEventListener("scroll",_)},[m,w==null?void 0:w.songs.length,Ve]),d.useEffect(()=>{_e(ju)},[X,e.length]),d.useEffect(()=>{const q=()=>{const _=window.scrollY||document.documentElement.scrollTop,fe=window.innerHeight||document.documentElement.clientHeight,je=document.documentElement.scrollHeight;_+fe*1.5>=je&&_e(Se=>Math.min(Se+uv,e.length))};return window.addEventListener("scroll",q,{passive:!0}),()=>window.removeEventListener("scroll",q)},[e.length]),d.useEffect(()=>{f.trim()||(!pe.current&&de.current!==me&&W(!0),de.current=me,gt())},[X,me,f]),d.useEffect(()=>{pe.current&&(pe.current=!1)},[]);const gt=async()=>{s("songs",!0);try{const q={limit:Ks,startIndex:X*Ks};me==="RecentlyAdded"?(q.sortBy=["DateCreated"],q.sortOrder="Descending"):(q.sortBy=["SortName"],q.sortOrder="Ascending");const _=await T.getSongs(q);t(_.Items),ce(_.TotalRecordCount||0)}catch(q){console.error("Failed to load songs:",q),t([]),ce(0)}finally{s("songs",!1),W(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Songs"}),l.jsx("button",{onClick:()=>v(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!m&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("songs",me==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[me==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(As,{className:"w-4 h-4"})]}),o.songs&&!pe.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Yt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!m&&l.jsx("div",{className:ie?"opacity-50 pointer-events-none":"",children:e.length===0&&!o.songs?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No songs found"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-0",children:e.map((q,_)=>l.jsx(om,{song:q,showImage:_<oe},q.Id))}),l.jsx(Yi,{currentPage:X,totalPages:Math.ceil(J/Ks),onPageChange:ne,itemsPerPage:Ks,totalItems:J})]})})})]}),m&&Zn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{ref:A,className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(qn,{ref:B,value:f,onChange:te,showClearButton:f.trim().length>0,onClear:U})}),l.jsx("button",{onClick:E,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>M("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${P.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Wn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>M("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${O.min!==null||O.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx(Di,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:L?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):$?l.jsxs("div",{className:"space-y-8",children:[$.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:ue,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Pe,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ht,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:$.songs.map((q,_)=>l.jsx(cv,{song:q,onClick:G,onContextMenu:lt,contextMenuItemId:(j==null?void 0:j.Id)||null,showImage:_<Ve},q.Id))})]}),$.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:$.artists.slice(0,5).map(q=>l.jsx(av,{artist:q,onClick:se,onContextMenu:lt,contextMenuItemId:(j==null?void 0:j.Id)||null},q.Id))})]}),$.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:$.albums.slice(0,12).map(q=>l.jsx(iv,{album:q,onClick:ge,onContextMenu:lt,contextMenuItemId:(j==null?void 0:j.Id)||null},q.Id))})]}),$.playlists&&$.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:$.playlists.map(q=>l.jsxs("button",{onClick:()=>be(q.Id),onContextMenu:_=>{_.preventDefault(),_.stopPropagation(),lt(q,"playlist","desktop",{x:_.clientX,y:_.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:T.getAlbumArtUrl(q.Id,96),alt:q.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:q.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:q.ChildCount?`${q.ChildCount} tracks`:"Playlist"})]})]},q.Id))})]}),$.artists.length===0&&$.albums.length===0&&(!$.playlists||$.playlists.length===0)&&$.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),V==="genre"&&l.jsx(Xn,{isOpen:re,onClose:()=>Z(!1),filterType:"genre",genres:a,selectedValues:P,onApply:Y}),V==="year"&&l.jsx(Xn,{isOpen:re,onClose:()=>Z(!1),filterType:"year",availableYears:Q,yearRange:O,onApplyYear:H}),l.jsx(He,{item:j,itemType:I,isOpen:S,onClose:()=>{y(!1),k(null),R(null)},zIndex:99999,mode:h,position:N||void 0})]})}function mv({genre:e}){const t=$e();return l.jsx("button",{onClick:()=>t(`/genre/${e.Id}`),className:"w-full flex items-center justify-between h-12 pl-4 pr-4 hover:bg-zinc-900 transition-colors group",children:l.jsx("div",{className:"text-base font-medium text-white group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})}function hv(){const{genres:e,setGenres:t,setLoading:n,loading:r}=xe();return d.useEffect(()=>{if(e.length>0)return;(async()=>{n("genres",!0);try{const a=(await T.getGenres()||[]).sort((i,c)=>(i.Name||"").localeCompare(c.Name||""));t(a)}catch(o){console.error("Failed to load genres:",o),t([])}finally{n("genres",!1)}})()},[e.length,t,n]),l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Genres"}),r.genres&&l.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:l.jsx(Yt,{})}),!r.genres&&l.jsx("div",{className:"w-10 h-10"})]})})})}),l.jsxs("div",{className:"pb-4",style:{paddingTop:"calc(env(safe-area-inset-top) + 6rem)"},children:[e.length===0&&!r.genres&&l.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:l.jsx("p",{children:"No genres found"})}),e.length>0&&l.jsx("div",{className:"space-y-2",children:[...e].sort((s,o)=>(s.Name||"").localeCompare(o.Name||"")).map(s=>l.jsx(mv,{genre:s},s.Id))})]})]})}function pv({playlist:e}){const t=$e(),[n,r]=d.useState(!1),[s,o]=d.useState("mobile"),[a,i]=d.useState(null),c=d.useRef(!1),u=m=>{if(c.current){m.preventDefault(),c.current=!1;return}t(`/playlist/${e.Id}`)},f=Ie({onLongPress:m=>{m.preventDefault(),c.current=!0,o("mobile"),i(null),r(!0)},onClick:u}),p=m=>{m.preventDefault(),m.stopPropagation(),c.current=!0,o("desktop"),i({x:m.clientX,y:m.clientY}),r(!0),setTimeout(()=>{c.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:m=>{if(n||c.current){m.preventDefault(),m.stopPropagation();return}u(m)},onContextMenu:p,...f,className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(it,{src:T.getAlbumArtUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left flex flex-col justify-center",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.ChildCount?`${e.ChildCount} tracks`:"Playlist"})]})]}),l.jsx(He,{item:e,itemType:"playlist",isOpen:n,onClose:()=>r(!1),mode:s,position:a||void 0})]})}const $o=new Map;function gv({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var v,w;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,[c,u]=d.useState(null);d.useEffect(()=>{var h;if((h=e.ImageTags)!=null&&h.Primary){u(null);return}const g=$o.get(e.Id);if(g!==void 0){u(g);return}let S=!1;return(async()=>{try{const{albums:x,songs:N}=await T.getArtistItems(e.Id),b=x[0],j=N.find(L=>L.AlbumId)||N[0],k=b||j,I=k?k.AlbumId||k.Id:null,R=I?T.getAlbumArtUrl(I,96):null;$o.set(e.Id,R),S||u(R)}catch(x){console.error("Failed to load fallback album art for artist (playlists search):",e.Id,x),$o.set(e.Id,null)}})(),()=>{S=!0}},[e.Id,e.ImageTags]);const f=g=>{if(i||a.current){g.preventDefault(),g.stopPropagation(),a.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),a.current=!0,n(e,"artist"),setTimeout(()=>{a.current=!1},100)},m=Ie({onLongPress:g=>{g.preventDefault(),a.current=!0,n(e,"artist")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(v=e.ImageTags)!=null&&v.Primary||c?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?T.getArtistImageUrl(e.Id,96):c||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function xv({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,m;const[s,o]=d.useState(!1),a=d.useRef(!1),i=r===e.Id,c=v=>{if(i||a.current){v.preventDefault(),v.stopPropagation(),a.current=!1;return}t(e.Id)},u=v=>{v.preventDefault(),v.stopPropagation(),a.current=!0,n(e,"album"),setTimeout(()=>{a.current=!1},100)},f=Ie({onLongPress:v=>{v.preventDefault(),a.current=!0,n(e,"album")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:u,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((m=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:m.Name)||"Unknown Artist"})]})}function vv({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var v,w;const o=d.useRef(!1),a=r===e.Id,[i,c]=d.useState(!1),u=g=>{const S=Math.floor(g/1e7),y=Math.floor(S/60),h=S%60;return`${y}:${h.toString().padStart(2,"0")}`},f=g=>{if(a||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song"),setTimeout(()=>{o.current=!1},100)},m=Ie({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song")},onClick:f});return l.jsxs("button",{onClick:f,onContextMenu:p,...m,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:i?l.jsx(Ge,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>c(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(v=e.ArtistItems)==null?void 0:v[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}function yv(){const[e,t]=d.useState([]),[n,r]=d.useState(!0),{sortPreferences:s,setSortPreference:o}=xe(),{playTrack:a,playAlbum:i,addToQueue:c}=we(),u=s.playlists,f=d.useRef(!0),[p,m]=d.useState(!1),v=d.useRef(u),w=$e(),g=d.useRef(null),[S,y]=d.useState(""),[h,x]=d.useState(!1),[N,b]=d.useState(null),[j,k]=d.useState(!1),[I,R]=d.useState(!1),[L,z]=d.useState(null),[X,ne]=d.useState(null),[J,ce]=d.useState("mobile"),[ae,B]=d.useState(null),[A,P]=d.useState(45);d.useEffect(()=>{h||(!f.current&&v.current!==u&&m(!0),v.current=u,C())},[u,h]),d.useEffect(()=>{f.current&&(f.current=!1)},[]),d.useEffect(()=>{if(S.trim()){k(!0);const W=window.setTimeout(()=>{(async()=>{try{const oe=await Es(S,450);b(oe)}catch(oe){console.error("Search failed:",oe),b(null)}finally{k(!1)}})()},250);return()=>{window.clearTimeout(W)}}else b(null),k(!1)},[S]),d.useEffect(()=>{P(45)},[S,h,N==null?void 0:N.songs.length]),d.useEffect(()=>{var de;if(!h||!((de=N==null?void 0:N.songs)!=null&&de.length))return;const W=()=>{const oe=window.scrollY||document.documentElement.scrollTop,_e=window.innerHeight||document.documentElement.clientHeight,Ve=document.documentElement.scrollHeight;oe+_e*1.5>=Ve&&P(Fe=>Math.min(Fe+45,N.songs.length))};return window.addEventListener("scroll",W,{passive:!0}),()=>window.removeEventListener("scroll",W)},[h,N==null?void 0:N.songs.length]),d.useEffect(()=>{var W;if(h&&((W=g.current)==null||W.focus(),g.current)){const de=g.current.value.length;g.current.setSelectionRange(de,de)}},[h]);const C=async()=>{r(!0);try{const W={limit:100};u==="RecentlyAdded"?(W.sortBy=["DateCreated"],W.sortOrder="Descending"):(W.sortBy=["SortName"],W.sortOrder="Ascending");const de=await T.getPlaylists(W);t(de.Items)}catch(W){console.error("Failed to load playlists:",W)}finally{r(!1),m(!1)}},O=W=>{y(W),W.trim().length>0&&!h&&x(!0)},D=()=>{y(""),b(null)},re=()=>{x(!1),y(""),b(null)},Z=W=>{w(`/artist/${W}`),x(!1),y(""),b(null)},V=W=>{w(`/album/${W}`),x(!1),y(""),b(null)},K=W=>{a(W,[W])},Q=W=>{W.preventDefault(),W.stopPropagation(),ie!=null&&ie.songs&&ie.songs.length>0&&i(ie.songs)},le=W=>{W.preventDefault(),W.stopPropagation(),ie!=null&&ie.songs&&ie.songs.length>0&&c(ie.songs)},me=W=>{w(`/playlist/${W}`),x(!1),y(""),b(null)},pe=(W,de,oe="mobile",_e)=>{z(W),ne(de),ce(oe),B(_e||null),R(!0)},ie=d.useMemo(()=>N?{playlists:N.playlists||[],artists:N.artists||[],albums:N.albums||[],songs:N.songs||[]}:null,[N]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Playlists"}),l.jsx("button",{onClick:()=>x(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!h&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>o("playlists",u==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[u==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(As,{className:"w-4 h-4"})]}),n&&!f.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(Yt,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!h&&l.jsx("div",{className:p?"opacity-50 pointer-events-none":"",children:e.length===0&&!n?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No playlists found"})}):l.jsx("div",{className:"space-y-0",children:e.map(W=>l.jsx(pv,{playlist:W},W.Id))})})})]}),h&&Zn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(qn,{ref:g,value:S,onChange:O,showClearButton:S.trim().length>0,onClear:D})}),l.jsx("button",{onClick:re,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsx("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:l.jsx("div",{className:"pb-32 pt-4",children:j?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):ie?l.jsxs("div",{className:"space-y-8",children:[ie.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:ie.playlists.map(W=>l.jsxs("button",{onClick:()=>me(W.Id),onContextMenu:de=>{de.preventDefault(),de.stopPropagation(),pe(W,"playlist","desktop",{x:de.clientX,y:de.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:T.getAlbumArtUrl(W.Id,96),alt:W.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:W.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:W.ChildCount?`${W.ChildCount} tracks`:"Playlist"})]})]},W.Id))})]}),ie.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:ie.artists.slice(0,5).map(W=>l.jsx(gv,{artist:W,onClick:Z,onContextMenu:pe,contextMenuItemId:(L==null?void 0:L.Id)||null},W.Id))})]}),ie.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:ie.albums.slice(0,12).map(W=>l.jsx(xv,{album:W,onClick:V,onContextMenu:pe,contextMenuItemId:(L==null?void 0:L.Id)||null},W.Id))})]}),ie.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:Q,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:le,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ht,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:ie.songs.map((W,de)=>l.jsx(vv,{song:W,onClick:K,onContextMenu:pe,contextMenuItemId:(L==null?void 0:L.Id)||null,showImage:de<A},W.Id))})]}),ie.playlists.length===0&&ie.artists.length===0&&ie.albums.length===0&&ie.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})})]})}),document.body),l.jsx(He,{item:L,itemType:X,isOpen:I,onClose:()=>{R(!1),z(null),ne(null)},zIndex:99999,mode:J,position:ae||void 0})]})}const bu=45,wv=45;function Sv({track:e,index:t,tracks:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){var f,p;const a=o===e.Id,i=It(),c=m=>{const v=Math.floor(m/1e7),w=Math.floor(v/60),g=v%60;return`${w}:${g.toString().padStart(2,"0")}`},u=Ie({onLongPress:m=>{m.preventDefault(),s(e,"mobile")},onClick:()=>r(e,n)});return l.jsxs("button",{onClick:()=>r(e,n),onContextMenu:m=>{m.preventDefault(),s(e,"desktop",{x:m.clientX,y:m.clientY})},...u,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(it,{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((p=(f=e.ArtistItems)==null?void 0:f[0])==null?void 0:p.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:c(e.RunTimeTicks)})]})}function Nv(){const{id:e}=eo(),t=$e(),{playAlbum:n,playTrack:r,isPlaying:s}=we(),o=It(),[a,i]=d.useState(null),[c,u]=d.useState([]),[f,p]=d.useState(!0),[m,v]=d.useState(!1),[w,g]=d.useState(null),[S,y]=d.useState(!1),[h,x]=d.useState("mobile"),[N,b]=d.useState(null),[j,k]=d.useState(bu);d.useEffect(()=>{if(!e)return;(async()=>{p(!0);try{const z=await T.getAlbumTracks(e);u(z);const ne=(await T.getPlaylists({limit:1e3})).Items.find(J=>J.Id===e);ne?i(ne):z.length>0&&i({Id:e,Name:"Playlist",Type:"Playlist"})}catch(z){console.error("Failed to load playlist data:",z)}finally{p(!1)}})()},[e]),d.useEffect(()=>{k(bu)},[c.length]),d.useEffect(()=>{const L=()=>{const z=window.scrollY||document.documentElement.scrollTop,X=window.innerHeight||document.documentElement.clientHeight,ne=document.documentElement.scrollHeight;z+X*1.5>=ne&&k(J=>Math.min(J+wv,c.length))};return window.addEventListener("scroll",L,{passive:!0}),()=>window.removeEventListener("scroll",L)},[c.length]);const I=()=>{c.length>0&&n(c)},R=()=>!c.length||!o?!1:c.some(L=>L.Id===o.Id);return f?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Loading..."})})}):!a||c.length===0?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Playlist not found"})})}):l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center justify-between gap-4 px-4",style:{paddingTop:"calc(1rem + 8px)",paddingBottom:"1rem"},children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Bn,{className:"w-6 h-6"})}),a&&l.jsx("button",{onClick:L=>{const z=L.currentTarget.getBoundingClientRect();x("desktop"),b({x:z.left+z.width/2,y:z.bottom+5}),y(!0)},className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Fi,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{className:"pt-20",children:[l.jsx("div",{className:"mb-6 px-4 pt-4",children:l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-0.5 text-left break-words",children:a.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("div",{className:"text-gray-400",children:[c.length," ",c.length===1?"track":"tracks"]}),l.jsx("button",{onClick:R()&&s?()=>we.getState().pause():I,className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:R()&&s?l.jsxs(l.Fragment,{children:[l.jsx(An,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(nt,{className:"w-3.5 h-3.5"}),"Play"]})})]})]})}),l.jsx("div",{children:l.jsx("div",{className:"space-y-0",children:c.slice(0,j).map((L,z)=>l.jsx(Sv,{track:L,index:z,tracks:c,onClick:X=>r(X,c),onContextMenu:(X,ne,J)=>{g(X),setContextMenuMode(ne||"mobile"),setContextMenuPosition(J||null),v(!0)},contextMenuItemId:(w==null?void 0:w.Id)||null},L.Id))})})]}),l.jsx(He,{item:w,itemType:"song",isOpen:m,onClose:()=>{v(!1),g(null)}}),l.jsx(He,{item:a,itemType:"playlist",isOpen:S,onClose:()=>{y(!1)},mode:h,position:N||void 0})]})}const jv=[{name:"zinc",hex:"#71717a"},{name:"red",hex:"#ef4444"},{name:"orange",hex:"#f97316"},{name:"amber",hex:"#f59e0b"},{name:"yellow",hex:"#eab308"},{name:"lime",hex:"#84cc16"},{name:"green",hex:"#22c55e"},{name:"emerald",hex:"#10b981"},{name:"teal",hex:"#14b8a6"},{name:"cyan",hex:"#06b6d4"},{name:"sky",hex:"#0ea5e9"},{name:"blue",hex:"#3b82f6"},{name:"indigo",hex:"#6366f1"},{name:"violet",hex:"#8b5cf6"},{name:"purple",hex:"#a855f7"},{name:"fuchsia",hex:"#d946ef"},{name:"pink",hex:"#ec4899"},{name:"rose",hex:"#f43f5e"}];function Iv(){const e=$e(),{pageVisibility:t,setPageVisibility:n,accentColor:r,setAccentColor:s}=Dt(),{logout:o,serverUrl:a}=_i(),{setGenres:i,lastSyncCompleted:c,setLastSyncCompleted:u}=xe(),{state:f,startSync:p,completeSync:m}=ro(),[v,w]=d.useState(!1),[g,S]=d.useState(!1),[y,h]=d.useState({scope:"incremental"}),x=()=>{S(!1),h({scope:"incremental"})},N=()=>{o(),e("/")},b=I=>{n({[I]:!t[I]})},j=async()=>{const I=(y.scope==="full","Syncing...");p("settings",I);try{await T.syncLibrary(y);const L=(await T.getGenres()||[]).sort((z,X)=>(z.Name||"").localeCompare(X.Name||""));i(L),u(Date.now()),m(!0,"Library synced successfully")}catch(R){m(!1,R instanceof Error?R.message:"Failed to sync library")}},k=async()=>{if(a)try{await navigator.clipboard.writeText(a),w(!0),setTimeout(()=>w(!1),1500)}catch{}};return l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>e("/"),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Bn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1",children:"Settings"})]})})}),l.jsxs("div",{className:"p-4 space-y-8",style:{paddingTop:"calc(env(safe-area-inset-top) + 4.5rem + 1rem)"},children:[l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Page Visibility"}),l.jsx("div",{className:"space-y-3",children:["artists","albums","songs","genres","playlists"].map(I=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-lg",children:[l.jsx("label",{className:"text-white capitalize font-medium",children:I}),l.jsx("button",{onClick:()=>b(I),className:`relative w-12 h-6 rounded-full transition-colors ${t[I]?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:l.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${t[I]?"translate-x-6":"translate-x-0"}`})})]},I))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Accent Color"}),l.jsx("div",{className:"grid grid-cols-6 md:grid-cols-9 gap-3 mb-6",children:jv.map(I=>l.jsx("button",{onClick:()=>s(I.name),className:`aspect-square rounded-lg transition-all ${r===I.name?"ring-2 ring-white ring-offset-2 ring-offset-black scale-110":"hover:scale-105"}`,style:{backgroundColor:I.hex},"aria-label":`Select ${I.name} color`},I.name))}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"About Tunetuna"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("a",{href:"https://github.com/AlessioLaiso/tunetuna",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[l.jsx(Fx,{className:"w-5 h-5"}),l.jsx("span",{children:"GitHub"})]}),l.jsxs("a",{href:"https://www.paypal.com/donate/?hosted_button_id=XBVKHU3JV9W8N",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[l.jsx(Vx,{className:"w-5 h-5"}),l.jsx("span",{children:"Donate"})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Jellyfin Library"}),l.jsxs("div",{className:"relative inline-block mb-2",children:[l.jsx("button",{type:"button",onClick:k,disabled:!a,className:`text-left text-xs break-all transition-colors ${a?"text-gray-400 hover:text-gray-200 cursor-pointer":"text-gray-600 cursor-not-allowed"}`,children:a?`Server: ${a}`:"Server: Not configured"}),v&&l.jsx("div",{className:"absolute left-0 mt-1 px-2 py-1 rounded bg-zinc-800 text-[10px] text-white shadow-lg",children:"Copied to clipboard"})]}),f==="idle"&&c&&l.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Last synced: ",new Date(c).getFullYear()," ",new Date(c).toLocaleString("default",{month:"short"})," ",new Date(c).getDate().toString().padStart(2,"0")," at ",new Date(c).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>S(!0),disabled:f==="syncing",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 disabled:opacity-50 disabled:cursor-not-allowed font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:f==="syncing"?l.jsxs(l.Fragment,{children:[l.jsx(es,{className:"w-5 h-5 animate-spin"}),l.jsx("span",{children:"Syncing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(es,{className:"w-5 h-5"}),l.jsx("span",{children:"Sync"})]})}),l.jsxs("button",{onClick:N,className:"flex-1 px-4 py-3 bg-transparent border border-red-500 text-red-500 hover:bg-red-500/10 font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:[l.jsx(t0,{className:"w-5 h-5"}),l.jsx("span",{children:"Log Out"})]})]})]}),l.jsx(Vi,{isOpen:g,onClose:x,zIndex:10001,children:l.jsxs("div",{className:"pb-6",children:[l.jsxs("div",{className:"mb-6 pl-4 pr-4",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"Sync"}),l.jsx("div",{className:"text-sm text-gray-400 mt-1",children:"Cache song metadata to speed up search and loading times"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>{h({scope:"incremental"}),S(!1),j()},disabled:f==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[l.jsx(c0,{className:"w-5 h-5 text-white flex-shrink-0"}),l.jsx("span",{className:"font-medium",children:"New and updated files"})]}),l.jsxs("button",{onClick:()=>{h({scope:"full"}),S(!1),j()},disabled:f==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[l.jsx(S0,{className:"w-5 h-5 text-white flex-shrink-0"}),l.jsx("span",{className:"font-medium",children:"All files (slower)"})]})]})]})})]})]})}const ku=45,bv=45,Cu=45,kv=45;function Cv({album:e,year:t,onNavigate:n,onContextMenu:r}){const[s,o]=d.useState(!1),a=d.useRef(!1),i=f=>{if(a.current){f.preventDefault(),f.stopPropagation(),a.current=!1;return}n(e.Id)},c=f=>{f.preventDefault(),f.stopPropagation(),a.current=!0,r(e,"desktop",{x:f.clientX,y:f.clientY}),setTimeout(()=>{a.current=!1},100)},u=Ie({onLongPress:f=>{f.preventDefault(),a.current=!0,r(e,"mobile")},onClick:i});return l.jsxs("button",{onClick:i,onContextMenu:c,...u,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsx(it,{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>o(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),t&&l.jsx("div",{className:"text-xs text-gray-400 truncate",children:t})]})}function Av({song:e,album:t,year:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){const a=o===e.Id,i=It(),c=f=>{const p=Math.floor(f/1e7),m=Math.floor(p/60),v=p%60;return`${m}:${v.toString().padStart(2,"0")}`},u=Ie({onLongPress:f=>{f.preventDefault(),s(e,"mobile")},onClick:()=>r(e)});return l.jsxs("button",{onClick:()=>r(e),onContextMenu:f=>{f.preventDefault(),s(e,"desktop",{x:f.clientX,y:f.clientY})},...u,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${a?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(it,{src:T.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),(t||n)&&l.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1 min-w-0",children:[t&&l.jsx("span",{className:"truncate",children:t}),t&&n&&l.jsx("span",{className:"flex-shrink-0",children:""}),n&&l.jsx("span",{className:"flex-shrink-0",children:n})]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:c(e.RunTimeTicks)})]})}function Ev(){var We;const{id:e}=eo(),t=$e(),{playAlbum:n,playTrack:r,isPlaying:s,pause:o,addToQueue:a}=we(),i=It(),[c,u]=d.useState(null),[f,p]=d.useState([]),[m,v]=d.useState([]),[w,g]=d.useState(!0),[S,y]=d.useState(!1),[h,x]=d.useState(!0),[N,b]=d.useState(!0),[j,k]=d.useState(!1),[I,R]=d.useState("mobile"),[L,z]=d.useState(null),[X,ne]=d.useState(null),[J,ce]=d.useState(null),[ae,B]=d.useState(!1),[A,P]=d.useState("mobile"),[C,O]=d.useState(null),[D,re]=d.useState("Alphabetical"),[Z,V]=d.useState(ku),[K,Q]=d.useState(Cu),le=d.useRef(null);d.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[e]);const me=$=>$.toLowerCase().replace(/[_\*\-\.]/g,"").trim();d.useEffect(()=>{if(!e)return;(async()=>{var te;g(!0);try{let E=await T.getArtistById(e);if(!E){const se=(await T.getArtists({limit:1e3})).Items.find(ge=>ge.Id===e);se&&(E=se)}if(!E){g(!1);return}u(E),b(!0);const M=await T.getArtistItems(e);if(M.albums.length===0&&M.songs.length===0&&E.Name){const H=me(E.Name),ge=((te=(await T.search(E.Name,50)).Artists)==null?void 0:te.Items)||[];for(const G of ge)if(G.Id!==e&&me(G.Name)===H){const ue=await T.getArtistItems(G.Id);if(ue.albums.length>0||ue.songs.length>0){t(`/artist/${G.Id}`,{replace:!0});return}}}const Y=[...M.albums].sort((H,se)=>{const ge=H.ProductionYear||(H.PremiereDate?new Date(H.PremiereDate).getFullYear():0);return(se.ProductionYear||(se.PremiereDate?new Date(se.PremiereDate).getFullYear():0))-ge});p(Y),v(M.songs)}catch(U){console.error("Failed to load artist data:",U)}finally{g(!1)}})()},[e,t]),d.useEffect(()=>{if(!(c!=null&&c.Overview))return;x(!0);let $=null,te=null,U=null,E=!1;const M=()=>{const se=le.current;if(!se||!(c!=null&&c.Overview)){x(!1);return}const ge=window.getComputedStyle(se);let G=parseFloat(ge.lineHeight||"0");if((!Number.isFinite(G)||G===0)&&(G=parseFloat(ge.fontSize||"16")*1.5),G===0){x(!1);return}const ue=se.scrollHeight;if(ue===0&&!E){E=!0,Y();return}const be=Math.round(ue/G)>2;x(be)},Y=()=>{$!==null&&cancelAnimationFrame($),te!==null&&clearTimeout(te),$=requestAnimationFrame(()=>{te=window.setTimeout(M,0)}),U!==null&&clearTimeout(U),U=window.setTimeout(()=>{E=!1,M()},300)},H=()=>{E=!1,Y()};return Y(),window.addEventListener("resize",H),()=>{$!==null&&cancelAnimationFrame($),te!==null&&clearTimeout(te),U!==null&&clearTimeout(U),window.removeEventListener("resize",H)}},[c==null?void 0:c.Overview]),d.useEffect(()=>{V(ku)},[f.length]),d.useEffect(()=>{const $=()=>{const te=window.scrollY||document.documentElement.scrollTop,U=window.innerHeight||document.documentElement.clientHeight,E=document.documentElement.scrollHeight;te+U*1.5>=E&&V(M=>Math.min(M+bv,f.length))};return window.addEventListener("scroll",$,{passive:!0}),()=>window.removeEventListener("scroll",$)},[f.length]),d.useEffect(()=>{Q(Cu)},[m.length]),d.useEffect(()=>{const $=()=>{const te=window.scrollY||document.documentElement.scrollTop,U=window.innerHeight||document.documentElement.clientHeight,E=document.documentElement.scrollHeight;te+U*1.5>=E&&Q(M=>Math.min(M+kv,m.length))};return window.addEventListener("scroll",$,{passive:!0}),()=>window.removeEventListener("scroll",$)},[m.length]);const pe=()=>{if(oe.length>0){const $=[...oe].sort(()=>Math.random()-.5);n($)}},ie=$=>$.ProductionYear?$.ProductionYear.toString():$.PremiereDate?new Date($.PremiereDate).getFullYear().toString():null,W=$=>{const te=$.Album||null;let U=null;if($.AlbumId){const E=f.find(M=>M.Id===$.AlbumId);E&&(U=ie(E))}return{album:te,year:U}},de=$=>{if($.AlbumId){const U=f.find(E=>E.Id===$.AlbumId);if(U){const E=U.ProductionYear||(U.PremiereDate?new Date(U.PremiereDate).getFullYear():0);return U.PremiereDate&&new Date(U.PremiereDate).getMonth(),U.PremiereDate&&new Date(U.PremiereDate).getDate(),U.PremiereDate?new Date(U.PremiereDate).getTime():E*1e4}}const te=$.ProductionYear||($.PremiereDate?new Date($.PremiereDate).getFullYear():0);return $.PremiereDate?new Date($.PremiereDate).getTime():te*1e4},oe=d.useMemo(()=>{if(D==="Alphabetical")return[...m].sort((U,E)=>{const M=U.Name||"",Y=E.Name||"";return M.localeCompare(Y)});const $=(U,E,M)=>{const Y=de(U),H=de(E),se=U.AlbumId||"",ge=E.AlbumId||"";if(Y!==H)return M?H-Y:Y-H;if(se!==ge)return se.localeCompare(ge);const G=U.IndexNumber||0,ue=E.IndexNumber||0;return G!==ue?G-ue:(U.Name||"").localeCompare(E.Name||"")},te=D==="Newest";return[...m].sort((U,E)=>$(U,E,te))},[m,D,f]),_e=$=>{$.preventDefault(),$.stopPropagation(),oe.length>0&&n(oe)},Ve=$=>{$.preventDefault(),$.stopPropagation(),oe.length>0&&a(oe)},Fe=()=>{re($=>$==="Alphabetical"?"Newest":$==="Newest"?"Oldest":"Alphabetical")};return w?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx(Yt,{})})}):c?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60]",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"relative flex items-center justify-between gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors z-10",children:l.jsx(Bn,{className:"w-6 h-6"})}),c&&l.jsx("button",{onClick:$=>{const te=$.currentTarget.getBoundingClientRect();P("desktop"),O({x:te.left+te.width/2,y:te.bottom+5}),B(!0)},className:"text-white hover:text-zinc-300 transition-colors z-10",children:l.jsx(Fi,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{className:"relative z-30 w-screen",style:{marginTop:"calc(-1 * env(safe-area-inset-top))",marginLeft:"calc(50% - 50vw)",marginRight:"calc(50% - 50vw)"},children:[N&&l.jsxs("div",{className:"relative w-full min-h-64 md:min-h-80 bg-black",style:{paddingTop:"env(safe-area-inset-top)"},children:[l.jsx("div",{className:"w-full flex items-center justify-center md:hidden",children:l.jsx(it,{src:T.getArtistImageUrl(c.Id),alt:c.Name,className:"w-full h-auto object-contain",onError:()=>b(!1)})}),l.jsx("div",{className:"hidden md:block w-full h-80",children:l.jsx("img",{src:T.getArtistBackdropUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover",onError:()=>b(!1)})}),l.jsx("div",{className:"absolute inset-x-0 top-0 bottom-[-1px] bg-gradient-to-b from-transparent via-black/60 to-black pointer-events-none"})]}),l.jsx("div",{className:`left-0 right-0 ${N?"absolute":"relative"} ${N?"pt-16":"pt-12"}`,style:N?{bottom:"-28px",paddingBottom:"1.5rem"}:{},children:l.jsxs("div",{className:"max-w-[768px] mx-auto px-4 flex items-end gap-6 md:grid md:grid-cols-3 md:gap-4",children:[N&&l.jsx("div",{className:"hidden md:block md:col-span-1",children:l.jsx("div",{className:"aspect-square rounded overflow-hidden bg-zinc-900 flex items-center justify-center",children:l.jsx(it,{src:T.getArtistImageUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded"})})}),l.jsx("div",{className:`flex-1 min-w-0 pb-2 ${N?"md:col-span-2":"md:col-span-3"}`,children:l.jsxs("div",{className:"mb-4 mt-4",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-2 break-words",children:c.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("p",{className:"text-sm text-gray-300",children:[f.length," ",f.length===1?"album":"albums","  ",oe.length," ",oe.length===1?"song":"songs"]}),l.jsx("button",{onClick:()=>{var te;i&&s&&(((te=i.ArtistItems)==null?void 0:te.some(U=>U.Id===e))||i.AlbumArtist===(c==null?void 0:c.Name))?o():pe()},className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:i&&s&&((We=i.ArtistItems)!=null&&We.some($=>$.Id===e)||i.AlbumArtist===(c==null?void 0:c.Name))?l.jsxs(l.Fragment,{children:[l.jsx(An,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(en,{className:"w-3.5 h-3.5"}),"Shuffle"]})})]})]})})]})})]}),l.jsxs("div",{className:"pt-6 md:pt-10",children:[c.Overview&&l.jsx("div",{className:"mb-6 -mt-4 px-4",children:l.jsxs("div",{className:"text-white relative",children:[l.jsx("p",{ref:le,className:"text-sm text-gray-300 leading-relaxed absolute opacity-0 pointer-events-none -z-10",children:c.Overview}),!S&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>y(!0),className:"flex-1 text-left min-w-0",children:l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-2",children:c.Overview})}),l.jsx("button",{onClick:()=>y(!0),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:l.jsx($i,{className:"w-4 h-4"})})]}),S&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:c.Overview}),l.jsxs("button",{onClick:()=>y(!1),className:"mt-2 flex items-center gap-1 text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:["Show less",l.jsx(lm,{className:"w-4 h-4"})]})]})]})}),f.length>0&&l.jsxs("div",{className:"mb-10 px-4",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Albums (",f.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:f.slice(0,Z).map($=>{const te=ie($);return l.jsx(Cv,{album:$,year:te,onNavigate:U=>t(`/album/${U}`),onContextMenu:(U,E,M)=>{ne(U),ce("album"),R(E||"mobile"),z(M||null),k(!0)}},$.Id)})})]}),m.length>0&&l.jsxs("div",{id:"songs-section",children:[l.jsxs("div",{className:"px-4 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Songs (",m.length,")"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:_e,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Ve,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ht,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"mt-1",children:l.jsxs("button",{type:"button",onClick:Fe,className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[D,l.jsx(As,{className:"w-4 h-4"})]})})]}),l.jsx("div",{className:"space-y-0",children:oe.slice(0,K).map($=>{const{album:te,year:U}=W($);return l.jsx(Av,{song:$,album:te,year:U,onClick:r,onContextMenu:(E,M,Y)=>{ne(E),ce("song"),R(M||"mobile"),z(Y||null),k(!0)},contextMenuItemId:(X==null?void 0:X.Id)||null},$.Id)})})]})]}),l.jsx(He,{item:X,itemType:J,isOpen:j,onClose:()=>{k(!1),ne(null),ce(null)},zIndex:99999,mode:I,position:L||void 0}),l.jsx(He,{item:c,itemType:"artist",isOpen:ae,onClose:()=>{B(!1)},mode:A,position:C||void 0})]}):l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Artist not found on the Jellyfin server"})})})}function Pv({track:e,trackNumber:t,tracks:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){const a=o===e.Id,i=It(),c=f=>{const p=Math.floor(f/1e7),m=Math.floor(p/60),v=p%60;return`${m}:${v.toString().padStart(2,"0")}`},u=Ie({onLongPress:f=>{f.preventDefault(),s(e,"mobile")},onClick:()=>r(e,n)});return l.jsxs("button",{onClick:()=>r(e,n),onContextMenu:f=>{f.preventDefault(),s(e,"desktop",{x:f.clientX,y:f.clientY})},...u,className:`w-full flex items-baseline hover:bg-white/10 transition-colors group py-3 ${a?"bg-white/10":""}`,children:[l.jsx("span",{className:`text-sm w-6 text-right flex-shrink-0 mr-4 ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-gray-500"}`,children:t&&t>0?t:"-"}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(i==null?void 0:i.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name})}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right mr-4",children:c(e.RunTimeTicks)})]})}function Mv(){const{id:e}=eo(),t=$e(),{playAlbum:n,playTrack:r,isPlaying:s,play:o,pause:a}=we(),i=It(),[c,u]=d.useState(null),[f,p]=d.useState([]),[m,v]=d.useState(!0),[w,g]=d.useState(!1),[S,y]=d.useState(!0),[h,x]=d.useState(!1),[N,b]=d.useState("mobile"),[j,k]=d.useState(null),[I,R]=d.useState(null),[L,z]=d.useState(!1),[X,ne]=d.useState("mobile"),[J,ce]=d.useState(null),[ae,B]=d.useState(null),[A,P]=d.useState(!1),[C,O]=d.useState(!1),[D,re]=d.useState(!1),Z=d.useRef(!1),V=d.useRef(!1),[K,Q]=d.useState(0),le=d.useRef(0),me=d.useRef(null),pe=d.useRef(0),ie=d.useRef(!1),W=d.useRef(null),de=d.useRef(null),oe=d.useRef(!1);d.useEffect(()=>{if(!e)return;(async()=>{var E;v(!0);try{const M=await T.getAlbumTracks(e);p(M);let H=await T.getAlbumById(e);if(!H){const G=(await T.getAlbums({limit:1})).Items.find(ue=>ue.Id===e);G&&(H=G)}H||M.length>0&&M[0].AlbumId===e&&(H={Id:e,Name:M[0].Album||"Unknown Album",AlbumArtist:M[0].AlbumArtist}),H&&(u(H),y(!0));const se=_e(M,H);if(se)try{const ge=await T.getArtistById(se);(E=ge==null?void 0:ge.ImageTags)!=null&&E.Logo?(B(T.getImageUrl(se,"Logo")),P(!0)):(P(!1),B(null))}catch(ge){console.warn("Failed to load artist logo:",ge),P(!1),B(null)}else P(!1),B(null)}catch(M){console.error("Failed to load album data:",M)}finally{v(!1)}})()},[e]),d.useEffect(()=>{const U=(i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s,E=(c==null?void 0:c.Id)||null,M=de.current!==null&&de.current!==E;if(oe.current!==U&&(Z.current=!1),oe.current=U,!S){O(!1),re(!1),de.current=E;return}U?((M||!ie.current||!C)&&(O(!0),re(!1),ie.current=!0),V.current=window.innerWidth>=768,Z.current||(Z.current=!0,setTimeout(()=>{(i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s&&re(!0)},500)),de.current=E):ie.current&&C&&!U?(Z.current||(Z.current=!0,re(!1)),de.current=E):ie.current?(O(!1),re(!1),de.current=E):(O(!1),re(!1),ie.current=!0,de.current=E)},[i==null?void 0:i.AlbumId,c==null?void 0:c.Id,s,C,S,D]),d.useEffect(()=>{const U=()=>{if((i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s&&C){const M=window.innerWidth>=768;V.current=M,D&&(re(!1),setTimeout(()=>re(!0),10))}};return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[i==null?void 0:i.AlbumId,c==null?void 0:c.Id,s,C,D]),d.useEffect(()=>{if((i==null?void 0:i.AlbumId)===(c==null?void 0:c.Id)&&s){const E=M=>{pe.current===0&&(pe.current=M);const Y=M-pe.current,H=360/1e4;le.current=(le.current+H*Y)%360,Q(le.current),pe.current=M,me.current=requestAnimationFrame(E)};pe.current=0,me.current=requestAnimationFrame(E)}else me.current&&(cancelAnimationFrame(me.current),me.current=null),pe.current=0;return()=>{me.current&&cancelAnimationFrame(me.current)}},[i==null?void 0:i.AlbumId,c==null?void 0:c.Id,s]);const _e=(U,E)=>U.length>0&&U[0].ArtistItems&&U[0].ArtistItems.length>0?U[0].ArtistItems[0].Id:E!=null&&E.ArtistItems&&E.ArtistItems.length>0?E.ArtistItems[0].Id:null,Ve=()=>{f.length>0&&n(f)},Fe=()=>{if(f.length>0){const U=f[0];if(U.ProductionYear&&U.ProductionYear>0)return U.ProductionYear.toString();if(U.PremiereDate){const E=new Date(U.PremiereDate).getFullYear();if(E>0)return E.toString()}}return null},We=()=>f.length>0&&f[0].ArtistItems&&f[0].ArtistItems.length>0?f[0].ArtistItems[0].Id:c!=null&&c.ArtistItems&&c.ArtistItems.length>0?c.ArtistItems[0].Id:null,$=()=>{var U,E;return c.AlbumArtist||((E=(U=c.ArtistItems)==null?void 0:U[0])==null?void 0:E.Name)||null},te=()=>{const U=We();U&&t(`/artist/${U}`)};return m?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen",children:l.jsx(Yt,{})})}):!c||f.length===0?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Album not found"})})}):l.jsxs("div",{className:"pb-20",style:{overflowX:"hidden",maxWidth:"100vw",width:"100%"},children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[55] pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)",background:"transparent"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 z-10 pointer-events-none",style:{height:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",top:"var(--header-offset, 0px)",background:`linear-gradient(to bottom,
            #000000 0%,
            #000000 calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 0.5rem),
            rgba(0, 0, 0, 0.95) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 1rem),
            rgba(0, 0, 0, 0.85) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 1.5rem),
            rgba(0, 0, 0, 0.7) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 2rem),
            rgba(0, 0, 0, 0.5) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 2.5rem),
            rgba(0, 0, 0, 0.3) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 3rem),
            rgba(0, 0, 0, 0.15) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 3.5rem),
            rgba(0, 0, 0, 0) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)
          )`}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 z-20",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto relative",children:l.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 relative z-10",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Bn,{className:"w-6 h-6"})}),c&&l.jsx("button",{onClick:U=>{const E=U.currentTarget.getBoundingClientRect();ne("desktop"),ce({x:E.left+E.width/2,y:E.bottom+5}),z(!0)},className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Fi,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{style:{paddingTop:"calc(5rem + 12px - 48px)"},children:[l.jsxs("div",{className:"mb-6 px-4 pt-4",style:{overflow:"visible"},children:[S&&l.jsx("div",{className:"flex justify-center mb-6 relative",style:{overflowX:"visible",overflowY:"visible",paddingLeft:"16px",paddingRight:"16px"},children:l.jsxs("div",{ref:W,className:"w-64 h-64 relative",style:{overflow:"visible"},children:[l.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",style:{opacity:C?1:0,zIndex:1,transform:(i==null?void 0:i.AlbumId)===c.Id&&s&&V.current?"translateX(calc(50% + 8px))":"translateX(0)",transition:"transform 500ms ease-in-out, opacity 300ms ease-in-out"},children:l.jsxs("div",{className:"w-full h-full",style:{transformOrigin:"center center",transform:`rotate(${K}deg)`},children:[l.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:U=>{console.error("Failed to load vinyl image"),U.currentTarget.style.display="none"}}),l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full",style:{width:"52%",height:"52%",backgroundColor:"#a1a1aa",transform:"translate(-50%, -50%)",transformOrigin:"center center"}}),A&&ae?l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full overflow-hidden flex items-center justify-center",style:{width:"47%",height:"47%",transform:"translate(-50%, -50%)",transformOrigin:"center center"},children:l.jsx("img",{src:ae,alt:"Artist Logo",className:"w-full h-full object-contain",onError:()=>{P(!1),B(null)}})}):S?l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full overflow-hidden flex items-center justify-center",style:{width:"52%",height:"52%",transform:"translate(-50%, -50%)",transformOrigin:"center center"},children:l.jsx("img",{src:T.getAlbumArtUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover"})}):null]})}),l.jsx("div",{className:"absolute inset-0 rounded overflow-hidden bg-zinc-900 transition-all duration-500",style:{transform:(i==null?void 0:i.AlbumId)===c.Id&&s||D?V.current?"translateX(calc(-50% - 8px))":"translateX(calc(-100% - 24px))":"translateX(0)",opacity:1,transitionProperty:"transform",transitionDuration:"500ms",transitionTimingFunction:"ease-in-out",zIndex:10},children:l.jsx(it,{src:T.getAlbumArtUrl(c.Id),alt:c.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>y(!1)})})]})}),l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-0.5 text-left break-words",children:c.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("div",{className:"text-gray-400 flex items-center gap-1.5",children:[$()&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:te,className:`hover:text-white transition-colors ${We()?"cursor-pointer":"cursor-default"}`,children:$()}),Fe()&&l.jsx("span",{children:""})]}),Fe()&&l.jsx("button",{onClick:()=>t(`/albums?year=${Fe()}`),className:"hover:text-white transition-colors cursor-pointer",children:Fe()})]}),l.jsx("button",{onClick:()=>{(i==null?void 0:i.AlbumId)===c.Id&&s?a():(i==null?void 0:i.AlbumId)===c.Id&&!s?o():Ve()},className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:(i==null?void 0:i.AlbumId)===c.Id&&s?l.jsxs(l.Fragment,{children:[l.jsx(An,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(nt,{className:"w-3.5 h-3.5"}),"Play"]})})]})]})]}),c.Overview&&l.jsx("div",{className:"mb-6 px-4",children:l.jsxs("div",{className:"text-white relative",children:[!w&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>g(!0),className:"flex-1 text-left min-w-0",children:l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-2",children:c.Overview})}),l.jsx("button",{onClick:()=>g(!0),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:l.jsx($i,{className:"w-4 h-4"})})]}),w&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:c.Overview}),l.jsxs("button",{onClick:()=>g(!1),className:"mt-2 flex items-center gap-1 text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:["Show less",l.jsx(lm,{className:"w-4 h-4"})]})]})]})}),l.jsx("div",{children:l.jsx("div",{className:"space-y-0",children:(()=>{const U=new Map;f.forEach(Y=>{const H=Y.ParentIndexNumber??1;U.has(H)||U.set(H,[]),U.get(H).push(Y)});const E=U.size>1;return Array.from(U.keys()).sort((Y,H)=>Y-H).map(Y=>{const H=U.get(Y);return l.jsxs("div",{children:[E&&l.jsxs("div",{className:`px-4 py-2 text-xs font-medium text-gray-400 uppercase tracking-wider ${Y>1?"pt-4":""}`,children:["Disc ",Y]}),H.map(se=>l.jsx(Pv,{track:se,trackNumber:se.IndexNumber??null,tracks:f,onClick:ge=>r(ge,f),onContextMenu:(ge,G,ue)=>{R(ge),b(G||"mobile"),k(ue||null),x(!0)},contextMenuItemId:(I==null?void 0:I.Id)||null},se.Id))]},Y)})})()})})]}),l.jsx(He,{item:I,itemType:"song",isOpen:h,onClose:()=>{x(!1),R(null)},mode:N,position:j||void 0}),l.jsx(He,{item:c,itemType:"album",isOpen:L,onClose:()=>{z(!1)},mode:X,position:J||void 0})]})}const Au=45,Tv=45,Eu=45,Rv=45;function Lv({album:e,year:t,onNavigate:n,onContextMenu:r}){const[s,o]=d.useState(!1),a=Ie({onLongPress:i=>{i.preventDefault(),r(e,"mobile")},onClick:()=>n(e.Id)});return l.jsxs("button",{onClick:()=>n(e.Id),onContextMenu:i=>{i.preventDefault(),r(e,"desktop",{x:i.clientX,y:i.clientY})},...a,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(Ge,{className:"w-12 h-12 text-gray-500"}):l.jsx(it,{src:T.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>o(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),t&&l.jsx("div",{className:"text-xs text-gray-400 truncate",children:t})]})}function zv(){const{id:e}=eo(),t=$e(),{playAlbum:n,toggleShuffle:r,isPlaying:s,pause:o,shuffleGenreSongs:a}=we();It();const{genres:i,genreSongs:c,setGenreSongs:u}=xe(),[f,p]=d.useState(null),[m,v]=d.useState([]),[w,g]=d.useState(!0),[S,y]=d.useState(!1),[h,x]=d.useState("mobile"),[N,b]=d.useState(null),[j,k]=d.useState(null),[I,R]=d.useState(null),[L,z]=d.useState(Au),[X,ne]=d.useState(Eu),[J,ce]=d.useState(!1);d.useEffect(()=>{if(J){const A=setTimeout(()=>{ce(!1)},1e4);return()=>clearTimeout(A)}},[J]),d.useEffect(()=>{if(!e)return;(async()=>{const P=c[e];if(P&&P.length>0){let C=i;C.length===0&&(C=await T.getGenres());const O=C.find(D=>D.Id===e);O&&p(O),v(P),g(!1);return}g(!0);try{let C=i;C.length===0&&(C=await T.getGenres());const O=C.find(Z=>Z.Id===e);if(!O){g(!1);return}p(O);const D=O.Name;if(!D){g(!1);return}const re=await T.getGenreSongs(e,D);u(e,re),v(re)}catch(C){console.error("Failed to load genre songs:",C)}finally{g(!1)}})()},[e,i,c,u]);const ae=async()=>{if(m.length>0&&(f!=null&&f.Id)&&(f!=null&&f.Name)&&!J){const A=we.getState(),{isShuffleAllActive:P,isShuffleGenreActive:C,shuffle:O}=A;if(P||C)return;ce(!0);try{await a(f.Id,f.Name)}catch(D){console.error("Failed to shuffle genre:",D)}finally{ce(!1)}}},B=d.useMemo(()=>{const A=new Map;return m.forEach(P=>{P.AlbumId&&P.Album&&(A.has(P.AlbumId)||A.set(P.AlbumId,{Id:P.AlbumId,Name:P.Album,AlbumArtist:P.AlbumArtist,ArtistItems:P.ArtistItems,ProductionYear:P.ProductionYear,PremiereDate:P.PremiereDate}))}),Array.from(A.values()).sort((P,C)=>{const O=P.ProductionYear||(P.PremiereDate?new Date(P.PremiereDate).getFullYear():0),D=C.ProductionYear||(C.PremiereDate?new Date(C.PremiereDate).getFullYear():0);if(O!==D)return D-O;const re=P.Name||"",Z=C.Name||"";return re.localeCompare(Z)})},[m]);return d.useMemo(()=>{const A=new Map;m.forEach(C=>{var Z,V;const O=C.AlbumArtist||((V=(Z=C.ArtistItems)==null?void 0:Z[0])==null?void 0:V.Name)||"Unknown Artist",D=C.AlbumId||"no-album";A.has(O)||A.set(O,new Map);const re=A.get(O);re.has(D)||re.set(D,[]),re.get(D).push(C)});const P=[];return A.forEach((C,O)=>{const D=[];C.forEach((re,Z)=>{var Q;const V=[...re].sort((le,me)=>{const pe=le.IndexNumber||0,ie=me.IndexNumber||0;return pe-ie}),K=((Q=V[0])==null?void 0:Q.Album)||"Unknown Album";D.push({albumId:Z,albumName:K,songs:V})}),D.sort((re,Z)=>{const V=re.songs[0],K=Z.songs[0],Q=(V==null?void 0:V.ProductionYear)||(V!=null&&V.PremiereDate?new Date(V.PremiereDate).getFullYear():0),le=(K==null?void 0:K.ProductionYear)||(K!=null&&K.PremiereDate?new Date(K.PremiereDate).getFullYear():0);return Q!==le?le-Q:re.albumName.localeCompare(Z.albumName)}),P.push({artist:O,albums:D})}),P.sort((C,O)=>C.artist.localeCompare(O.artist)),P},[m]),d.useEffect(()=>{z(Au)},[B.length]),d.useEffect(()=>{const A=()=>{const P=window.scrollY||document.documentElement.scrollTop,C=window.innerHeight||document.documentElement.clientHeight,O=document.documentElement.scrollHeight;P+C*1.5>=O&&z(D=>Math.min(D+Tv,B.length))};return window.addEventListener("scroll",A,{passive:!0}),()=>window.removeEventListener("scroll",A)},[B.length]),d.useEffect(()=>{ne(Eu)},[m.length]),d.useEffect(()=>{const A=()=>{const P=window.scrollY||document.documentElement.scrollTop,C=window.innerHeight||document.documentElement.clientHeight,O=document.documentElement.scrollHeight;P+C*1.5>=O&&ne(D=>Math.min(D+Rv,m.length))};return window.addEventListener("scroll",A,{passive:!0}),()=>window.removeEventListener("scroll",A)},[m.length]),w?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Bn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:(f==null?void 0:f.Name)||""}),l.jsx("div",{className:"flex items-center",children:l.jsx(Yt,{})})]})})}),l.jsx("div",{className:"pt-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400"})})]}):!f||m.length===0?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Bn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:"Genre"})]})})}),l.jsx("div",{className:"pt-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Genre not found or no songs available"})})})]}):l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"env(safe-area-inset-top)"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Bn,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:f.Name}),l.jsx("button",{onClick:ae,disabled:J,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50","aria-label":"Shuffle genre songs",children:J?l.jsx("div",{className:"w-4 h-4 border-2 border-zinc-400 border-t-white rounded-full animate-spin"}):l.jsx(en,{className:"w-5 h-5"})})]})})}),l.jsxs("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 5rem)"},children:[B.length>0&&l.jsxs("div",{className:"mb-10 px-4 pt-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Albums (",B.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:B.slice(0,L).map(A=>{const P=A.ProductionYear||(A.PremiereDate?new Date(A.PremiereDate).getFullYear():null);return l.jsx(Lv,{album:A,year:P,onNavigate:C=>t(`/album/${C}`),onContextMenu:(C,O,D)=>{k(C),R("album"),x(O||"mobile"),b(D||null),y(!0)}},A.Id)})})]}),m.length>0&&l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-white mb-2 px-4",children:["Songs (",m.length,")"]}),l.jsx("div",{className:"space-y-0",children:m.slice(0,X).map(A=>l.jsx(om,{song:A},A.Id))})]})]}),l.jsx(He,{item:j,itemType:I,isOpen:S,onClose:()=>{y(!1),k(null),R(null)},mode:h,position:N||void 0})]})}function Ov(){const{pathname:e}=an();return d.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[e]),null}function _v(){const{isAuthenticated:e,logout:t}=_i(),{pageVisibility:n}=Dt();return d.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?l.jsxs(Og,{children:[l.jsx(Ov,{}),l.jsx(D0,{children:l.jsxs(Ag,{children:[l.jsx(xt,{path:"/",element:l.jsx(Y0,{})}),l.jsx(xt,{path:"/settings",element:l.jsx(Iv,{})}),n.artists&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/artists",element:l.jsx(Z0,{})}),l.jsx(xt,{path:"/artist/:id",element:l.jsx(Ev,{})})]}),n.albums&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/albums",element:l.jsx(ov,{})}),l.jsx(xt,{path:"/album/:id",element:l.jsx(Mv,{})})]}),n.songs&&l.jsx(xt,{path:"/songs",element:l.jsx(fv,{})}),n.genres&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/genres",element:l.jsx(hv,{})}),l.jsx(xt,{path:"/genre/:id",element:l.jsx(zv,{})})]}),n.playlists&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/playlists",element:l.jsx(yv,{})}),l.jsx(xt,{path:"/playlist/:id",element:l.jsx(Nv,{})})]}),l.jsx(xt,{path:"*",element:l.jsx(kg,{to:"/",replace:!0})})]})})]}):l.jsx(Nx,{})}class Dv extends d.Component{constructor(){super(...arguments);Ln(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),l.jsx("p",{className:"text-gray-400 mb-4",children:(n=this.state.error)==null?void 0:n.message}),l.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"})]})}):this.props.children}}Fo.createRoot(document.getElementById("root")).render(l.jsx(Ua.StrictMode,{children:l.jsx(Dv,{children:l.jsx(_v,{})})}));
