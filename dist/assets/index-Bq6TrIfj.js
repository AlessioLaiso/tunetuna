var im=Object.defineProperty;var am=(e,t,n)=>t in e?im(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Rn=(e,t,n)=>am(e,typeof t!="symbol"?t+"":t,n);function cm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Pu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tu={exports:{}},$l={},Mu={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),um=Symbol.for("react.portal"),dm=Symbol.for("react.fragment"),fm=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),hm=Symbol.for("react.provider"),pm=Symbol.for("react.context"),gm=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),ym=Symbol.for("react.memo"),vm=Symbol.for("react.lazy"),Wa=Symbol.iterator;function wm(e){return e===null||typeof e!="object"?null:(e=Wa&&e[Wa]||e["@@iterator"],typeof e=="function"?e:null)}var Ru={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lu=Object.assign,zu={};function Ar(e,t,n){this.props=e,this.context=t,this.refs=zu,this.updater=n||Ru}Ar.prototype.isReactComponent={};Ar.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ar.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _u(){}_u.prototype=Ar.prototype;function Oi(e,t,n){this.props=e,this.context=t,this.refs=zu,this.updater=n||Ru}var Fi=Oi.prototype=new _u;Fi.constructor=Oi;Lu(Fi,Ar.prototype);Fi.isPureReactComponent=!0;var qa=Array.isArray,Du=Object.prototype.hasOwnProperty,Ui={current:null},$u={key:!0,ref:!0,__self:!0,__source:!0};function Ou(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Du.call(t,r)&&!$u.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var a=Array(c),u=0;u<c;u++)a[u]=arguments[u+2];s.children=a}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Is,type:e,key:o,ref:i,props:s,_owner:Ui.current}}function Nm(e,t){return{$$typeof:Is,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bi(e){return typeof e=="object"&&e!==null&&e.$$typeof===Is}function Sm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xa=/\/+/g;function oo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sm(""+e.key):t.toString(36)}function Zs(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Is:case um:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+oo(i,0):r,qa(s)?(n="",e!=null&&(n=e.replace(Xa,"$&/")+"/"),Zs(s,t,n,"",function(u){return u})):s!=null&&(Bi(s)&&(s=Nm(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Xa,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",qa(e))for(var c=0;c<e.length;c++){o=e[c];var a=r+oo(o,c);i+=Zs(o,t,n,a,s)}else if(a=wm(e),typeof a=="function")for(e=a.call(e),c=0;!(o=e.next()).done;)o=o.value,a=r+oo(o,c++),i+=Zs(o,t,n,a,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Rs(e,t,n){if(e==null)return e;var r=[],s=0;return Zs(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Im(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},el={transition:null},jm={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:el,ReactCurrentOwner:Ui};function Fu(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Rs,forEach:function(e,t,n){Rs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rs(e,function(){t++}),t},toArray:function(e){return Rs(e,function(t){return t})||[]},only:function(e){if(!Bi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Ar;Ne.Fragment=dm;Ne.Profiler=mm;Ne.PureComponent=Oi;Ne.StrictMode=fm;Ne.Suspense=xm;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jm;Ne.act=Fu;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Lu({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Ui.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(a in t)Du.call(t,a)&&!$u.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&c!==void 0?c[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){c=Array(a);for(var u=0;u<a;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:Is,type:e.type,key:s,ref:o,props:r,_owner:i}};Ne.createContext=function(e){return e={$$typeof:pm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hm,_context:e},e.Consumer=e};Ne.createElement=Ou;Ne.createFactory=function(e){var t=Ou.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:gm,render:e}};Ne.isValidElement=Bi;Ne.lazy=function(e){return{$$typeof:vm,_payload:{_status:-1,_result:e},_init:Im}};Ne.memo=function(e,t){return{$$typeof:ym,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=el.transition;el.transition={};try{e()}finally{el.transition=t}};Ne.unstable_act=Fu;Ne.useCallback=function(e,t){return ct.current.useCallback(e,t)};Ne.useContext=function(e){return ct.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return ct.current.useEffect(e,t)};Ne.useId=function(){return ct.current.useId()};Ne.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return ct.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};Ne.useRef=function(e){return ct.current.useRef(e)};Ne.useState=function(e){return ct.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return ct.current.useTransition()};Ne.version="18.3.1";Mu.exports=Ne;var m=Mu.exports;const Hi=Pu(m),bm=cm({__proto__:null,default:Hi},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=m,Cm=Symbol.for("react.element"),Am=Symbol.for("react.fragment"),Em=Object.prototype.hasOwnProperty,Pm=km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tm={key:!0,ref:!0,__self:!0,__source:!0};function Uu(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Em.call(t,r)&&!Tm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Cm,type:e,key:o,ref:i,props:s,_owner:Pm.current}}$l.Fragment=Am;$l.jsx=Uu;$l.jsxs=Uu;Tu.exports=$l;var l=Tu.exports,Bo={},Bu={exports:{}},St={},Hu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,P){var L=j.length;j.push(P);e:for(;0<L;){var V=L-1>>>1,T=j[V];if(0<s(T,P))j[V]=P,j[L]=T,L=V;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var P=j[0],L=j.pop();if(L!==P){j[0]=L;e:for(var V=0,T=j.length,le=T>>>1;V<le;){var W=2*(V+1)-1,he=j[W],pe=W+1,M=j[pe];if(0>s(he,L))pe<T&&0>s(M,he)?(j[V]=M,j[pe]=L,V=pe):(j[V]=he,j[W]=L,V=W);else if(pe<T&&0>s(M,L))j[V]=M,j[pe]=L,V=pe;else break e}}return P}function s(j,P){var L=j.sortIndex-P.sortIndex;return L!==0?L:j.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var a=[],u=[],h=1,p=null,f=3,d=!1,w=!1,g=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=j)r(u),P.sortIndex=P.expirationTime,t(a,P);else break;P=n(u)}}function S(j){if(g=!1,y(j),!w)if(n(a)!==null)w=!0,fe(C);else{var P=n(u);P!==null&&D(S,P.startTime-j)}}function C(j,P){w=!1,g&&(g=!1,v(k),k=-1),d=!0;var L=f;try{for(y(P),p=n(a);p!==null&&(!(p.expirationTime>P)||j&&!F());){var V=p.callback;if(typeof V=="function"){p.callback=null,f=p.priorityLevel;var T=V(p.expirationTime<=P);P=e.unstable_now(),typeof T=="function"?p.callback=T:p===n(a)&&r(a),y(P)}else r(a);p=n(a)}if(p!==null)var le=!0;else{var W=n(u);W!==null&&D(S,W.startTime-P),le=!1}return le}finally{p=null,f=L,d=!1}}var I=!1,A=null,k=-1,Y=5,_=-1;function F(){return!(e.unstable_now()-_<Y)}function ne(){if(A!==null){var j=e.unstable_now();_=j;var P=!0;try{P=A(!0,j)}finally{P?ie():(I=!1,A=null)}}else I=!1}var ie;if(typeof x=="function")ie=function(){x(ne)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,se=me.port2;me.port1.onmessage=ne,ie=function(){se.postMessage(null)}}else ie=function(){N(ne,0)};function fe(j){A=j,I||(I=!0,ie())}function D(j,P){k=N(function(){j(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){w||d||(w=!0,fe(C))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(j){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var L=f;f=P;try{return j()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,P){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var L=f;f=j;try{return P()}finally{f=L}},e.unstable_scheduleCallback=function(j,P,L){var V=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?V+L:V):L=V,j){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=L+T,j={id:h++,callback:P,priorityLevel:j,startTime:L,expirationTime:T,sortIndex:-1},L>V?(j.sortIndex=L,t(u,j),n(a)===null&&j===n(u)&&(g?(v(k),k=-1):g=!0,D(S,L-V))):(j.sortIndex=T,t(a,j),w||d||(w=!0,fe(C))),j},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(j){var P=f;return function(){var L=f;f=P;try{return j.apply(this,arguments)}finally{f=L}}}})(Gu);Hu.exports=Gu;var Mm=Hu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=m,Nt=Mm;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qu=new Set,ns={};function Xn(e,t){wr(e,t),wr(e+"Capture",t)}function wr(e,t){for(ns[e]=t,e=0;e<t.length;e++)Qu.add(t[e])}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ho=Object.prototype.hasOwnProperty,Lm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ka={},Ja={};function zm(e){return Ho.call(Ja,e)?!0:Ho.call(Ka,e)?!1:Lm.test(e)?Ja[e]=!0:(Ka[e]=!0,!1)}function _m(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Dm(e,t,n,r){if(t===null||typeof t>"u"||_m(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gi=/[\-:]([a-z])/g;function Qi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gi,Qi);Ke[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gi,Qi);Ke[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gi,Qi);Ke[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vi(e,t,n,r){var s=Ke.hasOwnProperty(t)?Ke[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Dm(t,n,s,r)&&(n=null),r||s===null?zm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rn=Rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ls=Symbol.for("react.element"),tr=Symbol.for("react.portal"),nr=Symbol.for("react.fragment"),Yi=Symbol.for("react.strict_mode"),Go=Symbol.for("react.profiler"),Vu=Symbol.for("react.provider"),Yu=Symbol.for("react.context"),Wi=Symbol.for("react.forward_ref"),Qo=Symbol.for("react.suspense"),Vo=Symbol.for("react.suspense_list"),qi=Symbol.for("react.memo"),cn=Symbol.for("react.lazy"),Wu=Symbol.for("react.offscreen"),Za=Symbol.iterator;function Rr(e){return e===null||typeof e!="object"?null:(e=Za&&e[Za]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,io;function Br(e){if(io===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);io=t&&t[1]||""}return`
`+io+e}var ao=!1;function co(e,t){if(!e||ao)return"";ao=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,c=o.length-1;1<=i&&0<=c&&s[i]!==o[c];)c--;for(;1<=i&&0<=c;i--,c--)if(s[i]!==o[c]){if(i!==1||c!==1)do if(i--,c--,0>c||s[i]!==o[c]){var a=`
`+s[i].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=i&&0<=c);break}}}finally{ao=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Br(e):""}function $m(e){switch(e.tag){case 5:return Br(e.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 2:case 15:return e=co(e.type,!1),e;case 11:return e=co(e.type.render,!1),e;case 1:return e=co(e.type,!0),e;default:return""}}function Yo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nr:return"Fragment";case tr:return"Portal";case Go:return"Profiler";case Yi:return"StrictMode";case Qo:return"Suspense";case Vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yu:return(e.displayName||"Context")+".Consumer";case Vu:return(e._context.displayName||"Context")+".Provider";case Wi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qi:return t=e.displayName||null,t!==null?t:Yo(e.type)||"Memo";case cn:t=e._payload,e=e._init;try{return Yo(e(t))}catch{}}return null}function Om(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yo(t);case 8:return t===Yi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fm(e){var t=qu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zs(e){e._valueTracker||(e._valueTracker=Fm(e))}function Xu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wo(e,t){var n=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ec(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ku(e,t){t=t.checked,t!=null&&Vi(e,"checked",t,!1)}function qo(e,t){Ku(e,t);var n=kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xo(e,t.type,kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xo(e,t,n){(t!=="number"||fl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Hr=Array.isArray;function mr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ko(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Z(92));if(Hr(n)){if(1<n.length)throw Error(Z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kn(n)}}function Ju(e,t){var n=kn(t.value),r=kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function rc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _s,ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_s=_s||document.createElement("div"),_s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_s.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Um=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){Um.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function td(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function nd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=td(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Bm=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zo(e,t){if(t){if(Bm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function ei(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ti=null;function Xi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ni=null,hr=null,pr=null;function sc(e){if(e=ks(e)){if(typeof ni!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=Hl(t),ni(e.stateNode,e.type,t))}}function rd(e){hr?pr?pr.push(e):pr=[e]:hr=e}function sd(){if(hr){var e=hr,t=pr;if(pr=hr=null,sc(e),t)for(e=0;e<t.length;e++)sc(t[e])}}function ld(e,t){return e(t)}function od(){}var uo=!1;function id(e,t,n){if(uo)return e(t,n);uo=!0;try{return ld(e,t,n)}finally{uo=!1,(hr!==null||pr!==null)&&(od(),sd())}}function ss(e,t){var n=e.stateNode;if(n===null)return null;var r=Hl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var ri=!1;if(Jt)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){ri=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{ri=!1}function Hm(e,t,n,r,s,o,i,c,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Yr=!1,ml=null,hl=!1,si=null,Gm={onError:function(e){Yr=!0,ml=e}};function Qm(e,t,n,r,s,o,i,c,a){Yr=!1,ml=null,Hm.apply(Gm,arguments)}function Vm(e,t,n,r,s,o,i,c,a){if(Qm.apply(this,arguments),Yr){if(Yr){var u=ml;Yr=!1,ml=null}else throw Error(Z(198));hl||(hl=!0,si=u)}}function Kn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lc(e){if(Kn(e)!==e)throw Error(Z(188))}function Ym(e){var t=e.alternate;if(!t){if(t=Kn(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return lc(s),e;if(o===r)return lc(s),t;o=o.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,c=s.child;c;){if(c===n){i=!0,n=s,r=o;break}if(c===r){i=!0,r=s,n=o;break}c=c.sibling}if(!i){for(c=o.child;c;){if(c===n){i=!0,n=o,r=s;break}if(c===r){i=!0,r=o,n=s;break}c=c.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function cd(e){return e=Ym(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var dd=Nt.unstable_scheduleCallback,oc=Nt.unstable_cancelCallback,Wm=Nt.unstable_shouldYield,qm=Nt.unstable_requestPaint,Oe=Nt.unstable_now,Xm=Nt.unstable_getCurrentPriorityLevel,Ki=Nt.unstable_ImmediatePriority,fd=Nt.unstable_UserBlockingPriority,pl=Nt.unstable_NormalPriority,Km=Nt.unstable_LowPriority,md=Nt.unstable_IdlePriority,Ol=null,Bt=null;function Jm(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Ol,e,void 0,(e.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:th,Zm=Math.log,eh=Math.LN2;function th(e){return e>>>=0,e===0?32:31-(Zm(e)/eh|0)|0}var Ds=64,$s=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var c=i&~s;c!==0?r=Gr(c):(o&=i,o!==0&&(r=Gr(o)))}else i=n&~s,i!==0?r=Gr(i):o!==0&&(r=Gr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lt(t),s=1<<n,r|=e[n],t&=~s;return r}function nh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Lt(o),c=1<<i,a=s[i];a===-1?(!(c&n)||c&r)&&(s[i]=nh(c,t)):a<=t&&(e.expiredLanes|=c),o&=~c}}function li(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hd(){var e=Ds;return Ds<<=1,!(Ds&4194240)&&(Ds=64),e}function fo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function js(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lt(t),e[t]=n}function sh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Lt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Ji(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var be=0;function pd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gd,Zi,xd,yd,vd,oi=!1,Os=[],gn=null,xn=null,yn=null,ls=new Map,os=new Map,dn=[],lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ic(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":ls.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":os.delete(t.pointerId)}}function zr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=ks(t),t!==null&&Zi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function oh(e,t,n,r,s){switch(t){case"focusin":return gn=zr(gn,e,t,n,r,s),!0;case"dragenter":return xn=zr(xn,e,t,n,r,s),!0;case"mouseover":return yn=zr(yn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return ls.set(o,zr(ls.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,os.set(o,zr(os.get(o)||null,e,t,n,r,s)),!0}return!1}function wd(e){var t=_n(e.target);if(t!==null){var n=Kn(t);if(n!==null){if(t=n.tag,t===13){if(t=ad(n),t!==null){e.blockedOn=t,vd(e.priority,function(){xd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ii(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ti=r,n.target.dispatchEvent(r),ti=null}else return t=ks(n),t!==null&&Zi(t),e.blockedOn=n,!1;t.shift()}return!0}function ac(e,t,n){tl(e)&&n.delete(t)}function ih(){oi=!1,gn!==null&&tl(gn)&&(gn=null),xn!==null&&tl(xn)&&(xn=null),yn!==null&&tl(yn)&&(yn=null),ls.forEach(ac),os.forEach(ac)}function _r(e,t){e.blockedOn===t&&(e.blockedOn=null,oi||(oi=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,ih)))}function is(e){function t(s){return _r(s,e)}if(0<Os.length){_r(Os[0],e);for(var n=1;n<Os.length;n++){var r=Os[n];r.blockedOn===e&&(r.blockedOn=null)}}for(gn!==null&&_r(gn,e),xn!==null&&_r(xn,e),yn!==null&&_r(yn,e),ls.forEach(t),os.forEach(t),n=0;n<dn.length;n++)r=dn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<dn.length&&(n=dn[0],n.blockedOn===null);)wd(n),n.blockedOn===null&&dn.shift()}var gr=rn.ReactCurrentBatchConfig,xl=!0;function ah(e,t,n,r){var s=be,o=gr.transition;gr.transition=null;try{be=1,ea(e,t,n,r)}finally{be=s,gr.transition=o}}function ch(e,t,n,r){var s=be,o=gr.transition;gr.transition=null;try{be=4,ea(e,t,n,r)}finally{be=s,gr.transition=o}}function ea(e,t,n,r){if(xl){var s=ii(e,t,n,r);if(s===null)So(e,t,r,yl,n),ic(e,r);else if(oh(s,e,t,n,r))r.stopPropagation();else if(ic(e,r),t&4&&-1<lh.indexOf(e)){for(;s!==null;){var o=ks(s);if(o!==null&&gd(o),o=ii(e,t,n,r),o===null&&So(e,t,r,yl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else So(e,t,r,null,n)}}var yl=null;function ii(e,t,n,r){if(yl=null,e=Xi(r),e=_n(e),e!==null)if(t=Kn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yl=e,null}function Nd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xm()){case Ki:return 1;case fd:return 4;case pl:case Km:return 16;case md:return 536870912;default:return 16}default:return 16}}var mn=null,ta=null,nl=null;function Sd(){if(nl)return nl;var e,t=ta,n=t.length,r,s="value"in mn?mn.value:mn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return nl=s.slice(e,1<r?1-r:void 0)}function rl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fs(){return!0}function cc(){return!1}function It(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fs:cc,this.isPropagationStopped=cc,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),t}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},na=It(Er),bs=De({},Er,{view:0,detail:0}),uh=It(bs),mo,ho,Dr,Fl=De({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dr&&(Dr&&e.type==="mousemove"?(mo=e.screenX-Dr.screenX,ho=e.screenY-Dr.screenY):ho=mo=0,Dr=e),mo)},movementY:function(e){return"movementY"in e?e.movementY:ho}}),uc=It(Fl),dh=De({},Fl,{dataTransfer:0}),fh=It(dh),mh=De({},bs,{relatedTarget:0}),po=It(mh),hh=De({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),ph=It(hh),gh=De({},Er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xh=It(gh),yh=De({},Er,{data:0}),dc=It(yh),vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nh[e])?!!t[e]:!1}function ra(){return Sh}var Ih=De({},bs,{key:function(e){if(e.key){var t=vh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(e){return e.type==="keypress"?rl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jh=It(Ih),bh=De({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=It(bh),kh=De({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra}),Ch=It(kh),Ah=De({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eh=It(Ah),Ph=De({},Fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Th=It(Ph),Mh=[9,13,27,32],sa=Jt&&"CompositionEvent"in window,Wr=null;Jt&&"documentMode"in document&&(Wr=document.documentMode);var Rh=Jt&&"TextEvent"in window&&!Wr,Id=Jt&&(!sa||Wr&&8<Wr&&11>=Wr),mc=" ",hc=!1;function jd(e,t){switch(e){case"keyup":return Mh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rr=!1;function Lh(e,t){switch(e){case"compositionend":return bd(t);case"keypress":return t.which!==32?null:(hc=!0,mc);case"textInput":return e=t.data,e===mc&&hc?null:e;default:return null}}function zh(e,t){if(rr)return e==="compositionend"||!sa&&jd(e,t)?(e=Sd(),nl=ta=mn=null,rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Id&&t.locale!=="ko"?null:t.data;default:return null}}var _h={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_h[e.type]:t==="textarea"}function kd(e,t,n,r){rd(r),t=vl(t,"onChange"),0<t.length&&(n=new na("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,as=null;function Dh(e){Dd(e,0)}function Ul(e){var t=or(e);if(Xu(t))return e}function $h(e,t){if(e==="change")return t}var Cd=!1;if(Jt){var go;if(Jt){var xo="oninput"in document;if(!xo){var gc=document.createElement("div");gc.setAttribute("oninput","return;"),xo=typeof gc.oninput=="function"}go=xo}else go=!1;Cd=go&&(!document.documentMode||9<document.documentMode)}function xc(){qr&&(qr.detachEvent("onpropertychange",Ad),as=qr=null)}function Ad(e){if(e.propertyName==="value"&&Ul(as)){var t=[];kd(t,as,e,Xi(e)),id(Dh,t)}}function Oh(e,t,n){e==="focusin"?(xc(),qr=t,as=n,qr.attachEvent("onpropertychange",Ad)):e==="focusout"&&xc()}function Fh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ul(as)}function Uh(e,t){if(e==="click")return Ul(t)}function Bh(e,t){if(e==="input"||e==="change")return Ul(t)}function Hh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Hh;function cs(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ho.call(t,s)||!_t(e[s],t[s]))return!1}return!0}function yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vc(e,t){var n=yc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yc(n)}}function Ed(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ed(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pd(){for(var e=window,t=fl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fl(e.document)}return t}function la(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gh(e){var t=Pd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ed(n.ownerDocument.documentElement,n)){if(r!==null&&la(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=vc(n,o);var i=vc(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qh=Jt&&"documentMode"in document&&11>=document.documentMode,sr=null,ai=null,Xr=null,ci=!1;function wc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ci||sr==null||sr!==fl(r)||(r=sr,"selectionStart"in r&&la(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xr&&cs(Xr,r)||(Xr=r,r=vl(ai,"onSelect"),0<r.length&&(t=new na("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function Us(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionend:Us("Transition","TransitionEnd")},yo={},Td={};Jt&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function Bl(e){if(yo[e])return yo[e];if(!lr[e])return e;var t=lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Td)return yo[e]=t[n];return e}var Md=Bl("animationend"),Rd=Bl("animationiteration"),Ld=Bl("animationstart"),zd=Bl("transitionend"),_d=new Map,Nc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){_d.set(e,t),Xn(t,[e])}for(var vo=0;vo<Nc.length;vo++){var wo=Nc[vo],Vh=wo.toLowerCase(),Yh=wo[0].toUpperCase()+wo.slice(1);An(Vh,"on"+Yh)}An(Md,"onAnimationEnd");An(Rd,"onAnimationIteration");An(Ld,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(zd,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qr));function Sc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Vm(r,t,void 0,e),e.currentTarget=null}function Dd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var c=r[i],a=c.instance,u=c.currentTarget;if(c=c.listener,a!==o&&s.isPropagationStopped())break e;Sc(s,c,u),o=a}else for(i=0;i<r.length;i++){if(c=r[i],a=c.instance,u=c.currentTarget,c=c.listener,a!==o&&s.isPropagationStopped())break e;Sc(s,c,u),o=a}}}if(hl)throw e=si,hl=!1,si=null,e}function Me(e,t){var n=t[hi];n===void 0&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||($d(t,e,2,!1),n.add(r))}function No(e,t,n){var r=0;t&&(r|=4),$d(n,e,r,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function us(e){if(!e[Bs]){e[Bs]=!0,Qu.forEach(function(n){n!=="selectionchange"&&(Wh.has(n)||No(n,!1,e),No(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bs]||(t[Bs]=!0,No("selectionchange",!1,t))}}function $d(e,t,n,r){switch(Nd(t)){case 1:var s=ah;break;case 4:s=ch;break;default:s=ea}n=s.bind(null,t,n,e),s=void 0,!ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function So(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;i=i.return}for(;c!==null;){if(i=_n(c),i===null)return;if(a=i.tag,a===5||a===6){r=o=i;continue e}c=c.parentNode}}r=r.return}id(function(){var u=o,h=Xi(n),p=[];e:{var f=_d.get(e);if(f!==void 0){var d=na,w=e;switch(e){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":d=jh;break;case"focusin":w="focus",d=po;break;case"focusout":w="blur",d=po;break;case"beforeblur":case"afterblur":d=po;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Ch;break;case Md:case Rd:case Ld:d=ph;break;case zd:d=Eh;break;case"scroll":d=uh;break;case"wheel":d=Th;break;case"copy":case"cut":case"paste":d=xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=fc}var g=(t&4)!==0,N=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var x=u,y;x!==null;){y=x;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,v!==null&&(S=ss(x,v),S!=null&&g.push(ds(x,S,y)))),N)break;x=x.return}0<g.length&&(f=new d(f,w,null,n,h),p.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",f&&n!==ti&&(w=n.relatedTarget||n.fromElement)&&(_n(w)||w[Zt]))break e;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(w=n.relatedTarget||n.toElement,d=u,w=w?_n(w):null,w!==null&&(N=Kn(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(d=null,w=u),d!==w)){if(g=uc,S="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=fc,S="onPointerLeave",v="onPointerEnter",x="pointer"),N=d==null?f:or(d),y=w==null?f:or(w),f=new g(S,x+"leave",d,n,h),f.target=N,f.relatedTarget=y,S=null,_n(h)===u&&(g=new g(v,x+"enter",w,n,h),g.target=y,g.relatedTarget=N,S=g),N=S,d&&w)t:{for(g=d,v=w,x=0,y=g;y;y=Zn(y))x++;for(y=0,S=v;S;S=Zn(S))y++;for(;0<x-y;)g=Zn(g),x--;for(;0<y-x;)v=Zn(v),y--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=Zn(g),v=Zn(v)}g=null}else g=null;d!==null&&Ic(p,f,d,g,!1),w!==null&&N!==null&&Ic(p,N,w,g,!0)}}e:{if(f=u?or(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=$h;else if(pc(f))if(Cd)C=Bh;else{C=Fh;var I=Oh}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Uh);if(C&&(C=C(e,u))){kd(p,C,n,h);break e}I&&I(e,f,u),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Xo(f,"number",f.value)}switch(I=u?or(u):window,e){case"focusin":(pc(I)||I.contentEditable==="true")&&(sr=I,ai=u,Xr=null);break;case"focusout":Xr=ai=sr=null;break;case"mousedown":ci=!0;break;case"contextmenu":case"mouseup":case"dragend":ci=!1,wc(p,n,h);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":wc(p,n,h)}var A;if(sa)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else rr?jd(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Id&&n.locale!=="ko"&&(rr||k!=="onCompositionStart"?k==="onCompositionEnd"&&rr&&(A=Sd()):(mn=h,ta="value"in mn?mn.value:mn.textContent,rr=!0)),I=vl(u,k),0<I.length&&(k=new dc(k,e,null,n,h),p.push({event:k,listeners:I}),A?k.data=A:(A=bd(n),A!==null&&(k.data=A)))),(A=Rh?Lh(e,n):zh(e,n))&&(u=vl(u,"onBeforeInput"),0<u.length&&(h=new dc("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=A))}Dd(p,t)})}function ds(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ss(e,n),o!=null&&r.unshift(ds(e,o,s)),o=ss(e,t),o!=null&&r.push(ds(e,o,s))),e=e.return}return r}function Zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ic(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var c=n,a=c.alternate,u=c.stateNode;if(a!==null&&a===r)break;c.tag===5&&u!==null&&(c=u,s?(a=ss(n,o),a!=null&&i.unshift(ds(n,a,c))):s||(a=ss(n,o),a!=null&&i.push(ds(n,a,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var qh=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function jc(e){return(typeof e=="string"?e:""+e).replace(qh,`
`).replace(Xh,"")}function Hs(e,t,n){if(t=jc(t),jc(e)!==t&&n)throw Error(Z(425))}function wl(){}var ui=null,di=null;function fi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mi=typeof setTimeout=="function"?setTimeout:void 0,Kh=typeof clearTimeout=="function"?clearTimeout:void 0,bc=typeof Promise=="function"?Promise:void 0,Jh=typeof queueMicrotask=="function"?queueMicrotask:typeof bc<"u"?function(e){return bc.resolve(null).then(e).catch(Zh)}:mi;function Zh(e){setTimeout(function(){throw e})}function Io(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),is(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);is(t)}function vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Pr,fs="__reactProps$"+Pr,Zt="__reactContainer$"+Pr,hi="__reactEvents$"+Pr,ep="__reactListeners$"+Pr,tp="__reactHandles$"+Pr;function _n(e){var t=e[Ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zt]||n[Ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kc(e);e!==null;){if(n=e[Ft])return n;e=kc(e)}return t}e=n,n=e.parentNode}return null}function ks(e){return e=e[Ft]||e[Zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Hl(e){return e[fs]||null}var pi=[],ir=-1;function En(e){return{current:e}}function Re(e){0>ir||(e.current=pi[ir],pi[ir]=null,ir--)}function Pe(e,t){ir++,pi[ir]=e.current,e.current=t}var Cn={},rt=En(Cn),mt=En(!1),Bn=Cn;function Nr(e,t){var n=e.type.contextTypes;if(!n)return Cn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ht(e){return e=e.childContextTypes,e!=null}function Nl(){Re(mt),Re(rt)}function Cc(e,t,n){if(rt.current!==Cn)throw Error(Z(168));Pe(rt,t),Pe(mt,n)}function Od(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Z(108,Om(e)||"Unknown",s));return De({},n,r)}function Sl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Bn=rt.current,Pe(rt,e),Pe(mt,mt.current),!0}function Ac(e,t,n){var r=e.stateNode;if(!r)throw Error(Z(169));n?(e=Od(e,t,Bn),r.__reactInternalMemoizedMergedChildContext=e,Re(mt),Re(rt),Pe(rt,e)):Re(mt),Pe(mt,n)}var Yt=null,Gl=!1,jo=!1;function Fd(e){Yt===null?Yt=[e]:Yt.push(e)}function np(e){Gl=!0,Fd(e)}function Pn(){if(!jo&&Yt!==null){jo=!0;var e=0,t=be;try{var n=Yt;for(be=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yt=null,Gl=!1}catch(s){throw Yt!==null&&(Yt=Yt.slice(e+1)),dd(Ki,Pn),s}finally{be=t,jo=!1}}return null}var ar=[],cr=0,Il=null,jl=0,jt=[],bt=0,Hn=null,Wt=1,qt="";function Ln(e,t){ar[cr++]=jl,ar[cr++]=Il,Il=e,jl=t}function Ud(e,t,n){jt[bt++]=Wt,jt[bt++]=qt,jt[bt++]=Hn,Hn=e;var r=Wt;e=qt;var s=32-Lt(r)-1;r&=~(1<<s),n+=1;var o=32-Lt(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Wt=1<<32-Lt(t)+s|n<<s|r,qt=o+e}else Wt=1<<o|n<<s|r,qt=e}function oa(e){e.return!==null&&(Ln(e,1),Ud(e,1,0))}function ia(e){for(;e===Il;)Il=ar[--cr],ar[cr]=null,jl=ar[--cr],ar[cr]=null;for(;e===Hn;)Hn=jt[--bt],jt[bt]=null,qt=jt[--bt],jt[bt]=null,Wt=jt[--bt],jt[bt]=null}var wt=null,vt=null,Le=!1,Rt=null;function Bd(e,t){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ec(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,vt=vn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Hn!==null?{id:Wt,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wt=e,vt=null,!0):!1;default:return!1}}function gi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xi(e){if(Le){var t=vt;if(t){var n=t;if(!Ec(e,t)){if(gi(e))throw Error(Z(418));t=vn(n.nextSibling);var r=wt;t&&Ec(e,t)?Bd(r,n):(e.flags=e.flags&-4097|2,Le=!1,wt=e)}}else{if(gi(e))throw Error(Z(418));e.flags=e.flags&-4097|2,Le=!1,wt=e}}}function Pc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function Gs(e){if(e!==wt)return!1;if(!Le)return Pc(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fi(e.type,e.memoizedProps)),t&&(t=vt)){if(gi(e))throw Hd(),Error(Z(418));for(;t;)Bd(e,t),t=vn(t.nextSibling)}if(Pc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vt=vn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vt=null}}else vt=wt?vn(e.stateNode.nextSibling):null;return!0}function Hd(){for(var e=vt;e;)e=vn(e.nextSibling)}function Sr(){vt=wt=null,Le=!1}function aa(e){Rt===null?Rt=[e]:Rt.push(e)}var rp=rn.ReactCurrentBatchConfig;function $r(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var c=s.refs;i===null?delete c[o]:c[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tc(e){var t=e._init;return t(e._payload)}function Gd(e){function t(v,x){if(e){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=In(v,x),v.index=0,v.sibling=null,v}function o(v,x,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function c(v,x,y,S){return x===null||x.tag!==6?(x=To(y,v.mode,S),x.return=v,x):(x=s(x,y),x.return=v,x)}function a(v,x,y,S){var C=y.type;return C===nr?h(v,x,y.props.children,S,y.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===cn&&Tc(C)===x.type)?(S=s(x,y.props),S.ref=$r(v,x,y),S.return=v,S):(S=ul(y.type,y.key,y.props,null,v.mode,S),S.ref=$r(v,x,y),S.return=v,S)}function u(v,x,y,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Mo(y,v.mode,S),x.return=v,x):(x=s(x,y.children||[]),x.return=v,x)}function h(v,x,y,S,C){return x===null||x.tag!==7?(x=Fn(y,v.mode,S,C),x.return=v,x):(x=s(x,y),x.return=v,x)}function p(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=To(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ls:return y=ul(x.type,x.key,x.props,null,v.mode,y),y.ref=$r(v,null,x),y.return=v,y;case tr:return x=Mo(x,v.mode,y),x.return=v,x;case cn:var S=x._init;return p(v,S(x._payload),y)}if(Hr(x)||Rr(x))return x=Fn(x,v.mode,y,null),x.return=v,x;Qs(v,x)}return null}function f(v,x,y,S){var C=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:c(v,x,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ls:return y.key===C?a(v,x,y,S):null;case tr:return y.key===C?u(v,x,y,S):null;case cn:return C=y._init,f(v,x,C(y._payload),S)}if(Hr(y)||Rr(y))return C!==null?null:h(v,x,y,S,null);Qs(v,y)}return null}function d(v,x,y,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(y)||null,c(x,v,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ls:return v=v.get(S.key===null?y:S.key)||null,a(x,v,S,C);case tr:return v=v.get(S.key===null?y:S.key)||null,u(x,v,S,C);case cn:var I=S._init;return d(v,x,y,I(S._payload),C)}if(Hr(S)||Rr(S))return v=v.get(y)||null,h(x,v,S,C,null);Qs(x,S)}return null}function w(v,x,y,S){for(var C=null,I=null,A=x,k=x=0,Y=null;A!==null&&k<y.length;k++){A.index>k?(Y=A,A=null):Y=A.sibling;var _=f(v,A,y[k],S);if(_===null){A===null&&(A=Y);break}e&&A&&_.alternate===null&&t(v,A),x=o(_,x,k),I===null?C=_:I.sibling=_,I=_,A=Y}if(k===y.length)return n(v,A),Le&&Ln(v,k),C;if(A===null){for(;k<y.length;k++)A=p(v,y[k],S),A!==null&&(x=o(A,x,k),I===null?C=A:I.sibling=A,I=A);return Le&&Ln(v,k),C}for(A=r(v,A);k<y.length;k++)Y=d(A,v,k,y[k],S),Y!==null&&(e&&Y.alternate!==null&&A.delete(Y.key===null?k:Y.key),x=o(Y,x,k),I===null?C=Y:I.sibling=Y,I=Y);return e&&A.forEach(function(F){return t(v,F)}),Le&&Ln(v,k),C}function g(v,x,y,S){var C=Rr(y);if(typeof C!="function")throw Error(Z(150));if(y=C.call(y),y==null)throw Error(Z(151));for(var I=C=null,A=x,k=x=0,Y=null,_=y.next();A!==null&&!_.done;k++,_=y.next()){A.index>k?(Y=A,A=null):Y=A.sibling;var F=f(v,A,_.value,S);if(F===null){A===null&&(A=Y);break}e&&A&&F.alternate===null&&t(v,A),x=o(F,x,k),I===null?C=F:I.sibling=F,I=F,A=Y}if(_.done)return n(v,A),Le&&Ln(v,k),C;if(A===null){for(;!_.done;k++,_=y.next())_=p(v,_.value,S),_!==null&&(x=o(_,x,k),I===null?C=_:I.sibling=_,I=_);return Le&&Ln(v,k),C}for(A=r(v,A);!_.done;k++,_=y.next())_=d(A,v,k,_.value,S),_!==null&&(e&&_.alternate!==null&&A.delete(_.key===null?k:_.key),x=o(_,x,k),I===null?C=_:I.sibling=_,I=_);return e&&A.forEach(function(ne){return t(v,ne)}),Le&&Ln(v,k),C}function N(v,x,y,S){if(typeof y=="object"&&y!==null&&y.type===nr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ls:e:{for(var C=y.key,I=x;I!==null;){if(I.key===C){if(C=y.type,C===nr){if(I.tag===7){n(v,I.sibling),x=s(I,y.props.children),x.return=v,v=x;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===cn&&Tc(C)===I.type){n(v,I.sibling),x=s(I,y.props),x.ref=$r(v,I,y),x.return=v,v=x;break e}n(v,I);break}else t(v,I);I=I.sibling}y.type===nr?(x=Fn(y.props.children,v.mode,S,y.key),x.return=v,v=x):(S=ul(y.type,y.key,y.props,null,v.mode,S),S.ref=$r(v,x,y),S.return=v,v=S)}return i(v);case tr:e:{for(I=y.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(v,x.sibling),x=s(x,y.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=Mo(y,v.mode,S),x.return=v,v=x}return i(v);case cn:return I=y._init,N(v,x,I(y._payload),S)}if(Hr(y))return w(v,x,y,S);if(Rr(y))return g(v,x,y,S);Qs(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,y),x.return=v,v=x):(n(v,x),x=To(y,v.mode,S),x.return=v,v=x),i(v)):n(v,x)}return N}var Ir=Gd(!0),Qd=Gd(!1),bl=En(null),kl=null,ur=null,ca=null;function ua(){ca=ur=kl=null}function da(e){var t=bl.current;Re(bl),e._currentValue=t}function yi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xr(e,t){kl=e,ca=ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(ca!==e)if(e={context:e,memoizedValue:t,next:null},ur===null){if(kl===null)throw Error(Z(308));ur=e,kl.dependencies={lanes:0,firstContext:e}}else ur=ur.next=e;return t}var Dn=null;function fa(e){Dn===null?Dn=[e]:Dn.push(e)}function Vd(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,fa(t)):(n.next=s.next,s.next=n),t.interleaved=n,en(e,r)}function en(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var un=!1;function ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,en(e,n)}return s=r.interleaved,s===null?(t.next=t,fa(r)):(t.next=s.next,s.next=t),r.interleaved=t,en(e,n)}function sl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ji(e,n)}}function Mc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cl(e,t,n,r){var s=e.updateQueue;un=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var a=c,u=a.next;a.next=null,i===null?o=u:i.next=u,i=a;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==i&&(c===null?h.firstBaseUpdate=u:c.next=u,h.lastBaseUpdate=a))}if(o!==null){var p=s.baseState;i=0,h=u=a=null,c=o;do{var f=c.lane,d=c.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:d,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=e,g=c;switch(f=t,d=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){p=w.call(d,p,f);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,f=typeof w=="function"?w.call(d,p,f):w,f==null)break e;p=De({},p,f);break e;case 2:un=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[c]:f.push(c))}else d={eventTime:d,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(u=h=d,a=p):h=h.next=d,i|=f;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;f=c,c=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(a=p),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Qn|=i,e.lanes=i,e.memoizedState=p}}function Rc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var Cs={},Ht=En(Cs),ms=En(Cs),hs=En(Cs);function $n(e){if(e===Cs)throw Error(Z(174));return e}function ha(e,t){switch(Pe(hs,t),Pe(ms,e),Pe(Ht,Cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jo(t,e)}Re(Ht),Pe(Ht,t)}function jr(){Re(Ht),Re(ms),Re(hs)}function Wd(e){$n(hs.current);var t=$n(Ht.current),n=Jo(t,e.type);t!==n&&(Pe(ms,e),Pe(Ht,n))}function pa(e){ms.current===e&&(Re(Ht),Re(ms))}var ze=En(0);function Al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bo=[];function ga(){for(var e=0;e<bo.length;e++)bo[e]._workInProgressVersionPrimary=null;bo.length=0}var ll=rn.ReactCurrentDispatcher,ko=rn.ReactCurrentBatchConfig,Gn=0,_e=null,He=null,Ye=null,El=!1,Kr=!1,ps=0,sp=0;function Ze(){throw Error(Z(321))}function xa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_t(e[n],t[n]))return!1;return!0}function ya(e,t,n,r,s,o){if(Gn=o,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ll.current=e===null||e.memoizedState===null?ap:cp,e=n(r,s),Kr){o=0;do{if(Kr=!1,ps=0,25<=o)throw Error(Z(301));o+=1,Ye=He=null,t.updateQueue=null,ll.current=up,e=n(r,s)}while(Kr)}if(ll.current=Pl,t=He!==null&&He.next!==null,Gn=0,Ye=He=_e=null,El=!1,t)throw Error(Z(300));return e}function va(){var e=ps!==0;return ps=0,e}function Ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?_e.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Et(){if(He===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ye===null?_e.memoizedState:Ye.next;if(t!==null)Ye=t,He=e;else{if(e===null)throw Error(Z(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?_e.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function gs(e,t){return typeof t=="function"?t(e):t}function Co(e){var t=Et(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=He,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var c=i=null,a=null,u=o;do{var h=u.lane;if((Gn&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(c=a=p,i=r):a=a.next=p,_e.lanes|=h,Qn|=h}u=u.next}while(u!==null&&u!==o);a===null?i=r:a.next=c,_t(r,t.memoizedState)||(ft=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,_e.lanes|=o,Qn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Et(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);_t(o,t.memoizedState)||(ft=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function qd(){}function Xd(e,t){var n=_e,r=Et(),s=t(),o=!_t(r.memoizedState,s);if(o&&(r.memoizedState=s,ft=!0),r=r.queue,wa(Zd.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,xs(9,Jd.bind(null,n,r,s,t),void 0,null),We===null)throw Error(Z(349));Gn&30||Kd(n,t,s)}return s}function Kd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jd(e,t,n,r){t.value=n,t.getSnapshot=r,ef(t)&&tf(e)}function Zd(e,t,n){return n(function(){ef(t)&&tf(e)})}function ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_t(e,n)}catch{return!0}}function tf(e){var t=en(e,1);t!==null&&zt(t,e,1,-1)}function Lc(e){var t=Ot();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:e},t.queue=e,e=e.dispatch=ip.bind(null,_e,e),[t.memoizedState,e]}function xs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nf(){return Et().memoizedState}function ol(e,t,n,r){var s=Ot();_e.flags|=e,s.memoizedState=xs(1|t,n,void 0,r===void 0?null:r)}function Ql(e,t,n,r){var s=Et();r=r===void 0?null:r;var o=void 0;if(He!==null){var i=He.memoizedState;if(o=i.destroy,r!==null&&xa(r,i.deps)){s.memoizedState=xs(t,n,o,r);return}}_e.flags|=e,s.memoizedState=xs(1|t,n,o,r)}function zc(e,t){return ol(8390656,8,e,t)}function wa(e,t){return Ql(2048,8,e,t)}function rf(e,t){return Ql(4,2,e,t)}function sf(e,t){return Ql(4,4,e,t)}function lf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function of(e,t,n){return n=n!=null?n.concat([e]):null,Ql(4,4,lf.bind(null,t,e),n)}function Na(){}function af(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cf(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uf(e,t,n){return Gn&21?(_t(n,t)||(n=hd(),_e.lanes|=n,Qn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function lp(e,t){var n=be;be=n!==0&&4>n?n:4,e(!0);var r=ko.transition;ko.transition={};try{e(!1),t()}finally{be=n,ko.transition=r}}function df(){return Et().memoizedState}function op(e,t,n){var r=Sn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ff(e))mf(t,n);else if(n=Vd(e,t,n,r),n!==null){var s=it();zt(n,e,r,s),hf(n,t,r)}}function ip(e,t,n){var r=Sn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ff(e))mf(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,c=o(i,n);if(s.hasEagerState=!0,s.eagerState=c,_t(c,i)){var a=t.interleaved;a===null?(s.next=s,fa(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=Vd(e,t,s,r),n!==null&&(s=it(),zt(n,e,r,s),hf(n,t,r))}}function ff(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function mf(e,t){Kr=El=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ji(e,n)}}var Pl={readContext:At,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},ap={readContext:At,useCallback:function(e,t){return Ot().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:zc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ol(4194308,4,lf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ol(4194308,4,e,t)},useInsertionEffect:function(e,t){return ol(4,2,e,t)},useMemo:function(e,t){var n=Ot();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ot();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=op.bind(null,_e,e),[r.memoizedState,e]},useRef:function(e){var t=Ot();return e={current:e},t.memoizedState=e},useState:Lc,useDebugValue:Na,useDeferredValue:function(e){return Ot().memoizedState=e},useTransition:function(){var e=Lc(!1),t=e[0];return e=lp.bind(null,e[1]),Ot().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_e,s=Ot();if(Le){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),We===null)throw Error(Z(349));Gn&30||Kd(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,zc(Zd.bind(null,r,o,e),[e]),r.flags|=2048,xs(9,Jd.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ot(),t=We.identifierPrefix;if(Le){var n=qt,r=Wt;n=(r&~(1<<32-Lt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ps++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cp={readContext:At,useCallback:af,useContext:At,useEffect:wa,useImperativeHandle:of,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:Co,useRef:nf,useState:function(){return Co(gs)},useDebugValue:Na,useDeferredValue:function(e){var t=Et();return uf(t,He.memoizedState,e)},useTransition:function(){var e=Co(gs)[0],t=Et().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Xd,useId:df,unstable_isNewReconciler:!1},up={readContext:At,useCallback:af,useContext:At,useEffect:wa,useImperativeHandle:of,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:Ao,useRef:nf,useState:function(){return Ao(gs)},useDebugValue:Na,useDeferredValue:function(e){var t=Et();return He===null?t.memoizedState=e:uf(t,He.memoizedState,e)},useTransition:function(){var e=Ao(gs)[0],t=Et().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Xd,useId:df,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:De({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vl={isMounted:function(e){return(e=e._reactInternals)?Kn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=it(),s=Sn(e),o=Kt(r,s);o.payload=t,n!=null&&(o.callback=n),t=wn(e,o,s),t!==null&&(zt(t,e,s,r),sl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=it(),s=Sn(e),o=Kt(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=wn(e,o,s),t!==null&&(zt(t,e,s,r),sl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),r=Sn(e),s=Kt(n,r);s.tag=2,t!=null&&(s.callback=t),t=wn(e,s,r),t!==null&&(zt(t,e,r,n),sl(t,e,r))}};function _c(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!cs(n,r)||!cs(s,o):!0}function pf(e,t,n){var r=!1,s=Cn,o=t.contextType;return typeof o=="object"&&o!==null?o=At(o):(s=ht(t)?Bn:rt.current,r=t.contextTypes,o=(r=r!=null)?Nr(e,s):Cn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Dc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vl.enqueueReplaceState(t,t.state,null)}function wi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ma(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=At(o):(o=ht(t)?Bn:rt.current,s.context=Nr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(vi(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vl.enqueueReplaceState(s,s.state,null),Cl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function br(e,t){try{var n="",r=t;do n+=$m(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Eo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ni(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dp=typeof WeakMap=="function"?WeakMap:Map;function gf(e,t,n){n=Kt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ml||(Ml=!0,Ti=r),Ni(e,t)},n}function xf(e,t,n){n=Kt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ni(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ni(e,t),typeof r!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function $c(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new dp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=bp.bind(null,e,t,n),t.then(e,e))}function Oc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kt(-1,1),t.tag=2,wn(n,t,1))),n.lanes|=1),e)}var fp=rn.ReactCurrentOwner,ft=!1;function ot(e,t,n,r){t.child=e===null?Qd(t,null,n,r):Ir(t,e.child,n,r)}function Uc(e,t,n,r,s){n=n.render;var o=t.ref;return xr(t,s),r=ya(e,t,n,r,o,s),n=va(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,tn(e,t,s)):(Le&&n&&oa(t),t.flags|=1,ot(e,t,r,s),t.child)}function Bc(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Ea(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,yf(e,t,o,r,s)):(e=ul(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:cs,n(i,r)&&e.ref===t.ref)return tn(e,t,s)}return t.flags|=1,e=In(o,r),e.ref=t.ref,e.return=t,t.child=e}function yf(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(cs(o,r)&&e.ref===t.ref)if(ft=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,tn(e,t,s)}return Si(e,t,n,r,s)}function vf(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(fr,yt),yt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pe(fr,yt),yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Pe(fr,yt),yt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Pe(fr,yt),yt|=r;return ot(e,t,s,n),t.child}function wf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Si(e,t,n,r,s){var o=ht(n)?Bn:rt.current;return o=Nr(t,o),xr(t,s),n=ya(e,t,n,r,o,s),r=va(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,tn(e,t,s)):(Le&&r&&oa(t),t.flags|=1,ot(e,t,n,s),t.child)}function Hc(e,t,n,r,s){if(ht(n)){var o=!0;Sl(t)}else o=!1;if(xr(t,s),t.stateNode===null)il(e,t),pf(t,n,r),wi(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var a=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=At(u):(u=ht(n)?Bn:rt.current,u=Nr(t,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==r||a!==u)&&Dc(t,i,r,u),un=!1;var f=t.memoizedState;i.state=f,Cl(t,r,i,s),a=t.memoizedState,c!==r||f!==a||mt.current||un?(typeof h=="function"&&(vi(t,n,h,r),a=t.memoizedState),(c=un||_c(t,n,c,r,f,a,u))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),i.props=r,i.state=a,i.context=u,r=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Yd(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Tt(t.type,c),i.props=u,p=t.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=At(a):(a=ht(n)?Bn:rt.current,a=Nr(t,a));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==p||f!==a)&&Dc(t,i,r,a),un=!1,f=t.memoizedState,i.state=f,Cl(t,r,i,s);var w=t.memoizedState;c!==p||f!==w||mt.current||un?(typeof d=="function"&&(vi(t,n,d,r),w=t.memoizedState),(u=un||_c(t,n,u,r,f,w,a)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,a)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=a,r=u):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ii(e,t,n,r,o,s)}function Ii(e,t,n,r,s,o){wf(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&Ac(t,n,!1),tn(e,t,o);r=t.stateNode,fp.current=t;var c=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Ir(t,e.child,null,o),t.child=Ir(t,null,c,o)):ot(e,t,c,o),t.memoizedState=r.state,s&&Ac(t,n,!0),t.child}function Nf(e){var t=e.stateNode;t.pendingContext?Cc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cc(e,t.context,!1),ha(e,t.containerInfo)}function Gc(e,t,n,r,s){return Sr(),aa(s),t.flags|=256,ot(e,t,n,r),t.child}var ji={dehydrated:null,treeContext:null,retryLane:0};function bi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sf(e,t,n){var r=t.pendingProps,s=ze.current,o=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Pe(ze,s&1),e===null)return xi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=ql(i,r,0,null),e=Fn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=bi(n),t.memoizedState=ji,e):Sa(t,i));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return mp(e,t,i,r,c,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,c=s.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=In(s,a),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=In(c,o):(o=Fn(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?bi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=ji,r}return o=e.child,e=o.sibling,r=In(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Sa(e,t){return t=ql({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vs(e,t,n,r){return r!==null&&aa(r),Ir(t,e.child,null,n),e=Sa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mp(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Eo(Error(Z(422))),Vs(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=ql({mode:"visible",children:r.children},s,0,null),o=Fn(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ir(t,e.child,null,i),t.child.memoizedState=bi(i),t.memoizedState=ji,o);if(!(t.mode&1))return Vs(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(Z(419)),r=Eo(o,r,void 0),Vs(e,t,i,r)}if(c=(i&e.childLanes)!==0,ft||c){if(r=We,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,en(e,s),zt(r,e,s,-1))}return Aa(),r=Eo(Error(Z(421))),Vs(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=kp.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,vt=vn(s.nextSibling),wt=t,Le=!0,Rt=null,e!==null&&(jt[bt++]=Wt,jt[bt++]=qt,jt[bt++]=Hn,Wt=e.id,qt=e.overflow,Hn=t),t=Sa(t,r.children),t.flags|=4096,t)}function Qc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yi(e.return,t,n)}function Po(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function If(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ot(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qc(e,n,t);else if(e.tag===19)Qc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pe(ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Al(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Po(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Al(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Po(t,!0,n,null,o);break;case"together":Po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function il(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=In(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=In(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hp(e,t,n){switch(t.tag){case 3:Nf(t),Sr();break;case 5:Wd(t);break;case 1:ht(t.type)&&Sl(t);break;case 4:ha(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Pe(bl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pe(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?Sf(e,t,n):(Pe(ze,ze.current&1),e=tn(e,t,n),e!==null?e.sibling:null);Pe(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return If(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,vf(e,t,n)}return tn(e,t,n)}var jf,ki,bf,kf;jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ki=function(){};bf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,$n(Ht.current);var o=null;switch(n){case"input":s=Wo(e,s),r=Wo(e,r),o=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),o=[];break;case"textarea":s=Ko(e,s),r=Ko(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wl)}Zo(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var c=s[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ns.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(c=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==c&&(a!=null||c!=null))if(u==="style")if(c){for(i in c)!c.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&c[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,c=c?c.__html:void 0,a!=null&&c!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ns.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Me("scroll",e),o||c===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};kf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Or(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pp(e,t,n){var r=t.pendingProps;switch(ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return ht(t.type)&&Nl(),et(t),null;case 3:return r=t.stateNode,jr(),Re(mt),Re(rt),ga(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Gs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rt!==null&&(Li(Rt),Rt=null))),ki(e,t),et(t),null;case 5:pa(t);var s=$n(hs.current);if(n=t.type,e!==null&&t.stateNode!=null)bf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return et(t),null}if(e=$n(Ht.current),Gs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ft]=t,r[fs]=o,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<Qr.length;s++)Me(Qr[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":ec(r,o),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Me("invalid",r);break;case"textarea":nc(r,o),Me("invalid",r)}Zo(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&Hs(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Hs(r.textContent,c,e),s=["children",""+c]):ns.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Me("scroll",r)}switch(n){case"input":zs(r),tc(r,o,!0);break;case"textarea":zs(r),rc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=wl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Ft]=t,e[fs]=r,jf(e,t,!1,!1),t.stateNode=e;e:{switch(i=ei(n,r),n){case"dialog":Me("cancel",e),Me("close",e),s=r;break;case"iframe":case"object":case"embed":Me("load",e),s=r;break;case"video":case"audio":for(s=0;s<Qr.length;s++)Me(Qr[s],e);s=r;break;case"source":Me("error",e),s=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),s=r;break;case"details":Me("toggle",e),s=r;break;case"input":ec(e,r),s=Wo(e,r),Me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Me("invalid",e);break;case"textarea":nc(e,r),s=Ko(e,r),Me("invalid",e);break;default:s=r}Zo(n,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var a=c[o];o==="style"?nd(e,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ed(e,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&rs(e,a):typeof a=="number"&&rs(e,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ns.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Me("scroll",e):a!=null&&Vi(e,o,a,i))}switch(n){case"input":zs(e),tc(e,r,!1);break;case"textarea":zs(e),rc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?mr(e,!!r.multiple,o,!1):r.defaultValue!=null&&mr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=wl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)kf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Z(166));if(n=$n(hs.current),$n(Ht.current),Gs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ft]=t,(o=r.nodeValue!==n)&&(e=wt,e!==null))switch(e.tag){case 3:Hs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ft]=t,t.stateNode=r}return et(t),null;case 13:if(Re(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&vt!==null&&t.mode&1&&!(t.flags&128))Hd(),Sr(),t.flags|=98560,o=!1;else if(o=Gs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[Ft]=t}else Sr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),o=!1}else Rt!==null&&(Li(Rt),Rt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Ge===0&&(Ge=3):Aa())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return jr(),ki(e,t),e===null&&us(t.stateNode.containerInfo),et(t),null;case 10:return da(t.type._context),et(t),null;case 17:return ht(t.type)&&Nl(),et(t),null;case 19:if(Re(ze),o=t.memoizedState,o===null)return et(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)Or(o,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Al(e),i!==null){for(t.flags|=128,Or(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pe(ze,ze.current&1|2),t.child}e=e.sibling}o.tail!==null&&Oe()>kr&&(t.flags|=128,r=!0,Or(o,!1),t.lanes=4194304)}else{if(!r)if(e=Al(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Or(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Le)return et(t),null}else 2*Oe()-o.renderingStartTime>kr&&n!==1073741824&&(t.flags|=128,r=!0,Or(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Oe(),t.sibling=null,n=ze.current,Pe(ze,r?n&1|2:n&1),t):(et(t),null);case 22:case 23:return Ca(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yt&1073741824&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function gp(e,t){switch(ia(t),t.tag){case 1:return ht(t.type)&&Nl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jr(),Re(mt),Re(rt),ga(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pa(t),null;case 13:if(Re(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Sr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(ze),null;case 4:return jr(),null;case 10:return da(t.type._context),null;case 22:case 23:return Ca(),null;case 24:return null;default:return null}}var Ys=!1,tt=!1,xp=typeof WeakSet=="function"?WeakSet:Set,ae=null;function dr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(e,t,r)}else n.current=null}function Ci(e,t,n){try{n()}catch(r){$e(e,t,r)}}var Vc=!1;function yp(e,t){if(ui=xl,e=Pd(),la(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,c=-1,a=-1,u=0,h=0,p=e,f=null;t:for(;;){for(var d;p!==n||s!==0&&p.nodeType!==3||(c=i+s),p!==o||r!==0&&p.nodeType!==3||(a=i+r),p.nodeType===3&&(i+=p.nodeValue.length),(d=p.firstChild)!==null;)f=p,p=d;for(;;){if(p===e)break t;if(f===n&&++u===s&&(c=i),f===o&&++h===r&&(a=i),(d=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=d}n=c===-1||a===-1?null:{start:c,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(di={focusedElem:e,selectionRange:n},xl=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,N=w.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Tt(t.type,g),N);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(S){$e(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return w=Vc,Vc=!1,w}function Jr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ci(t,n,o)}s=s.next}while(s!==r)}}function Yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ai(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cf(e){var t=e.alternate;t!==null&&(e.alternate=null,Cf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ft],delete t[fs],delete t[hi],delete t[ep],delete t[tp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Af(e){return e.tag===5||e.tag===3||e.tag===4}function Yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Af(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ei(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wl));else if(r!==4&&(e=e.child,e!==null))for(Ei(e,t,n),e=e.sibling;e!==null;)Ei(e,t,n),e=e.sibling}function Pi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Pi(e,t,n),e=e.sibling;e!==null;)Pi(e,t,n),e=e.sibling}var qe=null,Mt=!1;function an(e,t,n){for(n=n.child;n!==null;)Ef(e,t,n),n=n.sibling}function Ef(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Ol,n)}catch{}switch(n.tag){case 5:tt||dr(n,t);case 6:var r=qe,s=Mt;qe=null,an(e,t,n),qe=r,Mt=s,qe!==null&&(Mt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Mt?(e=qe,n=n.stateNode,e.nodeType===8?Io(e.parentNode,n):e.nodeType===1&&Io(e,n),is(e)):Io(qe,n.stateNode));break;case 4:r=qe,s=Mt,qe=n.stateNode.containerInfo,Mt=!0,an(e,t,n),qe=r,Mt=s;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Ci(n,t,i),s=s.next}while(s!==r)}an(e,t,n);break;case 1:if(!tt&&(dr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){$e(n,t,c)}an(e,t,n);break;case 21:an(e,t,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,an(e,t,n),tt=r):an(e,t,n);break;default:an(e,t,n)}}function Wc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xp),t.forEach(function(r){var s=Cp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Pt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:qe=c.stateNode,Mt=!1;break e;case 3:qe=c.stateNode.containerInfo,Mt=!0;break e;case 4:qe=c.stateNode.containerInfo,Mt=!0;break e}c=c.return}if(qe===null)throw Error(Z(160));Ef(o,i,s),qe=null,Mt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){$e(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pf(t,e),t=t.sibling}function Pf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(t,e),Dt(e),r&4){try{Jr(3,e,e.return),Yl(3,e)}catch(g){$e(e,e.return,g)}try{Jr(5,e,e.return)}catch(g){$e(e,e.return,g)}}break;case 1:Pt(t,e),Dt(e),r&512&&n!==null&&dr(n,n.return);break;case 5:if(Pt(t,e),Dt(e),r&512&&n!==null&&dr(n,n.return),e.flags&32){var s=e.stateNode;try{rs(s,"")}catch(g){$e(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,c=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&Ku(s,o),ei(c,i);var u=ei(c,o);for(i=0;i<a.length;i+=2){var h=a[i],p=a[i+1];h==="style"?nd(s,p):h==="dangerouslySetInnerHTML"?ed(s,p):h==="children"?rs(s,p):Vi(s,h,p,u)}switch(c){case"input":qo(s,o);break;case"textarea":Ju(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?mr(s,!!o.multiple,d,!1):f!==!!o.multiple&&(o.defaultValue!=null?mr(s,!!o.multiple,o.defaultValue,!0):mr(s,!!o.multiple,o.multiple?[]:"",!1))}s[fs]=o}catch(g){$e(e,e.return,g)}}break;case 6:if(Pt(t,e),Dt(e),r&4){if(e.stateNode===null)throw Error(Z(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){$e(e,e.return,g)}}break;case 3:if(Pt(t,e),Dt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(t.containerInfo)}catch(g){$e(e,e.return,g)}break;case 4:Pt(t,e),Dt(e);break;case 13:Pt(t,e),Dt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(ba=Oe())),r&4&&Wc(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(tt=(u=tt)||h,Pt(t,e),tt=u):Pt(t,e),Dt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(ae=e,h=e.child;h!==null;){for(p=ae=h;ae!==null;){switch(f=ae,d=f.child,f.tag){case 0:case 11:case 14:case 15:Jr(4,f,f.return);break;case 1:dr(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(g){$e(r,n,g)}}break;case 5:dr(f,f.return);break;case 22:if(f.memoizedState!==null){Xc(p);continue}}d!==null?(d.return=f,ae=d):Xc(p)}h=h.sibling}e:for(h=null,p=e;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=p.stateNode,a=p.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,c.style.display=td("display",i))}catch(g){$e(e,e.return,g)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){$e(e,e.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Pt(t,e),Dt(e),r&4&&Wc(e);break;case 21:break;default:Pt(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Af(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(rs(s,""),r.flags&=-33);var o=Yc(e);Pi(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,c=Yc(e);Ei(e,c,i);break;default:throw Error(Z(161))}}catch(a){$e(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vp(e,t,n){ae=e,Tf(e)}function Tf(e,t,n){for(var r=(e.mode&1)!==0;ae!==null;){var s=ae,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Ys;if(!i){var c=s.alternate,a=c!==null&&c.memoizedState!==null||tt;c=Ys;var u=tt;if(Ys=i,(tt=a)&&!u)for(ae=s;ae!==null;)i=ae,a=i.child,i.tag===22&&i.memoizedState!==null?Kc(s):a!==null?(a.return=i,ae=a):Kc(s);for(;o!==null;)ae=o,Tf(o),o=o.sibling;ae=s,Ys=c,tt=u}qc(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ae=o):qc(e)}}function qc(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tt||Yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!tt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Rc(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Rc(t,i,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&is(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}tt||t.flags&512&&Ai(t)}catch(f){$e(t,t.return,f)}}if(t===e){ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,ae=n;break}ae=t.return}}function Xc(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ae=n;break}ae=t.return}}function Kc(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yl(4,t)}catch(a){$e(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){$e(t,s,a)}}var o=t.return;try{Ai(t)}catch(a){$e(t,o,a)}break;case 5:var i=t.return;try{Ai(t)}catch(a){$e(t,i,a)}}}catch(a){$e(t,t.return,a)}if(t===e){ae=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ae=c;break}ae=t.return}}var wp=Math.ceil,Tl=rn.ReactCurrentDispatcher,Ia=rn.ReactCurrentOwner,Ct=rn.ReactCurrentBatchConfig,Ie=0,We=null,Ue=null,Xe=0,yt=0,fr=En(0),Ge=0,ys=null,Qn=0,Wl=0,ja=0,Zr=null,dt=null,ba=0,kr=1/0,Vt=null,Ml=!1,Ti=null,Nn=null,Ws=!1,hn=null,Rl=0,es=0,Mi=null,al=-1,cl=0;function it(){return Ie&6?Oe():al!==-1?al:al=Oe()}function Sn(e){return e.mode&1?Ie&2&&Xe!==0?Xe&-Xe:rp.transition!==null?(cl===0&&(cl=hd()),cl):(e=be,e!==0||(e=window.event,e=e===void 0?16:Nd(e.type)),e):1}function zt(e,t,n,r){if(50<es)throw es=0,Mi=null,Error(Z(185));js(e,n,r),(!(Ie&2)||e!==We)&&(e===We&&(!(Ie&2)&&(Wl|=n),Ge===4&&fn(e,Xe)),pt(e,r),n===1&&Ie===0&&!(t.mode&1)&&(kr=Oe()+500,Gl&&Pn()))}function pt(e,t){var n=e.callbackNode;rh(e,t);var r=gl(e,e===We?Xe:0);if(r===0)n!==null&&oc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&oc(n),t===1)e.tag===0?np(Jc.bind(null,e)):Fd(Jc.bind(null,e)),Jh(function(){!(Ie&6)&&Pn()}),n=null;else{switch(pd(r)){case 1:n=Ki;break;case 4:n=fd;break;case 16:n=pl;break;case 536870912:n=md;break;default:n=pl}n=Of(n,Mf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Mf(e,t){if(al=-1,cl=0,Ie&6)throw Error(Z(327));var n=e.callbackNode;if(yr()&&e.callbackNode!==n)return null;var r=gl(e,e===We?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ll(e,r);else{t=r;var s=Ie;Ie|=2;var o=Lf();(We!==e||Xe!==t)&&(Vt=null,kr=Oe()+500,On(e,t));do try{Ip();break}catch(c){Rf(e,c)}while(!0);ua(),Tl.current=o,Ie=s,Ue!==null?t=0:(We=null,Xe=0,t=Ge)}if(t!==0){if(t===2&&(s=li(e),s!==0&&(r=s,t=Ri(e,s))),t===1)throw n=ys,On(e,0),fn(e,r),pt(e,Oe()),n;if(t===6)fn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Np(s)&&(t=Ll(e,r),t===2&&(o=li(e),o!==0&&(r=o,t=Ri(e,o))),t===1))throw n=ys,On(e,0),fn(e,r),pt(e,Oe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Z(345));case 2:zn(e,dt,Vt);break;case 3:if(fn(e,r),(r&130023424)===r&&(t=ba+500-Oe(),10<t)){if(gl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){it(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=mi(zn.bind(null,e,dt,Vt),t);break}zn(e,dt,Vt);break;case 4:if(fn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Lt(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wp(r/1960))-r,10<r){e.timeoutHandle=mi(zn.bind(null,e,dt,Vt),r);break}zn(e,dt,Vt);break;case 5:zn(e,dt,Vt);break;default:throw Error(Z(329))}}}return pt(e,Oe()),e.callbackNode===n?Mf.bind(null,e):null}function Ri(e,t){var n=Zr;return e.current.memoizedState.isDehydrated&&(On(e,t).flags|=256),e=Ll(e,t),e!==2&&(t=dt,dt=n,t!==null&&Li(t)),e}function Li(e){dt===null?dt=e:dt.push.apply(dt,e)}function Np(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!_t(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fn(e,t){for(t&=~ja,t&=~Wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lt(t),r=1<<n;e[n]=-1,t&=~r}}function Jc(e){if(Ie&6)throw Error(Z(327));yr();var t=gl(e,0);if(!(t&1))return pt(e,Oe()),null;var n=Ll(e,t);if(e.tag!==0&&n===2){var r=li(e);r!==0&&(t=r,n=Ri(e,r))}if(n===1)throw n=ys,On(e,0),fn(e,t),pt(e,Oe()),n;if(n===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zn(e,dt,Vt),pt(e,Oe()),null}function ka(e,t){var n=Ie;Ie|=1;try{return e(t)}finally{Ie=n,Ie===0&&(kr=Oe()+500,Gl&&Pn())}}function Vn(e){hn!==null&&hn.tag===0&&!(Ie&6)&&yr();var t=Ie;Ie|=1;var n=Ct.transition,r=be;try{if(Ct.transition=null,be=1,e)return e()}finally{be=r,Ct.transition=n,Ie=t,!(Ie&6)&&Pn()}}function Ca(){yt=fr.current,Re(fr)}function On(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kh(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(ia(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:jr(),Re(mt),Re(rt),ga();break;case 5:pa(r);break;case 4:jr();break;case 13:Re(ze);break;case 19:Re(ze);break;case 10:da(r.type._context);break;case 22:case 23:Ca()}n=n.return}if(We=e,Ue=e=In(e.current,null),Xe=yt=t,Ge=0,ys=null,ja=Wl=Qn=0,dt=Zr=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}Dn=null}return e}function Rf(e,t){do{var n=Ue;try{if(ua(),ll.current=Pl,El){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}El=!1}if(Gn=0,Ye=He=_e=null,Kr=!1,ps=0,Ia.current=null,n===null||n.return===null){Ge=1,ys=t,Ue=null;break}e:{var o=e,i=n.return,c=n,a=t;if(t=Xe,c.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=c,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=Oc(i);if(d!==null){d.flags&=-257,Fc(d,i,c,o,t),d.mode&1&&$c(o,u,t),t=d,a=u;var w=t.updateQueue;if(w===null){var g=new Set;g.add(a),t.updateQueue=g}else w.add(a);break e}else{if(!(t&1)){$c(o,u,t),Aa();break e}a=Error(Z(426))}}else if(Le&&c.mode&1){var N=Oc(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Fc(N,i,c,o,t),aa(br(a,c));break e}}o=a=br(a,c),Ge!==4&&(Ge=2),Zr===null?Zr=[o]:Zr.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=gf(o,a,t);Mc(o,v);break e;case 1:c=a;var x=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Nn===null||!Nn.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=xf(o,c,t);Mc(o,S);break e}}o=o.return}while(o!==null)}_f(n)}catch(C){t=C,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Lf(){var e=Tl.current;return Tl.current=Pl,e===null?Pl:e}function Aa(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),We===null||!(Qn&268435455)&&!(Wl&268435455)||fn(We,Xe)}function Ll(e,t){var n=Ie;Ie|=2;var r=Lf();(We!==e||Xe!==t)&&(Vt=null,On(e,t));do try{Sp();break}catch(s){Rf(e,s)}while(!0);if(ua(),Ie=n,Tl.current=r,Ue!==null)throw Error(Z(261));return We=null,Xe=0,Ge}function Sp(){for(;Ue!==null;)zf(Ue)}function Ip(){for(;Ue!==null&&!Wm();)zf(Ue)}function zf(e){var t=$f(e.alternate,e,yt);e.memoizedProps=e.pendingProps,t===null?_f(e):Ue=t,Ia.current=null}function _f(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gp(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,Ue=null;return}}else if(n=pp(n,t,yt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Ge===0&&(Ge=5)}function zn(e,t,n){var r=be,s=Ct.transition;try{Ct.transition=null,be=1,jp(e,t,n,r)}finally{Ct.transition=s,be=r}return null}function jp(e,t,n,r){do yr();while(hn!==null);if(Ie&6)throw Error(Z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(sh(e,o),e===We&&(Ue=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ws||(Ws=!0,Of(pl,function(){return yr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ct.transition,Ct.transition=null;var i=be;be=1;var c=Ie;Ie|=4,Ia.current=null,yp(e,n),Pf(n,e),Gh(di),xl=!!ui,di=ui=null,e.current=n,vp(n),qm(),Ie=c,be=i,Ct.transition=o}else e.current=n;if(Ws&&(Ws=!1,hn=e,Rl=s),o=e.pendingLanes,o===0&&(Nn=null),Jm(n.stateNode),pt(e,Oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ml)throw Ml=!1,e=Ti,Ti=null,e;return Rl&1&&e.tag!==0&&yr(),o=e.pendingLanes,o&1?e===Mi?es++:(es=0,Mi=e):es=0,Pn(),null}function yr(){if(hn!==null){var e=pd(Rl),t=Ct.transition,n=be;try{if(Ct.transition=null,be=16>e?16:e,hn===null)var r=!1;else{if(e=hn,hn=null,Rl=0,Ie&6)throw Error(Z(331));var s=Ie;for(Ie|=4,ae=e.current;ae!==null;){var o=ae,i=o.child;if(ae.flags&16){var c=o.deletions;if(c!==null){for(var a=0;a<c.length;a++){var u=c[a];for(ae=u;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Jr(8,h,o)}var p=h.child;if(p!==null)p.return=h,ae=p;else for(;ae!==null;){h=ae;var f=h.sibling,d=h.return;if(Cf(h),h===u){ae=null;break}if(f!==null){f.return=d,ae=f;break}ae=d}}}var w=o.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var N=g.sibling;g.sibling=null,g=N}while(g!==null)}}ae=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,ae=i;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Jr(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,ae=v;break e}ae=o.return}}var x=e.current;for(ae=x;ae!==null;){i=ae;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,ae=y;else e:for(i=x;ae!==null;){if(c=ae,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Yl(9,c)}}catch(C){$e(c,c.return,C)}if(c===i){ae=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,ae=S;break e}ae=c.return}}if(Ie=s,Pn(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Ol,e)}catch{}r=!0}return r}finally{be=n,Ct.transition=t}}return!1}function Zc(e,t,n){t=br(n,t),t=gf(e,t,1),e=wn(e,t,1),t=it(),e!==null&&(js(e,1,t),pt(e,t))}function $e(e,t,n){if(e.tag===3)Zc(e,e,n);else for(;t!==null;){if(t.tag===3){Zc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nn===null||!Nn.has(r))){e=br(n,e),e=xf(t,e,1),t=wn(t,e,1),e=it(),t!==null&&(js(t,1,e),pt(t,e));break}}t=t.return}}function bp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,We===e&&(Xe&n)===n&&(Ge===4||Ge===3&&(Xe&130023424)===Xe&&500>Oe()-ba?On(e,0):ja|=n),pt(e,t)}function Df(e,t){t===0&&(e.mode&1?(t=$s,$s<<=1,!($s&130023424)&&($s=4194304)):t=1);var n=it();e=en(e,t),e!==null&&(js(e,t,n),pt(e,n))}function kp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Df(e,n)}function Cp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(t),Df(e,n)}var $f;$f=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ft=!1,hp(e,t,n);ft=!!(e.flags&131072)}else ft=!1,Le&&t.flags&1048576&&Ud(t,jl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;il(e,t),e=t.pendingProps;var s=Nr(t,rt.current);xr(t,n),s=ya(null,t,r,e,s,n);var o=va();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(r)?(o=!0,Sl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ma(t),s.updater=Vl,t.stateNode=s,s._reactInternals=t,wi(t,r,e,n),t=Ii(null,t,r,!0,o,n)):(t.tag=0,Le&&o&&oa(t),ot(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(il(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Ep(r),e=Tt(r,e),s){case 0:t=Si(null,t,r,e,n);break e;case 1:t=Hc(null,t,r,e,n);break e;case 11:t=Uc(null,t,r,e,n);break e;case 14:t=Bc(null,t,r,Tt(r.type,e),n);break e}throw Error(Z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Si(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Hc(e,t,r,s,n);case 3:e:{if(Nf(t),e===null)throw Error(Z(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Yd(e,t),Cl(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=br(Error(Z(423)),t),t=Gc(e,t,r,n,s);break e}else if(r!==s){s=br(Error(Z(424)),t),t=Gc(e,t,r,n,s);break e}else for(vt=vn(t.stateNode.containerInfo.firstChild),wt=t,Le=!0,Rt=null,n=Qd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sr(),r===s){t=tn(e,t,n);break e}ot(e,t,r,n)}t=t.child}return t;case 5:return Wd(t),e===null&&xi(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,fi(r,s)?i=null:o!==null&&fi(r,o)&&(t.flags|=32),wf(e,t),ot(e,t,i,n),t.child;case 6:return e===null&&xi(t),null;case 13:return Sf(e,t,n);case 4:return ha(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ir(t,null,r,n):ot(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Uc(e,t,r,s,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Pe(bl,r._currentValue),r._currentValue=i,o!==null)if(_t(o.value,i)){if(o.children===s.children&&!mt.current){t=tn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){i=o.child;for(var a=c.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Kt(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),yi(o.return,n,t),c.lanes|=n;break}a=a.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Z(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),yi(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ot(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,xr(t,n),s=At(s),r=r(s),t.flags|=1,ot(e,t,r,n),t.child;case 14:return r=t.type,s=Tt(r,t.pendingProps),s=Tt(r.type,s),Bc(e,t,r,s,n);case 15:return yf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),il(e,t),t.tag=1,ht(r)?(e=!0,Sl(t)):e=!1,xr(t,n),pf(t,r,s),wi(t,r,s,n),Ii(null,t,r,!0,e,n);case 19:return If(e,t,n);case 22:return vf(e,t,n)}throw Error(Z(156,t.tag))};function Of(e,t){return dd(e,t)}function Ap(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,n,r){return new Ap(e,t,n,r)}function Ea(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ep(e){if(typeof e=="function")return Ea(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wi)return 11;if(e===qi)return 14}return 2}function In(e,t){var n=e.alternate;return n===null?(n=kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ul(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")Ea(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case nr:return Fn(n.children,s,o,t);case Yi:i=8,s|=8;break;case Go:return e=kt(12,n,t,s|2),e.elementType=Go,e.lanes=o,e;case Qo:return e=kt(13,n,t,s),e.elementType=Qo,e.lanes=o,e;case Vo:return e=kt(19,n,t,s),e.elementType=Vo,e.lanes=o,e;case Wu:return ql(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vu:i=10;break e;case Yu:i=9;break e;case Wi:i=11;break e;case qi:i=14;break e;case cn:i=16,r=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=kt(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Fn(e,t,n,r){return e=kt(7,e,r,t),e.lanes=n,e}function ql(e,t,n,r){return e=kt(22,e,r,t),e.elementType=Wu,e.lanes=n,e.stateNode={isHidden:!1},e}function To(e,t,n){return e=kt(6,e,null,t),e.lanes=n,e}function Mo(e,t,n){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fo(0),this.expirationTimes=fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Pa(e,t,n,r,s,o,i,c,a){return e=new Pp(e,t,n,c,a),t===1?(t=1,o===!0&&(t|=8)):t=0,o=kt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ma(o),e}function Tp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ff(e){if(!e)return Cn;e=e._reactInternals;e:{if(Kn(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var n=e.type;if(ht(n))return Od(e,n,t)}return t}function Uf(e,t,n,r,s,o,i,c,a){return e=Pa(n,r,!0,e,s,o,i,c,a),e.context=Ff(null),n=e.current,r=it(),s=Sn(n),o=Kt(r,s),o.callback=t??null,wn(n,o,s),e.current.lanes=s,js(e,s,r),pt(e,r),e}function Xl(e,t,n,r){var s=t.current,o=it(),i=Sn(s);return n=Ff(n),t.context===null?t.context=n:t.pendingContext=n,t=Kt(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=wn(s,t,i),e!==null&&(zt(e,s,i,o),sl(e,s,i)),i}function zl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function eu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ta(e,t){eu(e,t),(e=e.alternate)&&eu(e,t)}function Mp(){return null}var Bf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ma(e){this._internalRoot=e}Kl.prototype.render=Ma.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));Xl(e,t,null,null)};Kl.prototype.unmount=Ma.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){Xl(null,e,null,null)}),t[Zt]=null}};function Kl(e){this._internalRoot=e}Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=yd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dn.length&&t!==0&&t<dn[n].priority;n++);dn.splice(n,0,e),n===0&&wd(e)}};function Ra(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tu(){}function Rp(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=zl(i);o.call(u)}}var i=Uf(t,r,e,0,null,!1,!1,"",tu);return e._reactRootContainer=i,e[Zt]=i.current,us(e.nodeType===8?e.parentNode:e),Vn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var u=zl(a);c.call(u)}}var a=Pa(e,0,!1,null,null,!1,!1,"",tu);return e._reactRootContainer=a,e[Zt]=a.current,us(e.nodeType===8?e.parentNode:e),Vn(function(){Xl(t,a,n,r)}),a}function Zl(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var c=s;s=function(){var a=zl(i);c.call(a)}}Xl(t,i,e,s)}else i=Rp(n,t,e,s,r);return zl(i)}gd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gr(t.pendingLanes);n!==0&&(Ji(t,n|1),pt(t,Oe()),!(Ie&6)&&(kr=Oe()+500,Pn()))}break;case 13:Vn(function(){var r=en(e,1);if(r!==null){var s=it();zt(r,e,1,s)}}),Ta(e,1)}};Zi=function(e){if(e.tag===13){var t=en(e,134217728);if(t!==null){var n=it();zt(t,e,134217728,n)}Ta(e,134217728)}};xd=function(e){if(e.tag===13){var t=Sn(e),n=en(e,t);if(n!==null){var r=it();zt(n,e,t,r)}Ta(e,t)}};yd=function(){return be};vd=function(e,t){var n=be;try{return be=e,t()}finally{be=n}};ni=function(e,t,n){switch(t){case"input":if(qo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Hl(r);if(!s)throw Error(Z(90));Xu(r),qo(r,s)}}}break;case"textarea":Ju(e,n);break;case"select":t=n.value,t!=null&&mr(e,!!n.multiple,t,!1)}};ld=ka;od=Vn;var Lp={usingClientEntryPoint:!1,Events:[ks,or,Hl,rd,sd,ka]},Fr={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:Fr.bundleType,version:Fr.version,rendererPackageName:Fr.rendererPackageName,rendererConfig:Fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cd(e),e===null?null:e.stateNode},findFiberByHostInstance:Fr.findFiberByHostInstance||Mp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qs.isDisabled&&qs.supportsFiber)try{Ol=qs.inject(zp),Bt=qs}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lp;St.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ra(t))throw Error(Z(200));return Tp(e,t,null,n)};St.createRoot=function(e,t){if(!Ra(e))throw Error(Z(299));var n=!1,r="",s=Bf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Pa(e,1,!1,null,null,n,!1,r,s),e[Zt]=t.current,us(e.nodeType===8?e.parentNode:e),new Ma(t)};St.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=cd(t),e=e===null?null:e.stateNode,e};St.flushSync=function(e){return Vn(e)};St.hydrate=function(e,t,n){if(!Jl(t))throw Error(Z(200));return Zl(null,e,t,!0,n)};St.hydrateRoot=function(e,t,n){if(!Ra(e))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Bf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Uf(t,null,e,1,n??null,s,!1,o,i),e[Zt]=t.current,us(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Kl(t)};St.render=function(e,t,n){if(!Jl(t))throw Error(Z(200));return Zl(null,e,t,!1,n)};St.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(Z(40));return e._reactRootContainer?(Vn(function(){Zl(null,null,e,!1,function(){e._reactRootContainer=null,e[Zt]=null})}),!0):!1};St.unstable_batchedUpdates=ka;St.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return Zl(e,t,n,!1,r)};St.version="18.3.1-next-f1338f8080-20240426";function Hf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hf)}catch(e){console.error(e)}}Hf(),Bu.exports=St;var Jn=Bu.exports,nu=Jn;Bo.createRoot=nu.createRoot,Bo.hydrateRoot=nu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vs(){return vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vs.apply(this,arguments)}var pn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pn||(pn={}));const ru="popstate";function _p(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:i,hash:c}=r.location;return zi("",{pathname:o,search:i,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_l(s)}return $p(t,n,null,e)}function Fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function La(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Dp(){return Math.random().toString(36).substr(2,8)}function su(e,t){return{usr:e.state,key:e.key,idx:t}}function zi(e,t,n,r){return n===void 0&&(n=null),vs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tr(t):t,{state:n,key:t&&t.key||r||Dp()})}function _l(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Tr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function $p(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,c=pn.Pop,a=null,u=h();u==null&&(u=0,i.replaceState(vs({},i.state,{idx:u}),""));function h(){return(i.state||{idx:null}).idx}function p(){c=pn.Pop;let N=h(),v=N==null?null:N-u;u=N,a&&a({action:c,location:g.location,delta:v})}function f(N,v){c=pn.Push;let x=zi(g.location,N,v);u=h()+1;let y=su(x,u),S=g.createHref(x);try{i.pushState(y,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(S)}o&&a&&a({action:c,location:g.location,delta:1})}function d(N,v){c=pn.Replace;let x=zi(g.location,N,v);u=h();let y=su(x,u),S=g.createHref(x);i.replaceState(y,"",S),o&&a&&a({action:c,location:g.location,delta:0})}function w(N){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof N=="string"?N:_l(N);return x=x.replace(/ $/,"%20"),Fe(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return c},get location(){return e(s,i)},listen(N){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(ru,p),a=N,()=>{s.removeEventListener(ru,p),a=null}},createHref(N){return t(s,N)},createURL:w,encodeLocation(N){let v=w(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:d,go(N){return i.go(N)}};return g}var lu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(lu||(lu={}));function Op(e,t,n){return n===void 0&&(n="/"),Fp(e,t,n)}function Fp(e,t,n,r){let s=typeof t=="string"?Tr(t):t,o=za(s.pathname||"/",n);if(o==null)return null;let i=Gf(e);Up(i);let c=null;for(let a=0;c==null&&a<i.length;++a){let u=Zp(o);c=Xp(i[a],u)}return c}function Gf(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,c)=>{let a={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};a.relativePath.startsWith("/")&&(Fe(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=jn([r,a.relativePath]),h=n.concat(a);o.children&&o.children.length>0&&(Fe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Gf(o.children,t,h,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:Wp(u,o.index),routesMeta:h})};return e.forEach((o,i)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,i);else for(let a of Qf(o.path))s(o,i,a)}),t}function Qf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=Qf(r.join("/")),c=[];return c.push(...i.map(a=>a===""?o:[o,a].join("/"))),s&&c.push(...i),c.map(a=>e.startsWith("/")&&a===""?"/":a)}function Up(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qp(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Bp=/^:[\w-]+$/,Hp=3,Gp=2,Qp=1,Vp=10,Yp=-2,ou=e=>e==="*";function Wp(e,t){let n=e.split("/"),r=n.length;return n.some(ou)&&(r+=Yp),t&&(r+=Gp),n.filter(s=>!ou(s)).reduce((s,o)=>s+(Bp.test(o)?Hp:o===""?Qp:Vp),r)}function qp(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Xp(e,t,n){let{routesMeta:r}=e,s={},o="/",i=[];for(let c=0;c<r.length;++c){let a=r[c],u=c===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Kp({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h),f=a.route;if(!p)return null;Object.assign(s,p.params),i.push({params:s,pathname:jn([o,p.pathname]),pathnameBase:sg(jn([o,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(o=jn([o,p.pathnameBase]))}return i}function Kp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Jp(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((u,h,p)=>{let{paramName:f,isOptional:d}=h;if(f==="*"){let g=c[p]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const w=c[p];return d&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function Jp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),La(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,a)=>(r.push({paramName:c,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Zp(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return La(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function za(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const eg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tg=e=>eg.test(e);function ng(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Tr(e):e,o;if(n)if(tg(n))o=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),La(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?o=iu(n.substring(1),"/"):o=iu(n,t)}else o=t;return{pathname:o,search:lg(r),hash:og(s)}}function iu(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ro(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _a(e,t){let n=rg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Da(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Tr(e):(s=vs({},e),Fe(!s.pathname||!s.pathname.includes("?"),Ro("?","pathname","search",s)),Fe(!s.pathname||!s.pathname.includes("#"),Ro("#","pathname","hash",s)),Fe(!s.search||!s.search.includes("#"),Ro("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,c;if(i==null)c=n;else{let p=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),p-=1;s.pathname=f.join("/")}c=p>=0?t[p]:"/"}let a=ng(s,c),u=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||h)&&(a.pathname+="/"),a}const jn=e=>e.join("/").replace(/\/\/+/g,"/"),sg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,og=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ig(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Vf=["post","put","patch","delete"];new Set(Vf);const ag=["get",...Vf];new Set(ag);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ws(){return ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ws.apply(this,arguments)}const $a=m.createContext(null),cg=m.createContext(null),Tn=m.createContext(null),eo=m.createContext(null),sn=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Yf=m.createContext(null);function ug(e,t){let{relative:n}=t===void 0?{}:t;Mr()||Fe(!1);let{basename:r,navigator:s}=m.useContext(Tn),{hash:o,pathname:i,search:c}=qf(e,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:jn([r,i])),s.createHref({pathname:a,search:c,hash:o})}function Mr(){return m.useContext(eo)!=null}function ln(){return Mr()||Fe(!1),m.useContext(eo).location}function Wf(e){m.useContext(Tn).static||m.useLayoutEffect(e)}function Be(){let{isDataRoute:e}=m.useContext(sn);return e?Ig():dg()}function dg(){Mr()||Fe(!1);let e=m.useContext($a),{basename:t,future:n,navigator:r}=m.useContext(Tn),{matches:s}=m.useContext(sn),{pathname:o}=ln(),i=JSON.stringify(_a(s,n.v7_relativeSplatPath)),c=m.useRef(!1);return Wf(()=>{c.current=!0}),m.useCallback(function(u,h){if(h===void 0&&(h={}),!c.current)return;if(typeof u=="number"){r.go(u);return}let p=Da(u,JSON.parse(i),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:jn([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,i,o,e])}function to(){let{matches:e}=m.useContext(sn),t=e[e.length-1];return t?t.params:{}}function qf(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=m.useContext(Tn),{matches:s}=m.useContext(sn),{pathname:o}=ln(),i=JSON.stringify(_a(s,r.v7_relativeSplatPath));return m.useMemo(()=>Da(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function fg(e,t){return mg(e,t)}function mg(e,t,n,r){Mr()||Fe(!1);let{navigator:s}=m.useContext(Tn),{matches:o}=m.useContext(sn),i=o[o.length-1],c=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let u=ln(),h;if(t){var p;let N=typeof t=="string"?Tr(t):t;a==="/"||(p=N.pathname)!=null&&p.startsWith(a)||Fe(!1),h=N}else h=u;let f=h.pathname||"/",d=f;if(a!=="/"){let N=a.replace(/^\//,"").split("/");d="/"+f.replace(/^\//,"").split("/").slice(N.length).join("/")}let w=Op(e,{pathname:d}),g=yg(w&&w.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:jn([a,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?a:jn([a,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,r);return t&&g?m.createElement(eo.Provider,{value:{location:ws({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:pn.Pop}},g):g}function hg(){let e=Sg(),t=ig(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:s},n):null,null)}const pg=m.createElement(hg,null);class gg extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(sn.Provider,{value:this.props.routeContext},m.createElement(Yf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xg(e){let{routeContext:t,match:n,children:r}=e,s=m.useContext($a);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(sn.Provider,{value:t},r)}function yg(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let h=i.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);h>=0||Fe(!1),i=i.slice(0,Math.min(i.length,h+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<i.length;h++){let p=i[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:f,errors:d}=n,w=p.route.loader&&f[p.route.id]===void 0&&(!d||d[p.route.id]===void 0);if(p.route.lazy||w){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,p,f)=>{let d,w=!1,g=null,N=null;n&&(d=c&&p.route.id?c[p.route.id]:void 0,g=p.route.errorElement||pg,a&&(u<0&&f===0?(jg("route-fallback"),w=!0,N=null):u===f&&(w=!0,N=p.route.hydrateFallbackElement||null)));let v=t.concat(i.slice(0,f+1)),x=()=>{let y;return d?y=g:w?y=N:p.route.Component?y=m.createElement(p.route.Component,null):p.route.element?y=p.route.element:y=h,m.createElement(xg,{match:p,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?m.createElement(gg,{location:n.location,revalidation:n.revalidation,component:g,error:d,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var Xf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Xf||{}),Kf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Kf||{});function vg(e){let t=m.useContext($a);return t||Fe(!1),t}function wg(e){let t=m.useContext(cg);return t||Fe(!1),t}function Ng(e){let t=m.useContext(sn);return t||Fe(!1),t}function Jf(e){let t=Ng(),n=t.matches[t.matches.length-1];return n.route.id||Fe(!1),n.route.id}function Sg(){var e;let t=m.useContext(Yf),n=wg(),r=Jf();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ig(){let{router:e}=vg(Xf.UseNavigateStable),t=Jf(Kf.UseNavigateStable),n=m.useRef(!1);return Wf(()=>{n.current=!0}),m.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ws({fromRouteId:t},o)))},[e,t])}const au={};function jg(e,t,n){au[e]||(au[e]=!0)}function bg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function kg(e){let{to:t,replace:n,state:r,relative:s}=e;Mr()||Fe(!1);let{future:o,static:i}=m.useContext(Tn),{matches:c}=m.useContext(sn),{pathname:a}=ln(),u=Be(),h=Da(t,_a(c,o.v7_relativeSplatPath),a,s==="path"),p=JSON.stringify(h);return m.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:s}),[u,p,s,n,r]),null}function xt(e){Fe(!1)}function Cg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=pn.Pop,navigator:o,static:i=!1,future:c}=e;Mr()&&Fe(!1);let a=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:a,navigator:o,static:i,future:ws({v7_relativeSplatPath:!1},c)}),[a,c,o,i]);typeof r=="string"&&(r=Tr(r));let{pathname:h="/",search:p="",hash:f="",state:d=null,key:w="default"}=r,g=m.useMemo(()=>{let N=za(h,a);return N==null?null:{location:{pathname:N,search:p,hash:f,state:d,key:w},navigationType:s}},[a,h,p,f,d,w,s]);return g==null?null:m.createElement(Tn.Provider,{value:u},m.createElement(eo.Provider,{children:n,value:g}))}function Ag(e){let{children:t,location:n}=e;return fg(_i(t),n)}new Promise(()=>{});function _i(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,s)=>{if(!m.isValidElement(r))return;let o=[...t,s];if(r.type===m.Fragment){n.push.apply(n,_i(r.props.children,o));return}r.type!==xt&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=_i(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Di.apply(this,arguments)}function Eg(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Pg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Tg(e,t){return e.button===0&&(!t||t==="_self")&&!Pg(e)}function $i(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Mg(e,t){let n=$i(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const Rg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Lg="6";try{window.__reactRouterVersion=Lg}catch{}const zg="startTransition",cu=bm[zg];function _g(e){let{basename:t,children:n,future:r,window:s}=e,o=m.useRef();o.current==null&&(o.current=_p({window:s,v5Compat:!0}));let i=o.current,[c,a]=m.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},h=m.useCallback(p=>{u&&cu?cu(()=>a(p)):a(p)},[a,u]);return m.useLayoutEffect(()=>i.listen(h),[i,h]),m.useEffect(()=>bg(r),[r]),m.createElement(Cg,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:i,future:r})}const Dg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Og=m.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:c,target:a,to:u,preventScrollReset:h,viewTransition:p}=t,f=Eg(t,Rg),{basename:d}=m.useContext(Tn),w,g=!1;if(typeof u=="string"&&$g.test(u)&&(w=u,Dg))try{let y=new URL(window.location.href),S=u.startsWith("//")?new URL(y.protocol+u):new URL(u),C=za(S.pathname,d);S.origin===y.origin&&C!=null?u=C+S.search+S.hash:g=!0}catch{}let N=ug(u,{relative:s}),v=Fg(u,{replace:i,state:c,target:a,preventScrollReset:h,relative:s,viewTransition:p});function x(y){r&&r(y),y.defaultPrevented||v(y)}return m.createElement("a",Di({},f,{href:w||N,onClick:g||o?r:x,ref:n,target:a}))});var uu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uu||(uu={}));var du;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(du||(du={}));function Fg(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:c}=t===void 0?{}:t,a=Be(),u=ln(),h=qf(e,{relative:i});return m.useCallback(p=>{if(Tg(p,n)){p.preventDefault();let f=r!==void 0?r:_l(u)===_l(h);a(e,{replace:f,state:s,preventScrollReset:o,relative:i,viewTransition:c})}},[u,a,h,r,s,n,e,o,i,c])}function Ug(e){let t=m.useRef($i(e)),n=m.useRef(!1),r=ln(),s=m.useMemo(()=>Mg(r.search,n.current?null:t.current),[r.search]),o=Be(),i=m.useCallback((c,a)=>{const u=$i(typeof c=="function"?c(s):c);n.current=!0,o("?"+u,a)},[o,s]);return[s,i]}const Bg={},fu=e=>{let t;const n=new Set,r=(h,p)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const d=t;t=p??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(w=>w(t,d))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Bg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,a);return a},Hg=e=>e?fu(e):fu;var Zf={exports:{}},em={},tm={exports:{}},nm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=m;function Gg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qg=typeof Object.is=="function"?Object.is:Gg,Vg=Cr.useState,Yg=Cr.useEffect,Wg=Cr.useLayoutEffect,qg=Cr.useDebugValue;function Xg(e,t){var n=t(),r=Vg({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return Wg(function(){s.value=n,s.getSnapshot=t,Lo(s)&&o({inst:s})},[e,n,t]),Yg(function(){return Lo(s)&&o({inst:s}),e(function(){Lo(s)&&o({inst:s})})},[e]),qg(n),n}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qg(e,n)}catch{return!0}}function Kg(e,t){return t()}var Jg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kg:Xg;nm.useSyncExternalStore=Cr.useSyncExternalStore!==void 0?Cr.useSyncExternalStore:Jg;tm.exports=nm;var Zg=tm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var no=m,ex=Zg;function tx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nx=typeof Object.is=="function"?Object.is:tx,rx=ex.useSyncExternalStore,sx=no.useRef,lx=no.useEffect,ox=no.useMemo,ix=no.useDebugValue;em.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=sx(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=ox(function(){function a(d){if(!u){if(u=!0,h=d,d=r(d),s!==void 0&&i.hasValue){var w=i.value;if(s(w,d))return p=w}return p=d}if(w=p,nx(h,d))return w;var g=r(d);return s!==void 0&&s(w,g)?(h=d,w):(h=d,p=g)}var u=!1,h,p,f=n===void 0?null:n;return[function(){return a(t())},f===null?void 0:function(){return a(f())}]},[t,n,r,s]);var c=rx(e,o[0],o[1]);return lx(function(){i.hasValue=!0,i.value=c},[c]),ix(c),c};Zf.exports=em;var ax=Zf.exports;const cx=Pu(ax),rm={},{useDebugValue:ux}=Hi,{useSyncExternalStoreWithSelector:dx}=cx;let mu=!1;const fx=e=>e;function mx(e,t=fx,n){(rm?"production":void 0)!=="production"&&n&&!mu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),mu=!0);const r=dx(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ux(r),r}const hu=e=>{(rm?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Hg(e):e,n=(r,s)=>mx(t,r,s);return Object.assign(n,t),n},As=e=>e?hu(e):hu,hx={};function px(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const i=a=>a===null?null:JSON.parse(a,void 0),c=(o=n.getItem(s))!=null?o:null;return c instanceof Promise?c.then(i):i(c)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const Ns=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Ns(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ns(r)(n)}}}},gx=(e,t)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:N=>N,version:0,merge:(N,v)=>({...v,...N}),...t},i=!1;const c=new Set,a=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...N)},r,s);const h=Ns(o.serialize),p=()=>{const N=o.partialize({...r()});let v;const x=h({state:N,version:o.version}).then(y=>u.setItem(o.name,y)).catch(y=>{v=y});if(v)throw v;return x},f=s.setState;s.setState=(N,v)=>{f(N,v),p()};const d=e((...N)=>{n(...N),p()},r,s);let w;const g=()=>{var N;if(!u)return;i=!1,c.forEach(x=>x(r()));const v=((N=o.onRehydrateStorage)==null?void 0:N.call(o,r()))||void 0;return Ns(u.getItem.bind(u))(o.name).then(x=>{if(x)return o.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==o.version){if(o.migrate)return o.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var y;return w=o.merge(x,(y=r())!=null?y:d),n(w,!0),p()}).then(()=>{v==null||v(w,void 0),i=!0,a.forEach(x=>x(w))}).catch(x=>{v==null||v(void 0,x)})};return s.persist={setOptions:N=>{o={...o,...N},N.getStorage&&(u=N.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>i,onHydrate:N=>(c.add(N),()=>{c.delete(N)}),onFinishHydration:N=>(a.add(N),()=>{a.delete(N)})},g(),w||d},xx=(e,t)=>(n,r,s)=>{let o={storage:px(()=>localStorage),partialize:g=>g,version:0,merge:(g,N)=>({...N,...g}),...t},i=!1;const c=new Set,a=new Set;let u=o.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,s);const h=()=>{const g=o.partialize({...r()});return u.setItem(o.name,{state:g,version:o.version})},p=s.setState;s.setState=(g,N)=>{p(g,N),h()};const f=e((...g)=>{n(...g),h()},r,s);s.getInitialState=()=>f;let d;const w=()=>{var g,N;if(!u)return;i=!1,c.forEach(x=>{var y;return x((y=r())!=null?y:f)});const v=((N=o.onRehydrateStorage)==null?void 0:N.call(o,(g=r())!=null?g:f))||void 0;return Ns(u.getItem.bind(u))(o.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==o.version){if(o.migrate)return[!0,o.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var y;const[S,C]=x;if(d=o.merge(C,(y=r())!=null?y:f),n(d,!0),S)return h()}).then(()=>{v==null||v(d,void 0),d=r(),i=!0,a.forEach(x=>x(d))}).catch(x=>{v==null||v(void 0,x)})};return s.persist={setOptions:g=>{o={...o,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>w(),hasHydrated:()=>i,onHydrate:g=>(c.add(g),()=>{c.delete(g)}),onFinishHydration:g=>(a.add(g),()=>{a.delete(g)})},o.skipHydration||w(),d||f},yx=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((hx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),gx(e,t)):xx(e,t),ro=yx,Ss={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){console.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){console.error("Failed to clear localStorage:",e)}}};function vx(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}const wx={getItem:async e=>new Promise(t=>{const n=indexedDB.open("tunetuna-storage",1);n.onupgradeneeded=()=>{n.result.createObjectStore("zustand")},n.onsuccess=()=>{const i=n.result.transaction(["zustand"],"readonly").objectStore("zustand").get(e);i.onsuccess=()=>{t(i.result||null)},i.onerror=()=>{t(null)}},n.onerror=()=>{t(null)}}),setItem:async(e,t)=>new Promise((n,r)=>{const s=indexedDB.open("tunetuna-storage",1);s.onupgradeneeded=()=>{s.result.createObjectStore("zustand")},s.onsuccess=()=>{const a=s.result.transaction(["zustand"],"readwrite").objectStore("zustand").put(t,e);a.onsuccess=()=>{n()},a.onerror=()=>{r(a.error)}},s.onerror=()=>{r(s.error)}}),removeItem:async e=>new Promise(t=>{const n=indexedDB.open("tunetuna-storage",1);n.onsuccess=()=>{const i=n.result.transaction(["zustand"],"readwrite").objectStore("zustand").delete(e);i.onsuccess=()=>{t()},i.onerror=()=>{t()}},n.onerror=()=>{t()}})},Ee=As()(ro(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1},sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(o=>o.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t})}),{name:"music-storage",storage:wx,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed})}));function dl(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function $t(e){return e&&dl(e).replace(/'/g,"")}class Nx{constructor(){Rn(this,"baseUrl","");Rn(this,"accessToken","");Rn(this,"userId","");Rn(this,"genresCache",null);Rn(this,"isPreloading",!1)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":`MediaBrowser Client="Tunetuna", Device="Web", DeviceId="${this.getDeviceId()}", Version="1.0.0"`}}getDeviceId(){let t=Ss.get("deviceId");return t||(t=vx(),Ss.set("deviceId",t)),t}async request(t,n={}){const r=`${this.baseUrl}${t}`,s=await fetch(r,{...n,headers:{...this.getHeaders(),...n.headers}});if(!s.ok)throw s.status===401?new Error("Unauthorized - please login again"):new Error(`API request failed: ${s.statusText}`);return s.json()}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",o=new AbortController,i=setTimeout(()=>{console.warn("Authentication request timed out after 30 seconds"),o.abort()},3e4);let c;try{c=await fetch(s,{method:"POST",signal:o.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":`MediaBrowser Client="Tunetuna", Device="Web", DeviceId="${this.getDeviceId()}", Version="1.0.0"`},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(i)}catch(u){if(clearTimeout(i),u instanceof Error&&u.name==="AbortError"){const p=/^https?:\/\/100\.\d+\.\d+\.\d+/.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:"";throw new Error(`Request timeout - server did not respond within 30 seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${p}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(u instanceof TypeError){const h=u.message.toLowerCase();if(h.includes("failed to fetch")||h.includes("networkerror")){const f=/^https?:\/\/100\.\d+\.\d+\.\d+/.test(t)?`
  VPN/Tailscale IP detected. Your phone may not be able to access this IP.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:"";throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${f}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${u.message}`)}throw u}if(!c.ok){const u=await c.text().catch(()=>"");throw new Error(u||`Authentication failed (${c.status})`)}const a=await c.json();return this.setCredentials(t,a.AccessToken,a.User.Id),a}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,c=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&c.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${c.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&r.append("SortOrder",t.sortOrder),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,ProductionYear,DateCreated,DateModified,DateLastSaved"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return console.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=Ee.getState(),r=12*60*60*1e3;if(!t&&n.genres.length>0&&n.genresLastUpdated){const s=Date.now(),o=n.genresLastChecked||0;if(!(s-o>=r))return this.genresCache=n.genres,n.genres;try{const c=await this.getRecentlyAdded(50),a=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),u=[...c.Items||[],...a.Items||[]];let h=0;for(const p of u){if(p.DateCreated){const f=new Date(p.DateCreated).getTime();f>h&&(h=f)}if(p.DateLastSaved){const f=new Date(p.DateLastSaved).getTime();f>h&&(h=f)}}if(Ee.setState({genresLastChecked:s}),h<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch(c){return console.warn("[getGenres] Failed to check for new/modified tracks, using cached genres:",c),this.genresCache=n.genres,n.genres}}try{const s=new Map;let o=0;const i=200;let c=!0;for(;c;){const v=(await this.getAlbums({limit:i,startIndex:o})).Items||[];if(v.forEach(x=>{x.Genres&&x.Genres.forEach(y=>{const S=y.toLowerCase();s.has(S)||s.set(S,y)})}),c=v.length===i,o+=i,o>1e4)break}const a=new Set;let u=0,h=!0;for(;h;){const v=(await this.getSongs({limit:200,startIndex:u})).Items||[];if(v.forEach(x=>{x.Genres&&x.Genres.forEach(y=>{a.add(y.toLowerCase())})}),h=v.length===200,u+=200,u>1e4)break}const p=new Map,f=new Map;try{const N=new URLSearchParams({UserId:this.userId,Recursive:"true"}),v=await this.request(`/Genres?${N}`);let x=[];Array.isArray(v)?x=v:v&&typeof v=="object"&&"Items"in v&&(x=v.Items||[]),x.forEach(y=>{if(y.Name){const S=y.Name.toLowerCase();s.has(S)&&(p.set(S,y.Id),f.set(y.Id,y))}})}catch(N){console.warn("[getGenres] Failed to get genre IDs from API, will use synthetic IDs:",N)}const d=[],w=new Set;for(const[N,v]of s){if(w.has(N)||!a.has(N))continue;const x=p.get(N);if(x){const y=f.get(x);y&&(d.push(y),w.add(N))}else d.push({Id:`synthetic-${N.replace(/\s+/g,"-")}`,Name:v,Type:"Genre"}),w.add(N)}const g=Date.now();return Ee.getState().setGenres(d),Ee.setState({genresLastUpdated:g,genresLastChecked:g}),this.genresCache=d,d}catch(s){return console.error("[getGenres] Failed to build music genres:",s),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=Ee.getState(),r=12*60*60*1e3;if(!t&&n.years.length>0&&n.yearsLastUpdated){const s=Date.now(),o=n.yearsLastChecked||0;if(!(s-o>=r))return n.years;try{const a=(await this.getRecentlyAdded(50)).Items||[];let u=0;for(const h of a)if(h.DateCreated){const p=new Date(h.DateCreated).getTime();p>u&&(u=p)}if(Ee.setState({yearsLastChecked:s}),u<=n.yearsLastUpdated)return n.years}catch(c){return console.warn("[getYears] Failed to check for new tracks, using cached years:",c),n.years}}try{const s=new Set;let o=0;const i=200;let c=!0;for(;c;){const p=(await this.getSongs({limit:i,startIndex:o})).Items||[];if(p.forEach(f=>{f.ProductionYear&&f.ProductionYear>0&&s.add(f.ProductionYear)}),c=p.length===i,o+=i,o>1e4)break}const a=Array.from(s).sort((h,p)=>h-p),u=Date.now();return Ee.getState().setYears(a),Ee.setState({yearsLastUpdated:u,yearsLastChecked:u}),a}catch(s){return console.error("[getYears] Failed to extract years:",s),n.years.length>0?n.years:[]}}async getGenreSongs(t,n,r=!1){let s=[];if(t.startsWith("synthetic-")||r){let c=0;const a=200;let u=!0;for(;u;){const p=(await this.getSongs({limit:a,startIndex:c},!0)).Items||[];if(s.push(...p),u=p.length===a,c+=a,c>5e4)break}}else{let c=0;const a=200;let u=!0;for(;u;){const p=(await this.getSongs({genreIds:[t],limit:a,startIndex:c})).Items||[];if(s.push(...p),u=p.length===a,c+=a,c>5e4)break}}return s.filter(c=>{var u;return(u=c.Genres)==null?void 0:u.some(h=>h.toLowerCase()===n.toLowerCase())}).map(c=>({Id:c.Id,Name:c.Name,AlbumArtist:c.AlbumArtist,ArtistItems:c.ArtistItems,Album:c.Album,AlbumId:c.AlbumId,IndexNumber:c.IndexNumber,ProductionYear:c.ProductionYear,PremiereDate:c.PremiereDate,RunTimeTicks:c.RunTimeTicks,Genres:c.Genres}))}async syncLibrary(t={scope:"incremental"}){const n=Ee.getState();if(t.scope==="incremental"){const o=n.lastSyncCompleted,i=await this.getGenres(!1);let c=[];if(o){let g=0;const N=200;let v=!0;for(;v;){const y=(await this.getSongs({minDateLastSaved:new Date(o),limit:N,startIndex:g},!0)).Items||[];if(c.push(...y),v=y.length===N,g+=N,g>1e4)break}}else c=(await this.getSongs({limit:1e3,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const a=c.map(g=>({Id:g.Id,Name:g.Name,AlbumArtist:g.AlbumArtist,ArtistItems:g.ArtistItems,Album:g.Album,AlbumId:g.AlbumId,IndexNumber:g.IndexNumber,ProductionYear:g.ProductionYear,PremiereDate:g.PremiereDate,RunTimeTicks:g.RunTimeTicks,Genres:g.Genres})),u=n.songs,h=new Set(u.map(g=>g.Id)),p=a.filter(g=>!h.has(g.Id)),f=[...u,...p];try{n.setSongs(f)}catch(g){throw g instanceof DOMException&&g.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):g}const d=new Set;p.forEach(g=>{var N;(N=g.Genres)==null||N.forEach(v=>{i.forEach(x=>{var y;((y=x.Name)==null?void 0:y.toLowerCase())===v.toLowerCase()&&d.add(x.Id)})})});const w=Array.from(d).map(async g=>{const N=i.find(S=>S.Id===g);if(!(N!=null&&N.Name))return;const v=n.genreSongs[g]||[];new Set(v.map(S=>S.Id));const x=p.filter(S=>{var C;return(C=S.Genres)==null?void 0:C.some(I=>I.toLowerCase()===N.Name.toLowerCase())}),y=[...v,...x];n.setGenreSongs(g,y)});await Promise.all(w);return}this.clearGenresCache(),n.clearGenreSongs();const s=(await this.getGenres(!0)).map(async o=>{if(!(!o.Name||!o.Id))try{const i=await this.getGenreSongs(o.Id,o.Name);n.setGenreSongs(o.Id,i)}catch(i){console.warn(`[syncLibrary] Failed to load songs for genre ${o.Name}:`,i)}});await Promise.all(s)}async search(t,n=20){const r=t?dl(t.trim()):"",s=r.length>0,o=r.length,i=s&&o<3,c={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0};s&&(c.searchTerm=r,o>=3&&(c.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const a=this.buildQueryString(c),u=await this.request(`/Items?${a}`);let h=[];const p=[],f=[],d=[],w=new Set;if(u.Items.forEach(g=>{g.Type==="MusicArtist"?h.push(g):g.Type==="MusicAlbum"?p.push(g):g.Type==="Playlist"?f.push(g):g.Type==="Audio"&&(d.push(g),w.add(g.Id))}),i)try{const g=await this.getArtists({limit:1e3}),N=r.toLowerCase();h=(g.Items||[]).filter(v=>dl(v.Name||"").toLowerCase().includes(N))}catch(g){console.error("Failed to fetch all artists for short query:",g)}if(s&&h.length>0){const g=r.toLowerCase(),v=h.filter(y=>dl(y.Name||"").toLowerCase().includes(g)).map(y=>this.getArtistItems(y.Id).catch(S=>(console.error(`Failed to fetch songs for artist ${y.Id}:`,S),{albums:[],songs:[]})));(await Promise.all(v)).forEach(({songs:y})=>{y.forEach(S=>{w.has(S.Id)||(d.push(S),w.add(S.Id))})})}return{Artists:{Items:h,TotalRecordCount:h.length,StartIndex:0},Albums:{Items:p,TotalRecordCount:p.length,StartIndex:0},Playlists:{Items:f,TotalRecordCount:f.length,StartIndex:0},Songs:{Items:d,TotalRecordCount:d.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres"}),r=await this.request(`/Items?${n}`),s=[],o=[];return r.Items.forEach(i=>{i.Type==="MusicAlbum"?s.push(i):i.Type==="Audio"&&o.push(i)}),{albums:s,songs:o}}async getGenreItems(t,n=50){const r=this.buildQueryString({genreIds:[t],includeItemTypes:["MusicAlbum"],recursive:!0,limit:n,sortBy:["DateCreated"],sortOrder:"Descending"});return this.request(`/Items?${r}`)}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch(n){console.warn("Failed to mark item as played:",n)}}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const o=new URLSearchParams({UserId:this.userId}),i=`${this.baseUrl}${s}?${o}`;try{const c=await fetch(i,{headers:this.getHeaders()});if(c.ok){const a=await c.json();if(a.Lyrics&&Array.isArray(a.Lyrics)&&a.Lyrics.length>0)return a.Lyrics.map(h=>h.Text||"").join(`
`);if(typeof a=="string")return a;if(a.Text)return a.Text}else if(c.status===404){r=`404 for ${s}`;continue}else{const a=await c.text().catch(()=>"");r=`${c.status}: ${a}`;continue}}catch(c){r=c instanceof Error?c.message:String(c);continue}}return null}catch(n){return console.warn("[getLyrics] Failed to fetch lyrics:",n),null}}}const z=new Nx,Oa=As()(ro(e=>({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await z.authenticate(t,n,r);e({serverUrl:t,username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),z.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{e({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),Ss.remove("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),z.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId&&z.setCredentials(e.serverUrl,e.accessToken,e.userId)}})),Es=As()(ro(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),enableQueueRecommendations:!0,setEnableQueueRecommendations:t=>e({enableQueueRecommendations:t})}),{name:"settings-storage"})),pu="last-server-url";function Sx(){const[e,t]=m.useState(""),[n,r]=m.useState(""),[s,o]=m.useState(""),[i,c]=m.useState(""),[a,u]=m.useState(!1),h=Oa(f=>f.login);m.useEffect(()=>{const f=Ss.get(pu);f&&t(f)},[]);const p=async f=>{f.preventDefault(),c(""),u(!0),e.trim()&&Ss.set(pu,e.trim());try{await h(e,n,s)}catch(d){c(d instanceof Error?d.message:"Login failed. Please check your credentials.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),l.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),l.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:f=>t(f.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),l.jsx("input",{id:"username",type:"text",value:n,onChange:f=>r(f.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:s,onChange:f=>o(f.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),i&&l.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),l.jsx("button",{type:"submit",disabled:a,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:a?"Signing in...":"Sign In"})]})]})})}/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jx=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),gu=e=>{const t=jx(e);return t.charAt(0).toUpperCase()+t.slice(1)},sm=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),bx=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...c},a)=>m.createElement("svg",{ref:a,...kx,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:sm("lucide",s),...!o&&!bx(c)&&{"aria-hidden":"true"},...c},[...i.map(([u,h])=>m.createElement(u,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(e,t)=>{const n=m.forwardRef(({className:r,...s},o)=>m.createElement(Cx,{ref:o,iconNode:t,className:sm(`lucide-${Ix(gu(e))}`,`lucide-${e}`,r),...s}));return n.displayName=gu(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Un=Se("arrow-left",Ax);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Ps=Se("arrow-up-down",Ex);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fa=Se("calendar",Px);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ua=Se("chevron-down",Tx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Rx=Se("chevron-left",Mx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zx=Se("chevron-right",Lx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lm=Se("chevron-up",_x);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ve=Se("disc",Dx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ba=Se("ellipsis",$x);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Fx=Se("github",Ox);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Bx=Se("grip-horizontal",Ux);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],Yn=Se("guitar",Hx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],Qx=Se("heart-handshake",Gx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Yx=Se("house",Vx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],Ut=Se("list-end",Wx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Xx=Se("list-music",qx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],Xs=Se("list-start",Kx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],Zx=Se("list-video",Jx);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],t0=Se("log-out",e0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],r0=Se("mic-vocal",n0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],l0=Se("music",s0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],nn=Se("pause",o0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nt=Se("play",i0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]],c0=Se("rabbit",a0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ts=Se("refresh-cw",u0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Ha=Se("repeat-1",d0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Ga=Se("repeat",f0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],h0=Se("settings",m0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],bn=Se("shuffle",p0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Qa=Se("skip-back",g0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Dl=Se("skip-forward",x0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],v0=Se("square-play",y0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["path",{d:"m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4Z",key:"1lbbv7"}],["path",{d:"M4.82 7.9 8 10",key:"m9wose"}],["path",{d:"M15.18 7.9 12 10",key:"p8dp2u"}],["path",{d:"M16.93 10H20a2 2 0 0 1 0 4H2",key:"12nsm7"}]],N0=Se("turtle",w0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],st=Se("user",S0);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],j0=Se("x",I0),b0=[{path:"/",label:"Home",icon:Yx,key:"home"},{path:"/artists",label:"Artists",icon:st,key:"artists"},{path:"/albums",label:"Albums",icon:Ve,key:"albums"},{path:"/songs",label:"Songs",icon:l0,key:"songs"},{path:"/genres",label:"Genres",icon:Yn,key:"genres"},{path:"/playlists",label:"Playlists",icon:Xx,key:"playlists"}];function k0(){const e=ln(),{pageVisibility:t}=Es(),n=b0.filter(s=>s.key==="home"?!0:t[s.key]),r=(s,o)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===o&&s.preventDefault()};return l.jsx("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(s=>{const o=e.pathname===s.path,i=s.icon;return l.jsxs(Og,{to:s.path,onClick:c=>r(c,s.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${o?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[l.jsx(i,{className:"w-5 h-5 mb-1"}),l.jsx("span",{className:"text-xs font-medium",children:s.label})]},s.path)})})})})}const vr=new Set,Xt=new Map;function Ur(e,t,n=5e3){var i;const r=ve.getState().queue;r.find(c=>c.Id===e)&&((i=r.find(c=>c.Id===e))==null||i._isRecommended);const s=Xt.get(e);if(s&&clearTimeout(s),vr.has(e))return;const o=setTimeout(async()=>{var a;const c=t();if((c==null?void 0:c.Id)===e)try{const u=ve.getState().queue,h=u.find(p=>p.Id===e)?(a=u.find(p=>p.Id===e))==null?void 0:a._isRecommended:!1;await z.markItemAsPlayed(e),vr.add(e),setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}}))},4e3)}catch{}Xt.delete(e)},n);Xt.set(e,o)}function C0(e){vr.add(e);const t=Xt.get(e);t&&(clearTimeout(t),Xt.delete(e))}function Qt(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}const ve=As()(ro((e,t)=>({currentTrack:null,lastPlayedTrack:null,queue:[],originalQueue:[],shuffledOrder:[],recommendations:[],previousSongs:[],playedSongIds:[],collectionStartIndex:-1,currentIndex:-1,isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,manuallyCleared:!1,isFetchingRecommendations:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setCurrentTrack:n=>{var i,c;const r=t().currentTrack,s=t().queue;if(r&&s.find(a=>a.Id===r.Id)&&((i=s.find(a=>a.Id===r.Id))==null||i._isRecommended),n&&s.find(a=>a.Id===n.Id)&&((c=s.find(a=>a.Id===n.Id))==null||c._isRecommended),r&&n&&r.Id!==n.Id)if(vr.has(r.Id)){const a=Xt.get(r.Id);a&&(clearTimeout(a),Xt.delete(r.Id))}else{const a=Xt.get(r.Id);a&&(clearTimeout(a),Xt.delete(r.Id)),vr.add(r.Id),z.markItemAsPlayed(r.Id).then(()=>{setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:r.Id}}))},4e3)}).catch(u=>{vr.delete(r.Id)})}n?(e({currentTrack:n,lastPlayedTrack:n}),(!r||r.Id!==n.Id)&&Ee.getState().addToRecentlyPlayed(n)):e({currentTrack:n});const o=t().audioElement;if(o&&n){const a=z.serverBaseUrl,u=a?`${a}/Audio/${n.Id}/stream?static=true`:"";o.src!==u&&(o.src=u,o.load())}},setQueue:n=>{const r=n.map(s=>({...s,_isRecommended:!1}));e({queue:r,originalQueue:[...r],shuffledOrder:[...r],manuallyCleared:!0,playedSongIds:[]})},addToQueue:(n,r=!1)=>{e(s=>{const o=n.map(d=>({...d,_isRecommended:r}));let i=[...o];s.currentTrack&&!s.originalQueue.some(d=>{var w;return d.Id===((w=s.currentTrack)==null?void 0:w.Id)})&&!r&&(i=[{...s.currentTrack,_isRecommended:!1},...o]);const c=s.shuffle?s.shuffledOrder||[]:s.originalQueue||[];let a,u,h,p;if(r)p=[...s.recommendations,...i],a=[...c,...p],u=[...s.originalQueue],h=[...s.shuffledOrder];else{const d=new Set([...s.originalQueue.map(g=>g.Id)]),w=i.filter(g=>!d.has(g.Id));if(u=[...s.originalQueue,...w],s.shuffle){let g;if(s.currentIndex>=0&&s.currentTrack){const N=u.findIndex(v=>{var x;return v.Id===((x=s.currentTrack)==null?void 0:x.Id)});if(N>=0){const v=u.slice(0,N+1),x=u.slice(N+1),y=Qt(x);g=[...v,...y]}else g=Qt(u)}else g=Qt(u);h=g,a=[...g,...s.recommendations]}else h=[...u],a=[...u,...s.recommendations];p=[...s.recommendations]}let f=s.currentIndex;if(!r&&s.currentIndex>=0&&s.shuffle&&s.currentTrack){const d=a.findIndex(w=>{var g;return w.Id===((g=s.currentTrack)==null?void 0:g.Id)});d>=0&&(f=d)}return{queue:a,originalQueue:u,shuffledOrder:h,recommendations:p,currentIndex:f,manuallyCleared:r?s.manuallyCleared:!1}})},removeFromQueue:n=>{e(r=>{const s=[...r.queue],o=s[n];s.splice(n,1);const i=o&&o._isRecommended;let c=[...r.originalQueue],a=[...r.shuffledOrder],u=[...r.recommendations];if(o){const d=c.findIndex(g=>g.Id===o.Id);d>=0&&c.splice(d,1);const w=a.findIndex(g=>g.Id===o.Id);if(w>=0&&a.splice(w,1),i){const g=u.findIndex(N=>N.Id===o.Id);g>=0&&u.splice(g,1)}}const p=[...r.shuffle?a:c,...u];let f=r.currentIndex;if(n<r.currentIndex?f=r.currentIndex-1:n===r.currentIndex&&p.length>0&&(f=Math.min(r.currentIndex,p.length-1)),r.currentTrack){const d=p.findIndex(w=>{var g;return w.Id===((g=r.currentTrack)==null?void 0:g.Id)});d>=0&&(f=d)}return{queue:p,originalQueue:c,shuffledOrder:a,recommendations:u,currentIndex:f,manuallyCleared:p.length===0?!0:r.manuallyCleared}})},clearQueue:()=>{e({queue:[],originalQueue:[],shuffledOrder:[],recommendations:[],previousSongs:[],playedSongIds:[],collectionStartIndex:-1,currentIndex:-1,manuallyCleared:!0})},play:()=>{const n=t().audioElement,r=t().currentTrack;if(n&&r){if(!n.src){const s=z.serverBaseUrl,o=s?`${s}/Audio/${r.Id}/stream?static=true`:"";n.src=o,n.load()}n.play().then(()=>{e({isPlaying:!0}),r&&Ur(r.Id,()=>t().currentTrack)}).catch(s=>{console.error("Playback error:",s),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const{queue:n,currentIndex:r,repeat:s,shuffle:o,currentTrack:i}=t();if(n.length===0)return;let c=r+1;if(r===-1&&n.length>0){if(!i&&n.length>1)c=1;else if(i){const h=n.findIndex(p=>p.Id===i.Id);h>=0&&(c=h+1)}}if(c>=n.length)if(s==="all")c=0;else return;if(o&&c<n.length){const h=n[c];if(h&&h._isRecommended){const f=n.filter(N=>!N._isRecommended),{playedSongIds:d}=t(),w=new Set(d);if(f.filter(N=>{var v;return!w.has(N.Id)&&N.Id!==((v=t().currentTrack)==null?void 0:v.Id)}).length>0){let N=-1;N=n.findIndex((v,x)=>{var y;return x>r&&!v._isRecommended&&!w.has(v.Id)&&v.Id!==((y=t().currentTrack)==null?void 0:y.Id)}),N===-1&&(N=n.findIndex((v,x)=>{var y;return!v._isRecommended&&!w.has(v.Id)&&v.Id!==((y=t().currentTrack)==null?void 0:y.Id)})),N>=0&&(c=N)}}}e(h=>{const p=[...h.queue],f=[...h.previousSongs];let d=[...h.playedSongIds],w=[...h.originalQueue],g=c;if(o){let v=h.currentIndex;if(v<0&&h.currentTrack&&(v=p.findIndex(x=>{var y;return x.Id===((y=h.currentTrack)==null?void 0:y.Id)})),v>=0&&v<p.length){const x=p[v];x&&(f.some(y=>y.Id===x.Id)||(f.unshift(x),f.length>10&&f.pop()),d.includes(x.Id)||d.push(x.Id))}if(v>=0&&c!==v+1&&c!==0){const x=Math.min(v+1,c),y=Math.max(v+1,c);for(let S=x;S<y&&S<p.length;S++){const C=p[S];C&&!d.includes(C.Id)&&d.push(C.Id)}}g=c}else if(h.currentIndex>=0&&h.currentIndex<p.length){const v=p.length===1,x=s==="all"&&c===0&&h.currentIndex===p.length-1,y=p[h.currentIndex];if(!v||!x){if(y){f.unshift(y),f.length>10&&f.pop();const S=w.findIndex(C=>C.Id===y.Id);S>=0&&w.splice(S,1)}p.splice(h.currentIndex,1),h.currentIndex<c?g=c-1:h.currentIndex===c&&c>=p.length&&(g=s==="all"?0:Math.max(0,p.length-1))}}g>=p.length&&(g=s==="all"&&p.length>0?0:Math.max(0,p.length-1)),g<0&&(g=0);const N=p.filter((v,x)=>v._isRecommended&&x>g);return{queue:p,originalQueue:w,previousSongs:f,playedSongIds:d,currentIndex:g,recommendations:N}});const a=t(),u=a.queue[a.currentIndex];u?(t().setCurrentTrack(u),t().play()):console.error("[Shuffle] next() - trackToPlay is null! This is the stuck state.",{currentIndex:a.currentIndex,queueLength:a.queue.length,queue:a.queue})},previous:()=>{const{queue:n,previousSongs:r,currentIndex:s,currentTrack:o}=t();if(r.length>0&&(s<=0||n.length===0)){const a=r[0];a&&(e(u=>{const h=[...u.queue],p=[...u.previousSongs];let f=[...u.originalQueue];const d=p.shift();return h.unshift(d),f.some(w=>w.Id===d.Id)||f.unshift(d),{queue:h,originalQueue:f,previousSongs:p,currentIndex:0}}),t().setCurrentTrack(a),t().play());return}if(n.length===0)return;let i=s-1;i<0&&(i=n.length-1);const c=n[i];c?(e({currentIndex:i}),t().setCurrentTrack(c),t().play()):console.error("[Shuffle] previous() - prevTrack is null! This is the stuck state.",{prevIndex:i,currentIndex:s,queueLength:n.length,queue:n})},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n}))},setCurrentTime:n=>{e({currentTime:n})},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n)},toggleShuffle:()=>{e(n=>{const r=!n.shuffle,s=n.currentTrack;if(r){let o=-1;s&&(o=n.originalQueue.findIndex(u=>u.Id===s.Id));let i;if(o>=0){let u,h=[];if(n.collectionStartIndex>0){u=n.originalQueue.slice(n.collectionStartIndex);const p=u.findIndex(f=>f.Id===s.Id);if(p>=0){h=u.slice(0,p+1);const f=u.slice(p+1),d=Qt(f);i=[...h,...d]}else i=Qt(u)}else{h=n.originalQueue.slice(0,o+1);const p=n.originalQueue.slice(o+1),f=Qt(p);i=[...h,...f]}}else n.originalQueue.length>0?i=Qt(n.originalQueue):i=[];const c=[...i,...n.recommendations];console.log("[toggleShuffle] Final shuffled queue:",{finalQueueLength:c.length,shuffledSongs:i.length,recommendations:n.recommendations.length});let a=n.currentIndex;if(s){const u=c.findIndex(h=>h.Id===s.Id);u>=0&&(a=u)}return{shuffle:r,shuffledOrder:i,queue:c,currentIndex:a}}else{let o=n.originalQueue;n.collectionStartIndex>0&&(o=n.originalQueue.slice(n.collectionStartIndex));const i=[...o,...n.recommendations];let c=0;if(s){const a=i.findIndex(u=>u.Id===s.Id);a>=0&&(c=a)}return{shuffle:r,queue:i,shuffledOrder:[...o],currentIndex:c,playedSongIds:[]}}})},toggleRepeat:()=>{e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{const s=t().queue,o=t().shuffle,i=s.some(N=>N.Id===n.Id),c=r||[n],a=r?[...c].sort((N,v)=>{const x=N.ParentIndexNumber??1,y=v.ParentIndexNumber??1;if(x!==y)return x-y;const S=N.IndexNumber??0,C=v.IndexNumber??0;return S-C}):c,u=a.findIndex(N=>N.Id===n.Id);let h,p=[],f=-1;r&&r.length>1?o?(h=a,f=u):(h=a.slice(u),p=a.slice(0,u).reverse(),f=0):(h=a,f=-1);const d=h.map(N=>({...N,_isRecommended:!1})),w=d.findIndex(N=>N.Id===n.Id);e({queue:d,originalQueue:[...d],shuffledOrder:[...d],recommendations:[],collectionStartIndex:f,currentIndex:w>=0?w:0,manuallyCleared:!1,previousSongs:i?t().previousSongs:p});const g=t().audioElement;if(g){const N=z.serverBaseUrl,v=N?`${N}/Audio/${n.Id}/stream?static=true`:"";g.src=v,g.load(),t().setCurrentTrack(n),g.play().then(()=>{e({isPlaying:!0}),Ur(n.Id,()=>t().currentTrack)}).catch(x=>{console.error("Playback error:",x),e({isPlaying:!1})})}},playAlbum:n=>{if(n.length===0)return;const r=[...n],s=r.map(c=>({...c,_isRecommended:!1})),o=r[0];e({queue:s,originalQueue:[...s],shuffledOrder:[...s],recommendations:[],collectionStartIndex:0,currentIndex:0,manuallyCleared:!1,previousSongs:[],playedSongIds:[],shuffle:!1});const i=t().audioElement;if(i){const c=z.serverBaseUrl,a=c?`${c}/Audio/${o.Id}/stream?static=true`:"";i.src=a,i.load(),t().setCurrentTrack(o),i.play().then(()=>{e({isPlaying:!0}),Ur(o.Id,()=>t().currentTrack)}).catch(u=>{console.error("Playback error:",u),e({isPlaying:!1})})}},playNext:n=>{n.length!==0&&e(r=>{const s=n.map(p=>({...p,_isRecommended:!1})),o=r.currentIndex;let i,c,a,u=o;const h=o>=0&&o<r.originalQueue.length?o+1:r.originalQueue.length;if(c=[...r.originalQueue],c.splice(h,0,...s),n.length===1)if(r.shuffle){const p=r.shuffledOrder.findIndex(f=>{var d;return f.Id===((d=r.currentTrack)==null?void 0:d.Id)});if(p>=0){const f=r.shuffledOrder.slice(0,p+1),d=r.shuffledOrder.slice(p+1);a=[...f,...s,...d]}else a=[...r.shuffledOrder,...s];i=[...a,...r.recommendations]}else a=[...c],i=[...c,...r.recommendations];else if(r.shuffle){const p=Qt(s),f=r.shuffledOrder.findIndex(d=>{var w;return d.Id===((w=r.currentTrack)==null?void 0:w.Id)});if(f>=0){const d=r.shuffledOrder.slice(0,f+1),w=r.shuffledOrder.slice(f+1);a=[...d,...p,...w]}else a=[...r.shuffledOrder,...p];i=[...a,...r.recommendations]}else a=[...c],i=[...c,...r.recommendations];if(r.currentTrack){const p=i.findIndex(f=>{var d;return f.Id===((d=r.currentTrack)==null?void 0:d.Id)});p>=0&&(u=p)}return{queue:i,originalQueue:c,shuffledOrder:a,currentIndex:u,manuallyCleared:!1}})},shuffleArtist:n=>{if(n.length===0)return;const r=Qt(n),s=r.map(c=>({...c,_isRecommended:!1})),o=r[0];e({queue:s,originalQueue:[...s],shuffledOrder:[...s],recommendations:[],currentIndex:0,manuallyCleared:!1,previousSongs:[],playedSongIds:[],shuffle:!1});const i=t().audioElement;if(i){const c=z.serverBaseUrl,a=c?`${c}/Audio/${o.Id}/stream?static=true`:"";i.src=a,i.load(),t().setCurrentTrack(o),i.play().then(()=>{e({isPlaying:!0}),Ur(o.Id,()=>t().currentTrack)}).catch(u=>{console.error("Playback error:",u),e({isPlaying:!1})})}},reorderQueue:(n,r)=>{e(s=>{const o=[...s.queue],[i]=o.splice(n,1);let c=r;n<r&&(c=Math.max(0,r-1)),o.splice(c,0,i);let a=[];if(s.shuffle){const h=new Map(s.originalQueue.map(p=>[p.Id,p]));for(const p of o){const f=h.get(p.Id);f&&a.push(f)}for(const p of s.originalQueue)o.some(f=>f.Id===p.Id)||a.push(p)}else a=[...o];let u=s.currentIndex;return s.currentIndex===n?u=c:n<s.currentIndex&&r>=s.currentIndex?u=s.currentIndex-1:n>s.currentIndex&&r<=s.currentIndex&&(u=s.currentIndex+1),{queue:o,originalQueue:a,currentIndex:u}})},skipToTrack:n=>{const{queue:r,originalQueue:s}=t();if(n<0||n>=r.length)return;const o=r.slice(n),i=o[0];let c=[...s];if(i){const h=c.findIndex(p=>p.Id===i.Id);h>=0&&(c=c.slice(h))}const a=o.filter((h,p)=>h._isRecommended&&p>0);e({queue:o,originalQueue:c,recommendations:a,currentIndex:0,manuallyCleared:!1,previousSongs:[]});const u=t().audioElement;if(u&&i){const h=z.serverBaseUrl,p=h?`${h}/Audio/${i.Id}/stream?static=true`:"";u.src=p,u.load(),e({currentTrack:i,lastPlayedTrack:i}),u.play().then(()=>{e({isPlaying:!0}),Ur(i.Id,()=>t().currentTrack)}).catch(f=>{console.error("Playback error:",f),e({isPlaying:!1})})}},refreshCurrentTrack:async()=>{const n=t().currentTrack;if(n!=null&&n.Id)try{const r=await z.getSongById(n.Id);if(r){e({currentTrack:r});const s=t().queue,o=t().originalQueue,i=s.findIndex(a=>a.Id===n.Id),c=o.findIndex(a=>a.Id===n.Id);if(i>=0||c>=0){const a=i>=0?[...s]:s,u=c>=0?[...o]:o;i>=0&&(a[i]={...a[i],...r}),c>=0&&(u[c]={...u[c],...r}),e({queue:a,originalQueue:u})}}}catch(r){console.error("Failed to refresh current track:",r)}}}),{name:"player-storage",partialize:e=>({volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,currentTrack:e.currentTrack,currentIndex:e.currentIndex,queue:e.queue,originalQueue:e.originalQueue,shuffledOrder:e.shuffledOrder,previousSongs:e.previousSongs,playedSongIds:e.playedSongIds,collectionStartIndex:e.collectionStartIndex,manuallyCleared:e.manuallyCleared}),onRehydrateStorage:()=>e=>{e&&(e.isPlaying=!1,e.currentTime=0,e.duration=0,e.isFetchingRecommendations=!1,e.audioElement=null)}}));function at({src:e,alt:t,className:n="",fallback:r,style:s,showOutline:o,rounded:i="rounded",onError:c}){const[a,u]=m.useState(e),[h,p]=m.useState(!1),[f,d]=m.useState(!1);m.useEffect(()=>{u(e),p(!1),d(!1)},[e]);const w=()=>{!h&&r?(u(r),p(!0)):c?(c(),d(!0)):u('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="300"%3E%3Crect fill="%23333" width="300" height="300"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="20" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3ENo Image%3C/text%3E%3C/svg%3E')};return f?null:l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("img",{src:a,alt:t,className:`block ${n}`,onError:w,loading:"lazy",style:s}),o&&l.jsx("div",{className:`absolute inset-0 pointer-events-none border ${i}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function on(){return l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function Va({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,o]=m.useState(!1),[i,c]=m.useState(!1);if(m.useEffect(()=>{if(e)o(!1),c(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0)})}),document.body.style.overflow="hidden";else{o(!1);const u=setTimeout(()=>{c(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(u),document.body.style.overflow=""}}},[e]),!i)return null;const a=l.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[l.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),l.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out ${s?"translate-y-0":"translate-y-full"}`,onClick:u=>u.stopPropagation(),children:l.jsx("div",{className:"pb-safe pt-4",children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})})]});return Jn.createPortal(a,document.body)}const so=As((e,t)=>({state:"idle",source:null,message:null,abortController:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null})}}));function Qe({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:o,mode:i="mobile",position:c}){const a=Be(),[u,h]=m.useState(!1),[p,f]=m.useState(null),{playTrack:d,playAlbum:w,addToQueue:g,playNext:N,shuffleArtist:v,toggleShuffle:x}=ve(),{startSync:y,completeSync:S}=so(),{genres:C}=Ee();if(!e||!t)return null;const I=F=>{if(!F)return null;const ne=C.find(ie=>{var me;return((me=ie.Name)==null?void 0:me.toLowerCase())===F.toLowerCase()});return(ne==null?void 0:ne.Id)||null},A=async F=>{var ne,ie,me,se,fe;if(e){if(F.startsWith("goTo")){if(r(),o&&o(),F==="goToArtist"){const D=((ie=(ne=e.ArtistItems)==null?void 0:ne[0])==null?void 0:ie.Id)||((se=(me=e.AlbumArtists)==null?void 0:me[0])==null?void 0:se.Id);D&&a(`/artist/${D}`)}else if(F==="goToAlbum")e.AlbumId&&a(`/album/${e.AlbumId}`);else if(F==="goToGenre"){const D=(fe=e.Genres)==null?void 0:fe[0];if(D){const j=I(D);if(j)a(`/genre/${j}`);else{const L=(await z.getGenres()).find(V=>{var T;return((T=V.Name)==null?void 0:T.toLowerCase())===D.toLowerCase()});L!=null&&L.Id&&a(`/genre/${L.Id}`)}}}return}h(!0),f(F);try{switch(t){case"album":{if(F==="play"){const D=await z.getAlbumTracks(e.Id),{shuffle:j}=ve.getState();j&&x(),w(D)}else if(F==="shuffle"){const D=await z.getAlbumTracks(e.Id),{shuffle:j}=ve.getState();j&&x(),w(D),requestAnimationFrame(()=>{const{shuffle:P}=ve.getState();P||x()})}else if(F==="playNext"){const D=await z.getAlbumTracks(e.Id);N(D)}else if(F==="addToQueue"){const D=await z.getAlbumTracks(e.Id);g(D)}else if(F==="sync"){y("context-menu",`Syncing ${e.Name}...`);try{await z.getAlbumTracks(e.Id),S(!0,`${e.Name} synced`)}catch{S(!1,`Failed to sync ${e.Name}`)}}break}case"song":{if(F==="play")d(e);else if(F==="playNext")N([e]);else if(F==="addToQueue")g([e]);else if(F==="sync"){y("context-menu",`Syncing ${e.Name}...`);try{await z.getSongById(e.Id),S(!0,`${e.Name} synced`)}catch{S(!1,`Failed to sync ${e.Name}`)}}break}case"artist":{if(F==="shuffle"){const{songs:D}=await z.getArtistItems(e.Id);v(D)}else if(F==="playNext"){const{songs:D}=await z.getArtistItems(e.Id);N(D)}else if(F==="addToQueue"){const{songs:D}=await z.getArtistItems(e.Id);g(D)}else if(F==="sync"){y("context-menu",`Syncing ${e.Name}...`);try{await z.getArtistItems(e.Id),S(!0,`${e.Name} synced`)}catch{S(!1,`Failed to sync ${e.Name}`)}}break}case"playlist":{if(F==="play"){const D=await z.getAlbumTracks(e.Id),{shuffle:j}=ve.getState();j&&x(),w(D)}else if(F==="shuffle"){const D=await z.getAlbumTracks(e.Id),{shuffle:j}=ve.getState();j&&x(),w(D),requestAnimationFrame(()=>{const{shuffle:P}=ve.getState();P||x()})}else if(F==="playNext"){const D=await z.getAlbumTracks(e.Id);N(D)}else if(F==="addToQueue"){const D=await z.getAlbumTracks(e.Id);g(D)}break}}r()}catch(D){console.error("Context menu action failed:",D)}finally{h(!1),f(null)}}},Y=(()=>{var F,ne,ie,me,se,fe,D,j;switch(t){case"album":{const P=((ne=(F=e.ArtistItems)==null?void 0:F[0])==null?void 0:ne.Name)||((me=(ie=e.AlbumArtists)==null?void 0:ie[0])==null?void 0:me.Name)||"Artist",L=((se=e.Genres)==null?void 0:se[0])||"Genre";return[{id:"play",label:"Play",icon:nt},{id:"shuffle",label:"Shuffle",icon:bn},{id:"playNext",label:"Play Next",icon:Xs},{id:"addToQueue",label:"Add to Queue",icon:Ut},{id:"goToArtist",label:`Go to ${P}`,icon:st},{id:"goToGenre",label:`Go to ${L}`,icon:Yn},{id:"sync",label:"Sync",icon:ts}]}case"song":{const P=((D=(fe=e.ArtistItems)==null?void 0:fe[0])==null?void 0:D.Name)||e.AlbumArtist||"Artist",L=e.Album||"Album",V=((j=e.Genres)==null?void 0:j[0])||"Genre";return[{id:"play",label:"Play",icon:nt},{id:"playNext",label:"Play Next",icon:Xs},{id:"addToQueue",label:"Add to Queue",icon:Ut},{id:"goToArtist",label:`Go to ${P}`,icon:st},{id:"goToAlbum",label:`Go to ${L}`,icon:Ve},{id:"goToGenre",label:`Go to ${V}`,icon:Yn},{id:"sync",label:"Sync",icon:ts}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:bn},{id:"playNext",label:"Play Next",icon:Xs},{id:"addToQueue",label:"Add to Queue",icon:Ut},{id:"sync",label:"Sync",icon:ts}];case"playlist":return[{id:"play",label:"Play",icon:nt},{id:"shuffle",label:"Shuffle",icon:bn},{id:"playNext",label:"Play Next",icon:Xs},{id:"addToQueue",label:"Add to Queue",icon:Ut}];default:return[]}})(),_=e.Name||"Unknown";if(i==="desktop"&&n){const ne=Math.min(400,Y.length*44+8);let ie=(c==null?void 0:c.x)||100,me=(c==null?void 0:c.y)||100;return ie+240>window.innerWidth&&(ie=window.innerWidth-240-10),me+ne>window.innerHeight&&(me=window.innerHeight-ne-10),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),l.jsx("div",{className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:ie,top:me,zIndex:s},onClick:se=>se.stopPropagation(),children:l.jsx("div",{className:"space-y-0",children:Y.map(se=>{const fe=se.icon,D=u&&p===se.id;return l.jsxs("button",{onClick:()=>A(se.id),disabled:u,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[l.jsx(fe,{className:"w-4 h-4 text-white flex-shrink-0"}),l.jsx("span",{className:"flex-1 text-sm text-white",children:se.label}),D&&l.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},se.id)})})})]})}return l.jsx(Va,{isOpen:n,onClose:r,zIndex:s,children:l.jsxs("div",{className:"pb-6",children:[l.jsx("div",{className:"mb-4 ml-4",children:l.jsx("div",{className:"text-lg font-semibold text-white break-words",children:_})}),l.jsx("div",{className:"space-y-1",children:Y.map(F=>{const ne=F.icon,ie=u&&p===F.id;return l.jsxs("button",{onClick:()=>A(F.id),disabled:u,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(ne,{className:"w-5 h-5 text-white"}),l.jsx("span",{className:"flex-1 text-left text-white font-medium",children:F.label}),ie&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},F.id)})})]})})}function Ae({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=m.useRef(null),o=m.useRef(null),i=m.useRef(!1),c=m.useRef(null),a=m.useRef(!1),u=m.useCallback(f=>{f.preventDefault(),i.current=!1,a.current=!1,o.current=f.target,"touches"in f&&f.touches.length>0?c.current={x:f.touches[0].clientX,y:f.touches[0].clientY}:c.current=null,s.current=setTimeout(()=>{a.current||(i.current=!0,e(f))},n)},[e,n]),h=m.useCallback(f=>{if(!c.current||f.touches.length===0)return;const d=f.touches[0].clientX,w=f.touches[0].clientY,g=Math.abs(d-c.current.x),N=Math.abs(w-c.current.y);Math.sqrt(g*g+N*N)>r&&(a.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),p=m.useCallback(f=>{const d=i.current;s.current&&(clearTimeout(s.current),s.current=null),t&&o.current===f.target&&!d&&!a.current&&t(f),i.current=!1,a.current=!1,o.current=null,c.current=null},[t]);return{onMouseDown:u,onTouchStart:u,onTouchMove:h,onMouseUp:p,onMouseLeave:f=>{s.current&&(clearTimeout(s.current),s.current=null),i.current=!1,a.current=!1,o.current=null,c.current=null},onTouchEnd:p}}function zo({track:e,index:t,isCurrent:n,isPlaying:r,showRemoveButton:s=!0,onClick:o,onRemove:i,onReorderDragStart:c,onReorderDrop:a,onContextMenu:u,isDragOver:h,onDragEnterRow:p}){var d,w;const f=Ae({onLongPress:g=>{g.preventDefault(),u(e)}});return l.jsxs("div",{draggable:!n,onDragOver:g=>{g.preventDefault(),g.dataTransfer.dropEffect="move"},onDragEnter:g=>{g.preventDefault(),n||p(t)},onDrop:g=>!n&&a(g,t),className:`queue-row flex items-center gap-3 p-3 ${n?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${n?"bg-zinc-900":""} relative`,onClick:n?void 0:o,onContextMenu:g=>{g.preventDefault(),u(e)},children:[h&&!n&&l.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),l.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:l.jsx(at,{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0",...f,children:[l.jsx("div",{className:`text-sm font-medium truncate ${n?"text-[var(--accent-color)]":"text-white"}`,children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((w=(d=e.ArtistItems)==null?void 0:d[0])==null?void 0:w.Name)||"Unknown Artist"})]}),n?l.jsx("button",{onClick:g=>{g.stopPropagation(),o()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2",children:r?l.jsx(nn,{className:"w-5 h-5"}):l.jsx(nt,{className:"w-5 h-5"})}):l.jsx(l.Fragment,{children:s&&l.jsxs(l.Fragment,{children:[l.jsx("button",{draggable:!0,onDragStart:g=>c(g,t),className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing",children:l.jsx(Bx,{className:"w-4 h-4"})}),i&&l.jsx("button",{onClick:g=>{g.stopPropagation(),i()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]},`${e.Id}-${t}`)}function A0({onClose:e,onNavigateFromContextMenu:t}){const n=m.useRef(null),[r,s]=m.useState(!1),[o,i]=m.useState(null),[c,a]=m.useState(null),[u,h]=m.useState(null),{queue:p,previousSongs:f,playedSongIds:d,currentIndex:w,currentTrack:g,playTrack:N,removeFromQueue:v,reorderQueue:x,setQueue:y,clearQueue:S,isPlaying:C,shuffle:I,repeat:A,togglePlayPause:k,toggleShuffle:Y,toggleRepeat:_,next:F,previous:ne,skipToTrack:ie,isFetchingRecommendations:me}=ve(),se=(R,O)=>{R.dataTransfer.effectAllowed="move",R.dataTransfer.setData("text/plain",O.toString()),h(O);const E=R.currentTarget,$=E==null?void 0:E.closest(".queue-row");if($&&R.dataTransfer.setDragImage){const ee=$.querySelector(".queue-drag-art")??$,ce=ee.getBoundingClientRect();R.dataTransfer.setDragImage(ee,ce.width/2,ce.height/2)}},fe=(R,O)=>{R.preventDefault();const E=R.dataTransfer.getData("text/plain")||R.dataTransfer.getData("text/html"),$=parseInt(E,10);if(Number.isNaN($))return;const ee=p[u??$],ce=p[O],oe=ee?!!ee._isRecommended:!1,ge=ce?!!ce._isRecommended:!1;if(ee&&ce&&oe!==ge){a(null),h(null);return}$!==O&&x($,O),a(null),h(null)},D=g||(w>=0&&w<p.length?p[w]:null),j=w>=0&&w<p.length?w:D?p.findIndex(R=>R.Id===D.Id):-1,P=new Set(d),L=D==null?void 0:D.Id,V=p.filter((R,O)=>{const $=!R._isRecommended,X=O!==w&&R.Id!==L,ee=!P.has(R.Id)||R.Id===L;return $&&X&&ee}),T=V,le=p.filter((R,O)=>{if(!R._isRecommended)return R.Id===L,!1;if(R.Id===L)return!1;const $=j===-1?!0:O>j,X=!P.has(R.Id);return $&&X}),W=le.length>0,he=()=>{const{clearQueue:R}=ve.getState();R()},pe=j>=0&&j<p.length-1,M=j>0&&j<p.length||f.length>0;p.length===0||V.length;const H=R=>{i(R),s(!0)},U=R=>{if(u==null)return;const O=p[u],E=p[R];if(!O||!E)return;const $=!!O._isRecommended,X=!!E._isRecommended;if($!==X){a(null);return}a(R)};return l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 max-w-[768px] mx-auto w-full",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[l.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{paddingBottom:"8rem"},children:p.length===0&&!D?l.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:l.jsx("p",{children:"Queue is empty"})}):l.jsxs("div",{children:[D&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 pb-0 pt-3 text-lg font-semibold text-white tracking-wider",children:"Now Playing"}),l.jsx(zo,{track:D,index:w>=0?w:-1,isCurrent:!0,isPlaying:C,showRemoveButton:!1,onClick:()=>{k()},onReorderDragStart:se,onReorderDrop:fe,onContextMenu:H,isDragOver:!1,onDragEnterRow:U})]}),(T.length>0||W)&&l.jsx("div",{children:l.jsxs("div",{className:"px-4 pb-0 pt-3 flex items-center justify-between",children:[l.jsx("div",{className:"text-lg font-semibold text-white tracking-wider",children:"Queue"}),l.jsx("button",{onClick:he,className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]})}),T.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 pb-0 pt-4 text-xs font-semibold text-gray-400 tracking-wider",children:"Added By You"}),T.map(R=>{const O=p.findIndex(E=>E.Id===R.Id);return l.jsx(zo,{track:R,index:O,isCurrent:!1,isPlaying:C,showRemoveButton:!0,onClick:()=>{ie(O)},onRemove:()=>{v(O)},onReorderDragStart:se,onReorderDrop:fe,onContextMenu:H,isDragOver:c===O,onDragEnterRow:U},`${R.Id}-${O}`)})]}),W&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 pb-0 pt-4 text-xs font-semibold text-gray-400 tracking-wider",children:"Recommendations"}),le.map(R=>{const O=p.findIndex($=>$.Id===R.Id),E=O>=0?O:-1;return l.jsx(zo,{track:R,index:E,isCurrent:!1,isPlaying:C,showRemoveButton:!0,onClick:()=>{E>=0&&ie(E)},onRemove:()=>{E>=0&&v(E)},onReorderDragStart:se,onReorderDrop:fe,onContextMenu:H,isDragOver:c===E,onDragEnterRow:U},`${R.Id}-${E}`)})]}),me&&l.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:l.jsx(on,{})})]})}),l.jsx(Qe,{item:o,itemType:o?"song":null,isOpen:r,onClose:()=>{s(!1),i(null)},onNavigate:t}),l.jsx("div",{ref:n,className:"px-6 pt-2 space-y-6 flex-shrink-0",style:{paddingBottom:"1.5rem"},children:l.jsxs("div",{className:"flex items-center justify-center gap-8",children:[l.jsx("button",{onClick:Y,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${I?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(bn,{className:"w-6 h-6"})}),l.jsx("button",{onClick:ne,disabled:!M,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${M?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:l.jsx(Qa,{className:"w-8 h-8"})}),l.jsx("button",{onClick:k,className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:C?l.jsx(nn,{className:"w-8 h-8"}):l.jsx(nt,{className:"w-8 h-8"})}),l.jsx("button",{onClick:F,disabled:!pe,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${pe?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:l.jsx(Dl,{className:"w-8 h-8"})}),l.jsx("button",{onClick:_,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${A!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:A==="one"?l.jsx(Ha,{className:"w-6 h-6"}):l.jsx(Ga,{className:"w-6 h-6"})})]})})]})}function E0({onClose:e}){const{currentTrack:t,lastPlayedTrack:n}=ve(),r=t||n,[s,o]=m.useState(null),[i,c]=m.useState(!1);return m.useEffect(()=>{(async()=>{if(!r){o(null);return}c(!0);try{const u=await z.getLyrics(r.Id);o(u)}catch(u){console.error("Failed to fetch lyrics:",u),o(null)}finally{c(!1)}})()},[r]),r?l.jsx("div",{className:"fixed left-0 right-0 bg-zinc-900 z-[55] flex flex-col",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:l.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 px-6 py-4 relative",children:[l.jsx("div",{className:"sticky left-0 right-0 h-16 bg-gradient-to-b from-zinc-900 via-zinc-900/50 to-transparent pointer-events-none z-10 -mx-6",style:{top:"-24px"}}),i?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"text-gray-400",children:"Loading lyrics..."})}):s?l.jsx("div",{className:"max-w-[768px] mx-auto pb-8",children:l.jsx("div",{className:"text-white text-left whitespace-pre-line leading-relaxed",children:s.split(`
`).map((a,u)=>l.jsx("div",{className:"mb-2",children:a},u))})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"text-gray-400 text-center",children:"This song has no lyrics"})}),l.jsx("div",{className:"sticky left-0 right-0 h-16 bg-gradient-to-t from-zinc-900 via-zinc-900/50 to-transparent pointer-events-none z-10 -mx-6",style:{bottom:"-16px"}})]})}):null}function P0({onClose:e,onClosingStart:t,closeRef:n}){const r=Be(),{currentTrack:s,lastPlayedTrack:o,isPlaying:i,currentTime:c,duration:a,shuffle:u,repeat:h,togglePlayPause:p,next:f,previous:d,seek:w,setVolume:g,toggleShuffle:N,toggleRepeat:v,queue:x,previousSongs:y,currentIndex:S,playTrack:C}=ve(),I=s||o,[A,k]=m.useState(!1),[Y,_]=m.useState(!1),[F,ne]=m.useState(!1),[ie,me]=m.useState(!1),[se,fe]=m.useState(!1),[D,j]=m.useState(!1),P=m.useRef(null),L=m.useRef(null),V=m.useRef(null),T=m.useRef(null),le=m.useRef(!1),W=m.useRef(null);m.useEffect(()=>{const K=window.getComputedStyle(document.body).overflowY,re=window.getComputedStyle(document.documentElement).overflowY,de=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const J=document.getElementById("root");return J&&(J.style.overflowY="hidden"),()=>{document.body.style.overflowY=K,document.documentElement.style.overflowY=re,J&&(J.style.overflowY=de!=="N/A"?de:"")}},[]),m.useEffect(()=>{requestAnimationFrame(()=>{fe(!0)})},[]);const he=S>=0&&S<x.length?S:s?x.findIndex(K=>K.Id===s.Id):-1,pe=he>=0&&he<x.length-1,M=he>0&&he<x.length||y.length>0;m.useEffect(()=>{g(1)},[g]),m.useEffect(()=>{(async()=>{if(!I){ne(!1);return}try{const re=await z.getLyrics(I.Id),de=re!==null&&re.trim().length>0;ne(de)}catch(re){console.warn("[PlayerModal] Lyrics check failed:",re),ne(!1)}})()},[I]);const H=K=>{if(!K)return"Unknown";if(K.Name&&K.Name.trim())return K.Name;const re=K.Path;return re&&typeof re=="string"&&(re.split("/").pop()||re.split("\\").pop())||"Unknown"},U=K=>{var re,de;return K&&(K.AlbumArtist||((de=(re=K.ArtistItems)==null?void 0:re[0])==null?void 0:de.Name))||""};if(m.useEffect(()=>{"mediaSession"in navigator&&I&&(navigator.mediaSession.metadata=new MediaMetadata({title:H(I),artist:U(I),album:I.Album||"",artwork:[{src:z.getAlbumArtUrl(I.AlbumId||I.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",p),navigator.mediaSession.setActionHandler("pause",p),navigator.mediaSession.setActionHandler("previoustrack",d),navigator.mediaSession.setActionHandler("nexttrack",f))},[I,i,p,f,d]),m.useEffect(()=>{j(!1)},[I==null?void 0:I.Id]),!I)return null;const R=a>0?c/a*100:0,O=K=>{const re=Math.floor(K/60),de=Math.floor(K%60);return`${re}:${de.toString().padStart(2,"0")}`},E=()=>{if(I.Name&&I.Name.trim())return I.Name;const K=I.Path;return K&&typeof K=="string"&&(K.split("/").pop()||K.split("\\").pop())||"Unknown"},$=()=>{var K,re;return I.AlbumArtist||((re=(K=I.ArtistItems)==null?void 0:K[0])==null?void 0:re.Name)},X=I.AlbumId&&I.Album&&I.Album.trim(),ee=K=>{if(!P.current||!a||le.current)return;const re=P.current.getBoundingClientRect(),de=(K.clientX-re.left)/re.width;w(Math.max(0,Math.min(1,de))*a)},ce=K=>{if(!P.current||!a)return;le.current=!0,W.current=K.clientX;const re=P.current.getBoundingClientRect(),de=(K.clientX-re.left)/re.width;w(Math.max(0,Math.min(1,de))*a)},oe=()=>{le.current=!1,W.current=null},ge=K=>{if(!P.current||!a)return;K.stopPropagation(),le.current=!0;const re=K.touches[0],de=P.current.getBoundingClientRect(),J=(re.clientX-de.left)/de.width;w(Math.max(0,Math.min(1,J))*a)},b=K=>{if(!le.current||!P.current||!a)return;K.stopPropagation(),K.preventDefault();const re=K.touches[0],de=P.current.getBoundingClientRect(),J=(re.clientX-de.left)/de.width;w(Math.max(0,Math.min(1,J))*a)},G=K=>{K.stopPropagation(),le.current=!1,W.current=null};m.useEffect(()=>{const K=de=>{if(!le.current||!P.current||!a)return;const J=P.current.getBoundingClientRect(),ye=(de.clientX-J.left)/J.width;w(Math.max(0,Math.min(1,ye))*a)},re=()=>{le.current&&(le.current=!1,W.current=null)};return document.addEventListener("mousemove",K),document.addEventListener("mouseup",re),()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",re)}},[a,w]);const B=()=>{me(!0),t==null||t(),setTimeout(()=>{e()},300)};m.useEffect(()=>(n&&(n.current=B),()=>{n&&(n.current=null)}),[n]);const q=K=>{A||Y||(L.current=K.touches[0].clientY,V.current=Date.now())},ue=K=>{if(A||Y||L.current===null)return;const de=K.touches[0].clientY-L.current;if(de>0&&T.current){const J=Math.min(de,window.innerHeight*.5);T.current.style.transform=`translateY(${J}px)`}},we=K=>{if(A||Y||L.current===null||V.current===null){L.current=null,V.current=null,T.current&&(T.current.style.transform="");return}const de=K.changedTouches[0].clientY-L.current,J=Date.now()-V.current,ye=50,Te=.3;T.current&&(T.current.style.transform="");const ke=de/J;(de>ye||de>30&&ke>Te)&&B(),L.current=null,V.current=null};return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }
    `}),l.jsxs("div",{ref:T,onTouchStart:q,onTouchMove:ue,onTouchEnd:we,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex flex-col transition-transform duration-300 ease-out ${ie?"translate-y-full":se?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:L.current===null?"transform 300ms ease-out":"none"},children:[l.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[l.jsx("button",{onClick:B,className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:l.jsx(Ua,{className:"w-8 h-8"})}),Y&&I&&l.jsx("h2",{className:"absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:E()}),l.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[F&&!A&&l.jsx("button",{onClick:()=>_(!Y),className:`transition-colors pr-2 ${Y?"text-[var(--accent-color)] hover:text-[var(--accent-color)]":"text-white hover:text-zinc-300"}`,children:l.jsx(r0,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>{A||_(!1),k(!A)},className:"text-white hover:text-zinc-300 transition-colors",children:A?l.jsx(v0,{className:"w-6 h-6"}):l.jsx(Zx,{className:"w-6 h-6"})})]})]}),A?l.jsx(A0,{onClose:()=>k(!1),onNavigateFromContextMenu:()=>{B()}}):l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 max-w-[768px] mx-auto w-full relative",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[l.jsx("div",{className:"flex-1 overflow-hidden min-h-0 flex items-center justify-center",children:l.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8",children:l.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[l.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:l.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 bg-zinc-900 ${D?"":"shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:D?l.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-zinc-900 flex items-center justify-center relative",children:l.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:K=>{console.error("Failed to load vinyl image"),K.currentTarget.style.display="none"}})}):l.jsx(at,{src:z.getAlbumArtUrl(I.AlbumId||I.Id),alt:I.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>j(!0)})})}),l.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[l.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:E()}),$()&&l.jsxs("button",{onClick:()=>{var re,de;const K=(de=(re=I.ArtistItems)==null?void 0:re[0])==null?void 0:de.Id;K&&(e(),r(`/artist/${K}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-gray-400 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[l.jsx(st,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("span",{className:"break-words min-w-0",children:$()})]}),X&&l.jsxs("button",{onClick:()=>{e(),r(`/album/${I.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-gray-400 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[l.jsx(Ve,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("span",{className:"break-words min-w-0",children:I.Album})]})]})]})})}),l.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[l.jsx("div",{className:"space-y-3 px-4 w-full",children:l.jsxs("div",{className:"max-w-[768px] mx-auto",children:[l.jsx("div",{ref:P,className:"h-2 bg-zinc-800 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:ee,onMouseDown:ce,onMouseUp:oe,onMouseLeave:oe,onTouchStart:ge,onTouchMove:b,onTouchEnd:G,children:l.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${R}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:R>=100?"9999px":"0",borderBottomRightRadius:R>=100?"9999px":"0"}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[l.jsx("span",{children:O(c)}),l.jsx("span",{children:O(a)})]})]})}),l.jsxs("div",{className:"flex items-center justify-center gap-8 px-6",children:[l.jsx("button",{onClick:N,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${u?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(bn,{className:"w-6 h-6"})}),l.jsx("button",{onClick:d,disabled:!M,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${M?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Qa,{className:"w-8 h-8"})}),l.jsx("button",{onClick:()=>{s?p():I&&C(I)},className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:i&&s?l.jsx(nn,{className:"w-8 h-8"}):l.jsx(nt,{className:"w-8 h-8"})}),l.jsx("button",{onClick:f,disabled:!pe,className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${pe?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Dl,{className:"w-8 h-8"})}),l.jsx("button",{onClick:v,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${h!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:h==="one"?l.jsx(Ha,{className:"w-6 h-6"}):l.jsx(Ga,{className:"w-6 h-6"})})]})]})]}),Y&&l.jsx(E0,{onClose:()=>_(!1)})]})]})}function T0(){var L,V;const{currentTrack:e,lastPlayedTrack:t,isPlaying:n,currentTime:r,duration:s,audioElement:o,setAudioElement:i,togglePlayPause:c,next:a,setCurrentTime:u,setDuration:h,playTrack:p,queue:f,currentIndex:d,repeat:w,shuffle:g,toggleShuffle:N,toggleRepeat:v,previous:x,previousSongs:y,seek:S}=ve(),[C,I]=m.useState(!1),[A,k]=m.useState(!1),[Y,_]=m.useState(!1),F=m.useRef(null),ne=m.useRef(null),ie=ln();m.useEffect(()=>{C&&(k(!0),setTimeout(()=>{I(!1),k(!1)},300))},[ie.pathname]),m.useEffect(()=>{const T=()=>{C&&ne.current&&ne.current()};return window.addEventListener("closePlayerModal",T),()=>{window.removeEventListener("closePlayerModal",T)}},[C]);const me=()=>{k(!0),setTimeout(()=>{I(!1),k(!1)},300)};m.useEffect(()=>{F.current||(F.current=new Audio,F.current.setAttribute("playsinline","true"),F.current.setAttribute("preload","auto"),i(F.current));const T=F.current;if(!T)return;const le=()=>{u(T.currentTime)},W=()=>{h(T.duration)},he=async()=>{var U;const H=ve.getState().queue;if(e&&((U=H.find(R=>R.Id===e.Id))==null||U._isRecommended),e)try{await z.markItemAsPlayed(e.Id),C0(e.Id),setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e.Id}}))},4e3)}catch{}a()},pe=()=>{ve.setState({isPlaying:!0})},M=()=>{ve.setState({isPlaying:!1})};return T.addEventListener("timeupdate",le),T.addEventListener("loadedmetadata",W),T.addEventListener("ended",he),T.addEventListener("play",pe),T.addEventListener("pause",M),()=>{T.removeEventListener("timeupdate",le),T.removeEventListener("loadedmetadata",W),T.removeEventListener("ended",he),T.removeEventListener("play",pe),T.removeEventListener("pause",M)}},[i,u,h,a]),m.useEffect(()=>{F.current&&(F.current.volume=ve.getState().volume)},[]),m.useEffect(()=>{const T=ve.getState();if(T.lastPlayedTrack&&!T.currentTrack&&T.queue.length===0){const le=T.lastPlayedTrack;ve.getState().setQueue([le]),ve.getState().setCurrentTrack(le),ve.setState({manuallyCleared:!1})}},[]),m.useEffect(()=>{if(o&&e&&!n){const T=z.serverBaseUrl,le=T?`${T}/Audio/${e.Id}/stream?static=true`:"";o.src!==le&&(o.src=le,o.load())}},[o,e,n]);const se=e||t;m.useEffect(()=>{_(!1)},[se==null?void 0:se.Id]);const fe=s>0?r/s*100:0,D=d>=0&&d<f.length?d:e?f.findIndex(T=>T.Id===e.Id):-1,j=f.length>0&&(d<0||d<f.length-1||w==="all"),P=D>0&&D<f.length||y.length>0;return se?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer",style:{bottom:"calc(4rem + env(safe-area-inset-bottom) - 8px)"},onClick:()=>{I(!0)},children:[l.jsxs("div",{className:"flex items-center gap-3 py-3 pr-3 pl-4",children:[!Y&&l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:l.jsx(at,{src:z.getAlbumArtUrl((e||se).AlbumId||(e||se).Id,96),alt:(e||se).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>_(!0)},(e==null?void 0:e.Id)||se.Id)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate",children:(e||se).Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:(e||se).AlbumArtist||((V=(L=(e||se).ArtistItems)==null?void 0:L[0])==null?void 0:V.Name)||"Unknown Artist"})]}),l.jsxs("div",{className:"flex items-center md:hidden",children:[l.jsx("button",{onClick:T=>{T.stopPropagation(),e?c():se&&p(se)},className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors ml-4",children:n&&e?l.jsx(nn,{className:"w-5 h-5"}):l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{onClick:T=>{T.stopPropagation(),j&&a()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ml-1 ${j?"text-white hover:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,disabled:!j,children:l.jsx(Dl,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-1 ml-4",children:[l.jsx("button",{onClick:T=>{T.stopPropagation(),N()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${g?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l.jsx(bn,{className:"w-5 h-5"})}),l.jsx("button",{onClick:T=>{T.stopPropagation(),P&&x()},disabled:!P,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${P?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Qa,{className:"w-5 h-5"})}),l.jsx("button",{onClick:T=>{T.stopPropagation(),e?c():se&&p(se)},className:"w-10 h-10 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&e?l.jsx(nn,{className:"w-5 h-5"}):l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{onClick:T=>{T.stopPropagation(),j&&a()},disabled:!j,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${j?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Dl,{className:"w-5 h-5"})}),l.jsx("button",{onClick:T=>{T.stopPropagation(),v()},className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${w!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:w==="one"?l.jsx(Ha,{className:"w-5 h-5"}):l.jsx(Ga,{className:"w-5 h-5"})})]})]}),se&&l.jsx("div",{className:"h-1 bg-zinc-800 hover:bg-zinc-600 cursor-pointer transition-colors duration-200",onClick:T=>{if(T.stopPropagation(),!s)return;const le=T.currentTarget.getBoundingClientRect(),W=(T.clientX-le.left)/le.width;S(Math.max(0,Math.min(1,W))*s)},onTouchStart:T=>{if(T.stopPropagation(),!s)return;const le=T.touches[0],W=T.currentTarget.getBoundingClientRect(),he=(le.clientX-W.left)/W.width;S(Math.max(0,Math.min(1,he))*s)},children:l.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${fe}%`}})})]}),C&&l.jsx(P0,{onClose:me,onClosingStart:()=>k(!0),closeRef:ne})]}):null}function M0(){const{state:e,message:t,cancelSync:n}=so();if(e==="idle")return null;const r=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}};return l.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${r()} transition-colors duration-300`,style:{height:"28px",top:"0px"},children:l.jsxs("div",{className:"max-w-[768px] mx-auto h-full flex items-center justify-between px-4",children:[l.jsx("span",{className:"text-white text-sm font-medium truncate",children:t}),e==="syncing"&&l.jsx("button",{onClick:n,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors",children:"Cancel"})]})})}async function R0({currentTrack:e,queue:t,recentQueue:n,lastPlayedTrack:r}){var o,i,c,a,u,h,p;const s=((i=(o=import.meta)==null?void 0:o.env)==null?void 0:i.DEV)??!1;if(!e)return s&&console.log("[Recommendations] No current track"),[];try{const f=e.Genres||[],d=e.ProductionYear||e.PremiereDate?new Date(e.PremiereDate||"").getFullYear():null;s&&(console.log("[Recommendations] ===== GENRE MATCHING DEBUG ====="),console.log("[Recommendations] Current track:",{name:e.Name,id:e.Id,genres:f,genresCount:f.length,year:d,albumArtist:e.AlbumArtist,artistItems:e.ArtistItems})),f.length===0&&s&&console.error("[Recommendations] Current track has no genres; falling back to non-genre strategies.");const w=[],g=[];if(f.length>0)try{const M=await z.getGenres();s&&(console.log(`[Recommendations] Found ${M.length} total genres in library`),console.log("[Recommendations] Looking for genres:",f.slice(0,3)));for(const H of f.slice(0,3)){const U=M.find(R=>{var O;return((O=R.Name)==null?void 0:O.toLowerCase())===H.toLowerCase()});s&&console.log("[Recommendations] Genre match candidate:",{requested:H,found:!!U,id:U==null?void 0:U.Id,name:U==null?void 0:U.Name,isSynthetic:(c=U==null?void 0:U.Id)==null?void 0:c.startsWith("synthetic-")}),U!=null&&U.Id?U.Id.startsWith("synthetic-")?(g.push(H),s&&console.log(`[Recommendations] Genre "${H}" is synthetic, will filter by name`)):(w.push(U.Id),s&&console.log(`[Recommendations] Genre "${H}" has real ID: ${U.Id}`)):(g.push(H),s&&console.warn(`[Recommendations] Genre "${H}" not found in library genres, treating as synthetic`))}s&&console.log("[Recommendations] Genre matching results:",{realGenreIds:w,syntheticGenreNames:g,totalGenres:f.length})}catch(M){s&&console.error("[Recommendations] Failed to get genre IDs:",M)}else s&&console.warn("[Recommendations] No genres to match - will use fallback strategies");if(w.length===0&&g.length>0){s&&console.log("[Recommendations] Using genre name filtering (synthetic genres)");try{let M=[];const H=new Set,U=20;if(d&&!isNaN(d)){const ee=[{range:3,years:[d-3,d-2,d-1,d,d+1,d+2,d+3]},{range:5,years:[d-5,d-4,d-3,d-2,d-1,d,d+1,d+2,d+3,d+4,d+5]},{range:7,years:[d-7,d-6,d-5,d-4,d-3,d-2,d-1,d,d+1,d+2,d+3,d+4,d+5,d+6,d+7]},{range:10,years:[d-10,d-9,d-8,d-7,d-6,d-5,d-4,d-3,d-2,d-1,d,d+1,d+2,d+3,d+4,d+5,d+6,d+7,d+8,d+9,d+10]}];for(const{range:ce,years:oe}of ee){if(M.length>=U&&ce>3){s&&console.log(`[Recommendations] Already have ${M.length} year-matched songs, skipping year range ${ce}`);break}const G=((await z.getSongs({years:oe,limit:300})).Items||[]).filter(B=>{var q;return((q=B.Genres)==null?void 0:q.some(ue=>g.some(we=>we.toLowerCase()===ue.toLowerCase())))&&!H.has(B.Id)});if(G.forEach(B=>{M.push(B),H.add(B.Id)}),s&&console.log(`[Recommendations] Year range ${ce} returned ${G.length} genre-matched songs (total: ${M.length})`),M.length>=U){s&&console.log(`[Recommendations] Have enough year-matched songs (${M.length}), stopping expansion`);break}}}let R=[];if(d&&!isNaN(d)&&M.length<U){s&&console.log(`[Recommendations] Only have ${M.length} year-matched songs, getting additional without year filter`);const ce=((await z.getSongs({limit:500})).Items||[]).filter(oe=>{var ge;return((ge=oe.Genres)==null?void 0:ge.some(b=>g.some(G=>G.toLowerCase()===b.toLowerCase())))&&!H.has(oe.Id)});R=[...M,...ce],s&&console.log(`[Recommendations] Combined: ${R.length} total (${M.length} with year match, ${ce.length} without)`)}else d&&!isNaN(d)?(R=M,s&&console.log(`[Recommendations] Using only year-matched songs: ${R.length} songs`)):(R=((await z.getSongs({limit:500})).Items||[]).filter(ce=>{var oe;return(oe=ce.Genres)==null?void 0:oe.some(ge=>g.some(b=>b.toLowerCase()===ge.toLowerCase()))}),s&&console.log(`[Recommendations] No year filter (no year data) returned ${R.length} genre-matched songs`));const O=Array.from(new Map(R.map(ee=>[ee.Id,ee])).values()),E=new Set([e.Id,...t.map(ee=>ee.Id),...n.map(ee=>ee.Id)]),$=O.filter(ee=>!E.has(ee.Id));let X=$;if(d&&!isNaN(d)&&(X=$.sort((ee,ce)=>{const oe=ee.ProductionYear||(ee.PremiereDate?new Date(ee.PremiereDate).getFullYear():null),ge=ce.ProductionYear||(ce.PremiereDate?new Date(ce.PremiereDate).getFullYear():null);return oe&&!ge?-1:!oe&&ge?1:!oe&&!ge||!oe||!ge?0:Math.abs(oe-d)-Math.abs(ge-d)})),X.length>0)return s&&console.log(`[Recommendations] Found ${X.length} songs by genre name filtering`),X.slice(0,10)}catch(M){console.error("[Recommendations] Genre name filtering failed:",M)}}if(w.length===0&&g.length===0){s&&(console.error("[Recommendations] No genre IDs or names found. Using fallback strategies."),console.log("[Recommendations] No genre IDs found, using fallback strategies (these will not filter by genre)."));const M=[],H=e.AlbumArtist||((u=(a=e.ArtistItems)==null?void 0:a[0])==null?void 0:u.Id),U=e.AlbumId;try{if(H&&f.length===0){let X=((await z.getSongs({artistIds:[H],limit:50})).Items||[]).filter(ce=>ce.Id!==e.Id);const ee=[...X].sort(()=>Math.random()-.5);M.push(...ee.slice(0,20)),s&&console.log(`[Recommendations] Fallback: Found ${X.length} songs by same artist (limited to 20, shuffled)`)}else H&&f.length>0&&s&&console.log("[Recommendations] Fallback: Skipping same-artist strategy since we have genre names to match");if(U&&M.length<10){const X=((await z.getSongs({albumIds:[U],limit:50})).Items||[]).filter(ee=>ee.Id!==e.Id);M.push(...X),s&&console.log(`[Recommendations] Fallback: Found ${X.length} songs from same album`)}if(d&&!isNaN(d)&&M.length<10){const $=[{range:3,years:[d-3,d-2,d-1,d,d+1,d+2,d+3]},{range:5,years:[d-5,d-4,d-3,d-2,d-1,d,d+1,d+2,d+3,d+4,d+5]}];for(const{range:X,years:ee}of $){let oe=((await z.getSongs({years:ee,limit:200})).Items||[]).filter(ge=>ge.Id!==e.Id);if(f.length>0){const ge=oe.filter(b=>{var G;return(G=b.Genres)==null?void 0:G.some(B=>f.some(q=>q.toLowerCase()===B.toLowerCase()))});ge.length>0&&s&&(console.log(`[Recommendations] Fallback: Found ${ge.length} songs from ${X} years AND matching genre`),oe=ge)}if(M.push(...oe),s&&console.log(`[Recommendations] Fallback: Found ${oe.length} songs from ${X} years`),M.length>=20)break}}const R=Array.from(new Map(M.map($=>[$.Id,$])).values()),O=new Set([e.Id,...t.map($=>$.Id),...n.map($=>$.Id)]),E=R.filter($=>!O.has($.Id));if(f.length>0&&E.length>0){const $=E.filter(X=>{var ee;return(ee=X.Genres)==null?void 0:ee.some(ce=>f.some(oe=>oe.toLowerCase()===ce.toLowerCase()))});if($.length>0){s&&console.log(`[Recommendations] Fallback: Filtered to ${$.length} songs that match genre`);const ee=[...$].sort(()=>Math.random()-.5).slice(0,10);return console.log(`[Recommendations] Fallback: Returning ${ee.length} genre-matched recommendations`),ee}else return s&&(console.error(`[Recommendations] CRITICAL: Fallback found ${E.length} songs but NONE match genre ${f.join(", ")}!`),console.error("[Recommendations] First 5 fallback songs and their genres:",E.slice(0,5).map(X=>({name:X.Name,genres:X.Genres})))),[]}if(E.length>0&&s){console.warn(`[Recommendations] Fallback: Returning ${Math.min(E.length,10)} recommendations WITHOUT genre filtering (no genre info available)`);const $=Math.min(E.length,100),ee=[...E.slice(0,$)];for(let ce=ee.length-1;ce>0;ce--){const oe=Math.floor(Math.random()*(ce+1));[ee[ce],ee[oe]]=[ee[oe],ee[ce]]}return ee.slice(0,10)}if(E.length===0){console.log("[Recommendations] Fallback: No songs found from fallback strategies, getting recently added songs from library");try{const X=((await z.getSongs({limit:100,sortBy:["DateCreated"],sortOrder:"Descending"})).Items||[]).filter(oe=>oe.Id!==e.Id),ee=new Set([e.Id,...t.map(oe=>oe.Id),...n.map(oe=>oe.Id)]),ce=X.filter(oe=>!ee.has(oe.Id));if(ce.length>0){const oe=[...ce];for(let b=oe.length-1;b>0;b--){const G=Math.floor(Math.random()*(b+1));[oe[b],oe[G]]=[oe[G],oe[b]]}const ge=oe.slice(0,10);return s&&console.log(`[Recommendations] Fallback: Returning ${ge.length} random songs from recently added`),ge}}catch($){s&&console.error("[Recommendations] Failed to get recently added songs:",$)}}}catch(R){s&&console.error("[Recommendations] Fallback strategies failed:",R)}return s&&console.warn("[Recommendations] All fallback strategies failed, returning empty"),[]}s&&console.log("[Recommendations] Found genre IDs:",w);const N=[];if(w.length>0)try{for(const M of w){let H=[];if(d&&!isNaN(d)){const U=[{range:3,years:[d-3,d-2,d-1,d,d+1,d+2,d+3]},{range:5,years:[d-5,d-4,d-3,d-2,d-1,d,d+1,d+2,d+3,d+4,d+5]},{range:7,years:[d-7,d-6,d-5,d-4,d-3,d-2,d-1,d,d+1,d+2,d+3,d+4,d+5,d+6,d+7]},{range:10,years:[d-10,d-9,d-8,d-7,d-6,d-5,d-4,d-3,d-2,d-1,d,d+1,d+2,d+3,d+4,d+5,d+6,d+7,d+8,d+9,d+10]}],R=[],O=new Set,E=20;for(const{range:$,years:X}of U){if(R.length>=E&&$>3){s&&console.log(`[Recommendations] Already have ${R.length} songs, skipping year range ${$}`);break}const ee={genreIds:[M],years:X,limit:200},ge=((await z.getSongs(ee)).Items||[]).filter(b=>{var G;return(G=b.Genres)==null?void 0:G.some(B=>f.some(q=>q.toLowerCase()===B.toLowerCase()))});if(ge.forEach(b=>{O.has(b.Id)||(R.push(b),O.add(b.Id))}),s&&console.log(`[Recommendations] Year range ${$} returned ${ge.length} genre-matched songs (total accumulated: ${R.length})`),R.length>=E){s&&console.log(`[Recommendations] Have enough songs (${R.length}), stopping year range expansion`);break}}if(R.length<E){s&&console.log(`[Recommendations] Only have ${R.length} year-matched songs, getting additional genre-matched songs without year filter`);const $={genreIds:[M],limit:500},ce=((await z.getSongs($)).Items||[]).filter(oe=>{var ge;return((ge=oe.Genres)==null?void 0:ge.some(b=>f.some(G=>G.toLowerCase()===b.toLowerCase())))&&!O.has(oe.Id)});H=[...R,...ce],s&&console.log(`[Recommendations] Combined: ${H.length} total genre-matched songs (${R.length} with year match, ${ce.length} without year match)`)}else H=R,s&&console.log(`[Recommendations] Using only year-matched songs: ${H.length} songs (all within year ranges)`)}else{const U={genreIds:[M],limit:100};H=((await z.getSongs(U)).Items||[]).filter(E=>{var $;return($=E.Genres)==null?void 0:$.some(X=>f.some(ee=>ee.toLowerCase()===X.toLowerCase()))}),s&&console.log(`[Recommendations] No year filter (no year data) returned ${H.length} genre-matched songs`)}N.push(...H)}}catch(M){s&&console.error("[Recommendations] Failed to get genre songs:",M)}if(s){if(console.log(`[Recommendations] Found ${N.length} genre-matched songs`),N.length>0){const M=new Set;N.slice(0,10).forEach(U=>{var R;(R=U.Genres)==null||R.forEach(O=>M.add(O.toLowerCase()))}),console.log("[Recommendations] Genres of first 10 returned songs:",Array.from(M)),console.log("[Recommendations] Expected genres:",f.map(U=>U.toLowerCase()));const H=N.filter(U=>{var R;return(R=U.Genres)==null?void 0:R.some(O=>f.some(E=>E.toLowerCase()===O.toLowerCase()))});console.log(`[Recommendations] Songs that actually match current track genres: ${H.length} out of ${N.length}`),H.length===0&&N.length>0&&(console.warn("[Recommendations] Returned songs do not match current track genres."),console.warn("[Recommendations] First 5 returned songs and their genres:",N.slice(0,5).map(U=>({name:U.Name,genres:U.Genres}))))}N.length===0&&console.warn("[Recommendations] No genre-matched songs found. Check if songs in library have matching genres.")}const v=N,x=Array.from(new Map(v.map(M=>[M.Id,M])).values());s&&console.log(`[Recommendations] After deduplication: ${x.length} unique candidates`);const y=new Set(t.filter(M=>M._isRecommended).map(M=>M.Id)),S=new Set([e.Id,...r?[r.Id]:[],...t.map(M=>M.Id),...n.map(M=>M.Id),...y]);s&&console.log(`[Recommendations] Filtering out ${S.size} recent songs (current + lastPlayed + queue + recentQueue + previouslyRecommended)`);const C=new Set(Array.from(S).map(M=>String(M))),I=x.filter(M=>{const H=String(M.Id);return!C.has(H)}),A=x.length-I.length;s&&(console.log(`[Recommendations] After filtering recent songs: ${I.length} candidates (filtered out ${A})`),I.length===0&&x.length>0&&console.warn("[Recommendations] All candidates were filtered out as recent songs!"));const k=I.filter(M=>{var H;return(H=M.Genres)==null?void 0:H.some(U=>f.some(R=>R.toLowerCase()===U.toLowerCase()))});s&&console.log(`[Recommendations] Genre-matched songs: ${k.length}`);const Y=t.filter(M=>!M._isRecommended);s&&console.log(`[Recommendations] User-added queue songs: ${Y.length} (total queue: ${t.length})`);const _=new Set(Y.map(M=>{var H,U;return M.AlbumArtist||((U=(H=M.ArtistItems)==null?void 0:H[0])==null?void 0:U.Id)}).filter(Boolean));s&&console.log(`[Recommendations] Queue artist IDs: ${_.size} unique artists`);const F=M=>M.sort((H,U)=>{var X,ee,ce,oe;const R=H.AlbumArtist||((ee=(X=H.ArtistItems)==null?void 0:X[0])==null?void 0:ee.Id),O=U.AlbumArtist||((oe=(ce=U.ArtistItems)==null?void 0:ce[0])==null?void 0:oe.Id),E=R&&_.has(R),$=O&&_.has(O);return E&&!$?-1:!E&&$?1:0}),ne=M=>!d||isNaN(d)?M:M.sort((H,U)=>{const R=H.ProductionYear||(H.PremiereDate?new Date(H.PremiereDate).getFullYear():null),O=U.ProductionYear||(U.PremiereDate?new Date(U.PremiereDate).getFullYear():null);if(R&&!O)return-1;if(!R&&O)return 1;if(!R&&!O||!R||!O)return 0;const E=Math.abs(R-d),$=Math.abs(O-d),X=E<=3,ee=$<=3;return X&&!ee?-1:!X&&ee?1:E-$}),ie=F(k),me=ne(ie);s&&console.log(`[Recommendations] After prioritization: ${me.length} songs`);const se=new Map;me.forEach(M=>{const H=(()=>{var E,$;const O=M.AlbumArtist||(($=(E=M.ArtistItems)==null?void 0:E[0])==null?void 0:$.Id);return O&&_.has(O)?"artist":"no-artist"})(),U=(()=>{if(!d||isNaN(d))return"no-year";const O=M.ProductionYear||(M.PremiereDate?new Date(M.PremiereDate).getFullYear():null);if(!O)return"no-year";const E=Math.abs(O-d);return E<=3?"year-close":E<=5?"year-medium":"year-far"})(),R=`${H}-${U}`;se.has(R)||se.set(R,[]),se.get(R).push(M)});const fe=M=>{var R;if(M.length<=1)return[...M];const H=[...M],U=3;for(let O=0;O<U;O++){const E=Date.now()+O*1e3+Math.random()*1e3;for(let $=H.length-1;$>0;$--){const X=Math.sin(E+$)*1e4%1,ee=Math.floor(Math.abs(X)*($+1)),ce=H[$];H[$]=H[ee],H[ee]=ce}}for(let O=H.length-1;O>0;O--){const E=Math.floor(Math.random()*(O+1)),$=H[O];H[O]=H[E],H[E]=$}if(s)if(M.length>0&&typeof((R=M[0])==null?void 0:R.Name)<"u"){const O=M.slice(0,5).map($=>$==null?void 0:$.Name).join(", "),E=H.slice(0,5).map($=>$==null?void 0:$.Name).join(", ");console.log(`[Recommendations] Shuffled ${M.length} items. First 5 before: [${O}], after: [${E}]`)}else console.log(`[Recommendations] Shuffled array of ${M.length} items`);return H},D=M=>{const H=M.split("-"),U=H[0]==="artist"?100:0,R=H[1]==="year-close"?30:H[1]==="year-medium"?20:H[1]==="year-far"?10:0;return U+R},j=[],P=Array.from(se.keys()).sort((M,H)=>{const U=D(M),R=D(H);return U!==R?R-U:M.localeCompare(H)});s&&(console.log("[Recommendations] Priority groups:",Array.from(se.entries()).map(([M,H])=>{var U;return{key:M,count:H.length,priority:D(M),firstSong:(U=H[0])==null?void 0:U.Name}})),console.log(`[Recommendations] Priority group order (sorted by priority): ${P.join(", ")}`));for(const M of P){const H=se.get(M);s&&console.log(`[Recommendations] Processing priority group "${M}" with ${H.length} songs. First 3:`,H.slice(0,3).map(R=>R.Name));const U=fe(H);s&&console.log("[Recommendations] After shuffle, first 3:",U.slice(0,3).map(R=>R.Name)),j.push(...U)}s&&console.log(`[Recommendations] After randomization within groups: ${j.length} songs. First 5:`,j.slice(0,5).map(M=>M.Name));const L=fe(j);s&&console.log(`[Recommendations] After FULL shuffle of all songs: ${L.length} songs. First 5:`,L.slice(0,5).map(M=>M.Name));const V=e.AlbumArtist||((p=(h=e.ArtistItems)==null?void 0:h[0])==null?void 0:p.Id);s&&console.log(`[Recommendations] Current track artist ID: ${V||"none"}`);let T=L.filter((M,H)=>{var R,O;const U=M.AlbumArtist||((O=(R=M.ArtistItems)==null?void 0:R[0])==null?void 0:O.Id);return H>2?!0:U!==V});const le=j.length-T.length;if(s&&console.log(`[Recommendations] After filtering same artist: ${T.length} songs (filtered out ${le} same-artist songs)`),T.length===0&&j.length>0&&(s&&console.warn("[Recommendations] All songs filtered out due to same artist filter. Relaxing filter..."),T=j,console.log(`[Recommendations] Relaxed filter: now ${T.length} songs`)),T.length<5&&j.length>T.length){const M=j.filter(U=>{var O,E;return(U.AlbumArtist||((E=(O=U.ArtistItems)==null?void 0:O[0])==null?void 0:E.Id))===V}),H=Math.min(5-T.length,M.length);if(H>0){const U=M.slice(0,H);T.push(...U),console.log(`[Recommendations] Added back ${U.length} same-artist songs to reach minimum`)}}T.length===0&&L.length>0&&(s&&console.warn("[Recommendations] Still no results after safeguards, returning fully shuffled list"),T=L.slice(0,10));const W=T.filter(M=>M.Id!==e.Id);s&&W.length!==T.length&&console.warn(`[Recommendations] Current track ${e.Name} (${e.Id}) was in recommendations and has been removed.`);let he=fe(W);he=fe(he);const pe=he.slice(0,10);return s&&console.log(`[Recommendations] Final result: ${pe.length} recommendations`),pe}catch(f){return s&&console.error("[Recommendations] Error in getRecommendedSongs:",f),[]}}function L0(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function z0(){const{queue:e,currentTrack:t,currentIndex:n,addToQueue:r,lastPlayedTrack:s,manuallyCleared:o,refreshCurrentTrack:i,isFetchingRecommendations:c,setIsFetchingRecommendations:a,collectionStartIndex:u,originalQueue:h,playedSongIds:p}=ve(),{enableQueueRecommendations:f}=Es(),d=m.useRef([]),w=m.useRef(!1);m.useEffect(()=>{d.current=e.slice(-20)},[e]),m.useEffect(()=>{const{shuffle:g}=ve.getState();let N=0;if(n>=0&&n<e.length?N=e.length-n:(e.length===1&&t||e.length===0&&t)&&(N=1),!!!(f&&!w.current&&!o&&t&&N>0&&N<=3)||!t)return;w.current=!0,a==null||a(!0),(async()=>{try{await i();const y=ve.getState().currentTrack||t,S=[],C=n>=0&&n<e.length?n:-1;if(C>=0){const fe=e[C];fe&&S.push(fe);const D=e[C+1];D&&S.push(D);const j=e[C+2];j&&S.push(j)}S.length===0&&y&&S.push(y);let I=12;S.length===2&&(I=6),S.length>=3&&(I=4);const A=new Map;for(let fe=0;fe<S.length;fe++){const D=S[fe];if(!D)continue;const j=await R0({currentTrack:D,queue:e,recentQueue:d.current,lastPlayedTrack:s});if(!Array.isArray(j)||j.length===0){console.warn(`[Recommendations Hook] Seed ${fe} returned no recommendations`);continue}j.filter(L=>L&&L.Id&&!A.has(String(L.Id))).slice(0,I).forEach(L=>{A.set(String(L.Id),L)})}let k=Array.from(A.values());const{queue:Y,currentTrack:_,lastPlayedTrack:F,playedSongIds:ne}=ve.getState(),ie=k.filter(fe=>{const D=Y.some(V=>V.Id===fe.Id),j=(_==null?void 0:_.Id)===fe.Id,P=(F==null?void 0:F.Id)===fe.Id,L=ne.includes(fe.Id);return D||j||P||L?(console.warn(`[Recommendations Hook] Filtering out ${fe.Name} (${fe.Id}) - inQueue: ${D}, isCurrent: ${j}, isLastPlayed: ${P}, alreadyPlayed: ${L}`),!1):!0});if(ie.length<k.length&&console.warn(`[Recommendations Hook] Filtered out ${k.length-ie.length} songs that are now in queue/playing`),ie.length===0){console.warn("[Recommendations Hook] No safe combined recommendations remain after filtering");return}const se=L0(ie).slice(0,12);se.length>0?r(se,!0):console.warn("[Recommendations Hook] No recommendations to add after shuffling/slicing")}catch(y){console.error("[Recommendations Hook] CRITICAL: Failed to get multi-seed recommendations:",y),console.error("[Recommendations Hook] Error details:",{message:y instanceof Error?y.message:String(y),stack:y instanceof Error?y.stack:"No stack trace",currentTrack:t==null?void 0:t.Name,queueLength:e.length})}finally{w.current=!1,a==null||a(!1)}})()},[n,e.length,t,e,r,s,o,i,f,a])}const xu={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function _0({children:e}){z0();const{accentColor:t}=Es(),{genres:n}=Ee(),{state:r}=so();return m.useEffect(()=>{const s=xu[t]||xu.blue;document.documentElement.style.setProperty("--accent-color",s)},[t]),m.useEffect(()=>{const s=r!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",s)},[r]),m.useEffect(()=>{n.length===0&&z.getGenres().catch(s=>{console.warn("Background genre preload failed:",s)})},[n.length]),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:r!=="idle"?"28px":"0px"}}),l.jsx(M0,{}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),l.jsxs("div",{className:"min-h-screen bg-black text-white",style:{paddingBottom:"calc(4rem + env(safe-area-inset-bottom) - 8px)",paddingTop:r!=="idle"?"28px":"0",overflowX:"hidden",maxWidth:"100vw",width:"100%"},children:[l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:e}),l.jsx(T0,{}),l.jsx(k0,{})]})]})}const Wn=m.forwardRef(({value:e,onChange:t,placeholder:n="Search...",debounceMs:r=300,showClearButton:s=!1,onClear:o},i)=>{const[c,a]=m.useState(e),u=m.useRef(t),h=m.useRef(null),p=f=>{h.current=f,typeof i=="function"?i(f):i&&(i.current=f)};return m.useEffect(()=>{u.current=t},[t]),m.useEffect(()=>{const f=setTimeout(()=>{u.current(c)},r);return()=>clearTimeout(f)},[c,r]),m.useEffect(()=>{a(e)},[e]),l.jsxs("div",{className:"relative",children:[l.jsx("input",{ref:p,type:"text",value:c,onChange:f=>{a(f.target.value)},placeholder:n,className:"w-full px-4 py-2 pl-10 pr-10 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),l.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),a(""),o&&o(),setTimeout(()=>{var d;(d=h.current)==null||d.focus()},0)},className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-opacity ${s&&c?"text-gray-400 hover:text-white opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-label":"Clear search",type:"button",children:l.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})});Wn.displayName="SearchInput";function qn({isOpen:e,onClose:t,filterType:n,availableYears:r=[],yearRange:s={min:null,max:null},onApplyYear:o,genres:i=[],selectedValues:c=[],onApply:a}){const[u,h]=m.useState(s),[p,f]=m.useState(c),d=m.useRef(null),w=m.useRef(null);m.useEffect(()=>{h(s)},[s]),m.useEffect(()=>{f(c)},[c]);const g=I=>{f(A=>A.includes(I)?A.filter(k=>k!==I):[...A,I])},N=()=>{n==="year"&&o?o(u):n==="genre"&&a&&a(p),t()},v=()=>{n==="year"?(h({min:null,max:null}),o&&o({min:null,max:null})):n==="genre"&&f([]),t()},x=r.length>0?r[0]:1900,y=r.length>0?r[r.length-1]:new Date().getFullYear();m.useEffect(()=>{if(n==="year"&&e&&r.length>0){if(d.current&&u.min!==null){const I=r.indexOf(u.min);I!==-1&&setTimeout(()=>{var k;const A=(k=d.current)==null?void 0:k.querySelector(`[data-year-index="${I}"]`);A&&A.scrollIntoView({behavior:"smooth",block:"center"})},100)}if(w.current&&u.max!==null){const I=r.indexOf(u.max);I!==-1&&setTimeout(()=>{var k;const A=(k=w.current)==null?void 0:k.querySelector(`[data-year-index="${I}"]`);A&&A.scrollIntoView({behavior:"smooth",block:"center"})},100)}}},[n,e,u.min,u.max,r]);const S=(I,A)=>{h(k=>{if(I==="min"){const Y=k.max!==null&&A>k.max?k.max:A;return setTimeout(()=>{const _=r.indexOf(Y);if(_!==-1&&d.current){const F=d.current.querySelector(`[data-year-index="${_}"]`);F&&F.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...k,min:Y}}else{const Y=k.min!==null&&A<k.min?k.min:A;return setTimeout(()=>{const _=r.indexOf(Y);if(_!==-1&&w.current){const F=w.current.querySelector(`[data-year-index="${_}"]`);F&&F.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...k,max:Y}}})},C=(u.min===null||u.min===x)&&(u.max===null||u.max===y)&&s.min===null&&s.max===null;return l.jsx(Va,{isOpen:e,onClose:t,zIndex:10001,children:l.jsxs("div",{className:"pb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsxs("div",{className:"text-lg font-semibold text-white",children:["Filter by ",n==="genre"?"Genre":"Year"]}),l.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Close",children:l.jsx(j0,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"px-4 max-h-[75vh] overflow-y-auto",children:n==="year"?l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{ref:d,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:r.length>0?r.map((I,A)=>{const k=u.min===I,Y=u.max!==null&&I>u.max;return l.jsx("button",{"data-year-index":A,onClick:()=>S("min",I),disabled:Y,className:`w-full py-3 px-4 text-center snap-center transition-colors ${k?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":Y?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:I},I)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No years available"})})}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 bg-gradient-to-b from-zinc-900 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-zinc-900 to-transparent pointer-events-none"})]}),l.jsx("div",{className:"text-white font-medium self-center",children:"to"}),l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{ref:w,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:r.length>0?r.map((I,A)=>{const k=u.max===I,Y=u.min!==null&&I<u.min;return l.jsx("button",{"data-year-index":A,onClick:()=>S("max",I),disabled:Y,className:`w-full py-3 px-4 text-center snap-center transition-colors ${k?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":Y?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:I},I)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No years available"})})}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-14 bg-gradient-to-b from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-14 bg-gradient-to-t from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"})]})]})}):l.jsx("div",{className:"space-y-2",children:n==="genre"?i.length>0?[...i].sort((I,A)=>(I.Name||"").localeCompare(A.Name||"")).map(I=>{const A=I.Name||"",k=p.includes(A);return l.jsxs("button",{onClick:()=>g(A),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-white/10 transition-colors text-left",children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${k?"bg-white border-white":"border-white/40 bg-transparent"}`,children:k&&l.jsx("svg",{className:"w-3 h-3 text-zinc-900",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),l.jsx("span",{className:"text-white font-medium",children:A})]},I.Id)}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No genres available"})}):l.jsx("div",{className:"text-center py-8 text-gray-400",children:l.jsx("div",{className:"text-sm",children:"No genres available"})})})}),l.jsxs("div",{className:"flex gap-3 mt-6 px-4",children:[l.jsx("button",{onClick:v,disabled:n==="year"&&C,className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 disabled:opacity-30 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:"Clear"}),l.jsx("button",{onClick:N,className:"flex-1 px-4 py-3 bg-white text-zinc-900 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Apply"})]})]})})}async function Ts(e,t){var w,g,N,v;const n=await z.search(e,t);let r=((w=n.Songs)==null?void 0:w.Items)||[],s=((g=n.Albums)==null?void 0:g.Items)||[],o=((N=n.Artists)==null?void 0:N.Items)||[],i=((v=n.Playlists)==null?void 0:v.Items)||[];if(!(r.length>0||s.length>0||o.length>0||i.length>0)&&e.trim().length>0){const x=await Ms(t);r=x.songs,s=x.albums,o=x.artists,i=x.playlists}const u=$t(e).toLowerCase().trim(),h=r.filter(x=>{var C,I,A;if($t(x.Name||"").toLowerCase().includes(u))return!0;const S=[];return x.AlbumArtist&&S.push($t(x.AlbumArtist)),(C=x.AlbumArtists)!=null&&C.length&&S.push(...x.AlbumArtists.map(k=>$t(k.Name||"")).filter(Boolean)),(I=x.ArtistItems)!=null&&I.length&&S.push(...x.ArtistItems.map(k=>$t(k.Name||"")).filter(Boolean)),!!(S.some(k=>k.toLowerCase().includes(u))||(A=x.Genres)!=null&&A.some(k=>$t(k).toLowerCase().includes(u)))}),p=o.filter(x=>$t(x.Name||"").toLowerCase().includes(u)),f=s.filter(x=>{var C,I;const y=$t(x.Name||""),S=$t(x.AlbumArtist||((I=(C=x.ArtistItems)==null?void 0:C[0])==null?void 0:I.Name)||"");return y.toLowerCase().includes(u)||S.toLowerCase().includes(u)}),d=i.filter(x=>$t(x.Name||"").toLowerCase().includes(u));return{artists:p,albums:f,playlists:d,songs:h}}async function Ms(e){const[t,n,r,s]=await Promise.all([z.getArtists({limit:e}),z.getAlbums({limit:e}),z.getPlaylists({limit:e}),z.getSongs({limit:e})]);return{artists:t.Items||[],albums:n.Items||[],playlists:r.Items||[],songs:s.Items||[]}}const _o=new Map;function D0({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var d,w;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,[a,u]=m.useState(null);m.useEffect(()=>{var x;if((x=e.ImageTags)!=null&&x.Primary){u(null);return}const g=_o.get(e.Id);if(g!==void 0){u(g);return}let N=!1;return(async()=>{try{const{albums:y,songs:S}=await z.getArtistItems(e.Id),C=y[0],I=S.find(_=>_.AlbumId)||S[0],A=C||I,k=A?A.AlbumId||A.Id:null,Y=k?z.getAlbumArtUrl(k,96):null;_o.set(e.Id,Y),N||u(Y)}catch(y){console.error("Failed to load fallback album art for artist (home search):",e.Id,y),_o.set(e.Id,null)}})(),()=>{N=!0}},[e.Id,e.ImageTags]);const h=g=>{if(c||i.current){g.preventDefault(),g.stopPropagation(),i.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),i.current=!0,n(e,"artist","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{i.current=!1},100)},f=Ae({onLongPress:g=>{g.preventDefault(),i.current=!0,n(e,"artist","mobile")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${c?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(d=e.ImageTags)!=null&&d.Primary||a?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?z.getArtistImageUrl(e.Id,96):a||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function $0({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,f;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,a=d=>{if(c||i.current){d.preventDefault(),d.stopPropagation(),i.current=!1;return}t(e.Id)},u=d=>{d.preventDefault(),d.stopPropagation(),i.current=!0,n(e,"album","desktop",{x:d.clientX,y:d.clientY}),setTimeout(()=>{i.current=!1},100)},h=Ae({onLongPress:d=>{d.preventDefault(),i.current=!0,n(e,"album","mobile")},onClick:a});return l.jsxs("button",{onClick:a,onContextMenu:u,...h,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((f=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:f.Name)||"Unknown Artist"})]})}function O0({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var w,g;const{currentTrack:o}=ve(),i=m.useRef(!1),c=r===e.Id,[a,u]=m.useState(!1),h=N=>{const v=Math.floor(N/1e7),x=Math.floor(v/60),y=v%60;return`${x}:${y.toString().padStart(2,"0")}`},p=N=>{if(c||i.current){N.preventDefault(),N.stopPropagation(),i.current=!1;return}t(e)},f=N=>{N.preventDefault(),N.stopPropagation(),i.current=!0,n(e,"song","desktop",{x:N.clientX,y:N.clientY}),setTimeout(()=>{i.current=!1},100)},d=Ae({onLongPress:N=>{N.preventDefault(),i.current=!0,n(e,"song","mobile")},onClick:p});return l.jsxs("button",{onClick:p,onContextMenu:f,...d,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${c?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:a?l.jsx(Ve,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>u(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(o==null?void 0:o.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((g=(w=e.ArtistItems)==null?void 0:w[0])==null?void 0:g.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:h(e.RunTimeTicks)})]})}function F0({onSearchStateChange:e}){const[t,n]=m.useState(""),[r,s]=m.useState(!1),[o,i]=m.useState(null),[c,a]=m.useState(!1),[u,h]=m.useState(!1),[p,f]=m.useState("mobile"),[d,w]=m.useState(null),[g,N]=m.useState(null),[v,x]=m.useState(null),y=m.useRef(null),[S,C]=m.useState([]),[I,A]=m.useState({min:null,max:null}),[k,Y]=m.useState(!1),[_,F]=m.useState(null),{genres:ne}=Ee(),[ie,me]=m.useState([]),[se,fe]=m.useState(!1),[D,j]=m.useState(45),{playAlbum:P,addToQueue:L,playTrack:V}=ve(),T=Be();m.useEffect(()=>{(async()=>{fe(!0);try{const G=Ee.getState();if(G.years.length>0)me(G.years);else{const B=await z.getYears();me(B)}}catch(G){console.error("Failed to load filter values:",G)}finally{fe(!1)}})()},[]);const le=S.length>0||I.min!==null||I.max!==null;m.useEffect(()=>{const b=t.trim().length>0;if(b||le){a(!0);const G=window.setTimeout(()=>{(async()=>{try{if(b){const q=await Ts(t,450);i(q)}else{const q=await Ms(450);i(q)}}catch(q){console.error("Search failed:",q),i(null)}finally{a(!1)}})()},250);return()=>{window.clearTimeout(G)}}else i(null),a(!1)},[t,le]),m.useEffect(()=>{j(45)},[t,r,o==null?void 0:o.songs.length]),m.useEffect(()=>{var G;if(!r||!((G=o==null?void 0:o.songs)!=null&&G.length))return;const b=()=>{const B=window.scrollY||document.documentElement.scrollTop,q=window.innerHeight||document.documentElement.clientHeight,ue=document.documentElement.scrollHeight;B+q*1.5>=ue&&j(we=>Math.min(we+45,o.songs.length))};return window.addEventListener("scroll",b,{passive:!0}),()=>window.removeEventListener("scroll",b)},[r,o==null?void 0:o.songs.length]);const W=m.useMemo(()=>{if(!o)return null;const b=q=>{if(I.min!==null||I.max!==null)return!1;if(S.length>0){const ue=q.Genres||[];if(!S.some(K=>ue.some(re=>re.toLowerCase()===K.toLowerCase())))return!1}return!0},G=q=>{if(S.length>0){const ue=q.Genres||[];if(!S.some(K=>ue.some(re=>re.toLowerCase()===K.toLowerCase())))return!1}if(I.min!==null||I.max!==null){const ue=q.ProductionYear;if(!ue||ue<=0||I.min!==null&&ue<I.min||I.max!==null&&ue>I.max)return!1}return!0},B=q=>!(I.min!==null||I.max!==null||S.length>0);return{artists:o.artists.filter(b),albums:o.albums.filter(G),playlists:(o.playlists||[]).filter(B),songs:o.songs.filter(G)}},[o,S,I]),he=b=>{n(b),b.trim().length>0&&!r&&s(!0)},pe=b=>{T(`/artist/${b}`),s(!1),n(""),setSearchResults(null)},M=b=>{T(`/album/${b}`),s(!1),n(""),setSearchResults(null)},H=b=>{V(b,[b])},U=b=>{T(`/playlist/${b}`),s(!1),n(""),setSearchResults(null)},R=(b,G,B="mobile",q)=>{N(b),x(G),f(B),w(q||null),h(!0)},O=()=>{n(""),i(null)},E=()=>{s(!1),n(""),i(null),C([]),A({min:null,max:null})},$=b=>{F(b),Y(!0)},X=b=>{C(b)},ee=b=>{A(b)},ce=b=>{b.preventDefault(),b.stopPropagation(),W!=null&&W.songs&&W.songs.length>0&&P(W.songs)},oe=b=>{b.preventDefault(),b.stopPropagation(),W!=null&&W.songs&&W.songs.length>0&&L(W.songs)},ge=r;return m.useEffect(()=>{e&&e(ge)},[ge,e]),m.useEffect(()=>{var b;if(r&&((b=y.current)==null||b.focus(),y.current)){const G=y.current.value.length;y.current.setSelectionRange(G,G)}},[r]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"Tunetuna"}),l.jsx("button",{onClick:()=>T("/settings"),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Settings",children:l.jsx(h0,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"relative",onClick:()=>s(!0),children:l.jsx(Wn,{value:t,onChange:he,placeholder:"Search for artists, albums, songs...",showClearButton:t.trim().length>0,onClear:O})})]}),r&&Jn.createPortal(l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-0 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Wn,{ref:y,value:t,onChange:he,showClearButton:t.trim().length>0,onClear:O})}),l.jsx("button",{onClick:E,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>$("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${S.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Yn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>$("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${I.min!==null||I.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx(Fa,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:c?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):W?l.jsxs("div",{className:"space-y-8",children:[W.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:W.artists.slice(0,5).map(b=>l.jsx(D0,{artist:b,onClick:pe,onContextMenu:R,contextMenuItemId:(g==null?void 0:g.Id)||null},b.Id))})]}),W.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:W.albums.slice(0,12).map(b=>l.jsx($0,{album:b,onClick:M,onContextMenu:R,contextMenuItemId:(g==null?void 0:g.Id)||null},b.Id))})]}),W.playlists&&W.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:W.playlists.map(b=>l.jsxs("button",{onClick:()=>U(b.Id),onContextMenu:G=>{G.preventDefault(),G.stopPropagation(),R(b,"playlist","desktop",{x:G.clientX,y:G.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:z.getAlbumArtUrl(b.Id,96),alt:b.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:b.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:b.ChildCount?`${b.ChildCount} tracks`:"Playlist"})]})]},b.Id))})]}),W.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:ce,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:oe,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ut,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:W.songs.map((b,G)=>l.jsx(O0,{song:b,onClick:H,onContextMenu:R,contextMenuItemId:(g==null?void 0:g.Id)||null,showImage:G<D},b.Id))})]}),W.artists.length===0&&W.albums.length===0&&(!W.playlists||W.playlists.length===0)&&W.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]}),l.jsx(Qe,{item:g,itemType:v,isOpen:u,onClose:()=>{h(!1),N(null),x(null)},zIndex:999999,mode:p,position:d||void 0})]}),document.body),_==="genre"&&l.jsx(qn,{isOpen:k,onClose:()=>Y(!1),filterType:"genre",genres:ne,selectedValues:S,onApply:X}),_==="year"&&l.jsx(qn,{isOpen:k,onClose:()=>Y(!1),filterType:"year",availableYears:ie,yearRange:I,onApplyYear:ee})]})}function yu({album:e,onNavigate:t,onContextMenu:n}){var u,h;const[r,s]=m.useState(!1),o=m.useRef(!1),i=p=>{if(o.current){p.preventDefault(),p.stopPropagation(),o.current=!1;return}t(e.Id)},c=p=>{p.preventDefault(),p.stopPropagation(),o.current=!0,n(e,"desktop",{x:p.clientX,y:p.clientY}),setTimeout(()=>{o.current=!1},100)},a=Ae({onLongPress:p=>{p.preventDefault(),o.current=!0,n(e,"mobile")},onClick:i});return l.jsxs("button",{onClick:i,onContextMenu:c,...a,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:r?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsx(at,{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>s(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((h=(u=e.ArtistItems)==null?void 0:u[0])==null?void 0:h.Name)||"Unknown Artist"})]})}function U0(){const{recentlyAdded:e,setRecentlyAdded:t,setLoading:n}=Ee(),r=Be(),s=m.useRef(null),[o,i]=m.useState(0),[c,a]=m.useState(!1),[u,h]=m.useState("mobile"),[p,f]=m.useState(null),[d,w]=m.useState(null);m.useEffect(()=>{(async()=>{n("recentlyAdded",!0);try{const S=await z.getRecentlyAdded(18);t(S.Items||[])}catch(S){console.error("Failed to load recently added:",S)}finally{n("recentlyAdded",!1)}})()},[t,n]);const g=()=>{if(!s.current)return;const y=s.current,S=y.scrollLeft,C=y.clientWidth,I=Math.round(S/C);i(I)},N=y=>{if(!s.current)return;const S=s.current,C=S.clientWidth;S.scrollTo({left:y*C,behavior:"smooth"})};if(!e||e.length===0)return null;const v=6,x=[];for(let y=0;y<e.length;y+=v)x.push(e.slice(y,y+v));return l.jsxs("div",{className:"px-4 mb-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recently Added"}),l.jsxs("div",{className:"md:hidden",children:[l.jsx("div",{ref:s,onScroll:g,className:"overflow-x-auto snap-x snap-mandatory scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:l.jsx("div",{className:"flex",style:{width:`${x.length*100}%`},children:x.map((y,S)=>{const C=Math.ceil(y.length/3);return l.jsx("div",{className:"snap-start flex-shrink-0 w-full",style:{width:`${100/x.length}%`},children:l.jsx("div",{className:"grid grid-cols-3 gap-3",style:{gridTemplateRows:`repeat(${C}, minmax(0, 1fr))`},children:y.map(I=>l.jsx(yu,{album:I,onNavigate:A=>r(`/album/${A}`),onContextMenu:(A,k,Y)=>{w(A),h(k||"desktop"),f(Y||null),a(!0)}},I.Id))})},S)})})}),x.length>1&&l.jsx("div",{className:"flex justify-center gap-2 mt-4",children:x.map((y,S)=>l.jsx("button",{onClick:()=>N(S),className:`w-2 h-2 rounded-full transition-colors ${S===o?"bg-white":"bg-zinc-600"}`,"aria-label":`Go to page ${S+1}`},S))})]}),l.jsx("div",{className:"hidden md:block",children:l.jsx("div",{className:"grid grid-cols-4 gap-3",children:e.slice(0,8).map(y=>l.jsx(yu,{album:y,onNavigate:S=>r(`/album/${S}`),onContextMenu:(S,C,I)=>{w(S),h(C||"desktop"),f(I||null),a(!0)}},y.Id))})}),l.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `}),l.jsx(Qe,{item:d,itemType:"album",isOpen:c,onClose:()=>{a(!1),w(null)},zIndex:999999,mode:u,position:p||void 0})]})}function B0({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var h,p;const{currentTrack:s}=ve(),[o,i]=m.useState(!1),c=r===e.Id,a=f=>{const d=Math.floor(f/1e7),w=Math.floor(d/60),g=d%60;return`${w}:${g.toString().padStart(2,"0")}`},u=Ae({onLongPress:f=>{f.preventDefault(),n(e,"mobile")},onClick:()=>t(e)});return l.jsxs("button",{onClick:()=>t(e),onContextMenu:f=>{f.preventDefault(),n(e,"desktop",{x:f.clientX,y:f.clientY})},...u,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${c?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:o?l.jsx(Ve,{className:"w-7 h-7 text-gray-500"}):l.jsx(at,{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>i(!0)})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(s==null?void 0:s.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((p=(h=e.ArtistItems)==null?void 0:h[0])==null?void 0:p.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:a(e.RunTimeTicks)})]})}function H0(){const{recentlyPlayed:e}=Ee(),{playTrack:t}=ve(),[n,r]=m.useState(!1),[s,o]=m.useState("mobile"),[i,c]=m.useState(null),[a,u]=m.useState(null),h=p=>{t(p,e)};return!e||e.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-2 px-4",children:"Recently Played"}),l.jsx("div",{className:"space-y-0",children:e.map(p=>l.jsx(B0,{song:p,onClick:h,onContextMenu:(f,d,w)=>{u(f),o(d||"mobile"),c(w||null),r(!0)},contextMenuItemId:(a==null?void 0:a.Id)||null},p.Id))}),l.jsx(Qe,{item:a,itemType:"song",isOpen:n,onClose:()=>{r(!1),u(null)},zIndex:99999,mode:s,position:i||void 0})]})}function G0(){const[e,t]=m.useState(!1),{recentlyAdded:n,recentlyPlayed:r,loading:s}=Ee(),o=m.useRef(!1);m.useEffect(()=>{(s.recentlyAdded||s.recentlyPlayed)&&(o.current=!0)},[s.recentlyAdded,s.recentlyPlayed]);const i=o.current&&!s.recentlyAdded&&!s.recentlyPlayed&&n.length===0&&r.length===0;return l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx(F0,{onSearchStateChange:t})})}),l.jsxs("div",{className:e?"hidden":"",style:{paddingTop:"calc(env(safe-area-inset-top) + 7.5rem)"},children:[l.jsx(U0,{}),l.jsx(H0,{}),i&&l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No music found"})})]})]})}const Do=new Map;function Q0({artist:e}){var N,v;const t=Be(),[n,r]=m.useState(!1),[s,o]=m.useState(!1),[i,c]=m.useState("mobile"),[a,u]=m.useState(null),h=m.useRef(!1),[p,f]=m.useState(null);m.useEffect(()=>{var C;if((C=e.ImageTags)!=null&&C.Primary){f(null);return}const x=Do.get(e.Id);if(x!==void 0){f(x);return}let y=!1;return(async()=>{try{const{albums:I,songs:A}=await z.getArtistItems(e.Id),k=I[0],Y=A.find(ie=>ie.AlbumId)||A[0],_=k||Y,F=_?_.AlbumId||_.Id:null,ne=F?z.getAlbumArtUrl(F,96):null;Do.set(e.Id,ne),y||f(ne)}catch(I){console.error("Failed to load fallback album art for artist:",e.Id,I),Do.set(e.Id,null)}})(),()=>{y=!0}},[e.Id,e.ImageTags]);const d=x=>{if(h.current){x.preventDefault(),h.current=!1;return}t(`/artist/${e.Id}`)},w=Ae({onLongPress:x=>{x.preventDefault(),h.current=!0,c("mobile"),u(null),o(!0)},onClick:d}),g=x=>{x.preventDefault(),x.stopPropagation(),h.current=!0,c("desktop"),u({x:x.clientX,y:x.clientY}),o(!0),setTimeout(()=>{h.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:d,onContextMenu:g,...w,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors group px-4 h-[72px] ${s?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:n?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(N=e.ImageTags)!=null&&N.Primary||p?l.jsx("img",{src:(v=e.ImageTags)!=null&&v.Primary?z.getArtistImageUrl(e.Id,96):p||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>r(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]}),l.jsx(Qe,{item:e,itemType:"artist",isOpen:s,onClose:()=>o(!1),zIndex:99999,mode:i,position:a||void 0})]})}function Ya({currentPage:e,totalPages:t,onPageChange:n,itemsPerPage:r,totalItems:s}){if(t<=1)return null;const o=e*r+1,i=Math.min((e+1)*r,s);return l.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[l.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",o,"-",i," of ",s]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>n(e-1),disabled:e===0,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:l.jsx(Rx,{className:"w-5 h-5"})}),l.jsxs("div",{className:"text-sm text-white min-w-[60px] text-center",children:[e+1," / ",t]}),l.jsx("button",{onClick:()=>n(e+1),disabled:e>=t-1,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:l.jsx(zx,{className:"w-5 h-5"})})]})]})}const $o=new Map;function V0({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var d;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,[a,u]=m.useState(null);m.useEffect(()=>{var v;if((v=e.ImageTags)!=null&&v.Primary){u(null);return}const w=$o.get(e.Id);if(w!==void 0){u(w);return}let g=!1;return(async()=>{try{const{albums:x,songs:y}=await z.getArtistItems(e.Id),S=x[0],C=y.find(Y=>Y.AlbumId)||y[0],I=S||C,A=I?I.AlbumId||I.Id:null,k=A?z.getAlbumArtUrl(A,96):null;$o.set(e.Id,k),g||u(k)}catch(x){console.error("Failed to load fallback album art for artist (search item):",e.Id,x),$o.set(e.Id,null)}})(),()=>{g=!0}},[e.Id,e.ImageTags]);const h=w=>{if(c||i.current){w.preventDefault(),w.stopPropagation(),i.current=!1;return}t(e.Id)},p=w=>{w.preventDefault(),w.stopPropagation(),i.current=!0,n(e,"artist","desktop",{x:w.clientX,y:w.clientY}),setTimeout(()=>{i.current=!1},100)},f=Ae({onLongPress:w=>{w.preventDefault(),i.current=!0,n(e,"artist","mobile")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left cursor-pointer px-4 h-[72px] ${c?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):a||(d=e.ImageTags)!=null&&d.Primary?l.jsx("img",{src:a||z.getArtistImageUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function Y0({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,f;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,a=d=>{if(c||i.current){d.preventDefault(),d.stopPropagation(),i.current=!1;return}t(e.Id)},u=d=>{d.preventDefault(),d.stopPropagation(),i.current=!0,n(e,"album","desktop",{x:d.clientX,y:d.clientY}),setTimeout(()=>{i.current=!1},100)},h=Ae({onLongPress:d=>{d.preventDefault(),i.current=!0,n(e,"album","mobile")},onClick:a});return l.jsxs("button",{onClick:a,onContextMenu:u,...h,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((f=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:f.Name)||"Unknown Artist"})]})}function W0({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var d,w;const o=m.useRef(!1),i=r===e.Id,[c,a]=m.useState(!1),u=g=>{const N=Math.floor(g/1e7),v=Math.floor(N/60),x=N%60;return`${v}:${x.toString().padStart(2,"0")}`},h=g=>{if(i||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},f=Ae({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:c?l.jsx(Ve,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>a(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(d=e.ArtistItems)==null?void 0:d[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}const er=90,vu=45,q0=45,wu=45,X0=45;function K0(){const{artists:e,setArtists:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:i}=Ee(),{playTrack:c,playAlbum:a,addToQueue:u}=ve(),[h,p]=m.useState(""),[f,d]=m.useState(!1),[w,g]=m.useState(null),[N,v]=m.useState(!1),[x,y]=m.useState(!1),[S,C]=m.useState("mobile"),[I,A]=m.useState(null),[k,Y]=m.useState(null),[_,F]=m.useState(null),[ne,ie]=m.useState(0),[me,se]=m.useState(0),[fe,D]=m.useState(wu),j=Be(),P=m.useRef(null),[L,V]=m.useState([]),[T,le]=m.useState(!1),[W,he]=m.useState(null),pe=n.artists,M=m.useRef(!0),[H,U]=m.useState(!1),R=m.useRef(pe),[O,E]=m.useState(vu),$=L.length>0;m.useEffect(()=>{const J=h.trim().length>0;if(J||$){v(!0);const ye=window.setTimeout(()=>{(async()=>{try{if(J){const ke=await Ts(h,450);g(ke)}else{const ke=await Ms(450);g(ke)}}catch(ke){console.error("Search failed:",ke),g(null)}finally{v(!1)}})()},250);return()=>{window.clearTimeout(ye)}}else g(null),v(!1)},[h,$]);const X=m.useMemo(()=>{if(!w)return null;const J=Te=>{if(L.length>0){const ke=Te.Genres||[];if(!L.some(gt=>ke.some(te=>te.toLowerCase()===gt.toLowerCase())))return!1}return!0},ye=Te=>{if(L.length>0){const ke=Te.Genres||[];if(!L.some(gt=>ke.some(te=>te.toLowerCase()===gt.toLowerCase())))return!1}return!0};return{artists:w.artists.filter(J),albums:w.albums.filter(ye),playlists:w.playlists||[],songs:w.songs.filter(ye)}},[w,L]);m.useEffect(()=>{var J;if(f&&((J=P.current)==null||J.focus(),P.current)){const ye=P.current.value.length;P.current.setSelectionRange(ye,ye)}},[f]);const ee=J=>{p(J),J.trim().length>0&&!f&&d(!0)},ce=()=>{p(""),g(null)},oe=()=>{d(!1),p(""),g(null),V([])},ge=()=>{he("genre"),le(!0)},b=J=>{V(J)},G=J=>{j(`/artist/${J}`),d(!1),p(""),g(null)},B=J=>{j(`/album/${J}`),d(!1),p(""),g(null)},q=J=>{c(J,[J])},ue=J=>{J.preventDefault(),J.stopPropagation(),X!=null&&X.songs&&X.songs.length>0&&a(X.songs)},we=J=>{J.preventDefault(),J.stopPropagation(),X!=null&&X.songs&&X.songs.length>0&&u(X.songs)},K=J=>{j(`/playlist/${J}`),d(!1),p(""),g(null)},re=(J,ye,Te="mobile",ke)=>{Y(J),F(ye),C(Te),A(ke||null),y(!0)},de=async()=>{var ye;const J=Date.now();s("artists",!0);try{const Te={limit:er,startIndex:ne*er};pe==="RecentlyAdded"?(Te.sortBy=["DateCreated"],Te.sortOrder="Descending"):(Te.sortBy=["SortName"],Te.sortOrder="Ascending");let ke=await z.getArtists(Te);(((ye=ke.Items)==null?void 0:ye.length)||0)===0&&(ke=await z.getArtists({limit:er,startIndex:ne*er}));const lt=ke.Items||[];se(ke.TotalRecordCount||0);const gt=Date.now()-J;t(lt)}catch(Te){console.error("Failed to load artists:",Te),t([]),se(0)}finally{s("artists",!1),U(!1)}};return m.useEffect(()=>{!h.trim()&&!f&&ie(0)},[pe,h,f]),m.useEffect(()=>{E(vu)},[h,f,w==null?void 0:w.songs.length]),m.useEffect(()=>{var ye;if(!f||!((ye=w==null?void 0:w.songs)!=null&&ye.length))return;const J=()=>{const Te=window.scrollY||document.documentElement.scrollTop,ke=window.innerHeight||document.documentElement.clientHeight,lt=document.documentElement.scrollHeight;Te+ke*1.5>=lt&&E(gt=>Math.min(gt+q0,w.songs.length))};return window.addEventListener("scroll",J,{passive:!0}),()=>window.removeEventListener("scroll",J)},[f,w==null?void 0:w.songs.length]),m.useEffect(()=>{D(wu)},[ne,e.length]),m.useEffect(()=>{const J=()=>{const ye=window.scrollY||document.documentElement.scrollTop,Te=window.innerHeight||document.documentElement.clientHeight,ke=document.documentElement.scrollHeight;ye+Te*1.5>=ke&&D(lt=>Math.min(lt+X0,e.length))};return window.addEventListener("scroll",J,{passive:!0}),()=>window.removeEventListener("scroll",J)},[e.length]),m.useEffect(()=>{!h.trim()&&!f&&(!M.current&&R.current!==pe&&U(!0),R.current=pe,de())},[ne,pe,h,f]),m.useEffect(()=>{M.current&&(M.current=!1)},[]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Artists"}),l.jsx("button",{onClick:()=>d(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!f&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("artists",pe==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[pe==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(Ps,{className:"w-4 h-4"})]}),o.artists&&!M.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(on,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!f&&l.jsxs("div",{className:H?"opacity-50 pointer-events-none":"",children:[e.length===0&&!o.artists&&l.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:l.jsx("p",{children:"No artists found"})}),e.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-0",children:e.slice(0,fe).map(J=>l.jsx(Q0,{artist:J},J.Id))}),l.jsx(Ya,{currentPage:ne,totalPages:Math.ceil(me/er),onPageChange:ie,itemsPerPage:er,totalItems:me})]})]})})]}),f&&Jn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Wn,{ref:P,value:h,onChange:ee,showClearButton:h.trim().length>0,onClear:ce})}),l.jsx("button",{onClick:oe,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsx("div",{className:"flex items-center gap-3 px-4",children:l.jsxs("button",{onClick:ge,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${L.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Yn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]})})}),l.jsx("div",{className:"pb-32 pt-4",children:N?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):X?l.jsxs("div",{className:"space-y-8",children:[X.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:X.artists.map(J=>l.jsx(V0,{artist:J,onClick:G,onContextMenu:re,contextMenuItemId:(k==null?void 0:k.Id)||null},J.Id))})]}),X.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:X.albums.slice(0,12).map(J=>l.jsx(Y0,{album:J,onClick:B,onContextMenu:re,contextMenuItemId:(k==null?void 0:k.Id)||null},J.Id))})]}),X.playlists&&X.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:X.playlists.map(J=>l.jsxs("button",{onClick:()=>K(J.Id),onContextMenu:ye=>{ye.preventDefault(),ye.stopPropagation(),re(J,"playlist","desktop",{x:ye.clientX,y:ye.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:z.getAlbumArtUrl(J.Id,96),alt:J.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:J.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:"Playlist"})]})]},J.Id))})]}),X.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:ue,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:we,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ut,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:X.songs.map((J,ye)=>l.jsx(W0,{song:J,onClick:q,onContextMenu:re,contextMenuItemId:(k==null?void 0:k.Id)||null,showImage:ye<O},J.Id))})]}),X.artists.length===0&&X.albums.length===0&&(!X.playlists||X.playlists.length===0)&&X.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),W==="genre"&&l.jsx(qn,{isOpen:T,onClose:()=>le(!1),filterType:"genre",genres:i,selectedValues:L,onApply:b}),l.jsx(Qe,{item:k,itemType:_,isOpen:x,onClose:()=>{y(!1),Y(null),F(null)},zIndex:99999,mode:S,position:I||void 0})]})}function J0({album:e}){var w,g;const t=Be(),[n,r]=m.useState(!1),[s,o]=m.useState("mobile"),[i,c]=m.useState(null),[a,u]=m.useState(!1),h=m.useRef(!1),p=N=>{if(h.current){N.preventDefault(),h.current=!1;return}t(`/album/${e.Id}`)},f=Ae({onLongPress:N=>{N.preventDefault(),h.current=!0,o("mobile"),c(null),r(!0)},onClick:p}),d=N=>{N.preventDefault(),N.stopPropagation(),h.current=!0,o("desktop"),c({x:N.clientX,y:N.clientY}),r(!0),setTimeout(()=>{h.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:p,onContextMenu:d,...f,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 relative flex items-center justify-center",children:a?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsx(at,{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>u(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((g=(w=e.ArtistItems)==null?void 0:w[0])==null?void 0:g.Name)||"Unknown Artist"})]}),l.jsx(Qe,{item:e,itemType:"album",isOpen:n,onClose:()=>r(!1),mode:s,position:i||void 0})]})}const Oo=new Map;function Z0({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var d,w;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,[a,u]=m.useState(null);m.useEffect(()=>{var x;if((x=e.ImageTags)!=null&&x.Primary){u(null);return}const g=Oo.get(e.Id);if(g!==void 0){u(g);return}let N=!1;return(async()=>{try{const{albums:y,songs:S}=await z.getArtistItems(e.Id),C=y[0],I=S.find(_=>_.AlbumId)||S[0],A=C||I,k=A?A.AlbumId||A.Id:null,Y=k?z.getAlbumArtUrl(k,96):null;Oo.set(e.Id,Y),N||u(Y)}catch(y){console.error("Failed to load fallback album art for artist (albums search):",e.Id,y),Oo.set(e.Id,null)}})(),()=>{N=!0}},[e.Id,e.ImageTags]);const h=g=>{if(c||i.current){g.preventDefault(),g.stopPropagation(),i.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),i.current=!0,n(e,"artist","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{i.current=!1},100)},f=Ae({onLongPress:g=>{g.preventDefault(),i.current=!0,n(e,"artist","mobile")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${c?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(d=e.ImageTags)!=null&&d.Primary||a?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?z.getArtistImageUrl(e.Id,96):a||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function ey({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,f;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,a=d=>{if(c||i.current){d.preventDefault(),d.stopPropagation(),i.current=!1;return}t(e.Id)},u=d=>{d.preventDefault(),d.stopPropagation(),i.current=!0,n(e,"album","desktop",{x:d.clientX,y:d.clientY}),setTimeout(()=>{i.current=!1},100)},h=Ae({onLongPress:d=>{d.preventDefault(),i.current=!0,n(e,"album","mobile")},onClick:a});return l.jsxs("button",{onClick:a,onContextMenu:u,...h,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((f=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:f.Name)||"Unknown Artist"})]})}function ty({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var d,w;const o=m.useRef(!1),i=r===e.Id,[c,a]=m.useState(!1),u=g=>{const N=Math.floor(g/1e7),v=Math.floor(N/60),x=N%60;return`${v}:${x.toString().padStart(2,"0")}`},h=g=>{if(i||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},f=Ae({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:c?l.jsx(Ve,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>a(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(d=e.ArtistItems)==null?void 0:d[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}const Ks=90,Nu=45,ny=45,Su=45,ry=45;function sy(){const{albums:e,setAlbums:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:i}=Ee(),{playTrack:c,playAlbum:a,addToQueue:u}=ve(),[h,p]=m.useState(""),[f,d]=m.useState(!1),[w,g]=m.useState(null),[N,v]=m.useState(!1),[x,y]=m.useState(!1),[S,C]=m.useState("mobile"),[I,A]=m.useState(null),[k,Y]=m.useState(null),[_,F]=m.useState(null),[ne,ie]=m.useState(0),[me,se]=m.useState(0),[fe,D]=m.useState(Nu),j=Be(),[P,L]=Ug(),V=m.useRef(null),[T,le]=m.useState([]),[W,he]=m.useState({min:null,max:null}),[pe,M]=m.useState(!1),[H,U]=m.useState(null),[R,O]=m.useState([]),E=n.albums,$=m.useRef(!0),[X,ee]=m.useState(!1),ce=m.useRef(E),[oe,ge]=m.useState(Su);m.useEffect(()=>{const Q=P.get("year");if(Q){const xe=parseInt(Q,10);!isNaN(xe)&&xe>0&&(he({min:xe,max:xe}),d(!0),L({},{replace:!0}))}},[P,L]),m.useEffect(()=>{(async()=>{try{const xe=Ee.getState();if(xe.years.length>0)O(xe.years);else{const Ce=await z.getYears();O(Ce)}}catch(xe){console.error("Failed to load filter values:",xe)}})()},[]);const b=T.length>0||W.min!==null||W.max!==null;m.useEffect(()=>{const Q=h.trim().length>0;if(Q||b){v(!0);const xe=window.setTimeout(()=>{(async()=>{try{if(Q){const je=await Ts(h,450);g(je)}else{const je=await Ms(450);g(je)}}catch(je){console.error("Search failed:",je),g(null)}finally{v(!1)}})()},250);return()=>{window.clearTimeout(xe)}}else g(null),v(!1)},[h,b]);const G=m.useMemo(()=>{if(!w)return null;const Q=je=>{if(W.min!==null||W.max!==null)return!1;if(T.length>0){const Je=je.Genres||[];if(!T.some(Mn=>Je.some(lo=>lo.toLowerCase()===Mn.toLowerCase())))return!1}return!0},xe=je=>{if(T.length>0){const Je=je.Genres||[];if(!T.some(Mn=>Je.some(lo=>lo.toLowerCase()===Mn.toLowerCase())))return!1}if(W.min!==null||W.max!==null){const Je=je.ProductionYear;if(!Je||Je<=0||W.min!==null&&Je<W.min||W.max!==null&&Je>W.max)return!1}return!0},Ce=je=>!(W.min!==null||W.max!==null||T.length>0);return{albums:w.albums.filter(xe),artists:w.artists.filter(Q),playlists:(w.playlists||[]).filter(Ce),songs:w.songs.filter(xe)}},[w,T,W]);m.useEffect(()=>{var Q;if(f&&((Q=V.current)==null||Q.focus(),V.current)){const xe=V.current.value.length;V.current.setSelectionRange(xe,xe)}},[f]);const B=Q=>{p(Q),Q.trim().length>0&&!f&&d(!0)},q=()=>{p(""),g(null)},ue=()=>{d(!1),p(""),g(null),le([]),he({min:null,max:null})},we=Q=>{U(Q),M(!0)},K=Q=>{le(Q)},re=Q=>{he(Q)},de=Q=>{j(`/artist/${Q}`),d(!1),p(""),g(null)},J=Q=>{j(`/album/${Q}`),d(!1),p(""),g(null)},ye=Q=>{c(Q,[Q])},Te=Q=>{Q.preventDefault(),Q.stopPropagation(),G!=null&&G.songs&&G.songs.length>0&&a(G.songs)},ke=Q=>{Q.preventDefault(),Q.stopPropagation(),G!=null&&G.songs&&G.songs.length>0&&u(G.songs)},lt=Q=>{j(`/playlist/${Q}`),d(!1),p(""),g(null)},gt=(Q,xe,Ce="mobile",je)=>{Y(Q),F(xe),C(Ce),A(je||null),y(!0)};m.useEffect(()=>{h.trim()||ie(0)},[E,h]),m.useEffect(()=>{ge(Su)},[h,f,w==null?void 0:w.songs.length]),m.useEffect(()=>{var xe;if(!f||!((xe=w==null?void 0:w.songs)!=null&&xe.length))return;const Q=()=>{const Ce=window.scrollY||document.documentElement.scrollTop,je=window.innerHeight||document.documentElement.clientHeight,Je=document.documentElement.scrollHeight;Ce+je*1.5>=Je&&ge(Gt=>Math.min(Gt+ry,w.songs.length))};return window.addEventListener("scroll",Q,{passive:!0}),()=>window.removeEventListener("scroll",Q)},[f,w==null?void 0:w.songs.length]),m.useEffect(()=>{D(Nu)},[ne,e.length]),m.useEffect(()=>{const Q=()=>{const xe=window.scrollY||document.documentElement.scrollTop,Ce=window.innerHeight||document.documentElement.clientHeight,je=document.documentElement.scrollHeight;xe+Ce*1.5>=je&&D(Je=>Math.min(Je+ny,e.length))};return window.addEventListener("scroll",Q,{passive:!0}),()=>window.removeEventListener("scroll",Q)},[e.length]),m.useEffect(()=>{h.trim()||(!$.current&&ce.current!==E&&ee(!0),ce.current=E,te())},[ne,E,h]),m.useEffect(()=>{$.current&&($.current=!1)},[]);const te=async()=>{s("albums",!0);try{const Q={limit:Ks,startIndex:ne*Ks};E==="RecentlyAdded"?(Q.sortBy=["DateCreated"],Q.sortOrder="Descending"):(Q.sortBy=["SortName"],Q.sortOrder="Ascending");const xe=await z.getAlbums(Q);t(xe.Items),se(xe.TotalRecordCount||0)}catch(Q){console.error("Failed to load albums:",Q),t([]),se(0)}finally{s("albums",!1),ee(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Albums"}),l.jsx("button",{onClick:()=>d(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!f&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("albums",E==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[E==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(Ps,{className:"w-4 h-4"})]}),o.albums&&!$.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(on,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!f&&l.jsx("div",{className:X?"opacity-50 pointer-events-none":"",children:e.length===0&&!o.albums?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No albums found"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:e.slice(0,fe).map(Q=>l.jsx(J0,{album:Q},Q.Id))})}),l.jsx(Ya,{currentPage:ne,totalPages:Math.ceil(me/Ks),onPageChange:ie,itemsPerPage:Ks,totalItems:me})]})})})]}),f&&Jn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Wn,{ref:V,value:h,onChange:B,showClearButton:h.trim().length>0,onClear:q})}),l.jsx("button",{onClick:ue,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>we("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${T.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Yn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>we("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${W.min!==null||W.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx(Fa,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:N?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):G?l.jsxs("div",{className:"space-y-8",children:[G.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:G.albums.map(Q=>l.jsx(ey,{album:Q,onClick:J,onContextMenu:gt,contextMenuItemId:(k==null?void 0:k.Id)||null},Q.Id))})]}),G.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:G.artists.slice(0,5).map(Q=>l.jsx(Z0,{artist:Q,onClick:de,onContextMenu:gt,contextMenuItemId:(k==null?void 0:k.Id)||null},Q.Id))})]}),G.playlists&&G.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:G.playlists.map(Q=>l.jsxs("button",{onClick:()=>lt(Q.Id),onContextMenu:xe=>{xe.preventDefault(),xe.stopPropagation(),gt(Q,"playlist","desktop",{x:xe.clientX,y:xe.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:z.getAlbumArtUrl(Q.Id,96),alt:Q.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:Q.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:Q.ChildCount?`${Q.ChildCount} tracks`:"Playlist"})]})]},Q.Id))})]}),G.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:Te,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:ke,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ut,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:G.songs.map((Q,xe)=>l.jsx(ty,{song:Q,onClick:ye,onContextMenu:gt,contextMenuItemId:(k==null?void 0:k.Id)||null,showImage:xe<oe},Q.Id))})]}),G.artists.length===0&&G.albums.length===0&&(!G.playlists||G.playlists.length===0)&&G.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),H==="genre"&&l.jsx(qn,{isOpen:pe,onClose:()=>M(!1),filterType:"genre",genres:i,selectedValues:T,onApply:K}),H==="year"&&l.jsx(qn,{isOpen:pe,onClose:()=>M(!1),filterType:"year",availableYears:R,yearRange:W,onApplyYear:re}),l.jsx(Qe,{item:k,itemType:_,isOpen:x,onClose:()=>{y(!1),Y(null),F(null)},zIndex:99999,mode:S,position:I||void 0})]})}function om({song:e,showImage:t=!0}){var v,x;const{playTrack:n,currentTrack:r}=ve(),[s,o]=m.useState(!1),[i,c]=m.useState("mobile"),[a,u]=m.useState(null),h=m.useRef(!1),[p,f]=m.useState(!1),d=y=>{const S=Math.floor(y/1e7),C=Math.floor(S/60),I=S%60;return`${C}:${I.toString().padStart(2,"0")}`},w=y=>{if(h.current){y.preventDefault(),h.current=!1;return}n(e)},g=Ae({onLongPress:y=>{y.preventDefault(),h.current=!0,c("mobile"),u(null),o(!0)},onClick:w}),N=y=>{y.preventDefault(),y.stopPropagation(),h.current=!0,c("desktop"),u({x:y.clientX,y:y.clientY}),o(!0),setTimeout(()=>{h.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:y=>{if(s||h.current){y.preventDefault(),y.stopPropagation();return}w(y)},onContextMenu:N,...g,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${s?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:p?l.jsx(Ve,{className:"w-7 h-7 text-gray-500"}):t?l.jsx(at,{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>f(!0)}):l.jsx("div",{className:"w-full h-full bg-zinc-900"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(r==null?void 0:r.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((x=(v=e.ArtistItems)==null?void 0:v[0])==null?void 0:x.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:d(e.RunTimeTicks)})]}),l.jsx(Qe,{item:e,itemType:"song",isOpen:s,onClose:()=>o(!1),mode:i,position:a||void 0})]})}const Fo=new Map;function ly({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var d;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,[a,u]=m.useState(null);m.useEffect(()=>{var v;if((v=e.ImageTags)!=null&&v.Primary){u(null);return}const w=Fo.get(e.Id);if(w!==void 0){u(w);return}let g=!1;return(async()=>{try{const{albums:x,songs:y}=await z.getArtistItems(e.Id),S=x[0],C=y.find(Y=>Y.AlbumId)||y[0],I=S||C,A=I?I.AlbumId||I.Id:null,k=A?z.getAlbumArtUrl(A,96):null;Fo.set(e.Id,k),g||u(k)}catch(x){console.error("Failed to load fallback album art for artist (search item):",e.Id,x),Fo.set(e.Id,null)}})(),()=>{g=!0}},[e.Id,e.ImageTags]);const h=w=>{if(c||i.current){w.preventDefault(),w.stopPropagation(),i.current=!1;return}t(e.Id)},p=w=>{w.preventDefault(),w.stopPropagation(),i.current=!0,n(e,"artist","desktop",{x:w.clientX,y:w.clientY}),setTimeout(()=>{i.current=!1},100)},f=Ae({onLongPress:w=>{w.preventDefault(),i.current=!0,n(e,"artist","mobile")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left cursor-pointer px-4 h-[72px] ${c?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):a||(d=e.ImageTags)!=null&&d.Primary?l.jsx("img",{src:a||z.getArtistImageUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function oy({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,f;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,a=d=>{if(c||i.current){d.preventDefault(),d.stopPropagation(),i.current=!1;return}t(e.Id)},u=d=>{d.preventDefault(),d.stopPropagation(),i.current=!0,n(e,"album","desktop",{x:d.clientX,y:d.clientY}),setTimeout(()=>{i.current=!1},100)},h=Ae({onLongPress:d=>{d.preventDefault(),i.current=!0,n(e,"album","mobile")},onClick:a});return l.jsxs("button",{onClick:a,onContextMenu:u,...h,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((f=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:f.Name)||"Unknown Artist"})]})}function iy({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var d,w;const o=m.useRef(!1),i=r===e.Id,[c,a]=m.useState(!1),u=g=>{const N=Math.floor(g/1e7),v=Math.floor(N/60),x=N%60;return`${v}:${x.toString().padStart(2,"0")}`},h=g=>{if(i||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{o.current=!1},100)},f=Ae({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song","mobile")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:c?l.jsx(Ve,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>a(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(d=e.ArtistItems)==null?void 0:d[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}const Js=90,Iu=45,ay=45,ju=45,cy=45;function uy(){const{songs:e,setSongs:t,sortPreferences:n,setSortPreference:r,setLoading:s,loading:o,genres:i}=Ee(),{playTrack:c,playAlbum:a,addToQueue:u}=ve(),[h,p]=m.useState(""),[f,d]=m.useState(!1),[w,g]=m.useState(null),[N,v]=m.useState(!1),[x,y]=m.useState("mobile"),[S,C]=m.useState(null),[I,A]=m.useState(null),[k,Y]=m.useState(null),[_,F]=m.useState(!1),[ne,ie]=m.useState(0),[me,se]=m.useState(0),fe=Be(),D=m.useRef(null),j=m.useRef(null),[P,L]=m.useState([]),[V,T]=m.useState({min:null,max:null}),[le,W]=m.useState(!1),[he,pe]=m.useState(null),[M,H]=m.useState([]),U=n.songs,R=m.useRef(!0),[O,E]=m.useState(!1),$=m.useRef(U),[X,ee]=m.useState(Iu),[ce,oe]=m.useState(ju);m.useEffect(()=>{(async()=>{try{const Q=Ee.getState();if(Q.years.length>0)H(Q.years);else{const xe=await z.getYears();H(xe)}}catch(Q){console.error("Failed to load filter values:",Q)}})()},[]);const ge=P.length>0||V.min!==null||V.max!==null;m.useEffect(()=>{const te=h.trim().length>0;if(te||ge){F(!0);const Q=window.setTimeout(()=>{(async()=>{try{if(te){const Ce=await Ts(h,450);g(Ce)}else{const Ce=await Ms(450);g(Ce)}}catch(Ce){console.error("Search failed:",Ce),g(null)}finally{F(!1)}})()},250);return()=>{window.clearTimeout(Q)}}else g(null),F(!1)},[h,ge]);const b=m.useMemo(()=>{if(!w)return null;const te=Ce=>{if(V.min!==null||V.max!==null)return!1;if(P.length>0){const je=Ce.Genres||[];if(!P.some(Gt=>je.some(Mn=>Mn.toLowerCase()===Gt.toLowerCase())))return!1}return!0},Q=Ce=>{if(P.length>0){const je=Ce.Genres||[];if(!P.some(Gt=>je.some(Mn=>Mn.toLowerCase()===Gt.toLowerCase())))return!1}if(V.min!==null||V.max!==null){const je=Ce.ProductionYear;if(!je||je<=0||V.min!==null&&je<V.min||V.max!==null&&je>V.max)return!1}return!0},xe=Ce=>!(V.min!==null||V.max!==null||P.length>0);return{songs:w.songs.filter(Q),artists:w.artists.filter(te),albums:w.albums.filter(Q),playlists:(w.playlists||[]).filter(xe)}},[w,P,V]);m.useEffect(()=>{var te;if(f&&((te=D.current)==null||te.focus(),D.current)){const Q=D.current.value.length;D.current.setSelectionRange(Q,Q)}},[f]);const G=te=>{p(te),te.trim().length>0&&!f&&d(!0)},B=()=>{p(""),g(null)},q=()=>{d(!1),p(""),g(null),L([]),T({min:null,max:null})},ue=te=>{pe(te),W(!0)},we=te=>{L(te)},K=te=>{T(te)},re=te=>{fe(`/artist/${te}`),d(!1),p(""),g(null)},de=te=>{fe(`/album/${te}`),d(!1),p(""),g(null)},J=te=>{c(te,[te])},ye=te=>{te.preventDefault(),te.stopPropagation(),b!=null&&b.songs&&b.songs.length>0&&a(b.songs)},Te=te=>{te.preventDefault(),te.stopPropagation(),b!=null&&b.songs&&b.songs.length>0&&u(b.songs)},ke=te=>{fe(`/playlist/${te}`),d(!1),p(""),g(null)},lt=(te,Q,xe="mobile",Ce)=>{A(te),Y(Q),y(xe),C(Ce||null),v(!0)};m.useEffect(()=>{h.trim()||ie(0)},[U,h]),m.useEffect(()=>{oe(ju)},[h,f,w==null?void 0:w.songs.length]),m.useEffect(()=>{var xe;const te=j.current;if(!f||!te||!((xe=w==null?void 0:w.songs)!=null&&xe.length))return;const Q=()=>{const Ce=te.scrollTop,je=te.clientHeight,Je=te.scrollHeight;Ce+je*1.5>=Je&&oe(Gt=>Math.min(Gt+cy,w.songs.length))};return te.addEventListener("scroll",Q,{passive:!0}),()=>te.removeEventListener("scroll",Q)},[f,w==null?void 0:w.songs.length,ce]),m.useEffect(()=>{ee(Iu)},[ne,e.length]),m.useEffect(()=>{const te=()=>{const Q=window.scrollY||document.documentElement.scrollTop,xe=window.innerHeight||document.documentElement.clientHeight,Ce=document.documentElement.scrollHeight;Q+xe*1.5>=Ce&&ee(je=>Math.min(je+ay,e.length))};return window.addEventListener("scroll",te,{passive:!0}),()=>window.removeEventListener("scroll",te)},[e.length]),m.useEffect(()=>{h.trim()||(!R.current&&$.current!==U&&E(!0),$.current=U,gt())},[ne,U,h]),m.useEffect(()=>{R.current&&(R.current=!1)},[]);const gt=async()=>{s("songs",!0);try{const te={limit:Js,startIndex:ne*Js};U==="RecentlyAdded"?(te.sortBy=["DateCreated"],te.sortOrder="Descending"):(te.sortBy=["SortName"],te.sortOrder="Ascending");const Q=await z.getSongs(te);t(Q.Items),se(Q.TotalRecordCount||0)}catch(te){console.error("Failed to load songs:",te),t([]),se(0)}finally{s("songs",!1),E(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Songs"}),l.jsx("button",{onClick:()=>d(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!f&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>r("songs",U==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[U==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(Ps,{className:"w-4 h-4"})]}),o.songs&&!R.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(on,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!f&&l.jsx("div",{className:O?"opacity-50 pointer-events-none":"",children:e.length===0&&!o.songs?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No songs found"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-0",children:e.map((te,Q)=>l.jsx(om,{song:te,showImage:Q<X},te.Id))}),l.jsx(Ya,{currentPage:ne,totalPages:Math.ceil(me/Js),onPageChange:ie,itemsPerPage:Js,totalItems:me})]})})})]}),f&&Jn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{ref:j,className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Wn,{ref:D,value:h,onChange:G,showClearButton:h.trim().length>0,onClear:B})}),l.jsx("button",{onClick:q,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[l.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4 border-b border-zinc-800",style:{top:"calc(76px + env(safe-area-inset-top))"},children:l.jsxs("div",{className:"flex items-center gap-3 px-4",children:[l.jsxs("button",{onClick:()=>ue("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${P.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[l.jsx(Yn,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),l.jsxs("button",{onClick:()=>ue("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${V.min!==null||V.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[l.jsx(Fa,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),l.jsx("div",{className:"pb-32 pt-4",children:_?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):b?l.jsxs("div",{className:"space-y-8",children:[b.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:ye,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Te,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ut,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:b.songs.map((te,Q)=>l.jsx(iy,{song:te,onClick:J,onContextMenu:lt,contextMenuItemId:(I==null?void 0:I.Id)||null,showImage:Q<ce},te.Id))})]}),b.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:b.artists.slice(0,5).map(te=>l.jsx(ly,{artist:te,onClick:re,onContextMenu:lt,contextMenuItemId:(I==null?void 0:I.Id)||null},te.Id))})]}),b.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:b.albums.slice(0,12).map(te=>l.jsx(oy,{album:te,onClick:de,onContextMenu:lt,contextMenuItemId:(I==null?void 0:I.Id)||null},te.Id))})]}),b.playlists&&b.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:b.playlists.map(te=>l.jsxs("button",{onClick:()=>ke(te.Id),onContextMenu:Q=>{Q.preventDefault(),Q.stopPropagation(),lt(te,"playlist","desktop",{x:Q.clientX,y:Q.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:z.getAlbumArtUrl(te.Id,96),alt:te.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:te.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:te.ChildCount?`${te.ChildCount} tracks`:"Playlist"})]})]},te.Id))})]}),b.artists.length===0&&b.albums.length===0&&(!b.playlists||b.playlists.length===0)&&b.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})}),document.body),he==="genre"&&l.jsx(qn,{isOpen:le,onClose:()=>W(!1),filterType:"genre",genres:i,selectedValues:P,onApply:we}),he==="year"&&l.jsx(qn,{isOpen:le,onClose:()=>W(!1),filterType:"year",availableYears:M,yearRange:V,onApplyYear:K}),l.jsx(Qe,{item:I,itemType:k,isOpen:N,onClose:()=>{v(!1),A(null),Y(null)},zIndex:99999,mode:x,position:S||void 0})]})}function dy({genre:e}){const t=Be();return l.jsx("button",{onClick:()=>t(`/genre/${e.Id}`),className:"w-full flex items-center justify-between h-12 pl-4 pr-4 hover:bg-zinc-900 transition-colors group",children:l.jsx("div",{className:"text-base font-medium text-white group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})}function fy(){const{genres:e,setGenres:t,setLoading:n,loading:r}=Ee();return m.useEffect(()=>{if(e.length>0)return;(async()=>{n("genres",!0);try{const i=(await z.getGenres()||[]).sort((c,a)=>(c.Name||"").localeCompare(a.Name||""));t(i)}catch(o){console.error("Failed to load genres:",o),t([])}finally{n("genres",!1)}})()},[e.length,t,n]),l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Genres"}),r.genres&&l.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:l.jsx(on,{})}),!r.genres&&l.jsx("div",{className:"w-10 h-10"})]})})})}),l.jsxs("div",{className:"pb-4",style:{paddingTop:"calc(env(safe-area-inset-top) + 6rem)"},children:[e.length===0&&!r.genres&&l.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:l.jsx("p",{children:"No genres found"})}),e.length>0&&l.jsx("div",{className:"space-y-2",children:[...e].sort((s,o)=>(s.Name||"").localeCompare(o.Name||"")).map(s=>l.jsx(dy,{genre:s},s.Id))})]})]})}function my({playlist:e}){const t=Be(),[n,r]=m.useState(!1),[s,o]=m.useState("mobile"),[i,c]=m.useState(null),a=m.useRef(!1),u=f=>{if(a.current){f.preventDefault(),a.current=!1;return}t(`/playlist/${e.Id}`)},h=Ae({onLongPress:f=>{f.preventDefault(),a.current=!0,o("mobile"),c(null),r(!0)},onClick:u}),p=f=>{f.preventDefault(),f.stopPropagation(),a.current=!0,o("desktop"),c({x:f.clientX,y:f.clientY}),r(!0),setTimeout(()=>{a.current=!1},100)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:f=>{if(n||a.current){f.preventDefault(),f.stopPropagation();return}u(f)},onContextMenu:p,...h,className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(at,{src:z.getAlbumArtUrl(e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left flex flex-col justify-center",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.ChildCount?`${e.ChildCount} tracks`:"Playlist"})]})]}),l.jsx(Qe,{item:e,itemType:"playlist",isOpen:n,onClose:()=>r(!1),mode:s,position:i||void 0})]})}const Uo=new Map;function hy({artist:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var d,w;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,[a,u]=m.useState(null);m.useEffect(()=>{var x;if((x=e.ImageTags)!=null&&x.Primary){u(null);return}const g=Uo.get(e.Id);if(g!==void 0){u(g);return}let N=!1;return(async()=>{try{const{albums:y,songs:S}=await z.getArtistItems(e.Id),C=y[0],I=S.find(_=>_.AlbumId)||S[0],A=C||I,k=A?A.AlbumId||A.Id:null,Y=k?z.getAlbumArtUrl(k,96):null;Uo.set(e.Id,Y),N||u(Y)}catch(y){console.error("Failed to load fallback album art for artist (playlists search):",e.Id,y),Uo.set(e.Id,null)}})(),()=>{N=!0}},[e.Id,e.ImageTags]);const h=g=>{if(c||i.current){g.preventDefault(),g.stopPropagation(),i.current=!1;return}t(e.Id)},p=g=>{g.preventDefault(),g.stopPropagation(),i.current=!0,n(e,"artist"),setTimeout(()=>{i.current=!1},100)},f=Ae({onLongPress:g=>{g.preventDefault(),i.current=!0,n(e,"artist")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-4 hover:bg-white/10 transition-colors text-left px-4 h-[72px] ${c?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(st,{className:"w-6 h-6 text-gray-500"}):(d=e.ImageTags)!=null&&d.Primary||a?l.jsx("img",{src:(w=e.ImageTags)!=null&&w.Primary?z.getArtistImageUrl(e.Id,96):a||"",alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"}):l.jsx(st,{className:"w-6 h-6 text-gray-500"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-base font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name})})]})}function py({album:e,onClick:t,onContextMenu:n,contextMenuItemId:r}){var p,f;const[s,o]=m.useState(!1),i=m.useRef(!1),c=r===e.Id,a=d=>{if(c||i.current){d.preventDefault(),d.stopPropagation(),i.current=!1;return}t(e.Id)},u=d=>{d.preventDefault(),d.stopPropagation(),i.current=!0,n(e,"album"),setTimeout(()=>{i.current=!1},100)},h=Ae({onLongPress:d=>{d.preventDefault(),i.current=!0,n(e,"album")},onClick:a});return l.jsxs("button",{onClick:a,onContextMenu:u,...h,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:s?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",onError:()=>o(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:e.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:e.AlbumArtist||((f=(p=e.ArtistItems)==null?void 0:p[0])==null?void 0:f.Name)||"Unknown Artist"})]})}function gy({song:e,onClick:t,onContextMenu:n,contextMenuItemId:r,showImage:s=!0}){var d,w;const o=m.useRef(!1),i=r===e.Id,[c,a]=m.useState(!1),u=g=>{const N=Math.floor(g/1e7),v=Math.floor(N/60),x=N%60;return`${v}:${x.toString().padStart(2,"0")}`},h=g=>{if(i||o.current){g.preventDefault(),g.stopPropagation(),o.current=!1;return}t(e)},p=g=>{g.preventDefault(),g.stopPropagation(),o.current=!0,n(e,"song"),setTimeout(()=>{o.current=!1},100)},f=Ae({onLongPress:g=>{g.preventDefault(),o.current=!0,n(e,"song")},onClick:h});return l.jsxs("button",{onClick:h,onContextMenu:p,...f,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:c?l.jsx(Ve,{className:"w-7 h-7 text-gray-500"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>a(!0)}),l.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((w=(d=e.ArtistItems)==null?void 0:d[0])==null?void 0:w.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:u(e.RunTimeTicks)})]})}function xy(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),{sortPreferences:s,setSortPreference:o}=Ee(),{playTrack:i,playAlbum:c,addToQueue:a}=ve(),u=s.playlists,h=m.useRef(!0),[p,f]=m.useState(!1),d=m.useRef(u),w=Be(),g=m.useRef(null),[N,v]=m.useState(""),[x,y]=m.useState(!1),[S,C]=m.useState(null),[I,A]=m.useState(!1),[k,Y]=m.useState(!1),[_,F]=m.useState(null),[ne,ie]=m.useState(null),[me,se]=m.useState("mobile"),[fe,D]=m.useState(null),[j,P]=m.useState(45);m.useEffect(()=>{x||(!h.current&&d.current!==u&&f(!0),d.current=u,L())},[u,x]),m.useEffect(()=>{h.current&&(h.current=!1)},[]),m.useEffect(()=>{if(N.trim()){A(!0);const E=window.setTimeout(()=>{(async()=>{try{const X=await Ts(N,450);C(X)}catch(X){console.error("Search failed:",X),C(null)}finally{A(!1)}})()},250);return()=>{window.clearTimeout(E)}}else C(null),A(!1)},[N]),m.useEffect(()=>{P(45)},[N,x,S==null?void 0:S.songs.length]),m.useEffect(()=>{var $;if(!x||!(($=S==null?void 0:S.songs)!=null&&$.length))return;const E=()=>{const X=window.scrollY||document.documentElement.scrollTop,ee=window.innerHeight||document.documentElement.clientHeight,ce=document.documentElement.scrollHeight;X+ee*1.5>=ce&&P(oe=>Math.min(oe+45,S.songs.length))};return window.addEventListener("scroll",E,{passive:!0}),()=>window.removeEventListener("scroll",E)},[x,S==null?void 0:S.songs.length]),m.useEffect(()=>{var E;if(x&&((E=g.current)==null||E.focus(),g.current)){const $=g.current.value.length;g.current.setSelectionRange($,$)}},[x]);const L=async()=>{r(!0);try{const E={limit:100};u==="RecentlyAdded"?(E.sortBy=["DateCreated"],E.sortOrder="Descending"):(E.sortBy=["SortName"],E.sortOrder="Ascending");const $=await z.getPlaylists(E);t($.Items)}catch(E){console.error("Failed to load playlists:",E)}finally{r(!1),f(!1)}},V=E=>{v(E),E.trim().length>0&&!x&&y(!0)},T=()=>{v(""),C(null)},le=()=>{y(!1),v(""),C(null)},W=E=>{w(`/artist/${E}`),y(!1),v(""),C(null)},he=E=>{w(`/album/${E}`),y(!1),v(""),C(null)},pe=E=>{i(E,[E])},M=E=>{E.preventDefault(),E.stopPropagation(),O!=null&&O.songs&&O.songs.length>0&&c(O.songs)},H=E=>{E.preventDefault(),E.stopPropagation(),O!=null&&O.songs&&O.songs.length>0&&a(O.songs)},U=E=>{w(`/playlist/${E}`),y(!1),v(""),C(null)},R=(E,$,X="mobile",ee)=>{F(E),ie($),se(X),D(ee||null),Y(!0)},O=m.useMemo(()=>S?{playlists:S.playlists||[],artists:S.artists||[],albums:S.albums||[],songs:S.songs||[]}:null,[S]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Playlists"}),l.jsx("button",{onClick:()=>y(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!x&&l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("button",{onClick:()=>o("playlists",u==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[u==="RecentlyAdded"?"Recently Added":"Alphabetically",l.jsx(Ps,{className:"w-4 h-4"})]}),n&&!h.current&&l.jsx("div",{className:"flex items-center",children:l.jsx(on,{})})]})]})})}),l.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:!x&&l.jsx("div",{className:p?"opacity-50 pointer-events-none":"",children:e.length===0&&!n?l.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:l.jsx("p",{children:"No playlists found"})}):l.jsx("div",{className:"space-y-0",children:e.map(E=>l.jsx(my,{playlist:E},E.Id))})})})]}),x&&Jn.createPortal(l.jsx(l.Fragment,{children:l.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:l.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Wn,{ref:g,value:N,onChange:V,showClearButton:N.trim().length>0,onClear:T})}),l.jsx("button",{onClick:le,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),l.jsx("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:l.jsx("div",{className:"pb-32 pt-4",children:I?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):O?l.jsxs("div",{className:"space-y-8",children:[O.playlists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),l.jsx("div",{className:"space-y-0",children:O.playlists.map(E=>l.jsxs("button",{onClick:()=>U(E.Id),onContextMenu:$=>{$.preventDefault(),$.stopPropagation(),R(E,"playlist","desktop",{x:$.clientX,y:$.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx("img",{src:z.getAlbumArtUrl(E.Id,96),alt:E.Name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:E.Name}),l.jsx("div",{className:"text-xs text-gray-400 truncate",children:E.ChildCount?`${E.ChildCount} tracks`:"Playlist"})]})]},E.Id))})]}),O.artists.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),l.jsx("div",{className:"space-y-0",children:O.artists.slice(0,5).map(E=>l.jsx(hy,{artist:E,onClick:W,onContextMenu:R,contextMenuItemId:(_==null?void 0:_.Id)||null},E.Id))})]}),O.albums.length>0&&l.jsxs("div",{className:"px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:O.albums.slice(0,12).map(E=>l.jsx(py,{album:E,onClick:he,onContextMenu:R,contextMenuItemId:(_==null?void 0:_.Id)||null},E.Id))})]}),O.songs.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:M,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:H,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ut,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"space-y-0",children:O.songs.map((E,$)=>l.jsx(gy,{song:E,onClick:pe,onContextMenu:R,contextMenuItemId:(_==null?void 0:_.Id)||null,showImage:$<j},E.Id))})]}),O.playlists.length===0&&O.artists.length===0&&O.albums.length===0&&O.songs.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[l.jsx("div",{className:"text-lg mb-2",children:"No results found"}),l.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):l.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})})]})}),document.body),l.jsx(Qe,{item:_,itemType:ne,isOpen:k,onClose:()=>{Y(!1),F(null),ie(null)},zIndex:99999,mode:me,position:fe||void 0})]})}const bu=45,yy=45;function vy({track:e,index:t,tracks:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){var h,p;const i=o===e.Id,{currentTrack:c}=ve(),a=f=>{const d=Math.floor(f/1e7),w=Math.floor(d/60),g=d%60;return`${w}:${g.toString().padStart(2,"0")}`},u=Ae({onLongPress:f=>{f.preventDefault(),s(e,"mobile")},onClick:()=>r(e,n)});return l.jsxs("button",{onClick:()=>r(e,n),onContextMenu:f=>{f.preventDefault(),s(e,"desktop",{x:f.clientX,y:f.clientY})},...u,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(at,{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(c==null?void 0:c.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),l.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[e.AlbumArtist||((p=(h=e.ArtistItems)==null?void 0:h[0])==null?void 0:p.Name)||"Unknown Artist",e.Album&&`  ${e.Album}`]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:a(e.RunTimeTicks)})]})}function wy(){const{id:e}=to(),t=Be(),{playAlbum:n,playTrack:r,currentTrack:s,isPlaying:o}=ve(),[i,c]=m.useState(null),[a,u]=m.useState([]),[h,p]=m.useState(!0),[f,d]=m.useState(!1),[w,g]=m.useState(null),[N,v]=m.useState(!1),[x,y]=m.useState("mobile"),[S,C]=m.useState(null),[I,A]=m.useState(bu);m.useEffect(()=>{if(!e)return;(async()=>{p(!0);try{const F=await z.getAlbumTracks(e);u(F);const ie=(await z.getPlaylists({limit:1e3})).Items.find(me=>me.Id===e);ie?c(ie):F.length>0&&c({Id:e,Name:"Playlist",Type:"Playlist"})}catch(F){console.error("Failed to load playlist data:",F)}finally{p(!1)}})()},[e]),m.useEffect(()=>{A(bu)},[a.length]),m.useEffect(()=>{const _=()=>{const F=window.scrollY||document.documentElement.scrollTop,ne=window.innerHeight||document.documentElement.clientHeight,ie=document.documentElement.scrollHeight;F+ne*1.5>=ie&&A(me=>Math.min(me+yy,a.length))};return window.addEventListener("scroll",_,{passive:!0}),()=>window.removeEventListener("scroll",_)},[a.length]);const k=()=>{a.length>0&&n(a)},Y=()=>!a.length||!s?!1:a.some(_=>_.Id===s.Id);return h?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Loading..."})})}):!i||a.length===0?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Playlist not found"})})}):l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center justify-between gap-4 px-4",style:{paddingTop:"calc(1rem + 8px)",paddingBottom:"1rem"},children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Un,{className:"w-6 h-6"})}),i&&l.jsx("button",{onClick:_=>{const F=_.currentTarget.getBoundingClientRect();y("desktop"),C({x:F.left+F.width/2,y:F.bottom+5}),v(!0)},className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Ba,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{className:"pt-20",children:[l.jsx("div",{className:"mb-6 px-4 pt-4",children:l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-0.5 text-left break-words",children:i.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("div",{className:"text-gray-400",children:[a.length," ",a.length===1?"track":"tracks"]}),l.jsx("button",{onClick:Y()&&o?()=>ve.getState().pause():k,className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:Y()&&o?l.jsxs(l.Fragment,{children:[l.jsx(nn,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(nt,{className:"w-3.5 h-3.5"}),"Play"]})})]})]})}),l.jsx("div",{children:l.jsx("div",{className:"space-y-0",children:a.slice(0,I).map((_,F)=>l.jsx(vy,{track:_,index:F,tracks:a,onClick:ne=>r(ne,a),onContextMenu:(ne,ie,me)=>{g(ne),setContextMenuMode(ie||"mobile"),setContextMenuPosition(me||null),d(!0)},contextMenuItemId:(w==null?void 0:w.Id)||null},_.Id))})})]}),l.jsx(Qe,{item:w,itemType:"song",isOpen:f,onClose:()=>{d(!1),g(null)}}),l.jsx(Qe,{item:i,itemType:"playlist",isOpen:N,onClose:()=>{v(!1)},mode:x,position:S||void 0})]})}const Ny=[{name:"zinc",hex:"#71717a"},{name:"red",hex:"#ef4444"},{name:"orange",hex:"#f97316"},{name:"amber",hex:"#f59e0b"},{name:"yellow",hex:"#eab308"},{name:"lime",hex:"#84cc16"},{name:"green",hex:"#22c55e"},{name:"emerald",hex:"#10b981"},{name:"teal",hex:"#14b8a6"},{name:"cyan",hex:"#06b6d4"},{name:"sky",hex:"#0ea5e9"},{name:"blue",hex:"#3b82f6"},{name:"indigo",hex:"#6366f1"},{name:"violet",hex:"#8b5cf6"},{name:"purple",hex:"#a855f7"},{name:"fuchsia",hex:"#d946ef"},{name:"pink",hex:"#ec4899"},{name:"rose",hex:"#f43f5e"}];function Sy(){const e=Be(),{pageVisibility:t,setPageVisibility:n,accentColor:r,setAccentColor:s,enableQueueRecommendations:o,setEnableQueueRecommendations:i}=Es(),{logout:c,serverUrl:a}=Oa(),{setGenres:u,lastSyncCompleted:h,setLastSyncCompleted:p}=Ee(),{state:f,startSync:d,completeSync:w}=so(),[g,N]=m.useState(!1),[v,x]=m.useState(!1),[y,S]=m.useState({scope:"incremental"}),C=()=>{x(!1),S({scope:"incremental"})},I=()=>{c(),e("/")},A=_=>{n({[_]:!t[_]})},k=async()=>{const _=(y.scope==="full","Syncing...");d("settings",_);try{await z.syncLibrary(y);const ne=(await z.getGenres()||[]).sort((ie,me)=>(ie.Name||"").localeCompare(me.Name||""));u(ne),p(Date.now()),w(!0,"Library synced successfully")}catch(F){w(!1,F instanceof Error?F.message:"Failed to sync library")}},Y=async()=>{if(a)try{await navigator.clipboard.writeText(a),N(!0),setTimeout(()=>N(!1),1500)}catch{}};return l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>e("/"),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Un,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1",children:"Settings"})]})})}),l.jsxs("div",{className:"p-4 space-y-8",style:{paddingTop:"calc(env(safe-area-inset-top) + 4.5rem + 1rem)"},children:[l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Page Visibility"}),l.jsx("div",{className:"space-y-3",children:["artists","albums","songs","genres","playlists"].map(_=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-lg",children:[l.jsx("label",{className:"text-white capitalize font-medium",children:_}),l.jsx("button",{onClick:()=>A(_),className:`relative w-12 h-6 rounded-full transition-colors ${t[_]?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:l.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${t[_]?"translate-x-6":"translate-x-0"}`})})]},_))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Recommendations"}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-lg",children:[l.jsx("label",{className:"text-white font-medium",children:"Recommendations in the queue"}),l.jsx("button",{onClick:()=>i(!o),className:`relative w-12 h-6 rounded-full transition-colors ${o?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:l.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${o?"translate-x-6":"translate-x-0"}`})})]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Accent Color"}),l.jsx("div",{className:"grid grid-cols-6 md:grid-cols-9 gap-3 mb-6",children:Ny.map(_=>l.jsx("button",{onClick:()=>s(_.name),className:`aspect-square rounded-lg transition-all ${r===_.name?"ring-2 ring-white ring-offset-2 ring-offset-black scale-110":"hover:scale-105"}`,style:{backgroundColor:_.hex},"aria-label":`Select ${_.name} color`},_.name))}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"About Tunetuna"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("a",{href:"https://github.com/AlessioLaiso/tunetuna",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[l.jsx(Fx,{className:"w-5 h-5"}),l.jsx("span",{children:"GitHub"})]}),l.jsxs("a",{href:"https://www.paypal.com/donate/?hosted_button_id=XBVKHU3JV9W8N",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[l.jsx(Qx,{className:"w-5 h-5"}),l.jsx("span",{children:"Donate"})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Jellyfin Library"}),l.jsxs("div",{className:"relative inline-block mb-2",children:[l.jsx("button",{type:"button",onClick:Y,disabled:!a,className:`text-left text-xs break-all transition-colors ${a?"text-gray-400 hover:text-gray-200 cursor-pointer":"text-gray-600 cursor-not-allowed"}`,children:a?`Server: ${a}`:"Server: Not configured"}),g&&l.jsx("div",{className:"absolute left-0 mt-1 px-2 py-1 rounded bg-zinc-800 text-[10px] text-white shadow-lg",children:"Copied to clipboard"})]}),f==="idle"&&h&&l.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Last synced: ",new Date(h).getFullYear()," ",new Date(h).toLocaleString("default",{month:"short"})," ",new Date(h).getDate().toString().padStart(2,"0")," at ",new Date(h).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>x(!0),disabled:f==="syncing",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 disabled:opacity-50 disabled:cursor-not-allowed font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:f==="syncing"?l.jsxs(l.Fragment,{children:[l.jsx(ts,{className:"w-5 h-5 animate-spin"}),l.jsx("span",{children:"Syncing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(ts,{className:"w-5 h-5"}),l.jsx("span",{children:"Sync"})]})}),l.jsxs("button",{onClick:I,className:"flex-1 px-4 py-3 bg-transparent border border-red-500 text-red-500 hover:bg-red-500/10 font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:[l.jsx(t0,{className:"w-5 h-5"}),l.jsx("span",{children:"Log Out"})]})]})]}),l.jsx(Va,{isOpen:v,onClose:C,zIndex:10001,children:l.jsxs("div",{className:"pb-6",children:[l.jsxs("div",{className:"mb-6 pl-4 pr-4",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"Sync"}),l.jsx("div",{className:"text-sm text-gray-400 mt-1",children:"Cache song metadata to speed up search and loading times"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>{S({scope:"incremental"}),x(!1),k()},disabled:f==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[l.jsx(c0,{className:"w-5 h-5 text-white flex-shrink-0"}),l.jsx("span",{className:"font-medium",children:"New and updated files"})]}),l.jsxs("button",{onClick:()=>{S({scope:"full"}),x(!1),k()},disabled:f==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[l.jsx(N0,{className:"w-5 h-5 text-white flex-shrink-0"}),l.jsx("span",{className:"font-medium",children:"All files (slower)"})]})]})]})})]})]})}const ku=45,Iy=45,Cu=45,jy=45;function by({album:e,year:t,onNavigate:n,onContextMenu:r}){const[s,o]=m.useState(!1),i=m.useRef(!1),c=h=>{if(i.current){h.preventDefault(),h.stopPropagation(),i.current=!1;return}n(e.Id)},a=h=>{h.preventDefault(),h.stopPropagation(),i.current=!0,r(e,"desktop",{x:h.clientX,y:h.clientY}),setTimeout(()=>{i.current=!1},100)},u=Ae({onLongPress:h=>{h.preventDefault(),i.current=!0,r(e,"mobile")},onClick:c});return l.jsxs("button",{onClick:c,onContextMenu:a,...u,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsx(at,{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>o(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),t&&l.jsx("div",{className:"text-xs text-gray-400 truncate",children:t})]})}function ky({song:e,album:t,year:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){const i=o===e.Id,{currentTrack:c}=ve(),a=h=>{const p=Math.floor(h/1e7),f=Math.floor(p/60),d=p%60;return`${f}:${d.toString().padStart(2,"0")}`},u=Ae({onLongPress:h=>{h.preventDefault(),s(e,"mobile")},onClick:()=>r(e)});return l.jsxs("button",{onClick:()=>r(e),onContextMenu:h=>{h.preventDefault(),s(e,"desktop",{x:h.clientX,y:h.clientY})},...u,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${i?"bg-white/10":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:l.jsx(at,{src:z.getAlbumArtUrl(e.AlbumId||e.Id,96),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(c==null?void 0:c.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),(t||n)&&l.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1 min-w-0",children:[t&&l.jsx("span",{className:"truncate",children:t}),t&&n&&l.jsx("span",{className:"flex-shrink-0",children:""}),n&&l.jsx("span",{className:"flex-shrink-0",children:n})]})]}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:a(e.RunTimeTicks)})]})}function Cy(){var ge;const{id:e}=to(),t=Be(),{playAlbum:n,playTrack:r,currentTrack:s,isPlaying:o,pause:i,addToQueue:c}=ve(),[a,u]=m.useState(null),[h,p]=m.useState([]),[f,d]=m.useState([]),[w,g]=m.useState(!0),[N,v]=m.useState(!1),[x,y]=m.useState(!0),[S,C]=m.useState(!0),[I,A]=m.useState(!1),[k,Y]=m.useState("mobile"),[_,F]=m.useState(null),[ne,ie]=m.useState(null),[me,se]=m.useState(null),[fe,D]=m.useState(!1),[j,P]=m.useState("mobile"),[L,V]=m.useState(null),[T,le]=m.useState("Alphabetical"),[W,he]=m.useState(ku),[pe,M]=m.useState(Cu),H=m.useRef(null);m.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[e]);const U=b=>b.toLowerCase().replace(/[_\*\-\.]/g,"").trim();m.useEffect(()=>{if(!e)return;(async()=>{var G;g(!0);try{let q=await z.getArtistById(e);if(!q){const re=(await z.getArtists({limit:1e3})).Items.find(de=>de.Id===e);re&&(q=re)}if(!q){g(!1);return}u(q),C(!0);const ue=await z.getArtistItems(e);if(ue.albums.length===0&&ue.songs.length===0&&q.Name){const K=U(q.Name),de=((G=(await z.search(q.Name,50)).Artists)==null?void 0:G.Items)||[];for(const J of de)if(J.Id!==e&&U(J.Name)===K){const ye=await z.getArtistItems(J.Id);if(ye.albums.length>0||ye.songs.length>0){t(`/artist/${J.Id}`,{replace:!0});return}}}const we=[...ue.albums].sort((K,re)=>{const de=K.ProductionYear||(K.PremiereDate?new Date(K.PremiereDate).getFullYear():0);return(re.ProductionYear||(re.PremiereDate?new Date(re.PremiereDate).getFullYear():0))-de});p(we),d(ue.songs)}catch(B){console.error("Failed to load artist data:",B)}finally{g(!1)}})()},[e,t]),m.useEffect(()=>{if(!(a!=null&&a.Overview))return;y(!0);let b=null,G=null,B=null,q=!1;const ue=()=>{const re=H.current;if(!re||!(a!=null&&a.Overview)){y(!1);return}const de=window.getComputedStyle(re);let J=parseFloat(de.lineHeight||"0");if((!Number.isFinite(J)||J===0)&&(J=parseFloat(de.fontSize||"16")*1.5),J===0){y(!1);return}const ye=re.scrollHeight;if(ye===0&&!q){q=!0,we();return}const ke=Math.round(ye/J)>2;y(ke)},we=()=>{b!==null&&cancelAnimationFrame(b),G!==null&&clearTimeout(G),b=requestAnimationFrame(()=>{G=window.setTimeout(ue,0)}),B!==null&&clearTimeout(B),B=window.setTimeout(()=>{q=!1,ue()},300)},K=()=>{q=!1,we()};return we(),window.addEventListener("resize",K),()=>{b!==null&&cancelAnimationFrame(b),G!==null&&clearTimeout(G),B!==null&&clearTimeout(B),window.removeEventListener("resize",K)}},[a==null?void 0:a.Overview]),m.useEffect(()=>{he(ku)},[h.length]),m.useEffect(()=>{const b=()=>{const G=window.scrollY||document.documentElement.scrollTop,B=window.innerHeight||document.documentElement.clientHeight,q=document.documentElement.scrollHeight;G+B*1.5>=q&&he(ue=>Math.min(ue+Iy,h.length))};return window.addEventListener("scroll",b,{passive:!0}),()=>window.removeEventListener("scroll",b)},[h.length]),m.useEffect(()=>{M(Cu)},[f.length]),m.useEffect(()=>{const b=()=>{const G=window.scrollY||document.documentElement.scrollTop,B=window.innerHeight||document.documentElement.clientHeight,q=document.documentElement.scrollHeight;G+B*1.5>=q&&M(ue=>Math.min(ue+jy,f.length))};return window.addEventListener("scroll",b,{passive:!0}),()=>window.removeEventListener("scroll",b)},[f.length]);const R=()=>{if(X.length>0){const b=[...X].sort(()=>Math.random()-.5);n(b)}},O=b=>b.ProductionYear?b.ProductionYear.toString():b.PremiereDate?new Date(b.PremiereDate).getFullYear().toString():null,E=b=>{const G=b.Album||null;let B=null;if(b.AlbumId){const q=h.find(ue=>ue.Id===b.AlbumId);q&&(B=O(q))}return{album:G,year:B}},$=b=>{if(b.AlbumId){const B=h.find(q=>q.Id===b.AlbumId);if(B){const q=B.ProductionYear||(B.PremiereDate?new Date(B.PremiereDate).getFullYear():0);return B.PremiereDate&&new Date(B.PremiereDate).getMonth(),B.PremiereDate&&new Date(B.PremiereDate).getDate(),B.PremiereDate?new Date(B.PremiereDate).getTime():q*1e4}}const G=b.ProductionYear||(b.PremiereDate?new Date(b.PremiereDate).getFullYear():0);return b.PremiereDate?new Date(b.PremiereDate).getTime():G*1e4},X=m.useMemo(()=>{if(T==="Alphabetical")return[...f].sort((B,q)=>{const ue=B.Name||"",we=q.Name||"";return ue.localeCompare(we)});const b=(B,q,ue)=>{const we=$(B),K=$(q),re=B.AlbumId||"",de=q.AlbumId||"";if(we!==K)return ue?K-we:we-K;if(re!==de)return re.localeCompare(de);const J=B.IndexNumber||0,ye=q.IndexNumber||0;return J!==ye?J-ye:(B.Name||"").localeCompare(q.Name||"")},G=T==="Newest";return[...f].sort((B,q)=>b(B,q,G))},[f,T,h]),ee=b=>{b.preventDefault(),b.stopPropagation(),X.length>0&&n(X)},ce=b=>{b.preventDefault(),b.stopPropagation(),X.length>0&&c(X)},oe=()=>{le(b=>b==="Alphabetical"?"Newest":b==="Newest"?"Oldest":"Alphabetical")};return w?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx(on,{})})}):a?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60]",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"relative flex items-center justify-between gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors z-10",children:l.jsx(Un,{className:"w-6 h-6"})}),a&&l.jsx("button",{onClick:b=>{const G=b.currentTarget.getBoundingClientRect();P("desktop"),V({x:G.left+G.width/2,y:G.bottom+5}),D(!0)},className:"text-white hover:text-zinc-300 transition-colors z-10",children:l.jsx(Ba,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{className:"relative z-30 w-screen",style:{marginTop:"calc(-1 * env(safe-area-inset-top))",marginLeft:"calc(50% - 50vw)",marginRight:"calc(50% - 50vw)"},children:[S&&l.jsxs("div",{className:"relative w-full min-h-64 md:min-h-80 bg-black",style:{paddingTop:"env(safe-area-inset-top)"},children:[l.jsx("div",{className:"w-full flex items-center justify-center md:hidden",children:l.jsx(at,{src:z.getArtistImageUrl(a.Id),alt:a.Name,className:"w-full h-auto object-contain",onError:()=>C(!1)})}),l.jsx("div",{className:"hidden md:block w-full h-80",children:l.jsx("img",{src:z.getArtistBackdropUrl(a.Id),alt:a.Name,className:"w-full h-full object-cover",onError:()=>C(!1)})}),l.jsx("div",{className:"absolute inset-x-0 top-0 bottom-[-1px] bg-gradient-to-b from-transparent via-black/60 to-black pointer-events-none"})]}),l.jsx("div",{className:`left-0 right-0 ${S?"absolute":"relative"} ${S?"pt-16":"pt-12"}`,style:S?{bottom:"-28px",paddingBottom:"1.5rem"}:{},children:l.jsxs("div",{className:"max-w-[768px] mx-auto px-4 flex items-end gap-6 md:grid md:grid-cols-3 md:gap-4",children:[S&&l.jsx("div",{className:"hidden md:block md:col-span-1",children:l.jsx("div",{className:"aspect-square rounded overflow-hidden bg-zinc-900 flex items-center justify-center",children:l.jsx(at,{src:z.getArtistImageUrl(a.Id),alt:a.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded"})})}),l.jsx("div",{className:`flex-1 min-w-0 pb-2 ${S?"md:col-span-2":"md:col-span-3"}`,children:l.jsxs("div",{className:"mb-4 mt-4",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-2 break-words",children:a.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("p",{className:"text-sm text-gray-300",children:[h.length," ",h.length===1?"album":"albums","  ",X.length," ",X.length===1?"song":"songs"]}),l.jsx("button",{onClick:()=>{var G;s&&o&&(((G=s.ArtistItems)==null?void 0:G.some(B=>B.Id===e))||s.AlbumArtist===(a==null?void 0:a.Name))?i():R()},className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:s&&o&&((ge=s.ArtistItems)!=null&&ge.some(b=>b.Id===e)||s.AlbumArtist===(a==null?void 0:a.Name))?l.jsxs(l.Fragment,{children:[l.jsx(nn,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(bn,{className:"w-3.5 h-3.5"}),"Shuffle"]})})]})]})})]})})]}),l.jsxs("div",{className:"pt-6 md:pt-10",children:[a.Overview&&l.jsx("div",{className:"mb-6 -mt-4 px-4",children:l.jsxs("div",{className:"text-white relative",children:[l.jsx("p",{ref:H,className:"text-sm text-gray-300 leading-relaxed absolute opacity-0 pointer-events-none -z-10",children:a.Overview}),!N&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>v(!0),className:"flex-1 text-left min-w-0",children:l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-2",children:a.Overview})}),l.jsx("button",{onClick:()=>v(!0),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:l.jsx(Ua,{className:"w-4 h-4"})})]}),N&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:a.Overview}),l.jsxs("button",{onClick:()=>v(!1),className:"mt-2 flex items-center gap-1 text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:["Show less",l.jsx(lm,{className:"w-4 h-4"})]})]})]})}),h.length>0&&l.jsxs("div",{className:"mb-10 px-4",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Albums (",h.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:h.slice(0,W).map(b=>{const G=O(b);return l.jsx(by,{album:b,year:G,onNavigate:B=>t(`/album/${B}`),onContextMenu:(B,q,ue)=>{ie(B),se("album"),Y(q||"mobile"),F(ue||null),A(!0)}},b.Id)})})]}),f.length>0&&l.jsxs("div",{id:"songs-section",children:[l.jsxs("div",{className:"px-4 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Songs (",f.length,")"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:ee,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:l.jsx(nt,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:ce,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:l.jsx(Ut,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"mt-1",children:l.jsxs("button",{type:"button",onClick:oe,className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[T,l.jsx(Ps,{className:"w-4 h-4"})]})})]}),l.jsx("div",{className:"space-y-0",children:X.slice(0,pe).map(b=>{const{album:G,year:B}=E(b);return l.jsx(ky,{song:b,album:G,year:B,onClick:r,onContextMenu:(q,ue,we)=>{ie(q),se("song"),Y(ue||"mobile"),F(we||null),A(!0)},contextMenuItemId:(ne==null?void 0:ne.Id)||null},b.Id)})})]})]}),l.jsx(Qe,{item:ne,itemType:me,isOpen:I,onClose:()=>{A(!1),ie(null),se(null)},zIndex:99999,mode:k,position:_||void 0}),l.jsx(Qe,{item:a,itemType:"artist",isOpen:fe,onClose:()=>{D(!1)},mode:j,position:L||void 0})]}):l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Artist not found on the Jellyfin server"})})})}function Ay({track:e,trackNumber:t,tracks:n,onClick:r,onContextMenu:s,contextMenuItemId:o}){const i=o===e.Id,{currentTrack:c}=ve(),a=h=>{const p=Math.floor(h/1e7),f=Math.floor(p/60),d=p%60;return`${f}:${d.toString().padStart(2,"0")}`},u=Ae({onLongPress:h=>{h.preventDefault(),s(e,"mobile")},onClick:()=>r(e,n)});return l.jsxs("button",{onClick:()=>r(e,n),onContextMenu:h=>{h.preventDefault(),s(e,"desktop",{x:h.clientX,y:h.clientY})},...u,className:`w-full flex items-baseline hover:bg-white/10 transition-colors group py-3 ${i?"bg-white/10":""}`,children:[l.jsx("span",{className:`text-sm w-6 text-right flex-shrink-0 mr-4 ${(c==null?void 0:c.Id)===e.Id?"text-[var(--accent-color)]":"text-gray-500"}`,children:t&&t>0?t:"-"}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(c==null?void 0:c.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name})}),e.RunTimeTicks&&l.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right mr-4",children:a(e.RunTimeTicks)})]})}function Ey(){const{id:e}=to(),t=Be(),{playAlbum:n,playTrack:r,currentTrack:s,isPlaying:o,play:i,pause:c}=ve(),[a,u]=m.useState(null),[h,p]=m.useState([]),[f,d]=m.useState(!0),[w,g]=m.useState(!1),[N,v]=m.useState(!0),[x,y]=m.useState(!1),[S,C]=m.useState("mobile"),[I,A]=m.useState(null),[k,Y]=m.useState(null),[_,F]=m.useState(!1),[ne,ie]=m.useState("mobile"),[me,se]=m.useState(null),[fe,D]=m.useState(null),[j,P]=m.useState(!1),[L,V]=m.useState(!1),[T,le]=m.useState(!1),W=m.useRef(!1),he=m.useRef(!1),[pe,M]=m.useState(0),H=m.useRef(0),U=m.useRef(null),R=m.useRef(0),O=m.useRef(!1),E=m.useRef(null),$=m.useRef(null),X=m.useRef(!1);m.useEffect(()=>{if(!e)return;(async()=>{var q;d(!0);try{const ue=await z.getAlbumTracks(e);p(ue);let K=await z.getAlbumById(e);if(!K){const J=(await z.getAlbums({limit:1})).Items.find(ye=>ye.Id===e);J&&(K=J)}K||ue.length>0&&ue[0].AlbumId===e&&(K={Id:e,Name:ue[0].Album||"Unknown Album",AlbumArtist:ue[0].AlbumArtist}),K&&(u(K),v(!0));const re=ee(ue,K);if(re)try{const de=await z.getArtistById(re);(q=de==null?void 0:de.ImageTags)!=null&&q.Logo?(D(z.getImageUrl(re,"Logo")),P(!0)):(P(!1),D(null))}catch(de){console.warn("Failed to load artist logo:",de),P(!1),D(null)}else P(!1),D(null)}catch(ue){console.error("Failed to load album data:",ue)}finally{d(!1)}})()},[e]),m.useEffect(()=>{const B=(s==null?void 0:s.AlbumId)===(a==null?void 0:a.Id)&&o,q=(a==null?void 0:a.Id)||null,ue=$.current!==null&&$.current!==q;if(X.current!==B&&(W.current=!1),X.current=B,!N){V(!1),le(!1),$.current=q;return}B?((ue||!O.current||!L)&&(V(!0),le(!1),O.current=!0),he.current=window.innerWidth>=768,W.current||(W.current=!0,setTimeout(()=>{(s==null?void 0:s.AlbumId)===(a==null?void 0:a.Id)&&o&&le(!0)},500)),$.current=q):O.current&&L&&!B?(W.current||(W.current=!0,le(!1)),$.current=q):O.current?(V(!1),le(!1),$.current=q):(V(!1),le(!1),O.current=!0,$.current=q)},[s==null?void 0:s.AlbumId,a==null?void 0:a.Id,o,L,N,T]),m.useEffect(()=>{const B=()=>{if((s==null?void 0:s.AlbumId)===(a==null?void 0:a.Id)&&o&&L){const ue=window.innerWidth>=768;he.current=ue,T&&(le(!1),setTimeout(()=>le(!0),10))}};return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[s==null?void 0:s.AlbumId,a==null?void 0:a.Id,o,L,T]),m.useEffect(()=>{if((s==null?void 0:s.AlbumId)===(a==null?void 0:a.Id)&&o){const q=ue=>{R.current===0&&(R.current=ue);const we=ue-R.current,K=360/1e4;H.current=(H.current+K*we)%360,M(H.current),R.current=ue,U.current=requestAnimationFrame(q)};R.current=0,U.current=requestAnimationFrame(q)}else U.current&&(cancelAnimationFrame(U.current),U.current=null),R.current=0;return()=>{U.current&&cancelAnimationFrame(U.current)}},[s==null?void 0:s.AlbumId,a==null?void 0:a.Id,o]);const ee=(B,q)=>B.length>0&&B[0].ArtistItems&&B[0].ArtistItems.length>0?B[0].ArtistItems[0].Id:q!=null&&q.ArtistItems&&q.ArtistItems.length>0?q.ArtistItems[0].Id:null,ce=()=>{h.length>0&&n(h)},oe=()=>{if(h.length>0){const B=h[0];if(B.ProductionYear&&B.ProductionYear>0)return B.ProductionYear.toString();if(B.PremiereDate){const q=new Date(B.PremiereDate).getFullYear();if(q>0)return q.toString()}}return null},ge=()=>h.length>0&&h[0].ArtistItems&&h[0].ArtistItems.length>0?h[0].ArtistItems[0].Id:a!=null&&a.ArtistItems&&a.ArtistItems.length>0?a.ArtistItems[0].Id:null,b=()=>{var B,q;return a.AlbumArtist||((q=(B=a.ArtistItems)==null?void 0:B[0])==null?void 0:q.Name)||null},G=()=>{const B=ge();B&&t(`/artist/${B}`)};return f?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen",children:l.jsx(on,{})})}):!a||h.length===0?l.jsx("div",{className:"pb-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Album not found"})})}):l.jsxs("div",{className:"pb-20",style:{overflowX:"hidden",maxWidth:"100vw",width:"100%"},children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[55] pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)",background:"transparent"}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 z-10 pointer-events-none",style:{height:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",top:"var(--header-offset, 0px)",background:`linear-gradient(to bottom,
            #000000 0%,
            #000000 calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 0.5rem),
            rgba(0, 0, 0, 0.95) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 1rem),
            rgba(0, 0, 0, 0.85) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 1.5rem),
            rgba(0, 0, 0, 0.7) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 2rem),
            rgba(0, 0, 0, 0.5) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 2.5rem),
            rgba(0, 0, 0, 0.3) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 3rem),
            rgba(0, 0, 0, 0.15) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 3.5rem),
            rgba(0, 0, 0, 0) calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)
          )`}}),l.jsx("div",{className:"fixed top-0 left-0 right-0 z-20",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto relative",children:l.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 relative z-10",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Un,{className:"w-6 h-6"})}),a&&l.jsx("button",{onClick:B=>{const q=B.currentTarget.getBoundingClientRect();ie("desktop"),se({x:q.left+q.width/2,y:q.bottom+5}),F(!0)},className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Ba,{className:"w-6 h-6"})})]})})}),l.jsxs("div",{style:{paddingTop:"calc(5rem + 12px - 48px)"},children:[l.jsxs("div",{className:"mb-6 px-4 pt-4",style:{overflow:"visible"},children:[N&&l.jsx("div",{className:"flex justify-center mb-6 relative",style:{overflowX:"visible",overflowY:"visible",paddingLeft:"16px",paddingRight:"16px"},children:l.jsxs("div",{ref:E,className:"w-64 h-64 relative",style:{overflow:"visible"},children:[l.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",style:{opacity:L?1:0,zIndex:1,transform:(s==null?void 0:s.AlbumId)===a.Id&&o&&he.current?"translateX(calc(50% + 8px))":"translateX(0)",transition:"transform 500ms ease-in-out, opacity 300ms ease-in-out"},children:l.jsxs("div",{className:"w-full h-full",style:{transformOrigin:"center center",transform:`rotate(${pe}deg)`},children:[l.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:B=>{console.error("Failed to load vinyl image"),B.currentTarget.style.display="none"}}),l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full",style:{width:"52%",height:"52%",backgroundColor:"#a1a1aa",transform:"translate(-50%, -50%)",transformOrigin:"center center"}}),j&&fe?l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full overflow-hidden flex items-center justify-center",style:{width:"47%",height:"47%",transform:"translate(-50%, -50%)",transformOrigin:"center center"},children:l.jsx("img",{src:fe,alt:"Artist Logo",className:"w-full h-full object-contain",onError:()=>{P(!1),D(null)}})}):N?l.jsx("div",{className:"absolute top-1/2 left-1/2 rounded-full overflow-hidden flex items-center justify-center",style:{width:"52%",height:"52%",transform:"translate(-50%, -50%)",transformOrigin:"center center"},children:l.jsx("img",{src:z.getAlbumArtUrl(a.Id),alt:a.Name,className:"w-full h-full object-cover"})}):null]})}),l.jsx("div",{className:"absolute inset-0 rounded overflow-hidden bg-zinc-900 transition-all duration-500",style:{transform:(s==null?void 0:s.AlbumId)===a.Id&&o||T?he.current?"translateX(calc(-50% - 8px))":"translateX(calc(-100% - 24px))":"translateX(0)",opacity:1,transitionProperty:"transform",transitionDuration:"500ms",transitionTimingFunction:"ease-in-out",zIndex:10},children:l.jsx(at,{src:z.getAlbumArtUrl(a.Id),alt:a.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>v(!1)})})]})}),l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-0.5 text-left break-words",children:a.Name}),l.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[l.jsxs("div",{className:"text-gray-400 flex items-center gap-1.5",children:[b()&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:G,className:`hover:text-white transition-colors ${ge()?"cursor-pointer":"cursor-default"}`,children:b()}),oe()&&l.jsx("span",{children:""})]}),oe()&&l.jsx("button",{onClick:()=>t(`/albums?year=${oe()}`),className:"hover:text-white transition-colors cursor-pointer",children:oe()})]}),l.jsx("button",{onClick:()=>{(s==null?void 0:s.AlbumId)===a.Id&&o?c():(s==null?void 0:s.AlbumId)===a.Id&&!o?i():ce()},className:"bg-white/10 hover:bg-white/20 text-white font-semibold py-1.5 px-3 rounded-full transition-all hover:scale-105 flex items-center gap-1.5 backdrop-blur-sm border border-white/20 flex-shrink-0",children:(s==null?void 0:s.AlbumId)===a.Id&&o?l.jsxs(l.Fragment,{children:[l.jsx(nn,{className:"w-3.5 h-3.5"}),"Pause"]}):l.jsxs(l.Fragment,{children:[l.jsx(nt,{className:"w-3.5 h-3.5"}),"Play"]})})]})]})]}),a.Overview&&l.jsx("div",{className:"mb-6 px-4",children:l.jsxs("div",{className:"text-white relative",children:[!w&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>g(!0),className:"flex-1 text-left min-w-0",children:l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-2",children:a.Overview})}),l.jsx("button",{onClick:()=>g(!0),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:l.jsx(Ua,{className:"w-4 h-4"})})]}),w&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:a.Overview}),l.jsxs("button",{onClick:()=>g(!1),className:"mt-2 flex items-center gap-1 text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:["Show less",l.jsx(lm,{className:"w-4 h-4"})]})]})]})}),l.jsx("div",{children:l.jsx("div",{className:"space-y-0",children:(()=>{const B=new Map;h.forEach(we=>{const K=we.ParentIndexNumber??1;B.has(K)||B.set(K,[]),B.get(K).push(we)});const q=B.size>1;return Array.from(B.keys()).sort((we,K)=>we-K).map(we=>{const K=B.get(we);return l.jsxs("div",{children:[q&&l.jsxs("div",{className:`px-4 py-2 text-xs font-medium text-gray-400 uppercase tracking-wider ${we>1?"pt-4":""}`,children:["Disc ",we]}),K.map(re=>l.jsx(Ay,{track:re,trackNumber:re.IndexNumber??null,tracks:h,onClick:de=>r(de,h),onContextMenu:(de,J,ye)=>{Y(de),C(J||"mobile"),A(ye||null),y(!0)},contextMenuItemId:(k==null?void 0:k.Id)||null},re.Id))]},we)})})()})})]}),l.jsx(Qe,{item:k,itemType:"song",isOpen:x,onClose:()=>{y(!1),Y(null)},mode:S,position:I||void 0}),l.jsx(Qe,{item:a,itemType:"album",isOpen:_,onClose:()=>{F(!1)},mode:ne,position:me||void 0})]})}const Au=45,Py=45,Eu=45,Ty=45;function My({album:e,year:t,onNavigate:n,onContextMenu:r}){const[s,o]=m.useState(!1),i=Ae({onLongPress:c=>{c.preventDefault(),r(e,"mobile")},onClick:()=>n(e.Id)});return l.jsxs("button",{onClick:()=>n(e.Id),onContextMenu:c=>{c.preventDefault(),r(e,"desktop",{x:c.clientX,y:c.clientY})},...i,className:"text-left group",children:[l.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 flex items-center justify-center",children:s?l.jsx(Ve,{className:"w-12 h-12 text-gray-500"}):l.jsx(at,{src:z.getAlbumArtUrl(e.Id,474),alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>o(!0)})}),l.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.Name}),t&&l.jsx("div",{className:"text-xs text-gray-400 truncate",children:t})]})}function Ry(){var fe;const{id:e}=to(),t=Be(),{playAlbum:n,toggleShuffle:r,currentTrack:s,isPlaying:o,pause:i}=ve(),{genres:c,genreSongs:a,setGenreSongs:u}=Ee(),[h,p]=m.useState(null),[f,d]=m.useState([]),[w,g]=m.useState(!0),[N,v]=m.useState(!1),[x,y]=m.useState("mobile"),[S,C]=m.useState(null),[I,A]=m.useState(null),[k,Y]=m.useState(null),[_,F]=m.useState(Au),[ne,ie]=m.useState(Eu);m.useEffect(()=>{if(!e)return;(async()=>{const j=a[e];if(j&&j.length>0){let P=c;P.length===0&&(P=await z.getGenres());const L=P.find(V=>V.Id===e);L&&p(L),d(j),g(!1);return}g(!0);try{let P=c;P.length===0&&(P=await z.getGenres());const L=P.find(le=>le.Id===e);if(!L){g(!1);return}p(L);const V=L.Name;if(!V){g(!1);return}const T=await z.getGenreSongs(e,V);u(e,T),d(T)}catch(P){console.error("Failed to load genre songs:",P)}finally{g(!1)}})()},[e,c,a,u]);const me=()=>{if(f.length>0){const D=[...f].sort(()=>Math.random()-.5),{shuffle:j}=ve.getState();j||r(),n(D)}},se=m.useMemo(()=>{const D=new Map;return f.forEach(j=>{j.AlbumId&&j.Album&&(D.has(j.AlbumId)||D.set(j.AlbumId,{Id:j.AlbumId,Name:j.Album,AlbumArtist:j.AlbumArtist,ArtistItems:j.ArtistItems,ProductionYear:j.ProductionYear,PremiereDate:j.PremiereDate}))}),Array.from(D.values()).sort((j,P)=>{const L=j.ProductionYear||(j.PremiereDate?new Date(j.PremiereDate).getFullYear():0),V=P.ProductionYear||(P.PremiereDate?new Date(P.PremiereDate).getFullYear():0);if(L!==V)return V-L;const T=j.Name||"",le=P.Name||"";return T.localeCompare(le)})},[f]);return m.useMemo(()=>{const D=new Map;f.forEach(P=>{var le,W;const L=P.AlbumArtist||((W=(le=P.ArtistItems)==null?void 0:le[0])==null?void 0:W.Name)||"Unknown Artist",V=P.AlbumId||"no-album";D.has(L)||D.set(L,new Map);const T=D.get(L);T.has(V)||T.set(V,[]),T.get(V).push(P)});const j=[];return D.forEach((P,L)=>{const V=[];P.forEach((T,le)=>{var pe;const W=[...T].sort((M,H)=>{const U=M.IndexNumber||0,R=H.IndexNumber||0;return U-R}),he=((pe=W[0])==null?void 0:pe.Album)||"Unknown Album";V.push({albumId:le,albumName:he,songs:W})}),V.sort((T,le)=>{const W=T.songs[0],he=le.songs[0],pe=(W==null?void 0:W.ProductionYear)||(W!=null&&W.PremiereDate?new Date(W.PremiereDate).getFullYear():0),M=(he==null?void 0:he.ProductionYear)||(he!=null&&he.PremiereDate?new Date(he.PremiereDate).getFullYear():0);return pe!==M?M-pe:T.albumName.localeCompare(le.albumName)}),j.push({artist:L,albums:V})}),j.sort((P,L)=>P.artist.localeCompare(L.artist)),j},[f]),m.useEffect(()=>{F(Au)},[se.length]),m.useEffect(()=>{const D=()=>{const j=window.scrollY||document.documentElement.scrollTop,P=window.innerHeight||document.documentElement.clientHeight,L=document.documentElement.scrollHeight;j+P*1.5>=L&&F(V=>Math.min(V+Py,se.length))};return window.addEventListener("scroll",D,{passive:!0}),()=>window.removeEventListener("scroll",D)},[se.length]),m.useEffect(()=>{ie(Eu)},[f.length]),m.useEffect(()=>{const D=()=>{const j=window.scrollY||document.documentElement.scrollTop,P=window.innerHeight||document.documentElement.clientHeight,L=document.documentElement.scrollHeight;j+P*1.5>=L&&ie(V=>Math.min(V+Ty,f.length))};return window.addEventListener("scroll",D,{passive:!0}),()=>window.removeEventListener("scroll",D)},[f.length]),w?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Un,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:(h==null?void 0:h.Name)||""}),l.jsx("div",{className:"flex items-center",children:l.jsx(on,{})})]})})}),l.jsx("div",{className:"pt-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400"})})]}):!h||f.length===0?l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Un,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:"Genre"})]})})}),l.jsx("div",{className:"pt-20",children:l.jsx("div",{className:"flex items-center justify-center h-screen text-gray-400",children:l.jsx("p",{children:"Genre not found or no songs available"})})})]}):l.jsxs("div",{className:"pb-20",children:[l.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 border-b border-zinc-800",style:{top:"env(safe-area-inset-top)"},children:l.jsx("div",{className:"max-w-[768px] mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4 p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"text-white hover:text-zinc-300 transition-colors",children:l.jsx(Un,{className:"w-6 h-6"})}),l.jsx("h1",{className:"text-xl font-bold flex-1 truncate",children:h.Name}),l.jsx("button",{onClick:()=>{var j;s&&o&&h&&((j=s.Genres)==null?void 0:j.some(P=>{var L;return P.toLowerCase()===((L=h.Name)==null?void 0:L.toLowerCase())}))?i():me()},className:"w-10 h-10 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors backdrop-blur-sm border border-white/20 flex-shrink-0",children:s&&o&&h&&((fe=s.Genres)!=null&&fe.some(D=>{var j;return D.toLowerCase()===((j=h.Name)==null?void 0:j.toLowerCase())}))?l.jsx(nn,{className:"w-5 h-5"}):l.jsx(bn,{className:"w-5 h-5"})})]})})}),l.jsxs("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 5rem)"},children:[se.length>0&&l.jsxs("div",{className:"mb-10 px-4 pt-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Albums (",se.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:se.slice(0,_).map(D=>{const j=D.ProductionYear||(D.PremiereDate?new Date(D.PremiereDate).getFullYear():null);return l.jsx(My,{album:D,year:j,onNavigate:P=>t(`/album/${P}`),onContextMenu:(P,L,V)=>{A(P),Y("album"),y(L||"mobile"),C(V||null),v(!0)}},D.Id)})})]}),f.length>0&&l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-white mb-2 px-4",children:["Songs (",f.length,")"]}),l.jsx("div",{className:"space-y-0",children:f.slice(0,ne).map(D=>l.jsx(om,{song:D},D.Id))})]})]}),l.jsx(Qe,{item:I,itemType:k,isOpen:N,onClose:()=>{v(!1),A(null),Y(null)},mode:x,position:S||void 0})]})}function Ly(){const{pathname:e}=ln();return m.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[e]),null}function zy(){const{isAuthenticated:e,logout:t}=Oa(),{pageVisibility:n}=Es();return m.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?l.jsxs(_g,{children:[l.jsx(Ly,{}),l.jsx(_0,{children:l.jsxs(Ag,{children:[l.jsx(xt,{path:"/",element:l.jsx(G0,{})}),l.jsx(xt,{path:"/settings",element:l.jsx(Sy,{})}),n.artists&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/artists",element:l.jsx(K0,{})}),l.jsx(xt,{path:"/artist/:id",element:l.jsx(Cy,{})})]}),n.albums&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/albums",element:l.jsx(sy,{})}),l.jsx(xt,{path:"/album/:id",element:l.jsx(Ey,{})})]}),n.songs&&l.jsx(xt,{path:"/songs",element:l.jsx(uy,{})}),n.genres&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/genres",element:l.jsx(fy,{})}),l.jsx(xt,{path:"/genre/:id",element:l.jsx(Ry,{})})]}),n.playlists&&l.jsxs(l.Fragment,{children:[l.jsx(xt,{path:"/playlists",element:l.jsx(xy,{})}),l.jsx(xt,{path:"/playlist/:id",element:l.jsx(wy,{})})]}),l.jsx(xt,{path:"*",element:l.jsx(kg,{to:"/",replace:!0})})]})})]}):l.jsx(Sx,{})}class _y extends m.Component{constructor(){super(...arguments);Rn(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),l.jsx("p",{className:"text-gray-400 mb-4",children:(n=this.state.error)==null?void 0:n.message}),l.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"})]})}):this.props.children}}Bo.createRoot(document.getElementById("root")).render(l.jsx(Hi.StrictMode,{children:l.jsx(_y,{children:l.jsx(zy,{})})}));
