import{c as n,b as le,m as re,o as ie,u as oe,p as ce,q as de,s as he,a as xe,r,t as me,j as e,R as d,B as z,f as I}from"./index-CB1tZ40M.js";import{A as pe}from"./arrow-left-DjKGbXL0.js";/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fe=n("download",ue);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],ge=n("github",be);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],je=n("heart-handshake",ye);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],we=n("lock",ve);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ke=n("log-out",Ne);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]],Ce=n("rabbit",Se);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],R=n("trash-2",Le);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_e=n("triangle-alert",Me);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4Z",key:"1lbbv7"}],["path",{d:"M4.82 7.9 8 10",key:"m9wose"}],["path",{d:"M15.18 7.9 12 10",key:"p8dp2u"}],["path",{d:"M16.93 10H20a2 2 0 0 1 0 4H2",key:"12nsm7"}]],Ae=n("turtle",$e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Fe=n("upload",Ee),Te=[{name:"zinc",hex:"#71717a"},{name:"red",hex:"#ef4444"},{name:"orange",hex:"#f97316"},{name:"amber",hex:"#f59e0b"},{name:"yellow",hex:"#eab308"},{name:"lime",hex:"#84cc16"},{name:"green",hex:"#22c55e"},{name:"emerald",hex:"#10b981"},{name:"teal",hex:"#14b8a6"},{name:"cyan",hex:"#06b6d4"},{name:"sky",hex:"#0ea5e9"},{name:"blue",hex:"#3b82f6"},{name:"indigo",hex:"#6366f1"},{name:"violet",hex:"#8b5cf6"},{name:"purple",hex:"#a855f7"},{name:"fuchsia",hex:"#d946ef"},{name:"pink",hex:"#ec4899"},{name:"rose",hex:"#f43f5e"}];function Re(){const w=le(),{pageVisibility:b,setPageVisibility:H,accentColor:O,setAccentColor:V,statsTrackingEnabled:g,setStatsTrackingEnabled:U}=re(),{logout:D,serverUrl:i}=ie(),{setGenres:q,lastSyncCompleted:o,setLastSyncCompleted:P}=oe(),{state:c,startSync:G,completeSync:N}=ce(),{addToast:s}=de(),{exportStats:B,importStats:J,clearAllStats:Q,hasStats:k,pendingEvents:h,lastSyncedAt:y}=he(),S=xe(t=>t.isQueueSidebarOpen),[K,x]=r.useState(!1),[C,j]=r.useState({scope:"incremental"}),[W,m]=r.useState(!1),[L,M]=r.useState(!1),[_,$]=r.useState(!1),[p,A]=r.useState(!1),[E,v]=r.useState(!1),u=r.useRef(null);r.useEffect(()=>{(async()=>{const a=await k();v(a)})()},[k,h.length,y]);const F=me(),X=()=>{x(!1),j({scope:"incremental"})},Y=()=>{D(),w("/")},Z=t=>{H({[t]:!b[t]})},T=async()=>{const t=(C.scope==="full","Syncing...");G("settings",t);try{await I.syncLibrary(C);const f=(await I.getGenres()||[]).sort((l,ne)=>(l.Name||"").localeCompare(ne.Name||""));q(f),P(Date.now()),N(!0,"Library synced successfully")}catch(a){N(!1,a instanceof Error?a.message:"Failed to sync library")}},ee=async()=>{if(i)try{if(navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(i),s("Server URL copied","success");return}const t=document.createElement("textarea");t.value=i,t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),t.focus(),t.select();const a=document.execCommand("copy");document.body.removeChild(t),a?s("Server URL copied","success"):s("Failed to copy URL","error")}catch{s("Failed to copy URL","error")}},te=async()=>{M(!0);try{await B(),s("Stats exported successfully","success")}catch{s("Failed to export stats","error")}finally{M(!1)}},se=async()=>{A(!0);try{await Q()?(s("All stats cleared","success"),v(!1)):s("Local stats cleared, but server clear failed","info")}catch{s("Failed to clear stats","error")}finally{A(!1),m(!1)}},ae=async t=>{var f;const a=(f=t.target.files)==null?void 0:f[0];if(a){$(!0);try{const l=await J(a);l.imported>0?(s(`Imported ${l.imported} events${l.skipped>0?`, ${l.skipped} duplicates skipped`:""}`,"success"),v(!0)):s("No new events to import (all duplicates)","info")}catch(l){s(l instanceof Error?l.message:"Failed to import stats","error")}finally{$(!1),u.current&&(u.current.value="")}}};return e.jsxs("div",{className:"pb-20",children:[e.jsx("div",{className:`fixed top-0 left-0 right-0 bg-black z-10 lg:left-16 transition-[left,right] duration-300 ${S?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:e.jsx("div",{className:"max-w-[768px] mx-auto",children:e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx("button",{onClick:()=>w("/"),className:"text-white hover:text-zinc-300 transition-colors",children:e.jsx(pe,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-xl font-bold flex-1",children:"Settings"})]})})}),e.jsx("div",{className:`fixed left-0 right-0 z-[60] lg:left-16 transition-[left,right] duration-300 ${S?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 5.5rem - 28px)",height:"24px",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent)"}}),e.jsxs("div",{className:"p-4 space-y-8",style:{paddingTop:"calc(env(safe-area-inset-top) + 5.5rem + 24px)"},children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Page Visibility"}),e.jsx("div",{className:"space-y-3",children:["artists","albums","songs","genres","playlists","stats"].map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-lg",children:[e.jsx("label",{className:"text-white capitalize font-medium",children:t}),e.jsx("button",{onClick:()=>Z(t),className:`relative w-12 h-6 rounded-full transition-colors ${b[t]?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${b[t]?"translate-x-6":"translate-x-0"}`})})]},t))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Accent Color"}),e.jsx("div",{className:"grid grid-cols-6 md:grid-cols-9 gap-3 mb-6",children:Te.map(t=>e.jsx("button",{onClick:()=>V(t.name),className:`aspect-square rounded-lg transition-all ${O===t.name?"ring-2 ring-white ring-offset-2 ring-offset-black scale-110":"hover:scale-105"}`,style:{backgroundColor:t.hex},"aria-label":`Select ${t.name} color`},t.name))}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"About Tunetuna"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:"https://github.com/AlessioLaiso/tunetuna",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"GitHub"})]}),e.jsxs("a",{href:"https://www.paypal.com/donate/?hosted_button_id=XBVKHU3JV9W8N",target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors text-center flex items-center justify-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("span",{children:"Donate"})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Jellyfin Library"}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{type:"button",onClick:ee,disabled:!i,className:`text-left text-xs break-all transition-colors flex items-center gap-1 ${i?"text-gray-400 hover:text-gray-200 cursor-pointer":"text-gray-600 cursor-not-allowed"}`,children:[F&&e.jsx(we,{className:"w-3 h-3 flex-shrink-0"}),i?`Server: ${i}`:"Server: Not configured"]}),F&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Server URL is locked by administrator"})]}),c==="idle"&&o&&e.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Last synced: ",new Date(o).getFullYear()," ",new Date(o).toLocaleString("default",{month:"short"})," ",new Date(o).getDate().toString().padStart(2,"0")," at ",new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(!0),disabled:c==="syncing",className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 disabled:opacity-50 disabled:cursor-not-allowed font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:c==="syncing"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-5 h-5"}),e.jsx("span",{children:"Sync"})]})}),e.jsxs("button",{onClick:Y,className:"flex-1 px-4 py-3 bg-transparent border border-red-500 text-red-500 hover:bg-red-500/10 font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{children:"Log Out"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Stats"}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-lg mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white font-medium",children:"Track Listening Stats"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Record play history for statistics"})]}),e.jsx("button",{onClick:()=>U(!g),className:`relative w-12 h-6 rounded-full transition-colors ${g?"bg-[var(--accent-color)]":"bg-zinc-600"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${g?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[h.length>0&&e.jsxs("p",{children:[h.length," event",h.length!==1?"s":""," pending sync"]}),y&&e.jsxs("p",{children:["Last synced: ",new Date(y).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:te,disabled:L||!E,className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 disabled:opacity-50 disabled:cursor-not-allowed font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Exporting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Export"})]})}),e.jsx("button",{onClick:()=>{var t;return(t=u.current)==null?void 0:t.click()},disabled:_,className:"flex-1 px-4 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 disabled:opacity-50 disabled:cursor-not-allowed font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Importing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Import"})]})}),e.jsxs("button",{onClick:()=>m(!0),disabled:p||!E,className:"flex-1 px-4 py-3 bg-transparent border border-red-500 text-red-500 hover:bg-red-500/10 disabled:opacity-50 disabled:cursor-not-allowed font-semibold rounded-full transition-colors flex items-center justify-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{children:"Clear"})]})]}),e.jsx("input",{ref:u,type:"file",accept:".json",onChange:ae,className:"hidden"})]}),e.jsx(z,{isOpen:K,onClose:X,zIndex:10001,children:e.jsxs("div",{className:"pb-6",children:[e.jsxs("div",{className:"mb-6 pl-4 pr-4",children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:"Sync"}),e.jsx("div",{className:"text-sm text-gray-400 mt-1",children:"Cache song metadata to speed up search and loading times"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{j({scope:"incremental"}),x(!1),T()},disabled:c==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[e.jsx(Ce,{className:"w-5 h-5 text-white flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:"New and updated files"})]}),e.jsxs("button",{onClick:()=>{j({scope:"full"}),x(!1),T()},disabled:c==="syncing",className:"w-full flex items-center gap-3 py-4 pr-4 pl-4 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed text-white text-left rounded-lg transition-colors",children:[e.jsx(Ae,{className:"w-5 h-5 text-white flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:"All files (slower)"})]})]})]})}),e.jsx(z,{isOpen:W,onClose:()=>m(!1),zIndex:10001,children:e.jsxs("div",{className:"pb-6",children:[e.jsxs("div",{className:"mb-6 pl-4 pr-4 flex items-start gap-3",children:[e.jsx(_e,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:"Clear All Stats?"}),e.jsx("div",{className:"text-sm text-gray-400 mt-1",children:"This will permanently delete all your listening history, both locally and from the server. This action cannot be undone."})]})]}),e.jsxs("div",{className:"space-y-3 px-4",children:[e.jsx("button",{onClick:se,disabled:p,className:"w-full flex items-center justify-center gap-2 py-3 bg-red-500 hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold rounded-full transition-colors",children:p?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Clearing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{children:"Clear All Stats"})]})}),e.jsx("button",{onClick:()=>m(!1),disabled:p,className:"w-full py-3 text-white font-medium rounded-full transition-colors hover:bg-white/10",children:"Cancel"})]})]})})]})]})}export{Re as default};
