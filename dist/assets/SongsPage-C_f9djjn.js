import{u as A,a as H,r as s,b as Ve,e as T,j as e,d as Qe,h as Xe,G as Ie,P as ke,L as Ae,C as qe,f as Oe,D as $e}from"./index-CSzK2hrG.js";import{u as We,f as Je,S as Pe}from"./search-BOaPrkaD.js";import{S as Ee}from"./SearchArtistItem-H6E-vXTx.js";import{S as Ke}from"./SongItem-C-oL5asR.js";import{P as Ze}from"./Pagination-B9FRLs7D.js";import{F as Me}from"./FilterBottomSheet-CF5aVlGz.js";import{A as et}from"./arrow-up-down-DnJ9a3Ov.js";import{C as Te}from"./calendar-C9KQbJzW.js";const _e=s.memo(function({album:r,onClick:_,onContextMenu:E,contextMenuItemId:M}){var u,b,a,x;const[L,C]=s.useState(!1),y=s.useRef(!1),R=M===r.Id,z=s.useMemo(()=>T.getAlbumArtUrl(r.Id,474),[r.Id]),N=f=>{if(R||y.current){f.preventDefault(),f.stopPropagation(),y.current=!1;return}_(r.Id)},d=f=>{f.preventDefault(),f.stopPropagation(),y.current=!0,E(r,"album","desktop",{x:f.clientX,y:f.clientY}),setTimeout(()=>{y.current=!1},300)},v=Oe({onLongPress:f=>{f.preventDefault(),y.current=!0,E(r,"album","mobile")},onClick:N});return e.jsxs("button",{onClick:N,onContextMenu:d,...v,className:"text-left group","aria-label":`Album: ${r.Name} by ${r.AlbumArtist||((b=(u=r.ArtistItems)==null?void 0:u[0])==null?void 0:b.Name)||"Unknown Artist"}`,children:[e.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:L?e.jsx($e,{className:"w-12 h-12 text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:z,alt:r.Name,className:"w-full h-full object-cover",onError:()=>C(!0)}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),e.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:r.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:r.AlbumArtist||((x=(a=r.ArtistItems)==null?void 0:a[0])==null?void 0:x.Name)||"Unknown Artist"})]})}),Le=s.memo(function({song:r,onClick:_,onContextMenu:E,contextMenuItemId:M,showImage:L=!0}){var a,x,f,O;const C=s.useRef(!1),y=M===r.Id,[R,z]=s.useState(!1),N=s.useMemo(()=>T.getAlbumArtUrl(r.AlbumId||r.Id,96),[r.AlbumId,r.Id]),d=g=>{const $=Math.floor(g/1e7),B=Math.floor($/60),V=$%60;return`${B}:${V.toString().padStart(2,"0")}`},v=g=>{if(y||C.current){g.preventDefault(),g.stopPropagation(),C.current=!1;return}_(r)},u=g=>{g.preventDefault(),g.stopPropagation(),C.current=!0,E(r,"song","desktop",{x:g.clientX,y:g.clientY}),setTimeout(()=>{C.current=!1},300)},b=Oe({onLongPress:g=>{g.preventDefault(),C.current=!0,E(r,"song","mobile")},onClick:v});return e.jsxs("button",{onClick:v,onContextMenu:u,...b,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${y?"bg-white/10":""}`,"aria-label":`Play ${r.Name} by ${((x=(a=r.ArtistItems)==null?void 0:a[0])==null?void 0:x.Name)||r.AlbumArtist||"Unknown Artist"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:R?e.jsx($e,{className:"w-7 h-7 text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:N,alt:r.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>z(!0)}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:r.Name}),e.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[((O=(f=r.ArtistItems)==null?void 0:f[0])==null?void 0:O.Name)||r.AlbumArtist||"Unknown Artist",r.Album&&` â€¢ ${r.Album}`]})]}),r.RunTimeTicks&&e.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:d(r.RunTimeTicks)})]})}),U=90,Re=45,tt=45,ze=45,st=45;function ut(){const P=A(t=>t.songs),r=A(t=>t.setSongs),_=A(t=>t.sortPreferences),E=A(t=>t.setSortPreference),M=A(t=>t.setLoading),L=A(t=>t.loading),C=A(t=>t.genres),y=H(t=>t.playTrack),R=H(t=>t.playAlbum),z=H(t=>t.addToQueue),N=H(t=>t.isQueueSidebarOpen),[d,v]=s.useState(""),[u,b]=s.useState(!1),[a,x]=s.useState(null),[f,O]=s.useState(!1),[g,$]=s.useState("mobile"),[B,V]=s.useState(null),[i,K]=s.useState(null),[De,Z]=s.useState(null),[ee,Q]=s.useState(!1),p=s.useRef(null),[D,te]=s.useState(0),[se,ne]=s.useState(0),X=Ve(),le=s.useRef(null),re=s.useRef(null),ae=s.useRef(null),[w,ie]=s.useState([]),[o,oe]=s.useState({min:null,max:null}),[ce,q]=s.useState(!1),[de,Ge]=s.useState(null),[Fe,ue]=s.useState([]),I=_.songs,G=s.useRef(!0),[Ye,he]=s.useState(!1),me=s.useRef(I),[xe,fe]=s.useState(Re),[W,ge]=s.useState(ze);s.useEffect(()=>{(async()=>{try{const n=A.getState();if(n.years.length>0)ue(n.years);else{const h=await T.getYears();ue(h)}}catch(n){console.error("Failed to load filter values:",n)}})()},[]);const pe=w.length>0||o.min!==null||o.max!==null;s.useEffect(()=>{p.current&&p.current.abort();const t=d.trim().length>0;if(t||pe){Q(!0),p.current=new AbortController;const n=window.setTimeout(async()=>{var h,c,m,k;if(!((h=p.current)!=null&&h.signal.aborted))try{let j;t?j=await We(d,450):j=await Je(450),(c=p.current)!=null&&c.signal.aborted||x(j)}catch(j){(m=p.current)!=null&&m.signal.aborted||(console.error("Search failed:",j),x(null))}finally{(k=p.current)!=null&&k.signal.aborted||Q(!1)}},250);return()=>{window.clearTimeout(n),p.current&&p.current.abort()}}else p.current=null,x(null),Q(!1)},[d,pe]);const l=s.useMemo(()=>{if(!a)return null;const t=c=>{if(o.min!==null||o.max!==null)return!1;if(w.length>0){const m=c.Genres||[];if(!w.some(j=>m.some(J=>J.toLowerCase()===j.toLowerCase())))return!1}return!0},n=c=>{if(w.length>0){const m=c.Genres||[];if(!w.some(j=>m.some(J=>J.toLowerCase()===j.toLowerCase())))return!1}if(o.min!==null||o.max!==null){const m=c.ProductionYear;if(!m||m<=0||o.min!==null&&m<o.min||o.max!==null&&m>o.max)return!1}return!0},h=c=>!(o.min!==null||o.max!==null||w.length>0);return{songs:a.songs.filter(n),artists:a.artists.filter(t),albums:a.albums.filter(n),playlists:(a.playlists||[]).filter(h)}},[a,w,o]);s.useEffect(()=>{if(u){const n=window.matchMedia("(hover: hover) and (pointer: fine) and (min-width: 1024px)").matches?re:le;setTimeout(()=>{var h;if((h=n.current)==null||h.focus(),n.current){const c=n.current.value.length;n.current.setSelectionRange(c,c)}},50)}},[u]),s.useEffect(()=>{if(!u)return;const t=n=>{n.key==="Escape"&&(n.preventDefault(),n.stopPropagation(),F())};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[u]),s.useEffect(()=>()=>{p.current&&p.current.abort()},[]);const ve=t=>{v(t),t.trim().length>0&&!u&&b(!0)},be=()=>{v(""),x(null)},F=()=>{b(!1),v(""),x(null),ie([]),oe({min:null,max:null})},Y=t=>{Ge(t),q(!0)},He=t=>{ie(t)},Ue=t=>{oe(t)},je=t=>{X(`/artist/${t}`),b(!1),v(""),x(null)},ye=t=>{X(`/album/${t}`),b(!1),v(""),x(null)},Ne=t=>{y(t,[t])},we=t=>{t.preventDefault(),t.stopPropagation(),l!=null&&l.songs&&l.songs.length>0&&R(l.songs)},Ce=t=>{t.preventDefault(),t.stopPropagation(),l!=null&&l.songs&&l.songs.length>0&&z(l.songs)},Se=t=>{X(`/playlist/${t}`),b(!1),v(""),x(null)},S=(t,n,h="mobile",c)=>{K(t),Z(n),$(h),V(c||null),O(!0)};s.useEffect(()=>{d.trim()||te(0)},[I,d]),s.useEffect(()=>{ge(ze)},[d,u,a==null?void 0:a.songs.length]),s.useEffect(()=>{var h;const t=ae.current;if(!u||!t||!((h=a==null?void 0:a.songs)!=null&&h.length))return;const n=()=>{const c=t.scrollTop,m=t.clientHeight,k=t.scrollHeight;c+m*1.5>=k&&ge(j=>Math.min(j+st,a.songs.length))};return t.addEventListener("scroll",n,{passive:!0}),()=>t.removeEventListener("scroll",n)},[u,a==null?void 0:a.songs.length,W]),s.useEffect(()=>{fe(Re)},[D,P.length]),s.useEffect(()=>{const t=document.querySelector(".main-scrollable");if(!t)return;const n=()=>{const h=t.scrollTop,c=t.clientHeight,m=t.scrollHeight;h+c*1.5>=m&&fe(k=>Math.min(k+tt,P.length))};return t.addEventListener("scroll",n,{passive:!0}),()=>t.removeEventListener("scroll",n)},[P.length,xe]),s.useEffect(()=>{d.trim()||(!G.current&&me.current!==I&&he(!0),me.current=I,Be())},[D,I,d]),s.useEffect(()=>{G.current&&(G.current=!1)},[]);const Be=async()=>{M("songs",!0);try{const t={limit:U,startIndex:D*U};I==="RecentlyAdded"?(t.sortBy=["DateCreated"],t.sortOrder="Descending"):(t.sortBy=["SortName"],t.sortOrder="Ascending");const n=await T.getSongs(t);r(n.Items),ne(n.TotalRecordCount||0)}catch(t){console.error("Failed to load songs:",t),r([]),ne(0)}finally{M("songs",!1),he(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pb-20",children:[e.jsx("div",{className:`fixed top-0 left-0 right-0 bg-black z-10 lg:left-16 transition-[left,right] duration-300 ${N?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:e.jsx("div",{className:"max-w-[768px] mx-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Songs"}),e.jsx("button",{onClick:()=>b(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!u&&e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("button",{onClick:()=>E("songs",I==="RecentlyAdded"?"Alphabetical":"RecentlyAdded"),className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[I==="RecentlyAdded"?"Recently Added":"Alphabetically",e.jsx(et,{className:"w-4 h-4"})]}),L.songs&&!G.current&&e.jsx("div",{className:"flex items-center",children:e.jsx(Xe,{})})]})]})})}),e.jsx("div",{className:`fixed left-0 right-0 z-10 lg:left-16 transition-[left,right] duration-300 ${N?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 7rem - 8px)",height:"24px",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent)"}}),e.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},children:e.jsx("div",{className:`${Ye?"opacity-50 pointer-events-none":""} ${u?"hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:block":""}`,children:P.length===0&&!L.songs?e.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:e.jsx("p",{children:"No songs found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-0",children:P.map((t,n)=>e.jsx(Ke,{song:t,showImage:n<xe,onContextMenu:S,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))}),e.jsx(Ze,{currentPage:D,totalPages:Math.ceil(se/U),onPageChange:te,itemsPerPage:U,totalItems:se})]})})})]}),u&&Qe.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:block fixed inset-0 z-[9998] bg-black/50",onClick:F}),e.jsx("div",{className:`hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:flex fixed top-0 left-16 z-[9999] justify-center pointer-events-none ${N?"":"right-0"}`,style:N?{right:"var(--sidebar-width)"}:void 0,children:e.jsxs("div",{className:"w-[768px] max-h-[80vh] overflow-y-auto bg-zinc-900 rounded-b-xl shadow-2xl pointer-events-auto",children:[e.jsxs("div",{className:"px-4 pt-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:"Search"}),e.jsx("button",{onClick:F,className:"px-3 py-1.5 text-white text-sm font-medium hover:bg-zinc-800 rounded-lg transition-colors",children:"Cancel"})]}),e.jsx(Pe,{ref:re,value:d,onChange:ve,placeholder:"Search for artists, albums, songs...",showClearButton:d.trim().length>0,onClear:be})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-3 pb-4",children:[e.jsxs("button",{onClick:()=>Y("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${w.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),e.jsxs("button",{onClick:()=>Y("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${o.min!==null||o.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]}),e.jsx("div",{className:"px-4 pb-8",children:ee?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):l?e.jsxs("div",{className:"space-y-8",children:[l.songs.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:we,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:Ce,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:e.jsx(Ae,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.songs.map((t,n)=>e.jsx(Le,{song:t,onClick:Ne,onContextMenu:S,contextMenuItemId:(i==null?void 0:i.Id)||null,showImage:n<W},t.Id))})]}),l.artists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Artists"}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.artists.slice(0,5).map(t=>e.jsx(Ee,{artist:t,onClick:je,onContextMenu:S,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.albums.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:l.albums.slice(0,12).map(t=>e.jsx(_e,{album:t,onClick:ye,onContextMenu:S,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.playlists&&l.playlists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Playlists"}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.playlists.map(t=>e.jsxs("button",{onClick:()=>Se(t.Id),onContextMenu:n=>{n.preventDefault(),n.stopPropagation(),S(t,"playlist","desktop",{x:n.clientX,y:n.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:e.jsx("img",{src:T.getAlbumArtUrl(t.Id,96),alt:t.Name,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:t.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:t.ChildCount?`${t.ChildCount} tracks`:"Playlist"})]})]},t.Id))})]}),l.artists.length===0&&l.albums.length===0&&(!l.playlists||l.playlists.length===0)&&l.songs.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[e.jsx("div",{className:"text-lg mb-2",children:"No results found"}),e.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400"})})]})}),e.jsxs("div",{ref:ae,className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0 [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:e.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Pe,{ref:le,value:d,onChange:ve,showClearButton:d.trim().length>0,onClear:be})}),e.jsx("button",{onClick:F,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),e.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(52px + env(safe-area-inset-top))"},children:[e.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4",style:{top:"calc(76px + env(safe-area-inset-top))"},children:e.jsxs("div",{className:"flex items-center gap-3 px-4",children:[e.jsxs("button",{onClick:()=>Y("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${w.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),e.jsxs("button",{onClick:()=>Y("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${o.min!==null||o.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),e.jsx("div",{className:`fixed left-0 right-0 z-[60] lg:left-16 transition-[left,right] duration-300 ${N?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 76px + 4rem)",height:"24px",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent)"}}),e.jsx("div",{className:"pb-32",style:{paddingTop:"40px"},children:ee?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):l?e.jsxs("div",{className:"space-y-8",children:[l.songs.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:we,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:Ce,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:e.jsx(Ae,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"space-y-0",children:l.songs.map((t,n)=>e.jsx(Le,{song:t,onClick:Ne,onContextMenu:S,contextMenuItemId:(i==null?void 0:i.Id)||null,showImage:n<W},t.Id))})]}),l.artists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),e.jsx("div",{className:"space-y-0",children:l.artists.slice(0,5).map(t=>e.jsx(Ee,{artist:t,onClick:je,onContextMenu:S,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.albums.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:l.albums.slice(0,12).map(t=>e.jsx(_e,{album:t,onClick:ye,onContextMenu:S,contextMenuItemId:(i==null?void 0:i.Id)||null},t.Id))})]}),l.playlists&&l.playlists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),e.jsx("div",{className:"space-y-0",children:l.playlists.map(t=>e.jsxs("button",{onClick:()=>Se(t.Id),onContextMenu:n=>{n.preventDefault(),n.stopPropagation(),S(t,"playlist","desktop",{x:n.clientX,y:n.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:e.jsx("img",{src:T.getAlbumArtUrl(t.Id,96),alt:t.Name,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:t.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:t.ChildCount?`${t.ChildCount} tracks`:"Playlist"})]})]},t.Id))})]}),l.artists.length===0&&l.albums.length===0&&(!l.playlists||l.playlists.length===0)&&l.songs.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[e.jsx("div",{className:"text-lg mb-2",children:"No results found"}),e.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})]}),document.body),de==="genre"&&e.jsx(Me,{isOpen:ce,onClose:()=>q(!1),filterType:"genre",genres:C,selectedValues:w,onApply:He}),de==="year"&&e.jsx(Me,{isOpen:ce,onClose:()=>q(!1),filterType:"year",availableYears:Fe,yearRange:o,onApplyYear:Ue}),e.jsx(qe,{item:i,itemType:De,isOpen:f,onClose:()=>{O(!1),K(null),Z(null)},zIndex:99999,mode:g,position:B||void 0})]})}export{ut as default};
