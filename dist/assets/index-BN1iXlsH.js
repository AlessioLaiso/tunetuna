const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-CjASDZ0x.js","assets/search-D349Pgk6.js","assets/tag-DGEzW2G4.js","assets/piano-BCe5g9mK.js","assets/useSearch-CGJFZPDU.js","assets/chevron-right-BFbl9ZPv.js","assets/ellipsis-CaewBiUb.js","assets/ArtistsPage-DbMZiurA.js","assets/Pagination-qv_8pBp7.js","assets/arrow-up-down-CHDXKgJe.js","assets/AlbumsPage-CLT2-Y9a.js","assets/SongsPage-DFMCuV3X.js","assets/SongItem-THO8z2Iy.js","assets/GenresPage-BaJ47zyG.js","assets/flame-DHcCcJKT.js","assets/PlaylistsPage-Rc4-mx8s.js","assets/PlaylistDetailPage-CxpmlRyj.js","assets/useScrollLazyLoad-Cb68UZHk.js","assets/arrow-left-C8KgElyz.js","assets/SettingsPage-CW3-k1pj.js","assets/ArtistDetailPage-C9EfL-WB.js","assets/chevron-up-DoyiB7OR.js","assets/AlbumDetailPage-C1Bh5rD0.js","assets/GenreSongsPage-C_imgvOs.js","assets/StatsPage-BqYT4p93.js","assets/clock-B4vI5Wfu.js","assets/SongDetailPage-NuldITyw.js"])))=>i.map(i=>d[i]);
var zh=Object.defineProperty;var $h=(e,t,n)=>t in e?zh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Pt=(e,t,n)=>$h(e,typeof t!="symbol"?t+"":t,n);function Uh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function ed(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var td={exports:{}},Kl={},nd={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),Dh=Symbol.for("react.portal"),Oh=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),Vh=Symbol.for("react.provider"),Gh=Symbol.for("react.context"),Hh=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Wh=Symbol.for("react.memo"),qh=Symbol.for("react.lazy"),cu=Symbol.iterator;function Yh(e){return e===null||typeof e!="object"?null:(e=cu&&e[cu]||e["@@iterator"],typeof e=="function"?e:null)}var rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sd=Object.assign,ld={};function _r(e,t,n){this.props=e,this.context=t,this.refs=ld,this.updater=n||rd}_r.prototype.isReactComponent={};_r.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function od(){}od.prototype=_r.prototype;function Za(e,t,n){this.props=e,this.context=t,this.refs=ld,this.updater=n||rd}var ei=Za.prototype=new od;ei.constructor=Za;sd(ei,_r.prototype);ei.isPureReactComponent=!0;var du=Array.isArray,ad=Object.prototype.hasOwnProperty,ti={current:null},id={key:!0,ref:!0,__self:!0,__source:!0};function ud(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)ad.call(t,r)&&!id.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var i=Array(a),c=0;c<a;c++)i[c]=arguments[c+2];s.children=i}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:As,type:e,key:l,ref:o,props:s,_owner:ti.current}}function Kh(e,t){return{$$typeof:As,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ni(e){return typeof e=="object"&&e!==null&&e.$$typeof===As}function Xh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fu=/\/+/g;function wo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xh(""+e.key):t.toString(36)}function al(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case As:case Dh:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+wo(o,0):r,du(s)?(n="",e!=null&&(n=e.replace(fu,"$&/")+"/"),al(s,t,n,"",function(c){return c})):s!=null&&(ni(s)&&(s=Kh(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",du(e))for(var a=0;a<e.length;a++){l=e[a];var i=r+wo(l,a);o+=al(l,t,n,i,s)}else if(i=Yh(e),typeof i=="function")for(e=i.call(e),a=0;!(l=e.next()).done;)l=l.value,i=r+wo(l,a++),o+=al(l,t,n,i,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ds(e,t,n){if(e==null)return e;var r=[],s=0;return al(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Jh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},il={transition:null},Zh={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:il,ReactCurrentOwner:ti};function cd(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ds,forEach:function(e,t,n){Ds(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ds(e,function(){t++}),t},toArray:function(e){return Ds(e,function(t){return t})||[]},only:function(e){if(!ni(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=_r;ee.Fragment=Oh;ee.Profiler=Bh;ee.PureComponent=Za;ee.StrictMode=Fh;ee.Suspense=Qh;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zh;ee.act=cd;ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sd({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=ti.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(i in t)ad.call(t,i)&&!id.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&a!==void 0?a[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){a=Array(i);for(var c=0;c<i;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:As,type:e.type,key:s,ref:l,props:r,_owner:o}};ee.createContext=function(e){return e={$$typeof:Gh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vh,_context:e},e.Consumer=e};ee.createElement=ud;ee.createFactory=function(e){var t=ud.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:Hh,render:e}};ee.isValidElement=ni;ee.lazy=function(e){return{$$typeof:qh,_payload:{_status:-1,_result:e},_init:Jh}};ee.memo=function(e,t){return{$$typeof:Wh,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=il.transition;il.transition={};try{e()}finally{il.transition=t}};ee.unstable_act=cd;ee.useCallback=function(e,t){return st.current.useCallback(e,t)};ee.useContext=function(e){return st.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return st.current.useDeferredValue(e)};ee.useEffect=function(e,t){return st.current.useEffect(e,t)};ee.useId=function(){return st.current.useId()};ee.useImperativeHandle=function(e,t,n){return st.current.useImperativeHandle(e,t,n)};ee.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return st.current.useMemo(e,t)};ee.useReducer=function(e,t,n){return st.current.useReducer(e,t,n)};ee.useRef=function(e){return st.current.useRef(e)};ee.useState=function(e){return st.current.useState(e)};ee.useSyncExternalStore=function(e,t,n){return st.current.useSyncExternalStore(e,t,n)};ee.useTransition=function(){return st.current.useTransition()};ee.version="18.3.1";nd.exports=ee;var g=nd.exports;const ri=ed(g),em=Uh({__proto__:null,default:ri},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm=g,nm=Symbol.for("react.element"),rm=Symbol.for("react.fragment"),sm=Object.prototype.hasOwnProperty,lm=tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,om={key:!0,ref:!0,__self:!0,__source:!0};function dd(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)sm.call(t,r)&&!om.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:nm,type:e,key:l,ref:o,props:s,_owner:lm.current}}Kl.Fragment=rm;Kl.jsx=dd;Kl.jsxs=dd;td.exports=Kl;var u=td.exports,Zo={},fd={exports:{}},kt={},hd={exports:{}},md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,L){var F=j.length;j.push(L);e:for(;0<F;){var Z=F-1>>>1,te=j[Z];if(0<s(te,L))j[Z]=L,j[F]=te,F=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var L=j[0],F=j.pop();if(F!==L){j[0]=F;e:for(var Z=0,te=j.length,ye=te>>>1;Z<ye;){var oe=2*(Z+1)-1,ze=j[oe],ae=oe+1,ke=j[ae];if(0>s(ze,F))ae<te&&0>s(ke,ze)?(j[Z]=ke,j[ae]=F,Z=ae):(j[Z]=ze,j[oe]=F,Z=oe);else if(ae<te&&0>s(ke,F))j[Z]=ke,j[ae]=F,Z=ae;else break e}}return L}function s(j,L){var F=j.sortIndex-L.sortIndex;return F!==0?F:j.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var i=[],c=[],f=1,d=null,h=3,w=!1,x=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=j)r(c),L.sortIndex=L.expirationTime,t(i,L);else break;L=n(c)}}function v(j){if(I=!1,y(j),!x)if(n(i)!==null)x=!0,ce(S);else{var L=n(c);L!==null&&he(v,L.startTime-j)}}function S(j,L){x=!1,I&&(I=!1,p(C),C=-1),w=!0;var F=h;try{for(y(L),d=n(i);d!==null&&(!(d.expirationTime>L)||j&&!Q());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var te=Z(d.expirationTime<=L);L=e.unstable_now(),typeof te=="function"?d.callback=te:d===n(i)&&r(i),y(L)}else r(i);d=n(i)}if(d!==null)var ye=!0;else{var oe=n(c);oe!==null&&he(v,oe.startTime-L),ye=!1}return ye}finally{d=null,h=F,w=!1}}var E=!1,N=null,C=-1,P=5,b=-1;function Q(){return!(e.unstable_now()-b<P)}function q(){if(N!==null){var j=e.unstable_now();b=j;var L=!0;try{L=N(!0,j)}finally{L?ge():(E=!1,N=null)}}else E=!1}var ge;if(typeof m=="function")ge=function(){m(q)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,de=D.port2;D.port1.onmessage=q,ge=function(){de.postMessage(null)}}else ge=function(){k(q,0)};function ce(j){N=j,E||(E=!0,ge())}function he(j,L){C=k(function(){j(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,ce(S))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var F=h;h=L;try{return j()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,L){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var F=h;h=j;try{return L()}finally{h=F}},e.unstable_scheduleCallback=function(j,L,F){var Z=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,j){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=F+te,j={id:f++,callback:L,priorityLevel:j,startTime:F,expirationTime:te,sortIndex:-1},F>Z?(j.sortIndex=F,t(c,j),n(i)===null&&j===n(c)&&(I?(p(C),C=-1):I=!0,he(v,F-Z))):(j.sortIndex=te,t(i,j),x||w||(x=!0,ce(S))),j},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(j){var L=h;return function(){var F=h;h=L;try{return j.apply(this,arguments)}finally{h=F}}}})(md);hd.exports=md;var am=hd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im=g,St=am;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pd=new Set,us={};function tr(e,t){Er(e,t),Er(e+"Capture",t)}function Er(e,t){for(us[e]=t,e=0;e<t.length;e++)pd.add(t[e])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=Object.prototype.hasOwnProperty,um=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hu={},mu={};function cm(e){return ea.call(mu,e)?!0:ea.call(hu,e)?!1:um.test(e)?mu[e]=!0:(hu[e]=!0,!1)}function dm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fm(e,t,n,r){if(t===null||typeof t>"u"||dm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var si=/[\-:]([a-z])/g;function li(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(si,li);Qe[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(si,li);Qe[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(si,li);Qe[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function oi(e,t,n,r){var s=Qe.hasOwnProperty(t)?Qe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fm(t,n,s,r)&&(n=null),r||s===null?cm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var pn=im.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Os=Symbol.for("react.element"),or=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),ai=Symbol.for("react.strict_mode"),ta=Symbol.for("react.profiler"),gd=Symbol.for("react.provider"),yd=Symbol.for("react.context"),ii=Symbol.for("react.forward_ref"),na=Symbol.for("react.suspense"),ra=Symbol.for("react.suspense_list"),ui=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),vd=Symbol.for("react.offscreen"),pu=Symbol.iterator;function Or(e){return e===null||typeof e!="object"?null:(e=pu&&e[pu]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,So;function qr(e){if(So===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);So=t&&t[1]||""}return`
`+So+e}var ko=!1;function Io(e,t){if(!e||ko)return"";ko=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,a=l.length-1;1<=o&&0<=a&&s[o]!==l[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==l[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==l[a]){var i=`
`+s[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=a);break}}}finally{ko=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qr(e):""}function hm(e){switch(e.tag){case 5:return qr(e.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 2:case 15:return e=Io(e.type,!1),e;case 11:return e=Io(e.type.render,!1),e;case 1:return e=Io(e.type,!0),e;default:return""}}function sa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ar:return"Fragment";case or:return"Portal";case ta:return"Profiler";case ai:return"StrictMode";case na:return"Suspense";case ra:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yd:return(e.displayName||"Context")+".Consumer";case gd:return(e._context.displayName||"Context")+".Provider";case ii:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ui:return t=e.displayName||null,t!==null?t:sa(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return sa(e(t))}catch{}}return null}function mm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sa(t);case 8:return t===ai?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $n(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pm(e){var t=xd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fs(e){e._valueTracker||(e._valueTracker=pm(e))}function wd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function kl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function la(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$n(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sd(e,t){t=t.checked,t!=null&&oi(e,"checked",t,!1)}function oa(e,t){Sd(e,t);var n=$n(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?aa(e,t.type,n):t.hasOwnProperty("defaultValue")&&aa(e,t.type,$n(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function aa(e,t,n){(t!=="number"||kl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yr=Array.isArray;function vr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$n(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ia(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(T(92));if(Yr(n)){if(1<n.length)throw Error(T(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$n(n)}}function kd(e,t){var n=$n(t.value),r=$n(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Id(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ua(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Id(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bs,Nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gm=["Webkit","ms","Moz","O"];Object.keys(Zr).forEach(function(e){gm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zr[t]=Zr[e]})});function Ed(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zr.hasOwnProperty(e)&&Zr[e]?(""+t).trim():t+"px"}function Cd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ed(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ym=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ca(e,t){if(t){if(ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function da(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fa=null;function ci(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ha=null,xr=null,wr=null;function wu(e){if(e=Ms(e)){if(typeof ha!="function")throw Error(T(280));var t=e.stateNode;t&&(t=to(t),ha(e.stateNode,e.type,t))}}function Pd(e){xr?wr?wr.push(e):wr=[e]:xr=e}function jd(){if(xr){var e=xr,t=wr;if(wr=xr=null,wu(e),t)for(e=0;e<t.length;e++)wu(t[e])}}function Td(e,t){return e(t)}function bd(){}var No=!1;function Rd(e,t,n){if(No)return e(t,n);No=!0;try{return Td(e,t,n)}finally{No=!1,(xr!==null||wr!==null)&&(bd(),jd())}}function ds(e,t){var n=e.stateNode;if(n===null)return null;var r=to(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(T(231,t,typeof n));return n}var ma=!1;if(dn)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){ma=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{ma=!1}function vm(e,t,n,r,s,l,o,a,i){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var es=!1,Il=null,Nl=!1,pa=null,xm={onError:function(e){es=!0,Il=e}};function wm(e,t,n,r,s,l,o,a,i){es=!1,Il=null,vm.apply(xm,arguments)}function Sm(e,t,n,r,s,l,o,a,i){if(wm.apply(this,arguments),es){if(es){var c=Il;es=!1,Il=null}else throw Error(T(198));Nl||(Nl=!0,pa=c)}}function nr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Su(e){if(nr(e)!==e)throw Error(T(188))}function km(e){var t=e.alternate;if(!t){if(t=nr(e),t===null)throw Error(T(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Su(s),e;if(l===r)return Su(s),t;l=l.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=l;break}if(a===r){o=!0,r=s,n=l;break}a=a.sibling}if(!o){for(a=l.child;a;){if(a===n){o=!0,n=l,r=s;break}if(a===r){o=!0,r=l,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?e:t}function _d(e){return e=km(e),e!==null?Ld(e):null}function Ld(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ld(e);if(t!==null)return t;e=e.sibling}return null}var Md=St.unstable_scheduleCallback,ku=St.unstable_cancelCallback,Im=St.unstable_shouldYield,Nm=St.unstable_requestPaint,Te=St.unstable_now,Em=St.unstable_getCurrentPriorityLevel,di=St.unstable_ImmediatePriority,zd=St.unstable_UserBlockingPriority,El=St.unstable_NormalPriority,Cm=St.unstable_LowPriority,$d=St.unstable_IdlePriority,Xl=null,Zt=null;function Pm(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Xl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:bm,jm=Math.log,Tm=Math.LN2;function bm(e){return e>>>=0,e===0?32:31-(jm(e)/Tm|0)|0}var Vs=64,Gs=4194304;function Kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Kr(a):(l&=o,l!==0&&(r=Kr(l)))}else o=n&~s,o!==0?r=Kr(o):l!==0&&(r=Kr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ft(t),s=1<<n,r|=e[n],t&=~s;return r}function Rm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Am(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Ft(l),a=1<<o,i=s[o];i===-1?(!(a&n)||a&r)&&(s[o]=Rm(a,t)):i<=t&&(e.expiredLanes|=a),l&=~a}}function ga(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=Vs;return Vs<<=1,!(Vs&4194240)&&(Vs=64),e}function Eo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _s(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ft(t),e[t]=n}function _m(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ft(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function fi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ft(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ue=0;function Dd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Od,hi,Fd,Bd,Vd,ya=!1,Hs=[],Pn=null,jn=null,Tn=null,fs=new Map,hs=new Map,kn=[],Lm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iu(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":fs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(t.pointerId)}}function Br(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Ms(t),t!==null&&hi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Mm(e,t,n,r,s){switch(t){case"focusin":return Pn=Br(Pn,e,t,n,r,s),!0;case"dragenter":return jn=Br(jn,e,t,n,r,s),!0;case"mouseover":return Tn=Br(Tn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return fs.set(l,Br(fs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,hs.set(l,Br(hs.get(l)||null,e,t,n,r,s)),!0}return!1}function Gd(e){var t=Hn(e.target);if(t!==null){var n=nr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ad(n),t!==null){e.blockedOn=t,Vd(e.priority,function(){Fd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=va(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fa=r,n.target.dispatchEvent(r),fa=null}else return t=Ms(n),t!==null&&hi(t),e.blockedOn=n,!1;t.shift()}return!0}function Nu(e,t,n){ul(e)&&n.delete(t)}function zm(){ya=!1,Pn!==null&&ul(Pn)&&(Pn=null),jn!==null&&ul(jn)&&(jn=null),Tn!==null&&ul(Tn)&&(Tn=null),fs.forEach(Nu),hs.forEach(Nu)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,ya||(ya=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,zm)))}function ms(e){function t(s){return Vr(s,e)}if(0<Hs.length){Vr(Hs[0],e);for(var n=1;n<Hs.length;n++){var r=Hs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pn!==null&&Vr(Pn,e),jn!==null&&Vr(jn,e),Tn!==null&&Vr(Tn,e),fs.forEach(t),hs.forEach(t),n=0;n<kn.length;n++)r=kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)Gd(n),n.blockedOn===null&&kn.shift()}var Sr=pn.ReactCurrentBatchConfig,Pl=!0;function $m(e,t,n,r){var s=ue,l=Sr.transition;Sr.transition=null;try{ue=1,mi(e,t,n,r)}finally{ue=s,Sr.transition=l}}function Um(e,t,n,r){var s=ue,l=Sr.transition;Sr.transition=null;try{ue=4,mi(e,t,n,r)}finally{ue=s,Sr.transition=l}}function mi(e,t,n,r){if(Pl){var s=va(e,t,n,r);if(s===null)Mo(e,t,r,jl,n),Iu(e,r);else if(Mm(s,e,t,n,r))r.stopPropagation();else if(Iu(e,r),t&4&&-1<Lm.indexOf(e)){for(;s!==null;){var l=Ms(s);if(l!==null&&Od(l),l=va(e,t,n,r),l===null&&Mo(e,t,r,jl,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Mo(e,t,r,null,n)}}var jl=null;function va(e,t,n,r){if(jl=null,e=ci(r),e=Hn(e),e!==null)if(t=nr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jl=e,null}function Hd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Em()){case di:return 1;case zd:return 4;case El:case Cm:return 16;case $d:return 536870912;default:return 16}default:return 16}}var Nn=null,pi=null,cl=null;function Qd(){if(cl)return cl;var e,t=pi,n=t.length,r,s="value"in Nn?Nn.value:Nn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return cl=s.slice(e,1<r?1-r:void 0)}function dl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qs(){return!0}function Eu(){return!1}function It(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Qs:Eu,this.isPropagationStopped=Eu,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),t}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=It(Lr),Ls=Ce({},Lr,{view:0,detail:0}),Dm=It(Ls),Co,Po,Gr,Jl=Ce({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gr&&(Gr&&e.type==="mousemove"?(Co=e.screenX-Gr.screenX,Po=e.screenY-Gr.screenY):Po=Co=0,Gr=e),Co)},movementY:function(e){return"movementY"in e?e.movementY:Po}}),Cu=It(Jl),Om=Ce({},Jl,{dataTransfer:0}),Fm=It(Om),Bm=Ce({},Ls,{relatedTarget:0}),jo=It(Bm),Vm=Ce({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gm=It(Vm),Hm=Ce({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qm=It(Hm),Wm=Ce({},Lr,{data:0}),Pu=It(Wm),qm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ym={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Km={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Km[e])?!!t[e]:!1}function yi(){return Xm}var Jm=Ce({},Ls,{key:function(e){if(e.key){var t=qm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ym[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yi,charCode:function(e){return e.type==="keypress"?dl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zm=It(Jm),ep=Ce({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=It(ep),tp=Ce({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yi}),np=It(tp),rp=Ce({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sp=It(rp),lp=Ce({},Jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),op=It(lp),ap=[9,13,27,32],vi=dn&&"CompositionEvent"in window,ts=null;dn&&"documentMode"in document&&(ts=document.documentMode);var ip=dn&&"TextEvent"in window&&!ts,Wd=dn&&(!vi||ts&&8<ts&&11>=ts),Tu=" ",bu=!1;function qd(e,t){switch(e){case"keyup":return ap.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ir=!1;function up(e,t){switch(e){case"compositionend":return Yd(t);case"keypress":return t.which!==32?null:(bu=!0,Tu);case"textInput":return e=t.data,e===Tu&&bu?null:e;default:return null}}function cp(e,t){if(ir)return e==="compositionend"||!vi&&qd(e,t)?(e=Qd(),cl=pi=Nn=null,ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wd&&t.locale!=="ko"?null:t.data;default:return null}}var dp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ru(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dp[e.type]:t==="textarea"}function Kd(e,t,n,r){Pd(r),t=Tl(t,"onChange"),0<t.length&&(n=new gi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ns=null,ps=null;function fp(e){af(e,0)}function Zl(e){var t=dr(e);if(wd(t))return e}function hp(e,t){if(e==="change")return t}var Xd=!1;if(dn){var To;if(dn){var bo="oninput"in document;if(!bo){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),bo=typeof Au.oninput=="function"}To=bo}else To=!1;Xd=To&&(!document.documentMode||9<document.documentMode)}function _u(){ns&&(ns.detachEvent("onpropertychange",Jd),ps=ns=null)}function Jd(e){if(e.propertyName==="value"&&Zl(ps)){var t=[];Kd(t,ps,e,ci(e)),Rd(fp,t)}}function mp(e,t,n){e==="focusin"?(_u(),ns=t,ps=n,ns.attachEvent("onpropertychange",Jd)):e==="focusout"&&_u()}function pp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zl(ps)}function gp(e,t){if(e==="click")return Zl(t)}function yp(e,t){if(e==="input"||e==="change")return Zl(t)}function vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:vp;function gs(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ea.call(t,s)||!Vt(e[s],t[s]))return!1}return!0}function Lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mu(e,t){var n=Lu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lu(n)}}function Zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ef(){for(var e=window,t=kl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=kl(e.document)}return t}function xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xp(e){var t=ef(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zd(n.ownerDocument.documentElement,n)){if(r!==null&&xi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Mu(n,l);var o=Mu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wp=dn&&"documentMode"in document&&11>=document.documentMode,ur=null,xa=null,rs=null,wa=!1;function zu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wa||ur==null||ur!==kl(r)||(r=ur,"selectionStart"in r&&xi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rs&&gs(rs,r)||(rs=r,r=Tl(xa,"onSelect"),0<r.length&&(t=new gi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ur)))}function Ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionend:Ws("Transition","TransitionEnd")},Ro={},tf={};dn&&(tf=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function eo(e){if(Ro[e])return Ro[e];if(!cr[e])return e;var t=cr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tf)return Ro[e]=t[n];return e}var nf=eo("animationend"),rf=eo("animationiteration"),sf=eo("animationstart"),lf=eo("transitionend"),of=new Map,$u="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){of.set(e,t),tr(t,[e])}for(var Ao=0;Ao<$u.length;Ao++){var _o=$u[Ao],Sp=_o.toLowerCase(),kp=_o[0].toUpperCase()+_o.slice(1);Dn(Sp,"on"+kp)}Dn(nf,"onAnimationEnd");Dn(rf,"onAnimationIteration");Dn(sf,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(lf,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ip=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Uu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Sm(r,t,void 0,e),e.currentTarget=null}function af(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],i=a.instance,c=a.currentTarget;if(a=a.listener,i!==l&&s.isPropagationStopped())break e;Uu(s,a,c),l=i}else for(o=0;o<r.length;o++){if(a=r[o],i=a.instance,c=a.currentTarget,a=a.listener,i!==l&&s.isPropagationStopped())break e;Uu(s,a,c),l=i}}}if(Nl)throw e=pa,Nl=!1,pa=null,e}function xe(e,t){var n=t[Ea];n===void 0&&(n=t[Ea]=new Set);var r=e+"__bubble";n.has(r)||(uf(t,e,2,!1),n.add(r))}function Lo(e,t,n){var r=0;t&&(r|=4),uf(n,e,r,t)}var qs="_reactListening"+Math.random().toString(36).slice(2);function ys(e){if(!e[qs]){e[qs]=!0,pd.forEach(function(n){n!=="selectionchange"&&(Ip.has(n)||Lo(n,!1,e),Lo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qs]||(t[qs]=!0,Lo("selectionchange",!1,t))}}function uf(e,t,n,r){switch(Hd(t)){case 1:var s=$m;break;case 4:s=Um;break;default:s=mi}n=s.bind(null,t,n,e),s=void 0,!ma||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Mo(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Hn(a),o===null)return;if(i=o.tag,i===5||i===6){r=l=o;continue e}a=a.parentNode}}r=r.return}Rd(function(){var c=l,f=ci(n),d=[];e:{var h=of.get(e);if(h!==void 0){var w=gi,x=e;switch(e){case"keypress":if(dl(n)===0)break e;case"keydown":case"keyup":w=Zm;break;case"focusin":x="focus",w=jo;break;case"focusout":x="blur",w=jo;break;case"beforeblur":case"afterblur":w=jo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Fm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=np;break;case nf:case rf:case sf:w=Gm;break;case lf:w=sp;break;case"scroll":w=Dm;break;case"wheel":w=op;break;case"copy":case"cut":case"paste":w=Qm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ju}var I=(t&4)!==0,k=!I&&e==="scroll",p=I?h!==null?h+"Capture":null:h;I=[];for(var m=c,y;m!==null;){y=m;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,p!==null&&(v=ds(m,p),v!=null&&I.push(vs(m,v,y)))),k)break;m=m.return}0<I.length&&(h=new w(h,x,null,n,f),d.push({event:h,listeners:I}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&n!==fa&&(x=n.relatedTarget||n.fromElement)&&(Hn(x)||x[fn]))break e;if((w||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=c,x=x?Hn(x):null,x!==null&&(k=nr(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=c),w!==x)){if(I=Cu,v="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(I=ju,v="onPointerLeave",p="onPointerEnter",m="pointer"),k=w==null?h:dr(w),y=x==null?h:dr(x),h=new I(v,m+"leave",w,n,f),h.target=k,h.relatedTarget=y,v=null,Hn(f)===c&&(I=new I(p,m+"enter",x,n,f),I.target=y,I.relatedTarget=k,v=I),k=v,w&&x)t:{for(I=w,p=x,m=0,y=I;y;y=lr(y))m++;for(y=0,v=p;v;v=lr(v))y++;for(;0<m-y;)I=lr(I),m--;for(;0<y-m;)p=lr(p),y--;for(;m--;){if(I===p||p!==null&&I===p.alternate)break t;I=lr(I),p=lr(p)}I=null}else I=null;w!==null&&Du(d,h,w,I,!1),x!==null&&k!==null&&Du(d,k,x,I,!0)}}e:{if(h=c?dr(c):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var S=hp;else if(Ru(h))if(Xd)S=yp;else{S=pp;var E=mp}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=gp);if(S&&(S=S(e,c))){Kd(d,S,n,f);break e}E&&E(e,h,c),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&aa(h,"number",h.value)}switch(E=c?dr(c):window,e){case"focusin":(Ru(E)||E.contentEditable==="true")&&(ur=E,xa=c,rs=null);break;case"focusout":rs=xa=ur=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,zu(d,n,f);break;case"selectionchange":if(wp)break;case"keydown":case"keyup":zu(d,n,f)}var N;if(vi)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ir?qd(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Wd&&n.locale!=="ko"&&(ir||C!=="onCompositionStart"?C==="onCompositionEnd"&&ir&&(N=Qd()):(Nn=f,pi="value"in Nn?Nn.value:Nn.textContent,ir=!0)),E=Tl(c,C),0<E.length&&(C=new Pu(C,e,null,n,f),d.push({event:C,listeners:E}),N?C.data=N:(N=Yd(n),N!==null&&(C.data=N)))),(N=ip?up(e,n):cp(e,n))&&(c=Tl(c,"onBeforeInput"),0<c.length&&(f=new Pu("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=N))}af(d,t)})}function vs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Tl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=ds(e,n),l!=null&&r.unshift(vs(e,l,s)),l=ds(e,t),l!=null&&r.push(vs(e,l,s))),e=e.return}return r}function lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Du(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var a=n,i=a.alternate,c=a.stateNode;if(i!==null&&i===r)break;a.tag===5&&c!==null&&(a=c,s?(i=ds(n,l),i!=null&&o.unshift(vs(n,i,a))):s||(i=ds(n,l),i!=null&&o.push(vs(n,i,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Np=/\r\n?/g,Ep=/\u0000|\uFFFD/g;function Ou(e){return(typeof e=="string"?e:""+e).replace(Np,`
`).replace(Ep,"")}function Ys(e,t,n){if(t=Ou(t),Ou(e)!==t&&n)throw Error(T(425))}function bl(){}var Sa=null,ka=null;function Ia(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Na=typeof setTimeout=="function"?setTimeout:void 0,Cp=typeof clearTimeout=="function"?clearTimeout:void 0,Fu=typeof Promise=="function"?Promise:void 0,Pp=typeof queueMicrotask=="function"?queueMicrotask:typeof Fu<"u"?function(e){return Fu.resolve(null).then(e).catch(jp)}:Na;function jp(e){setTimeout(function(){throw e})}function zo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ms(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ms(t)}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Mr,xs="__reactProps$"+Mr,fn="__reactContainer$"+Mr,Ea="__reactEvents$"+Mr,Tp="__reactListeners$"+Mr,bp="__reactHandles$"+Mr;function Hn(e){var t=e[Xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fn]||n[Xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bu(e);e!==null;){if(n=e[Xt])return n;e=Bu(e)}return t}e=n,n=e.parentNode}return null}function Ms(e){return e=e[Xt]||e[fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function to(e){return e[xs]||null}var Ca=[],fr=-1;function On(e){return{current:e}}function we(e){0>fr||(e.current=Ca[fr],Ca[fr]=null,fr--)}function pe(e,t){fr++,Ca[fr]=e.current,e.current=t}var Un={},et=On(Un),dt=On(!1),Kn=Un;function Cr(e,t){var n=e.type.contextTypes;if(!n)return Un;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ft(e){return e=e.childContextTypes,e!=null}function Rl(){we(dt),we(et)}function Vu(e,t,n){if(et.current!==Un)throw Error(T(168));pe(et,t),pe(dt,n)}function cf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(T(108,mm(e)||"Unknown",s));return Ce({},n,r)}function Al(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Un,Kn=et.current,pe(et,e),pe(dt,dt.current),!0}function Gu(e,t,n){var r=e.stateNode;if(!r)throw Error(T(169));n?(e=cf(e,t,Kn),r.__reactInternalMemoizedMergedChildContext=e,we(dt),we(et),pe(et,e)):we(dt),pe(dt,n)}var ln=null,no=!1,$o=!1;function df(e){ln===null?ln=[e]:ln.push(e)}function Rp(e){no=!0,df(e)}function Fn(){if(!$o&&ln!==null){$o=!0;var e=0,t=ue;try{var n=ln;for(ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ln=null,no=!1}catch(s){throw ln!==null&&(ln=ln.slice(e+1)),Md(di,Fn),s}finally{ue=t,$o=!1}}return null}var hr=[],mr=0,_l=null,Ll=0,jt=[],Tt=0,Xn=null,on=1,an="";function Vn(e,t){hr[mr++]=Ll,hr[mr++]=_l,_l=e,Ll=t}function ff(e,t,n){jt[Tt++]=on,jt[Tt++]=an,jt[Tt++]=Xn,Xn=e;var r=on;e=an;var s=32-Ft(r)-1;r&=~(1<<s),n+=1;var l=32-Ft(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,on=1<<32-Ft(t)+s|n<<s|r,an=l+e}else on=1<<l|n<<s|r,an=e}function wi(e){e.return!==null&&(Vn(e,1),ff(e,1,0))}function Si(e){for(;e===_l;)_l=hr[--mr],hr[mr]=null,Ll=hr[--mr],hr[mr]=null;for(;e===Xn;)Xn=jt[--Tt],jt[Tt]=null,an=jt[--Tt],jt[Tt]=null,on=jt[--Tt],jt[Tt]=null}var wt=null,xt=null,Se=!1,Ut=null;function hf(e,t){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Hu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,xt=bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xn!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wt=e,xt=null,!0):!1;default:return!1}}function Pa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ja(e){if(Se){var t=xt;if(t){var n=t;if(!Hu(e,t)){if(Pa(e))throw Error(T(418));t=bn(n.nextSibling);var r=wt;t&&Hu(e,t)?hf(r,n):(e.flags=e.flags&-4097|2,Se=!1,wt=e)}}else{if(Pa(e))throw Error(T(418));e.flags=e.flags&-4097|2,Se=!1,wt=e}}}function Qu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function Ks(e){if(e!==wt)return!1;if(!Se)return Qu(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ia(e.type,e.memoizedProps)),t&&(t=xt)){if(Pa(e))throw mf(),Error(T(418));for(;t;)hf(e,t),t=bn(t.nextSibling)}if(Qu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=wt?bn(e.stateNode.nextSibling):null;return!0}function mf(){for(var e=xt;e;)e=bn(e.nextSibling)}function Pr(){xt=wt=null,Se=!1}function ki(e){Ut===null?Ut=[e]:Ut.push(e)}var Ap=pn.ReactCurrentBatchConfig;function Hr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var a=s.refs;o===null?delete a[l]:a[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,e))}return e}function Xs(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wu(e){var t=e._init;return t(e._payload)}function pf(e){function t(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=Ln(p,m),p.index=0,p.sibling=null,p}function l(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,y,v){return m===null||m.tag!==6?(m=Go(y,p.mode,v),m.return=p,m):(m=s(m,y),m.return=p,m)}function i(p,m,y,v){var S=y.type;return S===ar?f(p,m,y.props.children,v,y.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===wn&&Wu(S)===m.type)?(v=s(m,y.props),v.ref=Hr(p,m,y),v.return=p,v):(v=vl(y.type,y.key,y.props,null,p.mode,v),v.ref=Hr(p,m,y),v.return=p,v)}function c(p,m,y,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Ho(y,p.mode,v),m.return=p,m):(m=s(m,y.children||[]),m.return=p,m)}function f(p,m,y,v,S){return m===null||m.tag!==7?(m=Yn(y,p.mode,v,S),m.return=p,m):(m=s(m,y),m.return=p,m)}function d(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Go(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Os:return y=vl(m.type,m.key,m.props,null,p.mode,y),y.ref=Hr(p,null,m),y.return=p,y;case or:return m=Ho(m,p.mode,y),m.return=p,m;case wn:var v=m._init;return d(p,v(m._payload),y)}if(Yr(m)||Or(m))return m=Yn(m,p.mode,y,null),m.return=p,m;Xs(p,m)}return null}function h(p,m,y,v){var S=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(p,m,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Os:return y.key===S?i(p,m,y,v):null;case or:return y.key===S?c(p,m,y,v):null;case wn:return S=y._init,h(p,m,S(y._payload),v)}if(Yr(y)||Or(y))return S!==null?null:f(p,m,y,v,null);Xs(p,y)}return null}function w(p,m,y,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return p=p.get(y)||null,a(m,p,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Os:return p=p.get(v.key===null?y:v.key)||null,i(m,p,v,S);case or:return p=p.get(v.key===null?y:v.key)||null,c(m,p,v,S);case wn:var E=v._init;return w(p,m,y,E(v._payload),S)}if(Yr(v)||Or(v))return p=p.get(y)||null,f(m,p,v,S,null);Xs(m,v)}return null}function x(p,m,y,v){for(var S=null,E=null,N=m,C=m=0,P=null;N!==null&&C<y.length;C++){N.index>C?(P=N,N=null):P=N.sibling;var b=h(p,N,y[C],v);if(b===null){N===null&&(N=P);break}e&&N&&b.alternate===null&&t(p,N),m=l(b,m,C),E===null?S=b:E.sibling=b,E=b,N=P}if(C===y.length)return n(p,N),Se&&Vn(p,C),S;if(N===null){for(;C<y.length;C++)N=d(p,y[C],v),N!==null&&(m=l(N,m,C),E===null?S=N:E.sibling=N,E=N);return Se&&Vn(p,C),S}for(N=r(p,N);C<y.length;C++)P=w(N,p,C,y[C],v),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?C:P.key),m=l(P,m,C),E===null?S=P:E.sibling=P,E=P);return e&&N.forEach(function(Q){return t(p,Q)}),Se&&Vn(p,C),S}function I(p,m,y,v){var S=Or(y);if(typeof S!="function")throw Error(T(150));if(y=S.call(y),y==null)throw Error(T(151));for(var E=S=null,N=m,C=m=0,P=null,b=y.next();N!==null&&!b.done;C++,b=y.next()){N.index>C?(P=N,N=null):P=N.sibling;var Q=h(p,N,b.value,v);if(Q===null){N===null&&(N=P);break}e&&N&&Q.alternate===null&&t(p,N),m=l(Q,m,C),E===null?S=Q:E.sibling=Q,E=Q,N=P}if(b.done)return n(p,N),Se&&Vn(p,C),S;if(N===null){for(;!b.done;C++,b=y.next())b=d(p,b.value,v),b!==null&&(m=l(b,m,C),E===null?S=b:E.sibling=b,E=b);return Se&&Vn(p,C),S}for(N=r(p,N);!b.done;C++,b=y.next())b=w(N,p,C,b.value,v),b!==null&&(e&&b.alternate!==null&&N.delete(b.key===null?C:b.key),m=l(b,m,C),E===null?S=b:E.sibling=b,E=b);return e&&N.forEach(function(q){return t(p,q)}),Se&&Vn(p,C),S}function k(p,m,y,v){if(typeof y=="object"&&y!==null&&y.type===ar&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Os:e:{for(var S=y.key,E=m;E!==null;){if(E.key===S){if(S=y.type,S===ar){if(E.tag===7){n(p,E.sibling),m=s(E,y.props.children),m.return=p,p=m;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===wn&&Wu(S)===E.type){n(p,E.sibling),m=s(E,y.props),m.ref=Hr(p,E,y),m.return=p,p=m;break e}n(p,E);break}else t(p,E);E=E.sibling}y.type===ar?(m=Yn(y.props.children,p.mode,v,y.key),m.return=p,p=m):(v=vl(y.type,y.key,y.props,null,p.mode,v),v.ref=Hr(p,m,y),v.return=p,p=v)}return o(p);case or:e:{for(E=y.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=s(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=Ho(y,p.mode,v),m.return=p,p=m}return o(p);case wn:return E=y._init,k(p,m,E(y._payload),v)}if(Yr(y))return x(p,m,y,v);if(Or(y))return I(p,m,y,v);Xs(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,y),m.return=p,p=m):(n(p,m),m=Go(y,p.mode,v),m.return=p,p=m),o(p)):n(p,m)}return k}var jr=pf(!0),gf=pf(!1),Ml=On(null),zl=null,pr=null,Ii=null;function Ni(){Ii=pr=zl=null}function Ei(e){var t=Ml.current;we(Ml),e._currentValue=t}function Ta(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function kr(e,t){zl=e,Ii=pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ct=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(Ii!==e)if(e={context:e,memoizedValue:t,next:null},pr===null){if(zl===null)throw Error(T(308));pr=e,zl.dependencies={lanes:0,firstContext:e}}else pr=pr.next=e;return t}var Qn=null;function Ci(e){Qn===null?Qn=[e]:Qn.push(e)}function yf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ci(t)):(n.next=s.next,s.next=n),t.interleaved=n,hn(e,r)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sn=!1;function Pi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,hn(e,n)}return s=r.interleaved,s===null?(t.next=t,Ci(r)):(t.next=s.next,s.next=t),r.interleaved=t,hn(e,n)}function fl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fi(e,n)}}function qu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $l(e,t,n,r){var s=e.updateQueue;Sn=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var i=a,c=i.next;i.next=null,o===null?l=c:o.next=c,o=i;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=i))}if(l!==null){var d=s.baseState;o=0,f=c=i=null,a=l;do{var h=a.lane,w=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,I=a;switch(h=t,w=n,I.tag){case 1:if(x=I.payload,typeof x=="function"){d=x.call(w,d,h);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=I.payload,h=typeof x=="function"?x.call(w,d,h):x,h==null)break e;d=Ce({},d,h);break e;case 2:Sn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else w={eventTime:w,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=w,i=d):f=f.next=w,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(i=d),s.baseState=i,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Zn|=o,e.lanes=o,e.memoizedState=d}}function Yu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var zs={},en=On(zs),ws=On(zs),Ss=On(zs);function Wn(e){if(e===zs)throw Error(T(174));return e}function ji(e,t){switch(pe(Ss,t),pe(ws,e),pe(en,zs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ua(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ua(t,e)}we(en),pe(en,t)}function Tr(){we(en),we(ws),we(Ss)}function xf(e){Wn(Ss.current);var t=Wn(en.current),n=ua(t,e.type);t!==n&&(pe(ws,e),pe(en,n))}function Ti(e){ws.current===e&&(we(en),we(ws))}var Ne=On(0);function Ul(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uo=[];function bi(){for(var e=0;e<Uo.length;e++)Uo[e]._workInProgressVersionPrimary=null;Uo.length=0}var hl=pn.ReactCurrentDispatcher,Do=pn.ReactCurrentBatchConfig,Jn=0,Ee=null,Le=null,De=null,Dl=!1,ss=!1,ks=0,_p=0;function qe(){throw Error(T(321))}function Ri(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Ai(e,t,n,r,s,l){if(Jn=l,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hl.current=e===null||e.memoizedState===null?$p:Up,e=n(r,s),ss){l=0;do{if(ss=!1,ks=0,25<=l)throw Error(T(301));l+=1,De=Le=null,t.updateQueue=null,hl.current=Dp,e=n(r,s)}while(ss)}if(hl.current=Ol,t=Le!==null&&Le.next!==null,Jn=0,De=Le=Ee=null,Dl=!1,t)throw Error(T(300));return e}function _i(){var e=ks!==0;return ks=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?Ee.memoizedState=De=e:De=De.next=e,De}function _t(){if(Le===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=De===null?Ee.memoizedState:De.next;if(t!==null)De=t,Le=e;else{if(e===null)throw Error(T(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},De===null?Ee.memoizedState=De=e:De=De.next=e}return De}function Is(e,t){return typeof t=="function"?t(e):t}function Oo(e){var t=_t(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=Le,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=o=null,i=null,c=l;do{var f=c.lane;if((Jn&f)===f)i!==null&&(i=i.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};i===null?(a=i=d,o=r):i=i.next=d,Ee.lanes|=f,Zn|=f}c=c.next}while(c!==null&&c!==l);i===null?o=r:i.next=a,Vt(r,t.memoizedState)||(ct=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ee.lanes|=l,Zn|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fo(e){var t=_t(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);Vt(l,t.memoizedState)||(ct=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function wf(){}function Sf(e,t){var n=Ee,r=_t(),s=t(),l=!Vt(r.memoizedState,s);if(l&&(r.memoizedState=s,ct=!0),r=r.queue,Li(Nf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Ns(9,If.bind(null,n,r,s,t),void 0,null),Oe===null)throw Error(T(349));Jn&30||kf(n,t,s)}return s}function kf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function If(e,t,n,r){t.value=n,t.getSnapshot=r,Ef(t)&&Cf(e)}function Nf(e,t,n){return n(function(){Ef(t)&&Cf(e)})}function Ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch{return!0}}function Cf(e){var t=hn(e,1);t!==null&&Bt(t,e,1,-1)}function Ku(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=zp.bind(null,Ee,e),[t.memoizedState,e]}function Ns(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Pf(){return _t().memoizedState}function ml(e,t,n,r){var s=Kt();Ee.flags|=e,s.memoizedState=Ns(1|t,n,void 0,r===void 0?null:r)}function ro(e,t,n,r){var s=_t();r=r===void 0?null:r;var l=void 0;if(Le!==null){var o=Le.memoizedState;if(l=o.destroy,r!==null&&Ri(r,o.deps)){s.memoizedState=Ns(t,n,l,r);return}}Ee.flags|=e,s.memoizedState=Ns(1|t,n,l,r)}function Xu(e,t){return ml(8390656,8,e,t)}function Li(e,t){return ro(2048,8,e,t)}function jf(e,t){return ro(4,2,e,t)}function Tf(e,t){return ro(4,4,e,t)}function bf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rf(e,t,n){return n=n!=null?n.concat([e]):null,ro(4,4,bf.bind(null,t,e),n)}function Mi(){}function Af(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ri(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _f(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ri(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Lf(e,t,n){return Jn&21?(Vt(n,t)||(n=Ud(),Ee.lanes|=n,Zn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=n)}function Lp(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var r=Do.transition;Do.transition={};try{e(!1),t()}finally{ue=n,Do.transition=r}}function Mf(){return _t().memoizedState}function Mp(e,t,n){var r=_n(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zf(e))$f(t,n);else if(n=yf(e,t,n,r),n!==null){var s=rt();Bt(n,e,r,s),Uf(n,t,r)}}function zp(e,t,n){var r=_n(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zf(e))$f(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,a=l(o,n);if(s.hasEagerState=!0,s.eagerState=a,Vt(a,o)){var i=t.interleaved;i===null?(s.next=s,Ci(t)):(s.next=i.next,i.next=s),t.interleaved=s;return}}catch{}finally{}n=yf(e,t,s,r),n!==null&&(s=rt(),Bt(n,e,r,s),Uf(n,t,r))}}function zf(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function $f(e,t){ss=Dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fi(e,n)}}var Ol={readContext:At,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},$p={readContext:At,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:Xu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ml(4194308,4,bf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ml(4194308,4,e,t)},useInsertionEffect:function(e,t){return ml(4,2,e,t)},useMemo:function(e,t){var n=Kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Kt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Mp.bind(null,Ee,e),[r.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:Ku,useDebugValue:Mi,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=Ku(!1),t=e[0];return e=Lp.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ee,s=Kt();if(Se){if(n===void 0)throw Error(T(407));n=n()}else{if(n=t(),Oe===null)throw Error(T(349));Jn&30||kf(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Xu(Nf.bind(null,r,l,e),[e]),r.flags|=2048,Ns(9,If.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Kt(),t=Oe.identifierPrefix;if(Se){var n=an,r=on;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ks++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_p++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Up={readContext:At,useCallback:Af,useContext:At,useEffect:Li,useImperativeHandle:Rf,useInsertionEffect:jf,useLayoutEffect:Tf,useMemo:_f,useReducer:Oo,useRef:Pf,useState:function(){return Oo(Is)},useDebugValue:Mi,useDeferredValue:function(e){var t=_t();return Lf(t,Le.memoizedState,e)},useTransition:function(){var e=Oo(Is)[0],t=_t().memoizedState;return[e,t]},useMutableSource:wf,useSyncExternalStore:Sf,useId:Mf,unstable_isNewReconciler:!1},Dp={readContext:At,useCallback:Af,useContext:At,useEffect:Li,useImperativeHandle:Rf,useInsertionEffect:jf,useLayoutEffect:Tf,useMemo:_f,useReducer:Fo,useRef:Pf,useState:function(){return Fo(Is)},useDebugValue:Mi,useDeferredValue:function(e){var t=_t();return Le===null?t.memoizedState=e:Lf(t,Le.memoizedState,e)},useTransition:function(){var e=Fo(Is)[0],t=_t().memoizedState;return[e,t]},useMutableSource:wf,useSyncExternalStore:Sf,useId:Mf,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ba(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return(e=e._reactInternals)?nr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rt(),s=_n(e),l=cn(r,s);l.payload=t,n!=null&&(l.callback=n),t=Rn(e,l,s),t!==null&&(Bt(t,e,s,r),fl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rt(),s=_n(e),l=cn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Rn(e,l,s),t!==null&&(Bt(t,e,s,r),fl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rt(),r=_n(e),s=cn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Rn(e,s,r),t!==null&&(Bt(t,e,r,n),fl(t,e,r))}};function Ju(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!gs(n,r)||!gs(s,l):!0}function Df(e,t,n){var r=!1,s=Un,l=t.contextType;return typeof l=="object"&&l!==null?l=At(l):(s=ft(t)?Kn:et.current,r=t.contextTypes,l=(r=r!=null)?Cr(e,s):Un),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Zu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function Ra(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Pi(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=At(l):(l=ft(t)?Kn:et.current,s.context=Cr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ba(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),$l(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function br(e,t){try{var n="",r=t;do n+=hm(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Bo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Aa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Op=typeof WeakMap=="function"?WeakMap:Map;function Of(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bl||(Bl=!0,Ba=r),Aa(e,t)},n}function Ff(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Aa(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Aa(e,t),typeof r!="function"&&(An===null?An=new Set([this]):An.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function ec(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Op;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=e0.bind(null,e,t,n),t.then(e,e))}function tc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,Rn(n,t,1))),n.lanes|=1),e)}var Fp=pn.ReactCurrentOwner,ct=!1;function nt(e,t,n,r){t.child=e===null?gf(t,null,n,r):jr(t,e.child,n,r)}function rc(e,t,n,r,s){n=n.render;var l=t.ref;return kr(t,s),r=Ai(e,t,n,r,l,s),n=_i(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(Se&&n&&wi(t),t.flags|=1,nt(e,t,r,s),t.child)}function sc(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Vi(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Bf(e,t,l,r,s)):(e=vl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:gs,n(o,r)&&e.ref===t.ref)return mn(e,t,s)}return t.flags|=1,e=Ln(l,r),e.ref=t.ref,e.return=t,t.child=e}function Bf(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(gs(l,r)&&e.ref===t.ref)if(ct=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(ct=!0);else return t.lanes=e.lanes,mn(e,t,s)}return _a(e,t,n,r,s)}function Vf(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(yr,yt),yt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pe(yr,yt),yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,pe(yr,yt),yt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,pe(yr,yt),yt|=r;return nt(e,t,s,n),t.child}function Gf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,n,r,s){var l=ft(n)?Kn:et.current;return l=Cr(t,l),kr(t,s),n=Ai(e,t,n,r,l,s),r=_i(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(Se&&r&&wi(t),t.flags|=1,nt(e,t,n,s),t.child)}function lc(e,t,n,r,s){if(ft(n)){var l=!0;Al(t)}else l=!1;if(kr(t,s),t.stateNode===null)pl(e,t),Df(t,n,r),Ra(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var i=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=At(c):(c=ft(n)?Kn:et.current,c=Cr(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||i!==c)&&Zu(t,o,r,c),Sn=!1;var h=t.memoizedState;o.state=h,$l(t,r,o,s),i=t.memoizedState,a!==r||h!==i||dt.current||Sn?(typeof f=="function"&&(ba(t,n,f,r),i=t.memoizedState),(a=Sn||Ju(t,n,a,r,h,i,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vf(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:zt(t.type,a),o.props=c,d=t.pendingProps,h=o.context,i=n.contextType,typeof i=="object"&&i!==null?i=At(i):(i=ft(n)?Kn:et.current,i=Cr(t,i));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==i)&&Zu(t,o,r,i),Sn=!1,h=t.memoizedState,o.state=h,$l(t,r,o,s);var x=t.memoizedState;a!==d||h!==x||dt.current||Sn?(typeof w=="function"&&(ba(t,n,w,r),x=t.memoizedState),(c=Sn||Ju(t,n,c,r,h,x,i)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=i,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return La(e,t,n,r,l,s)}function La(e,t,n,r,s,l){Gf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Gu(t,n,!1),mn(e,t,l);r=t.stateNode,Fp.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=jr(t,e.child,null,l),t.child=jr(t,null,a,l)):nt(e,t,a,l),t.memoizedState=r.state,s&&Gu(t,n,!0),t.child}function Hf(e){var t=e.stateNode;t.pendingContext?Vu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vu(e,t.context,!1),ji(e,t.containerInfo)}function oc(e,t,n,r,s){return Pr(),ki(s),t.flags|=256,nt(e,t,n,r),t.child}var Ma={dehydrated:null,treeContext:null,retryLane:0};function za(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qf(e,t,n){var r=t.pendingProps,s=Ne.current,l=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),pe(Ne,s&1),e===null)return ja(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=ao(o,r,0,null),e=Yn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=za(n),t.memoizedState=Ma,e):zi(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Bp(e,t,o,r,a,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,a=s.sibling;var i={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=Ln(s,i),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=Ln(a,l):(l=Yn(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?za(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=Ma,r}return l=e.child,e=l.sibling,r=Ln(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zi(e,t){return t=ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,n,r){return r!==null&&ki(r),jr(t,e.child,null,n),e=zi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bp(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=Bo(Error(T(422))),Js(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=ao({mode:"visible",children:r.children},s,0,null),l=Yn(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&jr(t,e.child,null,o),t.child.memoizedState=za(o),t.memoizedState=Ma,l);if(!(t.mode&1))return Js(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(T(419)),r=Bo(l,r,void 0),Js(e,t,o,r)}if(a=(o&e.childLanes)!==0,ct||a){if(r=Oe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,hn(e,s),Bt(r,e,s,-1))}return Bi(),r=Bo(Error(T(421))),Js(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=t0.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,xt=bn(s.nextSibling),wt=t,Se=!0,Ut=null,e!==null&&(jt[Tt++]=on,jt[Tt++]=an,jt[Tt++]=Xn,on=e.id,an=e.overflow,Xn=t),t=zi(t,r.children),t.flags|=4096,t)}function ac(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ta(e.return,t,n)}function Vo(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Wf(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(nt(e,t,r.children,n),r=Ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ac(e,n,t);else if(e.tag===19)ac(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pe(Ne,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ul(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Vo(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ul(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Vo(t,!0,n,null,l);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vp(e,t,n){switch(t.tag){case 3:Hf(t),Pr();break;case 5:xf(t);break;case 1:ft(t.type)&&Al(t);break;case 4:ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;pe(Ml,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(pe(Ne,Ne.current&1),t.flags|=128,null):n&t.child.childLanes?Qf(e,t,n):(pe(Ne,Ne.current&1),e=mn(e,t,n),e!==null?e.sibling:null);pe(Ne,Ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Wf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(Ne,Ne.current),r)break;return null;case 22:case 23:return t.lanes=0,Vf(e,t,n)}return mn(e,t,n)}var qf,$a,Yf,Kf;qf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$a=function(){};Yf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Wn(en.current);var l=null;switch(n){case"input":s=la(e,s),r=la(e,r),l=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),l=[];break;case"textarea":s=ia(e,s),r=ia(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bl)}ca(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(us.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var i=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&i!==a&&(i!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in i)i.hasOwnProperty(o)&&a[o]!==i[o]&&(n||(n={}),n[o]=i[o])}else n||(l||(l=[]),l.push(c,n)),n=i;else c==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,a=a?a.__html:void 0,i!=null&&a!==i&&(l=l||[]).push(c,i)):c==="children"?typeof i!="string"&&typeof i!="number"||(l=l||[]).push(c,""+i):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(us.hasOwnProperty(c)?(i!=null&&c==="onScroll"&&xe("scroll",e),l||a===i||(l=[])):(l=l||[]).push(c,i))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};Kf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qr(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gp(e,t,n){var r=t.pendingProps;switch(Si(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return ft(t.type)&&Rl(),Ye(t),null;case 3:return r=t.stateNode,Tr(),we(dt),we(et),bi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(Ha(Ut),Ut=null))),$a(e,t),Ye(t),null;case 5:Ti(t);var s=Wn(Ss.current);if(n=t.type,e!==null&&t.stateNode!=null)Yf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(T(166));return Ye(t),null}if(e=Wn(en.current),Ks(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Xt]=t,r[xs]=l,e=(t.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<Xr.length;s++)xe(Xr[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":gu(r,l),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},xe("invalid",r);break;case"textarea":vu(r,l),xe("invalid",r)}ca(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Ys(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Ys(r.textContent,a,e),s=["children",""+a]):us.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Fs(r),yu(r,l,!0);break;case"textarea":Fs(r),xu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=bl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Id(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Xt]=t,e[xs]=r,qf(e,t,!1,!1),t.stateNode=e;e:{switch(o=da(n,r),n){case"dialog":xe("cancel",e),xe("close",e),s=r;break;case"iframe":case"object":case"embed":xe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Xr.length;s++)xe(Xr[s],e);s=r;break;case"source":xe("error",e),s=r;break;case"img":case"image":case"link":xe("error",e),xe("load",e),s=r;break;case"details":xe("toggle",e),s=r;break;case"input":gu(e,r),s=la(e,r),xe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),xe("invalid",e);break;case"textarea":vu(e,r),s=ia(e,r),xe("invalid",e);break;default:s=r}ca(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var i=a[l];l==="style"?Cd(e,i):l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Nd(e,i)):l==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&cs(e,i):typeof i=="number"&&cs(e,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(us.hasOwnProperty(l)?i!=null&&l==="onScroll"&&xe("scroll",e):i!=null&&oi(e,l,i,o))}switch(n){case"input":Fs(e),yu(e,r,!1);break;case"textarea":Fs(e),xu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$n(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?vr(e,!!r.multiple,l,!1):r.defaultValue!=null&&vr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Kf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(T(166));if(n=Wn(Ss.current),Wn(en.current),Ks(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xt]=t,(l=r.nodeValue!==n)&&(e=wt,e!==null))switch(e.tag){case 3:Ys(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ys(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=t,t.stateNode=r}return Ye(t),null;case 13:if(we(Ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&xt!==null&&t.mode&1&&!(t.flags&128))mf(),Pr(),t.flags|=98560,l=!1;else if(l=Ks(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(T(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(T(317));l[Xt]=t}else Pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),l=!1}else Ut!==null&&(Ha(Ut),Ut=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?Me===0&&(Me=3):Bi())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return Tr(),$a(e,t),e===null&&ys(t.stateNode.containerInfo),Ye(t),null;case 10:return Ei(t.type._context),Ye(t),null;case 17:return ft(t.type)&&Rl(),Ye(t),null;case 19:if(we(Ne),l=t.memoizedState,l===null)return Ye(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Qr(l,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ul(e),o!==null){for(t.flags|=128,Qr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pe(Ne,Ne.current&1|2),t.child}e=e.sibling}l.tail!==null&&Te()>Rr&&(t.flags|=128,r=!0,Qr(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ul(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Se)return Ye(t),null}else 2*Te()-l.renderingStartTime>Rr&&n!==1073741824&&(t.flags|=128,r=!0,Qr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Te(),t.sibling=null,n=Ne.current,pe(Ne,r?n&1|2:n&1),t):(Ye(t),null);case 22:case 23:return Fi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yt&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function Hp(e,t){switch(Si(t),t.tag){case 1:return ft(t.type)&&Rl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tr(),we(dt),we(et),bi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ti(t),null;case 13:if(we(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));Pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Ne),null;case 4:return Tr(),null;case 10:return Ei(t.type._context),null;case 22:case 23:return Fi(),null;case 24:return null;default:return null}}var Zs=!1,Je=!1,Qp=typeof WeakSet=="function"?WeakSet:Set,U=null;function gr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(e,t,r)}else n.current=null}function Ua(e,t,n){try{n()}catch(r){Pe(e,t,r)}}var ic=!1;function Wp(e,t){if(Sa=Pl,e=ef(),xi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,a=-1,i=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var w;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==l||r!==0&&d.nodeType!==3||(i=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(w=d.firstChild)!==null;)h=d,d=w;for(;;){if(d===e)break t;if(h===n&&++c===s&&(a=o),h===l&&++f===r&&(i=o),(w=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=w}n=a===-1||i===-1?null:{start:a,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(ka={focusedElem:e,selectionRange:n},Pl=!1,U=t;U!==null;)if(t=U,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,U=e;else for(;U!==null;){t=U;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var I=x.memoizedProps,k=x.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?I:zt(t.type,I),k);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(v){Pe(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,U=e;break}U=t.return}return x=ic,ic=!1,x}function ls(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Ua(t,n,l)}s=s.next}while(s!==r)}}function lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Da(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xf(e){var t=e.alternate;t!==null&&(e.alternate=null,Xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[xs],delete t[Ea],delete t[Tp],delete t[bp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jf(e){return e.tag===5||e.tag===3||e.tag===4}function uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bl));else if(r!==4&&(e=e.child,e!==null))for(Oa(e,t,n),e=e.sibling;e!==null;)Oa(e,t,n),e=e.sibling}function Fa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fa(e,t,n),e=e.sibling;e!==null;)Fa(e,t,n),e=e.sibling}var Be=null,$t=!1;function xn(e,t,n){for(n=n.child;n!==null;)Zf(e,t,n),n=n.sibling}function Zf(e,t,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Xl,n)}catch{}switch(n.tag){case 5:Je||gr(n,t);case 6:var r=Be,s=$t;Be=null,xn(e,t,n),Be=r,$t=s,Be!==null&&($t?(e=Be,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&($t?(e=Be,n=n.stateNode,e.nodeType===8?zo(e.parentNode,n):e.nodeType===1&&zo(e,n),ms(e)):zo(Be,n.stateNode));break;case 4:r=Be,s=$t,Be=n.stateNode.containerInfo,$t=!0,xn(e,t,n),Be=r,$t=s;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Ua(n,t,o),s=s.next}while(s!==r)}xn(e,t,n);break;case 1:if(!Je&&(gr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,t,a)}xn(e,t,n);break;case 21:xn(e,t,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,xn(e,t,n),Je=r):xn(e,t,n);break;default:xn(e,t,n)}}function cc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qp),t.forEach(function(r){var s=n0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Be=a.stateNode,$t=!1;break e;case 3:Be=a.stateNode.containerInfo,$t=!0;break e;case 4:Be=a.stateNode.containerInfo,$t=!0;break e}a=a.return}if(Be===null)throw Error(T(160));Zf(l,o,s),Be=null,$t=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(c){Pe(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eh(t,e),t=t.sibling}function eh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),qt(e),r&4){try{ls(3,e,e.return),lo(3,e)}catch(I){Pe(e,e.return,I)}try{ls(5,e,e.return)}catch(I){Pe(e,e.return,I)}}break;case 1:Mt(t,e),qt(e),r&512&&n!==null&&gr(n,n.return);break;case 5:if(Mt(t,e),qt(e),r&512&&n!==null&&gr(n,n.return),e.flags&32){var s=e.stateNode;try{cs(s,"")}catch(I){Pe(e,e.return,I)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,a=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&Sd(s,l),da(a,o);var c=da(a,l);for(o=0;o<i.length;o+=2){var f=i[o],d=i[o+1];f==="style"?Cd(s,d):f==="dangerouslySetInnerHTML"?Nd(s,d):f==="children"?cs(s,d):oi(s,f,d,c)}switch(a){case"input":oa(s,l);break;case"textarea":kd(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?vr(s,!!l.multiple,w,!1):h!==!!l.multiple&&(l.defaultValue!=null?vr(s,!!l.multiple,l.defaultValue,!0):vr(s,!!l.multiple,l.multiple?[]:"",!1))}s[xs]=l}catch(I){Pe(e,e.return,I)}}break;case 6:if(Mt(t,e),qt(e),r&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(I){Pe(e,e.return,I)}}break;case 3:if(Mt(t,e),qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ms(t.containerInfo)}catch(I){Pe(e,e.return,I)}break;case 4:Mt(t,e),qt(e);break;case 13:Mt(t,e),qt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Di=Te())),r&4&&cc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Je=(c=Je)||f,Mt(t,e),Je=c):Mt(t,e),qt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(U=e,f=e.child;f!==null;){for(d=U=f;U!==null;){switch(h=U,w=h.child,h.tag){case 0:case 11:case 14:case 15:ls(4,h,h.return);break;case 1:gr(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(I){Pe(r,n,I)}}break;case 5:gr(h,h.return);break;case 22:if(h.memoizedState!==null){fc(d);continue}}w!==null?(w.return=h,U=w):fc(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,c?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=d.stateNode,i=d.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,a.style.display=Ed("display",o))}catch(I){Pe(e,e.return,I)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(I){Pe(e,e.return,I)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Mt(t,e),qt(e),r&4&&cc(e);break;case 21:break;default:Mt(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jf(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(cs(s,""),r.flags&=-33);var l=uc(e);Fa(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uc(e);Oa(e,a,o);break;default:throw Error(T(161))}}catch(i){Pe(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qp(e,t,n){U=e,th(e)}function th(e,t,n){for(var r=(e.mode&1)!==0;U!==null;){var s=U,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zs;if(!o){var a=s.alternate,i=a!==null&&a.memoizedState!==null||Je;a=Zs;var c=Je;if(Zs=o,(Je=i)&&!c)for(U=s;U!==null;)o=U,i=o.child,o.tag===22&&o.memoizedState!==null?hc(s):i!==null?(i.return=o,U=i):hc(s);for(;l!==null;)U=l,th(l),l=l.sibling;U=s,Zs=a,Je=c}dc(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,U=l):dc(e)}}function dc(e){for(;U!==null;){var t=U;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Je||lo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Je)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:zt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Yu(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ms(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Je||t.flags&512&&Da(t)}catch(h){Pe(t,t.return,h)}}if(t===e){U=null;break}if(n=t.sibling,n!==null){n.return=t.return,U=n;break}U=t.return}}function fc(e){for(;U!==null;){var t=U;if(t===e){U=null;break}var n=t.sibling;if(n!==null){n.return=t.return,U=n;break}U=t.return}}function hc(e){for(;U!==null;){var t=U;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{lo(4,t)}catch(i){Pe(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(i){Pe(t,s,i)}}var l=t.return;try{Da(t)}catch(i){Pe(t,l,i)}break;case 5:var o=t.return;try{Da(t)}catch(i){Pe(t,o,i)}}}catch(i){Pe(t,t.return,i)}if(t===e){U=null;break}var a=t.sibling;if(a!==null){a.return=t.return,U=a;break}U=t.return}}var Yp=Math.ceil,Fl=pn.ReactCurrentDispatcher,$i=pn.ReactCurrentOwner,Rt=pn.ReactCurrentBatchConfig,le=0,Oe=null,Re=null,He=0,yt=0,yr=On(0),Me=0,Es=null,Zn=0,oo=0,Ui=0,os=null,ut=null,Di=0,Rr=1/0,sn=null,Bl=!1,Ba=null,An=null,el=!1,En=null,Vl=0,as=0,Va=null,gl=-1,yl=0;function rt(){return le&6?Te():gl!==-1?gl:gl=Te()}function _n(e){return e.mode&1?le&2&&He!==0?He&-He:Ap.transition!==null?(yl===0&&(yl=Ud()),yl):(e=ue,e!==0||(e=window.event,e=e===void 0?16:Hd(e.type)),e):1}function Bt(e,t,n,r){if(50<as)throw as=0,Va=null,Error(T(185));_s(e,n,r),(!(le&2)||e!==Oe)&&(e===Oe&&(!(le&2)&&(oo|=n),Me===4&&In(e,He)),ht(e,r),n===1&&le===0&&!(t.mode&1)&&(Rr=Te()+500,no&&Fn()))}function ht(e,t){var n=e.callbackNode;Am(e,t);var r=Cl(e,e===Oe?He:0);if(r===0)n!==null&&ku(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ku(n),t===1)e.tag===0?Rp(mc.bind(null,e)):df(mc.bind(null,e)),Pp(function(){!(le&6)&&Fn()}),n=null;else{switch(Dd(r)){case 1:n=di;break;case 4:n=zd;break;case 16:n=El;break;case 536870912:n=$d;break;default:n=El}n=uh(n,nh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nh(e,t){if(gl=-1,yl=0,le&6)throw Error(T(327));var n=e.callbackNode;if(Ir()&&e.callbackNode!==n)return null;var r=Cl(e,e===Oe?He:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gl(e,r);else{t=r;var s=le;le|=2;var l=sh();(Oe!==e||He!==t)&&(sn=null,Rr=Te()+500,qn(e,t));do try{Jp();break}catch(a){rh(e,a)}while(!0);Ni(),Fl.current=l,le=s,Re!==null?t=0:(Oe=null,He=0,t=Me)}if(t!==0){if(t===2&&(s=ga(e),s!==0&&(r=s,t=Ga(e,s))),t===1)throw n=Es,qn(e,0),In(e,r),ht(e,Te()),n;if(t===6)In(e,r);else{if(s=e.current.alternate,!(r&30)&&!Kp(s)&&(t=Gl(e,r),t===2&&(l=ga(e),l!==0&&(r=l,t=Ga(e,l))),t===1))throw n=Es,qn(e,0),In(e,r),ht(e,Te()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(T(345));case 2:Gn(e,ut,sn);break;case 3:if(In(e,r),(r&130023424)===r&&(t=Di+500-Te(),10<t)){if(Cl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){rt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Na(Gn.bind(null,e,ut,sn),t);break}Gn(e,ut,sn);break;case 4:if(In(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Ft(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=Te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yp(r/1960))-r,10<r){e.timeoutHandle=Na(Gn.bind(null,e,ut,sn),r);break}Gn(e,ut,sn);break;case 5:Gn(e,ut,sn);break;default:throw Error(T(329))}}}return ht(e,Te()),e.callbackNode===n?nh.bind(null,e):null}function Ga(e,t){var n=os;return e.current.memoizedState.isDehydrated&&(qn(e,t).flags|=256),e=Gl(e,t),e!==2&&(t=ut,ut=n,t!==null&&Ha(t)),e}function Ha(e){ut===null?ut=e:ut.push.apply(ut,e)}function Kp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Vt(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t){for(t&=~Ui,t&=~oo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ft(t),r=1<<n;e[n]=-1,t&=~r}}function mc(e){if(le&6)throw Error(T(327));Ir();var t=Cl(e,0);if(!(t&1))return ht(e,Te()),null;var n=Gl(e,t);if(e.tag!==0&&n===2){var r=ga(e);r!==0&&(t=r,n=Ga(e,r))}if(n===1)throw n=Es,qn(e,0),In(e,t),ht(e,Te()),n;if(n===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gn(e,ut,sn),ht(e,Te()),null}function Oi(e,t){var n=le;le|=1;try{return e(t)}finally{le=n,le===0&&(Rr=Te()+500,no&&Fn())}}function er(e){En!==null&&En.tag===0&&!(le&6)&&Ir();var t=le;le|=1;var n=Rt.transition,r=ue;try{if(Rt.transition=null,ue=1,e)return e()}finally{ue=r,Rt.transition=n,le=t,!(le&6)&&Fn()}}function Fi(){yt=yr.current,we(yr)}function qn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cp(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(Si(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rl();break;case 3:Tr(),we(dt),we(et),bi();break;case 5:Ti(r);break;case 4:Tr();break;case 13:we(Ne);break;case 19:we(Ne);break;case 10:Ei(r.type._context);break;case 22:case 23:Fi()}n=n.return}if(Oe=e,Re=e=Ln(e.current,null),He=yt=t,Me=0,Es=null,Ui=oo=Zn=0,ut=os=null,Qn!==null){for(t=0;t<Qn.length;t++)if(n=Qn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}Qn=null}return e}function rh(e,t){do{var n=Re;try{if(Ni(),hl.current=Ol,Dl){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dl=!1}if(Jn=0,De=Le=Ee=null,ss=!1,ks=0,$i.current=null,n===null||n.return===null){Me=1,Es=t,Re=null;break}e:{var l=e,o=n.return,a=n,i=t;if(t=He,a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var c=i,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=tc(o);if(w!==null){w.flags&=-257,nc(w,o,a,l,t),w.mode&1&&ec(l,c,t),t=w,i=c;var x=t.updateQueue;if(x===null){var I=new Set;I.add(i),t.updateQueue=I}else x.add(i);break e}else{if(!(t&1)){ec(l,c,t),Bi();break e}i=Error(T(426))}}else if(Se&&a.mode&1){var k=tc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),nc(k,o,a,l,t),ki(br(i,a));break e}}l=i=br(i,a),Me!==4&&(Me=2),os===null?os=[l]:os.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var p=Of(l,i,t);qu(l,p);break e;case 1:a=i;var m=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(An===null||!An.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var v=Ff(l,a,t);qu(l,v);break e}}l=l.return}while(l!==null)}oh(n)}catch(S){t=S,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function sh(){var e=Fl.current;return Fl.current=Ol,e===null?Ol:e}function Bi(){(Me===0||Me===3||Me===2)&&(Me=4),Oe===null||!(Zn&268435455)&&!(oo&268435455)||In(Oe,He)}function Gl(e,t){var n=le;le|=2;var r=sh();(Oe!==e||He!==t)&&(sn=null,qn(e,t));do try{Xp();break}catch(s){rh(e,s)}while(!0);if(Ni(),le=n,Fl.current=r,Re!==null)throw Error(T(261));return Oe=null,He=0,Me}function Xp(){for(;Re!==null;)lh(Re)}function Jp(){for(;Re!==null&&!Im();)lh(Re)}function lh(e){var t=ih(e.alternate,e,yt);e.memoizedProps=e.pendingProps,t===null?oh(e):Re=t,$i.current=null}function oh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Hp(n,t),n!==null){n.flags&=32767,Re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Re=null;return}}else if(n=Gp(n,t,yt),n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Me===0&&(Me=5)}function Gn(e,t,n){var r=ue,s=Rt.transition;try{Rt.transition=null,ue=1,Zp(e,t,n,r)}finally{Rt.transition=s,ue=r}return null}function Zp(e,t,n,r){do Ir();while(En!==null);if(le&6)throw Error(T(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(_m(e,l),e===Oe&&(Re=Oe=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,uh(El,function(){return Ir(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Rt.transition,Rt.transition=null;var o=ue;ue=1;var a=le;le|=4,$i.current=null,Wp(e,n),eh(n,e),xp(ka),Pl=!!Sa,ka=Sa=null,e.current=n,qp(n),Nm(),le=a,ue=o,Rt.transition=l}else e.current=n;if(el&&(el=!1,En=e,Vl=s),l=e.pendingLanes,l===0&&(An=null),Pm(n.stateNode),ht(e,Te()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Bl)throw Bl=!1,e=Ba,Ba=null,e;return Vl&1&&e.tag!==0&&Ir(),l=e.pendingLanes,l&1?e===Va?as++:(as=0,Va=e):as=0,Fn(),null}function Ir(){if(En!==null){var e=Dd(Vl),t=Rt.transition,n=ue;try{if(Rt.transition=null,ue=16>e?16:e,En===null)var r=!1;else{if(e=En,En=null,Vl=0,le&6)throw Error(T(331));var s=le;for(le|=4,U=e.current;U!==null;){var l=U,o=l.child;if(U.flags&16){var a=l.deletions;if(a!==null){for(var i=0;i<a.length;i++){var c=a[i];for(U=c;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:ls(8,f,l)}var d=f.child;if(d!==null)d.return=f,U=d;else for(;U!==null;){f=U;var h=f.sibling,w=f.return;if(Xf(f),f===c){U=null;break}if(h!==null){h.return=w,U=h;break}U=w}}}var x=l.alternate;if(x!==null){var I=x.child;if(I!==null){x.child=null;do{var k=I.sibling;I.sibling=null,I=k}while(I!==null)}}U=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,U=o;else e:for(;U!==null;){if(l=U,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ls(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,U=p;break e}U=l.return}}var m=e.current;for(U=m;U!==null;){o=U;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,U=y;else e:for(o=m;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lo(9,a)}}catch(S){Pe(a,a.return,S)}if(a===o){U=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,U=v;break e}U=a.return}}if(le=s,Fn(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Xl,e)}catch{}r=!0}return r}finally{ue=n,Rt.transition=t}}return!1}function pc(e,t,n){t=br(n,t),t=Of(e,t,1),e=Rn(e,t,1),t=rt(),e!==null&&(_s(e,1,t),ht(e,t))}function Pe(e,t,n){if(e.tag===3)pc(e,e,n);else for(;t!==null;){if(t.tag===3){pc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(An===null||!An.has(r))){e=br(n,e),e=Ff(t,e,1),t=Rn(t,e,1),e=rt(),t!==null&&(_s(t,1,e),ht(t,e));break}}t=t.return}}function e0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rt(),e.pingedLanes|=e.suspendedLanes&n,Oe===e&&(He&n)===n&&(Me===4||Me===3&&(He&130023424)===He&&500>Te()-Di?qn(e,0):Ui|=n),ht(e,t)}function ah(e,t){t===0&&(e.mode&1?(t=Gs,Gs<<=1,!(Gs&130023424)&&(Gs=4194304)):t=1);var n=rt();e=hn(e,t),e!==null&&(_s(e,t,n),ht(e,n))}function t0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ah(e,n)}function n0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(t),ah(e,n)}var ih;ih=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ct=!1,Vp(e,t,n);ct=!!(e.flags&131072)}else ct=!1,Se&&t.flags&1048576&&ff(t,Ll,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;pl(e,t),e=t.pendingProps;var s=Cr(t,et.current);kr(t,n),s=Ai(null,t,r,e,s,n);var l=_i();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(r)?(l=!0,Al(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Pi(t),s.updater=so,t.stateNode=s,s._reactInternals=t,Ra(t,r,e,n),t=La(null,t,r,!0,l,n)):(t.tag=0,Se&&l&&wi(t),nt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(pl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=s0(r),e=zt(r,e),s){case 0:t=_a(null,t,r,e,n);break e;case 1:t=lc(null,t,r,e,n);break e;case 11:t=rc(null,t,r,e,n);break e;case 14:t=sc(null,t,r,zt(r.type,e),n);break e}throw Error(T(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:zt(r,s),_a(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:zt(r,s),lc(e,t,r,s,n);case 3:e:{if(Hf(t),e===null)throw Error(T(387));r=t.pendingProps,l=t.memoizedState,s=l.element,vf(e,t),$l(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=br(Error(T(423)),t),t=oc(e,t,r,n,s);break e}else if(r!==s){s=br(Error(T(424)),t),t=oc(e,t,r,n,s);break e}else for(xt=bn(t.stateNode.containerInfo.firstChild),wt=t,Se=!0,Ut=null,n=gf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pr(),r===s){t=mn(e,t,n);break e}nt(e,t,r,n)}t=t.child}return t;case 5:return xf(t),e===null&&ja(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,Ia(r,s)?o=null:l!==null&&Ia(r,l)&&(t.flags|=32),Gf(e,t),nt(e,t,o,n),t.child;case 6:return e===null&&ja(t),null;case 13:return Qf(e,t,n);case 4:return ji(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=jr(t,null,r,n):nt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:zt(r,s),rc(e,t,r,s,n);case 7:return nt(e,t,t.pendingProps,n),t.child;case 8:return nt(e,t,t.pendingProps.children,n),t.child;case 12:return nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,pe(Ml,r._currentValue),r._currentValue=o,l!==null)if(Vt(l.value,o)){if(l.children===s.children&&!dt.current){t=mn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){o=l.child;for(var i=a.firstContext;i!==null;){if(i.context===r){if(l.tag===1){i=cn(-1,n&-n),i.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i}}l.lanes|=n,i=l.alternate,i!==null&&(i.lanes|=n),Ta(l.return,n,t),a.lanes|=n;break}i=i.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ta(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}nt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,kr(t,n),s=At(s),r=r(s),t.flags|=1,nt(e,t,r,n),t.child;case 14:return r=t.type,s=zt(r,t.pendingProps),s=zt(r.type,s),sc(e,t,r,s,n);case 15:return Bf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:zt(r,s),pl(e,t),t.tag=1,ft(r)?(e=!0,Al(t)):e=!1,kr(t,n),Df(t,r,s),Ra(t,r,s,n),La(null,t,r,!0,e,n);case 19:return Wf(e,t,n);case 22:return Vf(e,t,n)}throw Error(T(156,t.tag))};function uh(e,t){return Md(e,t)}function r0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,n,r){return new r0(e,t,n,r)}function Vi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function s0(e){if(typeof e=="function")return Vi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ii)return 11;if(e===ui)return 14}return 2}function Ln(e,t){var n=e.alternate;return n===null?(n=bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vl(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")Vi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ar:return Yn(n.children,s,l,t);case ai:o=8,s|=8;break;case ta:return e=bt(12,n,t,s|2),e.elementType=ta,e.lanes=l,e;case na:return e=bt(13,n,t,s),e.elementType=na,e.lanes=l,e;case ra:return e=bt(19,n,t,s),e.elementType=ra,e.lanes=l,e;case vd:return ao(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gd:o=10;break e;case yd:o=9;break e;case ii:o=11;break e;case ui:o=14;break e;case wn:o=16,r=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=bt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Yn(e,t,n,r){return e=bt(7,e,r,t),e.lanes=n,e}function ao(e,t,n,r){return e=bt(22,e,r,t),e.elementType=vd,e.lanes=n,e.stateNode={isHidden:!1},e}function Go(e,t,n){return e=bt(6,e,null,t),e.lanes=n,e}function Ho(e,t,n){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eo(0),this.expirationTimes=Eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gi(e,t,n,r,s,l,o,a,i){return e=new l0(e,t,n,a,i),t===1?(t=1,l===!0&&(t|=8)):t=0,l=bt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pi(l),e}function o0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ch(e){if(!e)return Un;e=e._reactInternals;e:{if(nr(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var n=e.type;if(ft(n))return cf(e,n,t)}return t}function dh(e,t,n,r,s,l,o,a,i){return e=Gi(n,r,!0,e,s,l,o,a,i),e.context=ch(null),n=e.current,r=rt(),s=_n(n),l=cn(r,s),l.callback=t??null,Rn(n,l,s),e.current.lanes=s,_s(e,s,r),ht(e,r),e}function io(e,t,n,r){var s=t.current,l=rt(),o=_n(s);return n=ch(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Rn(s,t,o),e!==null&&(Bt(e,s,o,l),fl(e,s,o)),o}function Hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hi(e,t){gc(e,t),(e=e.alternate)&&gc(e,t)}function a0(){return null}var fh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qi(e){this._internalRoot=e}uo.prototype.render=Qi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));io(e,t,null,null)};uo.prototype.unmount=Qi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;er(function(){io(null,e,null,null)}),t[fn]=null}};function uo(e){this._internalRoot=e}uo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kn.length&&t!==0&&t<kn[n].priority;n++);kn.splice(n,0,e),n===0&&Gd(e)}};function Wi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yc(){}function i0(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var c=Hl(o);l.call(c)}}var o=dh(t,r,e,0,null,!1,!1,"",yc);return e._reactRootContainer=o,e[fn]=o.current,ys(e.nodeType===8?e.parentNode:e),er(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Hl(i);a.call(c)}}var i=Gi(e,0,!1,null,null,!1,!1,"",yc);return e._reactRootContainer=i,e[fn]=i.current,ys(e.nodeType===8?e.parentNode:e),er(function(){io(t,i,n,r)}),i}function fo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var a=s;s=function(){var i=Hl(o);a.call(i)}}io(t,o,e,s)}else o=i0(n,t,e,s,r);return Hl(o)}Od=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Kr(t.pendingLanes);n!==0&&(fi(t,n|1),ht(t,Te()),!(le&6)&&(Rr=Te()+500,Fn()))}break;case 13:er(function(){var r=hn(e,1);if(r!==null){var s=rt();Bt(r,e,1,s)}}),Hi(e,1)}};hi=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=rt();Bt(t,e,134217728,n)}Hi(e,134217728)}};Fd=function(e){if(e.tag===13){var t=_n(e),n=hn(e,t);if(n!==null){var r=rt();Bt(n,e,t,r)}Hi(e,t)}};Bd=function(){return ue};Vd=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}};ha=function(e,t,n){switch(t){case"input":if(oa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=to(r);if(!s)throw Error(T(90));wd(r),oa(r,s)}}}break;case"textarea":kd(e,n);break;case"select":t=n.value,t!=null&&vr(e,!!n.multiple,t,!1)}};Td=Oi;bd=er;var u0={usingClientEntryPoint:!1,Events:[Ms,dr,to,Pd,jd,Oi]},Wr={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c0={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_d(e),e===null?null:e.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||a0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{Xl=tl.inject(c0),Zt=tl}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u0;kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wi(t))throw Error(T(200));return o0(e,t,null,n)};kt.createRoot=function(e,t){if(!Wi(e))throw Error(T(299));var n=!1,r="",s=fh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Gi(e,1,!1,null,null,n,!1,r,s),e[fn]=t.current,ys(e.nodeType===8?e.parentNode:e),new Qi(t)};kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=_d(t),e=e===null?null:e.stateNode,e};kt.flushSync=function(e){return er(e)};kt.hydrate=function(e,t,n){if(!co(t))throw Error(T(200));return fo(null,e,t,!0,n)};kt.hydrateRoot=function(e,t,n){if(!Wi(e))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=fh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=dh(t,null,e,1,n??null,s,!1,l,o),e[fn]=t.current,ys(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new uo(t)};kt.render=function(e,t,n){if(!co(t))throw Error(T(200));return fo(null,e,t,!1,n)};kt.unmountComponentAtNode=function(e){if(!co(e))throw Error(T(40));return e._reactRootContainer?(er(function(){fo(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0):!1};kt.unstable_batchedUpdates=Oi;kt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!co(n))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return fo(e,t,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hh)}catch(e){console.error(e)}}hh(),fd.exports=kt;var ho=fd.exports,vc=ho;Zo.createRoot=vc.createRoot,Zo.hydrateRoot=vc.hydrateRoot;const d0="modulepreload",f0=function(e){return"/"+e},xc={},Ze=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(i=>{if(i=f0(i),i in xc)return;xc[i]=!0;const c=i.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":d0,c||(d.as="script"),d.crossOrigin="",d.href=i,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,w)=>{d.addEventListener("load",h),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&l(a.reason);return t().catch(l)})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cs.apply(this,arguments)}var Cn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cn||(Cn={}));const wc="popstate";function h0(e){e===void 0&&(e={});function t(r,s){let{pathname:l,search:o,hash:a}=r.location;return Qa("",{pathname:l,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ql(s)}return p0(t,n,null,e)}function be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function m0(){return Math.random().toString(36).substr(2,8)}function Sc(e,t){return{usr:e.state,key:e.key,idx:t}}function Qa(e,t,n,r){return n===void 0&&(n=null),Cs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zr(t):t,{state:n,key:t&&t.key||r||m0()})}function Ql(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p0(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,o=s.history,a=Cn.Pop,i=null,c=f();c==null&&(c=0,o.replaceState(Cs({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=Cn.Pop;let k=f(),p=k==null?null:k-c;c=k,i&&i({action:a,location:I.location,delta:p})}function h(k,p){a=Cn.Push;let m=Qa(I.location,k,p);c=f()+1;let y=Sc(m,c),v=I.createHref(m);try{o.pushState(y,"",v)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(v)}l&&i&&i({action:a,location:I.location,delta:1})}function w(k,p){a=Cn.Replace;let m=Qa(I.location,k,p);c=f();let y=Sc(m,c),v=I.createHref(m);o.replaceState(y,"",v),l&&i&&i({action:a,location:I.location,delta:0})}function x(k){let p=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof k=="string"?k:Ql(k);return m=m.replace(/ $/,"%20"),be(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let I={get action(){return a},get location(){return e(s,o)},listen(k){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(wc,d),i=k,()=>{s.removeEventListener(wc,d),i=null}},createHref(k){return t(s,k)},createURL:x,encodeLocation(k){let p=x(k);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:w,go(k){return o.go(k)}};return I}var kc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kc||(kc={}));function g0(e,t,n){return n===void 0&&(n="/"),y0(e,t,n)}function y0(e,t,n,r){let s=typeof t=="string"?zr(t):t,l=Yi(s.pathname||"/",n);if(l==null)return null;let o=mh(e);v0(o);let a=null;for(let i=0;a==null&&i<o.length;++i){let c=b0(l);a=P0(o[i],c)}return a}function mh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,o,a)=>{let i={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};i.relativePath.startsWith("/")&&(be(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let c=Mn([r,i.relativePath]),f=n.concat(i);l.children&&l.children.length>0&&(be(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mh(l.children,t,f,c)),!(l.path==null&&!l.index)&&t.push({path:c,score:E0(c,l.index),routesMeta:f})};return e.forEach((l,o)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))s(l,o);else for(let i of ph(l.path))s(l,o,i)}),t}function ph(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let o=ph(r.join("/")),a=[];return a.push(...o.map(i=>i===""?l:[l,i].join("/"))),s&&a.push(...o),a.map(i=>e.startsWith("/")&&i===""?"/":i)}function v0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:C0(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const x0=/^:[\w-]+$/,w0=3,S0=2,k0=1,I0=10,N0=-2,Ic=e=>e==="*";function E0(e,t){let n=e.split("/"),r=n.length;return n.some(Ic)&&(r+=N0),t&&(r+=S0),n.filter(s=>!Ic(s)).reduce((s,l)=>s+(x0.test(l)?w0:l===""?k0:I0),r)}function C0(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function P0(e,t,n){let{routesMeta:r}=e,s={},l="/",o=[];for(let a=0;a<r.length;++a){let i=r[a],c=a===r.length-1,f=l==="/"?t:t.slice(l.length)||"/",d=j0({path:i.relativePath,caseSensitive:i.caseSensitive,end:c},f),h=i.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Mn([l,d.pathname]),pathnameBase:M0(Mn([l,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(l=Mn([l,d.pathnameBase]))}return o}function j0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=T0(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],o=l.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,f,d)=>{let{paramName:h,isOptional:w}=f;if(h==="*"){let I=a[d]||"";o=l.slice(0,l.length-I.length).replace(/(.)\/+$/,"$1")}const x=a[d];return w&&!x?c[h]=void 0:c[h]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:l,pathnameBase:o,pattern:e}}function T0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),qi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,i)=>(r.push({paramName:a,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function b0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Yi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const R0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A0=e=>R0.test(e);function _0(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?zr(e):e,l;if(n)if(A0(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),qi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=Nc(n.substring(1),"/"):l=Nc(n,t)}else l=t;return{pathname:l,search:z0(r),hash:$0(s)}}function Nc(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ki(e,t){let n=L0(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xi(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=zr(e):(s=Cs({},e),be(!s.pathname||!s.pathname.includes("?"),Qo("?","pathname","search",s)),be(!s.pathname||!s.pathname.includes("#"),Qo("#","pathname","hash",s)),be(!s.search||!s.search.includes("#"),Qo("#","search","hash",s)));let l=e===""||s.pathname==="",o=l?"/":s.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?t[d]:"/"}let i=_0(s,a),c=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(c||f)&&(i.pathname+="/"),i}const Mn=e=>e.join("/").replace(/\/\/+/g,"/"),M0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function U0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gh=["post","put","patch","delete"];new Set(gh);const D0=["get",...gh];new Set(D0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ps.apply(this,arguments)}const Ji=g.createContext(null),O0=g.createContext(null),Bn=g.createContext(null),mo=g.createContext(null),gn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),yh=g.createContext(null);function F0(e,t){let{relative:n}=t===void 0?{}:t;$r()||be(!1);let{basename:r,navigator:s}=g.useContext(Bn),{hash:l,pathname:o,search:a}=xh(e,{relative:n}),i=o;return r!=="/"&&(i=o==="/"?r:Mn([r,o])),s.createHref({pathname:i,search:a,hash:l})}function $r(){return g.useContext(mo)!=null}function tn(){return $r()||be(!1),g.useContext(mo).location}function vh(e){g.useContext(Bn).static||g.useLayoutEffect(e)}function $s(){let{isDataRoute:e}=g.useContext(gn);return e?eg():B0()}function B0(){$r()||be(!1);let e=g.useContext(Ji),{basename:t,future:n,navigator:r}=g.useContext(Bn),{matches:s}=g.useContext(gn),{pathname:l}=tn(),o=JSON.stringify(Ki(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return vh(()=>{a.current=!0}),g.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Xi(c,JSON.parse(o),l,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Mn([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,l,e])}function Nv(){let{matches:e}=g.useContext(gn),t=e[e.length-1];return t?t.params:{}}function xh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=g.useContext(Bn),{matches:s}=g.useContext(gn),{pathname:l}=tn(),o=JSON.stringify(Ki(s,r.v7_relativeSplatPath));return g.useMemo(()=>Xi(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function V0(e,t){return G0(e,t)}function G0(e,t,n,r){$r()||be(!1);let{navigator:s}=g.useContext(Bn),{matches:l}=g.useContext(gn),o=l[l.length-1],a=o?o.params:{};o&&o.pathname;let i=o?o.pathnameBase:"/";o&&o.route;let c=tn(),f;if(t){var d;let k=typeof t=="string"?zr(t):t;i==="/"||(d=k.pathname)!=null&&d.startsWith(i)||be(!1),f=k}else f=c;let h=f.pathname||"/",w=h;if(i!=="/"){let k=i.replace(/^\//,"").split("/");w="/"+h.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=g0(e,{pathname:w}),I=Y0(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:Mn([i,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?i:Mn([i,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),l,n,r);return t&&I?g.createElement(mo.Provider,{value:{location:Ps({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Cn.Pop}},I):I}function H0(){let e=Z0(),t=U0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const Q0=g.createElement(H0,null);class W0 extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(gn.Provider,{value:this.props.routeContext},g.createElement(yh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q0(e){let{routeContext:t,match:n,children:r}=e,s=g.useContext(Ji);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(gn.Provider,{value:t},r)}function Y0(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||be(!1),o=o.slice(0,Math.min(o.length,f+1))}let i=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:h,errors:w}=n,x=d.route.loader&&h[d.route.id]===void 0&&(!w||w[d.route.id]===void 0);if(d.route.lazy||x){i=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let w,x=!1,I=null,k=null;n&&(w=a&&d.route.id?a[d.route.id]:void 0,I=d.route.errorElement||Q0,i&&(c<0&&h===0?(tg("route-fallback"),x=!0,k=null):c===h&&(x=!0,k=d.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,h+1)),m=()=>{let y;return w?y=I:x?y=k:d.route.Component?y=g.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,g.createElement(q0,{match:d,routeContext:{outlet:f,matches:p,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?g.createElement(W0,{location:n.location,revalidation:n.revalidation,component:I,error:w,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var wh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wh||{}),Sh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Sh||{});function K0(e){let t=g.useContext(Ji);return t||be(!1),t}function X0(e){let t=g.useContext(O0);return t||be(!1),t}function J0(e){let t=g.useContext(gn);return t||be(!1),t}function kh(e){let t=J0(),n=t.matches[t.matches.length-1];return n.route.id||be(!1),n.route.id}function Z0(){var e;let t=g.useContext(yh),n=X0(),r=kh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function eg(){let{router:e}=K0(wh.UseNavigateStable),t=kh(Sh.UseNavigateStable),n=g.useRef(!1);return vh(()=>{n.current=!0}),g.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ps({fromRouteId:t},l)))},[e,t])}const Ec={};function tg(e,t,n){Ec[e]||(Ec[e]=!0)}function ng(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function rg(e){let{to:t,replace:n,state:r,relative:s}=e;$r()||be(!1);let{future:l,static:o}=g.useContext(Bn),{matches:a}=g.useContext(gn),{pathname:i}=tn(),c=$s(),f=Xi(t,Ki(a,l.v7_relativeSplatPath),i,s==="path"),d=JSON.stringify(f);return g.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function Ke(e){be(!1)}function sg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Cn.Pop,navigator:l,static:o=!1,future:a}=e;$r()&&be(!1);let i=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:i,navigator:l,static:o,future:Ps({v7_relativeSplatPath:!1},a)}),[i,a,l,o]);typeof r=="string"&&(r=zr(r));let{pathname:f="/",search:d="",hash:h="",state:w=null,key:x="default"}=r,I=g.useMemo(()=>{let k=Yi(f,i);return k==null?null:{location:{pathname:k,search:d,hash:h,state:w,key:x},navigationType:s}},[i,f,d,h,w,x,s]);return I==null?null:g.createElement(Bn.Provider,{value:c},g.createElement(mo.Provider,{children:n,value:I}))}function lg(e){let{children:t,location:n}=e;return V0(Wa(t),n)}new Promise(()=>{});function Wa(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let l=[...t,s];if(r.type===g.Fragment){n.push.apply(n,Wa(r.props.children,l));return}r.type!==Ke&&be(!1),!r.props.index||!r.props.children||be(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wa(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qa.apply(this,arguments)}function og(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,l;for(l=0;l<r.length;l++)s=r[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ag(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ig(e,t){return e.button===0&&(!t||t==="_self")&&!ag(e)}function Ya(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function ug(e,t){let n=Ya(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(l=>{n.append(s,l)})}),n}const cg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dg="6";try{window.__reactRouterVersion=dg}catch{}const fg="startTransition",Cc=em[fg];function hg(e){let{basename:t,children:n,future:r,window:s}=e,l=g.useRef();l.current==null&&(l.current=h0({window:s,v5Compat:!0}));let o=l.current,[a,i]=g.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=g.useCallback(d=>{c&&Cc?Cc(()=>i(d)):i(d)},[i,c]);return g.useLayoutEffect(()=>o.listen(f),[o,f]),g.useEffect(()=>ng(r),[r]),g.createElement(sg,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const mg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pc=g.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:l,replace:o,state:a,target:i,to:c,preventScrollReset:f,viewTransition:d}=t,h=og(t,cg),{basename:w}=g.useContext(Bn),x,I=!1;if(typeof c=="string"&&pg.test(c)&&(x=c,mg))try{let y=new URL(window.location.href),v=c.startsWith("//")?new URL(y.protocol+c):new URL(c),S=Yi(v.pathname,w);v.origin===y.origin&&S!=null?c=S+v.search+v.hash:I=!0}catch{}let k=F0(c,{relative:s}),p=gg(c,{replace:o,state:a,target:i,preventScrollReset:f,relative:s,viewTransition:d});function m(y){r&&r(y),y.defaultPrevented||p(y)}return g.createElement("a",qa({},h,{href:x||k,onClick:I||l?r:m,ref:n,target:i}))});var jc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jc||(jc={}));var Tc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Tc||(Tc={}));function gg(e,t){let{target:n,replace:r,state:s,preventScrollReset:l,relative:o,viewTransition:a}=t===void 0?{}:t,i=$s(),c=tn(),f=xh(e,{relative:o});return g.useCallback(d=>{if(ig(d,n)){d.preventDefault();let h=r!==void 0?r:Ql(c)===Ql(f);i(e,{replace:h,state:s,preventScrollReset:l,relative:o,viewTransition:a})}},[c,i,f,r,s,n,e,l,o,a])}function Ev(e){let t=g.useRef(Ya(e)),n=g.useRef(!1),r=tn(),s=g.useMemo(()=>ug(r.search,n.current?null:t.current),[r.search]),l=$s(),o=g.useCallback((a,i)=>{const c=Ya(typeof a=="function"?a(s):a);n.current=!0,l("?"+c,i)},[l,s]);return[s,o]}const yg={},bc=e=>{let t;const n=new Set,r=(f,d)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const w=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,w))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(yg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,i);return i},vg=e=>e?bc(e):bc;var Ih={exports:{}},Nh={},Eh={exports:{}},Ch={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ar=g;function xg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wg=typeof Object.is=="function"?Object.is:xg,Sg=Ar.useState,kg=Ar.useEffect,Ig=Ar.useLayoutEffect,Ng=Ar.useDebugValue;function Eg(e,t){var n=t(),r=Sg({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return Ig(function(){s.value=n,s.getSnapshot=t,Wo(s)&&l({inst:s})},[e,n,t]),kg(function(){return Wo(s)&&l({inst:s}),e(function(){Wo(s)&&l({inst:s})})},[e]),Ng(n),n}function Wo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wg(e,n)}catch{return!0}}function Cg(e,t){return t()}var Pg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cg:Eg;Ch.useSyncExternalStore=Ar.useSyncExternalStore!==void 0?Ar.useSyncExternalStore:Pg;Eh.exports=Ch;var jg=Eh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=g,Tg=jg;function bg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rg=typeof Object.is=="function"?Object.is:bg,Ag=Tg.useSyncExternalStore,_g=po.useRef,Lg=po.useEffect,Mg=po.useMemo,zg=po.useDebugValue;Nh.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var l=_g(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=Mg(function(){function i(w){if(!c){if(c=!0,f=w,w=r(w),s!==void 0&&o.hasValue){var x=o.value;if(s(x,w))return d=x}return d=w}if(x=d,Rg(f,w))return x;var I=r(w);return s!==void 0&&s(x,I)?(f=w,x):(f=w,d=I)}var c=!1,f,d,h=n===void 0?null:n;return[function(){return i(t())},h===null?void 0:function(){return i(h())}]},[t,n,r,s]);var a=Ag(e,l[0],l[1]);return Lg(function(){o.hasValue=!0,o.value=a},[a]),zg(a),a};Ih.exports=Nh;var $g=Ih.exports;const Ug=ed($g),Ph={},{useDebugValue:Dg}=ri,{useSyncExternalStoreWithSelector:Og}=Ug;let Rc=!1;const Fg=e=>e;function Bg(e,t=Fg,n){(Ph?"production":void 0)!=="production"&&n&&!Rc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Rc=!0);const r=Og(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Dg(r),r}const Ac=e=>{(Ph?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?vg(e):e,n=(r,s)=>Bg(t,r,s);return Object.assign(n,t),n},rr=e=>e?Ac(e):Ac,Vg={};function Gg(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var l;const o=i=>i===null?null:JSON.parse(i,void 0),a=(l=n.getItem(s))!=null?l:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,l)=>n.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>n.removeItem(s)}}const js=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return js(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return js(r)(n)}}}},Hg=(e,t)=>(n,r,s)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,p)=>({...p,...k}),...t},o=!1;const a=new Set,i=new Set;let c;try{c=l.getStorage()}catch{}if(!c)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},r,s);const f=js(l.serialize),d=()=>{const k=l.partialize({...r()});let p;const m=f({state:k,version:l.version}).then(y=>c.setItem(l.name,y)).catch(y=>{p=y});if(p)throw p;return m},h=s.setState;s.setState=(k,p)=>{h(k,p),d()};const w=e((...k)=>{n(...k),d()},r,s);let x;const I=()=>{var k;if(!c)return;o=!1,a.forEach(m=>m(r()));const p=((k=l.onRehydrateStorage)==null?void 0:k.call(l,r()))||void 0;return js(c.getItem.bind(c))(l.name).then(m=>{if(m)return l.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==l.version){if(l.migrate)return l.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var y;return x=l.merge(m,(y=r())!=null?y:w),n(x,!0),d()}).then(()=>{p==null||p(x,void 0),o=!0,i.forEach(m=>m(x))}).catch(m=>{p==null||p(void 0,m)})};return s.persist={setOptions:k=>{l={...l,...k},k.getStorage&&(c=k.getStorage())},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>I(),hasHydrated:()=>o,onHydrate:k=>(a.add(k),()=>{a.delete(k)}),onFinishHydration:k=>(i.add(k),()=>{i.delete(k)})},I(),x||w},Qg=(e,t)=>(n,r,s)=>{let l={storage:Gg(()=>localStorage),partialize:I=>I,version:0,merge:(I,k)=>({...k,...I}),...t},o=!1;const a=new Set,i=new Set;let c=l.storage;if(!c)return e((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...I)},r,s);const f=()=>{const I=l.partialize({...r()});return c.setItem(l.name,{state:I,version:l.version})},d=s.setState;s.setState=(I,k)=>{d(I,k),f()};const h=e((...I)=>{n(...I),f()},r,s);s.getInitialState=()=>h;let w;const x=()=>{var I,k;if(!c)return;o=!1,a.forEach(m=>{var y;return m((y=r())!=null?y:h)});const p=((k=l.onRehydrateStorage)==null?void 0:k.call(l,(I=r())!=null?I:h))||void 0;return js(c.getItem.bind(c))(l.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==l.version){if(l.migrate)return[!0,l.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var y;const[v,S]=m;if(w=l.merge(S,(y=r())!=null?y:h),n(w,!0),v)return f()}).then(()=>{p==null||p(w,void 0),w=r(),o=!0,i.forEach(m=>m(w))}).catch(m=>{p==null||p(void 0,m)})};return s.persist={setOptions:I=>{l={...l,...I},I.storage&&(c=I.storage)},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:I=>(a.add(I),()=>{a.delete(I)}),onFinishHydration:I=>(i.add(I),()=>{i.delete(I)})},l.skipHydration||x(),w||h},Wg=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Vg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Hg(e,t)):Qg(e,t),Us=Wg,_={log:(...e)=>{},warn:(...e)=>{},error:(...e)=>{console.error(...e)},debug:(...e)=>{}};function jh(e){let t=null,n=null;function r(){return t?Promise.resolve(t):n||(n=new Promise((s,l)=>{const o=indexedDB.open(e,1);o.onupgradeneeded=()=>{const a=o.result;a.objectStoreNames.contains("zustand")||a.createObjectStore("zustand")},o.onsuccess=()=>{t=o.result,t.onclose=()=>{t=null,n=null},s(t)},o.onerror=()=>{n=null,l(o.error)}}),n)}return{getItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readonly").objectStore("zustand").get(s);c.onsuccess=()=>{const f=c.result;o(f?JSON.parse(f):null)},c.onerror=()=>{o(null)}})}catch{return null}},setItem:async(s,l)=>{const o=await r();return new Promise((a,i)=>{const d=o.transaction(["zustand"],"readwrite").objectStore("zustand").put(JSON.stringify(l),s);d.onsuccess=()=>{a()},d.onerror=()=>{i(d.error)}})},removeItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readwrite").objectStore("zustand").delete(s);c.onsuccess=()=>{o()},c.onerror=()=>{o()}})}catch{}}}}const Ts={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){_.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){_.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){_.error("Failed to clear localStorage:",e)}}};function qg(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}function Cv(e){const t=Math.floor(e/1e7),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function xl(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function Pv(e){return e&&xl(e).replace(/'/g,"")}function Dt(){return(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!("MSStream"in window)}function Yg(e){if(!e||e.trim()==="")return null;const t=e.trim().toLowerCase(),n=t.indexOf("_");return n===-1?{category:t,value:null}:{category:t.substring(0,n),value:t.substring(n+1)}}function Xe(e){if(e.length<=1)return[...e];const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}const Kg=jh("tunetuna-storage");function _c(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function jv(e){const t=new Map;e.forEach(r=>{r.Grouping&&r.Grouping.forEach(s=>{const l=Yg(s);l&&(t.has(l.category)||t.set(l.category,new Set),l.value&&t.get(l.category).add(l.value))})});const n=[];for(const[r,s]of t)n.push({name:_c(r),key:r,values:Array.from(s).map(l=>_c(l)).sort(),isSingleValue:s.size===0});return n.sort((r,s)=>r.name.localeCompare(s.name))}const se=rr()(Us(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],shufflePool:[],lastPoolUpdate:null,loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1,feed:!1},feedTopSongs:[],feedNewReleases:[],feedLastUpdated:null,sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},recentlyAccessedMoods:{},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(l=>l.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t}),refreshShufflePool:()=>e(t=>{let r=t.songs;const s=Object.values(t.genreSongs).flat().length;if(t.songs.length===0&&s>0&&(r=Object.values(t.genreSongs).flat()),r.length===0)return{shufflePool:[]};const l=new Set(t.recentlyPlayed.slice(0,10).map(i=>i.Id));r=r.filter(i=>!l.has(i.Id));let o=r;if(o.length<30){const i=t.recentlyPlayed.slice(0,30-o.length);o=[...o,...i.map(c=>t.songs.find(f=>f.Id===c.Id)).filter(Boolean)]}return{shufflePool:Xe(o).slice(0,30),lastPoolUpdate:Date.now()}}),setFeedTopSongs:t=>e({feedTopSongs:t}),setFeedNewReleases:t=>e({feedNewReleases:t}),setFeedLastUpdated:t=>e({feedLastUpdated:t}),recordMoodAccess:t=>e(n=>({recentlyAccessedMoods:{...n.recentlyAccessedMoods,[t.toLowerCase()]:Date.now()}}))}),{name:"music-storage",storage:Kg,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,shufflePool:e.shufflePool,lastPoolUpdate:e.lastPoolUpdate,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed,recentlyAccessedMoods:e.recentlyAccessedMoods,feedTopSongs:e.feedTopSongs,feedNewReleases:e.feedNewReleases,feedLastUpdated:e.feedLastUpdated})})),Lc=3e4,Mc=15e3,nl=2,zc=1e3,$c=12*60*60*1e3,Tv=6*60*60*1e3,rn=200,Uc=1e3,Xg=5e4,Jg=/^https?:\/\/100\.\d+\.\d+\.\d+/,Th="Tunetuna",Zg="Web",bh="1.0.0",Ge=rr()(Us(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!1,stats:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),showQueueRecommendations:!0,setShowQueueRecommendations:t=>e({showQueueRecommendations:t}),recommendationsQuality:"good",setRecommendationsQuality:t=>e({recommendationsQuality:t}),statsTrackingEnabled:!0,setStatsTrackingEnabled:t=>e({statsTrackingEnabled:t}),feedCountry:"gb",setFeedCountry:t=>e({feedCountry:t}),showMoodCards:!0,setShowMoodCards:t=>e({showMoodCards:t}),showTop10:!0,setShowTop10:t=>e({showTop10:t}),showNewReleases:!1,setShowNewReleases:t=>e({showNewReleases:t}),showRecentlyPlayed:!0,setShowRecentlyPlayed:t=>e({showRecentlyPlayed:t}),muspyRssUrl:"",setMuspyRssUrl:t=>e({muspyRssUrl:t}),localServerUrl:"",setLocalServerUrl:t=>e({localServerUrl:t})}),{name:"settings-storage"})),e1=Object.freeze(Object.defineProperty({__proto__:null,useSettingsStore:Ge},Symbol.toStringTag,{value:"Module"})),vt=rr(e=>({toasts:[],addToast:(t,n="success",r=3e3)=>{const s=`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,l={id:s,message:t,type:n,duration:r};e(o=>({toasts:[...o.toasts,l]})),r>0&&setTimeout(()=>{e(o=>({toasts:o.toasts.filter(a=>a.id!==s)}))},r)},removeToast:t=>{e(n=>({toasts:n.toasts.filter(r=>r.id!==t)}))}})),Yt="/api/stats",t1=jh("tunetuna-stats-storage");async function n1(e,t){const n=`${e}::${t}`,r=new TextEncoder,s=await crypto.subtle.digest("SHA-256",r.encode(n));return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}function r1(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function s1(e,t){var n,r;return{ts:Date.now(),songId:e.Id,songName:e.Name||"Unknown",artistIds:((n=e.ArtistItems)==null?void 0:n.map(s=>s.Id))||[],artistNames:((r=e.ArtistItems)==null?void 0:r.map(s=>s.Name||"Unknown"))||[e.AlbumArtist||"Unknown"],albumId:e.AlbumId||"",albumName:e.Album||"Unknown",genres:e.Genres||[],year:e.ProductionYear||null,durationMs:t,fullDurationMs:e.RunTimeTicks?e.RunTimeTicks/1e4:0}}let qo=!1;const Ve=rr()(Us((e,t)=>({pendingEvents:[],lastSyncedAt:null,cachedEvents:[],cacheRange:null,currentPlay:null,cachedStatsKey:null,cachedStatsToken:null,metadataVersion:0,oldestEventTs:null,startPlay:n=>{e({currentPlay:{track:n,startedAt:Date.now()}})},recordPlay:(n,r)=>{if(!Ge.getState().statsTrackingEnabled)return;const{pendingEvents:s}=t(),l=n.RunTimeTicks?n.RunTimeTicks/1e4:0,o=l>0&&l<6e4;if(!(r>=6e4||o&&r>=l*.8))return;const i=s1(n,r),c=[...s,i];e({pendingEvents:c,currentPlay:null}),t().syncToServer()},syncToServer:async()=>{if(!qo){qo=!0;try{const{pendingEvents:n}=t();if(n.length===0)return;const{serverUrl:r,userId:s}=Ue.getState();if(!r||!s)return;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return;const a=n.map(i=>({...i,durationMs:i.durationMs??i.fullDurationMs??6e4}));try{const i=await fetch(`${Yt}/${l}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":o},body:JSON.stringify({_token:o,events:a})});i.ok?e(c=>({pendingEvents:c.pendingEvents.filter(f=>!a.some(d=>d.ts===f.ts&&d.songId===f.songId)),lastSyncedAt:Date.now(),cacheRange:null})):console.error("[Stats] Sync failed:",i.status,i.statusText)}catch(i){console.error("[Stats] Sync error:",i)}}finally{qo=!1}}},updateStatsKey:async()=>{const{serverUrl:n,userId:r}=Ue.getState();if(!n||!r){e({cachedStatsKey:null,cachedStatsToken:null});return}const{cachedStatsToken:s}=t(),l=s||r1(),o=await n1(n,r);e({cachedStatsKey:o,cachedStatsToken:l})},fetchEvents:async(n,r)=>{const{cacheRange:s,cachedEvents:l,pendingEvents:o}=t(),{serverUrl:a,userId:i}=Ue.getState();if(!a||!i)return[];if(s&&s.from<=n&&s.to>=r){const d=l.filter(w=>w.ts>=n&&w.ts<=r),h=o.filter(w=>w.ts>=n&&w.ts<=r);return[...d,...h].sort((w,x)=>w.ts-x.ts)}await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(!c||!f)return[];try{const d=await fetch(`${Yt}/${c}/events?from=${n}&to=${r}`,{headers:{"X-Stats-Token":f}});if(!d.ok)return[];const w=(await d.json()).events||[];e({cachedEvents:w,cacheRange:{from:n,to:r}});const x=o.filter(I=>I.ts>=n&&I.ts<=r);return[...w,...x].sort((I,k)=>I.ts-k.ts)}catch{return[]}},clearCache:()=>{e({cachedEvents:[],cacheRange:null})},updateEventMetadata:(n,r,s)=>{const{cachedEvents:l,pendingEvents:o}=t(),a=i=>{let c=!1;return(n==="song"&&i.songId===r||n==="album"&&i.albumId===r||n==="artist"&&i.artistIds.includes(r))&&(c=!0),c?{...i,...s.songName!==void 0&&{songName:s.songName},...s.artistNames!==void 0&&{artistNames:s.artistNames},...s.albumName!==void 0&&{albumName:s.albumName},...s.genres!==void 0&&{genres:s.genres},...s.year!==void 0&&{year:s.year}}:i};e(i=>({cachedEvents:l.map(a),pendingEvents:o.map(a),metadataVersion:i.metadataVersion+1})),(async()=>{const{serverUrl:i,userId:c}=Ue.getState();if(!i||!c)return;await t().updateStatsKey();const{cachedStatsKey:f,cachedStatsToken:d}=t();if(!(!f||!d))try{await fetch(`${Yt}/${f}/events/metadata`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Stats-Token":d},body:JSON.stringify({itemType:n,itemId:r,metadata:s})})}catch{}})()},exportStats:async()=>{const{pendingEvents:n}=t(),{serverUrl:r,userId:s}=Ue.getState();let l=[...n];if(r&&s){await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(c&&f)try{const d=await fetch(`${Yt}/${c}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":f}});if(d.ok){const w=(await d.json()).events||[],x=new Set(l.map(I=>`${I.ts}-${I.songId}`));for(const I of w){const k=`${I.ts}-${I.songId}`;x.has(k)||l.push(I)}}}catch{}}l.sort((c,f)=>c.ts-f.ts);const o=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download=`tunetuna-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},clearLocalStats:()=>{e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null})},clearAllStats:async()=>{const{serverUrl:n,userId:r}=Ue.getState();if(e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null}),n&&r){await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l}=t();if(s&&l)try{return(await fetch(`${Yt}/${s}/events`,{method:"DELETE",headers:{"X-Stats-Token":l}})).ok}catch{return!1}}return!0},importStats:async n=>{const{serverUrl:r,userId:s}=Ue.getState();if(!r||!s)throw new Error("Not authenticated");const l=await n.text();let o;try{o=JSON.parse(l)}catch{throw new Error("Invalid JSON file")}if(!Array.isArray(o))throw new Error("File must contain an array of events");const a=o.filter(x=>typeof x.ts=="number"&&typeof x.songId=="string"&&typeof x.songName=="string"&&Array.isArray(x.artistIds)&&Array.isArray(x.artistNames)&&typeof x.albumId=="string"&&typeof x.albumName=="string"&&Array.isArray(x.genres)&&typeof x.fullDurationMs=="number");if(a.length===0)throw new Error("No valid events found in file");await t().updateStatsKey();const{cachedStatsKey:i,cachedStatsToken:c}=t();if(!i||!c)throw new Error("Failed to initialize stats authentication");let f=new Set;try{const x=await fetch(`${Yt}/${i}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":c}});if(x.ok){const k=(await x.json()).events||[];f=new Set(k.map(p=>`${p.ts}-${p.songId}`))}}catch{}const{pendingEvents:d}=t();for(const x of d)f.add(`${x.ts}-${x.songId}`);const h=a.filter(x=>!f.has(`${x.ts}-${x.songId}`));if(h.length===0)return{imported:0,skipped:a.length};if(!(await fetch(`${Yt}/${i}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":c},body:JSON.stringify(h)})).ok)throw new Error("Failed to upload events");return e({cacheRange:null}),{imported:h.length,skipped:a.length-h.length}},hasStats:async()=>{var a;const{pendingEvents:n}=t();if(n.length>0)return!0;const{serverUrl:r,userId:s}=Ue.getState();if(!r||!s)return!1;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return!1;try{const i=await fetch(`${Yt}/${l}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":o}});if(i.ok)return(((a=(await i.json()).events)==null?void 0:a.length)||0)>0}catch{}return!1},initializeOldestTs:async()=>{const{serverUrl:n,userId:r}=Ue.getState();if(!n||!r)return;await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l,pendingEvents:o}=t();if(!(!s||!l))try{const a=await fetch(`${Yt}/${s}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":l}});if(a.ok){const c=(await a.json()).events||[];o.length>0&&await t().syncToServer();const f=[...c,...o];if(f.length>0){const d=Math.min(...f.map(h=>h.ts));e({oldestEventTs:d})}}}catch{}}}),{name:"stats-storage",storage:t1,partialize:e=>({pendingEvents:e.pendingEvents,lastSyncedAt:e.lastSyncedAt,cachedStatsToken:e.cachedStatsToken,oldestEventTs:e.oldestEventTs})}));let Dc=!1,Yo=null;function Oc(){const{pendingEvents:e,cachedStatsKey:t,cachedStatsToken:n}=Ve.getState();if(e.length>0&&t&&n){const r={_token:n,events:e},s=new Blob([JSON.stringify(r)],{type:"application/json"});return navigator.sendBeacon(`${Yt}/${t}/events`,s),!0}return!1}function l1(){Dc||typeof document>"u"||(Dc=!0,document.addEventListener("visibilitychange",()=>{const{pendingEvents:e}=Ve.getState();document.visibilityState==="hidden"?e.length>0&&Oc():document.visibilityState==="visible"&&e.length>0&&Ve.getState().syncToServer()}),window.addEventListener("beforeunload",()=>{Oc()}),setTimeout(()=>{Yo&&Yo(),Yo=Ue.subscribe((n,r)=>{(n.serverUrl!==r.serverUrl||n.userId!==r.userId)&&(Ve.getState().updateStatsKey(),Ve.getState().initializeOldestTs())});const{serverUrl:e,userId:t}=Ue.getState();e&&t&&(Ve.getState().updateStatsKey(),Ve.getState().initializeOldestTs())},0))}l1();const Fc=100,is=new Set,Wl=new Map,ql=new Set;let it=null;function o1(){if(is.size>Fc){const e=Array.from(is);e.slice(0,e.length-Fc).forEach(n=>is.delete(n))}}function Ka(){is.clear();for(const e of Wl.values())clearTimeout(e);Wl.clear();for(const e of ql)clearTimeout(e);ql.clear(),it&&(clearTimeout(it),it=null)}function Ko(e,t,n=5e3){const r=setTimeout(async()=>{const s=t();if((s==null?void 0:s.Id)===e)try{await $.markItemAsPlayed(e),is.add(e),o1();const l=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}})),ql.delete(l)},4e3);ql.add(l)}catch{}Wl.delete(e)},n);Wl.set(e,r)}const X=rr()(Us((e,t)=>({songs:[],currentIndex:-1,previousIndex:-1,standardOrder:[],shuffleOrder:[],isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,nextAudioElement:null,nextTrackId:null,isFetchingRecommendations:!1,isLoadingMoreSongs:!1,shuffleHasMoreSongs:!1,lastPlayedTrack:null,isShuffleAllActive:!1,isShuffleGenreActive:!1,manuallyCleared:!1,hasRecordedCurrentTrackStats:!1,isQueueSidebarOpen:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setNextAudioElement:n=>{e({nextAudioElement:n}),n&&(n.volume=t().volume)},preBufferNextTrack:()=>{const{nextAudioElement:n,currentIndex:r,songs:s,repeat:l,nextTrackId:o}=t();if(!n||l==="one")return;let a=r+1;if(a>=s.length)if(l==="all")a=0;else{o&&(e({nextTrackId:null}),n.removeAttribute("src"),n.load());return}const i=s[a];if(!i||o===i.Id)return;const c=$.serverBaseUrl;if(!c)return;const f=`${c}/Audio/${i.Id}/stream?static=true`;n.src=f,n.load(),e({nextTrackId:i.Id})},swapToPreBuffered:()=>{const{audioElement:n,nextAudioElement:r,nextTrackId:s,currentIndex:l,songs:o,repeat:a}=t();if(!r||!s)return;let i=l+1;if(i>=o.length)if(a==="all")i=0;else return;const c=o[i];if(!c||c.Id!==s){t().cancelPreBuffer();return}const f=t();if(!f.hasRecordedCurrentTrackStats&&f.currentIndex>=0&&f.currentIndex<f.songs.length){const w=f.songs[f.currentIndex];Ve.getState().recordPlay(w,f.currentTime*1e3)}const d=l>=0?o[l]:null;if(Dt()){r.removeAttribute("src"),r.load();const w=$.serverBaseUrl;if(!w||!n)return;const x=`${w}/Audio/${c.Id}/stream?static=true`;e({nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:0,isPlaying:!0}),n.src=x,n.load(),n.play().then(()=>{Ko(c.Id,()=>t().songs[t().currentIndex]||null),se.getState().addToRecentlyPlayed(c),Ve.getState().startPlay(c)}).catch(I=>{_.error("[iOS Gapless] Playback error:",I),e({isPlaying:!1})});return}n&&(n.pause(),n.removeAttribute("src"),n.load());const h=r.duration&&!isNaN(r.duration)?r.duration:0;e({audioElement:r,nextAudioElement:n,nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:h,isPlaying:!0}),r.play().then(()=>{Ko(c.Id,()=>t().songs[t().currentIndex]||null),se.getState().addToRecentlyPlayed(c),Ve.getState().startPlay(c)}).catch(w=>{_.error("[Gapless] Playback error on swapped element:",w),e({isPlaying:!1})})},cancelPreBuffer:()=>{const{nextAudioElement:n}=t();n&&(n.removeAttribute("src"),n.load()),e({nextTrackId:null})},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setIsLoadingMoreSongs:n=>{e({isLoadingMoreSongs:n})},setCurrentTime:n=>{const{currentIndex:r,songs:s,hasRecordedCurrentTrackStats:l}=t();if(e({currentTime:n}),n>=60&&!l&&r>=0&&r<s.length){const o=s[r];Ve.getState().recordPlay(o,n*1e3),e({hasRecordedCurrentTrackStats:!0})}},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n);const s=t().nextAudioElement;s&&(s.volume=n)},clearQueue:()=>{t().cancelPreBuffer(),it&&(clearTimeout(it),it=null),e(n=>{const r=n.currentIndex>=0?[n.songs[n.currentIndex]]:[];return{songs:r,currentIndex:r.length>0?0:-1,previousIndex:-1,standardOrder:r.map(s=>s.Id),shuffleOrder:r.map(s=>s.Id),manuallyCleared:!0}})},addToQueue:(n,r=!1,s="user")=>{t().cancelPreBuffer(),e(l=>{const o=l.currentIndex>=0?l.songs[l.currentIndex]:null,a=n.map(x=>({...x,source:s}));let i;const c=a;if(r){const x=l.shuffle?Xe([...a]):a,I=l.currentIndex+1,k=l.songs.slice(0,I),p=l.songs.slice(I);i=[...k,...x,...p]}else if(s==="recommendation")i=[...l.songs,...c];else{const x=l.songs.findIndex((I,k)=>k>l.currentIndex&&I.source==="recommendation");x!==-1?i=[...l.songs.slice(0,x),...c,...l.songs.slice(x)]:i=[...l.songs,...c]}let f=l.currentIndex;if(l.currentIndex>=0&&o){const x=i.findIndex(I=>I.Id===o.Id);x!==-1?f=x:_.error("[addToQueue] CRITICAL: Could not find current song in new queue!")}let d=i;if(i.length>1e3){const x=i.slice(0,f),I=i.slice(f+1),k=x.slice(-5),p=I,m=1e3-k.length-(o?1:0)-p.length,y=x.slice(-Math.max(0,m));d=[...y,...o?[o]:[],...p],f=o?y.length:-1}const w=d.filter(x=>x.source==="user").map(x=>x.Id);return{songs:d,currentIndex:f,standardOrder:w,shuffleOrder:w,manuallyCleared:!1}})},addToQueueWithToast:n=>{t().addToQueue(n,!1,"user");const r=n.length,s=r===1?"Added to queue":`${r} songs added to queue`;vt.getState().addToast(s,"success",2e3)},removeFromQueue:n=>{t().cancelPreBuffer(),e(r=>{if(n<0||n>=r.songs.length)return r;const s=r.songs[n],l=r.songs.filter((f,d)=>d!==n);let o=r.standardOrder.filter(f=>f!==s.Id),a=r.shuffleOrder.filter(f=>f!==s.Id),i=r.currentIndex,c=r.previousIndex;return n<r.currentIndex?i=r.currentIndex-1:n===r.currentIndex&&(i=-1),n<r.previousIndex?c=r.previousIndex-1:n===r.previousIndex&&(c=-1),{songs:l,currentIndex:i,previousIndex:c,standardOrder:o,shuffleOrder:a}})},reorderQueue:(n,r)=>{t().cancelPreBuffer(),e(s=>{if(n<0||r<0||n>=s.songs.length||r>=s.songs.length||n===r)return s;const l=s.songs[n],o=s.songs[r];if(l.source!==o.source)return s;const a=[...s.songs],[i]=a.splice(n,1);if(a.splice(r,0,i),l.source==="user"){const f=s.shuffle?"shuffleOrder":"standardOrder",d=s[f],h=d.indexOf(l.Id);if(h>=0){const w=[...d];w.splice(h,1);const I=a.slice(0,r+1).filter(p=>p.source==="user").length-1;w.splice(I,0,l.Id);const k=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,[f]:w,currentIndex:k,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}}}const c=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,currentIndex:c,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}})},play:()=>{const{audioElement:n,currentIndex:r,songs:s,currentTime:l}=t();if(n&&r>=0&&r<s.length){const o=s[r],a=$.serverBaseUrl,i=a?`${a}/Audio/${o.Id}/stream?static=true`:"";n.src!==i?(n.src=i,n.load()):l===0&&n.currentTime>.5&&(n.currentTime=0,n.duration&&!isNaN(n.duration)&&e({duration:n.duration})),n.play().then(()=>{e({isPlaying:!0,hasRecordedCurrentTrackStats:!1}),Ko(o.Id,()=>t().songs[t().currentIndex]||null),se.getState().addToRecentlyPlayed(o),Ve.getState().startPlay(o)}).catch(c=>{_.error("Playback error:",c),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const n=t();if(_.debug("[PlayerStore] next() called",{currentIndex:n.currentIndex,queueLength:n.songs.length}),n.songs.length===0)return;if(n.repeat==="one"&&n.currentIndex>=0){t().seek(0),t().play();return}let r=n.currentIndex+1;if(r>=n.songs.length)if(n.repeat==="all")r=0;else{if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];Ve.getState().recordPlay(o,n.currentTime*1e3)}t().pause();return}const s=n.songs[r];if(n.nextTrackId&&s&&n.nextTrackId===s.Id){t().swapToPreBuffered();return}if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];Ve.getState().recordPlay(o,n.currentTime*1e3)}const l=n.currentIndex>=0?n.songs[n.currentIndex]:null;e({previousIndex:n.currentIndex,currentIndex:r,lastPlayedTrack:l}),t().play()},previous:()=>{t().cancelPreBuffer(),e(n=>{if(n.songs.length===0)return n;let r=n.currentIndex,s=n.currentIndex;if(n.currentIndex>0)r=n.currentIndex-1;else if(n.repeat==="all")r=n.songs.length-1;else return n;return{currentIndex:r,previousIndex:s}}),t().play()},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n})),window.dispatchEvent(new CustomEvent("playerSeek"))},toggleShuffle:()=>{t().cancelPreBuffer(),e(n=>{const r=!n.shuffle;if(r){const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,o=n.songs.slice(n.currentIndex+1).filter(h=>h.source==="user"),a=n.songs.filter(h=>h.source==="recommendation"),i=Xe(o.map(h=>h.Id)),c=i.map(h=>o.find(w=>w.Id===h)).filter(Boolean),f=[...s,...l?[l]:[],...c,...a],d=[...n.standardOrder.slice(0,n.currentIndex+1),...i];return{shuffle:r,shuffleOrder:d,songs:f}}else{const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,a=n.standardOrder.slice(n.currentIndex+1).map(f=>n.songs.find(d=>d.Id===f&&d.source==="user")).filter(Boolean),i=n.songs.filter(f=>f.source==="recommendation"),c=[...s,...l?[l]:[],...a,...i];return{shuffle:r,songs:c}}})},toggleRepeat:()=>{t().cancelPreBuffer(),e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{t().cancelPreBuffer();let s,l;r?(s=r,l=r.findIndex(a=>a.Id===n.Id),l===-1&&(s=[n,...r.filter(a=>a.Id!==n.Id)],l=0)):(s=[n],l=0);const o=s.map(a=>({...a,source:"user"}));e({songs:o,standardOrder:o.map(a=>a.Id),shuffleOrder:o.map(a=>a.Id),currentIndex:l,previousIndex:l>0?l-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playAlbum:(n,r=0)=>{t().cancelPreBuffer();const s=n.map(l=>({...l,source:"user"}));e({songs:s,standardOrder:s.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:r,previousIndex:r>0?r-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playNext:n=>{t().addToQueue(n,!0);const r=n.length,s=r===1?"Playing next":`${r} songs playing next`;vt.getState().addToast(s,"success",2e3)},shuffleArtist:n=>{t().cancelPreBuffer();const r=n.map(l=>({...l,source:"user"})),s=Xe(r);e({songs:s,standardOrder:r.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},shuffleAllSongs:async()=>{t().clearQueue();const{setShowQueueRecommendations:n}=Ge.getState();n(!1);const s=typeof window<"u"&&window.innerWidth<768?400:800,l=se.getState();let o=[];if(l.shufflePool.length>=1){const d=Math.min(5,l.shufflePool.length);o=l.shufflePool.slice(0,d);const h=l.shufflePool.slice(d),w=l.songs,x=new Set(l.recentlyPlayed.slice(0,10).map(m=>m.Id)),I=w.filter(m=>!x.has(m.Id)),k=Xe(I).slice(0,d),p=[...h,...k];se.setState({shufflePool:p,lastPoolUpdate:Date.now()})}else{let d=l.songs;if(!d||d.length===0)try{d=(await $.getSongs({limit:Math.max(50,s),sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]}catch(h){_.error("Failed to fetch songs for shuffle all:",h);return}o=Xe(d).slice(0,5),d.filter(h=>!o.some(w=>w.Id===h.Id)),se.setState({songs:d,shufflePool:Xe(d).slice(0,30),lastPoolUpdate:Date.now()})}const a=o.map(d=>({...d,source:"user"})),i=o.length,f=l.songs.length+Object.values(l.genreSongs).flat().length>o.length;e({songs:a,standardOrder:a.map(d=>d.Id),shuffleOrder:a.map(d=>d.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:f,manuallyCleared:!0}),t().play(),it&&clearTimeout(it),it=setTimeout(async()=>{it=null;try{const d=t();if(!d.shuffle||d.songs.length!==i)return;let h=l.songs;(!h||h.length===0)&&(h=(await $.getSongs({limit:s,sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]);const w=Object.values(l.genreSongs).flat(),x=[...h,...w],I=new Map;x.forEach(y=>I.set(y.Id,y));const k=Array.from(I.values()),p=new Set(a.map(y=>y.Id)),m=k.filter(y=>!p.has(y.Id));if(m.length>0){const y=Math.min(s-i,m.length),S=Xe(m).slice(0,y).map(E=>({...E,source:"user"}));e(E=>{const N=new Set(a.map(Q=>Q.Id)),C=E.songs.filter(Q=>!N.has(Q.Id)&&Q.source==="user"),P=[...a,...C,...S];let b=E.currentIndex;if(C.length>0&&E.currentIndex>=a.length){const Q=E.songs[E.currentIndex];Q&&(b=P.findIndex(q=>q.Id===Q.Id))}return{songs:P,currentIndex:b>=0?b:E.currentIndex,standardOrder:P.map(Q=>Q.Id),shuffleOrder:P.map(Q=>Q.Id),shuffleHasMoreSongs:m.length>y,manuallyCleared:!1}}),se.getState().refreshShufflePool()}}catch(d){_.error("Failed to expand shuffle queue:",d)}},100)},shuffleGenreSongs:async(n,r)=>{t().clearQueue();const{setShowQueueRecommendations:s}=Ge.getState();s(!1);const o=typeof window<"u"&&window.innerWidth<768?400:800,a=se.getState().genreSongs[n];if(!a||a.length===0)return;const i=Xe(a).slice(0,5),c=a.filter(h=>!i.some(w=>w.Id===h.Id)),f=i.map(h=>({...h,source:"user"})),d=a.length>5;e({songs:f,standardOrder:f.map(h=>h.Id),shuffleOrder:f.map(h=>h.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:d,manuallyCleared:!0}),t().play(),it&&clearTimeout(it),it=setTimeout(async()=>{it=null;try{const h=t();if(!h.shuffle||h.songs.length!==5)return;if(c.length>0){const w=Math.min(o-5,c.length),I=Xe(c).slice(0,w).map(k=>({...k,source:"user"}));e(k=>{const p=new Set(f.map(S=>S.Id)),m=k.songs.filter(S=>!p.has(S.Id)&&S.source==="user"),y=[...f,...m,...I];let v=k.currentIndex;if(m.length>0&&k.currentIndex>=f.length){const S=k.songs[k.currentIndex];S&&(v=y.findIndex(E=>E.Id===S.Id))}return{songs:y,currentIndex:v>=0?v:k.currentIndex,standardOrder:y.map(S=>S.Id),shuffleOrder:y.map(S=>S.Id),shuffleHasMoreSongs:c.length>w,manuallyCleared:!1}})}}catch(h){_.error("Failed to expand genre shuffle queue:",h)}},100)},skipToTrack:n=>{t().cancelPreBuffer();const{songs:r,currentIndex:s}=t();if(n<0||n>=r.length)return;const l=s>=0?r[s]:null;e({previousIndex:s>=0?s:-1,currentIndex:n,lastPlayedTrack:l,currentTime:0}),t().play()},refreshCurrentTrack:async()=>{const{currentIndex:n,songs:r}=t();if(n<0||n>=r.length)return;const s=r[n];try{const l=await $.getSongById(s.Id);l&&e(o=>{const a=[...o.songs];return a[o.currentIndex]={...a[o.currentIndex],...l},{songs:a}})}catch(l){_.error("Failed to refresh current track:",l)}},toggleQueueSidebar:()=>{e(n=>({isQueueSidebarOpen:!n.isQueueSidebarOpen}))}}),{name:"player-storage",partialize:e=>({songs:e.songs,currentIndex:e.currentIndex,previousIndex:e.previousIndex,standardOrder:e.standardOrder,shuffleOrder:e.shuffleOrder,volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,isShuffleAllActive:e.isShuffleAllActive,isShuffleGenreActive:e.isShuffleGenreActive,manuallyCleared:e.manuallyCleared,isQueueSidebarOpen:e.isQueueSidebarOpen}),onRehydrateStorage:e=>{e&&(e.songs.length===0?(e.currentIndex=-1,e.previousIndex=-1,e.standardOrder=[],e.shuffleOrder=[]):e.currentIndex>=e.songs.length?(e.currentIndex=0,e.previousIndex=-1):e.currentIndex<-1&&(e.currentIndex=-1,e.previousIndex=-1),e.isPlaying=!1,e.currentTime=0,e.duration=0,e.audioElement=null,e.nextAudioElement=null,e.nextTrackId=null,e.isFetchingRecommendations=!1,e.isShuffleAllActive=!1,e.isShuffleGenreActive=!1)}}));class a1{constructor(){Pt(this,"baseUrl","");Pt(this,"accessToken","");Pt(this,"userId","");Pt(this,"genresCache",null);Pt(this,"isPreloading",!1);Pt(this,"pendingRequests",new Map)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getDeviceId(){let t=Ts.get("deviceId");return t||(t=qg(),Ts.set("deviceId",t)),t}getEmbyAuthHeader(){return`MediaBrowser Client="${Th}", Device="${Zg}", DeviceId="${this.getDeviceId()}", Version="${bh}"`}getVpnWarning(t){return Jg.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:""}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()}}async request(t,n={}){const r=`${this.baseUrl}${t}`,l=(n.method||"GET")==="GET",o=l?r:"";if(l&&this.pendingRequests.has(o))return this.pendingRequests.get(o);const a=this.executeRequest(r,n);return l&&(this.pendingRequests.set(o,a),a.finally(()=>{this.pendingRequests.delete(o)})),a}async executeRequest(t,n={}){let r=null;for(let s=0;s<=nl;s++){const l=new AbortController,o=setTimeout(()=>l.abort(),Mc);try{const a=await fetch(t,{...n,signal:l.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(o),!a.ok)throw a.status===401?(Ka(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${a.statusText}`);return a.json()}catch(a){if(clearTimeout(o),r=a instanceof Error?a:new Error(String(a)),r.message.includes("Unauthorized")||r.name==="AbortError")break;s<nl&&await new Promise(i=>setTimeout(i,zc*(s+1)))}}throw r||new Error("Request failed")}async requestVoid(t,n={}){const r=`${this.baseUrl}${t}`;let s=null;for(let l=0;l<=nl;l++){const o=new AbortController,a=setTimeout(()=>o.abort(),Mc);try{const i=await fetch(r,{...n,signal:o.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(a),!i.ok)throw i.status===401?(Ka(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${i.statusText}`);return}catch(i){if(clearTimeout(a),s=i instanceof Error?i:new Error(String(i)),s.message.includes("Unauthorized")||s.name==="AbortError")break;l<nl&&await new Promise(c=>setTimeout(c,zc*(l+1)))}}throw s||new Error("Request failed")}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",l=new AbortController,o=setTimeout(()=>{l.abort()},Lc);let a;try{a=await fetch(s,{method:"POST",signal:l.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(o)}catch(c){if(clearTimeout(o),c instanceof Error&&c.name==="AbortError"){const f=this.getVpnWarning(t);throw new Error(`Request timeout - server did not respond within ${Lc/1e3} seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${f}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(c instanceof TypeError){const f=c.message.toLowerCase();if(f.includes("failed to fetch")||f.includes("networkerror")){const d=this.getVpnWarning(t);throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${d}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${c.message}`)}throw c}if(!a.ok){const c=await a.text().catch(()=>"");throw new Error(c||`Authentication failed (${a.status})`)}const i=await a.json();return this.setCredentials(t,i.AccessToken,i.User.Id),i}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,a=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&a.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${a.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&(Array.isArray(t.sortOrder)?t.sortOrder.forEach(s=>r.append("SortOrder",s)):r.append("SortOrder",t.sortOrder)),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.genres&&t.genres.forEach(s=>r.append("Genres",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.tags&&t.tags.forEach(s=>r.append("Tags",s)),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Tags,ProductionYear,DateCreated,DateModified,DateLastSaved,AlbumArtist,ArtistItems,Album,AlbumId"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return _.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return _.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Grouping,MediaSources"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return _.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=se.getState();if(!t&&n.genres.length>0&&n.genresLastUpdated){const r=Date.now(),s=n.genresLastChecked||0;if(!(r-s>=$c))return this.genresCache=n.genres,n.genres;try{const o=await this.getRecentlyAdded(50),a=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),i=[...o.Items||[],...a.Items||[]];let c=0;for(const f of i){if(f.DateCreated){const d=new Date(f.DateCreated).getTime();d>c&&(c=d)}if(f.DateLastSaved){const d=new Date(f.DateLastSaved).getTime();d>c&&(c=d)}}if(se.setState({genresLastChecked:r}),c<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch{return this.genresCache=n.genres,n.genres}}try{const r=await this.fetchAllSongsLightweight(),s=this.buildGenresFromSongs(r),l=Date.now();return se.getState().setGenres(s),se.setState({genresLastUpdated:l,genresLastChecked:l}),this.genresCache=s,s}catch(r){return _.error("[getGenres] Failed to build music genres:",r),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=se.getState();if(!t&&n.years.length>0&&n.yearsLastUpdated){const r=Date.now(),s=n.yearsLastChecked||0;if(!(r-s>=$c))return n.years;try{const a=(await this.getRecentlyAdded(50)).Items||[];let i=0;for(const c of a)if(c.DateCreated){const f=new Date(c.DateCreated).getTime();f>i&&(i=f)}if(se.setState({yearsLastChecked:r}),i<=n.yearsLastUpdated)return n.years}catch{return n.years}}try{const r=new Set;let s=0,l=!0;for(;l;){const c=(await this.getSongs({limit:rn,startIndex:s})).Items||[];if(c.forEach(f=>{f.ProductionYear&&f.ProductionYear>0&&r.add(f.ProductionYear)}),l=c.length===rn,s+=rn,s>1e4)break}const o=Array.from(r).sort((i,c)=>i-c),a=Date.now();return se.getState().setYears(o),se.setState({yearsLastUpdated:a,yearsLastChecked:a}),o}catch(r){return _.error("[getYears] Failed to extract years:",r),n.years.length>0?n.years:[]}}async getGenreSongs(t,n){return(await this.fetchAllSongsLightweight()).filter(s=>{var l;return(l=s.Genres)==null?void 0:l.some(o=>o.toLowerCase()===n.toLowerCase())})}async getSongsByGroupingTag(t){const n=await this.fetchAllSongsLightweight(),r=t.toLowerCase();return n.filter(s=>{var l;return(l=s.Grouping)==null?void 0:l.some(o=>o.toLowerCase()===r)})}async fetchAllSongsLightweight(t){let n=[],r=0,s=!0,l=null;for(;s;){const a=await this.getSongs({limit:rn,startIndex:r},!0),i=a.Items||[];if(n.push(...i),l===null&&a.TotalRecordCount&&(l=a.TotalRecordCount),t&&l&&l>0){const c=Math.min(Math.round(n.length/l*100),99);t(c)}if(s=i.length===rn,r+=rn,r>Xg)break}t&&t(100);const o=a=>!a||!Array.isArray(a)?[]:a.filter(i=>i.startsWith("grouping:")).map(i=>i.replace("grouping:",""));return n.map(a=>({Id:a.Id,Name:a.Name,AlbumArtist:a.AlbumArtist,ArtistItems:a.ArtistItems,Album:a.Album,AlbumId:a.AlbumId,IndexNumber:a.IndexNumber,ProductionYear:a.ProductionYear,PremiereDate:a.PremiereDate,RunTimeTicks:a.RunTimeTicks,Genres:a.Genres,Grouping:o(a.Tags)}))}buildGenresFromSongs(t){const n=new Map;t.forEach(s=>{s.Genres&&s.Genres.forEach(l=>{const o=l.toLowerCase();n.has(o)||n.set(o,l)})});const r=[];for(const[s,l]of n)r.push({Id:s.replace(/\s+/g,"-"),Name:l,Type:"Genre"});return r}distributeSongsToGenres(t,n,r){for(const s of n){if(!s.Name||!s.Id)continue;const l=t.filter(o=>{var a;return(a=o.Genres)==null?void 0:a.some(i=>i.toLowerCase()===s.Name.toLowerCase())});r.setGenreSongs(s.Id,l)}}async syncLibrary(t={scope:"incremental"},n){const r=se.getState();if(t.scope==="incremental"){const a=r.lastSyncCompleted,i=await this.getGenres(!1);let c=[];if(a){let v=0,S=!0;for(;S;){const N=(await this.getSongs({minDateLastSaved:new Date(a),limit:rn,startIndex:v},!0)).Items||[];if(c.push(...N),S=N.length===rn,v+=rn,v>1e4)break}}else c=(await this.getSongs({limit:Uc,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const f=v=>!v||!Array.isArray(v)?[]:v.filter(S=>S.startsWith("grouping:")).map(S=>S.replace("grouping:","")),d=c.map(v=>({Id:v.Id,Name:v.Name,AlbumArtist:v.AlbumArtist,ArtistItems:v.ArtistItems,Album:v.Album,AlbumId:v.AlbumId,IndexNumber:v.IndexNumber,ProductionYear:v.ProductionYear,PremiereDate:v.PremiereDate,RunTimeTicks:v.RunTimeTicks,Genres:v.Genres,Grouping:f(v.Tags)})),h=r.songs,w=new Map(d.map(v=>[v.Id,v])),x=h.map(v=>w.get(v.Id)??v),I=new Set(h.map(v=>v.Id)),k=d.filter(v=>!I.has(v.Id));x.push(...k);try{r.setSongs(x)}catch(v){throw v instanceof DOMException&&v.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):v}const p=new Set;d.forEach(v=>{var S;(S=v.Genres)==null||S.forEach(E=>{i.forEach(N=>{var C;((C=N.Name)==null?void 0:C.toLowerCase())===E.toLowerCase()&&p.add(N.Id)})})});const m=new Map(d.map(v=>[v.Id,v])),y=Array.from(p).map(async v=>{const S=i.find(b=>b.Id===v);if(!(S!=null&&S.Name))return;const E=r.genreSongs[v]||[],N=E.map(b=>m.get(b.Id)??b),C=new Set(E.map(b=>b.Id)),P=k.filter(b=>{var Q;return!C.has(b.Id)&&((Q=b.Genres)==null?void 0:Q.some(q=>q.toLowerCase()===S.Name.toLowerCase()))});N.push(...P),r.setGenreSongs(v,N)});await Promise.all(y);return}this.clearGenresCache(),r.clearGenreSongs();const s=await this.fetchAllSongsLightweight(n);_.log(`[syncLibrary] Fetched ${s.length} songs`);const l=this.buildGenresFromSongs(s);_.log(`[syncLibrary] Found ${l.length} genres in songs`);const o=Date.now();r.setGenres(l),se.setState({genresLastUpdated:o,genresLastChecked:o}),this.genresCache=l,r.setSongs(s),this.distributeSongsToGenres(s,l,r)}async search(t,n=20,r){var m,y;const s=t?xl(t.trim()):"",l=s.length>0,o=s.length,a=l&&o<3,i={};(m=r==null?void 0:r.genres)!=null&&m.length&&(i.genres=r.genres),(y=r==null?void 0:r.years)!=null&&y.length&&(i.years=r.years);const c={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0,...i};l&&(c.searchTerm=s,o>=3&&(c.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const f=this.buildQueryString(c),d=await this.request(`/Items?${f}`);let h=[];const w=[],x=[],I=[],k=new Set;if(d.Items.forEach(v=>{v.Type==="MusicArtist"?h.push(v):v.Type==="MusicAlbum"?w.push(v):v.Type==="Playlist"?x.push(v):v.Type==="Audio"&&(I.push(v),k.add(v.Id))}),a)try{const v=await this.getArtists({limit:Uc}),S=s.toLowerCase();h=(v.Items||[]).filter(E=>xl(E.Name||"").toLowerCase().includes(S))}catch(v){_.error("Failed to fetch all artists for short query:",v)}if(l&&h.length>0){const v=s.toLowerCase(),S=h.filter(E=>xl(E.Name||"").toLowerCase().includes(v));if(S.length>0)try{const E=S.map(P=>P.Id),N=this.buildQueryString({artistIds:E,includeItemTypes:["Audio"],recursive:!0});(await this.request(`/Items?${N}`)).Items.forEach(P=>{k.has(P.Id)||(I.push(P),k.add(P.Id))})}catch(E){_.error("Failed to fetch songs for matching artists:",E)}}const p=I.map(v=>({...v,Grouping:(v.Tags||[]).filter(S=>S.startsWith("grouping:")).map(S=>S.replace("grouping:",""))}));return{Artists:{Items:h,TotalRecordCount:h.length,StartIndex:0},Albums:{Items:w,TotalRecordCount:w.length,StartIndex:0},Playlists:{Items:x,TotalRecordCount:x.length,StartIndex:0},Songs:{Items:p,TotalRecordCount:p.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"ParentIndexNumber,IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"}),r=await this.request(`/Items?${n}`),s=[],l=[];return r.Items.forEach(o=>{o.Type==="MusicAlbum"?s.push(o):o.Type==="Audio"&&l.push(o)}),{albums:s,songs:l}}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch{}}async createPlaylist(t,n=[]){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");return this.request("/Playlists",{method:"POST",body:JSON.stringify({Name:t,Ids:n,UserId:this.userId,MediaType:"Audio"})})}async deleteItem(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}`,{method:"DELETE"})}async updatePlaylist(t,n){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid playlist ID");await this.requestVoid(`/Playlists/${t}`,{method:"POST",body:JSON.stringify({Name:n,UserId:this.userId})})}async uploadItemImage(t,n,r){if(!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}/Images/Primary`,{method:"POST",headers:{"Content-Type":r},body:n})}async addItemsToPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({ids:n.join(","),userId:this.userId});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"POST"})}async removeItemsFromPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({entryIds:n.join(",")});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"DELETE"})}async getPlaylistItems(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Playlists/${t}/Items?${n}`)).Items}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const l=new URLSearchParams({UserId:this.userId}),o=`${this.baseUrl}${s}?${l}`;try{const a=await fetch(o,{headers:this.getHeaders()});if(a.ok){const i=await a.json();if(i.Lyrics&&Array.isArray(i.Lyrics)&&i.Lyrics.length>0)return i.Lyrics.map(f=>f.Text||"").join(`
`);if(typeof i=="string")return i;if(i.Text)return i.Text}else if(a.status===404){r=`404 for ${s}`;continue}else{const i=await a.text().catch(()=>"");r=`${a.status}: ${i}`;continue}}catch(a){r=a instanceof Error?a.message:String(a);continue}}return null}catch{return null}}}const $=new a1,i1=Object.freeze(Object.defineProperty({__proto__:null,jellyfinClient:$},Symbol.toStringTag,{value:"Module"})),Bc=500,Jt=new Map,Jr=new Map;function Vc(){if(Jt.size>Bc){const e=Array.from(Jt.keys()).slice(0,Jt.size-Bc);for(const t of e)Jt.delete(t)}}async function bv(e){if(Jt.has(e))return Jt.get(e)??null;if(Jr.has(e))return Jr.get(e);const t=(async()=>{try{const{albums:n,songs:r}=await $.getArtistItems(e),s=n[0],l=r.find(c=>c.AlbumId)||r[0],o=s||l,a=o?o.AlbumId||o.Id:null,i=a?$.getAlbumArtUrl(a,96):null;return Jt.set(e,i),Vc(),i}catch(n){return _.error("Failed to load fallback album art for artist:",e,n),Jt.set(e,null),Vc(),null}finally{Jr.delete(e)}})();return Jr.set(e,t),t}function Rv(e){return Jt.get(e)}function u1(){Jt.clear(),Jr.clear()}function go(){return window.__TUNETUNA_CONFIG__||{lockedServerUrl:"",lockedLocalServerUrl:""}}function Rh(){const e=go();return!!(e.lockedServerUrl&&e.lockedServerUrl!=="__JELLYFIN_SERVER_URL__"&&e.lockedServerUrl.trim()!=="")}function c1(){return Rh()?go().lockedServerUrl:null}function d1(){const e=go();return!!(e.lockedLocalServerUrl&&e.lockedLocalServerUrl!=="__JELLYFIN_LOCAL_SERVER_URL__"&&e.lockedLocalServerUrl.trim()!=="")}function yo(){return d1()?go().lockedLocalServerUrl:null}const f1=2e3;async function h1(e){const t=new AbortController,n=setTimeout(()=>t.abort(),f1);try{return await fetch(`${e.replace(/\/$/,"")}/System/Info/Public`,{signal:t.signal,mode:"no-cors"}),clearTimeout(n),!0}catch{return clearTimeout(n),!1}}async function Zi(e,t){return t&&await h1(t)?t:e}async function Ah(){const{useAuthStore:e}=await Ze(async()=>{const{useAuthStore:i}=await Promise.resolve().then(()=>m1);return{useAuthStore:i}},void 0),{useSettingsStore:t}=await Ze(async()=>{const{useSettingsStore:i}=await Promise.resolve().then(()=>e1);return{useSettingsStore:i}},void 0),{jellyfinClient:n}=await Ze(async()=>{const{jellyfinClient:i}=await Promise.resolve().then(()=>i1);return{jellyfinClient:i}},void 0),{serverUrl:r,accessToken:s,userId:l}=e.getState();if(!r||!s||!l)return;const o=yo()||t.getState().localServerUrl;if(!o)return;const a=await Zi(r,o);a.replace(/\/$/,"")!==n.serverBaseUrl&&n.setCredentials(a,s,l)}const Ue=rr()(Us(e=>({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await $.authenticate(t,n,r);e({serverUrl:t,serverId:s.ServerId??"",username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),$.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{Ka(),u1(),localStorage.removeItem("player-storage"),localStorage.removeItem("settings-storage"),indexedDB.deleteDatabase("tunetuna-storage"),indexedDB.deleteDatabase("tunetuna-stats-storage"),e({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),localStorage.removeItem("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),$.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{if(e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId){$.setCredentials(e.serverUrl,e.accessToken,e.userId);const t=yo()||Ge.getState().localServerUrl;t&&Zi(e.serverUrl,t).then(n=>{n!==e.serverUrl&&$.setCredentials(n,e.accessToken,e.userId)})}}})),m1=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Ue},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Gc=e=>{const t=g1(e);return t.charAt(0).toUpperCase()+t.slice(1)},_h=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),y1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:o,...a},i)=>g.createElement("svg",{ref:i,...v1,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:_h("lucide",s),...!l&&!y1(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,f])=>g.createElement(c,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const n=g.forwardRef(({className:r,...s},l)=>g.createElement(x1,{ref:l,iconNode:t,className:_h(`lucide-${p1(Gc(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Gc(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],S1=J("chart-column",w1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],I1=J("check",k1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],E1=J("chevron-down",N1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lh=J("circle-alert",C1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],eu=J("disc",P1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Xo=J("external-link",j1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],b1=J("eye-off",T1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A1=J("eye",R1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],L1=J("grip-horizontal",_1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],wl=J("guitar",M1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],$1=J("house",z1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],D1=J("info",U1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],rl=J("list-end",O1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],B1=J("list-music",F1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Hc=J("list-plus",V1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],sl=J("list-start",G1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],Xa=J("list-video",H1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],W1=J("mic-vocal",Q1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],tu=J("music",q1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],bs=J("pause",Y1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],X1=J("pencil",K1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],zn=J("play",J1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ey=J("plus",Z1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Sl=J("refresh-cw",ty);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],nu=J("repeat-1",ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ru=J("repeat",ry);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ly=J("shield-alert",sy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Nr=J("shuffle",oy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],su=J("skip-back",ay);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],lu=J("skip-forward",iy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],cy=J("square-play",uy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fy=J("trash-2",dy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],my=J("triangle-alert",hy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gy=J("upload",py);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yl=J("user",yy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],xy=J("volume-1",vy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Sy=J("volume-2",wy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],Iy=J("volume",ky);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vo=J("x",Ny),Qc="last-server-url",Ey=/^http:\/\/(localhost|127\.0\.0\.1|10\.\d+\.\d+\.\d+|172\.(1[6-9]|2\d|3[01])\.\d+\.\d+|192\.168\.\d+\.\d+)(:\d+)?/i;function Cy(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[s,l]=g.useState(""),[o,a]=g.useState(!1),[i,c]=g.useState(""),[f,d]=g.useState(!1),h=Ue(p=>p.login),w=g.useMemo(()=>e.trim().toLowerCase().startsWith("http://")?!Ey.test(e.trim()):!1,[e]),x=Rh(),I=c1();g.useEffect(()=>{if(x&&I)t(I);else{const p=Ts.get(Qc);p&&t(p)}},[x,I]);const k=async p=>{p.preventDefault(),c(""),d(!0);const m=x&&I?I:e;!x&&m.trim()&&Ts.set(Qc,m.trim());try{await h(m,n,s)}catch(y){c(y instanceof Error?y.message:"Login failed. Please check your credentials.")}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),u.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[!x&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),u.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:p=>t(p.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),w&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-amber-400 text-sm",children:[u.jsx(ly,{size:16,className:"mt-0.5 flex-shrink-0"}),u.jsx("span",{children:"Insecure connection. Your password will be sent unencrypted. Use HTTPS or a local network address."})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),u.jsx("input",{id:"username",type:"text",value:n,onChange:p=>r(p.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{id:"password",type:o?"text":"password",value:s,onChange:p=>l(p.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 pr-12 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:()=>a(!o),"aria-label":o?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:o?u.jsx(b1,{size:20}):u.jsx(A1,{size:20})})]})]}),i&&u.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),u.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:f?"Signing in...":"Sign In"})]})]})})}const Ot=rr((e,t)=>({state:"idle",source:null,message:null,abortController:null,progress:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null,progress:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null,progress:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null,progress:null})},setProgress:n=>{e({progress:n})}}));function un({variant:e="horizontal",onClose:t,onOpenPopover:n,popoverPosition:r,popoverDirection:s="up",className:l,onRef:o}){const{volume:a,setVolume:i}=X(),[c,f]=g.useState(!1),[d,h]=g.useState(1),w=g.useRef(null),x=D=>{o&&e==="compact"&&o(D)},I=D=>{o&&e==="horizontal"&&o(D)};g.useEffect(()=>{const D=localStorage.getItem("lastNonZeroVolume");D?h(Math.max(.01,Math.min(1,parseFloat(D)))):a>0&&h(a)},[]),g.useEffect(()=>{a>0&&(h(a),localStorage.setItem("lastNonZeroVolume",a.toString()))},[a]);const k=()=>a===0?Iy:a<=.5?xy:Sy,p=g.useCallback(D=>{if(!w.current)return;const de=w.current.getBoundingClientRect();let ce,he;if(D instanceof TouchEvent||"touches"in D?(ce=D.touches[0].clientX,he=D.touches[0].clientY):(ce=D.clientX,he=D.clientY),e==="horizontal"){const j=ce-de.left,L=Math.max(0,Math.min(1,j/de.width));i(L)}else{const j=de.bottom-he,L=Math.max(0,Math.min(1,j/de.height));i(L)}},[i,e]),m=D=>{D.preventDefault(),D.stopPropagation(),f(!0),p(D)},y=D=>{D.stopPropagation(),m(D)},v=D=>{D.stopPropagation(),N(D)},S=g.useCallback(D=>{c&&(D.preventDefault(),D.stopPropagation(),p(D))},[c,p]),E=g.useCallback(()=>{f(!1)},[]),N=D=>{D.preventDefault(),D.stopPropagation(),f(!0),p(D)},C=g.useCallback(D=>{c&&(D.preventDefault(),D.stopPropagation(),p(D))},[c,p]),P=g.useCallback(()=>{f(!1)},[]),b=D=>{D.stopPropagation(),X.getState().volume>0?i(0):i(d)},Q=D=>{D.stopPropagation()};g.useEffect(()=>{if(c)return document.addEventListener("mousemove",S),document.addEventListener("mouseup",E),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("touchend",P),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",C),document.removeEventListener("touchend",P)}},[c,S,E,C,P]);const q=k();if(e==="compact")return u.jsx("button",{ref:x,onClick:D=>{D.stopPropagation(),n&&n()},"aria-label":"Volume",className:l||"text-white/70 hover:text-zinc-300 transition-colors",children:u.jsx(q,{className:"w-6 h-6"})});if(e==="horizontal")return u.jsxs("div",{ref:I,className:"flex items-center gap-2 px-2 select-none",style:{width:"120px"},onClick:Q,children:[u.jsx("button",{onClick:b,"aria-label":a===0?"Unmute":"Mute",className:"text-white/70 hover:text-white hover:bg-zinc-800 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 transition-colors",children:u.jsx(q,{className:"w-5 h-5"})}),u.jsx("div",{ref:w,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),className:"flex-1 relative cursor-pointer",style:{height:"24px"},onMouseDown:y,onTouchStart:v,children:u.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 h-1 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gray-400 rounded-full transition-all duration-100",style:{width:`${a*100}%`}})})})]});const ge=r?{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,transform:s==="down"?"translate(-50%, 8px)":"translate(-50%, calc(-100% - 8px))"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return u.jsxs("div",{className:"fixed inset-0 z-50",children:[u.jsx("div",{className:"fixed inset-0",onClick:t,onTouchStart:D=>D.preventDefault(),onTouchMove:D=>D.preventDefault()}),u.jsx("div",{className:"relative z-10 bg-zinc-900 rounded-lg py-4 px-0 shadow-xl border border-zinc-700",style:ge,children:u.jsxs("div",{className:"h-[200px] w-[38px] cursor-pointer group relative touch-none mx-auto",children:[u.jsx("div",{ref:w,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),onMouseDown:m,onTouchStart:N,className:"absolute inset-0"}),u.jsxs("div",{className:"h-full w-1 bg-white/10 rounded-full relative flex flex-col justify-end mx-auto",children:[u.jsx("div",{className:"w-full bg-gray-400 rounded-full transition-all",style:{height:`${a*100}%`}}),u.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",style:{bottom:`${a*100}%`,transform:"translate(-50%, 50%)"}})]})]})})]})}const Py=[{path:"/",label:"Home",icon:$1,key:"home"},{path:"/artists",label:"Artists",icon:Yl,key:"artists"},{path:"/albums",label:"Albums",icon:eu,key:"albums"},{path:"/songs",label:"Songs",icon:tu,key:"songs"},{path:"/genres",label:"Genres",icon:wl,key:"genres"},{path:"/playlists",label:"Playlists",icon:B1,key:"playlists"},{path:"/stats",label:"Stats",icon:S1,key:"stats"}];function jy(){const e=tn(),{pageVisibility:t}=Ge(),{state:n}=Ot(),[r,s]=g.useState(!1),l=Py.filter(i=>i.key==="home"?!0:t[i.key]),o=(i,c)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===c&&i.preventDefault()},a=e.pathname.startsWith("/artists/")&&e.pathname!=="/artists";return u.jsxs(u.Fragment,{children:[u.jsxs("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 lg:hidden",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:[u.jsxs("div",{className:"relative h-16",children:[u.jsx("div",{className:"max-w-[600px] mx-auto h-full",children:u.jsx("div",{className:"flex justify-around items-center h-full",children:l.map(i=>{const c=e.pathname===i.path,f=i.icon;return u.jsxs(Pc,{to:i.path,onClick:d=>o(d,i.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${c?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[u.jsx(f,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.path)})})}),u.jsx("div",{className:"absolute right-4 top-3.5 hidden lg:block",children:!Dt()&&u.jsx(un,{variant:"horizontal"})})]}),r&&!Dt()&&u.jsx(un,{variant:"vertical",onClose:()=>s(!1)})]}),u.jsx("nav",{className:"fixed left-0 top-0 bottom-16 bg-black z-30 hidden lg:flex flex-col",style:{width:"4rem",top:n!=="idle"?"28px":"0px"},children:u.jsx("div",{className:`absolute inset-0 flex flex-col items-center justify-center ${a?"border-r border-zinc-800":""}`,children:l.map((i,c)=>{const f=e.pathname===i.path,d=i.icon;return u.jsxs(Pc,{to:i.path,onClick:h=>o(h,i.path),className:`flex flex-col items-center justify-center py-5 transition-colors ${f?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"} ${c<l.length-1?"mb-0":""}`,style:{marginBottom:c<l.length-1?"0px":"0"},children:[u.jsx(d,{className:"w-6 h-6 mb-2"}),u.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:i.label})]},i.path)})})})]})}function ou(){return X(e=>{const{songs:t,currentIndex:n}=e;return n>=0&&t[n]?t[n]:null})}function au(){return X(e=>e.lastPlayedTrack)}function Rs({src:e,alt:t,className:n="",fallback:r,style:s,showOutline:l,rounded:o="rounded",loading:a="lazy",onError:i}){const[c,f]=g.useState(e),[d,h]=g.useState(!1),[w,x]=g.useState(!1),[I,k]=g.useState(!1);g.useEffect(()=>{f(e),h(!1),x(!1),k(!1)},[e]);const p=()=>{!d&&r?(f(r),h(!0)):i?(i(),x(!0)):k(!0)};return w?null:I?u.jsx("div",{className:"relative w-full h-full bg-zinc-900"}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsx("img",{src:c,alt:t,className:`block ${n}`,onError:p,loading:a,style:s}),l&&u.jsx("div",{className:`absolute inset-0 pointer-events-none border ${o}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function Wc(){return u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function Mh({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,l]=g.useState(!1),[o,a]=g.useState(!1);if(g.useEffect(()=>{if(e)l(!1),a(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(!0)})}),document.body.style.overflow="hidden";else{l(!1);const c=setTimeout(()=>{a(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(c),document.body.style.overflow=""}}},[e]),!o)return null;const i=u.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[u.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),u.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out ${s?"translate-y-0":"translate-y-full"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pb-safe pt-4",children:u.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})})]});return ho.createPortal(i,document.body)}function Ja({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,l]=g.useState(!1),[o,a]=g.useState(!1);if(g.useEffect(()=>{if(e)l(!1),a(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(!0)})}),document.body.style.overflow="hidden";else{l(!1);const c=setTimeout(()=>{a(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(c),document.body.style.overflow=""}}},[e]),!o)return null;const i=u.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[u.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),u.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out md:hidden ${s?"translate-y-0":"translate-y-full"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pb-safe pt-4",children:u.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})}),u.jsx("div",{className:`hidden md:flex absolute inset-0 items-center justify-center p-4 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t,children:u.jsx("div",{className:`bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-700/50 w-full max-w-[480px] max-h-[80vh] overflow-y-auto transform transition-transform duration-300 ease-out ${s?"scale-100":"scale-95"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pt-4",children:n})})})]});return ho.createPortal(i,document.body)}const Ty="https://musicbrainz.org/ws/2",by=`${Th}/${bh} (https://github.com/AlessioLaiso/tunetuna)`,Ry="https://coverartarchive.org",Ay="https://api.song.link/v1-alpha.1";let qc=0;const Yc=1100;async function Av(e="gb",t=10){const n=`/api/stats/proxy/apple-music/${e}/${t}`,r=await fetch(n);if(!r.ok)throw new Error(`Apple Music RSS failed: ${r.status}`);return(await r.json()).feed.results}function _v(e,t=300){return e.replace(/\d+x\d+/,`${t}x${t}`)}async function _y(){const t=Date.now()-qc;t<Yc&&await new Promise(n=>setTimeout(n,Yc-t)),qc=Date.now()}async function Lv(e,t){await _y();const n=`releasegroup:"${t}" AND artist:"${e}"`,r=new URLSearchParams({query:n,fmt:"json",limit:"1"}),s=await fetch(`${Ty}/release-group/?${r}`,{headers:{"User-Agent":by,Accept:"application/json"}});if(!s.ok)throw new Error(`MusicBrainz search failed: ${s.status}`);const o=(await s.json())["release-groups"]||[];return o.length===0?null:{id:o[0].id,type:o[0]["primary-type"]||"Album"}}function Ly(e,t=500){return`${Ry}/release-group/${e}/front-${t}`}async function Mv(e,t){const n=new URLSearchParams({url:e});try{const r=await fetch(`${Ay}/links?${n}`);if(!r.ok){if(r.status===404)return null;throw new Error(`Odesli API failed: ${r.status}`)}return await r.json()}catch{return null}}async function zv(e,t=10){if(!e)return[];const n=`https://api.allorigins.win/raw?url=${encodeURIComponent(e)}`;console.log("[Muspy] Fetching from:",n);const r=await fetch(n);if(!r.ok)throw new Error(`Muspy RSS failed: ${r.status}`);const s=await r.text();console.log("[Muspy] Response length:",s.length,"First 500 chars:",s.substring(0,500));const o=new DOMParser().parseFromString(s,"text/xml"),a=o.querySelector("parsererror");a&&console.error("[Muspy] XML parse error:",a.textContent);const i=o.querySelectorAll("entry");console.log("[Muspy] Found",i.length,"entries");const c=[];return i.forEach((f,d)=>{var q,ge,D,de,ce,he;if(d>=t)return;const h=((q=f.querySelector("title"))==null?void 0:q.textContent)||"",w=f.querySelector('link[rel="alternate"]')||f.querySelector("link"),x=(w==null?void 0:w.getAttribute("href"))||(w==null?void 0:w.textContent)||"",I=((ge=f.querySelector("summary"))==null?void 0:ge.textContent)||((D=f.querySelector("content"))==null?void 0:D.textContent)||"",k=((de=f.querySelector("updated"))==null?void 0:de.textContent)||((ce=f.querySelector("published"))==null?void 0:ce.textContent)||"";(he=f.querySelector("id"))!=null&&he.textContent;const p=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/i,y=f.outerHTML.match(p),v=y?y[0]:`muspy-${d}`,S=I.match(/\((Single|Album|EP)\)/i),E=S?S[1]:"Album",N=h.split(" - "),C=N.length>1?N[0].trim():I,P=N.length>1?N.slice(1).join(" - ").trim():h;let b="";if(k)try{b=new Date(k).toISOString().split("T")[0]}catch{b=k}const Q=v.startsWith("muspy-")?x:`https://musicbrainz.org/release-group/${v}`;c.push({id:v,title:P,artistName:C,releaseDate:b,type:E,artworkUrl:v.startsWith("muspy-")?void 0:Ly(v,500),mbUrl:Q})}),c}const My=[{id:"spotify",name:"Spotify",icon:"spotify"},{id:"appleMusic",name:"Apple Music",icon:"apple"},{id:"youtube",name:"YouTube",icon:"youtube"},{id:"youtubeMusic",name:"YouTube Music",icon:"youtube"},{id:"tidal",name:"Tidal",icon:"tidal"},{id:"deezer",name:"Deezer",icon:"deezer"},{id:"amazonMusic",name:"Amazon Music",icon:"amazon"},{id:"soundcloud",name:"SoundCloud",icon:"soundcloud"}];function zy(e,t){const n=encodeURIComponent(`${e} ${t}`);return{entityUniqueId:"search",userCountry:"US",pageUrl:`https://www.google.com/search?q=${n}`,linksByPlatform:{spotify:{url:`https://open.spotify.com/search/${n}`},appleMusic:{url:`https://music.apple.com/search?term=${n}`},youtube:{url:`https://www.youtube.com/results?search_query=${n}`},youtubeMusic:{url:`https://music.youtube.com/search?q=${n}`},tidal:{url:`https://listen.tidal.com/search?q=${n}`},deezer:{url:`https://www.deezer.com/search/${n}`},amazonMusic:{url:`https://music.amazon.com/search/${n}`}}}}const ll={spotify:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})}),appleMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.802.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.296-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.045-1.773-.6-1.943-1.536a1.88 1.88 0 011.038-2.022c.323-.16.67-.25 1.018-.324.378-.082.758-.153 1.134-.24.274-.063.457-.23.51-.516a.904.904 0 00.02-.193c0-1.815 0-3.63-.002-5.443a.725.725 0 00-.026-.185c-.04-.15-.15-.243-.304-.234-.16.01-.318.035-.475.066-.76.15-1.52.303-2.28.456l-2.326.47-1.374.278c-.016.003-.032.01-.048.013-.277.077-.377.203-.39.49-.002.042 0 .086 0 .13-.002 2.602 0 5.204-.003 7.805 0 .42-.047.836-.215 1.227-.278.64-.77 1.04-1.434 1.233-.35.1-.71.16-1.075.172-.96.036-1.755-.6-1.92-1.544-.14-.812.23-1.685 1.154-2.075.357-.15.73-.232 1.108-.31.287-.06.575-.116.86-.177.383-.083.583-.323.6-.714v-.15c0-2.96 0-5.922.002-8.883 0-.123.013-.25.042-.37.07-.285.273-.448.546-.518.255-.065.515-.112.774-.165.733-.15 1.466-.296 2.2-.444l2.27-.46c.67-.134 1.34-.27 2.01-.403.22-.043.443-.088.664-.106.31-.025.523.17.554.482.008.073.012.148.012.223.002 1.91.002 3.822 0 5.732z"})}),youtube:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),youtubeMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.376 0 0 5.376 0 12s5.376 12 12 12 12-5.376 12-12S18.624 0 12 0zm0 19.104c-3.924 0-7.104-3.18-7.104-7.104S8.076 4.896 12 4.896s7.104 3.18 7.104 7.104-3.18 7.104-7.104 7.104zm0-13.332c-3.432 0-6.228 2.796-6.228 6.228S8.568 18.228 12 18.228s6.228-2.796 6.228-6.228S15.432 5.772 12 5.772zM9.684 15.54V8.46L15.816 12l-6.132 3.54z"})}),tidal:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12.012 3.992L8.008 7.996 4.004 3.992 0 7.996 4.004 12l4.004-4.004L12.012 12l4.004-4.004L20.02 12l4.004-4.004-4.004-4.004-4.004 4.004-4.004-4.004zM12.012 12.012L8.008 16.02l4.004 4.004 4.004-4.004-4.004-4.008z"})}),deezer:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M18.81 4.16v3.03H24V4.16h-5.19zM6.27 8.38v3.027h5.189V8.38h-5.19zm12.54 0v3.027H24V8.38h-5.19zM6.27 12.594v3.027h5.189v-3.027h-5.19zm6.27 0v3.027h5.19v-3.027h-5.19zm6.27 0v3.027H24v-3.027h-5.19zM0 16.81v3.029h5.19v-3.03H0zm6.27 0v3.029h5.189v-3.03h-5.19zm6.27 0v3.029h5.19v-3.03h-5.19zm6.27 0v3.029H24v-3.03h-5.19z"})}),amazonMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.118c.138-.053.209-.073.315-.073.186 0 .27.089.27.267 0 .178-.089.355-.267.533l-.178.178c-2.852 2.346-6.22 3.52-10.106 3.52-4.24 0-7.942-1.192-11.107-3.574-.168-.133-.217-.244-.217-.333 0-.089.044-.133.133-.178zm21.243-3.928c-.236-.178-.712-.267-1.424-.267-.712 0-1.598.178-2.665.533-1.067.356-2.134.89-3.201 1.602-.178.089-.267.178-.267.267s.089.133.267.133c.089 0 .178-.044.267-.089l.356-.178c1.156-.533 2.223-.8 3.2-.8.979 0 1.469.267 1.469.8 0 .356-.178.712-.534 1.068-.356.355-.89.711-1.6 1.066l-.535.267c-.356.178-.534.356-.534.534 0 .133.089.2.267.2.089 0 .178-.022.267-.067l.445-.222c1.6-.8 2.756-1.424 3.467-1.869.712-.444 1.068-.889 1.068-1.333 0-.445-.178-.712-.534-.978-.356-.267-.978-.4-1.868-.4zm-6.844-7.11c0-1.067-.267-1.957-.8-2.67-.533-.711-1.422-1.066-2.666-1.066-1.244 0-2.223.355-2.933 1.066-.712.712-1.156 1.78-1.334 3.2h7.733v-.533zm3.911 1.956H8.045c.089 1.422.445 2.489 1.067 3.2.622.712 1.511 1.067 2.666 1.067.89 0 1.69-.178 2.4-.533.712-.356 1.334-.89 1.868-1.6.178-.178.356-.267.534-.267.178 0 .267.089.267.267 0 .178-.089.356-.267.533-.622.8-1.422 1.423-2.4 1.868-.978.445-2.044.667-3.2.667-1.778 0-3.2-.533-4.267-1.6-1.067-1.066-1.6-2.577-1.6-4.533 0-1.956.533-3.467 1.6-4.533 1.067-1.067 2.489-1.6 4.267-1.6 1.778 0 3.111.445 4 1.334.89.889 1.334 2.177 1.334 3.866v1.067c0 .266-.089.4-.267.4l-.089-.003z"})}),soundcloud:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c-.009-.06-.048-.1-.098-.1m-.899.828c-.06 0-.091.037-.104.094L0 14.479l.165 1.308c.014.057.045.094.09.094s.089-.037.099-.094l.19-1.308-.19-1.334c-.01-.057-.045-.09-.09-.09m1.83-1.229c-.061 0-.12.045-.12.104l-.21 2.563.225 2.458c0 .06.045.104.106.104.061 0 .12-.044.12-.104l.24-2.458-.24-2.563c0-.06-.045-.104-.12-.104m.945-.089c-.075 0-.135.06-.15.135l-.193 2.64.21 2.544c.016.077.075.138.149.138.075 0 .135-.061.15-.138l.225-2.545-.225-2.64c-.015-.074-.06-.135-.135-.135m1.065.42c-.09 0-.149.075-.164.164l-.158 2.255.18 2.46c.015.09.074.165.164.165.089 0 .149-.075.164-.165l.209-2.46-.209-2.255c-.015-.09-.075-.164-.164-.164m.944-.54c-.104 0-.194.09-.209.195l-.149 2.81.164 2.445c.015.105.09.195.194.195.104 0 .195-.09.21-.195l.18-2.445-.18-2.81c-.015-.105-.09-.195-.194-.195m1.076-.505c-.119 0-.21.09-.225.21l-.135 3.3.149 2.4c.015.12.105.21.225.21.12 0 .21-.09.225-.21l.165-2.4-.165-3.3c-.015-.12-.105-.21-.225-.21m1.064-.54c-.135 0-.239.105-.254.24l-.12 3.825.135 2.354c.015.135.12.24.255.24.12 0 .24-.105.255-.24l.149-2.354-.149-3.825c-.015-.135-.12-.24-.255-.24m1.109-.27c-.015-.15-.135-.255-.27-.255-.15 0-.255.105-.27.255l-.12 4.08.12 2.31c.015.15.12.255.27.255.149 0 .255-.105.27-.255l.134-2.31-.134-4.08m.494 6.645c.015.165.135.284.285.284.149 0 .27-.12.284-.284l.121-2.325-.12-5.175c-.015-.165-.135-.285-.285-.285-.149 0-.27.12-.284.285l-.107 5.175.106 2.325m1.184-6.18c-.165 0-.3.135-.314.3l-.091 3.855.105 2.31c.015.165.135.3.3.3.164 0 .284-.135.299-.3l.12-2.31-.12-3.855c-.015-.165-.135-.3-.3-.3m1.199-.075c-.18 0-.314.135-.329.315l-.09 3.915.104 2.295c.015.18.135.315.315.315s.314-.135.314-.315l.12-2.295-.12-3.915c-.015-.18-.149-.315-.314-.315m1.139-.195c-.195 0-.345.149-.359.345l-.075 4.11.09 2.265c.014.195.149.345.344.345.195 0 .345-.15.359-.345l.105-2.265-.105-4.095c-.014-.195-.164-.36-.359-.36m1.305 0c-.209 0-.359.164-.374.359l-.074 4.095.089 2.25c.015.21.165.375.375.375.194 0 .359-.165.374-.375l.09-2.25-.09-4.095c-.015-.209-.165-.359-.375-.359m1.289.015c-.225 0-.39.18-.39.405l-.06 4.065.075 2.235c.016.225.166.39.391.39.225 0 .391-.165.406-.39l.09-2.235-.091-4.065c-.014-.24-.18-.405-.405-.405m1.35.09c-.24 0-.42.18-.42.42l-.045 3.975.06 2.205c.015.24.18.42.42.42.24 0 .404-.18.42-.42l.075-2.205-.075-3.975c-.015-.24-.18-.42-.42-.42m1.33.135c-.256 0-.435.194-.45.435l-.046 3.825.061 2.175c.015.255.195.45.435.45.256 0 .436-.195.45-.45l.076-2.175-.076-3.825c-.014-.255-.194-.435-.45-.435m1.453-.09c-.27 0-.48.21-.48.465l-.03 3.915.03 2.145c.015.27.21.465.48.465.27 0 .48-.195.48-.465l.045-2.145-.045-3.915c0-.255-.21-.465-.48-.465m1.444.285c-.285 0-.495.225-.51.495l-.015 3.645.03 2.13c.015.285.225.51.51.51.27 0 .494-.225.51-.51l.03-2.13-.03-3.645c-.016-.285-.225-.495-.51-.495m3.39.465c-.165-.045-.345-.075-.51-.075-.18 0-.345.015-.51.045-.044-.9-.39-1.695-.945-2.34-.556-.645-1.35-1.08-2.31-1.215-.27-.045-.405-.165-.405-.405V6.54c0-1.305-.465-2.415-1.395-3.345C19.2 2.265 18.09 1.8 16.77 1.8c-1.155 0-2.16.375-3.045 1.095-.885.72-1.44 1.635-1.68 2.745-.165-.03-.315-.045-.45-.045-1.35 0-2.355.93-2.355 2.115 0 .24.03.465.075.69-.645.12-1.17.435-1.59.945-.42.51-.63 1.095-.63 1.755 0 .75.255 1.38.765 1.89s1.14.765 1.89.765h10.53c.93 0 1.695-.285 2.31-.855.615-.57.93-1.29.93-2.145 0-.855-.3-1.575-.9-2.16-.6-.585-1.335-.885-2.205-.9"})}),jellyfin:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",role:"img","aria-label":"Jellyfin",children:u.jsx("path",{d:"M12.0001 2C9.35508 2 0.835078 17.448 2.13408 20.055C3.43308 22.662 20.5841 22.633 21.8691 20.055C23.1541 17.477 14.6481 2 12.0001 2ZM18.4691 17.793C17.6291 19.483 6.39208 19.501 5.54108 17.793C4.69008 16.085 10.2671 5.963 12.0001 5.963C13.7331 5.963 19.3111 16.1 18.4691 17.793ZM12.0001 9.664C11.1221 9.664 8.30008 14.789 8.72508 15.655C9.15008 16.521 14.8491 16.511 15.2751 15.655C15.7011 14.799 12.8801 9.664 12.0001 9.664Z"})})};function $y(){return u.jsx("div",{className:"animate-pulse space-y-0",children:[...Array(4)].map((e,t)=>u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-24"})]},t))})}function Kc({isOpen:e,onClose:t,odesliData:n,loading:r=!1,title:s,mode:l="mobile",position:o,zIndex:a=99999,jellyfinItemId:i=null}){const c=Ue(y=>y.serverUrl),f=Ue(y=>y.serverId);if(!e)return null;const d=(c==null?void 0:c.replace(/\/$/,""))??"",h=!!(i&&d),w=n?My.filter(y=>n.linksByPlatform[y.id]):[],x=async y=>{if(y==="jellyfin"&&i&&d){let S=f;if(!S)try{const E=await fetch(`${d}/System/Info/Public`);E.ok&&(S=(await E.json()).Id??"")}catch{}S&&window.open(`${d}/web/#/details?id=${i}&serverId=${S}`,"_blank","noopener,noreferrer"),t();return}if(!n)return;const v=n.linksByPlatform[y];v!=null&&v.url&&window.open(v.url,"_blank","noopener,noreferrer"),t()},k=(()=>{if(s)return s;if(!(n!=null&&n.entitiesByUniqueId))return"Loading...";const y=Object.values(n.entitiesByUniqueId);for(const v of y)if(v.title)return v.title;return"Loading..."})(),p=h,m=r||!p&&(!n||w.length===0);if(l==="desktop"){const v=m?4:(p?1:0)+w.length,S=Math.min(400,v*44+48);let E=(o==null?void 0:o.x)||100,N=(o==null?void 0:o.y)||100;return E+220>window.innerWidth&&(E=window.innerWidth-220-10),N+S>window.innerHeight&&(N=window.innerHeight-S-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0",onClick:t,style:{zIndex:a-1}}),u.jsxs("div",{className:"fixed bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-2 min-w-[200px]",style:{left:E,top:N,zIndex:a},onClick:C=>C.stopPropagation(),children:[u.jsx("div",{className:"px-4 pb-2 mb-1 border-b border-zinc-700",children:u.jsx("div",{className:"text-sm font-medium text-white truncate",children:k})}),m?u.jsx($y,{}):u.jsxs("div",{className:"space-y-0",children:[p&&u.jsxs("button",{onClick:()=>x("jellyfin"),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:ll.jellyfin}),u.jsx("span",{className:"flex-1 text-sm text-white",children:"Jellyfin"})]}),w.map(C=>u.jsxs("button",{onClick:()=>x(C.id),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:ll[C.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-sm text-white",children:C.name})]},C.id))]})]})]})}return u.jsx(Mh,{isOpen:e,onClose:t,zIndex:a,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:k})}),m?u.jsx("div",{className:"animate-pulse space-y-1",children:[...Array(4)].map((y,v)=>u.jsxs("div",{className:"flex items-center gap-4 pl-4 pr-4 py-3",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-28"})]},v))}):u.jsxs("div",{className:"space-y-1",children:[p&&u.jsxs("button",{onClick:()=>x("jellyfin"),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:ll.jellyfin}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:"Jellyfin"})]}),w.map(y=>u.jsxs("button",{onClick:()=>x(y.id),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:ll[y.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:y.name})]},y.id))]})]})})}function Uy({isOpen:e,onClose:t,itemIds:n}){const[r,s]=g.useState([]),[l,o]=g.useState(!1),[a,i]=g.useState(!1),[c,f]=g.useState(""),[d,h]=g.useState(null);g.useEffect(()=>{e&&(i(!1),f(""),h(null),w())},[e]);const w=async()=>{o(!0);try{const k=await $.getPlaylists({sortBy:["SortName"],sortOrder:"Ascending",limit:100});s(k.Items)}catch{vt.getState().addToast("Failed to load playlists","error",3e3)}finally{o(!1)}},x=async k=>{h(k.Id);try{await $.addItemsToPlaylist(k.Id,n),vt.getState().addToast(`Added to ${k.Name}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{vt.getState().addToast("Failed to add to playlist","error",3e3)}finally{h(null)}},I=async()=>{const k=c.trim();if(k){h("create");try{await $.createPlaylist(k,n);const p=n.length===1?"1 song":`${n.length} songs`;vt.getState().addToast(`Created "${k}" with ${p}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{vt.getState().addToast("Failed to create playlist","error",3e3)}finally{h(null)}}};return u.jsx(Ja,{isOpen:e,onClose:t,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:"Add to Playlist"})}),u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>i(!a),disabled:d!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm bg-zinc-800 flex items-center justify-center flex-shrink-0",children:u.jsx(ey,{className:"w-5 h-5 text-white"})}),u.jsx("span",{className:"text-white font-medium",children:"Create New Playlist"})]}),a&&u.jsxs("div",{className:"px-4 pb-2 flex gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:k=>f(k.target.value),onKeyDown:k=>{k.key==="Enter"&&I()},className:"flex-1 bg-zinc-800 text-white rounded-lg px-4 py-2.5 outline-none focus:ring-2 focus:ring-[var(--accent-color)] text-sm",placeholder:"Playlist name",autoFocus:!0,disabled:d==="create"}),u.jsx("button",{onClick:I,disabled:d==="create"||!c.trim(),className:"px-4 py-2.5 bg-[var(--accent-color)] text-white font-semibold rounded-lg transition-colors disabled:opacity-50 text-sm flex-shrink-0",children:d==="create"?u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Create"})]})]}),l?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[r.map(k=>u.jsxs("button",{onClick:()=>x(k),disabled:d!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-800",children:u.jsx(Rs,{src:$.getAlbumArtUrl(k.Id,80),alt:k.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),u.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:k.Name}),k.ChildCount!==void 0&&u.jsxs("div",{className:"text-xs text-gray-400",children:[k.ChildCount," tracks"]})]}),d===k.Id&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},k.Id)),r.length===0&&!l&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[u.jsx(tu,{className:"w-8 h-8 mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No playlists yet"})]})]})]})})}function Dy({label:e,accept:t="image/*",value:n,onChange:r,previewUrl:s}){const[l,o]=g.useState(!1),[a,i]=g.useState(!1),c=g.useRef(null),f=g.useRef(0),d=g.useCallback(v=>{v.preventDefault(),v.stopPropagation(),f.current++,o(!0)},[]),h=g.useCallback(v=>{v.preventDefault(),v.stopPropagation(),f.current--,f.current===0&&o(!1)},[]),w=g.useCallback(v=>{v.preventDefault(),v.stopPropagation()},[]),x=g.useCallback((v,S)=>S.split(",").some(E=>{const N=E.trim();return N.endsWith("/*")?v.type.startsWith(N.replace("/*","/")):N.startsWith(".")?v.name.toLowerCase().endsWith(N.toLowerCase()):v.type===N}),[]),I=g.useCallback(v=>{var E;v.preventDefault(),v.stopPropagation(),f.current=0,o(!1);const S=(E=v.dataTransfer.files)==null?void 0:E[0];S&&x(S,t)&&(i(!1),r(S))},[r,t,x]),k=()=>{var v;(v=c.current)==null||v.click()},p=v=>{var E;const S=(E=v.target.files)==null?void 0:E[0];S&&(i(!1),r(S)),v.target.value=""},m=v=>{v.stopPropagation(),i(!0),r(null)},y=n?URL.createObjectURL(n):a?null:s;return u.jsxs("div",{onClick:k,onDragEnter:d,onDragLeave:h,onDragOver:w,onDrop:I,className:`relative cursor-pointer rounded-lg border-2 border-dashed transition-colors ${l?"border-[var(--accent-color)] bg-[var(--accent-color)]/10":y?"border-zinc-700 bg-zinc-800/50":"border-zinc-700 bg-zinc-800/50 hover:border-zinc-500"}`,children:[u.jsx("input",{ref:c,type:"file",accept:t,onChange:p,className:"hidden"}),y?u.jsxs("div",{className:"relative aspect-square w-full overflow-hidden rounded-md",children:[u.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("button",{onClick:m,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(vo,{className:"w-4 h-4 text-white"})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(gy,{className:"w-6 h-6 text-gray-400"}),u.jsx("span",{className:"text-sm text-gray-400 text-center",children:e})]})]})}function Oy({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:l,mode:o="mobile",position:a,extraActions:i,onExtraAction:c}){const f=$s(),[d,h]=g.useState(!1),[w,x]=g.useState(null),[I,k]=g.useState(null),[p,m]=g.useState(!1),[y,v]=g.useState(null),[S,E]=g.useState(null),[N,C]=g.useState(!1),[P,b]=g.useState(""),[Q,q]=g.useState(!1),[ge,D]=g.useState([]),[de,ce]=g.useState(!1),[he,j]=g.useState(null),[L,F]=g.useState(""),[Z,te]=g.useState(!1),[ye,oe]=g.useState(!1),[ze,ae]=g.useState(null),[ke,Gt]=g.useState(""),[Ae,je]=g.useState(!1),[mt,pt]=g.useState(null),[V,A]=g.useState(!1),{playTrack:G,playAlbum:Y,addToQueueWithToast:ve,playNext:ie,shuffleArtist:We,toggleShuffle:tt}=X(),{startSync:nn,completeSync:Nt}=Ot(),{genres:sr}=se(),{updateEventMetadata:Ht}=Ve(),yn=g.useRef(e),z=g.useRef(t);g.useEffect(()=>{yn.current=e,z.current=t},[e,t]),g.useEffect(()=>{if(!n||!e){k(null);return}(async()=>{var M,fe;try{if(t==="album"){const me=await $.getAlbumTracks(e.Id);me.length>0&&((M=me[0].Genres)!=null&&M[0])&&k(me[0].Genres[0])}else if(t==="artist"){const{songs:me}=await $.getArtistItems(e.Id);me.length>0&&((fe=me[0].Genres)!=null&&fe[0])&&k(me[0].Genres[0])}}catch(me){_.error("Failed to fetch genre:",me)}})()},[n,e==null?void 0:e.Id,t]);const ne=B=>{if(!B)return null;const M=sr.find(fe=>{var me;return((me=fe.Name)==null?void 0:me.toLowerCase())===B.toLowerCase()});return(M==null?void 0:M.Id)||null},re=g.useCallback(async B=>{var me,R,H,W,Ie,Lt,vn,Ur,uu;const M=yn.current,fe=z.current;if(M){if(i!=null&&i.some(O=>O.id===B)){r(),c==null||c(B,M);return}if(B==="addToPlaylist"){if(fe==="song")D([M.Id]),r(),q(!0);else if(fe==="album"){h(!0),x(B);try{const O=await $.getAlbumTracks(M.Id);D(O.map(K=>K.Id)),r(),q(!0)}catch(O){_.error("Failed to fetch album tracks:",O)}finally{h(!1),x(null)}}return}if(B==="deletePlaylist"){j(M.Id),F(M.Name||"this playlist"),r(),ce(!0);return}if(B==="renamePlaylist"){ae(M.Id),Gt(M.Name||""),pt(null),A(!!("ImageTags"in M&&((me=M.ImageTags)!=null&&me.Primary))),r(),oe(!0);return}if(B==="viewDetails"){r(),l&&l(),f(`/song/${M.Id}`);return}if(B==="openIn"){const O=((H=(R=M.ArtistItems)==null?void 0:R[0])==null?void 0:H.Name)||M.AlbumArtist||M.Name||"";let K="";fe==="song"||fe==="album"?K=M.Name||"":fe==="artist"&&(K=""),b(fe==="artist"?O:`${O} - ${K}`),C(!0),E(null),v(M.Id??null),r(),m(!0);const ot=zy(O,K);E(ot),C(!1);return}if(B.startsWith("goTo")){if(r(),l&&l(),B==="goToArtist"){const O=((Ie=(W=M.ArtistItems)==null?void 0:W[0])==null?void 0:Ie.Id)||("AlbumArtists"in M?(vn=(Lt=M.AlbumArtists)==null?void 0:Lt[0])==null?void 0:vn.Id:void 0);O&&f(`/artist/${O}`)}else if(B==="goToAlbum")M.AlbumId&&f(`/album/${M.AlbumId}`);else if(B==="goToGenre"){const O=fe==="album"||fe==="artist"?I:(Ur=M.Genres)==null?void 0:Ur[0];if(O){const K=ne(O);if(K)f(`/genre/${encodeURIComponent(K)}`);else{const gt=(await $.getGenres()).find(xo=>{var Dr;return((Dr=xo.Name)==null?void 0:Dr.toLowerCase())===O.toLowerCase()});gt!=null&&gt.Id&&f(`/genre/${encodeURIComponent(gt.Id)}`)}}}return}h(!0),x(B);try{switch(fe){case"album":{if(B==="play"){const O=await $.getAlbumTracks(M.Id),{shuffle:K}=X.getState();K&&tt(),Y(O)}else if(B==="shuffle"){const O=await $.getAlbumTracks(M.Id),{shuffle:K}=X.getState();K&&tt(),Y(O),requestAnimationFrame(()=>{const{shuffle:ot}=X.getState();ot||tt()})}else if(B==="playNext"){const O=await $.getAlbumTracks(M.Id);ie(O)}else if(B==="addToQueue"){const O=await $.getAlbumTracks(M.Id);ve(O)}else if(B==="sync"){nn("context-menu",`Syncing ${M.Name}...`);try{(await $.getAlbumTracks(M.Id)).forEach(K=>{var ot;Ht("song",K.Id,{songName:K.Name||"Unknown",artistNames:(ot=K.ArtistItems)!=null&&ot.length?K.ArtistItems.map(gt=>gt.Name||"Unknown"):[K.AlbumArtist||"Unknown"],albumName:K.Album||"Unknown",genres:K.Genres||[],year:K.ProductionYear||null})}),Nt(!0,`${M.Name} synced`)}catch{Nt(!1,`Failed to sync ${M.Name}`)}}break}case"song":{if(B==="play")_.log("ContextMenu: Playing song",M.Name),G(M);else if(B==="playNext")_.log("ContextMenu: Adding song to play next",M.Name),ie([M]);else if(B==="addToQueue")_.log("ContextMenu: Adding song to queue",M.Name),ve([M]);else if(B==="sync"){nn("context-menu",`Syncing ${M.Name}...`);try{const O=await $.getSongById(M.Id);if(O.Genres){const K=await $.getGenres();O.Genres.forEach(ot=>{const gt=K.find(xo=>{var Dr;return((Dr=xo.Name)==null?void 0:Dr.toLowerCase())===ot.toLowerCase()});gt!=null&&gt.Id&&se.getState().clearGenreSongsForGenre(gt.Id)})}Ht("song",M.Id,{songName:O.Name||"Unknown",artistNames:(uu=O.ArtistItems)!=null&&uu.length?O.ArtistItems.map(K=>K.Name||"Unknown"):[O.AlbumArtist||"Unknown"],albumName:O.Album||"Unknown",genres:O.Genres||[],year:O.ProductionYear||null}),Nt(!0,`${M.Name} synced`)}catch{Nt(!1,`Failed to sync ${M.Name}`)}}break}case"artist":{if(B==="shuffle"){const{songs:O}=await $.getArtistItems(M.Id);We(O)}else if(B==="playNext"){const{songs:O}=await $.getArtistItems(M.Id);ie(O)}else if(B==="addToQueue"){const{songs:O}=await $.getArtistItems(M.Id);ve(O)}else if(B==="sync"){nn("context-menu",`Syncing ${M.Name}...`);try{const{songs:O}=await $.getArtistItems(M.Id);O.forEach(K=>{var ot;Ht("song",K.Id,{songName:K.Name||"Unknown",artistNames:(ot=K.ArtistItems)!=null&&ot.length?K.ArtistItems.map(gt=>gt.Name||"Unknown"):[K.AlbumArtist||"Unknown"],albumName:K.Album||"Unknown",genres:K.Genres||[],year:K.ProductionYear||null})}),Nt(!0,`${M.Name} synced`)}catch{Nt(!1,`Failed to sync ${M.Name}`)}}break}case"playlist":{if(B==="play"){const O=await $.getAlbumTracks(M.Id);if(O.length===0)break;const{shuffle:K}=X.getState();K&&tt(),Y(O)}else if(B==="shuffle"){const O=await $.getAlbumTracks(M.Id);if(O.length===0)break;const{shuffle:K}=X.getState();K&&tt(),Y(O),requestAnimationFrame(()=>{const{shuffle:ot}=X.getState();ot||tt()})}else if(B==="playNext"){const O=await $.getAlbumTracks(M.Id);if(O.length===0)break;ie(O)}else if(B==="addToQueue"){const O=await $.getAlbumTracks(M.Id);if(O.length===0)break;ve(O)}break}}r()}catch(O){_.error("Context menu action failed:",O)}finally{h(!1),x(null)}}},[r,l,f,I,ne,G,Y,ve,ie,We,tt,nn,Nt]),Et=async()=>{if(he){te(!0);try{await $.deleteItem(he),vt.getState().addToast("Playlist deleted","success",2e3),ce(!1),window.dispatchEvent(new CustomEvent("playlistUpdated")),f("/playlists")}catch{vt.getState().addToast("Failed to delete playlist","error",3e3)}finally{te(!1)}}},Qt=async()=>{if(!(!ze||!ke.trim())){je(!0);try{if(await $.updatePlaylist(ze,ke.trim()),mt){const B=new FileReader,M=await new Promise((fe,me)=>{B.onload=()=>{const R=B.result;fe(R.split(",")[1])},B.onerror=me,B.readAsDataURL(mt)});await $.uploadItemImage(ze,M,mt.type)}vt.getState().addToast("Playlist updated","success",2e3),oe(!1),pt(null),window.dispatchEvent(new CustomEvent("playlistUpdated"))}catch{vt.getState().addToast("Failed to update playlist","error",3e3)}finally{je(!1)}}},Ct=u.jsxs(u.Fragment,{children:[u.jsx(Uy,{isOpen:Q,onClose:()=>q(!1),itemIds:ge}),u.jsx(Ja,{isOpen:de,onClose:()=>ce(!1),children:u.jsxs("div",{className:"pb-6",children:[u.jsxs("div",{className:"mb-6 px-4 flex items-start gap-3",children:[u.jsx(my,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-lg font-semibold text-white",children:"Delete Playlist?"}),u.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["",L," will be permanently deleted. This cannot be undone."]})]})]}),u.jsxs("div",{className:"px-4 space-y-2",children:[u.jsx("button",{onClick:Et,disabled:Z,className:"w-full py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:Z?"Deleting...":"Delete"}),u.jsx("button",{onClick:()=>ce(!1),className:"w-full py-3 text-white font-medium rounded-full transition-colors hover:bg-white/10",children:"Cancel"})]})]})}),u.jsx(Ja,{isOpen:ye,onClose:()=>{oe(!1),pt(null)},children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:"Edit Playlist"})}),u.jsxs("div",{className:"px-4 space-y-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Playlist Name"}),u.jsx("input",{type:"text",value:ke,onChange:B=>Gt(B.target.value),onKeyDown:B=>{B.key==="Enter"&&Qt()},className:"w-full bg-zinc-800 text-white rounded-lg px-3 py-2 border border-zinc-700 focus:outline-none focus:border-[var(--accent-color)] placeholder:text-zinc-500",placeholder:"Playlist name",autoFocus:!0,disabled:Ae})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Image (Optional)"}),u.jsx("div",{className:"w-32",children:u.jsx(Dy,{label:"Drop or click",accept:"image/*",value:mt,onChange:pt,previewUrl:V&&ze?$.getImageUrl(ze,"Primary",256):null})})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{oe(!1),pt(null)},className:"flex-1 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:Qt,disabled:Ae||!ke.trim(),className:"flex-1 py-3 bg-[var(--accent-color)] text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:Ae?"Saving...":"Save"})]})]})]})})]});if(!e||!t)return u.jsxs(u.Fragment,{children:[u.jsx(Kc,{isOpen:p,onClose:()=>{m(!1),E(null),v(null)},odesliData:S,loading:N,title:P,mode:o,position:a,jellyfinItemId:y}),Ct]});const _e=(()=>{var B,M,fe,me,R,H,W;switch(t){case"album":{const Ie=((M=(B=e.ArtistItems)==null?void 0:B[0])==null?void 0:M.Name)||("AlbumArtists"in e?(me=(fe=e.AlbumArtists)==null?void 0:fe[0])==null?void 0:me.Name:void 0)||"Artist",Lt=I||"Genre";return[{id:"play",label:"Play",icon:zn},{id:"shuffle",label:"Shuffle",icon:Nr},{id:"playNext",label:"Play Next",icon:sl},{id:"addToQueue",label:"Add to Queue",icon:rl},{id:"goToArtist",label:`Go to ${Ie}`,icon:Yl},{id:"goToGenre",label:`Go to ${Lt}`,icon:wl},{id:"addToPlaylist",label:"Add to Playlist",icon:Hc},{id:"sync",label:"Sync",icon:Sl},{id:"openIn",label:"Open in",icon:Xo}]}case"song":{const Ie=((H=(R=e.ArtistItems)==null?void 0:R[0])==null?void 0:H.Name)||e.AlbumArtist||"Artist",Lt=e.Album||"Album",vn=((W=e.Genres)==null?void 0:W[0])||"Genre";return[{id:"play",label:"Play",icon:zn},{id:"playNext",label:"Play Next",icon:sl},{id:"addToQueue",label:"Add to Queue",icon:rl},{id:"viewDetails",label:"Go to Song Details",icon:tu},{id:"goToAlbum",label:`Go to ${Lt}`,icon:eu},{id:"goToArtist",label:`Go to ${Ie}`,icon:Yl},{id:"goToGenre",label:`Go to ${vn}`,icon:wl},{id:"addToPlaylist",label:"Add to Playlist",icon:Hc},...i||[],{id:"sync",label:"Sync",icon:Sl},{id:"openIn",label:"Open in",icon:Xo}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:Nr},{id:"playNext",label:"Play Next",icon:sl},{id:"addToQueue",label:"Add to Queue",icon:rl},{id:"goToGenre",label:`Go to ${I||"Genre"}`,icon:wl},{id:"sync",label:"Sync",icon:Sl},{id:"openIn",label:"Open in",icon:Xo}];case"playlist":return[...!("ChildCount"in e)||e.ChildCount!==void 0&&e.ChildCount>0?[{id:"play",label:"Play",icon:zn},{id:"shuffle",label:"Shuffle",icon:Nr},{id:"playNext",label:"Play Next",icon:sl},{id:"addToQueue",label:"Add to Queue",icon:rl}]:[],{id:"renamePlaylist",label:"Edit Playlist",icon:X1},{id:"deletePlaylist",label:"Delete Playlist",icon:fy}];default:return[]}})(),Wt=e.Name||"Unknown",Fe=u.jsx(Kc,{isOpen:p,onClose:()=>{m(!1),E(null),v(null)},odesliData:S,loading:N,title:P,mode:o,position:a,jellyfinItemId:y});if(o==="desktop"&&n){const M=Math.min(400,_e.length*44+8);let fe=(a==null?void 0:a.x)||100,me=(a==null?void 0:a.y)||100;return fe+240>window.innerWidth&&(fe=window.innerWidth-240-10),me+M>window.innerHeight&&(me=window.innerHeight-M-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),u.jsx("div",{className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:fe,top:me,zIndex:s},onClick:R=>R.stopPropagation(),children:u.jsx("div",{className:"space-y-0",children:_e.map(R=>{const H=R.icon,W=d&&w===R.id;return u.jsxs("button",{onClick:()=>re(R.id),disabled:d,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[u.jsx(H,{className:"w-4 h-4 text-white flex-shrink-0"}),u.jsx("span",{className:"flex-1 text-sm text-white",children:R.label}),W&&u.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},R.id)})})}),Fe,Ct]})}return u.jsxs(u.Fragment,{children:[u.jsx(Mh,{isOpen:n,onClose:r,zIndex:s,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:Wt})}),u.jsx("div",{className:"space-y-1",children:_e.map(B=>{const M=B.icon,fe=d&&w===B.id;return u.jsxs("button",{onClick:()=>re(B.id),disabled:d,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(M,{className:"w-5 h-5 text-white"}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:B.label}),fe&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},B.id)})})]})}),Fe,Ct]})}function Fy({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=g.useRef(null),l=g.useRef(null),o=g.useRef(!1),a=g.useRef(null),i=g.useRef(!1),c=g.useCallback(h=>{o.current=!1,i.current=!1,l.current=h.target,!("button"in h&&h.button!==0)&&(h.preventDefault(),"touches"in h&&h.touches.length>0?a.current={x:h.touches[0].clientX,y:h.touches[0].clientY}:a.current=null,s.current=setTimeout(()=>{i.current||(o.current=!0,e(h))},n))},[e,n]),f=g.useCallback(h=>{if(!a.current||h.touches.length===0)return;const w=h.touches[0].clientX,x=h.touches[0].clientY,I=Math.abs(w-a.current.x),k=Math.abs(x-a.current.y);Math.sqrt(I*I+k*k)>r&&(i.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),d=g.useCallback(h=>{if("button"in h&&h.button!==0){o.current=!1,i.current=!1,l.current=null,a.current=null;return}const w=o.current;s.current&&(clearTimeout(s.current),s.current=null),t&&l.current===h.target&&!w&&!i.current&&t(h),o.current=!1,i.current=!1,l.current=null,a.current=null},[t]);return{onMouseDown:c,onTouchStart:c,onTouchMove:f,onMouseUp:d,onMouseLeave:h=>{s.current&&(clearTimeout(s.current),s.current=null),o.current=!1,i.current=!1,l.current=null,a.current=null},onTouchEnd:d}}const By=45,Vy=45,ol=g.memo(function({track:t,index:n,isCurrent:r,isPlaying:s,showRemoveButton:l=!0,onClick:o,onRemove:a,onReorderDragStart:i,onReorderDragEnd:c,onReorderDrop:f,onContextMenu:d,isDragOver:h,onDragEnterRow:w}){var S,E,N,C;const x=g.useRef(!1),I=Fy({onLongPress:P=>{P.preventDefault(),x.current=!0,d(t,"mobile"),setTimeout(()=>{x.current=!1},300)}}),k=g.useCallback(P=>{if(x.current){P.preventDefault(),P.stopPropagation();return}o()},[o]),p=g.useCallback(P=>{P.preventDefault(),x.current=!0,d(t,"desktop",{x:P.clientX,y:P.clientY}),setTimeout(()=>{x.current=!1},300)},[d,t]),m=g.useCallback(P=>{P.preventDefault(),P.dataTransfer.dropEffect="move"},[]),y=g.useCallback(P=>{P.preventDefault(),r||w(n)},[r,w,n]),v=g.useCallback(P=>{r||f(P,n)},[r,f,n]);return u.jsxs("div",{onDragOver:m,onDragEnter:y,onDrop:v,className:`group queue-row flex items-center gap-3 p-3 ${r?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${r?"bg-zinc-900":""} relative focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] focus-visible:ring-inset`,onClick:r?void 0:k,onContextMenu:p,tabIndex:0,role:"button","aria-label":`${t.Name} by ${((E=(S=t.ArtistItems)==null?void 0:S[0])==null?void 0:E.Name)||t.AlbumArtist||"Unknown Artist"}`,...I,children:[h&&!r&&u.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),u.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:u.jsx(Rs,{src:$.getAlbumArtUrl(t.AlbumId||t.Id,96),alt:t.Name,className:"w-full h-full object-cover",showOutline:!1,rounded:"rounded-sm"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`text-sm font-medium truncate transition-colors ${r?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:t.Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:((C=(N=t.ArtistItems)==null?void 0:N[0])==null?void 0:C.Name)||t.AlbumArtist||"Unknown Artist"})]}),r?u.jsx("button",{onClick:P=>{P.stopPropagation(),o()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":s?"Pause":"Play",children:s?u.jsx(bs,{className:"w-5 h-5"}):u.jsx(zn,{className:"w-5 h-5"})}):u.jsx(u.Fragment,{children:l&&u.jsxs(u.Fragment,{children:[u.jsx("button",{draggable:!0,onMouseDown:P=>P.stopPropagation(),onTouchStart:P=>P.stopPropagation(),onDragStart:P=>{P.stopPropagation(),i(P,n)},onDragEnd:P=>{P.stopPropagation(),c()},className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Drag to reorder",children:u.jsx(L1,{className:"w-4 h-4"})}),a&&u.jsx("button",{onClick:P=>{P.stopPropagation(),a()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Remove from queue",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})});function iu({onNavigateFromContextMenu:e,header:t,contentPaddingBottom:n="8rem"}){const[r,s]=g.useState(!1),[l,o]=g.useState(null),[a,i]=g.useState("mobile"),[c,f]=g.useState(null),[d,h]=g.useState(null),[w,x]=g.useState(null),[I,k]=g.useState(By),[p,m]=g.useState(!1),[y,v]=g.useState(!1),S=g.useRef(null),{songs:E,currentIndex:N,isPlaying:C,togglePlayPause:P,skipToTrack:b,removeFromQueue:Q,reorderQueue:q,isFetchingRecommendations:ge,isLoadingMoreSongs:D,repeat:de}=X(),{showQueueRecommendations:ce,setShowQueueRecommendations:he,recommendationsQuality:j}=Ge(),L=g.useCallback((V,A)=>{V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",A.toString()),x(A),S.current=A;const G=V.currentTarget,Y=G==null?void 0:G.closest(".queue-row");if(Y&&V.dataTransfer.setDragImage){const ie=Y.querySelector(".queue-drag-art")??Y,We=ie.getBoundingClientRect();V.dataTransfer.setDragImage(ie,We.width/2,We.height/2)}},[]),F=g.useCallback(()=>{x(null),h(null),S.current=null},[]),Z=g.useCallback((V,A)=>{V.preventDefault();const G=V.dataTransfer.getData("text/plain")||V.dataTransfer.getData("text/html"),Y=parseInt(G,10);if(Number.isNaN(Y))return;const ve=S.current??Y,ie=X.getState().songs,We=ie[ve],tt=ie[A];if(We&&tt&&We.source!==tt.source){h(null),x(null),S.current=null;return}Y!==A&&q(Y,A),h(null),x(null),S.current=null},[q]),te=g.useCallback((V,A="mobile",G)=>{o(V),i(A),f(G||null),s(!0)},[]),ye=g.useCallback(V=>{if(S.current==null)return;const A=X.getState().songs,G=A[S.current],Y=A[V];if(!(!G||!Y)){if(G.source!==Y.source){h(null);return}h(V)}},[]),oe=N>=0?E[N]:null,ze=E.filter((V,A)=>A<N);let ae=-1;for(let V=E.length-1;V>N;V--)if(E[V].source==="user"){ae=V;break}const ke=E.filter((V,A)=>A<=N?!1:ae!==-1?A<=ae:!1),Gt=E.filter((V,A)=>V.source!=="recommendation"||A<=N?!1:ae!==-1?A>ae:!0);let Ae=I;const je=ze.slice(-Math.min(Ae,ze.length));Ae-=je.length,Ae-=oe?1:0;const mt=ke.slice(0,Math.max(0,Ae));Ae-=mt.length;const pt=Gt.slice(0,Math.max(0,Ae));return g.useEffect(()=>{const V=document.querySelector(".queue-list-container");if(!V)return;const A=()=>{const G=V.scrollTop,Y=V.clientHeight,ve=V.scrollHeight;G+Y*2.5>=ve&&k(ie=>Math.min(ie+Vy,E.length))};return V.addEventListener("scroll",A,{passive:!0}),A(),()=>V.removeEventListener("scroll",A)},[E.length]),g.useEffect(()=>{if(ge){const V=setTimeout(()=>{v(!0)},2e3);return()=>clearTimeout(V)}else v(!1)},[ge]),u.jsx("div",{className:"flex-1 flex flex-col min-h-0 w-full relative",children:u.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 queue-list-container w-full",style:{paddingBottom:"8rem"},children:[u.jsxs("div",{className:"max-w-[864px] mx-auto w-full",children:[t,E.length===0&&!oe?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 py-10",children:u.jsx("p",{children:"Queue is empty"})}):u.jsxs("div",{children:[je.length>0&&p&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Previous"}),u.jsx("button",{onClick:()=>m(!1),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Hide"})]}),je.map((V,A)=>{const G=E.indexOf(V);return u.jsx(ol,{track:V,index:G,isCurrent:!1,isPlaying:!1,showRemoveButton:!1,onClick:()=>b(G),onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:Z,onContextMenu:te,isDragOver:!1,onDragEnterRow:ye},`${V.Id}-${A}`)})]}),oe&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Now Playing"}),je.length>0&&!p&&u.jsx("button",{onClick:()=>m(!0),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Show Previous"})]}),u.jsx(ol,{track:oe,index:N,isCurrent:!0,isPlaying:C,showRemoveButton:!1,onClick:P,onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:Z,onContextMenu:te,isDragOver:!1,onDragEnterRow:ye})]}),mt.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Coming Up"}),u.jsx("button",{onClick:()=>{const A=E.filter((Y,ve)=>ve<=N||Y.source==="recommendation"),G=Math.min(N,A.length-1);X.setState({songs:A,currentIndex:G,standardOrder:A.filter(Y=>Y.source==="user").map(Y=>Y.Id),shuffleOrder:A.filter(Y=>Y.source==="user").map(Y=>Y.Id)})},className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]}),mt.map((V,A)=>{const G=E.indexOf(V);return u.jsx(ol,{track:V,index:G,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>b(G),onRemove:()=>Q(G),onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:Z,onContextMenu:te,isDragOver:d===G,onDragEnterRow:ye},`${V.Id}-${A}`)}),D&&u.jsxs("div",{className:"flex items-center justify-center py-4",children:[u.jsx(Wc,{}),u.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading more songs..."})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Recommendations"}),u.jsx("button",{disabled:de!=="off",onClick:()=>{const V=!ce;if(he(V),!V){const A=E.filter((G,Y)=>Y<=N?!0:G.source==="user");X.setState({songs:A,currentIndex:N,standardOrder:A.filter(G=>G.source==="user").map(G=>G.Id),shuffleOrder:A.filter(G=>G.source==="user").map(G=>G.Id)})}},className:`relative w-12 h-6 rounded-full transition-colors ${ce&&de==="off"?"bg-[var(--accent-color)]":"bg-zinc-600"} ${de!=="off"?"opacity-50 cursor-not-allowed":""}`,children:u.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${ce&&de==="off"?"translate-x-6":"translate-x-0"}`})})]}),u.jsxs("div",{className:"px-4 pb-2",children:[de!=="off"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block mb-1",children:"Disabled when repeat mode is active"}),(y||j==="failed")&&u.jsxs(u.Fragment,{children:[y&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Syncing genres..."}),!ge&&j==="failed"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Sync library in settings"})]})]}),ce&&de==="off"&&u.jsxs(u.Fragment,{children:[pt.map((V,A)=>{const G=E.indexOf(V);return u.jsx(ol,{track:V,index:G,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>b(G),onRemove:()=>Q(G),onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:Z,onContextMenu:te,isDragOver:d===G,onDragEnterRow:ye},`${V.Id}-${A}`)}),y&&u.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:u.jsx(Wc,{})})]})]})]})]}),u.jsx(Oy,{item:l,itemType:l?"song":null,isOpen:r,onClose:()=>{s(!1),o(null)},onNavigate:e,mode:a,position:c||void 0})]})})}function Gy({onClose:e,onNavigateFromContextMenu:t}){const{songs:n,currentIndex:r,isPlaying:s,shuffle:l,repeat:o,togglePlayPause:a,toggleShuffle:i,toggleRepeat:c,next:f,previous:d}=X(),h=r>=0&&r<n.length-1,w=r>0;return u.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[u.jsx(iu,{onNavigateFromContextMenu:t,contentPaddingBottom:"8rem"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:u.jsx("div",{className:"px-6 pt-2 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"},children:u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsx("button",{onClick:i,"aria-label":l?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${l?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(Nr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:d,disabled:!w,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${w?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(su,{className:"w-8 h-8"})}),u.jsx("button",{onClick:a,"aria-label":s?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:s?u.jsx(bs,{className:"w-8 h-8"}):u.jsx(zn,{className:"w-8 h-8"})}),u.jsx("button",{onClick:f,disabled:!h,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${h?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(lu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:c,"aria-label":o==="off"?"Enable repeat":o==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${o!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:o==="one"?u.jsx(nu,{className:"w-6 h-6"}):u.jsx(ru,{className:"w-6 h-6"})})]})})})]})}function Hy(){const e=ou(),t=au(),{isQueueSidebarOpen:n}=X(),r=e||t,[s,l]=g.useState(null),[o,a]=g.useState(!1);return g.useEffect(()=>{(async()=>{if(!r){l(null);return}a(!0);try{const c=await $.getLyrics(r.Id);l(c)}catch(c){_.error("Failed to fetch lyrics:",c),l(null)}finally{a(!1)}})()},[r==null?void 0:r.Id]),r?u.jsxs("div",{className:`fixed left-0 right-0 z-[55] flex flex-col transition-[right] duration-300 ease-out ${n?"lyrics-with-sidebar":""}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:[u.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 py-4 relative",children:o?u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50",children:"Loading lyrics..."})}):s?u.jsx("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto pb-8 pl-8 pr-4",children:u.jsx("div",{className:"text-white text-center whitespace-pre-line text-xl lg:text-3xl",children:s.split(`
`).map((i,c)=>u.jsx("div",{className:"mb-6 leading-relaxed",children:i},c))})}):u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50 text-center",children:"This song has no lyrics"})})}),u.jsx("div",{className:"h-px bg-white/20 flex-shrink-0"})]}):null}function Qy({onClose:e,onClosingStart:t,closeRef:n}){const r=$s(),{songs:s,currentIndex:l,isPlaying:o,currentTime:a,duration:i,shuffle:c,repeat:f,togglePlayPause:d,next:h,previous:w,seek:x,setVolume:I,toggleShuffle:k,toggleRepeat:p,playTrack:m,isQueueSidebarOpen:y,toggleQueueSidebar:v}=X(),S=ou(),E=au(),N=S||E,[C,P]=g.useState(!1);g.useEffect(()=>{P(!1)},[]);const[b,Q]=g.useState(!1),[q,ge]=g.useState(!1),[D,de]=g.useState(null),[ce,he]=g.useState("up"),[j,L]=g.useState(null),[F,Z]=g.useState(null),[te,ye]=g.useState(!1),[oe,ze]=g.useState(!1),[ae,ke]=g.useState(!1),[Gt,Ae]=g.useState(!1),[je,mt]=g.useState(null),[pt,V]=g.useState(null),A=g.useRef(null),G=g.useRef(null),Y=g.useRef(null),ve=g.useRef(null),ie=g.useRef(!1),We=g.useRef(null);g.useEffect(()=>{const R=window.getComputedStyle(document.body).overflowY,H=window.getComputedStyle(document.documentElement).overflowY,W=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const Ie=document.getElementById("root");return Ie&&(Ie.style.overflowY="hidden"),()=>{document.body.style.overflowY=R,document.documentElement.style.overflowY=H,Ie&&(Ie.style.overflowY=W!=="N/A"?W:"")}},[]),g.useEffect(()=>{requestAnimationFrame(()=>{ke(!0)})},[]);const tt=s.length>0&&(l<0||l<s.length-1||f!=="off"),nn=l>0||f==="all"&&s.length>0;g.useEffect(()=>{(async()=>{if(!N){ye(!1);return}try{const H=await $.getLyrics(N.Id),W=H!==null&&H.trim().length>0;ye(W)}catch{ye(!1)}})()},[N]);const Nt=R=>{if(!R)return"Unknown";if(R.Name&&R.Name.trim())return R.Name;const H=R.Path;return H&&typeof H=="string"&&(H.split("/").pop()||H.split("\\").pop())||"Unknown"},sr=R=>{var H,W;return R&&(((W=(H=R.ArtistItems)==null?void 0:H[0])==null?void 0:W.Name)||R.AlbumArtist)||""};if(g.useEffect(()=>{"mediaSession"in navigator&&N&&(navigator.mediaSession.metadata=new MediaMetadata({title:Nt(N),artist:sr(N),album:N.Album||"",artwork:[{src:$.getAlbumArtUrl(N.AlbumId||N.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",d),navigator.mediaSession.setActionHandler("pause",d),navigator.mediaSession.setActionHandler("previoustrack",w),navigator.mediaSession.setActionHandler("nexttrack",h))},[N,o,d,h,w]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&i>0)try{navigator.mediaSession.setPositionState({duration:i,playbackRate:1,position:Math.min(a,i)})}catch{}},[a,i]),g.useEffect(()=>{Ae(!1)},[N==null?void 0:N.Id]),g.useEffect(()=>{if(!N)return;const R=$.getAlbumArtUrl(N.AlbumId||N.Id);if(!je){mt(R);return}if(R===je)return;const H=new window.Image,W=()=>{V(je),mt(R),setTimeout(()=>{V(null)},1100)};H.onload=W,H.onerror=W,H.src=R},[N==null?void 0:N.Id,N==null?void 0:N.AlbumId]),!N)return null;const Ht=i>0?a/i*100:0,yn=R=>{const H=Math.floor(R/60),W=Math.floor(R%60);return`${H}:${W.toString().padStart(2,"0")}`},z=()=>{if(N.Name&&N.Name.trim())return N.Name;const R=N.Path;return R&&typeof R=="string"&&(R.split("/").pop()||R.split("\\").pop())||"Unknown"},ne=()=>{var R,H;return((H=(R=N.ArtistItems)==null?void 0:R[0])==null?void 0:H.Name)||N.AlbumArtist},re=N.AlbumId&&N.Album&&N.Album.trim(),Et=R=>{if(!A.current||!i||ie.current)return;const H=A.current.getBoundingClientRect(),W=(R.clientX-H.left)/H.width;x(Math.max(0,Math.min(1,W))*i)},Qt=R=>{if(!A.current||!i)return;ie.current=!0,We.current=R.clientX;const H=A.current.getBoundingClientRect(),W=(R.clientX-H.left)/H.width;x(Math.max(0,Math.min(1,W))*i)},Ct=()=>{ie.current=!1,We.current=null},$e=R=>{if(!A.current||!i)return;R.stopPropagation(),ie.current=!0;const H=R.touches[0],W=A.current.getBoundingClientRect(),Ie=(H.clientX-W.left)/W.width;x(Math.max(0,Math.min(1,Ie))*i)},_e=R=>{if(!ie.current||!A.current||!i)return;R.stopPropagation(),R.preventDefault();const H=R.touches[0],W=A.current.getBoundingClientRect(),Ie=(H.clientX-W.left)/W.width;x(Math.max(0,Math.min(1,Ie))*i)},Wt=R=>{R.stopPropagation(),ie.current=!1,We.current=null};g.useEffect(()=>{let R=null;const H=Ie=>{!ie.current||!A.current||!i||R===null&&(R=requestAnimationFrame(()=>{if(R=null,!ie.current||!A.current)return;const Lt=A.current.getBoundingClientRect(),vn=(Ie.clientX-Lt.left)/Lt.width;x(Math.max(0,Math.min(1,vn))*i)}))},W=()=>{ie.current&&(ie.current=!1,We.current=null),R!==null&&(cancelAnimationFrame(R),R=null)};return document.addEventListener("mousemove",H),document.addEventListener("mouseup",W),()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",W),R!==null&&cancelAnimationFrame(R)}},[i,x]);const Fe=()=>{ze(!0),t==null||t(),setTimeout(()=>{e()},300)},B=(R="up")=>{const H=R==="down"?F:j;if(H){const W=H.getBoundingClientRect();de({top:R==="down"?W.bottom:W.top,left:W.left+W.width/2}),he(R),ge(!0)}};g.useEffect(()=>(n&&(n.current=Fe),()=>{n&&(n.current=null)}),[n]);const M=R=>{C||b||(G.current=R.touches[0].clientY,Y.current=Date.now())},fe=R=>{if(C||b||G.current===null)return;const W=R.touches[0].clientY-G.current;if(W>0&&ve.current){const Ie=Math.min(W,window.innerHeight*.5);ve.current.style.transform=`translateY(${Ie}px)`}},me=R=>{if(C||b||G.current===null||Y.current===null){G.current=null,Y.current=null,ve.current&&(ve.current.style.transform="");return}const W=R.changedTouches[0].clientY-G.current,Ie=Date.now()-Y.current,Lt=50,vn=.3;ve.current&&(ve.current.style.transform="");const Ur=W/Ie;(W>Lt||W>30&&Ur>vn)&&Fe(),G.current=null,Y.current=null};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }

      @media (min-width: 1024px) {
        .lg\\:max-w-\\[864px\\] { max-width: 864px; }
      }

      /* Queue sidebar in player modal - transparent backgrounds (exclude fixed elements like context menus) */
      .queue-xl-container .bg-zinc-900:not([style*="position: fixed"]):not(.fixed) { background-color: transparent; }
      .queue-xl-container .hover\\:bg-zinc-900:hover:not([style*="position: fixed"]):not(.fixed) { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .hover\\:bg-zinc-800:hover { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .text-\\[var\\(--accent-color\\)\\] { color: white; }

      /* Background crossfade animation - only on large screens */
      @keyframes bgFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .bg-fade-in {
        animation: none; /* Instant on smaller screens */
      }
      @media (min-width: 1280px) {
        .bg-fade-in {
          animation: bgFadeIn 1s ease-out forwards;
        }
      }

      /* Lyrics modal with sidebar - adjust right edge on xl screens */
      @media (min-width: 1280px) {
        .lyrics-with-sidebar { right: var(--sidebar-width) !important; }
      }
    `}),u.jsxs("div",{ref:ve,onTouchStart:M,onTouchMove:fe,onTouchEnd:me,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex transition-transform duration-300 ease-out overflow-hidden ${oe?"translate-y-full":ae?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:G.current===null?"transform 300ms ease-out":"none"},children:[!Gt&&(je||pt)&&u.jsxs("div",{className:C?"hidden xl:contents":"contents",children:[pt&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${pt})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]}),je&&u.jsxs("div",{className:"absolute inset-0 bg-fade-in",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${je})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]},je)]}),u.jsx("div",{className:C?"hidden xl:contents":"contents",children:u.jsx("div",{className:"absolute inset-0 bg-black/40 z-[1] pointer-events-none"})}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-[2]",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[u.jsx("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:u.jsx("button",{onClick:Fe,"aria-label":"Close player",className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:u.jsx(E1,{className:"w-8 h-8"})})}),b&&N&&u.jsx("h2",{className:"hidden min-[480px]:block absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:z()}),u.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[u.jsx("div",{className:`${C?"xl:hidden":"md:hidden"}`,children:!Dt()&&u.jsx(un,{variant:"compact",onOpenPopover:()=>B("down"),onRef:Z,className:"text-white hover:text-zinc-300 hover:bg-white/10 rounded-full transition-colors p-2"})}),u.jsx("button",{onClick:()=>{!te&&!b||(C&&P(!1),Q(!b))},"aria-label":b?"Hide lyrics":"Show lyrics",className:`transition-colors p-2 rounded-full ${te||b?`hover:bg-white/10 ${b?"text-[var(--accent-color)]":"text-white"}`:"hidden"}`,children:u.jsx(W1,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>{C||Q(!1),P(!C)},"aria-label":C?"Show player":"Show queue",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 xl:hidden",children:C?u.jsx(cy,{className:"w-6 h-6"}):u.jsx(Xa,{className:"w-6 h-6"})}),!y&&u.jsx("button",{onClick:v,"aria-label":"Open queue sidebar",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 hidden xl:block",children:u.jsx(Xa,{className:"w-6 h-6"})})]})]}),C&&u.jsx("div",{className:"flex-1 bg-zinc-900 relative z-10 xl:hidden",children:u.jsx(Gy,{onClose:()=>P(!1),onNavigateFromContextMenu:()=>{Fe()}})}),u.jsxs("div",{className:`flex-1 flex-col min-h-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full relative ${C?"hidden xl:flex":"flex"}`,style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[u.jsx("div",{className:`flex-1 overflow-hidden min-h-0 flex items-center justify-center ${b?"invisible":""}`,children:u.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8 md:pr-0",children:u.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[u.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:u.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 ${Gt?"":"bg-zinc-900 shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:Gt?u.jsx("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center relative",children:u.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:R=>{_.error("Failed to load vinyl image"),R.currentTarget.style.display="none"}})}):u.jsx(Rs,{src:$.getAlbumArtUrl(N.AlbumId||N.Id),alt:N.Name,className:"w-full h-full object-cover",rounded:"rounded",onError:()=>Ae(!0)})})}),u.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:z()}),ne()&&u.jsxs("button",{onClick:()=>{var H,W;const R=(W=(H=N.ArtistItems)==null?void 0:H[0])==null?void 0:W.Id;R&&(e(),r(`/artist/${R}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[u.jsx(Yl,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:ne()})]}),re&&u.jsxs("button",{onClick:()=>{e(),r(`/album/${N.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[u.jsx(eu,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:N.Album})]})]})]})})}),u.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[u.jsx("div",{className:"space-y-3 px-4 w-full",children:u.jsxs("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto",children:[u.jsx("div",{ref:A,className:"h-2 bg-white/10 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:Et,onMouseDown:Qt,onMouseUp:Ct,onMouseLeave:Ct,onTouchStart:$e,onTouchMove:_e,onTouchEnd:Wt,children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${Ht}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:Ht>=100?"9999px":"0",borderBottomRightRadius:Ht>=100?"9999px":"0"}})}),u.jsxs("div",{className:"flex justify-between text-xs text-white/70 mt-2 tabular-nums",children:[u.jsx("span",{children:yn(a)}),u.jsx("span",{children:yn(i)})]})]})}),u.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 relative",children:[u.jsx("button",{onClick:k,"aria-label":c?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${c?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:u.jsx(Nr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:w,disabled:!nn,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${nn?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(su,{className:"w-8 h-8"})}),u.jsx("button",{onClick:()=>{S?d():N&&m(N)},"aria-label":o&&S?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:o&&S?u.jsx(bs,{className:"w-8 h-8"}):u.jsx(zn,{className:"w-8 h-8"})}),u.jsx("button",{onClick:h,disabled:!tt,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${tt?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(lu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:p,"aria-label":f==="off"?"Enable repeat":f==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${f!=="off"?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:f==="one"?u.jsx(nu,{className:"w-6 h-6"}):u.jsx(ru,{className:"w-6 h-6"})}),u.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 hidden md:flex",children:!Dt()&&u.jsx(un,{variant:"horizontal"})})]})]})]}),b&&u.jsx(Hy,{}),q&&D&&!Dt()&&u.jsx(un,{variant:"vertical",onClose:()=>ge(!1),popoverPosition:D,popoverDirection:ce})]}),u.jsx("div",{className:"hidden xl:flex flex-col flex-shrink-0 relative z-10 transition-[width] duration-300 ease-out overflow-hidden",style:{width:y?"var(--sidebar-width)":"0px"},children:u.jsxs("div",{className:"flex flex-col h-full flex-shrink-0",style:{width:"var(--sidebar-width)"},children:[u.jsx("div",{className:`border-l border-white/20 flex-shrink-0 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/20 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:v,"aria-label":"Close queue sidebar",className:"text-white/70 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 relative z-20",children:u.jsx(vo,{className:"w-5 h-5"})})]})}),u.jsx("div",{className:`flex-1 overflow-y-auto min-h-0 border-l border-white/20 queue-xl-container [&_.text-gray-400]:text-white/60 [&_.text-gray-500]:text-white/50 [&_.text-gray-300]:text-white/70 [&_.border-zinc-800]:border-white/20 [&_.bg-zinc-600]:bg-white/30 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsx(iu,{onNavigateFromContextMenu:Fe,contentPaddingBottom:"2rem"})})]})})]})]})}function Wy(){var Nt,sr,Ht,yn;const{songs:e,currentIndex:t,isPlaying:n,currentTime:r,duration:s,audioElement:l,setAudioElement:o,togglePlayPause:a,next:i,setCurrentTime:c,setDuration:f,playTrack:d,repeat:h,shuffle:w,toggleShuffle:x,toggleRepeat:I,previous:k,seek:p,skipToTrack:m,isQueueSidebarOpen:y,toggleQueueSidebar:v,setNextAudioElement:S,preBufferNextTrack:E}=X(),N=ou(),C=au(),[P,b]=g.useState(!1),[Q,q]=g.useState(!1),[ge,D]=g.useState(!1),[de,ce]=g.useState(!1),[he,j]=g.useState(null),[L,F]=g.useState(null),[Z,te]=g.useState(null),ye=g.useRef(null),oe=g.useRef(null),ze=g.useRef(null),ae=g.useRef(null),ke=g.useRef(!1),Gt=tn(),Ae=g.useRef(null),je=g.useRef(null),mt=g.useRef(null);g.useEffect(()=>{P&&(q(!0),setTimeout(()=>{b(!1),q(!1)},300))},[Gt.pathname]),g.useEffect(()=>{b(!1),q(!1)},[]),g.useEffect(()=>{const z=()=>{P&&ze.current&&ze.current()};return window.addEventListener("closePlayerModal",z),()=>{window.removeEventListener("closePlayerModal",z)}},[P]);const pt=()=>{q(!0),setTimeout(()=>{b(!1),q(!1)},300)};g.useEffect(()=>{ye.current||(ye.current=new Audio,ye.current.setAttribute("playsinline","true"),ye.current.setAttribute("preload","auto"),o(ye.current)),oe.current||(oe.current=new Audio,oe.current.setAttribute("playsinline","true"),oe.current.setAttribute("preload","auto"),S(oe.current));const z=X.getState().volume;ye.current&&(ye.current.volume=z),oe.current&&(oe.current.volume=z)},[o,S]),g.useEffect(()=>{const z=()=>{ke.current=!1};return window.addEventListener("playerSeek",z),()=>window.removeEventListener("playerSeek",z)},[]),g.useEffect(()=>{if(!Dt())return;const z=()=>{document.visibilityState==="visible"&&setTimeout(()=>{const ne=X.getState(),re=ne.audioElement;!re||!ne.isPlaying||re.paused&&re.play().catch(()=>{X.setState({isPlaying:!1})})},300)};return document.addEventListener("visibilitychange",z),()=>document.removeEventListener("visibilitychange",z)},[]),g.useEffect(()=>{if(!l)return;let z=!0;ke.current=!1;const ne=()=>{if(!z)return;c(l.currentTime);const $e=l.duration-l.currentTime;if(l.duration>0&&$e<=15&&$e>0&&E(),!ke.current&&l.duration>0&&$e<=1&&$e>0){ke.current=!0;const _e=X.getState(),Wt=_e.currentIndex>=0&&_e.currentIndex<_e.songs.length?_e.songs[_e.currentIndex]:null;if(_e.repeat==="one"){if(Wt&&!_e.hasRecordedCurrentTrackStats){const Fe=l.currentTime*1e3;Ve.getState().recordPlay(Wt,Fe)}X.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,ke.current=!1;return}if(Wt){$.markItemAsPlayed(Wt.Id).catch(()=>{}),ae.current&&clearTimeout(ae.current);const Fe=Wt.Id;ae.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Fe}})),ae.current=null},4e3)}i()}},re=()=>{z&&(f(l.duration),ke.current=!1,_.debug("[PlayerBar] Metadata loaded",{duration:l.duration}))},Et=async()=>{if(_.debug("[PlayerBar] handleEnded fired",{preemptive:ke.current}),!z)return;if(ke.current){ke.current=!1;return}const $e=X.getState(),_e=$e.currentIndex>=0&&$e.currentIndex<$e.songs.length?$e.songs[$e.currentIndex]:null;if(_e)try{await $.markItemAsPlayed(_e.Id),ae.current&&clearTimeout(ae.current);const Fe=_e.Id;ae.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Fe}})),ae.current=null},4e3)}catch{}if($e.repeat==="one"){const Fe=$e.hasRecordedCurrentTrackStats;if(_e&&!Fe){const B=l.currentTime*1e3;Ve.getState().recordPlay(_e,B)}X.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,l.play();return}i()},Qt=()=>{z&&X.getState().audioElement===l&&(X.setState({isPlaying:!0}),_.debug("[PlayerBar] handlePlay",{src:l.src}))},Ct=()=>{z&&X.getState().audioElement===l&&(X.setState({isPlaying:!1}),_.debug("[PlayerBar] handlePause",{paused:l.paused}))};return l.addEventListener("timeupdate",ne),l.addEventListener("loadedmetadata",re),l.addEventListener("ended",Et),l.addEventListener("play",Qt),l.addEventListener("pause",Ct),()=>{z=!1,l.removeEventListener("timeupdate",ne),l.removeEventListener("loadedmetadata",re),l.removeEventListener("ended",Et),l.removeEventListener("play",Qt),l.removeEventListener("pause",Ct),ae.current&&(clearTimeout(ae.current),ae.current=null)}},[l,c,f,i,E]),g.useEffect(()=>{var z,ne;"mediaSession"in navigator&&N&&(navigator.mediaSession.metadata=new MediaMetadata({title:N.Name||"Unknown",artist:((ne=(z=N.ArtistItems)==null?void 0:z[0])==null?void 0:ne.Name)||N.AlbumArtist||"",album:N.Album||"",artwork:[{src:$.getAlbumArtUrl(N.AlbumId||N.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",a),navigator.mediaSession.setActionHandler("pause",a),navigator.mediaSession.setActionHandler("previoustrack",k),navigator.mediaSession.setActionHandler("nexttrack",i))},[N,a,i,k]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&s>0)try{navigator.mediaSession.setPositionState({duration:s,playbackRate:1,position:Math.min(r,s)})}catch{}},[r,s]),g.useEffect(()=>{if(N&&!n&&l){const z=$.serverBaseUrl,ne=z?`${z}/Audio/${N.Id}/stream?static=true`:"";l.src!==ne&&(l.src=ne,l.load())}},[N,n,l]);const V=e.length>0?e[0]:null,A=N||C||V;g.useEffect(()=>{D(!1)},[A==null?void 0:A.Id]);const G=s>0?r/s*100:0,Y=z=>{const ne=Math.floor(z/60),re=Math.floor(z%60);return`${ne}:${re.toString().padStart(2,"0")}`},ve=e.length>0&&(t<0||t<e.length-1||h!=="off"),ie=t>0||h==="all"&&e.length>0,We=()=>{const ne=window.innerWidth<768?Z:L;if(ne){const re=ne.getBoundingClientRect();j({top:re.top,left:re.left+re.width/2}),ce(!0)}},tt=z=>{Ae.current=z.touches[0].clientX,je.current=Date.now()},nn=z=>{if(Ae.current===null||je.current===null){Ae.current=null,je.current=null;return}const re=z.changedTouches[0].clientX-Ae.current,Et=Date.now()-je.current,Qt=50,Ct=.3,$e=Math.abs(re)/Et;re>Qt||re>30&&$e>Ct?ie&&k():(re<-Qt||re<-30&&$e>Ct)&&ve&&i(),Ae.current=null,je.current=null};return A?u.jsxs(u.Fragment,{children:[u.jsxs("div",{ref:mt,className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer bottom-[calc(4rem-8px)] lg:bottom-0",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:()=>{b(!0)},onTouchStart:tt,onTouchEnd:nn,children:[A&&u.jsx("div",{className:"hidden lg:block absolute left-0 right-0 cursor-pointer group",style:{top:"-10px",height:"24px"},onClick:z=>{if(z.stopPropagation(),!s)return;const ne=z.currentTarget.getBoundingClientRect(),re=(z.clientX-ne.left)/ne.width;p(Math.max(0,Math.min(1,re))*s)},onTouchStart:z=>{if(z.stopPropagation(),!s)return;const ne=z.touches[0],re=z.currentTarget.getBoundingClientRect(),Et=(ne.clientX-re.left)/re.width;p(Math.max(0,Math.min(1,Et))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 bottom-[10px] h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${G}%`}})})}),u.jsxs("div",{className:"hidden md:block md:relative md:px-4 md:pt-3 md:pb-1 lg:pb-3",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0 max-w-[37%]",children:[!ge&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx(Rs,{src:$.getAlbumArtUrl((N||A).AlbumId||(N||A).Id,96),alt:(N||A).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>D(!0)},(N==null?void 0:N.Id)||A.Id)}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(N||A).Name}),u.jsxs("div",{className:"text-xs text-gray-400 truncate flex items-center gap-1.5 min-w-0",children:[u.jsx("span",{className:"truncate",children:((sr=(Nt=(N||A).ArtistItems)==null?void 0:Nt[0])==null?void 0:sr.Name)||(N||A).AlbumArtist||"Unknown Artist"}),u.jsx("span",{className:"flex-shrink-0",children:""}),u.jsxs("span",{className:"tabular-nums flex-shrink-0",children:[Y(r),"/",Y(s)]})]})]})]}),u.jsxs("div",{className:"absolute top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 md:right-16 md:left-auto md:translate-x-0 lg:left-1/2 lg:right-auto lg:-translate-x-1/2 flex items-center gap-2",children:[u.jsx("button",{onClick:z=>{z.stopPropagation(),x()},"aria-label":w?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${w?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(Nr,{className:"w-5 h-5"})}),u.jsx("button",{onClick:z=>{z.stopPropagation(),ie&&k()},disabled:!ie,"aria-label":"Previous track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${ie?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(su,{className:"w-5 h-5"})}),u.jsx("button",{onClick:z=>{z.stopPropagation(),N?a():e.length>0?m(0):A&&d(A)},"aria-label":n&&N?"Pause":"Play",className:"w-10 h-10 mx-2 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&N?u.jsx(bs,{className:"w-5 h-5"}):u.jsx(zn,{className:"w-5 h-5"})}),u.jsx("button",{onClick:z=>{z.stopPropagation(),ve&&i()},disabled:!ve,"aria-label":"Next track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${ve?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(lu,{className:"w-5 h-5"})}),u.jsx("button",{onClick:z=>{z.stopPropagation(),I()},"aria-label":h==="off"?"Enable repeat":h==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${h!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:h==="one"?u.jsx(nu,{className:"w-5 h-5"}):u.jsx(ru,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"absolute right-4 top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 flex items-center gap-4",children:[u.jsx("div",{className:"hidden xl:block",children:!y&&u.jsx("button",{onClick:z=>{z.stopPropagation(),v()},className:"text-gray-400 hover:text-white hover:bg-zinc-800 transition-colors flex items-center justify-center w-10 h-10 rounded-full",title:"Open Queue","aria-label":"Open queue",children:u.jsx(Xa,{className:"w-5 h-5"})})}),u.jsx("div",{className:"hidden lg:block",onClick:z=>z.stopPropagation(),children:!Dt()&&u.jsx(un,{variant:"horizontal"})}),u.jsx("div",{className:"hidden md:block lg:hidden",children:!Dt()&&u.jsx(un,{variant:"compact",onOpenPopover:We,onRef:F,className:"w-10 h-10 flex items-center justify-center text-white hover:text-zinc-300 hover:bg-zinc-800 rounded-full transition-colors"})})]})]}),u.jsxs("div",{className:"flex items-center gap-3 pt-3 pb-1 pr-3 pl-4 md:hidden",children:[!ge&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx(Rs,{src:$.getAlbumArtUrl((N||A).AlbumId||(N||A).Id,96),alt:(N||A).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>D(!0)},(N==null?void 0:N.Id)||A.Id)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(N||A).Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:((yn=(Ht=(N||A).ArtistItems)==null?void 0:Ht[0])==null?void 0:yn.Name)||(N||A).AlbumArtist||"Unknown Artist"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!Dt()&&u.jsx(un,{variant:"compact",onOpenPopover:We,onRef:te,className:"text-white hover:text-zinc-300 transition-colors"}),u.jsx("button",{onClick:z=>{z.stopPropagation(),N?a():e.length>0?m(0):A&&d(A)},"aria-label":n&&N?"Pause":"Play",className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors",children:n&&N?u.jsx(bs,{className:"w-5 h-5"}):u.jsx(zn,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"lg:hidden",style:{marginBottom:"-10px"},children:A&&u.jsx("div",{className:"relative cursor-pointer group flex items-center",style:{height:"24px"},onClick:z=>{if(z.stopPropagation(),!s)return;const ne=z.currentTarget.getBoundingClientRect(),re=(z.clientX-ne.left)/ne.width;p(Math.max(0,Math.min(1,re))*s)},onTouchStart:z=>{if(z.stopPropagation(),!s)return;const ne=z.touches[0],re=z.currentTarget.getBoundingClientRect(),Et=(ne.clientX-re.left)/re.width;p(Math.max(0,Math.min(1,Et))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${G}%`}})})})})]}),P&&u.jsx(Qy,{onClose:pt,onClosingStart:()=>q(!0),closeRef:ze}),de&&he&&!Dt()&&u.jsx(un,{variant:"vertical",onClose:()=>ce(!1),popoverPosition:he})]}):null}function qy(){const{state:e,message:t,progress:n,cancelSync:r}=Ot(),{isQueueSidebarOpen:s}=X(),l=Ge(c=>c.localServerUrl);if(e==="idle")return null;const o=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}},a=yo()||l,i=e==="syncing"&&a?$.serverBaseUrl===a.replace(/\/$/,"")?"Syncing via LAN server...":"Syncing via remote server...":t;return u.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${o()} transition-colors duration-300`,style:{height:"28px",top:"0px",paddingLeft:"16px",paddingRight:s?"var(--sidebar-width)":"12px",scrollbarGutter:"stable"},children:u.jsxs("div",{className:"h-full flex items-center",children:[u.jsxs("span",{className:"text-white text-sm font-medium truncate",children:[i,e==="syncing"&&n!==null&&u.jsxs("span",{className:"tabular-nums",children:[" (",n,"%)"]})]}),e==="syncing"&&u.jsx("button",{onClick:r,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors ml-8",children:"Cancel"})]})})}const Jo=new Set;async function Yy(e){const t=e.toLowerCase();if(!Jo.has(t)){Jo.add(t);try{_.log(`[Recommendations] Auto-syncing genre "${e}" for better recommendations...`);const{genres:n,setGenreSongs:r}=se.getState();let s=n;s.length===0&&(s=await $.getGenres());const l=s.find(a=>a.Name&&e&&a.Name.toLowerCase()===e.toLowerCase());if(!l||!l.Id){_.warn(`[Recommendations] Genre "${e}" not found in server`);return}_.log(`[Recommendations] Fetching songs for genre "${e}"...`);const o=await $.getGenreSongs(l.Id,e);o.length>0?(r(l.Id,o),_.log(`[Recommendations]  Successfully cached ${o.length} songs for genre "${e}"`)):_.warn(`[Recommendations] No songs found for genre "${e}" on server`)}catch(n){_.error(`[Recommendations] Failed to sync genre "${e}":`,n)}finally{setTimeout(()=>{Jo.delete(t)},1e4)}}}async function Ky({currentTrack:e,queue:t}){var v;if(!e)return{recommendations:[],hasGenreMatches:!1};const{songs:n,genreSongs:r,genres:s}=se.getState(),l=e.Genres||[];let o=[];if(l.length>0&&s.length>0){const S=s.filter(E=>E.Name&&l.some(N=>N.toLowerCase()===E.Name.toLowerCase())).map(E=>E.Id).filter(E=>r[E]&&r[E].length>0);S.length>0&&(o=S.flatMap(E=>r[E]),_.log(`[Recommendations] Using ${o.length} pre-filtered songs from ${S.length} matching genres`))}if(o.length===0&&n.length>0&&(o=n,_.log(`[Recommendations] Using ${o.length} songs from main cache`)),o.length===0){const S=Object.values(r).flat();S.length>0&&(o=S,_.log(`[Recommendations] Using ${o.length} songs from all genre caches`))}if(o.length===0){const{setRecommendationsQuality:S}=Ge.getState();return S("failed"),{recommendations:[],hasGenreMatches:!1}}_.log("[Recommendations] Using",o.length,"available songs"),_.log("[Recommendations] Current track genres:",l,"(count:",l.length+")"),_.log("[Recommendations] Current track year:",e.ProductionYear),_.log("[Recommendations] Queue size:",t.length),_.log("[Recommendations] Sample available songs:",o.slice(0,3).map(S=>{var E;return`${S.Name} (${S.ProductionYear}) [${(E=S.Genres)==null?void 0:E.join(", ")}]`}));let a=[],i=!1;const c=e.ProductionYear,f=c?[{range:3,years:Array.from({length:7},(S,E)=>c-3+E)},{range:6,years:Array.from({length:13},(S,E)=>c-6+E)},{range:10,years:Array.from({length:21},(S,E)=>c-10+E)}]:[],d=S=>{const E=S.Id!==e.Id,N=!t.some(P=>P.Id===S.Id),C=!a.some(P=>P.Id===S.Id);return E&&N&&C},h=S=>{var E;return l.length===0?!0:((E=S.Genres)==null?void 0:E.some(N=>l.some(C=>N.toLowerCase()===C.toLowerCase())))??!1},w=(S,E)=>c?S.ProductionYear!==void 0&&E.includes(S.ProductionYear):!0;let x=0;if(l.length>0&&(x=o.filter(S=>h(S)).length,x===0)){for(const S of l)Yy(S).catch(E=>_.error(`[Recommendations] Genre sync failed for ${S}:`,E));return{recommendations:[],hasGenreMatches:!1,triggeredGenreSync:!0}}for(const{range:S,years:E}of f){if(a.length>=12){_.log(`[Recommendations] Have ${a.length} recommendations, stopping at ${S} year range`);break}const N=12-a.length,C=o.filter(P=>!(!d(P)||!h(P)||!w(P,E)));if(_.log(`[Recommendations] Year range ${S}: found ${C.length} candidates, need ${N}`),C.length>0){const b=Xe(C).slice(0,N);a.push(...b),_.log(`[Recommendations] Added ${b.length} songs from ${S} year range`)}}if(a.length<12&&!c&&l.length>0){const S=12-a.length,E=o.filter(P=>!(!d(P)||!h(P))),C=Xe(E).slice(0,S);a.push(...C),_.log(`[Recommendations] Added ${C.length} genre-only songs (no year on seed track)`)}if(a.length<12&&c&&l.length===0)for(const{range:S,years:E}of f){if(a.length>=12)break;const N=12-a.length,C=o.filter(Q=>!(!d(Q)||!w(Q,E))),b=Xe(C).slice(0,N);a.push(...b),_.log(`[Recommendations] Added ${b.length} year-only songs from ${S} range (no genre on seed track)`)}i=l.length>0&&a.some(S=>h(S)),_.log("[Recommendations] Matching results:",{totalRecommendations:a.length,genreMatchSuccess:i,hasGenres:l.length>0,hasYear:!!c});const I=Xe(a),k=[],p=[...I];for(;p.length>0&&k.length<12;){let S=-1;if(k.length>0){const C=((v=k[k.length-1].ArtistItems)==null?void 0:v.map(P=>P.Id))||[];S=p.findIndex(P=>{var Q;return!(((Q=P.ArtistItems)==null?void 0:Q.map(q=>q.Id))||[]).some(q=>C.includes(q))})}S===-1&&(S=0);const E=p.splice(S,1)[0];k.push(E)}const m=k,{setRecommendationsQuality:y}=Ge.getState();return _.log("[Recommendations] Quality decision:",{finalRecommendationsCount:m.length,genreMatchSuccess:i,hasGenres:l.length>0,availableSongsCount:o.length}),m.length===0?y("failed"):!i&&l.length>0?y("degraded"):y("good"),_.log(`[Recommendations] Generated ${m.length} recommendations`),m.length>0&&_.log("[Recommendations] Sample:",m.slice(0,3).map(S=>S.Name)),{recommendations:m,hasGenreMatches:i,triggeredGenreSync:!1}}function Xy(e){var s;if(e.length<=1)return e;const t=Xe(e),n=[],r=[...t];for(;r.length>0;){let l=-1;if(n.length>0){const i=((s=n[n.length-1].ArtistItems)==null?void 0:s.map(c=>c.Id))||[];l=r.findIndex(c=>{var d;return!(((d=c.ArtistItems)==null?void 0:d.map(h=>h.Id))||[]).some(h=>i.includes(h))})}l===-1&&(l=0);const o=r.splice(l,1)[0];n.push(o)}return n}function Jy(){const{currentIndex:e,addToQueue:t,refreshCurrentTrack:n,isFetchingRecommendations:r,setIsFetchingRecommendations:s,repeat:l}=X(),o=X(x=>x.songs.length),{showQueueRecommendations:a}=Ge(),i=g.useRef([]),c=g.useRef(!1),f=g.useRef(0),d=g.useRef(0),h=g.useRef(0),w=3;g.useEffect(()=>{const x=X.getState().songs;i.current=x.slice(-20)},[o]),g.useEffect(()=>{f.current=0,d.current=0,h.current=0},[e]),g.useEffect(()=>{f.current=0,d.current=0,h.current=0},[a]),g.useEffect(()=>{const x=X.getState().songs,I=x.slice(e+1).filter(v=>v.source==="recommendation").length,k=Date.now()-f.current,p=Date.now()-d.current;if(!!!(a&&l==="off"&&!c.current&&!r&&e>=0&&I<12&&k>1e4&&p>5e3))return I>=12||l==="all",void 0;(async()=>{var S;c.current=!0,s(!0);const v=setTimeout(()=>{c.current=!1,s(!1)},3e4);try{await n();const E=x[e];if(!E)return;const N=[E],C=[e-1,e+1,e+2];for(const j of C)if(j>=0&&j<x.length&&N.length<3){const L=x[j];L&&!N.some(F=>F.Id===L.Id)&&N.push(L)}const P=[];for(const j of N){_.log(`[Recommendations] Generating recommendations for seed: ${j.Name}`);const L=await Ky({currentTrack:j,queue:x,recentQueue:i.current,lastPlayedTrack:null});if(_.log(`[Recommendations] Result for seed ${j.Name}:`,{recommendationsCount:((S=L.recommendations)==null?void 0:S.length)||0,hasGenreMatches:L.hasGenreMatches,triggeredGenreSync:L.triggeredGenreSync,resultType:typeof L,isArray:Array.isArray(L)}),L.triggeredGenreSync){if(h.current+=1,h.current>w){_.warn("[Recommendations] Max retries reached, giving up"),f.current=Date.now();const{setRecommendationsQuality:Z}=Ge.getState();Z("failed");return}const F=15e3*Math.pow(2,h.current-1);_.log(`[Recommendations] Genre sync triggered (attempt ${h.current}/${w}), retry in ${F/1e3}s`),setTimeout(()=>{f.current=0},F);return}L.recommendations&&Array.isArray(L.recommendations)?P.push(L):_.warn(`[Recommendations] Invalid result for seed ${j.Name}:`,L)}const b=P.filter(j=>j.hasGenreMatches);if(_.log(`[Recommendations] ${b.length} out of ${N.length} seeds found genre matches`),b.length===0){const{setRecommendationsQuality:j}=Ge.getState();j("degraded"),_.log("[Recommendations] No genre matches found - falling back to year/artist only")}const Q=x.slice(e+1).filter(j=>j.source==="recommendation").length,q=Math.max(0,12-Q);if(q===0){_.log("[Recommendations] Already have 12 upcoming recommendations, skipping");return}_.log(`[Recommendations] Currently have ${Q} upcoming, need ${q} more to reach 12`);const ge=b.length>0?b:P,D=Math.ceil(q/ge.length),de=[];for(const j of ge){const L=j.recommendations.filter(Z=>{const te=x.some(oe=>oe.Id===Z.Id),ye=de.some(oe=>oe.Id===Z.Id);return!te&&!ye}),F=L.slice(0,D);de.push(...F),_.log(`[Recommendations] Added ${F.length} recommendations from seed (${L.length} available, genreMatch: ${j.hasGenreMatches})`)}const ce=de.slice(0,q),he=Xy(ce);_.log(`[Recommendations] Final ${ce.length} recommendations (distributed across ${N.length} seeds)`),he.length>0?(_.log(`[Recommendations] Adding ${he.length} recommendations (had ${Q}, will have ${Q+he.length})`),_.log("[Recommendations] Recommendations to add:",he.map(j=>j.Name)),f.current=0,d.current=Date.now(),h.current=0,t(he,!1,"recommendation"),_.log("[Recommendations] Successfully added recommendations to queue")):(_.log("[Recommendations] No safe recommendations to add - marking as failed attempt"),f.current=Date.now())}catch(E){_.error("[Recommendations Hook] Failed to get recommendations:",E),c.current=!1,s(!1)}finally{clearTimeout(v),c.current=!1,s(!1)}})()},[o,e,t,n,a,r,s,l]),g.useEffect(()=>{if(l!=="off"){a&&Ge.getState().setShowQueueRecommendations(!1);const x=X.getState().songs;if(x.some((k,p)=>p>e&&k.source==="recommendation")){const k=x.filter((p,m)=>m<=e?!0:p.source==="user");X.setState({songs:k,standardOrder:k.filter(p=>p.source==="user").map(p=>p.Id),shuffleOrder:k.filter(p=>p.source==="user").map(p=>p.Id)})}}},[l,e,o,a])}function Zy(){const{accessToken:e,isAuthenticated:t}=Ue(),n=g.useRef(null),r=g.useRef(null),s=g.useRef(null),l=g.useRef(5e3);g.useEffect(()=>{if(!t||!e)return;const o=$.serverBaseUrl;if(!o)return;const a=()=>{if(n.current&&n.current.readyState<=WebSocket.OPEN)return;const c=Ts.get("deviceId")||"unknown",f=o.startsWith("https")?"wss":"ws",d=o.replace(/^https?:\/\//,"").replace(/\/$/,""),h=`${f}://${d}/socket?api_key=${e}&deviceId=${c}`,w=new WebSocket(h);n.current=w,w.onopen=()=>{l.current=5e3},w.onmessage=x=>{var I,k,p;try{const m=JSON.parse(x.data);if(m.MessageType!=="LibraryChanged")return;const y=m.Data;if(!(((I=y==null?void 0:y.ItemsAdded)==null?void 0:I.length)>0||((k=y==null?void 0:y.ItemsUpdated)==null?void 0:k.length)>0||((p=y==null?void 0:y.ItemsRemoved)==null?void 0:p.length)>0))return;_.log("[useLibraryChanged] Library changed, scheduling incremental sync"),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{ev()},5e3)}catch{}},w.onclose=()=>{i()},w.onerror=()=>{}},i=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{a(),l.current=Math.min(l.current*2,6e4)},l.current)};return a(),()=>{s.current&&clearTimeout(s.current),r.current&&clearTimeout(r.current),n.current&&(n.current.onclose=null,n.current.close(),n.current=null)}},[t,e])}async function ev(){const{state:e}=Ot.getState();if(e!=="idle")return;const{lastSyncCompleted:t}=se.getState();if(t===null)return;const{startSync:n,completeSync:r}=Ot.getState();try{await Ah(),n("auto","New content detected, syncing..."),await $.syncLibrary({scope:"incremental"});const l=(await $.getGenres()||[]).sort((a,i)=>(a.Name||"").localeCompare(i.Name||""));se.getState().setGenres(l),se.getState().setLastSyncCompleted(Date.now());const o=await $.getRecentlyAdded(18);se.getState().setRecentlyAdded(o.Items||[]),r(!0,"Library synced")}catch(s){Ot.getState().state==="syncing"&&r(!1,s instanceof Error?s.message:"Sync failed")}}function tv(){const{isQueueSidebarOpen:e,toggleQueueSidebar:t}=X();return g.useEffect(()=>{const n=r=>{r.key==="Escape"&&e&&t()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]),e?u.jsxs("div",{className:"fixed top-0 right-0 bottom-0 bg-black border-l border-zinc-800 z-30 flex flex-col hidden xl:flex shadow-xl",style:{width:"var(--sidebar-width)",paddingTop:"var(--header-offset, 0px)"},children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-zinc-800",children:u.jsx(vo,{className:"w-5 h-5"})})]}),u.jsx(iu,{contentPaddingBottom:"8rem"})]}):null}const Xc={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function nv({children:e}){const t=tn();Jy(),Zy();const{accentColor:n}=Ge(),{genres:r,songs:s,genreSongs:l}=se(),{state:o,startSync:a,completeSync:i}=Ot(),{isQueueSidebarOpen:c}=X(),f=g.useRef(!1);return g.useEffect(()=>{const d=Xc[n]||Xc.blue;document.documentElement.style.setProperty("--accent-color",d)},[n]),g.useEffect(()=>{const d=o!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",d)},[o]),g.useEffect(()=>{r.length===0&&$.getGenres().catch(d=>{})},[r.length]),g.useEffect(()=>{if(f.current)return;const d=setTimeout(async()=>{const{lastSyncCompleted:h}=se.getState(),{state:w}=Ot.getState();if(h!==null||w!=="idle")return;f.current=!0;const{setProgress:x}=Ot.getState();try{if(await Ah(),a("auto","Syncing library..."),await $.syncLibrary({scope:"full"},x),Ot.getState().state!=="syncing")return;const k=(await $.getGenres()||[]).sort((p,m)=>(p.Name||"").localeCompare(m.Name||""));se.getState().setGenres(k),se.getState().setLastSyncCompleted(Date.now()),i(!0,"Library synced successfully")}catch(I){Ot.getState().state==="syncing"&&i(!1,I instanceof Error?I.message:"Failed to sync library")}},500);return()=>clearTimeout(d)},[a,i]),g.useEffect(()=>{const d=se.getState(),h=s.length+Object.values(l).flat().length;if(h>0&&d.shufflePool.length===0)try{d.refreshShufflePool()}catch{}else h===0&&setTimeout(async()=>{const w=se.getState();if(!(w.songs.length+Object.values(w.genreSongs).flat().length>0))try{const k=(await $.getSongs({limit:1})).TotalRecordCount||1e3,p=[];for(let S=0;S<3;S++){const E=Math.floor(Math.random()*k);p.push(E)}const m=p.map(S=>$.getSongs({limit:1,sortBy:["SortName"],sortOrder:"Ascending",startIndex:S})),v=(await Promise.all(m)).flatMap(S=>S.Items||[]);if(v.length>0){const S=v.map(E=>({Id:E.Id,Name:E.Name,AlbumArtist:E.AlbumArtist,ArtistItems:E.ArtistItems,Album:E.Album,AlbumId:E.AlbumId,IndexNumber:E.IndexNumber,ProductionYear:E.ProductionYear,PremiereDate:E.PremiereDate,RunTimeTicks:E.RunTimeTicks,Genres:E.Genres}));se.setState({songs:S,shufflePool:Xe(S),lastPoolUpdate:Date.now()})}}catch{}},300)},[s.length,l]),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed top-0 right-0 bg-black z-50 pointer-events-none left-0 lg:left-8",style:{height:"env(safe-area-inset-top)",top:o!=="idle"?"28px":"0px"}}),u.jsx(qy,{}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none lg:hidden",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),u.jsx("div",{className:"fixed top-0 left-0 bottom-0 bg-black z-30 pointer-events-none hidden lg:block",style:{width:"4rem"}}),u.jsxs("div",{className:`main-scrollable h-screen bg-black text-white lg:pl-16 transition-[padding] duration-300 ${c?"sidebar-open-padding":""}`,style:{paddingBottom:"calc(6rem + env(safe-area-inset-bottom))",paddingTop:o!=="idle"?"28px":"0",overflowY:"auto",overflowX:"hidden",maxWidth:"100vw",width:"100%",scrollbarGutter:"stable"},children:[u.jsx("div",{className:`w-full mx-auto lg:flex lg:justify-center ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:u.jsx("div",{className:`w-full ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:e})}),u.jsx(Wy,{}),u.jsx(jy,{})]}),u.jsx(tv,{})]})}function rv(){const{pathname:e}=tn();return g.useEffect(()=>{const t=document.querySelector(".main-scrollable");t&&t.scrollTo({top:0,behavior:"auto"})},[e]),null}const sv=g.memo(function({toast:t}){const{removeToast:n}=vt(),r={success:u.jsx(I1,{className:"w-4 h-4"}),error:u.jsx(Lh,{className:"w-4 h-4"}),info:u.jsx(D1,{className:"w-4 h-4"})},s={success:"bg-zinc-900 border border-zinc-700",error:"bg-red-900/90 border border-red-700",info:"bg-zinc-900 border border-zinc-700"};return u.jsxs("div",{className:`${s[t.type]} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px] max-w-[320px] animate-slide-up`,role:"alert",children:[u.jsx("span",{className:"flex-shrink-0",children:r[t.type]}),u.jsx("span",{className:"flex-1 text-sm font-medium",children:t.message}),u.jsx("button",{onClick:()=>n(t.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Dismiss notification",children:u.jsx(vo,{className:"w-4 h-4"})})]})});function Jc(){const{toasts:e}=vt();return ho.createPortal(u.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-[99999] flex flex-col gap-2 items-center pointer-events-none",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.map(t=>u.jsx("div",{className:"pointer-events-auto",children:u.jsx(sv,{toast:t})},t.id))}),document.body)}class lv extends g.Component{constructor(n){super(n);Pt(this,"handleReset",()=>{var n,r;this.setState({hasError:!1,error:null}),(r=(n=this.props).onReset)==null||r.call(n)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){_.error(`[${this.props.componentName||"Component"}] Error:`,n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:u.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center bg-zinc-900/50 rounded-lg border border-zinc-800",children:[u.jsx(Lh,{className:"w-8 h-8 text-red-400 mb-3"}),u.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Something went wrong",this.props.componentName?` in ${this.props.componentName}`:"","."]}),u.jsxs("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)]",children:[u.jsx(Sl,{className:"w-4 h-4"}),"Try again"]})]}):this.props.children}}function ov(){const{serverUrl:e,accessToken:t,userId:n,isAuthenticated:r}=Ue(),s=Ge(o=>o.localServerUrl),l=g.useRef(null);g.useEffect(()=>{if(!r||!e||!t||!n)return;const o=yo()||s;if(!o)return;const a=()=>{Zi(e,o).then(c=>{c!==$.serverBaseUrl&&$.setCredentials(c,t,n)})};l.current&&clearTimeout(l.current),l.current=setTimeout(a,1e3);const i=()=>{document.visibilityState==="visible"&&a()};return document.addEventListener("visibilitychange",i),()=>{l.current&&clearTimeout(l.current),document.removeEventListener("visibilitychange",i)}},[r,e,t,n,s])}const av=g.lazy(()=>Ze(()=>import("./HomePage-CjASDZ0x.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),iv=g.lazy(()=>Ze(()=>import("./ArtistsPage-DbMZiurA.js"),__vite__mapDeps([7,8,5,4,1,2,3,9]))),uv=g.lazy(()=>Ze(()=>import("./AlbumsPage-CLT2-Y9a.js"),__vite__mapDeps([10,8,5,4,1,2,3,9]))),cv=g.lazy(()=>Ze(()=>import("./SongsPage-DFMCuV3X.js"),__vite__mapDeps([11,12,8,5,4,1,2,3,9]))),dv=g.lazy(()=>Ze(()=>import("./GenresPage-BaJ47zyG.js"),__vite__mapDeps([13,14,3]))),fv=g.lazy(()=>Ze(()=>import("./PlaylistsPage-Rc4-mx8s.js"),__vite__mapDeps([15,1,2,3,9]))),Zc=g.lazy(()=>Ze(()=>import("./PlaylistDetailPage-CxpmlRyj.js"),__vite__mapDeps([16,17,18,6,9]))),hv=g.lazy(()=>Ze(()=>import("./SettingsPage-CW3-k1pj.js"),__vite__mapDeps([19,18]))),mv=g.lazy(()=>Ze(()=>import("./ArtistDetailPage-C9EfL-WB.js"),__vite__mapDeps([20,17,18,6,21,9]))),pv=g.lazy(()=>Ze(()=>import("./AlbumDetailPage-C1Bh5rD0.js"),__vite__mapDeps([22,18,6,21]))),gv=g.lazy(()=>Ze(()=>import("./GenreSongsPage-C_imgvOs.js"),__vite__mapDeps([23,17,12,8,5,18,9]))),yv=g.lazy(()=>Ze(()=>import("./StatsPage-BqYT4p93.js"),__vite__mapDeps([24,25,14]))),vv=g.lazy(()=>Ze(()=>import("./SongDetailPage-NuldITyw.js"),__vite__mapDeps([26,18,6,25,2,3])));function xv(){return u.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:u.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-color)] border-t-transparent rounded-full animate-spin"})})}function at(e,t){return u.jsx(lv,{componentName:t,children:e})}function wv(){const{isAuthenticated:e,logout:t}=Ue(),{pageVisibility:n}=Ge();return ov(),g.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?u.jsxs(u.Fragment,{children:[u.jsxs(hg,{children:[u.jsx(rv,{}),u.jsx(nv,{children:u.jsx(g.Suspense,{fallback:u.jsx(xv,{}),children:u.jsxs(lg,{children:[u.jsx(Ke,{path:"/",element:at(u.jsx(av,{}),"Home")}),u.jsx(Ke,{path:"/song/:id",element:at(u.jsx(vv,{}),"Song")}),u.jsx(Ke,{path:"/mood/:moodValue",element:at(u.jsx(Zc,{}),"Mood")}),u.jsx(Ke,{path:"/settings",element:at(u.jsx(hv,{}),"Settings")}),n.artists&&u.jsxs(u.Fragment,{children:[u.jsx(Ke,{path:"/artists",element:at(u.jsx(iv,{}),"Artists")}),u.jsx(Ke,{path:"/artist/:id",element:at(u.jsx(mv,{}),"Artist")})]}),n.albums&&u.jsxs(u.Fragment,{children:[u.jsx(Ke,{path:"/albums",element:at(u.jsx(uv,{}),"Albums")}),u.jsx(Ke,{path:"/album/:id",element:at(u.jsx(pv,{}),"Album")})]}),n.songs&&u.jsx(Ke,{path:"/songs",element:at(u.jsx(cv,{}),"Songs")}),n.genres&&u.jsxs(u.Fragment,{children:[u.jsx(Ke,{path:"/genres",element:at(u.jsx(dv,{}),"Genres")}),u.jsx(Ke,{path:"/genre/:id",element:at(u.jsx(gv,{}),"Genre")})]}),n.playlists&&u.jsxs(u.Fragment,{children:[u.jsx(Ke,{path:"/playlists",element:at(u.jsx(fv,{}),"Playlists")}),u.jsx(Ke,{path:"/playlist/:id",element:at(u.jsx(Zc,{}),"Playlist")})]}),n.stats&&u.jsx(u.Fragment,{children:u.jsx(Ke,{path:"/stats",element:at(u.jsx(yv,{}),"Stats")})}),u.jsx(Ke,{path:"*",element:u.jsx(rg,{to:"/",replace:!0})})]})})})]}),u.jsx(Jc,{})]}):u.jsxs(u.Fragment,{children:[u.jsx(Cy,{}),u.jsx(Jc,{})]})}class Sv extends g.Component{constructor(){super(...arguments);Pt(this,"state",{hasError:!1,error:null,showCopied:!1});Pt(this,"handleCopyError",async()=>{var r,s;const n=`Error: ${(r=this.state.error)==null?void 0:r.message}

Stack: ${((s=this.state.error)==null?void 0:s.stack)||"N/A"}`;try{await navigator.clipboard.writeText(n),this.setState({showCopied:!0}),setTimeout(()=>this.setState({showCopied:!1}),2e3)}catch{}});Pt(this,"handleReload",()=>{window.location.reload()});Pt(this,"handleClearAndReload",()=>{localStorage.clear(),indexedDB.deleteDatabase("tunetuna-storage"),window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){_.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center max-w-md",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:u.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"The app encountered an unexpected error. You can try reloading, or clear data if the issue persists."}),u.jsx("div",{className:"bg-zinc-900 rounded-lg p-3 mb-4 text-left",children:u.jsx("p",{className:"text-red-400 text-sm font-mono break-all",children:((n=this.state.error)==null?void 0:n.message)||"Unknown error"})}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("button",{onClick:this.handleReload,className:"w-full bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-3 px-4 rounded-lg transition-all",children:"Reload App"}),u.jsx("button",{onClick:this.handleClearAndReload,className:"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"}),u.jsx("button",{onClick:this.handleCopyError,className:"w-full text-gray-400 hover:text-white py-2 px-4 text-sm transition-colors",children:this.state.showCopied?" Copied to clipboard":"Copy error details"})]})]})}):this.props.children}}Zo.createRoot(document.getElementById("root")).render(u.jsx(ri.StrictMode,{children:u.jsx(Sv,{children:u.jsx(wv,{})})}));const kv=async()=>{try{const e=await navigator.serviceWorker.getRegistration();e&&(e.waiting&&(_.log("New app version available, activating..."),e.waiting.postMessage({type:"SKIP_WAITING"})),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&_.log("New app version installed and ready")})}))}catch{}};"serviceWorker"in navigator&&kv();export{Sl as $,vt as A,Mh as B,Oy as C,eu as D,ho as E,Tv as F,wl as G,zn as H,Rs as I,Pv as J,Nv as K,rl as L,tu as M,tn as N,bs as O,Kc as P,Cv as Q,Ja as R,Nr as S,Ue as T,Yl as U,Ot as V,Ve as W,vo as X,Rh as Y,d1 as Z,yo as _,X as a,gy as a0,fy as a1,my as a2,Ah as a3,E1 as a4,ri as a5,S1 as a6,$s as b,J as c,Ev as d,$ as e,Fy as f,jv as g,Ge as h,ou as i,u as j,Av as k,_ as l,_v as m,zv as n,Ly as o,Mv as p,zy as q,g as r,Lv as s,Rv as t,se as u,bv as v,Wc as w,Yg as x,W1 as y,ey as z};
