import{b as Ge,r as s,f as te,j as e,D as se,I as We,e as z,C as Ye,u as _,a as Q,i as Ke,d as Ze,h as et,G as Pe,P as Me,L as Te}from"./index-CzUmNj2K.js";import{u as tt,f as st,S as Le}from"./search-WNCQ_fRa.js";import{S as _e}from"./SearchArtistItem-BAcLpa5N.js";import{P as nt}from"./Pagination-DN2e0sVp.js";import{F as Oe}from"./FilterBottomSheet-Rx5t3k63.js";import{A as rt}from"./arrow-up-down-BACrPSD1.js";import{C as De}from"./calendar-CaXzNkE7.js";function lt({album:m,onContextMenu:r,contextMenuItemId:O,showImage:A=!0}){var h,b;const P=Ge(),[M,j]=s.useState(!1),[y,T]=s.useState("mobile"),[D,c]=s.useState(null),[N,u]=s.useState(!1),d=s.useRef(!1),a=O===m.Id,g=i=>{if(d.current){i.preventDefault(),d.current=!1;return}P(`/album/${m.Id}`)},I=i=>{var L,R,$,G;i.preventDefault(),i.stopPropagation(),(R=(L=i.nativeEvent)==null?void 0:L.preventDefault)==null||R.call(L),(G=($=i.nativeEvent)==null?void 0:$.stopImmediatePropagation)==null||G.call($),d.current=!0,r?r(m,"album","desktop",{x:i.clientX,y:i.clientY}):(T("desktop"),c({x:i.clientX,y:i.clientY}),j(!0)),setTimeout(()=>{d.current=!1},300)},x=te({onLongPress:i=>{i.preventDefault(),r?(d.current=!0,r(m,"album","mobile")):(d.current=!0,T("mobile"),c(null),j(!0))}});return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:i=>{if(M||d.current){i.preventDefault(),i.stopPropagation();return}g(i)},onContextMenu:i=>{I(i)},...x,className:`text-left group ${a?"ring-2 ring-blue-500":""}`,children:[e.jsx("div",{className:"aspect-square rounded overflow-hidden mb-2 bg-zinc-900 relative flex items-center justify-center",children:N?e.jsx(se,{className:"w-12 h-12 text-gray-500"}):A?e.jsx(We,{src:z.getAlbumArtUrl(m.Id,474),alt:m.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded",onError:()=>u(!0)}):e.jsx("div",{className:"w-full h-full bg-zinc-900"})}),e.jsx("div",{className:"text-sm font-medium text-white truncate",children:m.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:m.AlbumArtist||((b=(h=m.ArtistItems)==null?void 0:h[0])==null?void 0:b.Name)||"Unknown Artist"})]}),e.jsx(Ye,{item:m,itemType:"album",isOpen:M,onClose:()=>j(!1),mode:y,position:D||void 0})]})}const ze=s.memo(function({album:r,onClick:O,onContextMenu:A,contextMenuItemId:P}){var d,a,g,I;const[M,j]=s.useState(!1),y=s.useRef(!1),T=P===r.Id,D=s.useMemo(()=>z.getAlbumArtUrl(r.Id,474),[r.Id]),c=x=>{if(T||y.current){x.preventDefault(),x.stopPropagation(),y.current=!1;return}O(r.Id)},N=x=>{x.preventDefault(),x.stopPropagation(),y.current=!0,A(r,"album","desktop",{x:x.clientX,y:x.clientY}),setTimeout(()=>{y.current=!1},300)},u=te({onLongPress:x=>{x.preventDefault(),y.current=!0,A(r,"album","mobile")},onClick:c});return e.jsxs("button",{onClick:c,onContextMenu:N,...u,className:"text-left group","aria-label":`Album: ${r.Name} by ${r.AlbumArtist||((a=(d=r.ArtistItems)==null?void 0:d[0])==null?void 0:a.Name)||"Unknown Artist"}`,children:[e.jsx("div",{className:"aspect-square rounded overflow-hidden mb-3 bg-zinc-900 shadow-lg relative flex items-center justify-center",children:M?e.jsx(se,{className:"w-12 h-12 text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:D,alt:r.Name,className:"w-full h-full object-cover",onError:()=>j(!0)}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),e.jsx("div",{className:"text-sm font-semibold text-white truncate mb-1",children:r.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:r.AlbumArtist||((I=(g=r.ArtistItems)==null?void 0:g[0])==null?void 0:I.Name)||"Unknown Artist"})]})}),Re=s.memo(function({song:r,onClick:O,onContextMenu:A,contextMenuItemId:P,showImage:M=!0}){var g,I,x,h;const j=s.useRef(!1),y=P===r.Id,[T,D]=s.useState(!1),c=s.useMemo(()=>z.getAlbumArtUrl(r.AlbumId||r.Id,96),[r.AlbumId,r.Id]),N=b=>{const i=Math.floor(b/1e7),L=Math.floor(i/60),R=i%60;return`${L}:${R.toString().padStart(2,"0")}`},u=b=>{if(y||j.current){b.preventDefault(),b.stopPropagation(),j.current=!1;return}O(r)},d=b=>{b.preventDefault(),b.stopPropagation(),j.current=!0,A(r,"song","desktop",{x:b.clientX,y:b.clientY}),setTimeout(()=>{j.current=!1},300)},a=te({onLongPress:b=>{b.preventDefault(),j.current=!0,A(r,"song","mobile")},onClick:u});return e.jsxs("button",{onClick:u,onContextMenu:d,...a,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${y?"bg-white/10":""}`,"aria-label":`Play ${r.Name} by ${r.AlbumArtist||((I=(g=r.ArtistItems)==null?void 0:g[0])==null?void 0:I.Name)||"Unknown Artist"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center relative flex items-center justify-center",children:T?e.jsx(se,{className:"w-7 h-7 text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:c,alt:r.Name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>D(!0)}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white rounded-sm",style:{borderColor:"rgba(255, 255, 255, 0.03)",borderWidth:"1px"}})]})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:r.Name}),e.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[r.AlbumArtist||((h=(x=r.ArtistItems)==null?void 0:x[0])==null?void 0:h.Name)||"Unknown Artist",r.Album&&` â€¢ ${r.Album}`]})]}),r.RunTimeTicks&&e.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:N(r.RunTimeTicks)})]})}),X=84,$e=45,at=45,Fe=45,it=45;function ft(){const m=_(t=>t.albums),r=_(t=>t.setAlbums),O=_(t=>t.sortPreferences),A=_(t=>t.setSortPreference),P=_(t=>t.setLoading),M=_(t=>t.loading),j=_(t=>t.genres),y=Q(t=>t.playTrack),T=Q(t=>t.playAlbum),D=Q(t=>t.addToQueue),[c,N]=s.useState(""),[u,d]=s.useState(!1),[a,g]=s.useState(null),[I,x]=s.useState(!1),h=s.useRef(null),[b,i]=s.useState(!1),[L,R]=s.useState("mobile"),[$,G]=s.useState(null),[o,ne]=s.useState(null),[He,re]=s.useState(null),[Y,le]=s.useState(0),[ae,ie]=s.useState(0),[Ue,oe]=s.useState($e),q=Ge(),[ce,de]=Ke(),ue=s.useRef(null),me=s.useRef(null),[S,xe]=s.useState([]),[f,J]=s.useState({min:null,max:null}),[he,W]=s.useState(!1),[fe,Be]=s.useState(null),[Ve,pe]=s.useState([]),C=O.albums,H=s.useRef(!0),[Qe,ge]=s.useState(!1),be=s.useRef(C),[ve,je]=s.useState(Fe),F=Q(t=>t.isQueueSidebarOpen);s.useEffect(()=>{const t=ce.get("year");if(t){const n=parseInt(t,10);!isNaN(n)&&n>0&&(J({min:n,max:n}),d(!0),de({},{replace:!0}))}},[ce,de]),s.useEffect(()=>{(async()=>{try{const n=_.getState();if(n.years.length>0)pe(n.years);else{const v=await z.getYears();pe(v)}}catch(n){console.error("Failed to load filter values:",n)}})()},[]);const we=S.length>0||f.min!==null||f.max!==null;s.useEffect(()=>{h.current&&h.current.abort();const t=c.trim().length>0;if(t||we){x(!0),h.current=new AbortController;const n=window.setTimeout(async()=>{var v,p,w,V;if(!((v=h.current)!=null&&v.signal.aborted))try{let E;t?E=await tt(c,450):E=await st(450),(p=h.current)!=null&&p.signal.aborted||g(E)}catch(E){(w=h.current)!=null&&w.signal.aborted||(console.error("Search failed:",E),g(null))}finally{(V=h.current)!=null&&V.signal.aborted||x(!1)}},250);return()=>{window.clearTimeout(n),h.current&&h.current.abort()}}else h.current=null,g(null),x(!1)},[c,we]);const l=s.useMemo(()=>{if(!a)return null;const t=p=>{if(f.min!==null||f.max!==null)return!1;if(S.length>0){const w=p.Genres||[];if(!S.some(E=>w.some(ee=>ee.toLowerCase()===E.toLowerCase())))return!1}return!0},n=p=>{if(S.length>0){const w=p.Genres||[];if(!S.some(E=>w.some(ee=>ee.toLowerCase()===E.toLowerCase())))return!1}if(f.min!==null||f.max!==null){const w=p.ProductionYear;if(!w||w<=0||f.min!==null&&w<f.min||f.max!==null&&w>f.max)return!1}return!0},v=p=>!(f.min!==null||f.max!==null||S.length>0);return{albums:a.albums.filter(n),artists:a.artists.filter(t),playlists:(a.playlists||[]).filter(v),songs:a.songs.filter(n)}},[a,S,f]);s.useEffect(()=>{if(u){const n=window.matchMedia("(hover: hover) and (pointer: fine) and (min-width: 1024px)").matches?me:ue;setTimeout(()=>{var v;if((v=n.current)==null||v.focus(),n.current){const p=n.current.value.length;n.current.setSelectionRange(p,p)}},50)}},[u]),s.useEffect(()=>{if(!u)return;const t=n=>{n.key==="Escape"&&(n.preventDefault(),n.stopPropagation(),U())};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[u]),s.useEffect(()=>()=>{h.current&&h.current.abort()},[]);const ye=t=>{N(t),t.trim().length>0&&!u&&d(!0)},Ne=()=>{N(""),g(null)},U=()=>{d(!1),N(""),g(null),xe([]),J({min:null,max:null})},B=t=>{Be(t),W(!0)},Xe=t=>{xe(t)},qe=t=>{J(t)},Ce=t=>{q(`/artist/${t}`),d(!1),N(""),g(null)},Ie=t=>{q(`/album/${t}`),d(!1),N(""),g(null)},Se=t=>{y(t,[t])},Ae=t=>{t.preventDefault(),t.stopPropagation(),l!=null&&l.songs&&l.songs.length>0&&T(l.songs)},ke=t=>{t.preventDefault(),t.stopPropagation(),l!=null&&l.songs&&l.songs.length>0&&D(l.songs)},Ee=t=>{q(`/playlist/${t}`),d(!1),N(""),g(null)},k=(t,n,v="mobile",p)=>{ne(t),re(n),R(v),G(p||null),i(!0)};s.useEffect(()=>{const t=n=>{};return document.addEventListener("contextmenu",t,!0),()=>{document.removeEventListener("contextmenu",t,!0)}},[]),s.useEffect(()=>{c.trim()||le(0)},[C,c]),s.useEffect(()=>{je(Fe)},[c,u,a==null?void 0:a.songs.length]);const K=s.useCallback(()=>{var p;if(!u||!((p=a==null?void 0:a.songs)!=null&&p.length))return;const t=window.scrollY||document.documentElement.scrollTop,n=window.innerHeight||document.documentElement.clientHeight,v=document.documentElement.scrollHeight;t+n*1.5>=v&&je(w=>Math.min(w+it,a.songs.length))},[u,a==null?void 0:a.songs.length]);s.useEffect(()=>{var t;if(!(!u||!((t=a==null?void 0:a.songs)!=null&&t.length)))return window.addEventListener("scroll",K,{passive:!0}),()=>{window.removeEventListener("scroll",K)}},[K]),s.useEffect(()=>{oe($e)},[Y,m.length]);const Z=s.useCallback(()=>{const t=window.scrollY||document.documentElement.scrollTop,n=window.innerHeight||document.documentElement.clientHeight,v=document.documentElement.scrollHeight;t+n*1.5>=v&&oe(p=>Math.min(p+at,m.length))},[m.length]);s.useEffect(()=>(window.addEventListener("scroll",Z,{passive:!0}),()=>{window.removeEventListener("scroll",Z)}),[Z]),s.useEffect(()=>{c.trim()||(!H.current&&be.current!==C&&ge(!0),be.current=C,Je())},[Y,C,c]),s.useEffect(()=>{H.current&&(H.current=!1)},[]);const Je=async()=>{P("albums",!0);try{const t={limit:X,startIndex:Y*X};C==="RecentlyAdded"?(t.sortBy=["DateCreated"],t.sortOrder="Descending"):C==="Newest"?(t.sortBy=["ProductionYear","SortName"],t.sortOrder=["Descending","Ascending"]):(t.sortBy=["SortName"],t.sortOrder="Ascending");const n=await z.getAlbums(t);r(n.Items),ie(n.TotalRecordCount||0)}catch(t){console.error("Failed to load albums:",t),r([]),ie(0)}finally{P("albums",!1),ge(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pb-20",children:[e.jsx("div",{className:`fixed top-0 left-0 right-0 bg-black z-10 lg:left-16 transition-[left,right] duration-300 ${F?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))"},children:e.jsx("div",{className:"max-w-[768px] mx-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Albums"}),e.jsx("button",{onClick:()=>d(!0),className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors","aria-label":"Search",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),!u&&e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("button",{onClick:()=>{A("albums",C==="RecentlyAdded"?"Alphabetical":C==="Alphabetical"?"Newest":"RecentlyAdded")},className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[C==="RecentlyAdded"?"Recently Added":C==="Newest"?"Newest":"Alphabetically",e.jsx(rt,{className:"w-4 h-4"})]}),M.albums&&!H.current&&e.jsx("div",{className:"flex items-center",children:e.jsx(et,{})})]})]})})}),e.jsx("div",{className:`fixed left-0 right-0 z-10 lg:left-16 transition-[left,right] duration-300 ${F?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 7rem - 8px)",height:"24px",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent)"}}),e.jsx("div",{style:{paddingTop:"calc(env(safe-area-inset-top) + 7rem)"},onContextMenu:t=>{},children:e.jsx("div",{className:`${Qe?"opacity-50 pointer-events-none":""} ${u?"hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:block":""}`,onContextMenu:t=>{},children:m.length===0&&!M.albums?e.jsx("div",{className:"flex items-center justify-center py-16 text-gray-400",children:e.jsx("p",{children:"No albums found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",onContextMenu:t=>{},children:m.map((t,n)=>e.jsx(lt,{album:t,onContextMenu:k,contextMenuItemId:(o==null?void 0:o.Id)||null,showImage:n<Ue},t.Id))})}),e.jsx(nt,{currentPage:Y,totalPages:Math.ceil(ae/X),onPageChange:le,itemsPerPage:X,totalItems:ae})]})})})]}),u&&Ze.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:block fixed inset-0 z-[9998] bg-black/50",onClick:U}),e.jsx("div",{className:`hidden [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:flex fixed top-0 left-16 z-[9999] justify-center pointer-events-none ${F?"":"right-0"}`,style:F?{right:"var(--sidebar-width)"}:void 0,children:e.jsxs("div",{className:"w-[768px] max-h-[80vh] overflow-y-auto bg-zinc-900 rounded-b-xl shadow-2xl pointer-events-auto border-l border-r border-b border-zinc-800",children:[e.jsxs("div",{className:"px-4 pt-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:"Search"}),e.jsx("button",{onClick:U,className:"px-3 py-1.5 text-white text-sm font-medium hover:bg-zinc-800 rounded-lg transition-colors",children:"Cancel"})]}),e.jsx(Le,{ref:me,value:c,onChange:ye,placeholder:"Search for artists, albums, songs...",showClearButton:c.trim().length>0,onClear:Ne})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-3 pb-4",children:[e.jsxs("button",{onClick:()=>B("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${S.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),e.jsxs("button",{onClick:()=>B("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${f.min!==null||f.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]}),e.jsx("div",{className:"px-4 pb-8",children:I?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):l?e.jsxs("div",{className:"space-y-8",children:[l.albums.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:l.albums.map(t=>e.jsx(ze,{album:t,onClick:Ie,onContextMenu:k,contextMenuItemId:(o==null?void 0:o.Id)||null},t.Id))})]}),l.artists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Artists"}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.artists.slice(0,5).map(t=>e.jsx(_e,{artist:t,onClick:Ce,onContextMenu:k,contextMenuItemId:(o==null?void 0:o.Id)||null},t.Id))})]}),l.playlists&&l.playlists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Playlists"}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.playlists.map(t=>e.jsxs("button",{onClick:()=>Ee(t.Id),onContextMenu:n=>{n.preventDefault(),n.stopPropagation(),k(t,"playlist","desktop",{x:n.clientX,y:n.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:e.jsx("img",{src:z.getAlbumArtUrl(t.Id,96),alt:t.Name,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:t.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:t.ChildCount?`${t.ChildCount} tracks`:"Playlist"})]})]},t.Id))})]}),l.songs.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:Ae,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:e.jsx(Me,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:ke,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:e.jsx(Te,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"space-y-0 -mx-4",children:l.songs.map((t,n)=>e.jsx(Re,{song:t,onClick:Se,onContextMenu:k,contextMenuItemId:(o==null?void 0:o.Id)||null,showImage:n<ve},t.Id))})]}),l.artists.length===0&&l.albums.length===0&&(!l.playlists||l.playlists.length===0)&&l.songs.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[e.jsx("div",{className:"text-lg mb-2",children:"No results found"}),e.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400"})})]})}),e.jsxs("div",{className:"fixed inset-0 bg-black z-[9999] overflow-y-auto p-0 m-0 [@media((hover:hover)_and_(pointer:fine)_and_(min-width:1024px))]:hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-50 pointer-events-none",style:{height:"env(safe-area-inset-top)",top:"var(--header-offset, 0px)"}}),e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black z-10 pt-0 pb-0 w-full m-0",style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top))",height:"76px"},children:e.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Le,{ref:ue,value:c,onChange:ye,showClearButton:c.trim().length>0,onClear:Ne})}),e.jsx("button",{onClick:U,className:"px-4 py-2 text-white text-sm font-medium hover:text-zinc-300 transition-colors whitespace-nowrap flex-shrink-0",children:"Cancel"})]})})}),e.jsxs("div",{className:"max-w-[768px] mx-auto w-full",style:{paddingTop:"calc(76px + env(safe-area-inset-top))"},children:[e.jsx("div",{className:"sticky bg-black z-10 pt-3 pb-4",style:{top:"calc(76px + env(safe-area-inset-top))"},children:e.jsxs("div",{className:"flex items-center gap-3 px-4",children:[e.jsxs("button",{onClick:()=>B("genre"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${S.length>0?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by genre",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Genre"})]}),e.jsxs("button",{onClick:()=>B("year"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${f.min!==null||f.max!==null?"bg-[var(--accent-color)] text-white":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Filter by year",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Year"})]})]})}),e.jsx("div",{className:`fixed left-0 right-0 z-[60] lg:left-16 transition-[left,right] duration-300 ${F?"sidebar-open-right-offset":"xl:right-0"}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 76px + 4rem)",height:"24px",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent)"}}),e.jsx("div",{className:"pb-32",style:{paddingTop:"40px"},children:I?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}):l?e.jsxs("div",{className:"space-y-8",children:[l.albums.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Albums"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:l.albums.map(t=>e.jsx(ze,{album:t,onClick:Ie,onContextMenu:k,contextMenuItemId:(o==null?void 0:o.Id)||null},t.Id))})]}),l.artists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Artists"}),e.jsx("div",{className:"space-y-0",children:l.artists.slice(0,5).map(t=>e.jsx(_e,{artist:t,onClick:Ce,onContextMenu:k,contextMenuItemId:(o==null?void 0:o.Id)||null},t.Id))})]}),l.playlists&&l.playlists.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 px-4",children:"Playlists"}),e.jsx("div",{className:"space-y-0",children:l.playlists.map(t=>e.jsxs("button",{onClick:()=>Ee(t.Id),onContextMenu:n=>{n.preventDefault(),n.stopPropagation(),k(t,"playlist","desktop",{x:n.clientX,y:n.clientY})},className:"w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center",children:e.jsx("img",{src:z.getAlbumArtUrl(t.Id,96),alt:t.Name,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate group-hover:text-[var(--accent-color)] transition-colors",children:t.Name}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:t.ChildCount?`${t.ChildCount} tracks`:"Playlist"})]})]},t.Id))})]}),l.songs.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Songs"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:Ae,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Play all songs",children:e.jsx(Me,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:ke,className:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Add all songs to queue",children:e.jsx(Te,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"space-y-0",children:l.songs.map((t,n)=>e.jsx(Re,{song:t,onClick:Se,onContextMenu:k,contextMenuItemId:(o==null?void 0:o.Id)||null,showImage:n<ve},t.Id))})]}),l.artists.length===0&&l.albums.length===0&&(!l.playlists||l.playlists.length===0)&&l.songs.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4",children:[e.jsx("div",{className:"text-lg mb-2",children:"No results found"}),e.jsx("div",{className:"text-sm",children:"Try a different search term"})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 px-4"})})]})]})]}),document.body),fe==="genre"&&e.jsx(Oe,{isOpen:he,onClose:()=>W(!1),filterType:"genre",genres:j,selectedValues:S,onApply:Xe}),fe==="year"&&e.jsx(Oe,{isOpen:he,onClose:()=>W(!1),filterType:"year",availableYears:Ve,yearRange:f,onApplyYear:qe}),e.jsx(Ye,{item:o,itemType:He,isOpen:b,onClose:()=>{i(!1),ne(null),re(null)},zIndex:99999,mode:L,position:$||void 0})]})}export{ft as default};
