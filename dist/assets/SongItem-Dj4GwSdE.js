import{r as a,a as P,h as T,f as D,g as E,j as s,D as O,I as R,C as $}from"./index-BHM1sJpC.js";const L=a.memo(function({song:t,showImage:v=!0,onContextMenu:l,contextMenuItemId:j}){var f,p;const b=P(e=>e.playTrack),c=T(),[m,u]=a.useState(!1),[I,x]=a.useState("mobile"),[g,d]=a.useState(null),r=a.useRef(!1),[M,w]=a.useState(!1),y=j===t.Id,N=a.useMemo(()=>D.getAlbumArtUrl(t.AlbumId||t.Id,96),[t.AlbumId,t.Id]),k=e=>{const n=Math.floor(e/1e7),i=Math.floor(n/60),o=n%60;return`${i}:${o.toString().padStart(2,"0")}`},A=e=>{if(r.current){e.preventDefault(),r.current=!1;return}b(t)},S=e=>{var n,i,o,h;e.preventDefault(),e.stopPropagation(),(i=(n=e.nativeEvent)==null?void 0:n.preventDefault)==null||i.call(n),(h=(o=e.nativeEvent)==null?void 0:o.stopImmediatePropagation)==null||h.call(o),r.current=!0,l?l(t,"song","desktop",{x:e.clientX,y:e.clientY}):(x("desktop"),d({x:e.clientX,y:e.clientY}),u(!0)),setTimeout(()=>{r.current=!1},300)},C=E({onLongPress:e=>{e.preventDefault(),l?(r.current=!0,l(t,"song","mobile")):(r.current=!0,x("mobile"),d(null),u(!0))}});return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:e=>{if(m||r.current){e.preventDefault(),e.stopPropagation();return}A(e)},onContextMenu:S,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${y?"bg-white/10":""}`,...C,children:[s.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:M?s.jsx(O,{className:"w-7 h-7 text-gray-500"}):v?s.jsx(R,{src:N,alt:t.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>w(!0)}):s.jsx("div",{className:"w-full h-full bg-zinc-900"})}),s.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[s.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(c==null?void 0:c.Id)===t.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:t.Name}),s.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[((p=(f=t.ArtistItems)==null?void 0:f[0])==null?void 0:p.Name)||t.AlbumArtist||"Unknown Artist",t.Album&&` â€¢ ${t.Album}`]})]}),t.RunTimeTicks&&s.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:k(t.RunTimeTicks)})]}),s.jsx($,{item:t,itemType:"song",isOpen:m,onClose:()=>u(!1),mode:I,position:g||void 0})]})});export{L as S};
