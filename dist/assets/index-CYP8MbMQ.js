const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-7M7zFux4.js","assets/search-nOvPuA3A.js","assets/tag-Cl7DAqNB.js","assets/piano-C8jGzXQo.js","assets/useSearch-aA9_kEm9.js","assets/chevron-right-DDON67Yh.js","assets/ellipsis-D8gtWu6t.js","assets/ArtistsPage-BHdaZGba.js","assets/Pagination-DTlpEmXp.js","assets/arrow-up-down-CQL7NhOq.js","assets/AlbumsPage-DyRhicTT.js","assets/SongsPage-D7YBBilw.js","assets/SongItem-iU_eGlwo.js","assets/GenresPage-0ypenY0v.js","assets/flame-CyHobXlG.js","assets/PlaylistsPage-CHMRib8B.js","assets/PlaylistDetailPage-gFbjisXD.js","assets/arrow-left-4ghbQHjS.js","assets/SettingsPage-C7P-1yDm.js","assets/ArtistDetailPage-C-liv6eR.js","assets/useScrollLazyLoad-DRxyUFvP.js","assets/chevron-up-CRjQ0I87.js","assets/AlbumDetailPage-CXqit-jw.js","assets/GenreSongsPage-F59OoIOE.js","assets/StatsPage-DdxvPuIb.js","assets/clock-CBLvscjy.js","assets/SongDetailPage-NjkeMlQH.js"])))=>i.map(i=>d[i]);
var gh=Object.defineProperty;var yh=(e,t,n)=>t in e?gh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ft=(e,t,n)=>yh(e,typeof t!="symbol"?t+"":t,n);function vh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function jc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rc={exports:{}},Do={},Ac={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=Symbol.for("react.element"),xh=Symbol.for("react.portal"),wh=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),Ih=Symbol.for("react.provider"),Eh=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),Ph=Symbol.for("react.memo"),Th=Symbol.for("react.lazy"),Vi=Symbol.iterator;function jh(e){return e===null||typeof e!="object"?null:(e=Vi&&e[Vi]||e["@@iterator"],typeof e=="function"?e:null)}var _c={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bc=Object.assign,Lc={};function xr(e,t,n){this.props=e,this.context=t,this.refs=Lc,this.updater=n||_c}xr.prototype.isReactComponent={};xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mc(){}Mc.prototype=xr.prototype;function ba(e,t,n){this.props=e,this.context=t,this.refs=Lc,this.updater=n||_c}var La=ba.prototype=new Mc;La.constructor=ba;bc(La,xr.prototype);La.isPureReactComponent=!0;var Gi=Array.isArray,zc=Object.prototype.hasOwnProperty,Ma={current:null},Uc={key:!0,ref:!0,__self:!0,__source:!0};function Dc(e,t,n){var r,s={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)zc.call(t,r)&&!Uc.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var i=Array(a),u=0;u<a;u++)i[u]=arguments[u+2];s.children=i}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:gs,type:e,key:o,ref:l,props:s,_owner:Ma.current}}function Rh(e,t){return{$$typeof:gs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function za(e){return typeof e=="object"&&e!==null&&e.$$typeof===gs}function Ah(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qi=/\/+/g;function sl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ah(""+e.key):t.toString(36)}function Hs(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case gs:case xh:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+sl(l,0):r,Gi(s)?(n="",e!=null&&(n=e.replace(Qi,"$&/")+"/"),Hs(s,t,n,"",function(u){return u})):s!=null&&(za(s)&&(s=Rh(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Qi,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",Gi(e))for(var a=0;a<e.length;a++){o=e[a];var i=r+sl(o,a);l+=Hs(o,t,n,i,s)}else if(i=jh(e),typeof i=="function")for(e=i.call(e),a=0;!(o=e.next()).done;)o=o.value,i=r+sl(o,a++),l+=Hs(o,t,n,i,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Cs(e,t,n){if(e==null)return e;var r=[],s=0;return Hs(e,r,"","",function(o){return t.call(n,o,s++)}),r}function _h(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ye={current:null},Ws={transition:null},bh={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Ws,ReactCurrentOwner:Ma};function $c(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:Cs,forEach:function(e,t,n){Cs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cs(e,function(){t++}),t},toArray:function(e){return Cs(e,function(t){return t})||[]},only:function(e){if(!za(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=xr;J.Fragment=wh;J.Profiler=kh;J.PureComponent=ba;J.StrictMode=Sh;J.Suspense=Ch;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bh;J.act=$c;J.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=bc({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=Ma.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(i in t)zc.call(t,i)&&!Uc.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&a!==void 0?a[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){a=Array(i);for(var u=0;u<i;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:gs,type:e.type,key:s,ref:o,props:r,_owner:l}};J.createContext=function(e){return e={$$typeof:Eh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ih,_context:e},e.Consumer=e};J.createElement=Dc;J.createFactory=function(e){var t=Dc.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Nh,render:e}};J.isValidElement=za;J.lazy=function(e){return{$$typeof:Th,_payload:{_status:-1,_result:e},_init:_h}};J.memo=function(e,t){return{$$typeof:Ph,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=Ws.transition;Ws.transition={};try{e()}finally{Ws.transition=t}};J.unstable_act=$c;J.useCallback=function(e,t){return Ye.current.useCallback(e,t)};J.useContext=function(e){return Ye.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return Ye.current.useDeferredValue(e)};J.useEffect=function(e,t){return Ye.current.useEffect(e,t)};J.useId=function(){return Ye.current.useId()};J.useImperativeHandle=function(e,t,n){return Ye.current.useImperativeHandle(e,t,n)};J.useInsertionEffect=function(e,t){return Ye.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Ye.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Ye.current.useMemo(e,t)};J.useReducer=function(e,t,n){return Ye.current.useReducer(e,t,n)};J.useRef=function(e){return Ye.current.useRef(e)};J.useState=function(e){return Ye.current.useState(e)};J.useSyncExternalStore=function(e,t,n){return Ye.current.useSyncExternalStore(e,t,n)};J.useTransition=function(){return Ye.current.useTransition()};J.version="18.3.1";Ac.exports=J;var y=Ac.exports;const Ua=jc(y),Lh=vh({__proto__:null,default:Ua},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh=y,zh=Symbol.for("react.element"),Uh=Symbol.for("react.fragment"),Dh=Object.prototype.hasOwnProperty,$h=Mh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oh={key:!0,ref:!0,__self:!0,__source:!0};function Oc(e,t,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Dh.call(t,r)&&!Oh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:zh,type:e,key:o,ref:l,props:s,_owner:$h.current}}Do.Fragment=Uh;Do.jsx=Oc;Do.jsxs=Oc;Rc.exports=Do;var c=Rc.exports,Ml={},Fc={exports:{}},it={},Bc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,j){var M=C.length;C.push(j);e:for(;0<M;){var Y=M-1>>>1,K=C[Y];if(0<s(K,j))C[Y]=j,C[M]=K,M=Y;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var j=C[0],M=C.pop();if(M!==j){C[0]=M;e:for(var Y=0,K=C.length,oe=K>>>1;Y<oe;){var te=2*(Y+1)-1,O=C[te],F=te+1,le=C[F];if(0>s(O,M))F<K&&0>s(le,O)?(C[Y]=le,C[F]=M,Y=F):(C[Y]=O,C[te]=M,Y=te);else if(F<K&&0>s(le,M))C[Y]=le,C[F]=M,Y=F;else break e}}return j}function s(C,j){var M=C.sortIndex-j.sortIndex;return M!==0?M:C.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var i=[],u=[],f=1,d=null,h=3,x=!1,v=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(C){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=C)r(u),j.sortIndex=j.expirationTime,t(i,j);else break;j=n(u)}}function w(C){if(S=!1,g(C),!v)if(n(i)!==null)v=!0,B(k);else{var j=n(u);j!==null&&b(w,j.startTime-C)}}function k(C,j){v=!1,S&&(S=!1,p(P),P=-1),x=!0;var M=h;try{for(g(j),d=n(i);d!==null&&(!(d.expirationTime>j)||C&&!Q());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var K=Y(d.expirationTime<=j);j=e.unstable_now(),typeof K=="function"?d.callback=K:d===n(i)&&r(i),g(j)}else r(i);d=n(i)}if(d!==null)var oe=!0;else{var te=n(u);te!==null&&b(w,te.startTime-j),oe=!1}return oe}finally{d=null,h=M,x=!1}}var N=!1,I=null,P=-1,T=5,A=-1;function Q(){return!(e.unstable_now()-A<T)}function Z(){if(I!==null){var C=e.unstable_now();A=C;var j=!0;try{j=I(!0,C)}finally{j?we():(N=!1,I=null)}}else N=!1}var we;if(typeof m=="function")we=function(){m(Z)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,he=D.port2;D.port1.onmessage=Z,we=function(){he.postMessage(null)}}else we=function(){E(Z,0)};function B(C){I=C,N||(N=!0,we())}function b(C,j){P=E(function(){C(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,B(k))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var M=h;h=j;try{return C()}finally{h=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,j){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var M=h;h=C;try{return j()}finally{h=M}},e.unstable_scheduleCallback=function(C,j,M){var Y=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Y+M:Y):M=Y,C){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=M+K,C={id:f++,callback:j,priorityLevel:C,startTime:M,expirationTime:K,sortIndex:-1},M>Y?(C.sortIndex=M,t(u,C),n(i)===null&&C===n(u)&&(S?(p(P),P=-1):S=!0,b(w,M-Y))):(C.sortIndex=K,t(i,C),v||x||(v=!0,B(k))),C},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(C){var j=h;return function(){var M=h;h=j;try{return C.apply(this,arguments)}finally{h=M}}}})(Vc);Bc.exports=Vc;var Fh=Bc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh=y,at=Fh;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gc=new Set,Yr={};function Fn(e,t){dr(e,t),dr(e+"Capture",t)}function dr(e,t){for(Yr[e]=t,e=0;e<t.length;e++)Gc.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zl=Object.prototype.hasOwnProperty,Vh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hi={},Wi={};function Gh(e){return zl.call(Wi,e)?!0:zl.call(Hi,e)?!1:Vh.test(e)?Wi[e]=!0:(Hi[e]=!0,!1)}function Qh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hh(e,t,n,r){if(t===null||typeof t>"u"||Qh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,n,r,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Me[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Me[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Me[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Me[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Me[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Me[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Me[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Me[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Me[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Da=/[\-:]([a-z])/g;function $a(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Da,$a);Me[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Da,$a);Me[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Da,$a);Me[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Me[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Me.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Me[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oa(e,t,n,r){var s=Me.hasOwnProperty(t)?Me[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hh(t,n,s,r)&&(n=null),r||s===null?Gh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var qt=Bh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ps=Symbol.for("react.element"),Hn=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),Fa=Symbol.for("react.strict_mode"),Ul=Symbol.for("react.profiler"),Qc=Symbol.for("react.provider"),Hc=Symbol.for("react.context"),Ba=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),$l=Symbol.for("react.suspense_list"),Va=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),Wc=Symbol.for("react.offscreen"),Yi=Symbol.iterator;function Nr(e){return e===null||typeof e!="object"?null:(e=Yi&&e[Yi]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,ol;function br(e){if(ol===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ol=t&&t[1]||""}return`
`+ol+e}var ll=!1;function al(e,t){if(!e||ll)return"";ll=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,a=o.length-1;1<=l&&0<=a&&s[l]!==o[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==o[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==o[a]){var i=`
`+s[l].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=l&&0<=a);break}}}finally{ll=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?br(e):""}function Wh(e){switch(e.tag){case 5:return br(e.type);case 16:return br("Lazy");case 13:return br("Suspense");case 19:return br("SuspenseList");case 0:case 2:case 15:return e=al(e.type,!1),e;case 11:return e=al(e.type.render,!1),e;case 1:return e=al(e.type,!0),e;default:return""}}function Ol(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wn:return"Fragment";case Hn:return"Portal";case Ul:return"Profiler";case Fa:return"StrictMode";case Dl:return"Suspense";case $l:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hc:return(e.displayName||"Context")+".Consumer";case Qc:return(e._context.displayName||"Context")+".Provider";case Ba:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Va:return t=e.displayName||null,t!==null?t:Ol(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return Ol(e(t))}catch{}}return null}function Yh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ol(t);case 8:return t===Fa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qh(e){var t=Yc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ts(e){e._valueTracker||(e._valueTracker=qh(e))}function qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Yc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ao(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fl(e,t){var n=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qi(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kc(e,t){t=t.checked,t!=null&&Oa(e,"checked",t,!1)}function Bl(e,t){Kc(e,t);var n=vn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Vl(e,t.type,vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ki(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Vl(e,t,n){(t!=="number"||ao(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Lr=Array.isArray;function sr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Gl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xi(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(Lr(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vn(n)}}function Xc(e,t){var n=vn(t.value),r=vn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ji(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ql(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var js,Zc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=js.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kh=["Webkit","ms","Moz","O"];Object.keys(Dr).forEach(function(e){Kh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dr[t]=Dr[e]})});function ed(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Dr.hasOwnProperty(e)&&Dr[e]?(""+t).trim():t+"px"}function td(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ed(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Xh=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(e,t){if(t){if(Xh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Wl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yl=null;function Ga(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ql=null,or=null,lr=null;function Zi(e){if(e=xs(e)){if(typeof ql!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Vo(t),ql(e.stateNode,e.type,t))}}function nd(e){or?lr?lr.push(e):lr=[e]:or=e}function rd(){if(or){var e=or,t=lr;if(lr=or=null,Zi(e),t)for(e=0;e<t.length;e++)Zi(t[e])}}function sd(e,t){return e(t)}function od(){}var il=!1;function ld(e,t,n){if(il)return e(t,n);il=!0;try{return sd(e,t,n)}finally{il=!1,(or!==null||lr!==null)&&(od(),rd())}}function Kr(e,t){var n=e.stateNode;if(n===null)return null;var r=Vo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var Kl=!1;if(Qt)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){Kl=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{Kl=!1}function Jh(e,t,n,r,s,o,l,a,i){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var $r=!1,io=null,uo=!1,Xl=null,Zh={onError:function(e){$r=!0,io=e}};function em(e,t,n,r,s,o,l,a,i){$r=!1,io=null,Jh.apply(Zh,arguments)}function tm(e,t,n,r,s,o,l,a,i){if(em.apply(this,arguments),$r){if($r){var u=io;$r=!1,io=null}else throw Error(R(198));uo||(uo=!0,Xl=u)}}function Bn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eu(e){if(Bn(e)!==e)throw Error(R(188))}function nm(e){var t=e.alternate;if(!t){if(t=Bn(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return eu(s),e;if(o===r)return eu(s),t;o=o.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,r=o;break}if(a===r){l=!0,r=s,n=o;break}a=a.sibling}if(!l){for(a=o.child;a;){if(a===n){l=!0,n=o,r=s;break}if(a===r){l=!0,r=o,n=s;break}a=a.sibling}if(!l)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function id(e){return e=nm(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var cd=at.unstable_scheduleCallback,tu=at.unstable_cancelCallback,rm=at.unstable_shouldYield,sm=at.unstable_requestPaint,Ie=at.unstable_now,om=at.unstable_getCurrentPriorityLevel,Qa=at.unstable_ImmediatePriority,dd=at.unstable_UserBlockingPriority,co=at.unstable_NormalPriority,lm=at.unstable_LowPriority,fd=at.unstable_IdlePriority,$o=null,Lt=null;function am(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot($o,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:cm,im=Math.log,um=Math.LN2;function cm(e){return e>>>=0,e===0?32:31-(im(e)/um|0)|0}var Rs=64,As=4194304;function Mr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?r=Mr(a):(o&=l,o!==0&&(r=Mr(o)))}else l=n&~s,l!==0?r=Mr(l):o!==0&&(r=Mr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Et(t),s=1<<n,r|=e[n],t&=~s;return r}function dm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Et(o),a=1<<l,i=s[l];i===-1?(!(a&n)||a&r)&&(s[l]=dm(a,t)):i<=t&&(e.expiredLanes|=a),o&=~a}}function Jl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hd(){var e=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),e}function ul(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ys(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=n}function hm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Et(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Ha(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Et(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ae=0;function md(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pd,Wa,gd,yd,vd,Zl=!1,_s=[],an=null,un=null,cn=null,Xr=new Map,Jr=new Map,nn=[],mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nu(e,t){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":Xr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(t.pointerId)}}function Pr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=xs(t),t!==null&&Wa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function pm(e,t,n,r,s){switch(t){case"focusin":return an=Pr(an,e,t,n,r,s),!0;case"dragenter":return un=Pr(un,e,t,n,r,s),!0;case"mouseover":return cn=Pr(cn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Xr.set(o,Pr(Xr.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Jr.set(o,Pr(Jr.get(o)||null,e,t,n,r,s)),!0}return!1}function xd(e){var t=An(e.target);if(t!==null){var n=Bn(t);if(n!==null){if(t=n.tag,t===13){if(t=ad(n),t!==null){e.blockedOn=t,vd(e.priority,function(){gd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ys(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ea(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Yl=r,n.target.dispatchEvent(r),Yl=null}else return t=xs(n),t!==null&&Wa(t),e.blockedOn=n,!1;t.shift()}return!0}function ru(e,t,n){Ys(e)&&n.delete(t)}function gm(){Zl=!1,an!==null&&Ys(an)&&(an=null),un!==null&&Ys(un)&&(un=null),cn!==null&&Ys(cn)&&(cn=null),Xr.forEach(ru),Jr.forEach(ru)}function Tr(e,t){e.blockedOn===t&&(e.blockedOn=null,Zl||(Zl=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,gm)))}function Zr(e){function t(s){return Tr(s,e)}if(0<_s.length){Tr(_s[0],e);for(var n=1;n<_s.length;n++){var r=_s[n];r.blockedOn===e&&(r.blockedOn=null)}}for(an!==null&&Tr(an,e),un!==null&&Tr(un,e),cn!==null&&Tr(cn,e),Xr.forEach(t),Jr.forEach(t),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)xd(n),n.blockedOn===null&&nn.shift()}var ar=qt.ReactCurrentBatchConfig,ho=!0;function ym(e,t,n,r){var s=ae,o=ar.transition;ar.transition=null;try{ae=1,Ya(e,t,n,r)}finally{ae=s,ar.transition=o}}function vm(e,t,n,r){var s=ae,o=ar.transition;ar.transition=null;try{ae=4,Ya(e,t,n,r)}finally{ae=s,ar.transition=o}}function Ya(e,t,n,r){if(ho){var s=ea(e,t,n,r);if(s===null)xl(e,t,r,mo,n),nu(e,r);else if(pm(s,e,t,n,r))r.stopPropagation();else if(nu(e,r),t&4&&-1<mm.indexOf(e)){for(;s!==null;){var o=xs(s);if(o!==null&&pd(o),o=ea(e,t,n,r),o===null&&xl(e,t,r,mo,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else xl(e,t,r,null,n)}}var mo=null;function ea(e,t,n,r){if(mo=null,e=Ga(r),e=An(e),e!==null)if(t=Bn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mo=e,null}function wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(om()){case Qa:return 1;case dd:return 4;case co:case lm:return 16;case fd:return 536870912;default:return 16}default:return 16}}var sn=null,qa=null,qs=null;function Sd(){if(qs)return qs;var e,t=qa,n=t.length,r,s="value"in sn?sn.value:sn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[o-r];r++);return qs=s.slice(e,1<r?1-r:void 0)}function Ks(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bs(){return!0}function su(){return!1}function ut(e){function t(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bs:su,this.isPropagationStopped=su,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),t}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=ut(wr),vs=ve({},wr,{view:0,detail:0}),xm=ut(vs),cl,dl,jr,Oo=ve({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(cl=e.screenX-jr.screenX,dl=e.screenY-jr.screenY):dl=cl=0,jr=e),cl)},movementY:function(e){return"movementY"in e?e.movementY:dl}}),ou=ut(Oo),wm=ve({},Oo,{dataTransfer:0}),Sm=ut(wm),km=ve({},vs,{relatedTarget:0}),fl=ut(km),Im=ve({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Em=ut(Im),Nm=ve({},wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cm=ut(Nm),Pm=ve({},wr,{data:0}),lu=ut(Pm),Tm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Am(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rm[e])?!!t[e]:!1}function Xa(){return Am}var _m=ve({},vs,{key:function(e){if(e.key){var t=Tm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ks(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(e){return e.type==="keypress"?Ks(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ks(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bm=ut(_m),Lm=ve({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=ut(Lm),Mm=ve({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),zm=ut(Mm),Um=ve({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dm=ut(Um),$m=ve({},Oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Om=ut($m),Fm=[9,13,27,32],Ja=Qt&&"CompositionEvent"in window,Or=null;Qt&&"documentMode"in document&&(Or=document.documentMode);var Bm=Qt&&"TextEvent"in window&&!Or,kd=Qt&&(!Ja||Or&&8<Or&&11>=Or),iu=" ",uu=!1;function Id(e,t){switch(e){case"keyup":return Fm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Vm(e,t){switch(e){case"compositionend":return Ed(t);case"keypress":return t.which!==32?null:(uu=!0,iu);case"textInput":return e=t.data,e===iu&&uu?null:e;default:return null}}function Gm(e,t){if(Yn)return e==="compositionend"||!Ja&&Id(e,t)?(e=Sd(),qs=qa=sn=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kd&&t.locale!=="ko"?null:t.data;default:return null}}var Qm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qm[e.type]:t==="textarea"}function Nd(e,t,n,r){nd(r),t=po(t,"onChange"),0<t.length&&(n=new Ka("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fr=null,es=null;function Hm(e){zd(e,0)}function Fo(e){var t=Xn(e);if(qc(t))return e}function Wm(e,t){if(e==="change")return t}var Cd=!1;if(Qt){var hl;if(Qt){var ml="oninput"in document;if(!ml){var du=document.createElement("div");du.setAttribute("oninput","return;"),ml=typeof du.oninput=="function"}hl=ml}else hl=!1;Cd=hl&&(!document.documentMode||9<document.documentMode)}function fu(){Fr&&(Fr.detachEvent("onpropertychange",Pd),es=Fr=null)}function Pd(e){if(e.propertyName==="value"&&Fo(es)){var t=[];Nd(t,es,e,Ga(e)),ld(Hm,t)}}function Ym(e,t,n){e==="focusin"?(fu(),Fr=t,es=n,Fr.attachEvent("onpropertychange",Pd)):e==="focusout"&&fu()}function qm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fo(es)}function Km(e,t){if(e==="click")return Fo(t)}function Xm(e,t){if(e==="input"||e==="change")return Fo(t)}function Jm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Jm;function ts(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zl.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mu(e,t){var n=hu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hu(n)}}function Td(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Td(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jd(){for(var e=window,t=ao();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ao(e.document)}return t}function Za(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zm(e){var t=jd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Td(n.ownerDocument.documentElement,n)){if(r!==null&&Za(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=mu(n,o);var l=mu(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ep=Qt&&"documentMode"in document&&11>=document.documentMode,qn=null,ta=null,Br=null,na=!1;function pu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;na||qn==null||qn!==ao(r)||(r=qn,"selectionStart"in r&&Za(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Br&&ts(Br,r)||(Br=r,r=po(ta,"onSelect"),0<r.length&&(t=new Ka("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qn)))}function Ls(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kn={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionend:Ls("Transition","TransitionEnd")},pl={},Rd={};Qt&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Bo(e){if(pl[e])return pl[e];if(!Kn[e])return e;var t=Kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rd)return pl[e]=t[n];return e}var Ad=Bo("animationend"),_d=Bo("animationiteration"),bd=Bo("animationstart"),Ld=Bo("transitionend"),Md=new Map,gu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){Md.set(e,t),Fn(t,[e])}for(var gl=0;gl<gu.length;gl++){var yl=gu[gl],tp=yl.toLowerCase(),np=yl[0].toUpperCase()+yl.slice(1);wn(tp,"on"+np)}wn(Ad,"onAnimationEnd");wn(_d,"onAnimationIteration");wn(bd,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(Ld,"onTransitionEnd");dr("onMouseEnter",["mouseout","mouseover"]);dr("onMouseLeave",["mouseout","mouseover"]);dr("onPointerEnter",["pointerout","pointerover"]);dr("onPointerLeave",["pointerout","pointerover"]);Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function yu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tm(r,t,void 0,e),e.currentTarget=null}function zd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],i=a.instance,u=a.currentTarget;if(a=a.listener,i!==o&&s.isPropagationStopped())break e;yu(s,a,u),o=i}else for(l=0;l<r.length;l++){if(a=r[l],i=a.instance,u=a.currentTarget,a=a.listener,i!==o&&s.isPropagationStopped())break e;yu(s,a,u),o=i}}}if(uo)throw e=Xl,uo=!1,Xl=null,e}function de(e,t){var n=t[aa];n===void 0&&(n=t[aa]=new Set);var r=e+"__bubble";n.has(r)||(Ud(t,e,2,!1),n.add(r))}function vl(e,t,n){var r=0;t&&(r|=4),Ud(n,e,r,t)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function ns(e){if(!e[Ms]){e[Ms]=!0,Gc.forEach(function(n){n!=="selectionchange"&&(rp.has(n)||vl(n,!1,e),vl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ms]||(t[Ms]=!0,vl("selectionchange",!1,t))}}function Ud(e,t,n,r){switch(wd(t)){case 1:var s=ym;break;case 4:s=vm;break;default:s=Ya}n=s.bind(null,t,n,e),s=void 0,!Kl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function xl(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var i=l.tag;if((i===3||i===4)&&(i=l.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;l=l.return}for(;a!==null;){if(l=An(a),l===null)return;if(i=l.tag,i===5||i===6){r=o=l;continue e}a=a.parentNode}}r=r.return}ld(function(){var u=o,f=Ga(n),d=[];e:{var h=Md.get(e);if(h!==void 0){var x=Ka,v=e;switch(e){case"keypress":if(Ks(n)===0)break e;case"keydown":case"keyup":x=bm;break;case"focusin":v="focus",x=fl;break;case"focusout":v="blur",x=fl;break;case"beforeblur":case"afterblur":x=fl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=zm;break;case Ad:case _d:case bd:x=Em;break;case Ld:x=Dm;break;case"scroll":x=xm;break;case"wheel":x=Om;break;case"copy":case"cut":case"paste":x=Cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=au}var S=(t&4)!==0,E=!S&&e==="scroll",p=S?h!==null?h+"Capture":null:h;S=[];for(var m=u,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=Kr(m,p),w!=null&&S.push(rs(m,w,g)))),E)break;m=m.return}0<S.length&&(h=new x(h,v,null,n,f),d.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==Yl&&(v=n.relatedTarget||n.fromElement)&&(An(v)||v[Ht]))break e;if((x||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=u,v=v?An(v):null,v!==null&&(E=Bn(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=u),x!==v)){if(S=ou,w="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(S=au,w="onPointerLeave",p="onPointerEnter",m="pointer"),E=x==null?h:Xn(x),g=v==null?h:Xn(v),h=new S(w,m+"leave",x,n,f),h.target=E,h.relatedTarget=g,w=null,An(f)===u&&(S=new S(p,m+"enter",v,n,f),S.target=g,S.relatedTarget=E,w=S),E=w,x&&v)t:{for(S=x,p=v,m=0,g=S;g;g=Qn(g))m++;for(g=0,w=p;w;w=Qn(w))g++;for(;0<m-g;)S=Qn(S),m--;for(;0<g-m;)p=Qn(p),g--;for(;m--;){if(S===p||p!==null&&S===p.alternate)break t;S=Qn(S),p=Qn(p)}S=null}else S=null;x!==null&&vu(d,h,x,S,!1),v!==null&&E!==null&&vu(d,E,v,S,!0)}}e:{if(h=u?Xn(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var k=Wm;else if(cu(h))if(Cd)k=Xm;else{k=qm;var N=Ym}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Km);if(k&&(k=k(e,u))){Nd(d,k,n,f);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Vl(h,"number",h.value)}switch(N=u?Xn(u):window,e){case"focusin":(cu(N)||N.contentEditable==="true")&&(qn=N,ta=u,Br=null);break;case"focusout":Br=ta=qn=null;break;case"mousedown":na=!0;break;case"contextmenu":case"mouseup":case"dragend":na=!1,pu(d,n,f);break;case"selectionchange":if(ep)break;case"keydown":case"keyup":pu(d,n,f)}var I;if(Ja)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Yn?Id(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(kd&&n.locale!=="ko"&&(Yn||P!=="onCompositionStart"?P==="onCompositionEnd"&&Yn&&(I=Sd()):(sn=f,qa="value"in sn?sn.value:sn.textContent,Yn=!0)),N=po(u,P),0<N.length&&(P=new lu(P,e,null,n,f),d.push({event:P,listeners:N}),I?P.data=I:(I=Ed(n),I!==null&&(P.data=I)))),(I=Bm?Vm(e,n):Gm(e,n))&&(u=po(u,"onBeforeInput"),0<u.length&&(f=new lu("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=I))}zd(d,t)})}function rs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function po(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Kr(e,n),o!=null&&r.unshift(rs(e,o,s)),o=Kr(e,t),o!=null&&r.push(rs(e,o,s))),e=e.return}return r}function Qn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vu(e,t,n,r,s){for(var o=t._reactName,l=[];n!==null&&n!==r;){var a=n,i=a.alternate,u=a.stateNode;if(i!==null&&i===r)break;a.tag===5&&u!==null&&(a=u,s?(i=Kr(n,o),i!=null&&l.unshift(rs(n,i,a))):s||(i=Kr(n,o),i!=null&&l.push(rs(n,i,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var sp=/\r\n?/g,op=/\u0000|\uFFFD/g;function xu(e){return(typeof e=="string"?e:""+e).replace(sp,`
`).replace(op,"")}function zs(e,t,n){if(t=xu(t),xu(e)!==t&&n)throw Error(R(425))}function go(){}var ra=null,sa=null;function oa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var la=typeof setTimeout=="function"?setTimeout:void 0,lp=typeof clearTimeout=="function"?clearTimeout:void 0,wu=typeof Promise=="function"?Promise:void 0,ap=typeof queueMicrotask=="function"?queueMicrotask:typeof wu<"u"?function(e){return wu.resolve(null).then(e).catch(ip)}:la;function ip(e){setTimeout(function(){throw e})}function wl(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Zr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zr(t)}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Su(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sr=Math.random().toString(36).slice(2),_t="__reactFiber$"+Sr,ss="__reactProps$"+Sr,Ht="__reactContainer$"+Sr,aa="__reactEvents$"+Sr,up="__reactListeners$"+Sr,cp="__reactHandles$"+Sr;function An(e){var t=e[_t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[_t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Su(e);e!==null;){if(n=e[_t])return n;e=Su(e)}return t}e=n,n=e.parentNode}return null}function xs(e){return e=e[_t]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Vo(e){return e[ss]||null}var ia=[],Jn=-1;function Sn(e){return{current:e}}function fe(e){0>Jn||(e.current=ia[Jn],ia[Jn]=null,Jn--)}function ie(e,t){Jn++,ia[Jn]=e.current,e.current=t}var xn={},Be=Sn(xn),tt=Sn(!1),zn=xn;function fr(e,t){var n=e.type.contextTypes;if(!n)return xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nt(e){return e=e.childContextTypes,e!=null}function yo(){fe(tt),fe(Be)}function ku(e,t,n){if(Be.current!==xn)throw Error(R(168));ie(Be,t),ie(tt,n)}function Dd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,Yh(e)||"Unknown",s));return ve({},n,r)}function vo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xn,zn=Be.current,ie(Be,e),ie(tt,tt.current),!0}function Iu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=Dd(e,t,zn),r.__reactInternalMemoizedMergedChildContext=e,fe(tt),fe(Be),ie(Be,e)):fe(tt),ie(tt,n)}var $t=null,Go=!1,Sl=!1;function $d(e){$t===null?$t=[e]:$t.push(e)}function dp(e){Go=!0,$d(e)}function kn(){if(!Sl&&$t!==null){Sl=!0;var e=0,t=ae;try{var n=$t;for(ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}$t=null,Go=!1}catch(s){throw $t!==null&&($t=$t.slice(e+1)),cd(Qa,kn),s}finally{ae=t,Sl=!1}}return null}var Zn=[],er=0,xo=null,wo=0,ht=[],mt=0,Un=null,Ot=1,Ft="";function jn(e,t){Zn[er++]=wo,Zn[er++]=xo,xo=e,wo=t}function Od(e,t,n){ht[mt++]=Ot,ht[mt++]=Ft,ht[mt++]=Un,Un=e;var r=Ot;e=Ft;var s=32-Et(r)-1;r&=~(1<<s),n+=1;var o=32-Et(t)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Ot=1<<32-Et(t)+s|n<<s|r,Ft=o+e}else Ot=1<<o|n<<s|r,Ft=e}function ei(e){e.return!==null&&(jn(e,1),Od(e,1,0))}function ti(e){for(;e===xo;)xo=Zn[--er],Zn[er]=null,wo=Zn[--er],Zn[er]=null;for(;e===Un;)Un=ht[--mt],ht[mt]=null,Ft=ht[--mt],ht[mt]=null,Ot=ht[--mt],ht[mt]=null}var lt=null,ot=null,pe=!1,kt=null;function Fd(e,t){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Eu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lt=e,ot=dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lt=e,ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Un!==null?{id:Ot,overflow:Ft}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,lt=e,ot=null,!0):!1;default:return!1}}function ua(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ca(e){if(pe){var t=ot;if(t){var n=t;if(!Eu(e,t)){if(ua(e))throw Error(R(418));t=dn(n.nextSibling);var r=lt;t&&Eu(e,t)?Fd(r,n):(e.flags=e.flags&-4097|2,pe=!1,lt=e)}}else{if(ua(e))throw Error(R(418));e.flags=e.flags&-4097|2,pe=!1,lt=e}}}function Nu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lt=e}function Us(e){if(e!==lt)return!1;if(!pe)return Nu(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oa(e.type,e.memoizedProps)),t&&(t=ot)){if(ua(e))throw Bd(),Error(R(418));for(;t;)Fd(e,t),t=dn(t.nextSibling)}if(Nu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ot=dn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ot=null}}else ot=lt?dn(e.stateNode.nextSibling):null;return!0}function Bd(){for(var e=ot;e;)e=dn(e.nextSibling)}function hr(){ot=lt=null,pe=!1}function ni(e){kt===null?kt=[e]:kt.push(e)}var fp=qt.ReactCurrentBatchConfig;function Rr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var a=s.refs;l===null?delete a[o]:a[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Ds(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cu(e){var t=e._init;return t(e._payload)}function Vd(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=pn(p,m),p.index=0,p.sibling=null,p}function o(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,g,w){return m===null||m.tag!==6?(m=Tl(g,p.mode,w),m.return=p,m):(m=s(m,g),m.return=p,m)}function i(p,m,g,w){var k=g.type;return k===Wn?f(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===en&&Cu(k)===m.type)?(w=s(m,g.props),w.ref=Rr(p,m,g),w.return=p,w):(w=ro(g.type,g.key,g.props,null,p.mode,w),w.ref=Rr(p,m,g),w.return=p,w)}function u(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=jl(g,p.mode,w),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function f(p,m,g,w,k){return m===null||m.tag!==7?(m=Mn(g,p.mode,w,k),m.return=p,m):(m=s(m,g),m.return=p,m)}function d(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Tl(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ps:return g=ro(m.type,m.key,m.props,null,p.mode,g),g.ref=Rr(p,null,m),g.return=p,g;case Hn:return m=jl(m,p.mode,g),m.return=p,m;case en:var w=m._init;return d(p,w(m._payload),g)}if(Lr(m)||Nr(m))return m=Mn(m,p.mode,g,null),m.return=p,m;Ds(p,m)}return null}function h(p,m,g,w){var k=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:a(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ps:return g.key===k?i(p,m,g,w):null;case Hn:return g.key===k?u(p,m,g,w):null;case en:return k=g._init,h(p,m,k(g._payload),w)}if(Lr(g)||Nr(g))return k!==null?null:f(p,m,g,w,null);Ds(p,g)}return null}function x(p,m,g,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,a(m,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ps:return p=p.get(w.key===null?g:w.key)||null,i(m,p,w,k);case Hn:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,k);case en:var N=w._init;return x(p,m,g,N(w._payload),k)}if(Lr(w)||Nr(w))return p=p.get(g)||null,f(m,p,w,k,null);Ds(m,w)}return null}function v(p,m,g,w){for(var k=null,N=null,I=m,P=m=0,T=null;I!==null&&P<g.length;P++){I.index>P?(T=I,I=null):T=I.sibling;var A=h(p,I,g[P],w);if(A===null){I===null&&(I=T);break}e&&I&&A.alternate===null&&t(p,I),m=o(A,m,P),N===null?k=A:N.sibling=A,N=A,I=T}if(P===g.length)return n(p,I),pe&&jn(p,P),k;if(I===null){for(;P<g.length;P++)I=d(p,g[P],w),I!==null&&(m=o(I,m,P),N===null?k=I:N.sibling=I,N=I);return pe&&jn(p,P),k}for(I=r(p,I);P<g.length;P++)T=x(I,p,P,g[P],w),T!==null&&(e&&T.alternate!==null&&I.delete(T.key===null?P:T.key),m=o(T,m,P),N===null?k=T:N.sibling=T,N=T);return e&&I.forEach(function(Q){return t(p,Q)}),pe&&jn(p,P),k}function S(p,m,g,w){var k=Nr(g);if(typeof k!="function")throw Error(R(150));if(g=k.call(g),g==null)throw Error(R(151));for(var N=k=null,I=m,P=m=0,T=null,A=g.next();I!==null&&!A.done;P++,A=g.next()){I.index>P?(T=I,I=null):T=I.sibling;var Q=h(p,I,A.value,w);if(Q===null){I===null&&(I=T);break}e&&I&&Q.alternate===null&&t(p,I),m=o(Q,m,P),N===null?k=Q:N.sibling=Q,N=Q,I=T}if(A.done)return n(p,I),pe&&jn(p,P),k;if(I===null){for(;!A.done;P++,A=g.next())A=d(p,A.value,w),A!==null&&(m=o(A,m,P),N===null?k=A:N.sibling=A,N=A);return pe&&jn(p,P),k}for(I=r(p,I);!A.done;P++,A=g.next())A=x(I,p,P,A.value,w),A!==null&&(e&&A.alternate!==null&&I.delete(A.key===null?P:A.key),m=o(A,m,P),N===null?k=A:N.sibling=A,N=A);return e&&I.forEach(function(Z){return t(p,Z)}),pe&&jn(p,P),k}function E(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===Wn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ps:e:{for(var k=g.key,N=m;N!==null;){if(N.key===k){if(k=g.type,k===Wn){if(N.tag===7){n(p,N.sibling),m=s(N,g.props.children),m.return=p,p=m;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===en&&Cu(k)===N.type){n(p,N.sibling),m=s(N,g.props),m.ref=Rr(p,N,g),m.return=p,p=m;break e}n(p,N);break}else t(p,N);N=N.sibling}g.type===Wn?(m=Mn(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=ro(g.type,g.key,g.props,null,p.mode,w),w.ref=Rr(p,m,g),w.return=p,p=w)}return l(p);case Hn:e:{for(N=g.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=jl(g,p.mode,w),m.return=p,p=m}return l(p);case en:return N=g._init,E(p,m,N(g._payload),w)}if(Lr(g))return v(p,m,g,w);if(Nr(g))return S(p,m,g,w);Ds(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=Tl(g,p.mode,w),m.return=p,p=m),l(p)):n(p,m)}return E}var mr=Vd(!0),Gd=Vd(!1),So=Sn(null),ko=null,tr=null,ri=null;function si(){ri=tr=ko=null}function oi(e){var t=So.current;fe(So),e._currentValue=t}function da(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ir(e,t){ko=e,ri=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(ri!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(ko===null)throw Error(R(308));tr=e,ko.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var _n=null;function li(e){_n===null?_n=[e]:_n.push(e)}function Qd(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,li(t)):(n.next=s.next,s.next=n),t.interleaved=n,Wt(e,r)}function Wt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tn=!1;function ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Wt(e,n)}return s=r.interleaved,s===null?(t.next=t,li(r)):(t.next=s.next,s.next=t),r.interleaved=t,Wt(e,n)}function Xs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ha(e,n)}}function Pu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Io(e,t,n,r){var s=e.updateQueue;tn=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var i=a,u=i.next;i.next=null,l===null?o=u:l.next=u,l=i;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==l&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=i))}if(o!==null){var d=s.baseState;l=0,f=u=i=null,a=o;do{var h=a.lane,x=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,S=a;switch(h=t,x=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(x,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,h=typeof v=="function"?v.call(x,d,h):v,h==null)break e;d=ve({},d,h);break e;case 2:tn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=x,i=d):f=f.next=x,l|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(i=d),s.baseState=i,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);$n|=l,e.lanes=l,e.memoizedState=d}}function Tu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var ws={},Mt=Sn(ws),os=Sn(ws),ls=Sn(ws);function bn(e){if(e===ws)throw Error(R(174));return e}function ii(e,t){switch(ie(ls,t),ie(os,e),ie(Mt,ws),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ql(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ql(t,e)}fe(Mt),ie(Mt,t)}function pr(){fe(Mt),fe(os),fe(ls)}function Wd(e){bn(ls.current);var t=bn(Mt.current),n=Ql(t,e.type);t!==n&&(ie(os,e),ie(Mt,n))}function ui(e){os.current===e&&(fe(Mt),fe(os))}var ge=Sn(0);function Eo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kl=[];function ci(){for(var e=0;e<kl.length;e++)kl[e]._workInProgressVersionPrimary=null;kl.length=0}var Js=qt.ReactCurrentDispatcher,Il=qt.ReactCurrentBatchConfig,Dn=0,ye=null,Te=null,Ae=null,No=!1,Vr=!1,as=0,hp=0;function ze(){throw Error(R(321))}function di(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function fi(e,t,n,r,s,o){if(Dn=o,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Js.current=e===null||e.memoizedState===null?yp:vp,e=n(r,s),Vr){o=0;do{if(Vr=!1,as=0,25<=o)throw Error(R(301));o+=1,Ae=Te=null,t.updateQueue=null,Js.current=xp,e=n(r,s)}while(Vr)}if(Js.current=Co,t=Te!==null&&Te.next!==null,Dn=0,Ae=Te=ye=null,No=!1,t)throw Error(R(300));return e}function hi(){var e=as!==0;return as=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?ye.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function vt(){if(Te===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Ae===null?ye.memoizedState:Ae.next;if(t!==null)Ae=t,Te=e;else{if(e===null)throw Error(R(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ae===null?ye.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function is(e,t){return typeof t=="function"?t(e):t}function El(e){var t=vt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Te,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=l=null,i=null,u=o;do{var f=u.lane;if((Dn&f)===f)i!==null&&(i=i.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};i===null?(a=i=d,l=r):i=i.next=d,ye.lanes|=f,$n|=f}u=u.next}while(u!==null&&u!==o);i===null?l=r:i.next=a,Ct(r,t.memoizedState)||(et=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,ye.lanes|=o,$n|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Nl(e){var t=vt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);Ct(o,t.memoizedState)||(et=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yd(){}function qd(e,t){var n=ye,r=vt(),s=t(),o=!Ct(r.memoizedState,s);if(o&&(r.memoizedState=s,et=!0),r=r.queue,mi(Jd.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ae!==null&&Ae.memoizedState.tag&1){if(n.flags|=2048,us(9,Xd.bind(null,n,r,s,t),void 0,null),_e===null)throw Error(R(349));Dn&30||Kd(n,t,s)}return s}function Kd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xd(e,t,n,r){t.value=n,t.getSnapshot=r,Zd(t)&&ef(e)}function Jd(e,t,n){return n(function(){Zd(t)&&ef(e)})}function Zd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ct(e,n)}catch{return!0}}function ef(e){var t=Wt(e,1);t!==null&&Nt(t,e,1,-1)}function ju(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:e},t.queue=e,e=e.dispatch=gp.bind(null,ye,e),[t.memoizedState,e]}function us(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tf(){return vt().memoizedState}function Zs(e,t,n,r){var s=At();ye.flags|=e,s.memoizedState=us(1|t,n,void 0,r===void 0?null:r)}function Qo(e,t,n,r){var s=vt();r=r===void 0?null:r;var o=void 0;if(Te!==null){var l=Te.memoizedState;if(o=l.destroy,r!==null&&di(r,l.deps)){s.memoizedState=us(t,n,o,r);return}}ye.flags|=e,s.memoizedState=us(1|t,n,o,r)}function Ru(e,t){return Zs(8390656,8,e,t)}function mi(e,t){return Qo(2048,8,e,t)}function nf(e,t){return Qo(4,2,e,t)}function rf(e,t){return Qo(4,4,e,t)}function sf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function of(e,t,n){return n=n!=null?n.concat([e]):null,Qo(4,4,sf.bind(null,t,e),n)}function pi(){}function lf(e,t){var n=vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&di(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function af(e,t){var n=vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&di(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uf(e,t,n){return Dn&21?(Ct(n,t)||(n=hd(),ye.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function mp(e,t){var n=ae;ae=n!==0&&4>n?n:4,e(!0);var r=Il.transition;Il.transition={};try{e(!1),t()}finally{ae=n,Il.transition=r}}function cf(){return vt().memoizedState}function pp(e,t,n){var r=mn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},df(e))ff(t,n);else if(n=Qd(e,t,n,r),n!==null){var s=We();Nt(n,e,r,s),hf(n,t,r)}}function gp(e,t,n){var r=mn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(df(e))ff(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,a=o(l,n);if(s.hasEagerState=!0,s.eagerState=a,Ct(a,l)){var i=t.interleaved;i===null?(s.next=s,li(t)):(s.next=i.next,i.next=s),t.interleaved=s;return}}catch{}finally{}n=Qd(e,t,s,r),n!==null&&(s=We(),Nt(n,e,r,s),hf(n,t,r))}}function df(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function ff(e,t){Vr=No=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ha(e,n)}}var Co={readContext:yt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},yp={readContext:yt,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:Ru,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zs(4194308,4,sf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zs(4,2,e,t)},useMemo:function(e,t){var n=At();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=At();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pp.bind(null,ye,e),[r.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:ju,useDebugValue:pi,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=ju(!1),t=e[0];return e=mp.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ye,s=At();if(pe){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),_e===null)throw Error(R(349));Dn&30||Kd(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Ru(Jd.bind(null,r,o,e),[e]),r.flags|=2048,us(9,Xd.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=At(),t=_e.identifierPrefix;if(pe){var n=Ft,r=Ot;n=(r&~(1<<32-Et(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=as++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vp={readContext:yt,useCallback:lf,useContext:yt,useEffect:mi,useImperativeHandle:of,useInsertionEffect:nf,useLayoutEffect:rf,useMemo:af,useReducer:El,useRef:tf,useState:function(){return El(is)},useDebugValue:pi,useDeferredValue:function(e){var t=vt();return uf(t,Te.memoizedState,e)},useTransition:function(){var e=El(is)[0],t=vt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:qd,useId:cf,unstable_isNewReconciler:!1},xp={readContext:yt,useCallback:lf,useContext:yt,useEffect:mi,useImperativeHandle:of,useInsertionEffect:nf,useLayoutEffect:rf,useMemo:af,useReducer:Nl,useRef:tf,useState:function(){return Nl(is)},useDebugValue:pi,useDeferredValue:function(e){var t=vt();return Te===null?t.memoizedState=e:uf(t,Te.memoizedState,e)},useTransition:function(){var e=Nl(is)[0],t=vt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:qd,useId:cf,unstable_isNewReconciler:!1};function wt(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function fa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return(e=e._reactInternals)?Bn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=We(),s=mn(e),o=Gt(r,s);o.payload=t,n!=null&&(o.callback=n),t=fn(e,o,s),t!==null&&(Nt(t,e,s,r),Xs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=We(),s=mn(e),o=Gt(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=fn(e,o,s),t!==null&&(Nt(t,e,s,r),Xs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),r=mn(e),s=Gt(n,r);s.tag=2,t!=null&&(s.callback=t),t=fn(e,s,r),t!==null&&(Nt(t,e,r,n),Xs(t,e,r))}};function Au(e,t,n,r,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!ts(n,r)||!ts(s,o):!0}function mf(e,t,n){var r=!1,s=xn,o=t.contextType;return typeof o=="object"&&o!==null?o=yt(o):(s=nt(t)?zn:Be.current,r=t.contextTypes,o=(r=r!=null)?fr(e,s):xn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function _u(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function ha(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ai(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=yt(o):(o=nt(t)?zn:Be.current,s.context=fr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(fa(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ho.enqueueReplaceState(s,s.state,null),Io(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function gr(e,t){try{var n="",r=t;do n+=Wh(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Cl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ma(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wp=typeof WeakMap=="function"?WeakMap:Map;function pf(e,t,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){To||(To=!0,Ea=r),ma(e,t)},n}function gf(e,t,n){n=Gt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ma(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ma(e,t),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function bu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Lp.bind(null,e,t,n),t.then(e,e))}function Lu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gt(-1,1),t.tag=2,fn(n,t,1))),n.lanes|=1),e)}var Sp=qt.ReactCurrentOwner,et=!1;function Ge(e,t,n,r){t.child=e===null?Gd(t,null,n,r):mr(t,e.child,n,r)}function zu(e,t,n,r,s){n=n.render;var o=t.ref;return ir(t,s),r=fi(e,t,n,r,o,s),n=hi(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(pe&&n&&ei(t),t.flags|=1,Ge(e,t,r,s),t.child)}function Uu(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Ii(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,yf(e,t,o,r,s)):(e=ro(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:ts,n(l,r)&&e.ref===t.ref)return Yt(e,t,s)}return t.flags|=1,e=pn(o,r),e.ref=t.ref,e.return=t,t.child=e}function yf(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(ts(o,r)&&e.ref===t.ref)if(et=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Yt(e,t,s)}return pa(e,t,n,r,s)}function vf(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(rr,st),st|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(rr,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ie(rr,st),st|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ie(rr,st),st|=r;return Ge(e,t,s,n),t.child}function xf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pa(e,t,n,r,s){var o=nt(n)?zn:Be.current;return o=fr(t,o),ir(t,s),n=fi(e,t,n,r,o,s),r=hi(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(pe&&r&&ei(t),t.flags|=1,Ge(e,t,n,s),t.child)}function Du(e,t,n,r,s){if(nt(n)){var o=!0;vo(t)}else o=!1;if(ir(t,s),t.stateNode===null)eo(e,t),mf(t,n,r),ha(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var i=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=nt(n)?zn:Be.current,u=fr(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||i!==u)&&_u(t,l,r,u),tn=!1;var h=t.memoizedState;l.state=h,Io(t,r,l,s),i=t.memoizedState,a!==r||h!==i||tt.current||tn?(typeof f=="function"&&(fa(t,n,f,r),i=t.memoizedState),(a=tn||Au(t,n,a,r,h,i,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),l.props=r,l.state=i,l.context=u,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Hd(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:wt(t.type,a),l.props=u,d=t.pendingProps,h=l.context,i=n.contextType,typeof i=="object"&&i!==null?i=yt(i):(i=nt(n)?zn:Be.current,i=fr(t,i));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==d||h!==i)&&_u(t,l,r,i),tn=!1,h=t.memoizedState,l.state=h,Io(t,r,l,s);var v=t.memoizedState;a!==d||h!==v||tt.current||tn?(typeof x=="function"&&(fa(t,n,x,r),v=t.memoizedState),(u=tn||Au(t,n,u,r,h,v,i)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,v,i),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,v,i)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),l.props=r,l.state=v,l.context=i,r=u):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ga(e,t,n,r,o,s)}function ga(e,t,n,r,s,o){xf(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Iu(t,n,!1),Yt(e,t,o);r=t.stateNode,Sp.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=mr(t,e.child,null,o),t.child=mr(t,null,a,o)):Ge(e,t,a,o),t.memoizedState=r.state,s&&Iu(t,n,!0),t.child}function wf(e){var t=e.stateNode;t.pendingContext?ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ku(e,t.context,!1),ii(e,t.containerInfo)}function $u(e,t,n,r,s){return hr(),ni(s),t.flags|=256,Ge(e,t,n,r),t.child}var ya={dehydrated:null,treeContext:null,retryLane:0};function va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sf(e,t,n){var r=t.pendingProps,s=ge.current,o=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ie(ge,s&1),e===null)return ca(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=qo(l,r,0,null),e=Mn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=va(n),t.memoizedState=ya,e):gi(t,l));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return kp(e,t,l,r,a,s,n);if(o){o=r.fallback,l=t.mode,s=e.child,a=s.sibling;var i={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=pn(s,i),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=pn(a,o):(o=Mn(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?va(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=ya,r}return o=e.child,e=o.sibling,r=pn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function gi(e,t){return t=qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $s(e,t,n,r){return r!==null&&ni(r),mr(t,e.child,null,n),e=gi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kp(e,t,n,r,s,o,l){if(n)return t.flags&256?(t.flags&=-257,r=Cl(Error(R(422))),$s(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=qo({mode:"visible",children:r.children},s,0,null),o=Mn(o,s,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&mr(t,e.child,null,l),t.child.memoizedState=va(l),t.memoizedState=ya,o);if(!(t.mode&1))return $s(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(R(419)),r=Cl(o,r,void 0),$s(e,t,l,r)}if(a=(l&e.childLanes)!==0,et||a){if(r=_e,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Wt(e,s),Nt(r,e,s,-1))}return ki(),r=Cl(Error(R(421))),$s(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Mp.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ot=dn(s.nextSibling),lt=t,pe=!0,kt=null,e!==null&&(ht[mt++]=Ot,ht[mt++]=Ft,ht[mt++]=Un,Ot=e.id,Ft=e.overflow,Un=t),t=gi(t,r.children),t.flags|=4096,t)}function Ou(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),da(e.return,t,n)}function Pl(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function kf(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Ge(e,t,r.children,n),r=ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ou(e,n,t);else if(e.tag===19)Ou(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ie(ge,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Eo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Pl(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Eo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Pl(t,!0,n,null,o);break;case"together":Pl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function eo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=pn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ip(e,t,n){switch(t.tag){case 3:wf(t),hr();break;case 5:Wd(t);break;case 1:nt(t.type)&&vo(t);break;case 4:ii(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ie(So,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ie(ge,ge.current&1),t.flags|=128,null):n&t.child.childLanes?Sf(e,t,n):(ie(ge,ge.current&1),e=Yt(e,t,n),e!==null?e.sibling:null);ie(ge,ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(ge,ge.current),r)break;return null;case 22:case 23:return t.lanes=0,vf(e,t,n)}return Yt(e,t,n)}var If,xa,Ef,Nf;If=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xa=function(){};Ef=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,bn(Mt.current);var o=null;switch(n){case"input":s=Fl(e,s),r=Fl(e,r),o=[];break;case"select":s=ve({},s,{value:void 0}),r=ve({},r,{value:void 0}),o=[];break;case"textarea":s=Gl(e,s),r=Gl(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=go)}Hl(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yr.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var i=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&i!==a&&(i!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||i&&i.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in i)i.hasOwnProperty(l)&&a[l]!==i[l]&&(n||(n={}),n[l]=i[l])}else n||(o||(o=[]),o.push(u,n)),n=i;else u==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,a=a?a.__html:void 0,i!=null&&a!==i&&(o=o||[]).push(u,i)):u==="children"?typeof i!="string"&&typeof i!="number"||(o=o||[]).push(u,""+i):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yr.hasOwnProperty(u)?(i!=null&&u==="onScroll"&&de("scroll",e),o||a===i||(o=[])):(o=o||[]).push(u,i))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Nf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ar(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ep(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return nt(t.type)&&yo(),Ue(t),null;case 3:return r=t.stateNode,pr(),fe(tt),fe(Be),ci(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Us(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kt!==null&&(Pa(kt),kt=null))),xa(e,t),Ue(t),null;case 5:ui(t);var s=bn(ls.current);if(n=t.type,e!==null&&t.stateNode!=null)Ef(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return Ue(t),null}if(e=bn(Mt.current),Us(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[_t]=t,r[ss]=o,e=(t.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(s=0;s<zr.length;s++)de(zr[s],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":qi(r,o),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},de("invalid",r);break;case"textarea":Xi(r,o),de("invalid",r)}Hl(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var a=o[l];l==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&zs(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&zs(r.textContent,a,e),s=["children",""+a]):Yr.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&de("scroll",r)}switch(n){case"input":Ts(r),Ki(r,o,!0);break;case"textarea":Ts(r),Ji(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=go)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[_t]=t,e[ss]=r,If(e,t,!1,!1),t.stateNode=e;e:{switch(l=Wl(n,r),n){case"dialog":de("cancel",e),de("close",e),s=r;break;case"iframe":case"object":case"embed":de("load",e),s=r;break;case"video":case"audio":for(s=0;s<zr.length;s++)de(zr[s],e);s=r;break;case"source":de("error",e),s=r;break;case"img":case"image":case"link":de("error",e),de("load",e),s=r;break;case"details":de("toggle",e),s=r;break;case"input":qi(e,r),s=Fl(e,r),de("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ve({},r,{value:void 0}),de("invalid",e);break;case"textarea":Xi(e,r),s=Gl(e,r),de("invalid",e);break;default:s=r}Hl(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var i=a[o];o==="style"?td(e,i):o==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Zc(e,i)):o==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&qr(e,i):typeof i=="number"&&qr(e,""+i):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yr.hasOwnProperty(o)?i!=null&&o==="onScroll"&&de("scroll",e):i!=null&&Oa(e,o,i,l))}switch(n){case"input":Ts(e),Ki(e,r,!1);break;case"textarea":Ts(e),Ji(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?sr(e,!!r.multiple,o,!1):r.defaultValue!=null&&sr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=go)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ue(t),null;case 6:if(e&&t.stateNode!=null)Nf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=bn(ls.current),bn(Mt.current),Us(t)){if(r=t.stateNode,n=t.memoizedProps,r[_t]=t,(o=r.nodeValue!==n)&&(e=lt,e!==null))switch(e.tag){case 3:zs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=t,t.stateNode=r}return Ue(t),null;case 13:if(fe(ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&ot!==null&&t.mode&1&&!(t.flags&128))Bd(),hr(),t.flags|=98560,o=!1;else if(o=Us(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(R(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(R(317));o[_t]=t}else hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ue(t),o=!1}else kt!==null&&(Pa(kt),kt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ge.current&1?je===0&&(je=3):ki())),t.updateQueue!==null&&(t.flags|=4),Ue(t),null);case 4:return pr(),xa(e,t),e===null&&ns(t.stateNode.containerInfo),Ue(t),null;case 10:return oi(t.type._context),Ue(t),null;case 17:return nt(t.type)&&yo(),Ue(t),null;case 19:if(fe(ge),o=t.memoizedState,o===null)return Ue(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)Ar(o,!1);else{if(je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Eo(e),l!==null){for(t.flags|=128,Ar(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ie(ge,ge.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ie()>yr&&(t.flags|=128,r=!0,Ar(o,!1),t.lanes=4194304)}else{if(!r)if(e=Eo(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ar(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!pe)return Ue(t),null}else 2*Ie()-o.renderingStartTime>yr&&n!==1073741824&&(t.flags|=128,r=!0,Ar(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ie(),t.sibling=null,n=ge.current,ie(ge,r?n&1|2:n&1),t):(Ue(t),null);case 22:case 23:return Si(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?st&1073741824&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Np(e,t){switch(ti(t),t.tag){case 1:return nt(t.type)&&yo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pr(),fe(tt),fe(Be),ci(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ui(t),null;case 13:if(fe(ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(ge),null;case 4:return pr(),null;case 10:return oi(t.type._context),null;case 22:case 23:return Si(),null;case 24:return null;default:return null}}var Os=!1,Oe=!1,Cp=typeof WeakSet=="function"?WeakSet:Set,U=null;function nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(e,t,r)}else n.current=null}function wa(e,t,n){try{n()}catch(r){xe(e,t,r)}}var Fu=!1;function Pp(e,t){if(ra=ho,e=jd(),Za(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,a=-1,i=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var x;d!==n||s!==0&&d.nodeType!==3||(a=l+s),d!==o||r!==0&&d.nodeType!==3||(i=l+r),d.nodeType===3&&(l+=d.nodeValue.length),(x=d.firstChild)!==null;)h=d,d=x;for(;;){if(d===e)break t;if(h===n&&++u===s&&(a=l),h===o&&++f===r&&(i=l),(x=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=x}n=a===-1||i===-1?null:{start:a,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(sa={focusedElem:e,selectionRange:n},ho=!1,U=t;U!==null;)if(t=U,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,U=e;else for(;U!==null;){t=U;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?S:wt(t.type,S),E);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(w){xe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,U=e;break}U=t.return}return v=Fu,Fu=!1,v}function Gr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&wa(t,n,o)}s=s.next}while(s!==r)}}function Wo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Sa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cf(e){var t=e.alternate;t!==null&&(e.alternate=null,Cf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_t],delete t[ss],delete t[aa],delete t[up],delete t[cp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pf(e){return e.tag===5||e.tag===3||e.tag===4}function Bu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ka(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=go));else if(r!==4&&(e=e.child,e!==null))for(ka(e,t,n),e=e.sibling;e!==null;)ka(e,t,n),e=e.sibling}function Ia(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ia(e,t,n),e=e.sibling;e!==null;)Ia(e,t,n),e=e.sibling}var be=null,St=!1;function Zt(e,t,n){for(n=n.child;n!==null;)Tf(e,t,n),n=n.sibling}function Tf(e,t,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount($o,n)}catch{}switch(n.tag){case 5:Oe||nr(n,t);case 6:var r=be,s=St;be=null,Zt(e,t,n),be=r,St=s,be!==null&&(St?(e=be,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(St?(e=be,n=n.stateNode,e.nodeType===8?wl(e.parentNode,n):e.nodeType===1&&wl(e,n),Zr(e)):wl(be,n.stateNode));break;case 4:r=be,s=St,be=n.stateNode.containerInfo,St=!0,Zt(e,t,n),be=r,St=s;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&wa(n,t,l),s=s.next}while(s!==r)}Zt(e,t,n);break;case 1:if(!Oe&&(nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xe(n,t,a)}Zt(e,t,n);break;case 21:Zt(e,t,n);break;case 22:n.mode&1?(Oe=(r=Oe)||n.memoizedState!==null,Zt(e,t,n),Oe=r):Zt(e,t,n);break;default:Zt(e,t,n)}}function Vu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cp),t.forEach(function(r){var s=zp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:be=a.stateNode,St=!1;break e;case 3:be=a.stateNode.containerInfo,St=!0;break e;case 4:be=a.stateNode.containerInfo,St=!0;break e}a=a.return}if(be===null)throw Error(R(160));Tf(o,l,s),be=null,St=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(u){xe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jf(t,e),t=t.sibling}function jf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),jt(e),r&4){try{Gr(3,e,e.return),Wo(3,e)}catch(S){xe(e,e.return,S)}try{Gr(5,e,e.return)}catch(S){xe(e,e.return,S)}}break;case 1:xt(t,e),jt(e),r&512&&n!==null&&nr(n,n.return);break;case 5:if(xt(t,e),jt(e),r&512&&n!==null&&nr(n,n.return),e.flags&32){var s=e.stateNode;try{qr(s,"")}catch(S){xe(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,a=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Kc(s,o),Wl(a,l);var u=Wl(a,o);for(l=0;l<i.length;l+=2){var f=i[l],d=i[l+1];f==="style"?td(s,d):f==="dangerouslySetInnerHTML"?Zc(s,d):f==="children"?qr(s,d):Oa(s,f,d,u)}switch(a){case"input":Bl(s,o);break;case"textarea":Xc(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?sr(s,!!o.multiple,x,!1):h!==!!o.multiple&&(o.defaultValue!=null?sr(s,!!o.multiple,o.defaultValue,!0):sr(s,!!o.multiple,o.multiple?[]:"",!1))}s[ss]=o}catch(S){xe(e,e.return,S)}}break;case 6:if(xt(t,e),jt(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(S){xe(e,e.return,S)}}break;case 3:if(xt(t,e),jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zr(t.containerInfo)}catch(S){xe(e,e.return,S)}break;case 4:xt(t,e),jt(e);break;case 13:xt(t,e),jt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(xi=Ie())),r&4&&Vu(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Oe=(u=Oe)||f,xt(t,e),Oe=u):xt(t,e),jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(U=e,f=e.child;f!==null;){for(d=U=f;U!==null;){switch(h=U,x=h.child,h.tag){case 0:case 11:case 14:case 15:Gr(4,h,h.return);break;case 1:nr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){xe(r,n,S)}}break;case 5:nr(h,h.return);break;case 22:if(h.memoizedState!==null){Qu(d);continue}}x!==null?(x.return=h,U=x):Qu(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,i=d.memoizedProps.style,l=i!=null&&i.hasOwnProperty("display")?i.display:null,a.style.display=ed("display",l))}catch(S){xe(e,e.return,S)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){xe(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xt(t,e),jt(e),r&4&&Vu(e);break;case 21:break;default:xt(t,e),jt(e)}}function jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Pf(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qr(s,""),r.flags&=-33);var o=Bu(e);Ia(e,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,a=Bu(e);ka(e,a,l);break;default:throw Error(R(161))}}catch(i){xe(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tp(e,t,n){U=e,Rf(e)}function Rf(e,t,n){for(var r=(e.mode&1)!==0;U!==null;){var s=U,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Os;if(!l){var a=s.alternate,i=a!==null&&a.memoizedState!==null||Oe;a=Os;var u=Oe;if(Os=l,(Oe=i)&&!u)for(U=s;U!==null;)l=U,i=l.child,l.tag===22&&l.memoizedState!==null?Hu(s):i!==null?(i.return=l,U=i):Hu(s);for(;o!==null;)U=o,Rf(o),o=o.sibling;U=s,Os=a,Oe=u}Gu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,U=o):Gu(e)}}function Gu(e){for(;U!==null;){var t=U;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Oe||Wo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Oe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:wt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Tu(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tu(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Zr(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Oe||t.flags&512&&Sa(t)}catch(h){xe(t,t.return,h)}}if(t===e){U=null;break}if(n=t.sibling,n!==null){n.return=t.return,U=n;break}U=t.return}}function Qu(e){for(;U!==null;){var t=U;if(t===e){U=null;break}var n=t.sibling;if(n!==null){n.return=t.return,U=n;break}U=t.return}}function Hu(e){for(;U!==null;){var t=U;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wo(4,t)}catch(i){xe(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(i){xe(t,s,i)}}var o=t.return;try{Sa(t)}catch(i){xe(t,o,i)}break;case 5:var l=t.return;try{Sa(t)}catch(i){xe(t,l,i)}}}catch(i){xe(t,t.return,i)}if(t===e){U=null;break}var a=t.sibling;if(a!==null){a.return=t.return,U=a;break}U=t.return}}var jp=Math.ceil,Po=qt.ReactCurrentDispatcher,yi=qt.ReactCurrentOwner,gt=qt.ReactCurrentBatchConfig,ne=0,_e=null,Ne=null,Le=0,st=0,rr=Sn(0),je=0,cs=null,$n=0,Yo=0,vi=0,Qr=null,Ze=null,xi=0,yr=1/0,Dt=null,To=!1,Ea=null,hn=null,Fs=!1,on=null,jo=0,Hr=0,Na=null,to=-1,no=0;function We(){return ne&6?Ie():to!==-1?to:to=Ie()}function mn(e){return e.mode&1?ne&2&&Le!==0?Le&-Le:fp.transition!==null?(no===0&&(no=hd()),no):(e=ae,e!==0||(e=window.event,e=e===void 0?16:wd(e.type)),e):1}function Nt(e,t,n,r){if(50<Hr)throw Hr=0,Na=null,Error(R(185));ys(e,n,r),(!(ne&2)||e!==_e)&&(e===_e&&(!(ne&2)&&(Yo|=n),je===4&&rn(e,Le)),rt(e,r),n===1&&ne===0&&!(t.mode&1)&&(yr=Ie()+500,Go&&kn()))}function rt(e,t){var n=e.callbackNode;fm(e,t);var r=fo(e,e===_e?Le:0);if(r===0)n!==null&&tu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tu(n),t===1)e.tag===0?dp(Wu.bind(null,e)):$d(Wu.bind(null,e)),ap(function(){!(ne&6)&&kn()}),n=null;else{switch(md(r)){case 1:n=Qa;break;case 4:n=dd;break;case 16:n=co;break;case 536870912:n=fd;break;default:n=co}n=Df(n,Af.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Af(e,t){if(to=-1,no=0,ne&6)throw Error(R(327));var n=e.callbackNode;if(ur()&&e.callbackNode!==n)return null;var r=fo(e,e===_e?Le:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ro(e,r);else{t=r;var s=ne;ne|=2;var o=bf();(_e!==e||Le!==t)&&(Dt=null,yr=Ie()+500,Ln(e,t));do try{_p();break}catch(a){_f(e,a)}while(!0);si(),Po.current=o,ne=s,Ne!==null?t=0:(_e=null,Le=0,t=je)}if(t!==0){if(t===2&&(s=Jl(e),s!==0&&(r=s,t=Ca(e,s))),t===1)throw n=cs,Ln(e,0),rn(e,r),rt(e,Ie()),n;if(t===6)rn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Rp(s)&&(t=Ro(e,r),t===2&&(o=Jl(e),o!==0&&(r=o,t=Ca(e,o))),t===1))throw n=cs,Ln(e,0),rn(e,r),rt(e,Ie()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:Rn(e,Ze,Dt);break;case 3:if(rn(e,r),(r&130023424)===r&&(t=xi+500-Ie(),10<t)){if(fo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){We(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=la(Rn.bind(null,e,Ze,Dt),t);break}Rn(e,Ze,Dt);break;case 4:if(rn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-Et(r);o=1<<l,l=t[l],l>s&&(s=l),r&=~o}if(r=s,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jp(r/1960))-r,10<r){e.timeoutHandle=la(Rn.bind(null,e,Ze,Dt),r);break}Rn(e,Ze,Dt);break;case 5:Rn(e,Ze,Dt);break;default:throw Error(R(329))}}}return rt(e,Ie()),e.callbackNode===n?Af.bind(null,e):null}function Ca(e,t){var n=Qr;return e.current.memoizedState.isDehydrated&&(Ln(e,t).flags|=256),e=Ro(e,t),e!==2&&(t=Ze,Ze=n,t!==null&&Pa(t)),e}function Pa(e){Ze===null?Ze=e:Ze.push.apply(Ze,e)}function Rp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Ct(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rn(e,t){for(t&=~vi,t&=~Yo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Et(t),r=1<<n;e[n]=-1,t&=~r}}function Wu(e){if(ne&6)throw Error(R(327));ur();var t=fo(e,0);if(!(t&1))return rt(e,Ie()),null;var n=Ro(e,t);if(e.tag!==0&&n===2){var r=Jl(e);r!==0&&(t=r,n=Ca(e,r))}if(n===1)throw n=cs,Ln(e,0),rn(e,t),rt(e,Ie()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,Ze,Dt),rt(e,Ie()),null}function wi(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(yr=Ie()+500,Go&&kn())}}function On(e){on!==null&&on.tag===0&&!(ne&6)&&ur();var t=ne;ne|=1;var n=gt.transition,r=ae;try{if(gt.transition=null,ae=1,e)return e()}finally{ae=r,gt.transition=n,ne=t,!(ne&6)&&kn()}}function Si(){st=rr.current,fe(rr)}function Ln(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lp(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(ti(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yo();break;case 3:pr(),fe(tt),fe(Be),ci();break;case 5:ui(r);break;case 4:pr();break;case 13:fe(ge);break;case 19:fe(ge);break;case 10:oi(r.type._context);break;case 22:case 23:Si()}n=n.return}if(_e=e,Ne=e=pn(e.current,null),Le=st=t,je=0,cs=null,vi=Yo=$n=0,Ze=Qr=null,_n!==null){for(t=0;t<_n.length;t++)if(n=_n[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}_n=null}return e}function _f(e,t){do{var n=Ne;try{if(si(),Js.current=Co,No){for(var r=ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}No=!1}if(Dn=0,Ae=Te=ye=null,Vr=!1,as=0,yi.current=null,n===null||n.return===null){je=1,cs=t,Ne=null;break}e:{var o=e,l=n.return,a=n,i=t;if(t=Le,a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var u=i,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Lu(l);if(x!==null){x.flags&=-257,Mu(x,l,a,o,t),x.mode&1&&bu(o,u,t),t=x,i=u;var v=t.updateQueue;if(v===null){var S=new Set;S.add(i),t.updateQueue=S}else v.add(i);break e}else{if(!(t&1)){bu(o,u,t),ki();break e}i=Error(R(426))}}else if(pe&&a.mode&1){var E=Lu(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Mu(E,l,a,o,t),ni(gr(i,a));break e}}o=i=gr(i,a),je!==4&&(je=2),Qr===null?Qr=[o]:Qr.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=pf(o,i,t);Pu(o,p);break e;case 1:a=i;var m=o.type,g=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(hn===null||!hn.has(g)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=gf(o,a,t);Pu(o,w);break e}}o=o.return}while(o!==null)}Mf(n)}catch(k){t=k,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(!0)}function bf(){var e=Po.current;return Po.current=Co,e===null?Co:e}function ki(){(je===0||je===3||je===2)&&(je=4),_e===null||!($n&268435455)&&!(Yo&268435455)||rn(_e,Le)}function Ro(e,t){var n=ne;ne|=2;var r=bf();(_e!==e||Le!==t)&&(Dt=null,Ln(e,t));do try{Ap();break}catch(s){_f(e,s)}while(!0);if(si(),ne=n,Po.current=r,Ne!==null)throw Error(R(261));return _e=null,Le=0,je}function Ap(){for(;Ne!==null;)Lf(Ne)}function _p(){for(;Ne!==null&&!rm();)Lf(Ne)}function Lf(e){var t=Uf(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Mf(e):Ne=t,yi.current=null}function Mf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Np(n,t),n!==null){n.flags&=32767,Ne=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{je=6,Ne=null;return}}else if(n=Ep(n,t,st),n!==null){Ne=n;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);je===0&&(je=5)}function Rn(e,t,n){var r=ae,s=gt.transition;try{gt.transition=null,ae=1,bp(e,t,n,r)}finally{gt.transition=s,ae=r}return null}function bp(e,t,n,r){do ur();while(on!==null);if(ne&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(hm(e,o),e===_e&&(Ne=_e=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fs||(Fs=!0,Df(co,function(){return ur(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=gt.transition,gt.transition=null;var l=ae;ae=1;var a=ne;ne|=4,yi.current=null,Pp(e,n),jf(n,e),Zm(sa),ho=!!ra,sa=ra=null,e.current=n,Tp(n),sm(),ne=a,ae=l,gt.transition=o}else e.current=n;if(Fs&&(Fs=!1,on=e,jo=s),o=e.pendingLanes,o===0&&(hn=null),am(n.stateNode),rt(e,Ie()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(To)throw To=!1,e=Ea,Ea=null,e;return jo&1&&e.tag!==0&&ur(),o=e.pendingLanes,o&1?e===Na?Hr++:(Hr=0,Na=e):Hr=0,kn(),null}function ur(){if(on!==null){var e=md(jo),t=gt.transition,n=ae;try{if(gt.transition=null,ae=16>e?16:e,on===null)var r=!1;else{if(e=on,on=null,jo=0,ne&6)throw Error(R(331));var s=ne;for(ne|=4,U=e.current;U!==null;){var o=U,l=o.child;if(U.flags&16){var a=o.deletions;if(a!==null){for(var i=0;i<a.length;i++){var u=a[i];for(U=u;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:Gr(8,f,o)}var d=f.child;if(d!==null)d.return=f,U=d;else for(;U!==null;){f=U;var h=f.sibling,x=f.return;if(Cf(f),f===u){U=null;break}if(h!==null){h.return=x,U=h;break}U=x}}}var v=o.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}U=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,U=l;else e:for(;U!==null;){if(o=U,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Gr(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,U=p;break e}U=o.return}}var m=e.current;for(U=m;U!==null;){l=U;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,U=g;else e:for(l=m;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wo(9,a)}}catch(k){xe(a,a.return,k)}if(a===l){U=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,U=w;break e}U=a.return}}if(ne=s,kn(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot($o,e)}catch{}r=!0}return r}finally{ae=n,gt.transition=t}}return!1}function Yu(e,t,n){t=gr(n,t),t=pf(e,t,1),e=fn(e,t,1),t=We(),e!==null&&(ys(e,1,t),rt(e,t))}function xe(e,t,n){if(e.tag===3)Yu(e,e,n);else for(;t!==null;){if(t.tag===3){Yu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){e=gr(n,e),e=gf(t,e,1),t=fn(t,e,1),e=We(),t!==null&&(ys(t,1,e),rt(t,e));break}}t=t.return}}function Lp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,_e===e&&(Le&n)===n&&(je===4||je===3&&(Le&130023424)===Le&&500>Ie()-xi?Ln(e,0):vi|=n),rt(e,t)}function zf(e,t){t===0&&(e.mode&1?(t=As,As<<=1,!(As&130023424)&&(As=4194304)):t=1);var n=We();e=Wt(e,t),e!==null&&(ys(e,t,n),rt(e,n))}function Mp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zf(e,n)}function zp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),zf(e,n)}var Uf;Uf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,Ip(e,t,n);et=!!(e.flags&131072)}else et=!1,pe&&t.flags&1048576&&Od(t,wo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;eo(e,t),e=t.pendingProps;var s=fr(t,Be.current);ir(t,n),s=fi(null,t,r,e,s,n);var o=hi();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(r)?(o=!0,vo(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ai(t),s.updater=Ho,t.stateNode=s,s._reactInternals=t,ha(t,r,e,n),t=ga(null,t,r,!0,o,n)):(t.tag=0,pe&&o&&ei(t),Ge(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(eo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Dp(r),e=wt(r,e),s){case 0:t=pa(null,t,r,e,n);break e;case 1:t=Du(null,t,r,e,n);break e;case 11:t=zu(null,t,r,e,n);break e;case 14:t=Uu(null,t,r,wt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wt(r,s),pa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wt(r,s),Du(e,t,r,s,n);case 3:e:{if(wf(t),e===null)throw Error(R(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Hd(e,t),Io(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=gr(Error(R(423)),t),t=$u(e,t,r,n,s);break e}else if(r!==s){s=gr(Error(R(424)),t),t=$u(e,t,r,n,s);break e}else for(ot=dn(t.stateNode.containerInfo.firstChild),lt=t,pe=!0,kt=null,n=Gd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===s){t=Yt(e,t,n);break e}Ge(e,t,r,n)}t=t.child}return t;case 5:return Wd(t),e===null&&ca(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,oa(r,s)?l=null:o!==null&&oa(r,o)&&(t.flags|=32),xf(e,t),Ge(e,t,l,n),t.child;case 6:return e===null&&ca(t),null;case 13:return Sf(e,t,n);case 4:return ii(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=mr(t,null,r,n):Ge(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wt(r,s),zu(e,t,r,s,n);case 7:return Ge(e,t,t.pendingProps,n),t.child;case 8:return Ge(e,t,t.pendingProps.children,n),t.child;case 12:return Ge(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,ie(So,r._currentValue),r._currentValue=l,o!==null)if(Ct(o.value,l)){if(o.children===s.children&&!tt.current){t=Yt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){l=o.child;for(var i=a.firstContext;i!==null;){if(i.context===r){if(o.tag===1){i=Gt(-1,n&-n),i.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i}}o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),da(o.return,n,t),a.lanes|=n;break}i=i.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(R(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),da(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ge(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ir(t,n),s=yt(s),r=r(s),t.flags|=1,Ge(e,t,r,n),t.child;case 14:return r=t.type,s=wt(r,t.pendingProps),s=wt(r.type,s),Uu(e,t,r,s,n);case 15:return yf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wt(r,s),eo(e,t),t.tag=1,nt(r)?(e=!0,vo(t)):e=!1,ir(t,n),mf(t,r,s),ha(t,r,s,n),ga(null,t,r,!0,e,n);case 19:return kf(e,t,n);case 22:return vf(e,t,n)}throw Error(R(156,t.tag))};function Df(e,t){return cd(e,t)}function Up(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,n,r){return new Up(e,t,n,r)}function Ii(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Dp(e){if(typeof e=="function")return Ii(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ba)return 11;if(e===Va)return 14}return 2}function pn(e,t){var n=e.alternate;return n===null?(n=pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ro(e,t,n,r,s,o){var l=2;if(r=e,typeof e=="function")Ii(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Wn:return Mn(n.children,s,o,t);case Fa:l=8,s|=8;break;case Ul:return e=pt(12,n,t,s|2),e.elementType=Ul,e.lanes=o,e;case Dl:return e=pt(13,n,t,s),e.elementType=Dl,e.lanes=o,e;case $l:return e=pt(19,n,t,s),e.elementType=$l,e.lanes=o,e;case Wc:return qo(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qc:l=10;break e;case Hc:l=9;break e;case Ba:l=11;break e;case Va:l=14;break e;case en:l=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=pt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Mn(e,t,n,r){return e=pt(7,e,r,t),e.lanes=n,e}function qo(e,t,n,r){return e=pt(22,e,r,t),e.elementType=Wc,e.lanes=n,e.stateNode={isHidden:!1},e}function Tl(e,t,n){return e=pt(6,e,null,t),e.lanes=n,e}function jl(e,t,n){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $p(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ul(0),this.expirationTimes=ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ul(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ei(e,t,n,r,s,o,l,a,i){return e=new $p(e,t,n,a,i),t===1?(t=1,o===!0&&(t|=8)):t=0,o=pt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ai(o),e}function Op(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $f(e){if(!e)return xn;e=e._reactInternals;e:{if(Bn(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(nt(n))return Dd(e,n,t)}return t}function Of(e,t,n,r,s,o,l,a,i){return e=Ei(n,r,!0,e,s,o,l,a,i),e.context=$f(null),n=e.current,r=We(),s=mn(n),o=Gt(r,s),o.callback=t??null,fn(n,o,s),e.current.lanes=s,ys(e,s,r),rt(e,r),e}function Ko(e,t,n,r){var s=t.current,o=We(),l=mn(s);return n=$f(n),t.context===null?t.context=n:t.pendingContext=n,t=Gt(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fn(s,t,l),e!==null&&(Nt(e,s,l,o),Xs(e,s,l)),l}function Ao(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ni(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}function Fp(){return null}var Ff=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ci(e){this._internalRoot=e}Xo.prototype.render=Ci.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Ko(e,t,null,null)};Xo.prototype.unmount=Ci.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;On(function(){Ko(null,e,null,null)}),t[Ht]=null}};function Xo(e){this._internalRoot=e}Xo.prototype.unstable_scheduleHydration=function(e){if(e){var t=yd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nn.length&&t!==0&&t<nn[n].priority;n++);nn.splice(n,0,e),n===0&&xd(e)}};function Pi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ku(){}function Bp(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Ao(l);o.call(u)}}var l=Of(t,r,e,0,null,!1,!1,"",Ku);return e._reactRootContainer=l,e[Ht]=l.current,ns(e.nodeType===8?e.parentNode:e),On(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Ao(i);a.call(u)}}var i=Ei(e,0,!1,null,null,!1,!1,"",Ku);return e._reactRootContainer=i,e[Ht]=i.current,ns(e.nodeType===8?e.parentNode:e),On(function(){Ko(t,i,n,r)}),i}function Zo(e,t,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var a=s;s=function(){var i=Ao(l);a.call(i)}}Ko(t,l,e,s)}else l=Bp(n,t,e,s,r);return Ao(l)}pd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mr(t.pendingLanes);n!==0&&(Ha(t,n|1),rt(t,Ie()),!(ne&6)&&(yr=Ie()+500,kn()))}break;case 13:On(function(){var r=Wt(e,1);if(r!==null){var s=We();Nt(r,e,1,s)}}),Ni(e,1)}};Wa=function(e){if(e.tag===13){var t=Wt(e,134217728);if(t!==null){var n=We();Nt(t,e,134217728,n)}Ni(e,134217728)}};gd=function(e){if(e.tag===13){var t=mn(e),n=Wt(e,t);if(n!==null){var r=We();Nt(n,e,t,r)}Ni(e,t)}};yd=function(){return ae};vd=function(e,t){var n=ae;try{return ae=e,t()}finally{ae=n}};ql=function(e,t,n){switch(t){case"input":if(Bl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Vo(r);if(!s)throw Error(R(90));qc(r),Bl(r,s)}}}break;case"textarea":Xc(e,n);break;case"select":t=n.value,t!=null&&sr(e,!!n.multiple,t,!1)}};sd=wi;od=On;var Vp={usingClientEntryPoint:!1,Events:[xs,Xn,Vo,nd,rd,wi]},_r={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gp={bundleType:_r.bundleType,version:_r.version,rendererPackageName:_r.rendererPackageName,rendererConfig:_r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=id(e),e===null?null:e.stateNode},findFiberByHostInstance:_r.findFiberByHostInstance||Fp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bs.isDisabled&&Bs.supportsFiber)try{$o=Bs.inject(Gp),Lt=Bs}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vp;it.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pi(t))throw Error(R(200));return Op(e,t,null,n)};it.createRoot=function(e,t){if(!Pi(e))throw Error(R(299));var n=!1,r="",s=Ff;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ei(e,1,!1,null,null,n,!1,r,s),e[Ht]=t.current,ns(e.nodeType===8?e.parentNode:e),new Ci(t)};it.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=id(t),e=e===null?null:e.stateNode,e};it.flushSync=function(e){return On(e)};it.hydrate=function(e,t,n){if(!Jo(t))throw Error(R(200));return Zo(null,e,t,!0,n)};it.hydrateRoot=function(e,t,n){if(!Pi(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=Ff;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Of(t,null,e,1,n??null,s,!1,o,l),e[Ht]=t.current,ns(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xo(t)};it.render=function(e,t,n){if(!Jo(t))throw Error(R(200));return Zo(null,e,t,!1,n)};it.unmountComponentAtNode=function(e){if(!Jo(e))throw Error(R(40));return e._reactRootContainer?(On(function(){Zo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};it.unstable_batchedUpdates=wi;it.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jo(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Zo(e,t,n,!1,r)};it.version="18.3.1-next-f1338f8080-20240426";function Bf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bf)}catch(e){console.error(e)}}Bf(),Fc.exports=it;var Ti=Fc.exports,Xu=Ti;Ml.createRoot=Xu.createRoot,Ml.hydrateRoot=Xu.hydrateRoot;const Qp="modulepreload",Hp=function(e){return"/"+e},Ju={},ct=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(i=>{if(i=Hp(i),i in Ju)return;Ju[i]=!0;const u=i.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Qp,u||(d.as="script"),d.crossOrigin="",d.href=i,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,x)=>{d.addEventListener("load",h),d.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${i}`)))})}))}function o(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return s.then(l=>{for(const a of l||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ds.apply(this,arguments)}var ln;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ln||(ln={}));const Zu="popstate";function Wp(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:l,hash:a}=r.location;return Ta("",{pathname:o,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_o(s)}return qp(t,n,null,e)}function Ee(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ji(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Yp(){return Math.random().toString(36).substr(2,8)}function ec(e,t){return{usr:e.state,key:e.key,idx:t}}function Ta(e,t,n,r){return n===void 0&&(n=null),ds({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?kr(t):t,{state:n,key:t&&t.key||r||Yp()})}function _o(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function kr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qp(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,a=ln.Pop,i=null,u=f();u==null&&(u=0,l.replaceState(ds({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function d(){a=ln.Pop;let E=f(),p=E==null?null:E-u;u=E,i&&i({action:a,location:S.location,delta:p})}function h(E,p){a=ln.Push;let m=Ta(S.location,E,p);u=f()+1;let g=ec(m,u),w=S.createHref(m);try{l.pushState(g,"",w)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(w)}o&&i&&i({action:a,location:S.location,delta:1})}function x(E,p){a=ln.Replace;let m=Ta(S.location,E,p);u=f();let g=ec(m,u),w=S.createHref(m);l.replaceState(g,"",w),o&&i&&i({action:a,location:S.location,delta:0})}function v(E){let p=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof E=="string"?E:_o(E);return m=m.replace(/ $/,"%20"),Ee(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let S={get action(){return a},get location(){return e(s,l)},listen(E){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(Zu,d),i=E,()=>{s.removeEventListener(Zu,d),i=null}},createHref(E){return t(s,E)},createURL:v,encodeLocation(E){let p=v(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:x,go(E){return l.go(E)}};return S}var tc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(tc||(tc={}));function Kp(e,t,n){return n===void 0&&(n="/"),Xp(e,t,n)}function Xp(e,t,n,r){let s=typeof t=="string"?kr(t):t,o=Ri(s.pathname||"/",n);if(o==null)return null;let l=Vf(e);Jp(l);let a=null;for(let i=0;a==null&&i<l.length;++i){let u=cg(o);a=ag(l[i],u)}return a}function Vf(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,l,a)=>{let i={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};i.relativePath.startsWith("/")&&(Ee(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let u=gn([r,i.relativePath]),f=n.concat(i);o.children&&o.children.length>0&&(Ee(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Vf(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:og(u,o.index),routesMeta:f})};return e.forEach((o,l)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,l);else for(let i of Gf(o.path))s(o,l,i)}),t}function Gf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=Gf(r.join("/")),a=[];return a.push(...l.map(i=>i===""?o:[o,i].join("/"))),s&&a.push(...l),a.map(i=>e.startsWith("/")&&i===""?"/":i)}function Jp(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:lg(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zp=/^:[\w-]+$/,eg=3,tg=2,ng=1,rg=10,sg=-2,nc=e=>e==="*";function og(e,t){let n=e.split("/"),r=n.length;return n.some(nc)&&(r+=sg),t&&(r+=tg),n.filter(s=>!nc(s)).reduce((s,o)=>s+(Zp.test(o)?eg:o===""?ng:rg),r)}function lg(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function ag(e,t,n){let{routesMeta:r}=e,s={},o="/",l=[];for(let a=0;a<r.length;++a){let i=r[a],u=a===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",d=ig({path:i.relativePath,caseSensitive:i.caseSensitive,end:u},f),h=i.route;if(!d)return null;Object.assign(s,d.params),l.push({params:s,pathname:gn([o,d.pathname]),pathnameBase:pg(gn([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=gn([o,d.pathnameBase]))}return l}function ig(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ug(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:x}=f;if(h==="*"){let S=a[d]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[d];return x&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:l,pattern:e}}function ug(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ji(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,a,i)=>(r.push({paramName:a,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function cg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ji(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ri(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const dg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fg=e=>dg.test(e);function hg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?kr(e):e,o;if(n)if(fg(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),ji(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=rc(n.substring(1),"/"):o=rc(n,t)}else o=t;return{pathname:o,search:gg(r),hash:yg(s)}}function rc(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Rl(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ai(e,t){let n=mg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _i(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=kr(e):(s=ds({},e),Ee(!s.pathname||!s.pathname.includes("?"),Rl("?","pathname","search",s)),Ee(!s.pathname||!s.pathname.includes("#"),Rl("#","pathname","hash",s)),Ee(!s.search||!s.search.includes("#"),Rl("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,a;if(l==null)a=n;else{let d=t.length-1;if(!r&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?t[d]:"/"}let i=hg(s,a),u=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(u||f)&&(i.pathname+="/"),i}const gn=e=>e.join("/").replace(/\/\/+/g,"/"),pg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Qf=["post","put","patch","delete"];new Set(Qf);const xg=["get",...Qf];new Set(xg);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fs(){return fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fs.apply(this,arguments)}const bi=y.createContext(null),wg=y.createContext(null),In=y.createContext(null),el=y.createContext(null),Kt=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Hf=y.createContext(null);function Sg(e,t){let{relative:n}=t===void 0?{}:t;Ir()||Ee(!1);let{basename:r,navigator:s}=y.useContext(In),{hash:o,pathname:l,search:a}=Yf(e,{relative:n}),i=l;return r!=="/"&&(i=l==="/"?r:gn([r,l])),s.createHref({pathname:i,search:a,hash:o})}function Ir(){return y.useContext(el)!=null}function zt(){return Ir()||Ee(!1),y.useContext(el).location}function Wf(e){y.useContext(In).static||y.useLayoutEffect(e)}function Ss(){let{isDataRoute:e}=y.useContext(Kt);return e?Lg():kg()}function kg(){Ir()||Ee(!1);let e=y.useContext(bi),{basename:t,future:n,navigator:r}=y.useContext(In),{matches:s}=y.useContext(Kt),{pathname:o}=zt(),l=JSON.stringify(Ai(s,n.v7_relativeSplatPath)),a=y.useRef(!1);return Wf(()=>{a.current=!0}),y.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=_i(u,JSON.parse(l),o,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:gn([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,l,o,e])}function Uv(){let{matches:e}=y.useContext(Kt),t=e[e.length-1];return t?t.params:{}}function Yf(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=y.useContext(In),{matches:s}=y.useContext(Kt),{pathname:o}=zt(),l=JSON.stringify(Ai(s,r.v7_relativeSplatPath));return y.useMemo(()=>_i(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function Ig(e,t){return Eg(e,t)}function Eg(e,t,n,r){Ir()||Ee(!1);let{navigator:s}=y.useContext(In),{matches:o}=y.useContext(Kt),l=o[o.length-1],a=l?l.params:{};l&&l.pathname;let i=l?l.pathnameBase:"/";l&&l.route;let u=zt(),f;if(t){var d;let E=typeof t=="string"?kr(t):t;i==="/"||(d=E.pathname)!=null&&d.startsWith(i)||Ee(!1),f=E}else f=u;let h=f.pathname||"/",x=h;if(i!=="/"){let E=i.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=Kp(e,{pathname:x}),S=jg(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:gn([i,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?i:gn([i,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return t&&S?y.createElement(el.Provider,{value:{location:fs({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ln.Pop}},S):S}function Ng(){let e=bg(),t=vg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:s},n):null,null)}const Cg=y.createElement(Ng,null);class Pg extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(Kt.Provider,{value:this.props.routeContext},y.createElement(Hf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tg(e){let{routeContext:t,match:n,children:r}=e,s=y.useContext(bi);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Kt.Provider,{value:t},r)}function jg(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=l.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||Ee(!1),l=l.slice(0,Math.min(l.length,f+1))}let i=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<l.length;f++){let d=l[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:x}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){i=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,d,h)=>{let x,v=!1,S=null,E=null;n&&(x=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||Cg,i&&(u<0&&h===0?(Mg("route-fallback"),v=!0,E=null):u===h&&(v=!0,E=d.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,h+1)),m=()=>{let g;return x?g=S:v?g=E:d.route.Component?g=y.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=f,y.createElement(Tg,{match:d,routeContext:{outlet:f,matches:p,isDataRoute:n!=null},children:g})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?y.createElement(Pg,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var qf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qf||{}),Kf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Kf||{});function Rg(e){let t=y.useContext(bi);return t||Ee(!1),t}function Ag(e){let t=y.useContext(wg);return t||Ee(!1),t}function _g(e){let t=y.useContext(Kt);return t||Ee(!1),t}function Xf(e){let t=_g(),n=t.matches[t.matches.length-1];return n.route.id||Ee(!1),n.route.id}function bg(){var e;let t=y.useContext(Hf),n=Ag(),r=Xf();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Lg(){let{router:e}=Rg(qf.UseNavigateStable),t=Xf(Kf.UseNavigateStable),n=y.useRef(!1);return Wf(()=>{n.current=!0}),y.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,fs({fromRouteId:t},o)))},[e,t])}const sc={};function Mg(e,t,n){sc[e]||(sc[e]=!0)}function zg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ug(e){let{to:t,replace:n,state:r,relative:s}=e;Ir()||Ee(!1);let{future:o,static:l}=y.useContext(In),{matches:a}=y.useContext(Kt),{pathname:i}=zt(),u=Ss(),f=_i(t,Ai(a,o.v7_relativeSplatPath),i,s==="path"),d=JSON.stringify(f);return y.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:s}),[u,d,s,n,r]),null}function De(e){Ee(!1)}function Dg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=ln.Pop,navigator:o,static:l=!1,future:a}=e;Ir()&&Ee(!1);let i=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:i,navigator:o,static:l,future:fs({v7_relativeSplatPath:!1},a)}),[i,a,o,l]);typeof r=="string"&&(r=kr(r));let{pathname:f="/",search:d="",hash:h="",state:x=null,key:v="default"}=r,S=y.useMemo(()=>{let E=Ri(f,i);return E==null?null:{location:{pathname:E,search:d,hash:h,state:x,key:v},navigationType:s}},[i,f,d,h,x,v,s]);return S==null?null:y.createElement(In.Provider,{value:u},y.createElement(el.Provider,{children:n,value:S}))}function $g(e){let{children:t,location:n}=e;return Ig(ja(t),n)}new Promise(()=>{});function ja(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(r,s)=>{if(!y.isValidElement(r))return;let o=[...t,s];if(r.type===y.Fragment){n.push.apply(n,ja(r.props.children,o));return}r.type!==De&&Ee(!1),!r.props.index||!r.props.children||Ee(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=ja(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ra.apply(this,arguments)}function Og(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Fg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Bg(e,t){return e.button===0&&(!t||t==="_self")&&!Fg(e)}function Aa(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Vg(e,t){let n=Aa(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const Gg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qg="6";try{window.__reactRouterVersion=Qg}catch{}const Hg="startTransition",oc=Lh[Hg];function Wg(e){let{basename:t,children:n,future:r,window:s}=e,o=y.useRef();o.current==null&&(o.current=Wp({window:s,v5Compat:!0}));let l=o.current,[a,i]=y.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},f=y.useCallback(d=>{u&&oc?oc(()=>i(d)):i(d)},[i,u]);return y.useLayoutEffect(()=>l.listen(f),[l,f]),y.useEffect(()=>zg(r),[r]),y.createElement(Dg,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:l,future:r})}const Yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lc=y.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:l,state:a,target:i,to:u,preventScrollReset:f,viewTransition:d}=t,h=Og(t,Gg),{basename:x}=y.useContext(In),v,S=!1;if(typeof u=="string"&&qg.test(u)&&(v=u,Yg))try{let g=new URL(window.location.href),w=u.startsWith("//")?new URL(g.protocol+u):new URL(u),k=Ri(w.pathname,x);w.origin===g.origin&&k!=null?u=k+w.search+w.hash:S=!0}catch{}let E=Sg(u,{relative:s}),p=Kg(u,{replace:l,state:a,target:i,preventScrollReset:f,relative:s,viewTransition:d});function m(g){r&&r(g),g.defaultPrevented||p(g)}return y.createElement("a",Ra({},h,{href:v||E,onClick:S||o?r:m,ref:n,target:i}))});var ac;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ac||(ac={}));var ic;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ic||(ic={}));function Kg(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:l,viewTransition:a}=t===void 0?{}:t,i=Ss(),u=zt(),f=Yf(e,{relative:l});return y.useCallback(d=>{if(Bg(d,n)){d.preventDefault();let h=r!==void 0?r:_o(u)===_o(f);i(e,{replace:h,state:s,preventScrollReset:o,relative:l,viewTransition:a})}},[u,i,f,r,s,n,e,o,l,a])}function Dv(e){let t=y.useRef(Aa(e)),n=y.useRef(!1),r=zt(),s=y.useMemo(()=>Vg(r.search,n.current?null:t.current),[r.search]),o=Ss(),l=y.useCallback((a,i)=>{const u=Aa(typeof a=="function"?a(s):a);n.current=!0,o("?"+u,i)},[o,s]);return[s,l]}const Xg={},uc=e=>{let t;const n=new Set,r=(f,d)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const x=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,x))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Xg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,i);return i},Jg=e=>e?uc(e):uc;var Jf={exports:{}},Zf={},eh={exports:{}},th={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vr=y;function Zg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var e0=typeof Object.is=="function"?Object.is:Zg,t0=vr.useState,n0=vr.useEffect,r0=vr.useLayoutEffect,s0=vr.useDebugValue;function o0(e,t){var n=t(),r=t0({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return r0(function(){s.value=n,s.getSnapshot=t,Al(s)&&o({inst:s})},[e,n,t]),n0(function(){return Al(s)&&o({inst:s}),e(function(){Al(s)&&o({inst:s})})},[e]),s0(n),n}function Al(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!e0(e,n)}catch{return!0}}function l0(e,t){return t()}var a0=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l0:o0;th.useSyncExternalStore=vr.useSyncExternalStore!==void 0?vr.useSyncExternalStore:a0;eh.exports=th;var i0=eh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=y,u0=i0;function c0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var d0=typeof Object.is=="function"?Object.is:c0,f0=u0.useSyncExternalStore,h0=tl.useRef,m0=tl.useEffect,p0=tl.useMemo,g0=tl.useDebugValue;Zf.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=h0(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=p0(function(){function i(x){if(!u){if(u=!0,f=x,x=r(x),s!==void 0&&l.hasValue){var v=l.value;if(s(v,x))return d=v}return d=x}if(v=d,d0(f,x))return v;var S=r(x);return s!==void 0&&s(v,S)?(f=x,v):(f=x,d=S)}var u=!1,f,d,h=n===void 0?null:n;return[function(){return i(t())},h===null?void 0:function(){return i(h())}]},[t,n,r,s]);var a=f0(e,o[0],o[1]);return m0(function(){l.hasValue=!0,l.value=a},[a]),g0(a),a};Jf.exports=Zf;var y0=Jf.exports;const v0=jc(y0),nh={},{useDebugValue:x0}=Ua,{useSyncExternalStoreWithSelector:w0}=v0;let cc=!1;const S0=e=>e;function k0(e,t=S0,n){(nh?"production":void 0)!=="production"&&n&&!cc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),cc=!0);const r=w0(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return x0(r),r}const dc=e=>{(nh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Jg(e):e,n=(r,s)=>k0(t,r,s);return Object.assign(n,t),n},Vn=e=>e?dc(e):dc,I0={};function E0(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const l=i=>i===null?null:JSON.parse(i,void 0),a=(o=n.getItem(s))!=null?o:null;return a instanceof Promise?a.then(l):l(a)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const hs=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return hs(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return hs(r)(n)}}}},N0=(e,t)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,p)=>({...p,...E}),...t},l=!1;const a=new Set,i=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...E)},r,s);const f=hs(o.serialize),d=()=>{const E=o.partialize({...r()});let p;const m=f({state:E,version:o.version}).then(g=>u.setItem(o.name,g)).catch(g=>{p=g});if(p)throw p;return m},h=s.setState;s.setState=(E,p)=>{h(E,p),d()};const x=e((...E)=>{n(...E),d()},r,s);let v;const S=()=>{var E;if(!u)return;l=!1,a.forEach(m=>m(r()));const p=((E=o.onRehydrateStorage)==null?void 0:E.call(o,r()))||void 0;return hs(u.getItem.bind(u))(o.name).then(m=>{if(m)return o.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return o.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var g;return v=o.merge(m,(g=r())!=null?g:x),n(v,!0),d()}).then(()=>{p==null||p(v,void 0),l=!0,i.forEach(m=>m(v))}).catch(m=>{p==null||p(void 0,m)})};return s.persist={setOptions:E=>{o={...o,...E},E.getStorage&&(u=E.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>S(),hasHydrated:()=>l,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(i.add(E),()=>{i.delete(E)})},S(),v||x},C0=(e,t)=>(n,r,s)=>{let o={storage:E0(()=>localStorage),partialize:S=>S,version:0,merge:(S,E)=>({...E,...S}),...t},l=!1;const a=new Set,i=new Set;let u=o.storage;if(!u)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...S)},r,s);const f=()=>{const S=o.partialize({...r()});return u.setItem(o.name,{state:S,version:o.version})},d=s.setState;s.setState=(S,E)=>{d(S,E),f()};const h=e((...S)=>{n(...S),f()},r,s);s.getInitialState=()=>h;let x;const v=()=>{var S,E;if(!u)return;l=!1,a.forEach(m=>{var g;return m((g=r())!=null?g:h)});const p=((E=o.onRehydrateStorage)==null?void 0:E.call(o,(S=r())!=null?S:h))||void 0;return hs(u.getItem.bind(u))(o.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return[!0,o.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var g;const[w,k]=m;if(x=o.merge(k,(g=r())!=null?g:h),n(x,!0),w)return f()}).then(()=>{p==null||p(x,void 0),x=r(),l=!0,i.forEach(m=>m(x))}).catch(m=>{p==null||p(void 0,m)})};return s.persist={setOptions:S=>{o={...o,...S},S.storage&&(u=S.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(i.add(S),()=>{i.delete(S)})},o.skipHydration||v(),x||h},P0=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((I0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),N0(e,t)):C0(e,t),ks=P0,L={log:(...e)=>{},warn:(...e)=>{},error:(...e)=>{console.error(...e)},debug:(...e)=>{}};function rh(e){let t=null,n=null;function r(){return t?Promise.resolve(t):n||(n=new Promise((s,o)=>{const l=indexedDB.open(e,1);l.onupgradeneeded=()=>{const a=l.result;a.objectStoreNames.contains("zustand")||a.createObjectStore("zustand")},l.onsuccess=()=>{t=l.result,t.onclose=()=>{t=null,n=null},s(t)},l.onerror=()=>{n=null,o(l.error)}}),n)}return{getItem:async s=>{try{const o=await r();return new Promise(l=>{const u=o.transaction(["zustand"],"readonly").objectStore("zustand").get(s);u.onsuccess=()=>{const f=u.result;l(f?JSON.parse(f):null)},u.onerror=()=>{l(null)}})}catch{return null}},setItem:async(s,o)=>{const l=await r();return new Promise((a,i)=>{const d=l.transaction(["zustand"],"readwrite").objectStore("zustand").put(JSON.stringify(o),s);d.onsuccess=()=>{a()},d.onerror=()=>{i(d.error)}})},removeItem:async s=>{try{const o=await r();return new Promise(l=>{const u=o.transaction(["zustand"],"readwrite").objectStore("zustand").delete(s);u.onsuccess=()=>{l()},u.onerror=()=>{l()}})}catch{}}}}const ms={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){L.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){L.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){L.error("Failed to clear localStorage:",e)}}};function T0(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}function $v(e){const t=Math.floor(e/1e7),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function so(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function Ov(e){return e&&so(e).replace(/'/g,"")}function Bt(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window)}function j0(e){if(!e||e.trim()==="")return null;const t=e.trim().toLowerCase(),n=t.indexOf("_");return n===-1?{category:t,value:null}:{category:t.substring(0,n),value:t.substring(n+1)}}function $e(e){if(e.length<=1)return[...e];const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}const R0=rh("tunetuna-storage");function fc(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function Fv(e){const t=new Map;e.forEach(r=>{r.Grouping&&r.Grouping.forEach(s=>{const o=j0(s);o&&(t.has(o.category)||t.set(o.category,new Set),o.value&&t.get(o.category).add(o.value))})});const n=[];for(const[r,s]of t)n.push({name:fc(r),key:r,values:Array.from(s).map(o=>fc(o)).sort(),isSingleValue:s.size===0});return n.sort((r,s)=>r.name.localeCompare(s.name))}const re=Vn()(ks(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],shufflePool:[],lastPoolUpdate:null,loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1,feed:!1},feedTopSongs:[],feedNewReleases:[],feedLastUpdated:null,sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},recentlyAccessedMoods:{},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(o=>o.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t}),refreshShufflePool:()=>e(t=>{let r=t.songs;const s=Object.values(t.genreSongs).flat().length;if(t.songs.length===0&&s>0&&(r=Object.values(t.genreSongs).flat()),r.length===0)return{shufflePool:[]};const o=new Set(t.recentlyPlayed.slice(0,10).map(i=>i.Id));r=r.filter(i=>!o.has(i.Id));let l=r;if(l.length<30){const i=t.recentlyPlayed.slice(0,30-l.length);l=[...l,...i.map(u=>t.songs.find(f=>f.Id===u.Id)).filter(Boolean)]}return{shufflePool:$e(l).slice(0,30),lastPoolUpdate:Date.now()}}),setFeedTopSongs:t=>e({feedTopSongs:t}),setFeedNewReleases:t=>e({feedNewReleases:t}),setFeedLastUpdated:t=>e({feedLastUpdated:t}),recordMoodAccess:t=>e(n=>({recentlyAccessedMoods:{...n.recentlyAccessedMoods,[t.toLowerCase()]:Date.now()}}))}),{name:"music-storage",storage:R0,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,shufflePool:e.shufflePool,lastPoolUpdate:e.lastPoolUpdate,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed,recentlyAccessedMoods:e.recentlyAccessedMoods,feedTopSongs:e.feedTopSongs,feedNewReleases:e.feedNewReleases,feedLastUpdated:e.feedLastUpdated})})),hc=3e4,A0=15e3,mc=2,_0=1e3,pc=12*60*60*1e3,Bv=6*60*60*1e3,Ut=200,gc=1e3,b0=5e4,L0=/^https?:\/\/100\.\d+\.\d+\.\d+/,M0="Tunetuna",z0="Web",U0="1.0.0",He=Vn()(ks(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!1,stats:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),showQueueRecommendations:!0,setShowQueueRecommendations:t=>e({showQueueRecommendations:t}),recommendationsQuality:"good",setRecommendationsQuality:t=>e({recommendationsQuality:t}),statsTrackingEnabled:!0,setStatsTrackingEnabled:t=>e({statsTrackingEnabled:t}),feedCountry:"gb",setFeedCountry:t=>e({feedCountry:t}),showMoodCards:!0,setShowMoodCards:t=>e({showMoodCards:t}),showTop10:!0,setShowTop10:t=>e({showTop10:t}),showNewReleases:!1,setShowNewReleases:t=>e({showNewReleases:t}),showRecentlyPlayed:!0,setShowRecentlyPlayed:t=>e({showRecentlyPlayed:t}),muspyRssUrl:"",setMuspyRssUrl:t=>e({muspyRssUrl:t}),localServerUrl:"",setLocalServerUrl:t=>e({localServerUrl:t})}),{name:"settings-storage"})),bo=Vn(e=>({toasts:[],addToast:(t,n="success",r=3e3)=>{const s=`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,o={id:s,message:t,type:n,duration:r};e(l=>({toasts:[...l.toasts,o]})),r>0&&setTimeout(()=>{e(l=>({toasts:l.toasts.filter(a=>a.id!==s)}))},r)},removeToast:t=>{e(n=>({toasts:n.toasts.filter(r=>r.id!==t)}))}})),Rt="/api/stats",D0=rh("tunetuna-stats-storage");async function $0(e,t){const n=`${e}::${t}`,r=new TextEncoder,s=await crypto.subtle.digest("SHA-256",r.encode(n));return Array.from(new Uint8Array(s)).map(l=>l.toString(16).padStart(2,"0")).join("")}function O0(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function F0(e,t){var n,r;return{ts:Date.now(),songId:e.Id,songName:e.Name||"Unknown",artistIds:((n=e.ArtistItems)==null?void 0:n.map(s=>s.Id))||[],artistNames:((r=e.ArtistItems)==null?void 0:r.map(s=>s.Name||"Unknown"))||[e.AlbumArtist||"Unknown"],albumId:e.AlbumId||"",albumName:e.Album||"Unknown",genres:e.Genres||[],year:e.ProductionYear||null,durationMs:t,fullDurationMs:e.RunTimeTicks?e.RunTimeTicks/1e4:0}}let _l=!1;const Fe=Vn()(ks((e,t)=>({pendingEvents:[],lastSyncedAt:null,cachedEvents:[],cacheRange:null,currentPlay:null,cachedStatsKey:null,cachedStatsToken:null,metadataVersion:0,oldestEventTs:null,startPlay:n=>{e({currentPlay:{track:n,startedAt:Date.now()}})},recordPlay:(n,r)=>{if(!He.getState().statsTrackingEnabled)return;const{pendingEvents:s}=t(),o=n.RunTimeTicks?n.RunTimeTicks/1e4:0,l=o>0&&o<6e4;if(!(r>=6e4||l&&r>=o*.8))return;const i=F0(n,r),u=[...s,i];e({pendingEvents:u,currentPlay:null}),t().syncToServer()},syncToServer:async()=>{if(!_l){_l=!0;try{const{pendingEvents:n}=t();if(n.length===0)return;const{serverUrl:r,userId:s}=Qe.getState();if(!r||!s)return;await t().updateStatsKey();const{cachedStatsKey:o,cachedStatsToken:l}=t();if(!o||!l)return;const a=n.map(i=>({...i,durationMs:i.durationMs??i.fullDurationMs??6e4}));try{const i=await fetch(`${Rt}/${o}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":l},body:JSON.stringify({_token:l,events:a})});i.ok?e(u=>({pendingEvents:u.pendingEvents.filter(f=>!a.some(d=>d.ts===f.ts&&d.songId===f.songId)),lastSyncedAt:Date.now(),cacheRange:null})):console.error("[Stats] Sync failed:",i.status,i.statusText)}catch(i){console.error("[Stats] Sync error:",i)}}finally{_l=!1}}},updateStatsKey:async()=>{const{serverUrl:n,userId:r}=Qe.getState();if(!n||!r){e({cachedStatsKey:null,cachedStatsToken:null});return}const{cachedStatsToken:s}=t(),o=s||O0(),l=await $0(n,r);e({cachedStatsKey:l,cachedStatsToken:o})},fetchEvents:async(n,r)=>{const{cacheRange:s,cachedEvents:o,pendingEvents:l}=t(),{serverUrl:a,userId:i}=Qe.getState();if(!a||!i)return[];if(s&&s.from<=n&&s.to>=r){const d=o.filter(x=>x.ts>=n&&x.ts<=r),h=l.filter(x=>x.ts>=n&&x.ts<=r);return[...d,...h].sort((x,v)=>x.ts-v.ts)}await t().updateStatsKey();const{cachedStatsKey:u,cachedStatsToken:f}=t();if(!u||!f)return[];try{const d=await fetch(`${Rt}/${u}/events?from=${n}&to=${r}`,{headers:{"X-Stats-Token":f}});if(!d.ok)return[];const x=(await d.json()).events||[];e({cachedEvents:x,cacheRange:{from:n,to:r}});const v=l.filter(S=>S.ts>=n&&S.ts<=r);return[...x,...v].sort((S,E)=>S.ts-E.ts)}catch{return[]}},clearCache:()=>{e({cachedEvents:[],cacheRange:null})},updateEventMetadata:(n,r,s)=>{const{cachedEvents:o,pendingEvents:l}=t(),a=i=>{let u=!1;return(n==="song"&&i.songId===r||n==="album"&&i.albumId===r||n==="artist"&&i.artistIds.includes(r))&&(u=!0),u?{...i,...s.songName!==void 0&&{songName:s.songName},...s.artistNames!==void 0&&{artistNames:s.artistNames},...s.albumName!==void 0&&{albumName:s.albumName},...s.genres!==void 0&&{genres:s.genres},...s.year!==void 0&&{year:s.year}}:i};e(i=>({cachedEvents:o.map(a),pendingEvents:l.map(a),metadataVersion:i.metadataVersion+1})),(async()=>{const{serverUrl:i,userId:u}=Qe.getState();if(!i||!u)return;await t().updateStatsKey();const{cachedStatsKey:f,cachedStatsToken:d}=t();if(!(!f||!d))try{await fetch(`${Rt}/${f}/events/metadata`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Stats-Token":d},body:JSON.stringify({itemType:n,itemId:r,metadata:s})})}catch{}})()},exportStats:async()=>{const{pendingEvents:n}=t(),{serverUrl:r,userId:s}=Qe.getState();let o=[...n];if(r&&s){await t().updateStatsKey();const{cachedStatsKey:u,cachedStatsToken:f}=t();if(u&&f)try{const d=await fetch(`${Rt}/${u}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":f}});if(d.ok){const x=(await d.json()).events||[],v=new Set(o.map(S=>`${S.ts}-${S.songId}`));for(const S of x){const E=`${S.ts}-${S.songId}`;v.has(E)||o.push(S)}}}catch{}}o.sort((u,f)=>u.ts-f.ts);const l=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),a=URL.createObjectURL(l),i=document.createElement("a");i.href=a,i.download=`tunetuna-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},clearLocalStats:()=>{e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null})},clearAllStats:async()=>{const{serverUrl:n,userId:r}=Qe.getState();if(e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null}),n&&r){await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:o}=t();if(s&&o)try{return(await fetch(`${Rt}/${s}/events`,{method:"DELETE",headers:{"X-Stats-Token":o}})).ok}catch{return!1}}return!0},importStats:async n=>{const{serverUrl:r,userId:s}=Qe.getState();if(!r||!s)throw new Error("Not authenticated");const o=await n.text();let l;try{l=JSON.parse(o)}catch{throw new Error("Invalid JSON file")}if(!Array.isArray(l))throw new Error("File must contain an array of events");const a=l.filter(v=>typeof v.ts=="number"&&typeof v.songId=="string"&&typeof v.songName=="string"&&Array.isArray(v.artistIds)&&Array.isArray(v.artistNames)&&typeof v.albumId=="string"&&typeof v.albumName=="string"&&Array.isArray(v.genres)&&typeof v.fullDurationMs=="number");if(a.length===0)throw new Error("No valid events found in file");await t().updateStatsKey();const{cachedStatsKey:i,cachedStatsToken:u}=t();if(!i||!u)throw new Error("Failed to initialize stats authentication");let f=new Set;try{const v=await fetch(`${Rt}/${i}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":u}});if(v.ok){const E=(await v.json()).events||[];f=new Set(E.map(p=>`${p.ts}-${p.songId}`))}}catch{}const{pendingEvents:d}=t();for(const v of d)f.add(`${v.ts}-${v.songId}`);const h=a.filter(v=>!f.has(`${v.ts}-${v.songId}`));if(h.length===0)return{imported:0,skipped:a.length};if(!(await fetch(`${Rt}/${i}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":u},body:JSON.stringify(h)})).ok)throw new Error("Failed to upload events");return e({cacheRange:null}),{imported:h.length,skipped:a.length-h.length}},hasStats:async()=>{var a;const{pendingEvents:n}=t();if(n.length>0)return!0;const{serverUrl:r,userId:s}=Qe.getState();if(!r||!s)return!1;await t().updateStatsKey();const{cachedStatsKey:o,cachedStatsToken:l}=t();if(!o||!l)return!1;try{const i=await fetch(`${Rt}/${o}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":l}});if(i.ok)return(((a=(await i.json()).events)==null?void 0:a.length)||0)>0}catch{}return!1},initializeOldestTs:async()=>{const{serverUrl:n,userId:r}=Qe.getState();if(!n||!r)return;await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:o,pendingEvents:l}=t();if(!(!s||!o))try{const a=await fetch(`${Rt}/${s}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":o}});if(a.ok){const u=(await a.json()).events||[];l.length>0&&await t().syncToServer();const f=[...u,...l];if(f.length>0){const d=Math.min(...f.map(h=>h.ts));e({oldestEventTs:d})}}}catch{}}}),{name:"stats-storage",storage:D0,partialize:e=>({pendingEvents:e.pendingEvents,lastSyncedAt:e.lastSyncedAt,cachedStatsToken:e.cachedStatsToken,oldestEventTs:e.oldestEventTs})}));let yc=!1,bl=null;function vc(){const{pendingEvents:e,cachedStatsKey:t,cachedStatsToken:n}=Fe.getState();if(e.length>0&&t&&n){const r={_token:n,events:e},s=new Blob([JSON.stringify(r)],{type:"application/json"});return navigator.sendBeacon(`${Rt}/${t}/events`,s),!0}return!1}function B0(){yc||typeof document>"u"||(yc=!0,document.addEventListener("visibilitychange",()=>{const{pendingEvents:e}=Fe.getState();document.visibilityState==="hidden"?e.length>0&&vc():document.visibilityState==="visible"&&e.length>0&&Fe.getState().syncToServer()}),window.addEventListener("beforeunload",()=>{vc()}),setTimeout(()=>{bl&&bl(),bl=Qe.subscribe((n,r)=>{(n.serverUrl!==r.serverUrl||n.userId!==r.userId)&&(Fe.getState().updateStatsKey(),Fe.getState().initializeOldestTs())});const{serverUrl:e,userId:t}=Qe.getState();e&&t&&(Fe.getState().updateStatsKey(),Fe.getState().initializeOldestTs())},0))}B0();const xc=100,Wr=new Set,Lo=new Map,Mo=new Set;let Je=null;function V0(){if(Wr.size>xc){const e=Array.from(Wr);e.slice(0,e.length-xc).forEach(n=>Wr.delete(n))}}function sh(){Wr.clear();for(const e of Lo.values())clearTimeout(e);Lo.clear();for(const e of Mo)clearTimeout(e);Mo.clear(),Je&&(clearTimeout(Je),Je=null)}function wc(e,t,n=5e3){const r=setTimeout(async()=>{const s=t();if((s==null?void 0:s.Id)===e)try{await V.markItemAsPlayed(e),Wr.add(e),V0();const o=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}})),Mo.delete(o)},4e3);Mo.add(o)}catch{}Lo.delete(e)},n);Lo.set(e,r)}const X=Vn()(ks((e,t)=>({songs:[],currentIndex:-1,previousIndex:-1,standardOrder:[],shuffleOrder:[],isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,nextAudioElement:null,nextTrackId:null,isFetchingRecommendations:!1,isLoadingMoreSongs:!1,shuffleHasMoreSongs:!1,lastPlayedTrack:null,isShuffleAllActive:!1,isShuffleGenreActive:!1,manuallyCleared:!1,hasRecordedCurrentTrackStats:!1,isQueueSidebarOpen:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setNextAudioElement:n=>{e({nextAudioElement:n}),n&&(n.volume=t().volume)},preBufferNextTrack:()=>{const{nextAudioElement:n,currentIndex:r,songs:s,repeat:o,nextTrackId:l}=t();if(!n||o==="one")return;let a=r+1;if(a>=s.length)if(o==="all")a=0;else{l&&(e({nextTrackId:null}),n.removeAttribute("src"),n.load());return}const i=s[a];if(!i||l===i.Id)return;const u=V.serverBaseUrl;if(!u)return;const f=`${u}/Audio/${i.Id}/stream?static=true`;n.src=f,n.load(),e({nextTrackId:i.Id})},swapToPreBuffered:()=>{const{audioElement:n,nextAudioElement:r,nextTrackId:s,currentIndex:o,songs:l,repeat:a}=t();if(!r||!s)return;let i=o+1;if(i>=l.length)if(a==="all")i=0;else return;const u=l[i];if(!u||u.Id!==s){t().cancelPreBuffer();return}const f=t();if(!f.hasRecordedCurrentTrackStats&&f.currentIndex>=0&&f.currentIndex<f.songs.length){const x=f.songs[f.currentIndex];Fe.getState().recordPlay(x,f.currentTime*1e3)}n&&(n.pause(),n.removeAttribute("src"),n.load());const d=o>=0?l[o]:null,h=r.duration&&!isNaN(r.duration)?r.duration:0;e({audioElement:r,nextAudioElement:n,nextTrackId:null,previousIndex:o,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:h,isPlaying:!0}),r.play().then(()=>{wc(u.Id,()=>t().songs[t().currentIndex]||null),re.getState().addToRecentlyPlayed(u),Fe.getState().startPlay(u)}).catch(x=>{L.error("[Gapless] Playback error on swapped element:",x),e({isPlaying:!1})})},cancelPreBuffer:()=>{const{nextAudioElement:n}=t();n&&(n.removeAttribute("src"),n.load()),e({nextTrackId:null})},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setIsLoadingMoreSongs:n=>{e({isLoadingMoreSongs:n})},setCurrentTime:n=>{const{currentIndex:r,songs:s,hasRecordedCurrentTrackStats:o}=t();if(e({currentTime:n}),n>=60&&!o&&r>=0&&r<s.length){const l=s[r];Fe.getState().recordPlay(l,n*1e3),e({hasRecordedCurrentTrackStats:!0})}},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n);const s=t().nextAudioElement;s&&(s.volume=n)},clearQueue:()=>{t().cancelPreBuffer(),Je&&(clearTimeout(Je),Je=null),e(n=>{const r=n.currentIndex>=0?[n.songs[n.currentIndex]]:[];return{songs:r,currentIndex:r.length>0?0:-1,previousIndex:-1,standardOrder:r.map(s=>s.Id),shuffleOrder:r.map(s=>s.Id),manuallyCleared:!0}})},addToQueue:(n,r=!1,s="user")=>{t().cancelPreBuffer(),e(o=>{const l=o.currentIndex>=0?o.songs[o.currentIndex]:null,a=n.map(v=>({...v,source:s}));let i;const u=a;if(r){const v=o.shuffle?$e([...a]):a,S=o.currentIndex+1,E=o.songs.slice(0,S),p=o.songs.slice(S);i=[...E,...v,...p]}else if(s==="recommendation")i=[...o.songs,...u];else{const v=o.songs.findIndex((S,E)=>E>o.currentIndex&&S.source==="recommendation");v!==-1?i=[...o.songs.slice(0,v),...u,...o.songs.slice(v)]:i=[...o.songs,...u]}let f=o.currentIndex;if(o.currentIndex>=0&&l){const v=i.findIndex(S=>S.Id===l.Id);v!==-1?f=v:L.error("[addToQueue] CRITICAL: Could not find current song in new queue!")}let d=i;if(i.length>1e3){const v=i.slice(0,f),S=i.slice(f+1),E=v.slice(-5),p=S,m=1e3-E.length-(l?1:0)-p.length,g=v.slice(-Math.max(0,m));d=[...g,...l?[l]:[],...p],f=l?g.length:-1}const x=d.filter(v=>v.source==="user").map(v=>v.Id);return{songs:d,currentIndex:f,standardOrder:x,shuffleOrder:x,manuallyCleared:!1}})},addToQueueWithToast:n=>{t().addToQueue(n,!1,"user");const r=n.length,s=r===1?"Added to queue":`${r} songs added to queue`;bo.getState().addToast(s,"success",2e3)},removeFromQueue:n=>{t().cancelPreBuffer(),e(r=>{if(n<0||n>=r.songs.length)return r;const s=r.songs[n],o=r.songs.filter((f,d)=>d!==n);let l=r.standardOrder.filter(f=>f!==s.Id),a=r.shuffleOrder.filter(f=>f!==s.Id),i=r.currentIndex,u=r.previousIndex;return n<r.currentIndex?i=r.currentIndex-1:n===r.currentIndex&&(i=-1),n<r.previousIndex?u=r.previousIndex-1:n===r.previousIndex&&(u=-1),{songs:o,currentIndex:i,previousIndex:u,standardOrder:l,shuffleOrder:a}})},reorderQueue:(n,r)=>{t().cancelPreBuffer(),e(s=>{if(n<0||r<0||n>=s.songs.length||r>=s.songs.length||n===r)return s;const o=s.songs[n],l=s.songs[r];if(o.source!==l.source)return s;const a=[...s.songs],[i]=a.splice(n,1);if(a.splice(r,0,i),o.source==="user"){const f=s.shuffle?"shuffleOrder":"standardOrder",d=s[f],h=d.indexOf(o.Id);if(h>=0){const x=[...d];x.splice(h,1);const S=a.slice(0,r+1).filter(p=>p.source==="user").length-1;x.splice(S,0,o.Id);const E=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,[f]:x,currentIndex:E,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}}}const u=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,currentIndex:u,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}})},play:()=>{const{audioElement:n,currentIndex:r,songs:s,currentTime:o}=t();if(n&&r>=0&&r<s.length){const l=s[r],a=V.serverBaseUrl,i=a?`${a}/Audio/${l.Id}/stream?static=true`:"";n.src!==i?(n.src=i,n.load()):o===0&&n.currentTime>.5&&(n.currentTime=0,n.duration&&!isNaN(n.duration)&&e({duration:n.duration})),n.play().then(()=>{e({isPlaying:!0,hasRecordedCurrentTrackStats:!1}),wc(l.Id,()=>t().songs[t().currentIndex]||null),re.getState().addToRecentlyPlayed(l),Fe.getState().startPlay(l)}).catch(u=>{L.error("Playback error:",u),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const n=t();if(n.songs.length===0)return;if(n.repeat==="one"&&n.currentIndex>=0){t().seek(0),t().play();return}let r=n.currentIndex+1;if(r>=n.songs.length)if(n.repeat==="all")r=0;else{if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const l=n.songs[n.currentIndex];Fe.getState().recordPlay(l,n.currentTime*1e3)}t().pause();return}const s=n.songs[r];if(n.nextTrackId&&s&&n.nextTrackId===s.Id){t().swapToPreBuffered();return}if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const l=n.songs[n.currentIndex];Fe.getState().recordPlay(l,n.currentTime*1e3)}const o=n.currentIndex>=0?n.songs[n.currentIndex]:null;e({previousIndex:n.currentIndex,currentIndex:r,lastPlayedTrack:o}),t().play()},previous:()=>{t().cancelPreBuffer(),e(n=>{if(n.songs.length===0)return n;let r=n.currentIndex,s=n.currentIndex;if(n.currentIndex>0)r=n.currentIndex-1;else if(n.repeat==="all")r=n.songs.length-1;else return n;return{currentIndex:r,previousIndex:s}}),t().play()},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n})),window.dispatchEvent(new CustomEvent("playerSeek"))},toggleShuffle:()=>{t().cancelPreBuffer(),e(n=>{const r=!n.shuffle;if(r){const s=n.songs.slice(0,n.currentIndex),o=n.currentIndex>=0?n.songs[n.currentIndex]:null,l=n.songs.slice(n.currentIndex+1).filter(h=>h.source==="user"),a=n.songs.filter(h=>h.source==="recommendation"),i=$e(l.map(h=>h.Id)),u=i.map(h=>l.find(x=>x.Id===h)).filter(Boolean),f=[...s,...o?[o]:[],...u,...a],d=[...n.standardOrder.slice(0,n.currentIndex+1),...i];return{shuffle:r,shuffleOrder:d,songs:f}}else{const s=n.songs.slice(0,n.currentIndex),o=n.currentIndex>=0?n.songs[n.currentIndex]:null,a=n.standardOrder.slice(n.currentIndex+1).map(f=>n.songs.find(d=>d.Id===f&&d.source==="user")).filter(Boolean),i=n.songs.filter(f=>f.source==="recommendation"),u=[...s,...o?[o]:[],...a,...i];return{shuffle:r,songs:u}}})},toggleRepeat:()=>{t().cancelPreBuffer(),e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{t().cancelPreBuffer();let s,o;r?(s=r,o=r.findIndex(a=>a.Id===n.Id),o===-1&&(s=[n,...r.filter(a=>a.Id!==n.Id)],o=0)):(s=[n],o=0);const l=s.map(a=>({...a,source:"user"}));e({songs:l,standardOrder:l.map(a=>a.Id),shuffleOrder:l.map(a=>a.Id),currentIndex:o,previousIndex:o>0?o-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playAlbum:(n,r=0)=>{t().cancelPreBuffer();const s=n.map(o=>({...o,source:"user"}));e({songs:s,standardOrder:s.map(o=>o.Id),shuffleOrder:s.map(o=>o.Id),currentIndex:r,previousIndex:r>0?r-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playNext:n=>{t().addToQueue(n,!0);const r=n.length,s=r===1?"Playing next":`${r} songs playing next`;bo.getState().addToast(s,"success",2e3)},shuffleArtist:n=>{t().cancelPreBuffer();const r=n.map(o=>({...o,source:"user"})),s=$e(r);e({songs:s,standardOrder:r.map(o=>o.Id),shuffleOrder:s.map(o=>o.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},shuffleAllSongs:async()=>{t().clearQueue();const{setShowQueueRecommendations:n}=He.getState();n(!1);const s=typeof window<"u"&&window.innerWidth<768?400:800,o=re.getState();let l=[];if(o.shufflePool.length>=1){const d=Math.min(5,o.shufflePool.length);l=o.shufflePool.slice(0,d);const h=o.shufflePool.slice(d),x=o.songs,v=new Set(o.recentlyPlayed.slice(0,10).map(m=>m.Id)),S=x.filter(m=>!v.has(m.Id)),E=$e(S).slice(0,d),p=[...h,...E];re.setState({shufflePool:p,lastPoolUpdate:Date.now()})}else{let d=o.songs;if(!d||d.length===0)try{d=(await V.getSongs({limit:Math.max(50,s),sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]}catch(h){L.error("Failed to fetch songs for shuffle all:",h);return}l=$e(d).slice(0,5),d.filter(h=>!l.some(x=>x.Id===h.Id)),re.setState({songs:d,shufflePool:$e(d).slice(0,30),lastPoolUpdate:Date.now()})}const a=l.map(d=>({...d,source:"user"})),i=l.length,f=o.songs.length+Object.values(o.genreSongs).flat().length>l.length;e({songs:a,standardOrder:a.map(d=>d.Id),shuffleOrder:a.map(d=>d.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:f,manuallyCleared:!0}),t().play(),Je&&clearTimeout(Je),Je=setTimeout(async()=>{Je=null;try{const d=t();if(!d.shuffle||d.songs.length!==i)return;let h=o.songs;(!h||h.length===0)&&(h=(await V.getSongs({limit:s,sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]);const x=Object.values(o.genreSongs).flat(),v=[...h,...x],S=new Map;v.forEach(g=>S.set(g.Id,g));const E=Array.from(S.values()),p=new Set(a.map(g=>g.Id)),m=E.filter(g=>!p.has(g.Id));if(m.length>0){const g=Math.min(s-i,m.length),k=$e(m).slice(0,g).map(N=>({...N,source:"user"}));e(N=>{const I=new Set(a.map(Q=>Q.Id)),P=N.songs.filter(Q=>!I.has(Q.Id)&&Q.source==="user"),T=[...a,...P,...k];let A=N.currentIndex;if(P.length>0&&N.currentIndex>=a.length){const Q=N.songs[N.currentIndex];Q&&(A=T.findIndex(Z=>Z.Id===Q.Id))}return{songs:T,currentIndex:A>=0?A:N.currentIndex,standardOrder:T.map(Q=>Q.Id),shuffleOrder:T.map(Q=>Q.Id),shuffleHasMoreSongs:m.length>g,manuallyCleared:!1}}),re.getState().refreshShufflePool()}}catch(d){L.error("Failed to expand shuffle queue:",d)}},100)},shuffleGenreSongs:async(n,r)=>{t().clearQueue();const{setShowQueueRecommendations:s}=He.getState();s(!1);const l=typeof window<"u"&&window.innerWidth<768?400:800,a=re.getState().genreSongs[n];if(!a||a.length===0)return;const i=$e(a).slice(0,5),u=a.filter(h=>!i.some(x=>x.Id===h.Id)),f=i.map(h=>({...h,source:"user"})),d=a.length>5;e({songs:f,standardOrder:f.map(h=>h.Id),shuffleOrder:f.map(h=>h.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:d,manuallyCleared:!0}),t().play(),Je&&clearTimeout(Je),Je=setTimeout(async()=>{Je=null;try{const h=t();if(!h.shuffle||h.songs.length!==5)return;if(u.length>0){const x=Math.min(l-5,u.length),S=$e(u).slice(0,x).map(E=>({...E,source:"user"}));e(E=>{const p=new Set(f.map(k=>k.Id)),m=E.songs.filter(k=>!p.has(k.Id)&&k.source==="user"),g=[...f,...m,...S];let w=E.currentIndex;if(m.length>0&&E.currentIndex>=f.length){const k=E.songs[E.currentIndex];k&&(w=g.findIndex(N=>N.Id===k.Id))}return{songs:g,currentIndex:w>=0?w:E.currentIndex,standardOrder:g.map(k=>k.Id),shuffleOrder:g.map(k=>k.Id),shuffleHasMoreSongs:u.length>x,manuallyCleared:!1}})}}catch(h){L.error("Failed to expand genre shuffle queue:",h)}},100)},skipToTrack:n=>{t().cancelPreBuffer();const{songs:r,currentIndex:s}=t();if(n<0||n>=r.length)return;const o=s>=0?r[s]:null;e({previousIndex:s>=0?s:-1,currentIndex:n,lastPlayedTrack:o,currentTime:0}),t().play()},refreshCurrentTrack:async()=>{const{currentIndex:n,songs:r}=t();if(n<0||n>=r.length)return;const s=r[n];try{const o=await V.getSongById(s.Id);o&&e(l=>{const a=[...l.songs];return a[l.currentIndex]={...a[l.currentIndex],...o},{songs:a}})}catch(o){L.error("Failed to refresh current track:",o)}},toggleQueueSidebar:()=>{e(n=>({isQueueSidebarOpen:!n.isQueueSidebarOpen}))}}),{name:"player-storage",partialize:e=>({songs:e.songs,currentIndex:e.currentIndex,previousIndex:e.previousIndex,standardOrder:e.standardOrder,shuffleOrder:e.shuffleOrder,volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,isShuffleAllActive:e.isShuffleAllActive,isShuffleGenreActive:e.isShuffleGenreActive,manuallyCleared:e.manuallyCleared,isQueueSidebarOpen:e.isQueueSidebarOpen}),onRehydrateStorage:e=>{e&&(e.isPlaying=!1,e.currentTime=0,e.duration=0,e.audioElement=null,e.nextAudioElement=null,e.nextTrackId=null,e.isFetchingRecommendations=!1,e.isShuffleAllActive=!1,e.isShuffleGenreActive=!1)}}));class G0{constructor(){ft(this,"baseUrl","");ft(this,"accessToken","");ft(this,"userId","");ft(this,"genresCache",null);ft(this,"isPreloading",!1);ft(this,"pendingRequests",new Map)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getDeviceId(){let t=ms.get("deviceId");return t||(t=T0(),ms.set("deviceId",t)),t}getEmbyAuthHeader(){return`MediaBrowser Client="${M0}", Device="${z0}", DeviceId="${this.getDeviceId()}", Version="${U0}"`}getVpnWarning(t){return L0.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:""}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()}}async request(t,n={}){const r=`${this.baseUrl}${t}`,o=(n.method||"GET")==="GET",l=o?r:"";if(o&&this.pendingRequests.has(l))return this.pendingRequests.get(l);const a=this.executeRequest(r,n);return o&&(this.pendingRequests.set(l,a),a.finally(()=>{this.pendingRequests.delete(l)})),a}async executeRequest(t,n={}){let r=null;for(let s=0;s<=mc;s++){const o=new AbortController,l=setTimeout(()=>o.abort(),A0);try{const a=await fetch(t,{...n,signal:o.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(l),!a.ok)throw a.status===401?(sh(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${a.statusText}`);return a.json()}catch(a){if(clearTimeout(l),r=a instanceof Error?a:new Error(String(a)),r.message.includes("Unauthorized")||r.name==="AbortError")break;s<mc&&await new Promise(i=>setTimeout(i,_0*(s+1)))}}throw r||new Error("Request failed")}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",o=new AbortController,l=setTimeout(()=>{o.abort()},hc);let a;try{a=await fetch(s,{method:"POST",signal:o.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(l)}catch(u){if(clearTimeout(l),u instanceof Error&&u.name==="AbortError"){const f=this.getVpnWarning(t);throw new Error(`Request timeout - server did not respond within ${hc/1e3} seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${f}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(u instanceof TypeError){const f=u.message.toLowerCase();if(f.includes("failed to fetch")||f.includes("networkerror")){const d=this.getVpnWarning(t);throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${d}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${u.message}`)}throw u}if(!a.ok){const u=await a.text().catch(()=>"");throw new Error(u||`Authentication failed (${a.status})`)}const i=await a.json();return this.setCredentials(t,i.AccessToken,i.User.Id),i}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,a=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&a.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${a.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&(Array.isArray(t.sortOrder)?t.sortOrder.forEach(s=>r.append("SortOrder",s)):r.append("SortOrder",t.sortOrder)),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.genres&&t.genres.forEach(s=>r.append("Genres",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.tags&&t.tags.forEach(s=>r.append("Tags",s)),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Tags,ProductionYear,DateCreated,DateModified,DateLastSaved,AlbumArtist,ArtistItems,Album,AlbumId"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return L.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return L.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Grouping,MediaSources"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return L.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=re.getState();if(!t&&n.genres.length>0&&n.genresLastUpdated){const r=Date.now(),s=n.genresLastChecked||0;if(!(r-s>=pc))return this.genresCache=n.genres,n.genres;try{const l=await this.getRecentlyAdded(50),a=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),i=[...l.Items||[],...a.Items||[]];let u=0;for(const f of i){if(f.DateCreated){const d=new Date(f.DateCreated).getTime();d>u&&(u=d)}if(f.DateLastSaved){const d=new Date(f.DateLastSaved).getTime();d>u&&(u=d)}}if(re.setState({genresLastChecked:r}),u<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch{return this.genresCache=n.genres,n.genres}}try{const r=await this.fetchAllSongsLightweight(),s=this.buildGenresFromSongs(r),o=Date.now();return re.getState().setGenres(s),re.setState({genresLastUpdated:o,genresLastChecked:o}),this.genresCache=s,s}catch(r){return L.error("[getGenres] Failed to build music genres:",r),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=re.getState();if(!t&&n.years.length>0&&n.yearsLastUpdated){const r=Date.now(),s=n.yearsLastChecked||0;if(!(r-s>=pc))return n.years;try{const a=(await this.getRecentlyAdded(50)).Items||[];let i=0;for(const u of a)if(u.DateCreated){const f=new Date(u.DateCreated).getTime();f>i&&(i=f)}if(re.setState({yearsLastChecked:r}),i<=n.yearsLastUpdated)return n.years}catch{return n.years}}try{const r=new Set;let s=0,o=!0;for(;o;){const u=(await this.getSongs({limit:Ut,startIndex:s})).Items||[];if(u.forEach(f=>{f.ProductionYear&&f.ProductionYear>0&&r.add(f.ProductionYear)}),o=u.length===Ut,s+=Ut,s>1e4)break}const l=Array.from(r).sort((i,u)=>i-u),a=Date.now();return re.getState().setYears(l),re.setState({yearsLastUpdated:a,yearsLastChecked:a}),l}catch(r){return L.error("[getYears] Failed to extract years:",r),n.years.length>0?n.years:[]}}async getGenreSongs(t,n){return(await this.fetchAllSongsLightweight()).filter(s=>{var o;return(o=s.Genres)==null?void 0:o.some(l=>l.toLowerCase()===n.toLowerCase())})}async getSongsByGroupingTag(t){const n=await this.fetchAllSongsLightweight(),r=t.toLowerCase();return n.filter(s=>{var o;return(o=s.Grouping)==null?void 0:o.some(l=>l.toLowerCase()===r)})}async fetchAllSongsLightweight(t){let n=[],r=0,s=!0,o=null;for(;s;){const a=await this.getSongs({limit:Ut,startIndex:r},!0),i=a.Items||[];if(n.push(...i),o===null&&a.TotalRecordCount&&(o=a.TotalRecordCount),t&&o&&o>0){const u=Math.min(Math.round(n.length/o*100),99);t(u)}if(s=i.length===Ut,r+=Ut,r>b0)break}t&&t(100);const l=a=>!a||!Array.isArray(a)?[]:a.filter(i=>i.startsWith("grouping:")).map(i=>i.replace("grouping:",""));return n.map(a=>({Id:a.Id,Name:a.Name,AlbumArtist:a.AlbumArtist,ArtistItems:a.ArtistItems,Album:a.Album,AlbumId:a.AlbumId,IndexNumber:a.IndexNumber,ProductionYear:a.ProductionYear,PremiereDate:a.PremiereDate,RunTimeTicks:a.RunTimeTicks,Genres:a.Genres,Grouping:l(a.Tags)}))}buildGenresFromSongs(t){const n=new Map;t.forEach(s=>{s.Genres&&s.Genres.forEach(o=>{const l=o.toLowerCase();n.has(l)||n.set(l,o)})});const r=[];for(const[s,o]of n)r.push({Id:s.replace(/\s+/g,"-"),Name:o,Type:"Genre"});return r}distributeSongsToGenres(t,n,r){for(const s of n){if(!s.Name||!s.Id)continue;const o=t.filter(l=>{var a;return(a=l.Genres)==null?void 0:a.some(i=>i.toLowerCase()===s.Name.toLowerCase())});r.setGenreSongs(s.Id,o)}}async syncLibrary(t={scope:"incremental"},n){const r=re.getState();if(t.scope==="incremental"){const a=r.lastSyncCompleted,i=await this.getGenres(!1);let u=[];if(a){let w=0,k=!0;for(;k;){const I=(await this.getSongs({minDateLastSaved:new Date(a),limit:Ut,startIndex:w},!0)).Items||[];if(u.push(...I),k=I.length===Ut,w+=Ut,w>1e4)break}}else u=(await this.getSongs({limit:gc,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const f=w=>!w||!Array.isArray(w)?[]:w.filter(k=>k.startsWith("grouping:")).map(k=>k.replace("grouping:","")),d=u.map(w=>({Id:w.Id,Name:w.Name,AlbumArtist:w.AlbumArtist,ArtistItems:w.ArtistItems,Album:w.Album,AlbumId:w.AlbumId,IndexNumber:w.IndexNumber,ProductionYear:w.ProductionYear,PremiereDate:w.PremiereDate,RunTimeTicks:w.RunTimeTicks,Genres:w.Genres,Grouping:f(w.Tags)})),h=r.songs,x=new Map(d.map(w=>[w.Id,w])),v=h.map(w=>x.get(w.Id)??w),S=new Set(h.map(w=>w.Id)),E=d.filter(w=>!S.has(w.Id));v.push(...E);try{r.setSongs(v)}catch(w){throw w instanceof DOMException&&w.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):w}const p=new Set;d.forEach(w=>{var k;(k=w.Genres)==null||k.forEach(N=>{i.forEach(I=>{var P;((P=I.Name)==null?void 0:P.toLowerCase())===N.toLowerCase()&&p.add(I.Id)})})});const m=new Map(d.map(w=>[w.Id,w])),g=Array.from(p).map(async w=>{const k=i.find(A=>A.Id===w);if(!(k!=null&&k.Name))return;const N=r.genreSongs[w]||[],I=N.map(A=>m.get(A.Id)??A),P=new Set(N.map(A=>A.Id)),T=E.filter(A=>{var Q;return!P.has(A.Id)&&((Q=A.Genres)==null?void 0:Q.some(Z=>Z.toLowerCase()===k.Name.toLowerCase()))});I.push(...T),r.setGenreSongs(w,I)});await Promise.all(g);return}this.clearGenresCache(),r.clearGenreSongs();const s=await this.fetchAllSongsLightweight(n);L.log(`[syncLibrary] Fetched ${s.length} songs`);const o=this.buildGenresFromSongs(s);L.log(`[syncLibrary] Found ${o.length} genres in songs`);const l=Date.now();r.setGenres(o),re.setState({genresLastUpdated:l,genresLastChecked:l}),this.genresCache=o,r.setSongs(s),this.distributeSongsToGenres(s,o,r)}async search(t,n=20,r){var m,g;const s=t?so(t.trim()):"",o=s.length>0,l=s.length,a=o&&l<3,i={};(m=r==null?void 0:r.genres)!=null&&m.length&&(i.genres=r.genres),(g=r==null?void 0:r.years)!=null&&g.length&&(i.years=r.years);const u={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0,...i};o&&(u.searchTerm=s,l>=3&&(u.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const f=this.buildQueryString(u),d=await this.request(`/Items?${f}`);let h=[];const x=[],v=[],S=[],E=new Set;if(d.Items.forEach(w=>{w.Type==="MusicArtist"?h.push(w):w.Type==="MusicAlbum"?x.push(w):w.Type==="Playlist"?v.push(w):w.Type==="Audio"&&(S.push(w),E.add(w.Id))}),a)try{const w=await this.getArtists({limit:gc}),k=s.toLowerCase();h=(w.Items||[]).filter(N=>so(N.Name||"").toLowerCase().includes(k))}catch(w){L.error("Failed to fetch all artists for short query:",w)}if(o&&h.length>0){const w=s.toLowerCase(),k=h.filter(N=>so(N.Name||"").toLowerCase().includes(w));if(k.length>0)try{const N=k.map(T=>T.Id),I=this.buildQueryString({artistIds:N,includeItemTypes:["Audio"],recursive:!0});(await this.request(`/Items?${I}`)).Items.forEach(T=>{E.has(T.Id)||(S.push(T),E.add(T.Id))})}catch(N){L.error("Failed to fetch songs for matching artists:",N)}}const p=S.map(w=>({...w,Grouping:(w.Tags||[]).filter(k=>k.startsWith("grouping:")).map(k=>k.replace("grouping:",""))}));return{Artists:{Items:h,TotalRecordCount:h.length,StartIndex:0},Albums:{Items:x,TotalRecordCount:x.length,StartIndex:0},Playlists:{Items:v,TotalRecordCount:v.length,StartIndex:0},Songs:{Items:p,TotalRecordCount:p.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"ParentIndexNumber,IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"}),r=await this.request(`/Items?${n}`),s=[],o=[];return r.Items.forEach(l=>{l.Type==="MusicAlbum"?s.push(l):l.Type==="Audio"&&o.push(l)}),{albums:s,songs:o}}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch{}}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const o=new URLSearchParams({UserId:this.userId}),l=`${this.baseUrl}${s}?${o}`;try{const a=await fetch(l,{headers:this.getHeaders()});if(a.ok){const i=await a.json();if(i.Lyrics&&Array.isArray(i.Lyrics)&&i.Lyrics.length>0)return i.Lyrics.map(f=>f.Text||"").join(`
`);if(typeof i=="string")return i;if(i.Text)return i.Text}else if(a.status===404){r=`404 for ${s}`;continue}else{const i=await a.text().catch(()=>"");r=`${a.status}: ${i}`;continue}}catch(a){r=a instanceof Error?a.message:String(a);continue}}return null}catch{return null}}}const V=new G0,Sc=500,bt=new Map,Ur=new Map;function kc(){if(bt.size>Sc){const e=Array.from(bt.keys()).slice(0,bt.size-Sc);for(const t of e)bt.delete(t)}}async function Vv(e){if(bt.has(e))return bt.get(e)??null;if(Ur.has(e))return Ur.get(e);const t=(async()=>{try{const{albums:n,songs:r}=await V.getArtistItems(e),s=n[0],o=r.find(u=>u.AlbumId)||r[0],l=s||o,a=l?l.AlbumId||l.Id:null,i=a?V.getAlbumArtUrl(a,96):null;return bt.set(e,i),kc(),i}catch(n){return L.error("Failed to load fallback album art for artist:",e,n),bt.set(e,null),kc(),null}finally{Ur.delete(e)}})();return Ur.set(e,t),t}function Gv(e){return bt.get(e)}function Q0(){bt.clear(),Ur.clear()}const H0=2e3;async function W0(e){const t=new AbortController,n=setTimeout(()=>t.abort(),H0);try{const r=await fetch(`${e.replace(/\/$/,"")}/System/Info/Public`,{signal:t.signal});return clearTimeout(n),r.ok}catch{return clearTimeout(n),!1}}async function oh(e,t){return t&&await W0(t)?t:e}function nl(){return window.__TUNETUNA_CONFIG__||{lockedServerUrl:"",lockedLocalServerUrl:""}}function lh(){const e=nl();return!!(e.lockedServerUrl&&e.lockedServerUrl!=="__JELLYFIN_SERVER_URL__"&&e.lockedServerUrl.trim()!=="")}function Y0(){return lh()?nl().lockedServerUrl:null}function q0(){const e=nl();return!!(e.lockedLocalServerUrl&&e.lockedLocalServerUrl!=="__JELLYFIN_LOCAL_SERVER_URL__"&&e.lockedLocalServerUrl.trim()!=="")}function ah(){return q0()?nl().lockedLocalServerUrl:null}const Qe=Vn()(ks(e=>({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await V.authenticate(t,n,r);e({serverUrl:t,username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),V.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{sh(),Q0(),localStorage.removeItem("player-storage"),localStorage.removeItem("settings-storage"),indexedDB.deleteDatabase("tunetuna-storage"),indexedDB.deleteDatabase("tunetuna-stats-storage"),e({serverUrl:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),localStorage.removeItem("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),V.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{if(e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId){V.setCredentials(e.serverUrl,e.accessToken,e.userId);const t=ah()||He.getState().localServerUrl;t&&oh(e.serverUrl,t).then(n=>{n!==e.serverUrl&&V.setCredentials(n,e.accessToken,e.userId)})}}}));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X0=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ic=e=>{const t=X0(e);return t.charAt(0).toUpperCase()+t.slice(1)},ih=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),J0=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...a},i)=>y.createElement("svg",{ref:i,...Z0,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ih("lucide",s),...!o&&!J0(a)&&{"aria-hidden":"true"},...a},[...l.map(([u,f])=>y.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(e,t)=>{const n=y.forwardRef(({className:r,...s},o)=>y.createElement(ey,{ref:o,iconNode:t,className:ih(`lucide-${K0(Ic(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Ic(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ny=se("chart-column",ty);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sy=se("check",ry);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ly=se("chevron-down",oy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],uh=se("circle-alert",ay);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Li=se("disc",iy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cy=se("eye-off",uy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fy=se("eye",dy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],my=se("grip-horizontal",hy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],oo=se("guitar",py);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yy=se("house",gy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xy=se("info",vy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],Vs=se("list-end",wy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ky=se("list-music",Sy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],Gs=se("list-start",Iy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],_a=se("list-video",Ey);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],Cy=se("mic-vocal",Ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ch=se("music",Py);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ps=se("pause",Ty);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],yn=se("play",jy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lo=se("refresh-cw",Ry);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Mi=se("repeat-1",Ay);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],zi=se("repeat",_y);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Ly=se("shield-alert",by);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],cr=se("shuffle",My);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Ui=se("skip-back",zy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Di=se("skip-forward",Uy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],$y=se("square-play",Dy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zo=se("user",Oy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],By=se("volume-1",Fy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Gy=se("volume-2",Vy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],Hy=se("volume",Qy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$i=se("x",Wy),Ec="last-server-url",Yy=/^http:\/\/(localhost|127\.0\.0\.1|10\.\d+\.\d+\.\d+|172\.(1[6-9]|2\d|3[01])\.\d+\.\d+|192\.168\.\d+\.\d+)(:\d+)?/i;function qy(){const[e,t]=y.useState(""),[n,r]=y.useState(""),[s,o]=y.useState(""),[l,a]=y.useState(!1),[i,u]=y.useState(""),[f,d]=y.useState(!1),h=Qe(p=>p.login),x=y.useMemo(()=>e.trim().toLowerCase().startsWith("http://")?!Yy.test(e.trim()):!1,[e]),v=lh(),S=Y0();y.useEffect(()=>{if(v&&S)t(S);else{const p=ms.get(Ec);p&&t(p)}},[v,S]);const E=async p=>{p.preventDefault(),u(""),d(!0);const m=v&&S?S:e;!v&&m.trim()&&ms.set(Ec,m.trim());try{await h(m,n,s)}catch(g){u(g instanceof Error?g.message:"Login failed. Please check your credentials.")}finally{d(!1)}};return c.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),c.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!v&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),c.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:p=>t(p.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),x&&c.jsxs("div",{className:"mt-2 flex items-start gap-2 text-amber-400 text-sm",children:[c.jsx(Ly,{size:16,className:"mt-0.5 flex-shrink-0"}),c.jsx("span",{children:"Insecure connection. Your password will be sent unencrypted. Use HTTPS or a local network address."})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),c.jsx("input",{id:"username",type:"text",value:n,onChange:p=>r(p.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{id:"password",type:l?"text":"password",value:s,onChange:p=>o(p.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 pr-12 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),c.jsx("button",{type:"button",onClick:()=>a(!l),"aria-label":l?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:l?c.jsx(cy,{size:20}):c.jsx(fy,{size:20})})]})]}),i&&c.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),c.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:f?"Signing in...":"Sign In"})]})]})})}const It=Vn((e,t)=>({state:"idle",source:null,message:null,abortController:null,progress:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null,progress:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null,progress:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null,progress:null})},setProgress:n=>{e({progress:n})}}));function Vt({variant:e="horizontal",onClose:t,onOpenPopover:n,popoverPosition:r,popoverDirection:s="up",className:o,onRef:l}){const{volume:a,setVolume:i}=X(),[u,f]=y.useState(!1),[d,h]=y.useState(1),x=y.useRef(null),v=D=>{l&&e==="compact"&&l(D)},S=D=>{l&&e==="horizontal"&&l(D)};y.useEffect(()=>{const D=localStorage.getItem("lastNonZeroVolume");D?h(Math.max(.01,Math.min(1,parseFloat(D)))):a>0&&h(a)},[]),y.useEffect(()=>{a>0&&(h(a),localStorage.setItem("lastNonZeroVolume",a.toString()))},[a]);const E=()=>a===0?Hy:a<=.5?By:Gy,p=y.useCallback(D=>{if(!x.current)return;const he=x.current.getBoundingClientRect();let B,b;if(D instanceof TouchEvent||"touches"in D?(B=D.touches[0].clientX,b=D.touches[0].clientY):(B=D.clientX,b=D.clientY),e==="horizontal"){const C=B-he.left,j=Math.max(0,Math.min(1,C/he.width));i(j)}else{const C=he.bottom-b,j=Math.max(0,Math.min(1,C/he.height));i(j)}},[i,e]),m=D=>{D.preventDefault(),D.stopPropagation(),f(!0),p(D)},g=D=>{D.stopPropagation(),m(D)},w=D=>{D.stopPropagation(),I(D)},k=y.useCallback(D=>{u&&(D.preventDefault(),D.stopPropagation(),p(D))},[u,p]),N=y.useCallback(()=>{f(!1)},[]),I=D=>{D.preventDefault(),D.stopPropagation(),f(!0),p(D)},P=y.useCallback(D=>{u&&(D.preventDefault(),D.stopPropagation(),p(D))},[u,p]),T=y.useCallback(()=>{f(!1)},[]),A=D=>{D.stopPropagation(),X.getState().volume>0?i(0):i(d)},Q=D=>{D.stopPropagation()};y.useEffect(()=>{if(u)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",N),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",T),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",T)}},[u,k,N,P,T]);const Z=E();if(e==="compact")return c.jsx("button",{ref:v,onClick:D=>{D.stopPropagation(),n&&n()},"aria-label":"Volume",className:o||"text-white/70 hover:text-zinc-300 transition-colors",children:c.jsx(Z,{className:"w-6 h-6"})});if(e==="horizontal")return c.jsxs("div",{ref:S,className:"flex items-center gap-2 px-2 select-none",style:{width:"120px"},onClick:Q,children:[c.jsx("button",{onClick:A,"aria-label":a===0?"Unmute":"Mute",className:"text-white/70 hover:text-white hover:bg-zinc-800 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 transition-colors",children:c.jsx(Z,{className:"w-5 h-5"})}),c.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),className:"flex-1 relative cursor-pointer",style:{height:"24px"},onMouseDown:g,onTouchStart:w,children:c.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 h-1 bg-white/10 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gray-400 rounded-full transition-all duration-100",style:{width:`${a*100}%`}})})})]});const we=r?{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,transform:s==="down"?"translate(-50%, 8px)":"translate(-50%, calc(-100% - 8px))"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return c.jsxs("div",{className:"fixed inset-0 z-50",children:[c.jsx("div",{className:"fixed inset-0",onClick:t,onTouchStart:D=>D.preventDefault(),onTouchMove:D=>D.preventDefault()}),c.jsx("div",{className:"relative z-10 bg-zinc-900 rounded-lg py-4 px-0 shadow-xl border border-zinc-700",style:we,children:c.jsxs("div",{className:"h-[200px] w-[38px] cursor-pointer group relative touch-none mx-auto",children:[c.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),onMouseDown:m,onTouchStart:I,className:"absolute inset-0"}),c.jsxs("div",{className:"h-full w-1 bg-white/10 rounded-full relative flex flex-col justify-end mx-auto",children:[c.jsx("div",{className:"w-full bg-gray-400 rounded-full transition-all",style:{height:`${a*100}%`}}),c.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",style:{bottom:`${a*100}%`,transform:"translate(-50%, 50%)"}})]})]})})]})}const Ky=[{path:"/",label:"Home",icon:yy,key:"home"},{path:"/artists",label:"Artists",icon:zo,key:"artists"},{path:"/albums",label:"Albums",icon:Li,key:"albums"},{path:"/songs",label:"Songs",icon:ch,key:"songs"},{path:"/genres",label:"Genres",icon:oo,key:"genres"},{path:"/playlists",label:"Playlists",icon:ky,key:"playlists"},{path:"/stats",label:"Stats",icon:ny,key:"stats"}];function Xy(){const e=zt(),{pageVisibility:t}=He(),{state:n}=It(),[r,s]=y.useState(!1),o=Ky.filter(i=>i.key==="home"?!0:t[i.key]),l=(i,u)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===u&&i.preventDefault()},a=e.pathname.startsWith("/artists/")&&e.pathname!=="/artists";return c.jsxs(c.Fragment,{children:[c.jsxs("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 lg:hidden",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:[c.jsxs("div",{className:"relative h-16",children:[c.jsx("div",{className:"max-w-[600px] mx-auto h-full",children:c.jsx("div",{className:"flex justify-around items-center h-full",children:o.map(i=>{const u=e.pathname===i.path,f=i.icon;return c.jsxs(lc,{to:i.path,onClick:d=>l(d,i.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${u?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[c.jsx(f,{className:"w-5 h-5 mb-1"}),c.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.path)})})}),c.jsx("div",{className:"absolute right-4 top-3.5 hidden lg:block",children:!Bt()&&c.jsx(Vt,{variant:"horizontal"})})]}),r&&!Bt()&&c.jsx(Vt,{variant:"vertical",onClose:()=>s(!1)})]}),c.jsx("nav",{className:"fixed left-0 top-0 bottom-16 bg-black z-30 hidden lg:flex flex-col",style:{width:"4rem",top:n!=="idle"?"28px":"0px"},children:c.jsx("div",{className:`absolute inset-0 flex flex-col items-center justify-center ${a?"border-r border-zinc-800":""}`,children:o.map((i,u)=>{const f=e.pathname===i.path,d=i.icon;return c.jsxs(lc,{to:i.path,onClick:h=>l(h,i.path),className:`flex flex-col items-center justify-center py-5 transition-colors ${f?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"} ${u<o.length-1?"mb-0":""}`,style:{marginBottom:u<o.length-1?"0px":"0"},children:[c.jsx(d,{className:"w-6 h-6 mb-2"}),c.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:i.label})]},i.path)})})})]})}function Oi(){return X(e=>{const{songs:t,currentIndex:n}=e;return n>=0&&t[n]?t[n]:null})}function Fi(){return X(e=>e.lastPlayedTrack)}function Uo({src:e,alt:t,className:n="",fallback:r,style:s,showOutline:o,rounded:l="rounded",onError:a}){const[i,u]=y.useState(e),[f,d]=y.useState(!1),[h,x]=y.useState(!1),[v,S]=y.useState(!1);y.useEffect(()=>{u(e),d(!1),x(!1),S(!1)},[e]);const E=()=>{!f&&r?(u(r),d(!0)):a?(a(),x(!0)):S(!0)};return h?null:v?c.jsx("div",{className:"relative w-full h-full bg-zinc-900"}):c.jsxs("div",{className:"relative w-full h-full",children:[c.jsx("img",{src:i,alt:t,className:`block ${n}`,onError:E,loading:"lazy",style:s}),o&&c.jsx("div",{className:`absolute inset-0 pointer-events-none border ${l}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function Nc(){return c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function Jy({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,o]=y.useState(!1),[l,a]=y.useState(!1);if(y.useEffect(()=>{if(e)o(!1),a(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0)})}),document.body.style.overflow="hidden";else{o(!1);const u=setTimeout(()=>{a(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(u),document.body.style.overflow=""}}},[e]),!l)return null;const i=c.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[c.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),c.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out ${s?"translate-y-0":"translate-y-full"}`,onClick:u=>u.stopPropagation(),children:c.jsx("div",{className:"pb-safe pt-4",children:c.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})})]});return Ti.createPortal(i,document.body)}function Zy({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:o,mode:l="mobile",position:a}){const i=Ss(),[u,f]=y.useState(!1),[d,h]=y.useState(null),[x,v]=y.useState(null),{playTrack:S,playAlbum:E,addToQueueWithToast:p,playNext:m,shuffleArtist:g,toggleShuffle:w}=X(),{startSync:k,completeSync:N}=It(),{genres:I}=re(),{updateEventMetadata:P}=Fe(),T=y.useRef(e),A=y.useRef(t);y.useEffect(()=>{T.current=e,A.current=t},[e,t]),y.useEffect(()=>{if(!n||!e){v(null);return}(async()=>{var b,C;try{if(t==="album"){const j=await V.getAlbumTracks(e.Id);j.length>0&&((b=j[0].Genres)!=null&&b[0])&&v(j[0].Genres[0])}else if(t==="artist"){const{songs:j}=await V.getArtistItems(e.Id);j.length>0&&((C=j[0].Genres)!=null&&C[0])&&v(j[0].Genres[0])}}catch(j){L.error("Failed to fetch genre:",j)}})()},[n,e==null?void 0:e.Id,t]);const Q=B=>{if(!B)return null;const b=I.find(C=>{var j;return((j=C.Name)==null?void 0:j.toLowerCase())===B.toLowerCase()});return(b==null?void 0:b.Id)||null},Z=y.useCallback(async B=>{var j,M,Y,K,oe,te;const b=T.current,C=A.current;if(b){if(B==="viewDetails"){r(),o&&o(),i(`/song/${b.Id}`);return}if(B.startsWith("goTo")){if(r(),o&&o(),B==="goToArtist"){const O=((M=(j=b.ArtistItems)==null?void 0:j[0])==null?void 0:M.Id)||("AlbumArtists"in b?(K=(Y=b.AlbumArtists)==null?void 0:Y[0])==null?void 0:K.Id:void 0);O&&i(`/artist/${O}`)}else if(B==="goToAlbum")b.AlbumId&&i(`/album/${b.AlbumId}`);else if(B==="goToGenre"){const O=C==="album"||C==="artist"?x:(oe=b.Genres)==null?void 0:oe[0];if(O){const F=Q(O);if(F)i(`/genre/${encodeURIComponent(F)}`);else{const Se=(await V.getGenres()).find(Ce=>{var me;return((me=Ce.Name)==null?void 0:me.toLowerCase())===O.toLowerCase()});Se!=null&&Se.Id&&i(`/genre/${encodeURIComponent(Se.Id)}`)}}}return}f(!0),h(B);try{switch(C){case"album":{if(B==="play"){const O=await V.getAlbumTracks(b.Id),{shuffle:F}=X.getState();F&&w(),E(O)}else if(B==="shuffle"){const O=await V.getAlbumTracks(b.Id),{shuffle:F}=X.getState();F&&w(),E(O),requestAnimationFrame(()=>{const{shuffle:le}=X.getState();le||w()})}else if(B==="playNext"){const O=await V.getAlbumTracks(b.Id);m(O)}else if(B==="addToQueue"){const O=await V.getAlbumTracks(b.Id);p(O)}else if(B==="sync"){k("context-menu",`Syncing ${b.Name}...`);try{(await V.getAlbumTracks(b.Id)).forEach(F=>{var le;P("song",F.Id,{songName:F.Name||"Unknown",artistNames:(le=F.ArtistItems)!=null&&le.length?F.ArtistItems.map(Se=>Se.Name||"Unknown"):[F.AlbumArtist||"Unknown"],albumName:F.Album||"Unknown",genres:F.Genres||[],year:F.ProductionYear||null})}),N(!0,`${b.Name} synced`)}catch{N(!1,`Failed to sync ${b.Name}`)}}break}case"song":{if(B==="play")L.log("ContextMenu: Playing song",b.Name),S(b);else if(B==="playNext")L.log("ContextMenu: Adding song to play next",b.Name),m([b]);else if(B==="addToQueue")L.log("ContextMenu: Adding song to queue",b.Name),p([b]);else if(B==="sync"){k("context-menu",`Syncing ${b.Name}...`);try{const O=await V.getSongById(b.Id);if(O.Genres){const F=await V.getGenres();O.Genres.forEach(le=>{const Se=F.find(Ce=>{var me;return((me=Ce.Name)==null?void 0:me.toLowerCase())===le.toLowerCase()});Se!=null&&Se.Id&&re.getState().clearGenreSongsForGenre(Se.Id)})}P("song",b.Id,{songName:O.Name||"Unknown",artistNames:(te=O.ArtistItems)!=null&&te.length?O.ArtistItems.map(F=>F.Name||"Unknown"):[O.AlbumArtist||"Unknown"],albumName:O.Album||"Unknown",genres:O.Genres||[],year:O.ProductionYear||null}),N(!0,`${b.Name} synced`)}catch{N(!1,`Failed to sync ${b.Name}`)}}break}case"artist":{if(B==="shuffle"){const{songs:O}=await V.getArtistItems(b.Id);g(O)}else if(B==="playNext"){const{songs:O}=await V.getArtistItems(b.Id);m(O)}else if(B==="addToQueue"){const{songs:O}=await V.getArtistItems(b.Id);p(O)}else if(B==="sync"){k("context-menu",`Syncing ${b.Name}...`);try{const{songs:O}=await V.getArtistItems(b.Id);O.forEach(F=>{var le;P("song",F.Id,{songName:F.Name||"Unknown",artistNames:(le=F.ArtistItems)!=null&&le.length?F.ArtistItems.map(Se=>Se.Name||"Unknown"):[F.AlbumArtist||"Unknown"],albumName:F.Album||"Unknown",genres:F.Genres||[],year:F.ProductionYear||null})}),N(!0,`${b.Name} synced`)}catch{N(!1,`Failed to sync ${b.Name}`)}}break}case"playlist":{if(B==="play"){const O=await V.getAlbumTracks(b.Id),{shuffle:F}=X.getState();F&&w(),E(O)}else if(B==="shuffle"){const O=await V.getAlbumTracks(b.Id),{shuffle:F}=X.getState();F&&w(),E(O),requestAnimationFrame(()=>{const{shuffle:le}=X.getState();le||w()})}else if(B==="playNext"){const O=await V.getAlbumTracks(b.Id);m(O)}else if(B==="addToQueue"){const O=await V.getAlbumTracks(b.Id);p(O)}break}}r()}catch(O){L.error("Context menu action failed:",O)}finally{f(!1),h(null)}}},[r,o,i,x,Q,S,E,p,m,g,w,k,N]);if(!e||!t)return null;const D=(()=>{var B,b,C,j,M,Y,K;switch(t){case"album":{const oe=((b=(B=e.ArtistItems)==null?void 0:B[0])==null?void 0:b.Name)||("AlbumArtists"in e?(j=(C=e.AlbumArtists)==null?void 0:C[0])==null?void 0:j.Name:void 0)||"Artist",te=x||"Genre";return[{id:"play",label:"Play",icon:yn},{id:"shuffle",label:"Shuffle",icon:cr},{id:"playNext",label:"Play Next",icon:Gs},{id:"addToQueue",label:"Add to Queue",icon:Vs},{id:"goToArtist",label:`Go to ${oe}`,icon:zo},{id:"goToGenre",label:`Go to ${te}`,icon:oo},{id:"sync",label:"Sync",icon:lo}]}case"song":{const oe=((Y=(M=e.ArtistItems)==null?void 0:M[0])==null?void 0:Y.Name)||e.AlbumArtist||"Artist",te=e.Album||"Album",O=((K=e.Genres)==null?void 0:K[0])||"Genre";return[{id:"play",label:"Play",icon:yn},{id:"playNext",label:"Play Next",icon:Gs},{id:"addToQueue",label:"Add to Queue",icon:Vs},{id:"viewDetails",label:"Go to Song Details",icon:ch},{id:"goToAlbum",label:`Go to ${te}`,icon:Li},{id:"goToArtist",label:`Go to ${oe}`,icon:zo},{id:"goToGenre",label:`Go to ${O}`,icon:oo},{id:"sync",label:"Sync",icon:lo}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:cr},{id:"playNext",label:"Play Next",icon:Gs},{id:"addToQueue",label:"Add to Queue",icon:Vs},{id:"goToGenre",label:`Go to ${x||"Genre"}`,icon:oo},{id:"sync",label:"Sync",icon:lo}];case"playlist":return[{id:"play",label:"Play",icon:yn},{id:"shuffle",label:"Shuffle",icon:cr},{id:"playNext",label:"Play Next",icon:Gs},{id:"addToQueue",label:"Add to Queue",icon:Vs}];default:return[]}})(),he=e.Name||"Unknown";if(l==="desktop"&&n){const b=Math.min(400,D.length*44+8);let C=(a==null?void 0:a.x)||100,j=(a==null?void 0:a.y)||100;return C+240>window.innerWidth&&(C=window.innerWidth-240-10),j+b>window.innerHeight&&(j=window.innerHeight-b-10),c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),c.jsx("div",{className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:C,top:j,zIndex:s},onClick:M=>M.stopPropagation(),children:c.jsx("div",{className:"space-y-0",children:D.map(M=>{const Y=M.icon,K=u&&d===M.id;return c.jsxs("button",{onClick:()=>Z(M.id),disabled:u,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[c.jsx(Y,{className:"w-4 h-4 text-white flex-shrink-0"}),c.jsx("span",{className:"flex-1 text-sm text-white",children:M.label}),K&&c.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},M.id)})})})]})}return c.jsx(Jy,{isOpen:n,onClose:r,zIndex:s,children:c.jsxs("div",{className:"pb-6",children:[c.jsx("div",{className:"mb-4 ml-4",children:c.jsx("div",{className:"text-lg font-semibold text-white break-words",children:he})}),c.jsx("div",{className:"space-y-1",children:D.map(B=>{const b=B.icon,C=u&&d===B.id;return c.jsxs("button",{onClick:()=>Z(B.id),disabled:u,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(b,{className:"w-5 h-5 text-white"}),c.jsx("span",{className:"flex-1 text-left text-white font-medium",children:B.label}),C&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},B.id)})})]})})}function ev({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=y.useRef(null),o=y.useRef(null),l=y.useRef(!1),a=y.useRef(null),i=y.useRef(!1),u=y.useCallback(h=>{l.current=!1,i.current=!1,o.current=h.target,!("button"in h&&h.button!==0)&&(h.preventDefault(),"touches"in h&&h.touches.length>0?a.current={x:h.touches[0].clientX,y:h.touches[0].clientY}:a.current=null,s.current=setTimeout(()=>{i.current||(l.current=!0,e(h))},n))},[e,n]),f=y.useCallback(h=>{if(!a.current||h.touches.length===0)return;const x=h.touches[0].clientX,v=h.touches[0].clientY,S=Math.abs(x-a.current.x),E=Math.abs(v-a.current.y);Math.sqrt(S*S+E*E)>r&&(i.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),d=y.useCallback(h=>{if("button"in h&&h.button!==0){l.current=!1,i.current=!1,o.current=null,a.current=null;return}const x=l.current;s.current&&(clearTimeout(s.current),s.current=null),t&&o.current===h.target&&!x&&!i.current&&t(h),l.current=!1,i.current=!1,o.current=null,a.current=null},[t]);return{onMouseDown:u,onTouchStart:u,onTouchMove:f,onMouseUp:d,onMouseLeave:h=>{s.current&&(clearTimeout(s.current),s.current=null),l.current=!1,i.current=!1,o.current=null,a.current=null},onTouchEnd:d}}const tv=45,nv=45,Qs=y.memo(function({track:t,index:n,isCurrent:r,isPlaying:s,showRemoveButton:o=!0,onClick:l,onRemove:a,onReorderDragStart:i,onReorderDragEnd:u,onReorderDrop:f,onContextMenu:d,isDragOver:h,onDragEnterRow:x}){var k,N,I,P;const v=y.useRef(!1),S=ev({onLongPress:T=>{T.preventDefault(),v.current=!0,d(t,"mobile"),setTimeout(()=>{v.current=!1},300)}}),E=y.useCallback(T=>{if(v.current){T.preventDefault(),T.stopPropagation();return}l()},[l]),p=y.useCallback(T=>{T.preventDefault(),v.current=!0,d(t,"desktop",{x:T.clientX,y:T.clientY}),setTimeout(()=>{v.current=!1},300)},[d,t]),m=y.useCallback(T=>{T.preventDefault(),T.dataTransfer.dropEffect="move"},[]),g=y.useCallback(T=>{T.preventDefault(),r||x(n)},[r,x,n]),w=y.useCallback(T=>{r||f(T,n)},[r,f,n]);return c.jsxs("div",{onDragOver:m,onDragEnter:g,onDrop:w,className:`group queue-row flex items-center gap-3 p-3 ${r?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${r?"bg-zinc-900":""} relative focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] focus-visible:ring-inset`,onClick:r?void 0:E,onContextMenu:p,tabIndex:0,role:"button","aria-label":`${t.Name} by ${((N=(k=t.ArtistItems)==null?void 0:k[0])==null?void 0:N.Name)||t.AlbumArtist||"Unknown Artist"}`,...S,children:[h&&!r&&c.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),c.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:c.jsx(Uo,{src:V.getAlbumArtUrl(t.AlbumId||t.Id,96),alt:t.Name,className:"w-full h-full object-cover",showOutline:!1,rounded:"rounded-sm"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:`text-sm font-medium truncate transition-colors ${r?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:t.Name}),c.jsx("div",{className:"text-xs text-gray-400 truncate",children:((P=(I=t.ArtistItems)==null?void 0:I[0])==null?void 0:P.Name)||t.AlbumArtist||"Unknown Artist"})]}),r?c.jsx("button",{onClick:T=>{T.stopPropagation(),l()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":s?"Pause":"Play",children:s?c.jsx(ps,{className:"w-5 h-5"}):c.jsx(yn,{className:"w-5 h-5"})}):c.jsx(c.Fragment,{children:o&&c.jsxs(c.Fragment,{children:[c.jsx("button",{draggable:!0,onMouseDown:T=>T.stopPropagation(),onTouchStart:T=>T.stopPropagation(),onDragStart:T=>{T.stopPropagation(),i(T,n)},onDragEnd:T=>{T.stopPropagation(),u()},className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Drag to reorder",children:c.jsx(my,{className:"w-4 h-4"})}),a&&c.jsx("button",{onClick:T=>{T.stopPropagation(),a()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Remove from queue",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})});function Bi({onNavigateFromContextMenu:e,header:t,contentPaddingBottom:n="8rem"}){const[r,s]=y.useState(!1),[o,l]=y.useState(null),[a,i]=y.useState("mobile"),[u,f]=y.useState(null),[d,h]=y.useState(null),[x,v]=y.useState(null),[S,E]=y.useState(tv),[p,m]=y.useState(!1),[g,w]=y.useState(!1),k=y.useRef(null),{songs:N,currentIndex:I,isPlaying:P,togglePlayPause:T,skipToTrack:A,removeFromQueue:Q,reorderQueue:Z,isFetchingRecommendations:we,isLoadingMoreSongs:D,repeat:he}=X(),{showQueueRecommendations:B,setShowQueueRecommendations:b,recommendationsQuality:C}=He(),j=y.useCallback((G,_)=>{G.dataTransfer.effectAllowed="move",G.dataTransfer.setData("text/plain",_.toString()),v(_),k.current=_;const H=G.currentTarget,ee=H==null?void 0:H.closest(".queue-row");if(ee&&G.dataTransfer.setDragImage){const ke=ee.querySelector(".queue-drag-art")??ee,dt=ke.getBoundingClientRect();G.dataTransfer.setDragImage(ke,dt.width/2,dt.height/2)}},[]),M=y.useCallback(()=>{v(null),h(null),k.current=null},[]),Y=y.useCallback((G,_)=>{G.preventDefault();const H=G.dataTransfer.getData("text/plain")||G.dataTransfer.getData("text/html"),ee=parseInt(H,10);if(Number.isNaN(ee))return;const Pe=k.current??ee,ke=X.getState().songs,dt=ke[Pe],Nn=ke[_];if(dt&&Nn&&dt.source!==Nn.source){h(null),v(null),k.current=null;return}ee!==_&&Z(ee,_),h(null),v(null),k.current=null},[Z]),K=y.useCallback((G,_="mobile",H)=>{l(G),i(_),f(H||null),s(!0)},[]),oe=y.useCallback(G=>{if(k.current==null)return;const _=X.getState().songs,H=_[k.current],ee=_[G];if(!(!H||!ee)){if(H.source!==ee.source){h(null);return}h(G)}},[]),te=I>=0?N[I]:null,O=N.filter((G,_)=>_<I);let F=-1;for(let G=N.length-1;G>I;G--)if(N[G].source==="user"){F=G;break}const le=N.filter((G,_)=>_<=I?!1:F!==-1?_<=F:!1),Se=N.filter((G,_)=>G.source!=="recommendation"||_<=I?!1:F!==-1?_>F:!0);let Ce=S;const me=O.slice(-Math.min(Ce,O.length));Ce-=me.length,Ce-=te?1:0;const Xt=le.slice(0,Math.max(0,Ce));Ce-=Xt.length;const En=Se.slice(0,Math.max(0,Ce));return y.useEffect(()=>{const G=document.querySelector(".queue-list-container");if(!G)return;const _=()=>{const H=G.scrollTop,ee=G.clientHeight,Pe=G.scrollHeight;H+ee*2.5>=Pe&&E(ke=>Math.min(ke+nv,N.length))};return G.addEventListener("scroll",_,{passive:!0}),_(),()=>G.removeEventListener("scroll",_)},[N.length]),y.useEffect(()=>{if(we){const G=setTimeout(()=>{w(!0)},2e3);return()=>clearTimeout(G)}else w(!1)},[we]),c.jsx("div",{className:"flex-1 flex flex-col min-h-0 w-full relative",children:c.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 queue-list-container w-full",style:{paddingBottom:"8rem"},children:[c.jsxs("div",{className:"max-w-[864px] mx-auto w-full",children:[t,N.length===0&&!te?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 py-10",children:c.jsx("p",{children:"Queue is empty"})}):c.jsxs("div",{children:[me.length>0&&p&&c.jsxs("div",{children:[c.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[c.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Previous"}),c.jsx("button",{onClick:()=>m(!1),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Hide"})]}),me.map((G,_)=>{const H=N.indexOf(G);return c.jsx(Qs,{track:G,index:H,isCurrent:!1,isPlaying:!1,showRemoveButton:!1,onClick:()=>A(H),onReorderDragStart:j,onReorderDragEnd:M,onReorderDrop:Y,onContextMenu:K,isDragOver:!1,onDragEnterRow:oe},`${G.Id}-${_}`)})]}),te&&c.jsxs("div",{children:[c.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[c.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Now Playing"}),me.length>0&&!p&&c.jsx("button",{onClick:()=>m(!0),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Show Previous"})]}),c.jsx(Qs,{track:te,index:I,isCurrent:!0,isPlaying:P,showRemoveButton:!1,onClick:T,onReorderDragStart:j,onReorderDragEnd:M,onReorderDrop:Y,onContextMenu:K,isDragOver:!1,onDragEnterRow:oe})]}),Xt.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[c.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Coming Up"}),c.jsx("button",{onClick:()=>{const _=N.filter((ee,Pe)=>Pe<=I||ee.source==="recommendation"),H=Math.min(I,_.length-1);X.setState({songs:_,currentIndex:H,standardOrder:_.filter(ee=>ee.source==="user").map(ee=>ee.Id),shuffleOrder:_.filter(ee=>ee.source==="user").map(ee=>ee.Id)})},className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]}),Xt.map((G,_)=>{const H=N.indexOf(G);return c.jsx(Qs,{track:G,index:H,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>A(H),onRemove:()=>Q(H),onReorderDragStart:j,onReorderDragEnd:M,onReorderDrop:Y,onContextMenu:K,isDragOver:d===H,onDragEnterRow:oe},`${G.Id}-${_}`)}),D&&c.jsxs("div",{className:"flex items-center justify-center py-4",children:[c.jsx(Nc,{}),c.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading more songs..."})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[c.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Recommendations"}),c.jsx("button",{disabled:he!=="off",onClick:()=>{const G=!B;if(b(G),!G){const _=N.filter((H,ee)=>ee<=I?!0:H.source==="user");X.setState({songs:_,currentIndex:I,standardOrder:_.filter(H=>H.source==="user").map(H=>H.Id),shuffleOrder:_.filter(H=>H.source==="user").map(H=>H.Id)})}},className:`relative w-12 h-6 rounded-full transition-colors ${B&&he==="off"?"bg-[var(--accent-color)]":"bg-zinc-600"} ${he!=="off"?"opacity-50 cursor-not-allowed":""}`,children:c.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${B&&he==="off"?"translate-x-6":"translate-x-0"}`})})]}),c.jsxs("div",{className:"px-4 pb-2",children:[he!=="off"&&c.jsx("span",{className:"text-xs text-gray-400 font-normal block mb-1",children:"Disabled when repeat mode is active"}),(g||C==="failed")&&c.jsxs(c.Fragment,{children:[g&&c.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Syncing genres..."}),!we&&C==="failed"&&c.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Sync library in settings"})]})]}),B&&he==="off"&&c.jsxs(c.Fragment,{children:[En.map((G,_)=>{const H=N.indexOf(G);return c.jsx(Qs,{track:G,index:H,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>A(H),onRemove:()=>Q(H),onReorderDragStart:j,onReorderDragEnd:M,onReorderDrop:Y,onContextMenu:K,isDragOver:d===H,onDragEnterRow:oe},`${G.Id}-${_}`)}),g&&c.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:c.jsx(Nc,{})})]})]})]})]}),c.jsx(Zy,{item:o,itemType:o?"song":null,isOpen:r,onClose:()=>{s(!1),l(null)},onNavigate:e,mode:a,position:u||void 0})]})})}function rv({onClose:e,onNavigateFromContextMenu:t}){const{songs:n,currentIndex:r,isPlaying:s,shuffle:o,repeat:l,togglePlayPause:a,toggleShuffle:i,toggleRepeat:u,next:f,previous:d}=X(),h=r>=0&&r<n.length-1,x=r>0;return c.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[c.jsx(Bi,{onNavigateFromContextMenu:t,contentPaddingBottom:"8rem"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:c.jsx("div",{className:"px-6 pt-2 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"},children:c.jsxs("div",{className:"flex items-center justify-center gap-8",children:[c.jsx("button",{onClick:i,"aria-label":o?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${o?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:c.jsx(cr,{className:"w-6 h-6"})}),c.jsx("button",{onClick:d,disabled:!x,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${x?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:c.jsx(Ui,{className:"w-8 h-8"})}),c.jsx("button",{onClick:a,"aria-label":s?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:s?c.jsx(ps,{className:"w-8 h-8"}):c.jsx(yn,{className:"w-8 h-8"})}),c.jsx("button",{onClick:f,disabled:!h,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${h?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:c.jsx(Di,{className:"w-8 h-8"})}),c.jsx("button",{onClick:u,"aria-label":l==="off"?"Enable repeat":l==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${l!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:l==="one"?c.jsx(Mi,{className:"w-6 h-6"}):c.jsx(zi,{className:"w-6 h-6"})})]})})})]})}function sv(){const e=Oi(),t=Fi(),{isQueueSidebarOpen:n}=X(),r=e||t,[s,o]=y.useState(null),[l,a]=y.useState(!1);return y.useEffect(()=>{(async()=>{if(!r){o(null);return}a(!0);try{const u=await V.getLyrics(r.Id);o(u)}catch(u){L.error("Failed to fetch lyrics:",u),o(null)}finally{a(!1)}})()},[r==null?void 0:r.Id]),r?c.jsxs("div",{className:`fixed left-0 right-0 z-[55] flex flex-col transition-[right] duration-300 ease-out ${n?"lyrics-with-sidebar":""}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:[c.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 py-4 relative",children:l?c.jsx("div",{className:"flex items-center justify-center h-full px-6",children:c.jsx("div",{className:"text-white/50",children:"Loading lyrics..."})}):s?c.jsx("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto pb-8 pl-8 pr-4",children:c.jsx("div",{className:"text-white text-center whitespace-pre-line text-xl lg:text-3xl",children:s.split(`
`).map((i,u)=>c.jsx("div",{className:"mb-6 leading-relaxed",children:i},u))})}):c.jsx("div",{className:"flex items-center justify-center h-full px-6",children:c.jsx("div",{className:"text-white/50 text-center",children:"This song has no lyrics"})})}),c.jsx("div",{className:"h-px bg-white/20 flex-shrink-0"})]}):null}function ov({onClose:e,onClosingStart:t,closeRef:n}){const r=Ss(),{songs:s,currentIndex:o,isPlaying:l,currentTime:a,duration:i,shuffle:u,repeat:f,togglePlayPause:d,next:h,previous:x,seek:v,setVolume:S,toggleShuffle:E,toggleRepeat:p,playTrack:m,isQueueSidebarOpen:g,toggleQueueSidebar:w}=X(),k=Oi(),N=Fi(),I=k||N,[P,T]=y.useState(!1);y.useEffect(()=>{T(!1)},[]);const[A,Q]=y.useState(!1),[Z,we]=y.useState(!1),[D,he]=y.useState(null),[B,b]=y.useState("up"),[C,j]=y.useState(null),[M,Y]=y.useState(null),[K,oe]=y.useState(!1),[te,O]=y.useState(!1),[F,le]=y.useState(!1),[Se,Ce]=y.useState(!1),[me,Xt]=y.useState(null),[En,G]=y.useState(null),_=y.useRef(null),H=y.useRef(null),ee=y.useRef(null),Pe=y.useRef(null),ke=y.useRef(!1),dt=y.useRef(null);y.useEffect(()=>{const z=window.getComputedStyle(document.body).overflowY,W=window.getComputedStyle(document.documentElement).overflowY,q=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const Ke=document.getElementById("root");return Ke&&(Ke.style.overflowY="hidden"),()=>{document.body.style.overflowY=z,document.documentElement.style.overflowY=W,Ke&&(Ke.style.overflowY=q!=="N/A"?q:"")}},[]),y.useEffect(()=>{requestAnimationFrame(()=>{le(!0)})},[]);const Nn=s.length>0&&(o<0||o<s.length-1||f!=="off"),Er=o>0||f==="all"&&s.length>0;y.useEffect(()=>{(async()=>{if(!I){oe(!1);return}try{const W=await V.getLyrics(I.Id),q=W!==null&&W.trim().length>0;oe(q)}catch{oe(!1)}})()},[I]);const Is=z=>{if(!z)return"Unknown";if(z.Name&&z.Name.trim())return z.Name;const W=z.Path;return W&&typeof W=="string"&&(W.split("/").pop()||W.split("\\").pop())||"Unknown"},Es=z=>{var W,q;return z&&(((q=(W=z.ArtistItems)==null?void 0:W[0])==null?void 0:q.Name)||z.AlbumArtist)||""};if(y.useEffect(()=>{"mediaSession"in navigator&&I&&(navigator.mediaSession.metadata=new MediaMetadata({title:Is(I),artist:Es(I),album:I.Album||"",artwork:[{src:V.getAlbumArtUrl(I.AlbumId||I.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",d),navigator.mediaSession.setActionHandler("pause",d),navigator.mediaSession.setActionHandler("previoustrack",x),navigator.mediaSession.setActionHandler("nexttrack",h))},[I,l,d,h,x]),y.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&i>0)try{navigator.mediaSession.setPositionState({duration:i,playbackRate:1,position:Math.min(a,i)})}catch{}},[a,i]),y.useEffect(()=>{Ce(!1)},[I==null?void 0:I.Id]),y.useEffect(()=>{if(!I)return;const z=V.getAlbumArtUrl(I.AlbumId||I.Id);if(!me){Xt(z);return}if(z===me)return;const W=new window.Image,q=()=>{G(me),Xt(z),setTimeout(()=>{G(null)},1100)};W.onload=q,W.onerror=q,W.src=z},[I==null?void 0:I.Id,I==null?void 0:I.AlbumId]),!I)return null;const Gn=i>0?a/i*100:0,$=z=>{const W=Math.floor(z/60),q=Math.floor(z%60);return`${W}:${q.toString().padStart(2,"0")}`},ue=()=>{if(I.Name&&I.Name.trim())return I.Name;const z=I.Path;return z&&typeof z=="string"&&(z.split("/").pop()||z.split("\\").pop())||"Unknown"},ce=()=>{var z,W;return((W=(z=I.ArtistItems)==null?void 0:z[0])==null?void 0:W.Name)||I.AlbumArtist},Pt=I.AlbumId&&I.Album&&I.Album.trim(),Cn=z=>{if(!_.current||!i||ke.current)return;const W=_.current.getBoundingClientRect(),q=(z.clientX-W.left)/W.width;v(Math.max(0,Math.min(1,q))*i)},Pn=z=>{if(!_.current||!i)return;ke.current=!0,dt.current=z.clientX;const W=_.current.getBoundingClientRect(),q=(z.clientX-W.left)/W.width;v(Math.max(0,Math.min(1,q))*i)},Re=()=>{ke.current=!1,dt.current=null},Ve=z=>{if(!_.current||!i)return;z.stopPropagation(),ke.current=!0;const W=z.touches[0],q=_.current.getBoundingClientRect(),Ke=(W.clientX-q.left)/q.width;v(Math.max(0,Math.min(1,Ke))*i)},Jt=z=>{if(!ke.current||!_.current||!i)return;z.stopPropagation(),z.preventDefault();const W=z.touches[0],q=_.current.getBoundingClientRect(),Ke=(W.clientX-q.left)/q.width;v(Math.max(0,Math.min(1,Ke))*i)},Tt=z=>{z.stopPropagation(),ke.current=!1,dt.current=null};y.useEffect(()=>{let z=null;const W=Ke=>{!ke.current||!_.current||!i||z===null&&(z=requestAnimationFrame(()=>{if(z=null,!ke.current||!_.current)return;const Ns=_.current.getBoundingClientRect(),rl=(Ke.clientX-Ns.left)/Ns.width;v(Math.max(0,Math.min(1,rl))*i)}))},q=()=>{ke.current&&(ke.current=!1,dt.current=null),z!==null&&(cancelAnimationFrame(z),z=null)};return document.addEventListener("mousemove",W),document.addEventListener("mouseup",q),()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",q),z!==null&&cancelAnimationFrame(z)}},[i,v]);const Tn=()=>{O(!0),t==null||t(),setTimeout(()=>{e()},300)},dh=(z="up")=>{const W=z==="down"?M:C;if(W){const q=W.getBoundingClientRect();he({top:z==="down"?q.bottom:q.top,left:q.left+q.width/2}),b(z),we(!0)}};y.useEffect(()=>(n&&(n.current=Tn),()=>{n&&(n.current=null)}),[n]);const fh=z=>{P||A||(H.current=z.touches[0].clientY,ee.current=Date.now())},hh=z=>{if(P||A||H.current===null)return;const q=z.touches[0].clientY-H.current;if(q>0&&Pe.current){const Ke=Math.min(q,window.innerHeight*.5);Pe.current.style.transform=`translateY(${Ke}px)`}},mh=z=>{if(P||A||H.current===null||ee.current===null){H.current=null,ee.current=null,Pe.current&&(Pe.current.style.transform="");return}const q=z.changedTouches[0].clientY-H.current,Ke=Date.now()-ee.current,Ns=50,rl=.3;Pe.current&&(Pe.current.style.transform="");const ph=q/Ke;(q>Ns||q>30&&ph>rl)&&Tn(),H.current=null,ee.current=null};return c.jsxs(c.Fragment,{children:[c.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }

      @media (min-width: 1024px) {
        .lg\\:max-w-\\[864px\\] { max-width: 864px; }
      }

      /* Queue sidebar in player modal - transparent backgrounds (exclude fixed elements like context menus) */
      .queue-xl-container .bg-zinc-900:not([style*="position: fixed"]):not(.fixed) { background-color: transparent; }
      .queue-xl-container .hover\\:bg-zinc-900:hover:not([style*="position: fixed"]):not(.fixed) { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .hover\\:bg-zinc-800:hover { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .text-\\[var\\(--accent-color\\)\\] { color: white; }

      /* Background crossfade animation - only on large screens */
      @keyframes bgFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .bg-fade-in {
        animation: none; /* Instant on smaller screens */
      }
      @media (min-width: 1280px) {
        .bg-fade-in {
          animation: bgFadeIn 1s ease-out forwards;
        }
      }

      /* Lyrics modal with sidebar - adjust right edge on xl screens */
      @media (min-width: 1280px) {
        .lyrics-with-sidebar { right: var(--sidebar-width) !important; }
      }
    `}),c.jsxs("div",{ref:Pe,onTouchStart:fh,onTouchMove:hh,onTouchEnd:mh,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex transition-transform duration-300 ease-out overflow-hidden ${te?"translate-y-full":F?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:H.current===null?"transform 300ms ease-out":"none"},children:[!Se&&(me||En)&&c.jsxs("div",{className:P?"hidden xl:contents":"contents",children:[En&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${En})`,filter:"blur(100px)",transform:"scale(1.2)"}}),c.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]}),me&&c.jsxs("div",{className:"absolute inset-0 bg-fade-in",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${me})`,filter:"blur(100px)",transform:"scale(1.2)"}}),c.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]},me)]}),c.jsx("div",{className:P?"hidden xl:contents":"contents",children:c.jsx("div",{className:"absolute inset-0 bg-black/40 z-[1] pointer-events-none"})}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-[2]",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[c.jsx("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:c.jsx("button",{onClick:Tn,"aria-label":"Close player",className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:c.jsx(ly,{className:"w-8 h-8"})})}),A&&I&&c.jsx("h2",{className:"absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:ue()}),c.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[c.jsx("div",{className:`${P?"xl:hidden":"md:hidden"} ${A?"hidden":""}`,children:!Bt()&&c.jsx(Vt,{variant:"compact",onOpenPopover:()=>dh("down"),onRef:Y,className:"text-white hover:text-zinc-300 hover:bg-white/10 rounded-full transition-colors p-2"})}),c.jsx("button",{onClick:()=>{!K&&!A||(P&&T(!1),Q(!A))},"aria-label":A?"Hide lyrics":"Show lyrics",className:`transition-colors p-2 rounded-full ${K||A?`hover:bg-white/10 ${A?"text-[var(--accent-color)]":"text-white"}`:"invisible pointer-events-none"}`,children:c.jsx(Cy,{className:"w-6 h-6"})}),c.jsx("button",{onClick:()=>{P||Q(!1),T(!P)},"aria-label":P?"Show player":"Show queue",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 xl:hidden",children:P?c.jsx($y,{className:"w-6 h-6"}):c.jsx(_a,{className:"w-6 h-6"})}),!g&&c.jsx("button",{onClick:w,"aria-label":"Open queue sidebar",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 hidden xl:block",children:c.jsx(_a,{className:"w-6 h-6"})})]})]}),P&&c.jsx("div",{className:"flex-1 bg-zinc-900 relative z-10 xl:hidden",children:c.jsx(rv,{onClose:()=>T(!1),onNavigateFromContextMenu:()=>{Tn()}})}),c.jsxs("div",{className:`flex-1 flex-col min-h-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full relative ${P?"hidden xl:flex":"flex"}`,style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[c.jsx("div",{className:`flex-1 overflow-hidden min-h-0 flex items-center justify-center ${A?"invisible":""}`,children:c.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8 md:pr-0",children:c.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[c.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:c.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 ${Se?"":"bg-zinc-900 shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:Se?c.jsx("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center relative",children:c.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:z=>{L.error("Failed to load vinyl image"),z.currentTarget.style.display="none"}})}):c.jsx(Uo,{src:V.getAlbumArtUrl(I.AlbumId||I.Id),alt:I.Name,className:"w-full h-full object-cover",rounded:"rounded",onError:()=>Ce(!0)})})}),c.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[c.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:ue()}),ce()&&c.jsxs("button",{onClick:()=>{var W,q;const z=(q=(W=I.ArtistItems)==null?void 0:W[0])==null?void 0:q.Id;z&&(e(),r(`/artist/${z}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[c.jsx(zo,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),c.jsx("span",{className:"break-words min-w-0",children:ce()})]}),Pt&&c.jsxs("button",{onClick:()=>{e(),r(`/album/${I.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[c.jsx(Li,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),c.jsx("span",{className:"break-words min-w-0",children:I.Album})]})]})]})})}),c.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[c.jsx("div",{className:"space-y-3 px-4 w-full",children:c.jsxs("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto",children:[c.jsx("div",{ref:_,className:"h-2 bg-white/10 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:Cn,onMouseDown:Pn,onMouseUp:Re,onMouseLeave:Re,onTouchStart:Ve,onTouchMove:Jt,onTouchEnd:Tt,children:c.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${Gn}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:Gn>=100?"9999px":"0",borderBottomRightRadius:Gn>=100?"9999px":"0"}})}),c.jsxs("div",{className:"flex justify-between text-xs text-white/70 mt-2",children:[c.jsx("span",{children:$(a)}),c.jsx("span",{children:$(i)})]})]})}),c.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 relative",children:[c.jsx("button",{onClick:E,"aria-label":u?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${u?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:c.jsx(cr,{className:"w-6 h-6"})}),c.jsx("button",{onClick:x,disabled:!Er,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Er?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:c.jsx(Ui,{className:"w-8 h-8"})}),c.jsx("button",{onClick:()=>{k?d():I&&m(I)},"aria-label":l&&k?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:l&&k?c.jsx(ps,{className:"w-8 h-8"}):c.jsx(yn,{className:"w-8 h-8"})}),c.jsx("button",{onClick:h,disabled:!Nn,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Nn?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:c.jsx(Di,{className:"w-8 h-8"})}),c.jsx("button",{onClick:p,"aria-label":f==="off"?"Enable repeat":f==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${f!=="off"?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:f==="one"?c.jsx(Mi,{className:"w-6 h-6"}):c.jsx(zi,{className:"w-6 h-6"})}),c.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 hidden md:flex",children:!Bt()&&c.jsx(Vt,{variant:"horizontal"})})]})]})]}),A&&c.jsx(sv,{}),Z&&D&&!Bt()&&c.jsx(Vt,{variant:"vertical",onClose:()=>we(!1),popoverPosition:D,popoverDirection:B})]}),c.jsx("div",{className:"hidden xl:flex flex-col flex-shrink-0 relative z-10 transition-[width] duration-300 ease-out overflow-hidden",style:{width:g?"var(--sidebar-width)":"0px"},children:c.jsxs("div",{className:"flex flex-col h-full flex-shrink-0",style:{width:"var(--sidebar-width)"},children:[c.jsx("div",{className:`border-l border-white/20 flex-shrink-0 transition-opacity duration-300 ${g?"opacity-100":"opacity-0"}`,children:c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/20 flex-shrink-0",children:[c.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),c.jsx("button",{onClick:w,"aria-label":"Close queue sidebar",className:"text-white/70 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 relative z-20",children:c.jsx($i,{className:"w-5 h-5"})})]})}),c.jsx("div",{className:`flex-1 overflow-y-auto min-h-0 border-l border-white/20 queue-xl-container [&_.text-gray-400]:text-white/60 [&_.text-gray-500]:text-white/50 [&_.text-gray-300]:text-white/70 [&_.border-zinc-800]:border-white/20 [&_.bg-zinc-600]:bg-white/30 transition-opacity duration-300 ${g?"opacity-100":"opacity-0"}`,children:c.jsx(Bi,{onNavigateFromContextMenu:Tn,contentPaddingBottom:"2rem"})})]})})]})]})}function lv(){var Er,Is,Es,Gn;const{songs:e,currentIndex:t,isPlaying:n,currentTime:r,duration:s,audioElement:o,setAudioElement:l,togglePlayPause:a,next:i,setCurrentTime:u,setDuration:f,playTrack:d,repeat:h,shuffle:x,toggleShuffle:v,toggleRepeat:S,previous:E,seek:p,skipToTrack:m,isQueueSidebarOpen:g,toggleQueueSidebar:w,setNextAudioElement:k,preBufferNextTrack:N}=X(),I=Oi(),P=Fi(),[T,A]=y.useState(!1),[Q,Z]=y.useState(!1),[we,D]=y.useState(!1),[he,B]=y.useState(!1),[b,C]=y.useState(null),[j,M]=y.useState(null),[Y,K]=y.useState(null),oe=y.useRef(null),te=y.useRef(null),O=y.useRef(null),F=y.useRef(null),le=y.useRef(!1),Se=zt(),Ce=y.useRef(null),me=y.useRef(null),Xt=y.useRef(null);y.useEffect(()=>{T&&(Z(!0),setTimeout(()=>{A(!1),Z(!1)},300))},[Se.pathname]),y.useEffect(()=>{A(!1),Z(!1)},[]),y.useEffect(()=>{const $=()=>{T&&O.current&&O.current()};return window.addEventListener("closePlayerModal",$),()=>{window.removeEventListener("closePlayerModal",$)}},[T]);const En=()=>{Z(!0),setTimeout(()=>{A(!1),Z(!1)},300)};y.useEffect(()=>{oe.current||(oe.current=new Audio,oe.current.setAttribute("playsinline","true"),oe.current.setAttribute("preload","auto"),l(oe.current)),te.current||(te.current=new Audio,te.current.setAttribute("playsinline","true"),te.current.setAttribute("preload","auto"),k(te.current));const $=X.getState().volume;oe.current&&(oe.current.volume=$),te.current&&(te.current.volume=$)},[l,k]),y.useEffect(()=>{const $=()=>{le.current=!1};return window.addEventListener("playerSeek",$),()=>window.removeEventListener("playerSeek",$)},[]),y.useEffect(()=>{if(!o)return;let $=!0;le.current=!1;const ue=()=>{if(!$)return;u(o.currentTime);const Re=o.duration-o.currentTime;if(o.duration>0&&Re<=15&&Re>0&&N(),!le.current&&o.duration>0&&Re<=1&&Re>0){le.current=!0;const Ve=X.getState(),Jt=Ve.currentIndex>=0&&Ve.currentIndex<Ve.songs.length?Ve.songs[Ve.currentIndex]:null;if(Ve.repeat==="one"){if(Jt&&!Ve.hasRecordedCurrentTrackStats){const Tt=o.currentTime*1e3;Fe.getState().recordPlay(Jt,Tt)}X.setState({hasRecordedCurrentTrackStats:!1}),o.currentTime=0,le.current=!1;return}if(Jt){V.markItemAsPlayed(Jt.Id).catch(()=>{}),F.current&&clearTimeout(F.current);const Tt=Jt.Id;F.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Tt}})),F.current=null},4e3)}i()}},ce=()=>{$&&(f(o.duration),le.current=!1)},Pt=async()=>{if(!$)return;if(le.current){le.current=!1;return}const Re=X.getState(),Ve=Re.currentIndex>=0&&Re.currentIndex<Re.songs.length?Re.songs[Re.currentIndex]:null;if(Ve)try{await V.markItemAsPlayed(Ve.Id),F.current&&clearTimeout(F.current);const Tt=Ve.Id;F.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Tt}})),F.current=null},4e3)}catch{}if(Re.repeat==="one"){const Tt=Re.hasRecordedCurrentTrackStats;if(Ve&&!Tt){const Tn=o.currentTime*1e3;Fe.getState().recordPlay(Ve,Tn)}X.setState({hasRecordedCurrentTrackStats:!1}),o.currentTime=0,o.play();return}i()},Cn=()=>{$&&X.getState().audioElement===o&&X.setState({isPlaying:!0})},Pn=()=>{$&&X.getState().audioElement===o&&X.setState({isPlaying:!1})};return o.addEventListener("timeupdate",ue),o.addEventListener("loadedmetadata",ce),o.addEventListener("ended",Pt),o.addEventListener("play",Cn),o.addEventListener("pause",Pn),()=>{$=!1,o.removeEventListener("timeupdate",ue),o.removeEventListener("loadedmetadata",ce),o.removeEventListener("ended",Pt),o.removeEventListener("play",Cn),o.removeEventListener("pause",Pn),F.current&&(clearTimeout(F.current),F.current=null)}},[o,u,f,i,N]),y.useEffect(()=>{var $,ue;"mediaSession"in navigator&&I&&(navigator.mediaSession.metadata=new MediaMetadata({title:I.Name||"Unknown",artist:((ue=($=I.ArtistItems)==null?void 0:$[0])==null?void 0:ue.Name)||I.AlbumArtist||"",album:I.Album||"",artwork:[{src:V.getAlbumArtUrl(I.AlbumId||I.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",a),navigator.mediaSession.setActionHandler("pause",a),navigator.mediaSession.setActionHandler("previoustrack",E),navigator.mediaSession.setActionHandler("nexttrack",i))},[I,a,i,E]),y.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&s>0)try{navigator.mediaSession.setPositionState({duration:s,playbackRate:1,position:Math.min(r,s)})}catch{}},[r,s]),y.useEffect(()=>{if(I&&!n&&o){const $=V.serverBaseUrl,ue=$?`${$}/Audio/${I.Id}/stream?static=true`:"";o.src!==ue&&(o.src=ue,o.load())}},[I,n,o]);const G=e.length>0?e[0]:null,_=I||P||G;y.useEffect(()=>{D(!1)},[_==null?void 0:_.Id]);const H=s>0?r/s*100:0,ee=e.length>0&&(t<0||t<e.length-1||h!=="off"),Pe=t>0||h==="all"&&e.length>0,ke=()=>{const ue=window.innerWidth<768?Y:j;if(ue){const ce=ue.getBoundingClientRect();C({top:ce.top,left:ce.left+ce.width/2}),B(!0)}},dt=$=>{Ce.current=$.touches[0].clientX,me.current=Date.now()},Nn=$=>{if(Ce.current===null||me.current===null){Ce.current=null,me.current=null;return}const ce=$.changedTouches[0].clientX-Ce.current,Pt=Date.now()-me.current,Cn=50,Pn=.3,Re=Math.abs(ce)/Pt;ce>Cn||ce>30&&Re>Pn?Pe&&E():(ce<-Cn||ce<-30&&Re>Pn)&&ee&&i(),Ce.current=null,me.current=null};return _?c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:Xt,className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer bottom-[calc(4rem-8px)] lg:bottom-0",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:()=>{A(!0)},onTouchStart:dt,onTouchEnd:Nn,children:[_&&c.jsx("div",{className:"hidden lg:block absolute left-0 right-0 cursor-pointer group",style:{top:"-10px",height:"24px"},onClick:$=>{if($.stopPropagation(),!s)return;const ue=$.currentTarget.getBoundingClientRect(),ce=($.clientX-ue.left)/ue.width;p(Math.max(0,Math.min(1,ce))*s)},onTouchStart:$=>{if($.stopPropagation(),!s)return;const ue=$.touches[0],ce=$.currentTarget.getBoundingClientRect(),Pt=(ue.clientX-ce.left)/ce.width;p(Math.max(0,Math.min(1,Pt))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:c.jsx("div",{className:"absolute left-0 right-0 bottom-[10px] h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:c.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${H}%`}})})}),c.jsxs("div",{className:"hidden md:block md:relative md:px-4 md:pt-3 md:pb-1 lg:pb-3",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0 max-w-[37%]",children:[!we&&c.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:c.jsx(Uo,{src:V.getAlbumArtUrl((I||_).AlbumId||(I||_).Id,96),alt:(I||_).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>D(!0)},(I==null?void 0:I.Id)||_.Id)}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("div",{className:"text-sm font-medium text-white truncate",children:(I||_).Name}),c.jsx("div",{className:"text-xs text-gray-400 truncate",children:((Is=(Er=(I||_).ArtistItems)==null?void 0:Er[0])==null?void 0:Is.Name)||(I||_).AlbumArtist||"Unknown Artist"})]})]}),c.jsxs("div",{className:"absolute top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 md:right-16 md:left-auto md:translate-x-0 lg:left-1/2 lg:right-auto lg:-translate-x-1/2 flex items-center gap-2",children:[c.jsx("button",{onClick:$=>{$.stopPropagation(),v()},"aria-label":x?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${x?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:c.jsx(cr,{className:"w-5 h-5"})}),c.jsx("button",{onClick:$=>{$.stopPropagation(),Pe&&E()},disabled:!Pe,"aria-label":"Previous track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${Pe?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:c.jsx(Ui,{className:"w-5 h-5"})}),c.jsx("button",{onClick:$=>{$.stopPropagation(),I?a():e.length>0?m(0):_&&d(_)},"aria-label":n&&I?"Pause":"Play",className:"w-10 h-10 mx-2 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&I?c.jsx(ps,{className:"w-5 h-5"}):c.jsx(yn,{className:"w-5 h-5"})}),c.jsx("button",{onClick:$=>{$.stopPropagation(),ee&&i()},disabled:!ee,"aria-label":"Next track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${ee?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:c.jsx(Di,{className:"w-5 h-5"})}),c.jsx("button",{onClick:$=>{$.stopPropagation(),S()},"aria-label":h==="off"?"Enable repeat":h==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${h!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:h==="one"?c.jsx(Mi,{className:"w-5 h-5"}):c.jsx(zi,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"absolute right-4 top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 flex items-center gap-4",children:[c.jsx("div",{className:"hidden xl:block",children:!g&&c.jsx("button",{onClick:$=>{$.stopPropagation(),w()},className:"text-gray-400 hover:text-white hover:bg-zinc-800 transition-colors flex items-center justify-center w-10 h-10 rounded-full",title:"Open Queue","aria-label":"Open queue",children:c.jsx(_a,{className:"w-5 h-5"})})}),c.jsx("div",{className:"hidden lg:block",onClick:$=>$.stopPropagation(),children:!Bt()&&c.jsx(Vt,{variant:"horizontal"})}),c.jsx("div",{className:"hidden md:block lg:hidden",children:!Bt()&&c.jsx(Vt,{variant:"compact",onOpenPopover:ke,onRef:M,className:"w-10 h-10 flex items-center justify-center text-white hover:text-zinc-300 hover:bg-zinc-800 rounded-full transition-colors"})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 pt-3 pb-1 pr-3 pl-4 md:hidden",children:[!we&&c.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:c.jsx(Uo,{src:V.getAlbumArtUrl((I||_).AlbumId||(I||_).Id,96),alt:(I||_).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>D(!0)},(I==null?void 0:I.Id)||_.Id)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-white truncate",children:(I||_).Name}),c.jsx("div",{className:"text-xs text-gray-400 truncate",children:((Gn=(Es=(I||_).ArtistItems)==null?void 0:Es[0])==null?void 0:Gn.Name)||(I||_).AlbumArtist||"Unknown Artist"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!Bt()&&c.jsx(Vt,{variant:"compact",onOpenPopover:ke,onRef:K,className:"text-white hover:text-zinc-300 transition-colors"}),c.jsx("button",{onClick:$=>{$.stopPropagation(),I?a():e.length>0?m(0):_&&d(_)},"aria-label":n&&I?"Pause":"Play",className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors",children:n&&I?c.jsx(ps,{className:"w-5 h-5"}):c.jsx(yn,{className:"w-5 h-5"})})]})]}),c.jsx("div",{className:"lg:hidden",style:{marginBottom:"-10px"},children:_&&c.jsx("div",{className:"relative cursor-pointer group flex items-center",style:{height:"24px"},onClick:$=>{if($.stopPropagation(),!s)return;const ue=$.currentTarget.getBoundingClientRect(),ce=($.clientX-ue.left)/ue.width;p(Math.max(0,Math.min(1,ce))*s)},onTouchStart:$=>{if($.stopPropagation(),!s)return;const ue=$.touches[0],ce=$.currentTarget.getBoundingClientRect(),Pt=(ue.clientX-ce.left)/ce.width;p(Math.max(0,Math.min(1,Pt))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:c.jsx("div",{className:"absolute left-0 right-0 h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:c.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${H}%`}})})})})]}),T&&c.jsx(ov,{onClose:En,onClosingStart:()=>Z(!0),closeRef:O}),he&&b&&!Bt()&&c.jsx(Vt,{variant:"vertical",onClose:()=>B(!1),popoverPosition:b})]}):null}function av(){const{state:e,message:t,progress:n,cancelSync:r}=It(),{isQueueSidebarOpen:s}=X();if(e==="idle")return null;const o=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}};return c.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${o()} transition-colors duration-300 lg:pl-16`,style:{height:"28px",top:"0px",paddingRight:s?"var(--sidebar-width)":"12px",scrollbarGutter:"stable"},children:c.jsx("div",{className:"w-full mx-auto lg:flex lg:justify-center h-full max-w-[768px]",children:c.jsxs("div",{className:"w-full max-w-[768px] h-full flex items-center justify-between px-4",children:[c.jsxs("span",{className:"text-white text-sm font-medium truncate",children:[t,n!==null&&c.jsxs("span",{className:"tabular-nums",children:[" (",n,"%)"]})]}),e==="syncing"&&c.jsx("button",{onClick:r,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors",children:"Cancel"})]})})})}const Ll=new Set;async function iv(e){const t=e.toLowerCase();if(!Ll.has(t)){Ll.add(t);try{L.log(`[Recommendations] Auto-syncing genre "${e}" for better recommendations...`);const{genres:n,setGenreSongs:r}=re.getState();let s=n;s.length===0&&(s=await V.getGenres());const o=s.find(a=>a.Name&&e&&a.Name.toLowerCase()===e.toLowerCase());if(!o||!o.Id){L.warn(`[Recommendations] Genre "${e}" not found in server`);return}L.log(`[Recommendations] Fetching songs for genre "${e}"...`);const l=await V.getGenreSongs(o.Id,e);l.length>0?(r(o.Id,l),L.log(`[Recommendations]  Successfully cached ${l.length} songs for genre "${e}"`)):L.warn(`[Recommendations] No songs found for genre "${e}" on server`)}catch(n){L.error(`[Recommendations] Failed to sync genre "${e}":`,n)}finally{setTimeout(()=>{Ll.delete(t)},1e4)}}}async function uv({currentTrack:e,queue:t}){var w;if(!e)return{recommendations:[],hasGenreMatches:!1};const{songs:n,genreSongs:r,genres:s}=re.getState(),o=e.Genres||[];let l=[];if(o.length>0&&s.length>0){const k=s.filter(N=>N.Name&&o.some(I=>I.toLowerCase()===N.Name.toLowerCase())).map(N=>N.Id).filter(N=>r[N]&&r[N].length>0);k.length>0&&(l=k.flatMap(N=>r[N]),L.log(`[Recommendations] Using ${l.length} pre-filtered songs from ${k.length} matching genres`))}if(l.length===0&&n.length>0&&(l=n,L.log(`[Recommendations] Using ${l.length} songs from main cache`)),l.length===0){const k=Object.values(r).flat();k.length>0&&(l=k,L.log(`[Recommendations] Using ${l.length} songs from all genre caches`))}if(l.length===0){const{setRecommendationsQuality:k}=He.getState();return k("failed"),{recommendations:[],hasGenreMatches:!1}}L.log("[Recommendations] Using",l.length,"available songs"),L.log("[Recommendations] Current track genres:",o,"(count:",o.length+")"),L.log("[Recommendations] Current track year:",e.ProductionYear),L.log("[Recommendations] Queue size:",t.length),L.log("[Recommendations] Sample available songs:",l.slice(0,3).map(k=>{var N;return`${k.Name} (${k.ProductionYear}) [${(N=k.Genres)==null?void 0:N.join(", ")}]`}));let a=[],i=!1;const u=e.ProductionYear,f=u?[{range:3,years:Array.from({length:7},(k,N)=>u-3+N)},{range:6,years:Array.from({length:13},(k,N)=>u-6+N)},{range:10,years:Array.from({length:21},(k,N)=>u-10+N)}]:[],d=k=>{const N=k.Id!==e.Id,I=!t.some(T=>T.Id===k.Id),P=!a.some(T=>T.Id===k.Id);return N&&I&&P},h=k=>{var N;return o.length===0?!0:((N=k.Genres)==null?void 0:N.some(I=>o.some(P=>I.toLowerCase()===P.toLowerCase())))??!1},x=(k,N)=>u?k.ProductionYear!==void 0&&N.includes(k.ProductionYear):!0;let v=0;if(o.length>0&&(v=l.filter(k=>h(k)).length,v===0)){for(const k of o)iv(k).catch(N=>L.error(`[Recommendations] Genre sync failed for ${k}:`,N));return{recommendations:[],hasGenreMatches:!1,triggeredGenreSync:!0}}for(const{range:k,years:N}of f){if(a.length>=12){L.log(`[Recommendations] Have ${a.length} recommendations, stopping at ${k} year range`);break}const I=12-a.length,P=l.filter(T=>!(!d(T)||!h(T)||!x(T,N)));if(L.log(`[Recommendations] Year range ${k}: found ${P.length} candidates, need ${I}`),P.length>0){const A=$e(P).slice(0,I);a.push(...A),L.log(`[Recommendations] Added ${A.length} songs from ${k} year range`)}}if(a.length<12&&!u&&o.length>0){const k=12-a.length,N=l.filter(T=>!(!d(T)||!h(T))),P=$e(N).slice(0,k);a.push(...P),L.log(`[Recommendations] Added ${P.length} genre-only songs (no year on seed track)`)}if(a.length<12&&u&&o.length===0)for(const{range:k,years:N}of f){if(a.length>=12)break;const I=12-a.length,P=l.filter(Q=>!(!d(Q)||!x(Q,N))),A=$e(P).slice(0,I);a.push(...A),L.log(`[Recommendations] Added ${A.length} year-only songs from ${k} range (no genre on seed track)`)}i=o.length>0&&a.some(k=>h(k)),L.log("[Recommendations] Matching results:",{totalRecommendations:a.length,genreMatchSuccess:i,hasGenres:o.length>0,hasYear:!!u});const S=$e(a),E=[],p=[...S];for(;p.length>0&&E.length<12;){let k=-1;if(E.length>0){const P=((w=E[E.length-1].ArtistItems)==null?void 0:w.map(T=>T.Id))||[];k=p.findIndex(T=>{var Q;return!(((Q=T.ArtistItems)==null?void 0:Q.map(Z=>Z.Id))||[]).some(Z=>P.includes(Z))})}k===-1&&(k=0);const N=p.splice(k,1)[0];E.push(N)}const m=E,{setRecommendationsQuality:g}=He.getState();return L.log("[Recommendations] Quality decision:",{finalRecommendationsCount:m.length,genreMatchSuccess:i,hasGenres:o.length>0,availableSongsCount:l.length}),m.length===0?g("failed"):!i&&o.length>0?g("degraded"):g("good"),L.log(`[Recommendations] Generated ${m.length} recommendations`),m.length>0&&L.log("[Recommendations] Sample:",m.slice(0,3).map(k=>k.Name)),{recommendations:m,hasGenreMatches:i,triggeredGenreSync:!1}}function cv(e){var s;if(e.length<=1)return e;const t=$e(e),n=[],r=[...t];for(;r.length>0;){let o=-1;if(n.length>0){const i=((s=n[n.length-1].ArtistItems)==null?void 0:s.map(u=>u.Id))||[];o=r.findIndex(u=>{var d;return!(((d=u.ArtistItems)==null?void 0:d.map(h=>h.Id))||[]).some(h=>i.includes(h))})}o===-1&&(o=0);const l=r.splice(o,1)[0];n.push(l)}return n}function dv(){const{currentIndex:e,addToQueue:t,refreshCurrentTrack:n,isFetchingRecommendations:r,setIsFetchingRecommendations:s,repeat:o}=X(),l=X(v=>v.songs.length),{showQueueRecommendations:a}=He(),i=y.useRef([]),u=y.useRef(!1),f=y.useRef(0),d=y.useRef(0),h=y.useRef(0),x=3;y.useEffect(()=>{const v=X.getState().songs;i.current=v.slice(-20)},[l]),y.useEffect(()=>{f.current=0,d.current=0,h.current=0},[e]),y.useEffect(()=>{f.current=0,d.current=0,h.current=0},[a]),y.useEffect(()=>{const v=X.getState().songs,S=v.slice(e+1).filter(w=>w.source==="recommendation").length,E=Date.now()-f.current,p=Date.now()-d.current;if(!!!(a&&o==="off"&&!u.current&&!r&&e>=0&&S<12&&E>1e4&&p>5e3))return S>=12||o==="all",void 0;(async()=>{var k;u.current=!0,s(!0);const w=setTimeout(()=>{u.current=!1,s(!1)},3e4);try{await n();const N=v[e];if(!N)return;const I=[N],P=[e-1,e+1,e+2];for(const C of P)if(C>=0&&C<v.length&&I.length<3){const j=v[C];j&&!I.some(M=>M.Id===j.Id)&&I.push(j)}const T=[];for(const C of I){L.log(`[Recommendations] Generating recommendations for seed: ${C.Name}`);const j=await uv({currentTrack:C,queue:v,recentQueue:i.current,lastPlayedTrack:null});if(L.log(`[Recommendations] Result for seed ${C.Name}:`,{recommendationsCount:((k=j.recommendations)==null?void 0:k.length)||0,hasGenreMatches:j.hasGenreMatches,triggeredGenreSync:j.triggeredGenreSync,resultType:typeof j,isArray:Array.isArray(j)}),j.triggeredGenreSync){if(h.current+=1,h.current>x){L.warn("[Recommendations] Max retries reached, giving up"),f.current=Date.now();const{setRecommendationsQuality:Y}=He.getState();Y("failed");return}const M=15e3*Math.pow(2,h.current-1);L.log(`[Recommendations] Genre sync triggered (attempt ${h.current}/${x}), retry in ${M/1e3}s`),setTimeout(()=>{f.current=0},M);return}j.recommendations&&Array.isArray(j.recommendations)?T.push(j):L.warn(`[Recommendations] Invalid result for seed ${C.Name}:`,j)}const A=T.filter(C=>C.hasGenreMatches);if(L.log(`[Recommendations] ${A.length} out of ${I.length} seeds found genre matches`),A.length===0){const{setRecommendationsQuality:C}=He.getState();C("degraded"),L.log("[Recommendations] No genre matches found - falling back to year/artist only")}const Q=v.slice(e+1).filter(C=>C.source==="recommendation").length,Z=Math.max(0,12-Q);if(Z===0){L.log("[Recommendations] Already have 12 upcoming recommendations, skipping");return}L.log(`[Recommendations] Currently have ${Q} upcoming, need ${Z} more to reach 12`);const we=A.length>0?A:T,D=Math.ceil(Z/we.length),he=[];for(const C of we){const j=C.recommendations.filter(Y=>{const K=v.some(te=>te.Id===Y.Id),oe=he.some(te=>te.Id===Y.Id);return!K&&!oe}),M=j.slice(0,D);he.push(...M),L.log(`[Recommendations] Added ${M.length} recommendations from seed (${j.length} available, genreMatch: ${C.hasGenreMatches})`)}const B=he.slice(0,Z),b=cv(B);L.log(`[Recommendations] Final ${B.length} recommendations (distributed across ${I.length} seeds)`),b.length>0?(L.log(`[Recommendations] Adding ${b.length} recommendations (had ${Q}, will have ${Q+b.length})`),L.log("[Recommendations] Recommendations to add:",b.map(C=>C.Name)),f.current=0,d.current=Date.now(),h.current=0,t(b,!1,"recommendation"),L.log("[Recommendations] Successfully added recommendations to queue")):(L.log("[Recommendations] No safe recommendations to add - marking as failed attempt"),f.current=Date.now())}catch(N){L.error("[Recommendations Hook] Failed to get recommendations:",N),u.current=!1,s(!1)}finally{clearTimeout(w),u.current=!1,s(!1)}})()},[l,e,t,n,a,r,s,o]),y.useEffect(()=>{if(o!=="off"){a&&He.getState().setShowQueueRecommendations(!1);const v=X.getState().songs;if(v.some((E,p)=>p>e&&E.source==="recommendation")){const E=v.filter((p,m)=>m<=e?!0:p.source==="user");X.setState({songs:E,standardOrder:E.filter(p=>p.source==="user").map(p=>p.Id),shuffleOrder:E.filter(p=>p.source==="user").map(p=>p.Id)})}}},[o,e,l,a])}function fv(){const{accessToken:e,isAuthenticated:t}=Qe(),n=y.useRef(null),r=y.useRef(null),s=y.useRef(null),o=y.useRef(5e3);y.useEffect(()=>{if(!t||!e)return;const l=V.serverBaseUrl;if(!l)return;const a=()=>{if(n.current&&n.current.readyState<=WebSocket.OPEN)return;const u=ms.get("deviceId")||"unknown",f=l.startsWith("https")?"wss":"ws",d=l.replace(/^https?:\/\//,"").replace(/\/$/,""),h=`${f}://${d}/socket?api_key=${e}&deviceId=${u}`,x=new WebSocket(h);n.current=x,x.onopen=()=>{o.current=5e3},x.onmessage=v=>{var S,E,p;try{const m=JSON.parse(v.data);if(m.MessageType!=="LibraryChanged")return;const g=m.Data;if(!(((S=g==null?void 0:g.ItemsAdded)==null?void 0:S.length)>0||((E=g==null?void 0:g.ItemsUpdated)==null?void 0:E.length)>0||((p=g==null?void 0:g.ItemsRemoved)==null?void 0:p.length)>0))return;L.log("[useLibraryChanged] Library changed, scheduling incremental sync"),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{hv()},5e3)}catch{}},x.onclose=()=>{i()},x.onerror=()=>{}},i=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{a(),o.current=Math.min(o.current*2,6e4)},o.current)};return a(),()=>{s.current&&clearTimeout(s.current),r.current&&clearTimeout(r.current),n.current&&(n.current.onclose=null,n.current.close(),n.current=null)}},[t,e])}async function hv(){const{state:e}=It.getState();if(e!=="idle")return;const{lastSyncCompleted:t}=re.getState();if(t===null)return;const{startSync:n,completeSync:r}=It.getState();n("auto","New content detected, syncing...");try{await V.syncLibrary({scope:"incremental"});const o=(await V.getGenres()||[]).sort((a,i)=>(a.Name||"").localeCompare(i.Name||""));re.getState().setGenres(o),re.getState().setLastSyncCompleted(Date.now());const l=await V.getRecentlyAdded(18);re.getState().setRecentlyAdded(l.Items||[]),r(!0,"Library synced")}catch(s){It.getState().state==="syncing"&&r(!1,s instanceof Error?s.message:"Sync failed")}}function mv(){const{isQueueSidebarOpen:e,toggleQueueSidebar:t}=X();return y.useEffect(()=>{const n=r=>{r.key==="Escape"&&e&&t()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]),e?c.jsxs("div",{className:"fixed top-0 right-0 bottom-0 bg-black border-l border-zinc-800 z-30 flex flex-col hidden xl:flex shadow-xl",style:{width:"var(--sidebar-width)",paddingTop:"var(--header-offset, 0px)"},children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800 flex-shrink-0",children:[c.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-zinc-800",children:c.jsx($i,{className:"w-5 h-5"})})]}),c.jsx(Bi,{contentPaddingBottom:"8rem"})]}):null}const Cc={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function pv({children:e}){const t=zt();dv(),fv();const{accentColor:n}=He(),{genres:r,songs:s,genreSongs:o}=re(),{state:l,startSync:a,completeSync:i}=It(),{isQueueSidebarOpen:u}=X(),f=y.useRef(!1);return y.useEffect(()=>{const d=Cc[n]||Cc.blue;document.documentElement.style.setProperty("--accent-color",d)},[n]),y.useEffect(()=>{const d=l!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",d)},[l]),y.useEffect(()=>{r.length===0&&V.getGenres().catch(d=>{})},[r.length]),y.useEffect(()=>{if(f.current)return;const d=setTimeout(async()=>{const{lastSyncCompleted:h}=re.getState(),{state:x}=It.getState();if(h!==null||x!=="idle")return;f.current=!0;const{setProgress:v}=It.getState();a("auto","Syncing library...");try{if(await V.syncLibrary({scope:"full"},v),It.getState().state!=="syncing")return;const E=(await V.getGenres()||[]).sort((p,m)=>(p.Name||"").localeCompare(m.Name||""));re.getState().setGenres(E),re.getState().setLastSyncCompleted(Date.now()),i(!0,"Library synced successfully")}catch(S){It.getState().state==="syncing"&&i(!1,S instanceof Error?S.message:"Failed to sync library")}},500);return()=>clearTimeout(d)},[a,i]),y.useEffect(()=>{const d=re.getState(),h=s.length+Object.values(o).flat().length;if(h>0&&d.shufflePool.length===0)try{d.refreshShufflePool()}catch{}else h===0&&setTimeout(async()=>{const x=re.getState();if(!(x.songs.length+Object.values(x.genreSongs).flat().length>0))try{const E=(await V.getSongs({limit:1})).TotalRecordCount||1e3,p=[];for(let k=0;k<3;k++){const N=Math.floor(Math.random()*E);p.push(N)}const m=p.map(k=>V.getSongs({limit:1,sortBy:["SortName"],sortOrder:"Ascending",startIndex:k})),w=(await Promise.all(m)).flatMap(k=>k.Items||[]);if(w.length>0){const k=w.map(N=>({Id:N.Id,Name:N.Name,AlbumArtist:N.AlbumArtist,ArtistItems:N.ArtistItems,Album:N.Album,AlbumId:N.AlbumId,IndexNumber:N.IndexNumber,ProductionYear:N.ProductionYear,PremiereDate:N.PremiereDate,RunTimeTicks:N.RunTimeTicks,Genres:N.Genres}));re.setState({songs:k,shufflePool:$e(k),lastPoolUpdate:Date.now()})}}catch{}},300)},[s.length,o]),c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed top-0 right-0 bg-black z-50 pointer-events-none left-0 lg:left-8",style:{height:"env(safe-area-inset-top)",top:l!=="idle"?"28px":"0px"}}),c.jsx(av,{}),c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none lg:hidden",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),c.jsx("div",{className:"fixed top-0 left-0 bottom-0 bg-black z-30 pointer-events-none hidden lg:block",style:{width:"4rem"}}),c.jsxs("div",{className:`main-scrollable h-screen bg-black text-white lg:pl-16 transition-[padding] duration-300 ${u?"sidebar-open-padding":""}`,style:{paddingBottom:"calc(6rem + env(safe-area-inset-bottom))",paddingTop:l!=="idle"?"28px":"0",overflowY:"auto",overflowX:"hidden",maxWidth:"100vw",width:"100%",scrollbarGutter:"stable"},children:[c.jsx("div",{className:`w-full mx-auto lg:flex lg:justify-center ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:c.jsx("div",{className:`w-full ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:e})}),c.jsx(lv,{}),c.jsx(Xy,{})]}),c.jsx(mv,{})]})}function gv(){const{pathname:e}=zt();return y.useEffect(()=>{const t=document.querySelector(".main-scrollable");t&&t.scrollTo({top:0,behavior:"auto"})},[e]),null}const yv=y.memo(function({toast:t}){const{removeToast:n}=bo(),r={success:c.jsx(sy,{className:"w-4 h-4"}),error:c.jsx(uh,{className:"w-4 h-4"}),info:c.jsx(xy,{className:"w-4 h-4"})},s={success:"bg-zinc-900 border border-zinc-700",error:"bg-red-900/90 border border-red-700",info:"bg-zinc-900 border border-zinc-700"};return c.jsxs("div",{className:`${s[t.type]} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px] max-w-[320px] animate-slide-up`,role:"alert",children:[c.jsx("span",{className:"flex-shrink-0",children:r[t.type]}),c.jsx("span",{className:"flex-1 text-sm font-medium",children:t.message}),c.jsx("button",{onClick:()=>n(t.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Dismiss notification",children:c.jsx($i,{className:"w-4 h-4"})})]})});function Pc(){const{toasts:e}=bo();return Ti.createPortal(c.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-[99999] flex flex-col gap-2 items-center pointer-events-none",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.map(t=>c.jsx("div",{className:"pointer-events-auto",children:c.jsx(yv,{toast:t})},t.id))}),document.body)}class vv extends y.Component{constructor(n){super(n);ft(this,"handleReset",()=>{var n,r;this.setState({hasError:!1,error:null}),(r=(n=this.props).onReset)==null||r.call(n)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){L.error(`[${this.props.componentName||"Component"}] Error:`,n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center bg-zinc-900/50 rounded-lg border border-zinc-800",children:[c.jsx(uh,{className:"w-8 h-8 text-red-400 mb-3"}),c.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Something went wrong",this.props.componentName?` in ${this.props.componentName}`:"","."]}),c.jsxs("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)]",children:[c.jsx(lo,{className:"w-4 h-4"}),"Try again"]})]}):this.props.children}}function xv(){const{serverUrl:e,accessToken:t,userId:n,isAuthenticated:r}=Qe(),s=He(l=>l.localServerUrl),o=y.useRef(null);y.useEffect(()=>{if(!r||!e||!t||!n)return;const l=ah()||s;if(!l)return;const a=()=>{oh(e,l).then(u=>{u!==V.serverBaseUrl&&V.setCredentials(u,t,n)})};o.current&&clearTimeout(o.current),o.current=setTimeout(a,1e3);const i=()=>{document.visibilityState==="visible"&&a()};return document.addEventListener("visibilitychange",i),()=>{o.current&&clearTimeout(o.current),document.removeEventListener("visibilitychange",i)}},[r,e,t,n,s])}const wv=y.lazy(()=>ct(()=>import("./HomePage-7M7zFux4.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Sv=y.lazy(()=>ct(()=>import("./ArtistsPage-BHdaZGba.js"),__vite__mapDeps([7,8,5,4,1,2,3,9]))),kv=y.lazy(()=>ct(()=>import("./AlbumsPage-DyRhicTT.js"),__vite__mapDeps([10,8,5,4,1,2,3,9]))),Iv=y.lazy(()=>ct(()=>import("./SongsPage-D7YBBilw.js"),__vite__mapDeps([11,12,8,5,4,1,2,3,9]))),Ev=y.lazy(()=>ct(()=>import("./GenresPage-0ypenY0v.js"),__vite__mapDeps([13,14,3]))),Nv=y.lazy(()=>ct(()=>import("./PlaylistsPage-CHMRib8B.js"),__vite__mapDeps([15,1,2,3,9]))),Tc=y.lazy(()=>ct(()=>import("./PlaylistDetailPage-gFbjisXD.js"),__vite__mapDeps([16,17,6]))),Cv=y.lazy(()=>ct(()=>import("./SettingsPage-C7P-1yDm.js"),__vite__mapDeps([18,17]))),Pv=y.lazy(()=>ct(()=>import("./ArtistDetailPage-C-liv6eR.js"),__vite__mapDeps([19,20,17,6,21,9]))),Tv=y.lazy(()=>ct(()=>import("./AlbumDetailPage-CXqit-jw.js"),__vite__mapDeps([22,17,6,21]))),jv=y.lazy(()=>ct(()=>import("./GenreSongsPage-F59OoIOE.js"),__vite__mapDeps([23,20,12,8,5,17,9]))),Rv=y.lazy(()=>ct(()=>import("./StatsPage-DdxvPuIb.js"),__vite__mapDeps([24,25,14]))),Av=y.lazy(()=>ct(()=>import("./SongDetailPage-NjkeMlQH.js"),__vite__mapDeps([26,17,6,25,2,3])));function _v(){return c.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:c.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-color)] border-t-transparent rounded-full animate-spin"})})}function Xe(e,t){return c.jsx(vv,{componentName:t,children:e})}function bv(){const{isAuthenticated:e,logout:t}=Qe(),{pageVisibility:n}=He();return xv(),y.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?c.jsxs(c.Fragment,{children:[c.jsxs(Wg,{children:[c.jsx(gv,{}),c.jsx(pv,{children:c.jsx(y.Suspense,{fallback:c.jsx(_v,{}),children:c.jsxs($g,{children:[c.jsx(De,{path:"/",element:Xe(c.jsx(wv,{}),"Home")}),c.jsx(De,{path:"/song/:id",element:Xe(c.jsx(Av,{}),"Song")}),c.jsx(De,{path:"/mood/:moodValue",element:Xe(c.jsx(Tc,{}),"Mood")}),c.jsx(De,{path:"/settings",element:Xe(c.jsx(Cv,{}),"Settings")}),n.artists&&c.jsxs(c.Fragment,{children:[c.jsx(De,{path:"/artists",element:Xe(c.jsx(Sv,{}),"Artists")}),c.jsx(De,{path:"/artist/:id",element:Xe(c.jsx(Pv,{}),"Artist")})]}),n.albums&&c.jsxs(c.Fragment,{children:[c.jsx(De,{path:"/albums",element:Xe(c.jsx(kv,{}),"Albums")}),c.jsx(De,{path:"/album/:id",element:Xe(c.jsx(Tv,{}),"Album")})]}),n.songs&&c.jsx(De,{path:"/songs",element:Xe(c.jsx(Iv,{}),"Songs")}),n.genres&&c.jsxs(c.Fragment,{children:[c.jsx(De,{path:"/genres",element:Xe(c.jsx(Ev,{}),"Genres")}),c.jsx(De,{path:"/genre/:id",element:Xe(c.jsx(jv,{}),"Genre")})]}),n.playlists&&c.jsxs(c.Fragment,{children:[c.jsx(De,{path:"/playlists",element:Xe(c.jsx(Nv,{}),"Playlists")}),c.jsx(De,{path:"/playlist/:id",element:Xe(c.jsx(Tc,{}),"Playlist")})]}),n.stats&&c.jsx(c.Fragment,{children:c.jsx(De,{path:"/stats",element:Xe(c.jsx(Rv,{}),"Stats")})}),c.jsx(De,{path:"*",element:c.jsx(Ug,{to:"/",replace:!0})})]})})})]}),c.jsx(Pc,{})]}):c.jsxs(c.Fragment,{children:[c.jsx(qy,{}),c.jsx(Pc,{})]})}class Lv extends y.Component{constructor(){super(...arguments);ft(this,"state",{hasError:!1,error:null,showCopied:!1});ft(this,"handleCopyError",async()=>{var r,s;const n=`Error: ${(r=this.state.error)==null?void 0:r.message}

Stack: ${((s=this.state.error)==null?void 0:s.stack)||"N/A"}`;try{await navigator.clipboard.writeText(n),this.setState({showCopied:!0}),setTimeout(()=>this.setState({showCopied:!1}),2e3)}catch{}});ft(this,"handleReload",()=>{window.location.reload()});ft(this,"handleClearAndReload",()=>{localStorage.clear(),indexedDB.deleteDatabase("tunetuna-storage"),window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){L.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?c.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:c.jsxs("div",{className:"text-center max-w-md",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:c.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),c.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"The app encountered an unexpected error. You can try reloading, or clear data if the issue persists."}),c.jsx("div",{className:"bg-zinc-900 rounded-lg p-3 mb-4 text-left",children:c.jsx("p",{className:"text-red-400 text-sm font-mono break-all",children:((n=this.state.error)==null?void 0:n.message)||"Unknown error"})}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:this.handleReload,className:"w-full bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-3 px-4 rounded-lg transition-all",children:"Reload App"}),c.jsx("button",{onClick:this.handleClearAndReload,className:"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"}),c.jsx("button",{onClick:this.handleCopyError,className:"w-full text-gray-400 hover:text-white py-2 px-4 text-sm transition-colors",children:this.state.showCopied?" Copied to clipboard":"Copy error details"})]})]})}):this.props.children}}Ml.createRoot(document.getElementById("root")).render(c.jsx(Ua.StrictMode,{children:c.jsx(Lv,{children:c.jsx(bv,{})})}));const Mv=async()=>{try{const e=await navigator.serviceWorker.getRegistration();e&&(e.waiting&&(L.log("New app version available, activating..."),e.waiting.postMessage({type:"SKIP_WAITING"})),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&L.log("New app version installed and ready")})}))}catch{}};"serviceWorker"in navigator&&Mv();export{M0 as A,Jy as B,Zy as C,Li as D,It as E,Bv as F,oo as G,bo as H,Uo as I,Fe as J,lh as K,Vs as L,ch as M,q0 as N,ah as O,yn as P,ly as Q,lo as R,cr as S,Ua as T,zo as U,ny as V,$i as X,X as a,Ss as b,se as c,Dv as d,V as e,ev as f,Fv as g,U0 as h,He as i,c as j,Oi as k,L as l,Gv as m,Vv as n,Nc as o,j0 as p,Cy as q,y as r,Ti as s,Ov as t,re as u,Uv as v,zt as w,ps as x,$v as y,Qe as z};
