const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-DOWCgPWr.js","assets/search-DU52e0J2.js","assets/tag-BuedTwWn.js","assets/piano-Bjwssuqk.js","assets/useSearch-DqWqC4MG.js","assets/chevron-right-D5vpBqml.js","assets/ellipsis-DErI59CM.js","assets/ArtistsPage-BSadw5FW.js","assets/Pagination-DhULEqXY.js","assets/arrow-up-down-0ksViGcK.js","assets/AlbumsPage-DP6cLaAS.js","assets/useScrollLazyLoad-kkH2xyzx.js","assets/SongsPage-D-3CzdVI.js","assets/SongItem-DKJMwmRM.js","assets/GenresPage-CVukQeaP.js","assets/flame-D2df7dPD.js","assets/PlaylistsPage-CPDwQf-a.js","assets/PlaylistDetailPage-xF_NN7oZ.js","assets/arrow-left-DYhKFoKY.js","assets/SettingsPage-BVMPGns8.js","assets/download-DBMx29RI.js","assets/ArtistDetailPage-WeNv3HJQ.js","assets/chevron-up-Cmy-K5-5.js","assets/AlbumDetailPage-CjGI2tnW.js","assets/GenreSongsPage-pF_lZ2yM.js","assets/StatsPage--AxOivbe.js","assets/clock-DjxmF1Cr.js","assets/SongDetailPage-B1gFKwL4.js"])))=>i.map(i=>d[i]);
var Ym=Object.defineProperty;var Km=(e,t,n)=>t in e?Ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Et=(e,t,n)=>Km(e,typeof t!="symbol"?t+"":t,n);function Xm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function fd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var md={exports:{}},ro={},hd={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),Jm=Symbol.for("react.portal"),Zm=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),th=Symbol.for("react.profiler"),nh=Symbol.for("react.provider"),rh=Symbol.for("react.context"),sh=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),oh=Symbol.for("react.memo"),ah=Symbol.for("react.lazy"),xu=Symbol.iterator;function ih(e){return e===null||typeof e!="object"?null:(e=xu&&e[xu]||e["@@iterator"],typeof e=="function"?e:null)}var pd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gd=Object.assign,yd={};function $r(e,t,n){this.props=e,this.context=t,this.refs=yd,this.updater=n||pd}$r.prototype.isReactComponent={};$r.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vd(){}vd.prototype=$r.prototype;function oi(e,t,n){this.props=e,this.context=t,this.refs=yd,this.updater=n||pd}var ai=oi.prototype=new vd;ai.constructor=oi;gd(ai,$r.prototype);ai.isPureReactComponent=!0;var wu=Array.isArray,xd=Object.prototype.hasOwnProperty,ii={current:null},wd={key:!0,ref:!0,__self:!0,__source:!0};function Sd(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)xd.call(t,r)&&!wd.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var i=Array(a),c=0;c<a;c++)i[c]=arguments[c+2];s.children=i}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ds,type:e,key:l,ref:o,props:s,_owner:ii.current}}function uh(e,t){return{$$typeof:Ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ui(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ds}function ch(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Su=/\/+/g;function Co(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ch(""+e.key):t.toString(36)}function pl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ds:case Jm:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Co(o,0):r,wu(s)?(n="",e!=null&&(n=e.replace(Su,"$&/")+"/"),pl(s,t,n,"",function(c){return c})):s!=null&&(ui(s)&&(s=uh(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Su,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",wu(e))for(var a=0;a<e.length;a++){l=e[a];var i=r+Co(l,a);o+=pl(l,t,n,i,s)}else if(i=ih(e),typeof i=="function")for(e=i.call(e),a=0;!(l=e.next()).done;)l=l.value,i=r+Co(l,a++),o+=pl(l,t,n,i,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Qs(e,t,n){if(e==null)return e;var r=[],s=0;return pl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function dh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},gl={transition:null},fh={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:gl,ReactCurrentOwner:ii};function kd(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Qs,forEach:function(e,t,n){Qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qs(e,function(){t++}),t},toArray:function(e){return Qs(e,function(t){return t})||[]},only:function(e){if(!ui(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=$r;le.Fragment=Zm;le.Profiler=th;le.PureComponent=oi;le.StrictMode=eh;le.Suspense=lh;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fh;le.act=kd;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gd({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=ii.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(i in t)xd.call(t,i)&&!wd.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&a!==void 0?a[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){a=Array(i);for(var c=0;c<i;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ds,type:e.type,key:s,ref:l,props:r,_owner:o}};le.createContext=function(e){return e={$$typeof:rh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nh,_context:e},e.Consumer=e};le.createElement=Sd;le.createFactory=function(e){var t=Sd.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:sh,render:e}};le.isValidElement=ui;le.lazy=function(e){return{$$typeof:ah,_payload:{_status:-1,_result:e},_init:dh}};le.memo=function(e,t){return{$$typeof:oh,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=gl.transition;gl.transition={};try{e()}finally{gl.transition=t}};le.unstable_act=kd;le.useCallback=function(e,t){return lt.current.useCallback(e,t)};le.useContext=function(e){return lt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};le.useEffect=function(e,t){return lt.current.useEffect(e,t)};le.useId=function(){return lt.current.useId()};le.useImperativeHandle=function(e,t,n){return lt.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return lt.current.useMemo(e,t)};le.useReducer=function(e,t,n){return lt.current.useReducer(e,t,n)};le.useRef=function(e){return lt.current.useRef(e)};le.useState=function(e){return lt.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return lt.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return lt.current.useTransition()};le.version="18.3.1";hd.exports=le;var g=hd.exports;const ci=fd(g),mh=Xm({__proto__:null,default:ci},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=g,ph=Symbol.for("react.element"),gh=Symbol.for("react.fragment"),yh=Object.prototype.hasOwnProperty,vh=hh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xh={key:!0,ref:!0,__self:!0,__source:!0};function Id(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)yh.call(t,r)&&!xh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ph,type:e,key:l,ref:o,props:s,_owner:vh.current}}ro.Fragment=gh;ro.jsx=Id;ro.jsxs=Id;md.exports=ro;var u=md.exports,aa={},Nd={exports:{}},wt={},Ed={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,L){var F=b.length;b.push(L);e:for(;0<F;){var se=F-1>>>1,ue=b[se];if(0<s(ue,L))b[se]=L,b[F]=ue,F=se;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var L=b[0],F=b.pop();if(F!==L){b[0]=F;e:for(var se=0,ue=b.length,Te=ue>>>1;se<Te;){var ye=2*(se+1)-1,kt=b[ye],Ae=ye+1,It=b[Ae];if(0>s(kt,F))Ae<ue&&0>s(It,kt)?(b[se]=It,b[Ae]=F,se=Ae):(b[se]=kt,b[ye]=F,se=ye);else if(Ae<ue&&0>s(It,F))b[se]=It,b[Ae]=F,se=Ae;else break e}}return L}function s(b,L){var F=b.sortIndex-L.sortIndex;return F!==0?F:b.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var i=[],c=[],f=1,d=null,m=3,x=!1,v=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=b)r(c),L.sortIndex=L.expirationTime,t(i,L);else break;L=n(c)}}function w(b){if(S=!1,y(b),!v)if(n(i)!==null)v=!0,oe(k);else{var L=n(c);L!==null&&ae(w,L.startTime-b)}}function k(b,L){v=!1,S&&(S=!1,h(P),P=-1),x=!0;var F=m;try{for(y(L),d=n(i);d!==null&&(!(d.expirationTime>L)||b&&!W());){var se=d.callback;if(typeof se=="function"){d.callback=null,m=d.priorityLevel;var ue=se(d.expirationTime<=L);L=e.unstable_now(),typeof ue=="function"?d.callback=ue:d===n(i)&&r(i),y(L)}else r(i);d=n(i)}if(d!==null)var Te=!0;else{var ye=n(c);ye!==null&&ae(w,ye.startTime-L),Te=!1}return Te}finally{d=null,m=F,x=!1}}var E=!1,I=null,P=-1,R=5,j=-1;function W(){return!(e.unstable_now()-j<R)}function ee(){if(I!==null){var b=e.unstable_now();j=b;var L=!0;try{L=I(!0,b)}finally{L?X():(E=!1,I=null)}}else E=!1}var X;if(typeof p=="function")X=function(){p(ee)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,J=M.port2;M.port1.onmessage=ee,X=function(){J.postMessage(null)}}else X=function(){N(ee,0)};function oe(b){I=b,E||(E=!0,X())}function ae(b,L){P=N(function(){b(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,oe(k))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(b){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var F=m;m=L;try{return b()}finally{m=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,L){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var F=m;m=b;try{return L()}finally{m=F}},e.unstable_scheduleCallback=function(b,L,F){var se=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?se+F:se):F=se,b){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=F+ue,b={id:f++,callback:L,priorityLevel:b,startTime:F,expirationTime:ue,sortIndex:-1},F>se?(b.sortIndex=F,t(c,b),n(i)===null&&b===n(c)&&(S?(h(P),P=-1):S=!0,ae(w,F-se))):(b.sortIndex=ue,t(i,b),v||x||(v=!0,oe(k))),b},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(b){var L=m;return function(){var F=m;m=L;try{return b.apply(this,arguments)}finally{m=F}}}})(Cd);Ed.exports=Cd;var wh=Ed.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh=g,xt=wh;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pd=new Set,ps={};function rr(e,t){br(e,t),br(e+"Capture",t)}function br(e,t){for(ps[e]=t,e=0;e<t.length;e++)Pd.add(t[e])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=Object.prototype.hasOwnProperty,kh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ku={},Iu={};function Ih(e){return ia.call(Iu,e)?!0:ia.call(ku,e)?!1:kh.test(e)?Iu[e]=!0:(ku[e]=!0,!1)}function Nh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Eh(e,t,n,r){if(t===null||typeof t>"u"||Nh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var di=/[\-:]([a-z])/g;function fi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(di,fi);qe[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(di,fi);qe[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(di,fi);qe[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function mi(e,t,n,r){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Eh(t,n,s,r)&&(n=null),r||s===null?Ih(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var fn=Sh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ws=Symbol.for("react.element"),cr=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),hi=Symbol.for("react.strict_mode"),ua=Symbol.for("react.profiler"),jd=Symbol.for("react.provider"),bd=Symbol.for("react.context"),pi=Symbol.for("react.forward_ref"),ca=Symbol.for("react.suspense"),da=Symbol.for("react.suspense_list"),gi=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),Td=Symbol.for("react.offscreen"),Nu=Symbol.iterator;function Hr(e){return e===null||typeof e!="object"?null:(e=Nu&&e[Nu]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,Po;function Zr(e){if(Po===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Po=t&&t[1]||""}return`
`+Po+e}var jo=!1;function bo(e,t){if(!e||jo)return"";jo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,a=l.length-1;1<=o&&0<=a&&s[o]!==l[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==l[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==l[a]){var i=`
`+s[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=a);break}}}finally{jo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zr(e):""}function Ch(e){switch(e.tag){case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return e=bo(e.type,!1),e;case 11:return e=bo(e.type.render,!1),e;case 1:return e=bo(e.type,!0),e;default:return""}}function fa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dr:return"Fragment";case cr:return"Portal";case ua:return"Profiler";case hi:return"StrictMode";case ca:return"Suspense";case da:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bd:return(e.displayName||"Context")+".Consumer";case jd:return(e._context.displayName||"Context")+".Provider";case pi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gi:return t=e.displayName||null,t!==null?t:fa(e.type)||"Memo";case xn:t=e._payload,e=e._init;try{return fa(e(t))}catch{}}return null}function Ph(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fa(t);case 8:return t===hi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ad(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jh(e){var t=Ad(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qs(e){e._valueTracker||(e._valueTracker=jh(e))}function Rd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ad(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function bl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ma(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Eu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _d(e,t){t=t.checked,t!=null&&mi(e,"checked",t,!1)}function ha(e,t){_d(e,t);var n=zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pa(e,t.type,n):t.hasOwnProperty("defaultValue")&&pa(e,t.type,zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function pa(e,t,n){(t!=="number"||bl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var es=Array.isArray;function kr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ga(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(es(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zn(n)}}function Md(e,t){var n=zn(t.value),r=zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ju(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ld(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ya(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ld(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,zd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bh=["Webkit","ms","Moz","O"];Object.keys(ls).forEach(function(e){bh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ls[t]=ls[e]})});function $d(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ls.hasOwnProperty(e)&&ls[e]?(""+t).trim():t+"px"}function Ud(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$d(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Th=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function va(e,t){if(t){if(Th[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function xa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wa=null;function yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sa=null,Ir=null,Nr=null;function bu(e){if(e=Bs(e)){if(typeof Sa!="function")throw Error(A(280));var t=e.stateNode;t&&(t=io(t),Sa(e.stateNode,e.type,t))}}function Dd(e){Ir?Nr?Nr.push(e):Nr=[e]:Ir=e}function Od(){if(Ir){var e=Ir,t=Nr;if(Nr=Ir=null,bu(e),t)for(e=0;e<t.length;e++)bu(t[e])}}function Fd(e,t){return e(t)}function Bd(){}var To=!1;function Vd(e,t,n){if(To)return e(t,n);To=!0;try{return Fd(e,t,n)}finally{To=!1,(Ir!==null||Nr!==null)&&(Bd(),Od())}}function ys(e,t){var n=e.stateNode;if(n===null)return null;var r=io(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var ka=!1;if(an)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){ka=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{ka=!1}function Ah(e,t,n,r,s,l,o,a,i){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var os=!1,Tl=null,Al=!1,Ia=null,Rh={onError:function(e){os=!0,Tl=e}};function _h(e,t,n,r,s,l,o,a,i){os=!1,Tl=null,Ah.apply(Rh,arguments)}function Mh(e,t,n,r,s,l,o,a,i){if(_h.apply(this,arguments),os){if(os){var c=Tl;os=!1,Tl=null}else throw Error(A(198));Al||(Al=!0,Ia=c)}}function sr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tu(e){if(sr(e)!==e)throw Error(A(188))}function Lh(e){var t=e.alternate;if(!t){if(t=sr(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Tu(s),e;if(l===r)return Tu(s),t;l=l.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=l;break}if(a===r){o=!0,r=s,n=l;break}a=a.sibling}if(!o){for(a=l.child;a;){if(a===n){o=!0,n=l,r=s;break}if(a===r){o=!0,r=l,n=s;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function Hd(e){return e=Lh(e),e!==null?Qd(e):null}function Qd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Qd(e);if(t!==null)return t;e=e.sibling}return null}var Wd=xt.unstable_scheduleCallback,Au=xt.unstable_cancelCallback,zh=xt.unstable_shouldYield,$h=xt.unstable_requestPaint,je=xt.unstable_now,Uh=xt.unstable_getCurrentPriorityLevel,vi=xt.unstable_ImmediatePriority,qd=xt.unstable_UserBlockingPriority,Rl=xt.unstable_NormalPriority,Dh=xt.unstable_LowPriority,Yd=xt.unstable_IdlePriority,so=null,Jt=null;function Oh(e){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(so,e,void 0,(e.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Vh,Fh=Math.log,Bh=Math.LN2;function Vh(e){return e>>>=0,e===0?32:31-(Fh(e)/Bh|0)|0}var Ks=64,Xs=4194304;function ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _l(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ts(a):(l&=o,l!==0&&(r=ts(l)))}else o=n&~s,o!==0?r=ts(o):l!==0&&(r=ts(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ft(t),s=1<<n,r|=e[n],t&=~s;return r}function Gh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Ft(l),a=1<<o,i=s[o];i===-1?(!(a&n)||a&r)&&(s[o]=Gh(a,t)):i<=t&&(e.expiredLanes|=a),l&=~a}}function Na(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kd(){var e=Ks;return Ks<<=1,!(Ks&4194240)&&(Ks=64),e}function Ao(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Os(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ft(t),e[t]=n}function Qh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ft(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function xi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ft(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var fe=0;function Xd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jd,wi,Zd,ef,tf,Ea=!1,Js=[],Cn=null,Pn=null,jn=null,vs=new Map,xs=new Map,Sn=[],Wh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ru(e,t){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(t.pointerId)}}function Wr(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Bs(t),t!==null&&wi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function qh(e,t,n,r,s){switch(t){case"focusin":return Cn=Wr(Cn,e,t,n,r,s),!0;case"dragenter":return Pn=Wr(Pn,e,t,n,r,s),!0;case"mouseover":return jn=Wr(jn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return vs.set(l,Wr(vs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,xs.set(l,Wr(xs.get(l)||null,e,t,n,r,s)),!0}return!1}function nf(e){var t=Qn(e.target);if(t!==null){var n=sr(t);if(n!==null){if(t=n.tag,t===13){if(t=Gd(n),t!==null){e.blockedOn=t,tf(e.priority,function(){Zd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ca(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wa=r,n.target.dispatchEvent(r),wa=null}else return t=Bs(n),t!==null&&wi(t),e.blockedOn=n,!1;t.shift()}return!0}function _u(e,t,n){yl(e)&&n.delete(t)}function Yh(){Ea=!1,Cn!==null&&yl(Cn)&&(Cn=null),Pn!==null&&yl(Pn)&&(Pn=null),jn!==null&&yl(jn)&&(jn=null),vs.forEach(_u),xs.forEach(_u)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ea||(Ea=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,Yh)))}function ws(e){function t(s){return qr(s,e)}if(0<Js.length){qr(Js[0],e);for(var n=1;n<Js.length;n++){var r=Js[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Cn!==null&&qr(Cn,e),Pn!==null&&qr(Pn,e),jn!==null&&qr(jn,e),vs.forEach(t),xs.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)nf(n),n.blockedOn===null&&Sn.shift()}var Er=fn.ReactCurrentBatchConfig,Ml=!0;function Kh(e,t,n,r){var s=fe,l=Er.transition;Er.transition=null;try{fe=1,Si(e,t,n,r)}finally{fe=s,Er.transition=l}}function Xh(e,t,n,r){var s=fe,l=Er.transition;Er.transition=null;try{fe=4,Si(e,t,n,r)}finally{fe=s,Er.transition=l}}function Si(e,t,n,r){if(Ml){var s=Ca(e,t,n,r);if(s===null)Fo(e,t,r,Ll,n),Ru(e,r);else if(qh(s,e,t,n,r))r.stopPropagation();else if(Ru(e,r),t&4&&-1<Wh.indexOf(e)){for(;s!==null;){var l=Bs(s);if(l!==null&&Jd(l),l=Ca(e,t,n,r),l===null&&Fo(e,t,r,Ll,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Fo(e,t,r,null,n)}}var Ll=null;function Ca(e,t,n,r){if(Ll=null,e=yi(r),e=Qn(e),e!==null)if(t=sr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Gd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ll=e,null}function rf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uh()){case vi:return 1;case qd:return 4;case Rl:case Dh:return 16;case Yd:return 536870912;default:return 16}default:return 16}}var In=null,ki=null,vl=null;function sf(){if(vl)return vl;var e,t=ki,n=t.length,r,s="value"in In?In.value:In.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return vl=s.slice(e,1<r?1-r:void 0)}function xl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zs(){return!0}function Mu(){return!1}function St(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Zs:Mu,this.isPropagationStopped=Mu,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),t}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=St(Ur),Fs=Ie({},Ur,{view:0,detail:0}),Jh=St(Fs),Ro,_o,Yr,lo=Ie({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ni,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yr&&(Yr&&e.type==="mousemove"?(Ro=e.screenX-Yr.screenX,_o=e.screenY-Yr.screenY):_o=Ro=0,Yr=e),Ro)},movementY:function(e){return"movementY"in e?e.movementY:_o}}),Lu=St(lo),Zh=Ie({},lo,{dataTransfer:0}),ep=St(Zh),tp=Ie({},Fs,{relatedTarget:0}),Mo=St(tp),np=Ie({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=St(np),sp=Ie({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lp=St(sp),op=Ie({},Ur,{data:0}),zu=St(op),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=up[e])?!!t[e]:!1}function Ni(){return cp}var dp=Ie({},Fs,{key:function(e){if(e.key){var t=ap[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ip[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ni,charCode:function(e){return e.type==="keypress"?xl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fp=St(dp),mp=Ie({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=St(mp),hp=Ie({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ni}),pp=St(hp),gp=Ie({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),yp=St(gp),vp=Ie({},lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xp=St(vp),wp=[9,13,27,32],Ei=an&&"CompositionEvent"in window,as=null;an&&"documentMode"in document&&(as=document.documentMode);var Sp=an&&"TextEvent"in window&&!as,lf=an&&(!Ei||as&&8<as&&11>=as),Uu=" ",Du=!1;function of(e,t){switch(e){case"keyup":return wp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function af(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fr=!1;function kp(e,t){switch(e){case"compositionend":return af(t);case"keypress":return t.which!==32?null:(Du=!0,Uu);case"textInput":return e=t.data,e===Uu&&Du?null:e;default:return null}}function Ip(e,t){if(fr)return e==="compositionend"||!Ei&&of(e,t)?(e=sf(),vl=ki=In=null,fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lf&&t.locale!=="ko"?null:t.data;default:return null}}var Np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Np[e.type]:t==="textarea"}function uf(e,t,n,r){Dd(r),t=zl(t,"onChange"),0<t.length&&(n=new Ii("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var is=null,Ss=null;function Ep(e){wf(e,0)}function oo(e){var t=pr(e);if(Rd(t))return e}function Cp(e,t){if(e==="change")return t}var cf=!1;if(an){var Lo;if(an){var zo="oninput"in document;if(!zo){var Fu=document.createElement("div");Fu.setAttribute("oninput","return;"),zo=typeof Fu.oninput=="function"}Lo=zo}else Lo=!1;cf=Lo&&(!document.documentMode||9<document.documentMode)}function Bu(){is&&(is.detachEvent("onpropertychange",df),Ss=is=null)}function df(e){if(e.propertyName==="value"&&oo(Ss)){var t=[];uf(t,Ss,e,yi(e)),Vd(Ep,t)}}function Pp(e,t,n){e==="focusin"?(Bu(),is=t,Ss=n,is.attachEvent("onpropertychange",df)):e==="focusout"&&Bu()}function jp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oo(Ss)}function bp(e,t){if(e==="click")return oo(t)}function Tp(e,t){if(e==="input"||e==="change")return oo(t)}function Ap(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:Ap;function ks(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ia.call(t,s)||!Vt(e[s],t[s]))return!1}return!0}function Vu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gu(e,t){var n=Vu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vu(n)}}function ff(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ff(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mf(){for(var e=window,t=bl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bl(e.document)}return t}function Ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rp(e){var t=mf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ff(n.ownerDocument.documentElement,n)){if(r!==null&&Ci(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Gu(n,l);var o=Gu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _p=an&&"documentMode"in document&&11>=document.documentMode,mr=null,Pa=null,us=null,ja=!1;function Hu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ja||mr==null||mr!==bl(r)||(r=mr,"selectionStart"in r&&Ci(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),us&&ks(us,r)||(us=r,r=zl(Pa,"onSelect"),0<r.length&&(t=new Ii("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function el(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionend:el("Transition","TransitionEnd")},$o={},hf={};an&&(hf=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);function ao(e){if($o[e])return $o[e];if(!hr[e])return e;var t=hr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hf)return $o[e]=t[n];return e}var pf=ao("animationend"),gf=ao("animationiteration"),yf=ao("animationstart"),vf=ao("transitionend"),xf=new Map,Qu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(e,t){xf.set(e,t),rr(t,[e])}for(var Uo=0;Uo<Qu.length;Uo++){var Do=Qu[Uo],Mp=Do.toLowerCase(),Lp=Do[0].toUpperCase()+Do.slice(1);Un(Mp,"on"+Lp)}Un(pf,"onAnimationEnd");Un(gf,"onAnimationIteration");Un(yf,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(vf,"onTransitionEnd");br("onMouseEnter",["mouseout","mouseover"]);br("onMouseLeave",["mouseout","mouseover"]);br("onPointerEnter",["pointerout","pointerover"]);br("onPointerLeave",["pointerout","pointerover"]);rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function Wu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Mh(r,t,void 0,e),e.currentTarget=null}function wf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],i=a.instance,c=a.currentTarget;if(a=a.listener,i!==l&&s.isPropagationStopped())break e;Wu(s,a,c),l=i}else for(o=0;o<r.length;o++){if(a=r[o],i=a.instance,c=a.currentTarget,a=a.listener,i!==l&&s.isPropagationStopped())break e;Wu(s,a,c),l=i}}}if(Al)throw e=Ia,Al=!1,Ia=null,e}function pe(e,t){var n=t[_a];n===void 0&&(n=t[_a]=new Set);var r=e+"__bubble";n.has(r)||(Sf(t,e,2,!1),n.add(r))}function Oo(e,t,n){var r=0;t&&(r|=4),Sf(n,e,r,t)}var tl="_reactListening"+Math.random().toString(36).slice(2);function Is(e){if(!e[tl]){e[tl]=!0,Pd.forEach(function(n){n!=="selectionchange"&&(zp.has(n)||Oo(n,!1,e),Oo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tl]||(t[tl]=!0,Oo("selectionchange",!1,t))}}function Sf(e,t,n,r){switch(rf(t)){case 1:var s=Kh;break;case 4:s=Xh;break;default:s=Si}n=s.bind(null,t,n,e),s=void 0,!ka||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Fo(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qn(a),o===null)return;if(i=o.tag,i===5||i===6){r=l=o;continue e}a=a.parentNode}}r=r.return}Vd(function(){var c=l,f=yi(n),d=[];e:{var m=xf.get(e);if(m!==void 0){var x=Ii,v=e;switch(e){case"keypress":if(xl(n)===0)break e;case"keydown":case"keyup":x=fp;break;case"focusin":v="focus",x=Mo;break;case"focusout":v="blur",x=Mo;break;case"beforeblur":case"afterblur":x=Mo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=ep;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=pp;break;case pf:case gf:case yf:x=rp;break;case vf:x=yp;break;case"scroll":x=Jh;break;case"wheel":x=xp;break;case"copy":case"cut":case"paste":x=lp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=$u}var S=(t&4)!==0,N=!S&&e==="scroll",h=S?m!==null?m+"Capture":null:m;S=[];for(var p=c,y;p!==null;){y=p;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,h!==null&&(w=ys(p,h),w!=null&&S.push(Ns(p,w,y)))),N)break;p=p.return}0<S.length&&(m=new x(m,v,null,n,f),d.push({event:m,listeners:S}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&n!==wa&&(v=n.relatedTarget||n.fromElement)&&(Qn(v)||v[un]))break e;if((x||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=c,v=v?Qn(v):null,v!==null&&(N=sr(v),v!==N||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=c),x!==v)){if(S=Lu,w="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(S=$u,w="onPointerLeave",h="onPointerEnter",p="pointer"),N=x==null?m:pr(x),y=v==null?m:pr(v),m=new S(w,p+"leave",x,n,f),m.target=N,m.relatedTarget=y,w=null,Qn(f)===c&&(S=new S(h,p+"enter",v,n,f),S.target=y,S.relatedTarget=N,w=S),N=w,x&&v)t:{for(S=x,h=v,p=0,y=S;y;y=ur(y))p++;for(y=0,w=h;w;w=ur(w))y++;for(;0<p-y;)S=ur(S),p--;for(;0<y-p;)h=ur(h),y--;for(;p--;){if(S===h||h!==null&&S===h.alternate)break t;S=ur(S),h=ur(h)}S=null}else S=null;x!==null&&qu(d,m,x,S,!1),v!==null&&N!==null&&qu(d,N,v,S,!0)}}e:{if(m=c?pr(c):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var k=Cp;else if(Ou(m))if(cf)k=Tp;else{k=jp;var E=Pp}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=bp);if(k&&(k=k(e,c))){uf(d,k,n,f);break e}E&&E(e,m,c),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&pa(m,"number",m.value)}switch(E=c?pr(c):window,e){case"focusin":(Ou(E)||E.contentEditable==="true")&&(mr=E,Pa=c,us=null);break;case"focusout":us=Pa=mr=null;break;case"mousedown":ja=!0;break;case"contextmenu":case"mouseup":case"dragend":ja=!1,Hu(d,n,f);break;case"selectionchange":if(_p)break;case"keydown":case"keyup":Hu(d,n,f)}var I;if(Ei)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else fr?of(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(lf&&n.locale!=="ko"&&(fr||P!=="onCompositionStart"?P==="onCompositionEnd"&&fr&&(I=sf()):(In=f,ki="value"in In?In.value:In.textContent,fr=!0)),E=zl(c,P),0<E.length&&(P=new zu(P,e,null,n,f),d.push({event:P,listeners:E}),I?P.data=I:(I=af(n),I!==null&&(P.data=I)))),(I=Sp?kp(e,n):Ip(e,n))&&(c=zl(c,"onBeforeInput"),0<c.length&&(f=new zu("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=I))}wf(d,t)})}function Ns(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=ys(e,n),l!=null&&r.unshift(Ns(e,l,s)),l=ys(e,t),l!=null&&r.push(Ns(e,l,s))),e=e.return}return r}function ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qu(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var a=n,i=a.alternate,c=a.stateNode;if(i!==null&&i===r)break;a.tag===5&&c!==null&&(a=c,s?(i=ys(n,l),i!=null&&o.unshift(Ns(n,i,a))):s||(i=ys(n,l),i!=null&&o.push(Ns(n,i,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var $p=/\r\n?/g,Up=/\u0000|\uFFFD/g;function Yu(e){return(typeof e=="string"?e:""+e).replace($p,`
`).replace(Up,"")}function nl(e,t,n){if(t=Yu(t),Yu(e)!==t&&n)throw Error(A(425))}function $l(){}var ba=null,Ta=null;function Aa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ra=typeof setTimeout=="function"?setTimeout:void 0,Dp=typeof clearTimeout=="function"?clearTimeout:void 0,Ku=typeof Promise=="function"?Promise:void 0,Op=typeof queueMicrotask=="function"?queueMicrotask:typeof Ku<"u"?function(e){return Ku.resolve(null).then(e).catch(Fp)}:Ra;function Fp(e){setTimeout(function(){throw e})}function Bo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ws(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ws(t)}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Dr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Dr,Es="__reactProps$"+Dr,un="__reactContainer$"+Dr,_a="__reactEvents$"+Dr,Bp="__reactListeners$"+Dr,Vp="__reactHandles$"+Dr;function Qn(e){var t=e[Kt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[un]||n[Kt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xu(e);e!==null;){if(n=e[Kt])return n;e=Xu(e)}return t}e=n,n=e.parentNode}return null}function Bs(e){return e=e[Kt]||e[un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function io(e){return e[Es]||null}var Ma=[],gr=-1;function Dn(e){return{current:e}}function ge(e){0>gr||(e.current=Ma[gr],Ma[gr]=null,gr--)}function he(e,t){gr++,Ma[gr]=e.current,e.current=t}var $n={},nt=Dn($n),dt=Dn(!1),Xn=$n;function Tr(e,t){var n=e.type.contextTypes;if(!n)return $n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ft(e){return e=e.childContextTypes,e!=null}function Ul(){ge(dt),ge(nt)}function Ju(e,t,n){if(nt.current!==$n)throw Error(A(168));he(nt,t),he(dt,n)}function kf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(A(108,Ph(e)||"Unknown",s));return Ie({},n,r)}function Dl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$n,Xn=nt.current,he(nt,e),he(dt,dt.current),!0}function Zu(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=kf(e,t,Xn),r.__reactInternalMemoizedMergedChildContext=e,ge(dt),ge(nt),he(nt,e)):ge(dt),he(dt,n)}var nn=null,uo=!1,Vo=!1;function If(e){nn===null?nn=[e]:nn.push(e)}function Gp(e){uo=!0,If(e)}function On(){if(!Vo&&nn!==null){Vo=!0;var e=0,t=fe;try{var n=nn;for(fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}nn=null,uo=!1}catch(s){throw nn!==null&&(nn=nn.slice(e+1)),Wd(vi,On),s}finally{fe=t,Vo=!1}}return null}var yr=[],vr=0,Ol=null,Fl=0,Pt=[],jt=0,Jn=null,rn=1,sn="";function Gn(e,t){yr[vr++]=Fl,yr[vr++]=Ol,Ol=e,Fl=t}function Nf(e,t,n){Pt[jt++]=rn,Pt[jt++]=sn,Pt[jt++]=Jn,Jn=e;var r=rn;e=sn;var s=32-Ft(r)-1;r&=~(1<<s),n+=1;var l=32-Ft(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,rn=1<<32-Ft(t)+s|n<<s|r,sn=l+e}else rn=1<<l|n<<s|r,sn=e}function Pi(e){e.return!==null&&(Gn(e,1),Nf(e,1,0))}function ji(e){for(;e===Ol;)Ol=yr[--vr],yr[vr]=null,Fl=yr[--vr],yr[vr]=null;for(;e===Jn;)Jn=Pt[--jt],Pt[jt]=null,sn=Pt[--jt],Pt[jt]=null,rn=Pt[--jt],Pt[jt]=null}var vt=null,yt=null,ve=!1,Dt=null;function Ef(e,t){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ec(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vt=e,yt=bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Jn!==null?{id:rn,overflow:sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vt=e,yt=null,!0):!1;default:return!1}}function La(e){return(e.mode&1)!==0&&(e.flags&128)===0}function za(e){if(ve){var t=yt;if(t){var n=t;if(!ec(e,t)){if(La(e))throw Error(A(418));t=bn(n.nextSibling);var r=vt;t&&ec(e,t)?Ef(r,n):(e.flags=e.flags&-4097|2,ve=!1,vt=e)}}else{if(La(e))throw Error(A(418));e.flags=e.flags&-4097|2,ve=!1,vt=e}}}function tc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vt=e}function rl(e){if(e!==vt)return!1;if(!ve)return tc(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Aa(e.type,e.memoizedProps)),t&&(t=yt)){if(La(e))throw Cf(),Error(A(418));for(;t;)Ef(e,t),t=bn(t.nextSibling)}if(tc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=vt?bn(e.stateNode.nextSibling):null;return!0}function Cf(){for(var e=yt;e;)e=bn(e.nextSibling)}function Ar(){yt=vt=null,ve=!1}function bi(e){Dt===null?Dt=[e]:Dt.push(e)}var Hp=fn.ReactCurrentBatchConfig;function Kr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var a=s.refs;o===null?delete a[l]:a[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function sl(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nc(e){var t=e._init;return t(e._payload)}function Pf(e){function t(h,p){if(e){var y=h.deletions;y===null?(h.deletions=[p],h.flags|=16):y.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function s(h,p){return h=_n(h,p),h.index=0,h.sibling=null,h}function l(h,p,y){return h.index=y,e?(y=h.alternate,y!==null?(y=y.index,y<p?(h.flags|=2,p):y):(h.flags|=2,p)):(h.flags|=1048576,p)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,p,y,w){return p===null||p.tag!==6?(p=Ko(y,h.mode,w),p.return=h,p):(p=s(p,y),p.return=h,p)}function i(h,p,y,w){var k=y.type;return k===dr?f(h,p,y.props.children,w,y.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===xn&&nc(k)===p.type)?(w=s(p,y.props),w.ref=Kr(h,p,y),w.return=h,w):(w=Cl(y.type,y.key,y.props,null,h.mode,w),w.ref=Kr(h,p,y),w.return=h,w)}function c(h,p,y,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Xo(y,h.mode,w),p.return=h,p):(p=s(p,y.children||[]),p.return=h,p)}function f(h,p,y,w,k){return p===null||p.tag!==7?(p=Kn(y,h.mode,w,k),p.return=h,p):(p=s(p,y),p.return=h,p)}function d(h,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ko(""+p,h.mode,y),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ws:return y=Cl(p.type,p.key,p.props,null,h.mode,y),y.ref=Kr(h,null,p),y.return=h,y;case cr:return p=Xo(p,h.mode,y),p.return=h,p;case xn:var w=p._init;return d(h,w(p._payload),y)}if(es(p)||Hr(p))return p=Kn(p,h.mode,y,null),p.return=h,p;sl(h,p)}return null}function m(h,p,y,w){var k=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:a(h,p,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ws:return y.key===k?i(h,p,y,w):null;case cr:return y.key===k?c(h,p,y,w):null;case xn:return k=y._init,m(h,p,k(y._payload),w)}if(es(y)||Hr(y))return k!==null?null:f(h,p,y,w,null);sl(h,y)}return null}function x(h,p,y,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return h=h.get(y)||null,a(p,h,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ws:return h=h.get(w.key===null?y:w.key)||null,i(p,h,w,k);case cr:return h=h.get(w.key===null?y:w.key)||null,c(p,h,w,k);case xn:var E=w._init;return x(h,p,y,E(w._payload),k)}if(es(w)||Hr(w))return h=h.get(y)||null,f(p,h,w,k,null);sl(p,w)}return null}function v(h,p,y,w){for(var k=null,E=null,I=p,P=p=0,R=null;I!==null&&P<y.length;P++){I.index>P?(R=I,I=null):R=I.sibling;var j=m(h,I,y[P],w);if(j===null){I===null&&(I=R);break}e&&I&&j.alternate===null&&t(h,I),p=l(j,p,P),E===null?k=j:E.sibling=j,E=j,I=R}if(P===y.length)return n(h,I),ve&&Gn(h,P),k;if(I===null){for(;P<y.length;P++)I=d(h,y[P],w),I!==null&&(p=l(I,p,P),E===null?k=I:E.sibling=I,E=I);return ve&&Gn(h,P),k}for(I=r(h,I);P<y.length;P++)R=x(I,h,P,y[P],w),R!==null&&(e&&R.alternate!==null&&I.delete(R.key===null?P:R.key),p=l(R,p,P),E===null?k=R:E.sibling=R,E=R);return e&&I.forEach(function(W){return t(h,W)}),ve&&Gn(h,P),k}function S(h,p,y,w){var k=Hr(y);if(typeof k!="function")throw Error(A(150));if(y=k.call(y),y==null)throw Error(A(151));for(var E=k=null,I=p,P=p=0,R=null,j=y.next();I!==null&&!j.done;P++,j=y.next()){I.index>P?(R=I,I=null):R=I.sibling;var W=m(h,I,j.value,w);if(W===null){I===null&&(I=R);break}e&&I&&W.alternate===null&&t(h,I),p=l(W,p,P),E===null?k=W:E.sibling=W,E=W,I=R}if(j.done)return n(h,I),ve&&Gn(h,P),k;if(I===null){for(;!j.done;P++,j=y.next())j=d(h,j.value,w),j!==null&&(p=l(j,p,P),E===null?k=j:E.sibling=j,E=j);return ve&&Gn(h,P),k}for(I=r(h,I);!j.done;P++,j=y.next())j=x(I,h,P,j.value,w),j!==null&&(e&&j.alternate!==null&&I.delete(j.key===null?P:j.key),p=l(j,p,P),E===null?k=j:E.sibling=j,E=j);return e&&I.forEach(function(ee){return t(h,ee)}),ve&&Gn(h,P),k}function N(h,p,y,w){if(typeof y=="object"&&y!==null&&y.type===dr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ws:e:{for(var k=y.key,E=p;E!==null;){if(E.key===k){if(k=y.type,k===dr){if(E.tag===7){n(h,E.sibling),p=s(E,y.props.children),p.return=h,h=p;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===xn&&nc(k)===E.type){n(h,E.sibling),p=s(E,y.props),p.ref=Kr(h,E,y),p.return=h,h=p;break e}n(h,E);break}else t(h,E);E=E.sibling}y.type===dr?(p=Kn(y.props.children,h.mode,w,y.key),p.return=h,h=p):(w=Cl(y.type,y.key,y.props,null,h.mode,w),w.ref=Kr(h,p,y),w.return=h,h=w)}return o(h);case cr:e:{for(E=y.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(h,p.sibling),p=s(p,y.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=Xo(y,h.mode,w),p.return=h,h=p}return o(h);case xn:return E=y._init,N(h,p,E(y._payload),w)}if(es(y))return v(h,p,y,w);if(Hr(y))return S(h,p,y,w);sl(h,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(h,p.sibling),p=s(p,y),p.return=h,h=p):(n(h,p),p=Ko(y,h.mode,w),p.return=h,h=p),o(h)):n(h,p)}return N}var Rr=Pf(!0),jf=Pf(!1),Bl=Dn(null),Vl=null,xr=null,Ti=null;function Ai(){Ti=xr=Vl=null}function Ri(e){var t=Bl.current;ge(Bl),e._currentValue=t}function $a(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cr(e,t){Vl=e,Ti=xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ct=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(Ti!==e)if(e={context:e,memoizedValue:t,next:null},xr===null){if(Vl===null)throw Error(A(308));xr=e,Vl.dependencies={lanes:0,firstContext:e}}else xr=xr.next=e;return t}var Wn=null;function _i(e){Wn===null?Wn=[e]:Wn.push(e)}function bf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,_i(t)):(n.next=s.next,s.next=n),t.interleaved=n,cn(e,r)}function cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var wn=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,cn(e,n)}return s=r.interleaved,s===null?(t.next=t,_i(r)):(t.next=s.next,s.next=t),r.interleaved=t,cn(e,n)}function wl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xi(e,n)}}function rc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gl(e,t,n,r){var s=e.updateQueue;wn=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var i=a,c=i.next;i.next=null,o===null?l=c:o.next=c,o=i;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=i))}if(l!==null){var d=s.baseState;o=0,f=c=i=null,a=l;do{var m=a.lane,x=a.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,S=a;switch(m=t,x=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(x,d,m);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,m=typeof v=="function"?v.call(x,d,m):v,m==null)break e;d=Ie({},d,m);break e;case 2:wn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else x={eventTime:x,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=x,i=d):f=f.next=x,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(i=d),s.baseState=i,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);er|=o,e.lanes=o,e.memoizedState=d}}function sc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var Vs={},Zt=Dn(Vs),Cs=Dn(Vs),Ps=Dn(Vs);function qn(e){if(e===Vs)throw Error(A(174));return e}function Li(e,t){switch(he(Ps,t),he(Cs,e),he(Zt,Vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ya(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ya(t,e)}ge(Zt),he(Zt,t)}function _r(){ge(Zt),ge(Cs),ge(Ps)}function Af(e){qn(Ps.current);var t=qn(Zt.current),n=ya(t,e.type);t!==n&&(he(Cs,e),he(Zt,n))}function zi(e){Cs.current===e&&(ge(Zt),ge(Cs))}var Se=Dn(0);function Hl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Go=[];function $i(){for(var e=0;e<Go.length;e++)Go[e]._workInProgressVersionPrimary=null;Go.length=0}var Sl=fn.ReactCurrentDispatcher,Ho=fn.ReactCurrentBatchConfig,Zn=0,ke=null,ze=null,Ue=null,Ql=!1,cs=!1,js=0,Qp=0;function Ke(){throw Error(A(321))}function Ui(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Di(e,t,n,r,s,l){if(Zn=l,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sl.current=e===null||e.memoizedState===null?Kp:Xp,e=n(r,s),cs){l=0;do{if(cs=!1,js=0,25<=l)throw Error(A(301));l+=1,Ue=ze=null,t.updateQueue=null,Sl.current=Jp,e=n(r,s)}while(cs)}if(Sl.current=Wl,t=ze!==null&&ze.next!==null,Zn=0,Ue=ze=ke=null,Ql=!1,t)throw Error(A(300));return e}function Oi(){var e=js!==0;return js=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?ke.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Rt(){if(ze===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Ue===null?ke.memoizedState:Ue.next;if(t!==null)Ue=t,ze=e;else{if(e===null)throw Error(A(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ue===null?ke.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function bs(e,t){return typeof t=="function"?t(e):t}function Qo(e){var t=Rt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=ze,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=o=null,i=null,c=l;do{var f=c.lane;if((Zn&f)===f)i!==null&&(i=i.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};i===null?(a=i=d,o=r):i=i.next=d,ke.lanes|=f,er|=f}c=c.next}while(c!==null&&c!==l);i===null?o=r:i.next=a,Vt(r,t.memoizedState)||(ct=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,ke.lanes|=l,er|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wo(e){var t=Rt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);Vt(l,t.memoizedState)||(ct=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Rf(){}function _f(e,t){var n=ke,r=Rt(),s=t(),l=!Vt(r.memoizedState,s);if(l&&(r.memoizedState=s,ct=!0),r=r.queue,Fi(zf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Ts(9,Lf.bind(null,n,r,s,t),void 0,null),Oe===null)throw Error(A(349));Zn&30||Mf(n,t,s)}return s}function Mf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lf(e,t,n,r){t.value=n,t.getSnapshot=r,$f(t)&&Uf(e)}function zf(e,t,n){return n(function(){$f(t)&&Uf(e)})}function $f(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch{return!0}}function Uf(e){var t=cn(e,1);t!==null&&Bt(t,e,1,-1)}function lc(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Yp.bind(null,ke,e),[t.memoizedState,e]}function Ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Df(){return Rt().memoizedState}function kl(e,t,n,r){var s=Yt();ke.flags|=e,s.memoizedState=Ts(1|t,n,void 0,r===void 0?null:r)}function co(e,t,n,r){var s=Rt();r=r===void 0?null:r;var l=void 0;if(ze!==null){var o=ze.memoizedState;if(l=o.destroy,r!==null&&Ui(r,o.deps)){s.memoizedState=Ts(t,n,l,r);return}}ke.flags|=e,s.memoizedState=Ts(1|t,n,l,r)}function oc(e,t){return kl(8390656,8,e,t)}function Fi(e,t){return co(2048,8,e,t)}function Of(e,t){return co(4,2,e,t)}function Ff(e,t){return co(4,4,e,t)}function Bf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vf(e,t,n){return n=n!=null?n.concat([e]):null,co(4,4,Bf.bind(null,t,e),n)}function Bi(){}function Gf(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ui(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hf(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ui(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qf(e,t,n){return Zn&21?(Vt(n,t)||(n=Kd(),ke.lanes|=n,er|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=n)}function Wp(e,t){var n=fe;fe=n!==0&&4>n?n:4,e(!0);var r=Ho.transition;Ho.transition={};try{e(!1),t()}finally{fe=n,Ho.transition=r}}function Wf(){return Rt().memoizedState}function qp(e,t,n){var r=Rn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qf(e))Yf(t,n);else if(n=bf(e,t,n,r),n!==null){var s=st();Bt(n,e,r,s),Kf(n,t,r)}}function Yp(e,t,n){var r=Rn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qf(e))Yf(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,a=l(o,n);if(s.hasEagerState=!0,s.eagerState=a,Vt(a,o)){var i=t.interleaved;i===null?(s.next=s,_i(t)):(s.next=i.next,i.next=s),t.interleaved=s;return}}catch{}finally{}n=bf(e,t,s,r),n!==null&&(s=st(),Bt(n,e,r,s),Kf(n,t,r))}}function qf(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Yf(e,t){cs=Ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xi(e,n)}}var Wl={readContext:At,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},Kp={readContext:At,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:oc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,kl(4194308,4,Bf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return kl(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qp.bind(null,ke,e),[r.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:lc,useDebugValue:Bi,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=lc(!1),t=e[0];return e=Wp.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ke,s=Yt();if(ve){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),Oe===null)throw Error(A(349));Zn&30||Mf(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,oc(zf.bind(null,r,l,e),[e]),r.flags|=2048,Ts(9,Lf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Yt(),t=Oe.identifierPrefix;if(ve){var n=sn,r=rn;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=js++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Qp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xp={readContext:At,useCallback:Gf,useContext:At,useEffect:Fi,useImperativeHandle:Vf,useInsertionEffect:Of,useLayoutEffect:Ff,useMemo:Hf,useReducer:Qo,useRef:Df,useState:function(){return Qo(bs)},useDebugValue:Bi,useDeferredValue:function(e){var t=Rt();return Qf(t,ze.memoizedState,e)},useTransition:function(){var e=Qo(bs)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Rf,useSyncExternalStore:_f,useId:Wf,unstable_isNewReconciler:!1},Jp={readContext:At,useCallback:Gf,useContext:At,useEffect:Fi,useImperativeHandle:Vf,useInsertionEffect:Of,useLayoutEffect:Ff,useMemo:Hf,useReducer:Wo,useRef:Df,useState:function(){return Wo(bs)},useDebugValue:Bi,useDeferredValue:function(e){var t=Rt();return ze===null?t.memoizedState=e:Qf(t,ze.memoizedState,e)},useTransition:function(){var e=Wo(bs)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Rf,useSyncExternalStore:_f,useId:Wf,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ua(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return(e=e._reactInternals)?sr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=st(),s=Rn(e),l=on(r,s);l.payload=t,n!=null&&(l.callback=n),t=Tn(e,l,s),t!==null&&(Bt(t,e,s,r),wl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=st(),s=Rn(e),l=on(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Tn(e,l,s),t!==null&&(Bt(t,e,s,r),wl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),r=Rn(e),s=on(n,r);s.tag=2,t!=null&&(s.callback=t),t=Tn(e,s,r),t!==null&&(Bt(t,e,r,n),wl(t,e,r))}};function ac(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!ks(n,r)||!ks(s,l):!0}function Xf(e,t,n){var r=!1,s=$n,l=t.contextType;return typeof l=="object"&&l!==null?l=At(l):(s=ft(t)?Xn:nt.current,r=t.contextTypes,l=(r=r!=null)?Tr(e,s):$n),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function ic(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function Da(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mi(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=At(l):(l=ft(t)?Xn:nt.current,s.context=Tr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Ua(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&fo.enqueueReplaceState(s,s.state,null),Gl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Mr(e,t){try{var n="",r=t;do n+=Ch(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Oa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Zp=typeof WeakMap=="function"?WeakMap:Map;function Jf(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,Ka=r),Oa(e,t)},n}function Zf(e,t,n){n=on(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Oa(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Oa(e,t),typeof r!="function"&&(An===null?An=new Set([this]):An.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function uc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Zp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=m0.bind(null,e,t,n),t.then(e,e))}function cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,Tn(n,t,1))),n.lanes|=1),e)}var e0=fn.ReactCurrentOwner,ct=!1;function rt(e,t,n,r){t.child=e===null?jf(t,null,n,r):Rr(t,e.child,n,r)}function fc(e,t,n,r,s){n=n.render;var l=t.ref;return Cr(t,s),r=Di(e,t,n,r,l,s),n=Oi(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dn(e,t,s)):(ve&&n&&Pi(t),t.flags|=1,rt(e,t,r,s),t.child)}function mc(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Ki(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,em(e,t,l,r,s)):(e=Cl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:ks,n(o,r)&&e.ref===t.ref)return dn(e,t,s)}return t.flags|=1,e=_n(l,r),e.ref=t.ref,e.return=t,t.child=e}function em(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(ks(l,r)&&e.ref===t.ref)if(ct=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(ct=!0);else return t.lanes=e.lanes,dn(e,t,s)}return Fa(e,t,n,r,s)}function tm(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Sr,gt),gt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(Sr,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,he(Sr,gt),gt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,he(Sr,gt),gt|=r;return rt(e,t,s,n),t.child}function nm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fa(e,t,n,r,s){var l=ft(n)?Xn:nt.current;return l=Tr(t,l),Cr(t,s),n=Di(e,t,n,r,l,s),r=Oi(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dn(e,t,s)):(ve&&r&&Pi(t),t.flags|=1,rt(e,t,n,s),t.child)}function hc(e,t,n,r,s){if(ft(n)){var l=!0;Dl(t)}else l=!1;if(Cr(t,s),t.stateNode===null)Il(e,t),Xf(t,n,r),Da(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var i=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=At(c):(c=ft(n)?Xn:nt.current,c=Tr(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||i!==c)&&ic(t,o,r,c),wn=!1;var m=t.memoizedState;o.state=m,Gl(t,r,o,s),i=t.memoizedState,a!==r||m!==i||dt.current||wn?(typeof f=="function"&&(Ua(t,n,f,r),i=t.memoizedState),(a=wn||ac(t,n,a,r,m,i,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Tf(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:$t(t.type,a),o.props=c,d=t.pendingProps,m=o.context,i=n.contextType,typeof i=="object"&&i!==null?i=At(i):(i=ft(n)?Xn:nt.current,i=Tr(t,i));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==i)&&ic(t,o,r,i),wn=!1,m=t.memoizedState,o.state=m,Gl(t,r,o,s);var v=t.memoizedState;a!==d||m!==v||dt.current||wn?(typeof x=="function"&&(Ua(t,n,x,r),v=t.memoizedState),(c=wn||ac(t,n,c,r,m,v,i)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=i,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Ba(e,t,n,r,l,s)}function Ba(e,t,n,r,s,l){nm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Zu(t,n,!1),dn(e,t,l);r=t.stateNode,e0.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Rr(t,e.child,null,l),t.child=Rr(t,null,a,l)):rt(e,t,a,l),t.memoizedState=r.state,s&&Zu(t,n,!0),t.child}function rm(e){var t=e.stateNode;t.pendingContext?Ju(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ju(e,t.context,!1),Li(e,t.containerInfo)}function pc(e,t,n,r,s){return Ar(),bi(s),t.flags|=256,rt(e,t,n,r),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0};function Ga(e){return{baseLanes:e,cachePool:null,transitions:null}}function sm(e,t,n){var r=t.pendingProps,s=Se.current,l=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),he(Se,s&1),e===null)return za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=po(o,r,0,null),e=Kn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ga(n),t.memoizedState=Va,e):Vi(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return t0(e,t,o,r,a,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,a=s.sibling;var i={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=_n(s,i),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=_n(a,l):(l=Kn(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?Ga(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=Va,r}return l=e.child,e=l.sibling,r=_n(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vi(e,t){return t=po({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ll(e,t,n,r){return r!==null&&bi(r),Rr(t,e.child,null,n),e=Vi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t0(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=qo(Error(A(422))),ll(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=po({mode:"visible",children:r.children},s,0,null),l=Kn(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Rr(t,e.child,null,o),t.child.memoizedState=Ga(o),t.memoizedState=Va,l);if(!(t.mode&1))return ll(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(A(419)),r=qo(l,r,void 0),ll(e,t,o,r)}if(a=(o&e.childLanes)!==0,ct||a){if(r=Oe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,cn(e,s),Bt(r,e,s,-1))}return Yi(),r=qo(Error(A(421))),ll(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=h0.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,yt=bn(s.nextSibling),vt=t,ve=!0,Dt=null,e!==null&&(Pt[jt++]=rn,Pt[jt++]=sn,Pt[jt++]=Jn,rn=e.id,sn=e.overflow,Jn=t),t=Vi(t,r.children),t.flags|=4096,t)}function gc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),$a(e.return,t,n)}function Yo(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function lm(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(rt(e,t,r.children,n),r=Se.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gc(e,n,t);else if(e.tag===19)gc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(he(Se,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Hl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yo(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Hl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yo(t,!0,n,null,l);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Il(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),er|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=_n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function n0(e,t,n){switch(t.tag){case 3:rm(t),Ar();break;case 5:Af(t);break;case 1:ft(t.type)&&Dl(t);break;case 4:Li(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;he(Bl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(he(Se,Se.current&1),t.flags|=128,null):n&t.child.childLanes?sm(e,t,n):(he(Se,Se.current&1),e=dn(e,t,n),e!==null?e.sibling:null);he(Se,Se.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return lm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),he(Se,Se.current),r)break;return null;case 22:case 23:return t.lanes=0,tm(e,t,n)}return dn(e,t,n)}var om,Ha,am,im;om=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ha=function(){};am=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qn(Zt.current);var l=null;switch(n){case"input":s=ma(e,s),r=ma(e,r),l=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),l=[];break;case"textarea":s=ga(e,s),r=ga(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$l)}va(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ps.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var i=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&i!==a&&(i!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in i)i.hasOwnProperty(o)&&a[o]!==i[o]&&(n||(n={}),n[o]=i[o])}else n||(l||(l=[]),l.push(c,n)),n=i;else c==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,a=a?a.__html:void 0,i!=null&&a!==i&&(l=l||[]).push(c,i)):c==="children"?typeof i!="string"&&typeof i!="number"||(l=l||[]).push(c,""+i):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ps.hasOwnProperty(c)?(i!=null&&c==="onScroll"&&pe("scroll",e),l||a===i||(l=[])):(l=l||[]).push(c,i))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};im=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xr(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function r0(e,t,n){var r=t.pendingProps;switch(ji(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return ft(t.type)&&Ul(),Xe(t),null;case 3:return r=t.stateNode,_r(),ge(dt),ge(nt),$i(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(rl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dt!==null&&(Za(Dt),Dt=null))),Ha(e,t),Xe(t),null;case 5:zi(t);var s=qn(Ps.current);if(n=t.type,e!==null&&t.stateNode!=null)am(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return Xe(t),null}if(e=qn(Zt.current),rl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Kt]=t,r[Es]=l,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<ns.length;s++)pe(ns[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Eu(r,l),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},pe("invalid",r);break;case"textarea":Pu(r,l),pe("invalid",r)}va(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&nl(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&nl(r.textContent,a,e),s=["children",""+a]):ps.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":qs(r),Cu(r,l,!0);break;case"textarea":qs(r),ju(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=$l)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ld(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Kt]=t,e[Es]=r,om(e,t,!1,!1),t.stateNode=e;e:{switch(o=xa(n,r),n){case"dialog":pe("cancel",e),pe("close",e),s=r;break;case"iframe":case"object":case"embed":pe("load",e),s=r;break;case"video":case"audio":for(s=0;s<ns.length;s++)pe(ns[s],e);s=r;break;case"source":pe("error",e),s=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),s=r;break;case"details":pe("toggle",e),s=r;break;case"input":Eu(e,r),s=ma(e,r),pe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),pe("invalid",e);break;case"textarea":Pu(e,r),s=ga(e,r),pe("invalid",e);break;default:s=r}va(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var i=a[l];l==="style"?Ud(e,i):l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&zd(e,i)):l==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&gs(e,i):typeof i=="number"&&gs(e,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ps.hasOwnProperty(l)?i!=null&&l==="onScroll"&&pe("scroll",e):i!=null&&mi(e,l,i,o))}switch(n){case"input":qs(e),Cu(e,r,!1);break;case"textarea":qs(e),ju(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?kr(e,!!r.multiple,l,!1):r.defaultValue!=null&&kr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=$l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)im(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=qn(Ps.current),qn(Zt.current),rl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Kt]=t,(l=r.nodeValue!==n)&&(e=vt,e!==null))switch(e.tag){case 3:nl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kt]=t,t.stateNode=r}return Xe(t),null;case 13:if(ge(Se),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&yt!==null&&t.mode&1&&!(t.flags&128))Cf(),Ar(),t.flags|=98560,l=!1;else if(l=rl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(A(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(A(317));l[Kt]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),l=!1}else Dt!==null&&(Za(Dt),Dt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?$e===0&&($e=3):Yi())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return _r(),Ha(e,t),e===null&&Is(t.stateNode.containerInfo),Xe(t),null;case 10:return Ri(t.type._context),Xe(t),null;case 17:return ft(t.type)&&Ul(),Xe(t),null;case 19:if(ge(Se),l=t.memoizedState,l===null)return Xe(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Xr(l,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Hl(e),o!==null){for(t.flags|=128,Xr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return he(Se,Se.current&1|2),t.child}e=e.sibling}l.tail!==null&&je()>Lr&&(t.flags|=128,r=!0,Xr(l,!1),t.lanes=4194304)}else{if(!r)if(e=Hl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!ve)return Xe(t),null}else 2*je()-l.renderingStartTime>Lr&&n!==1073741824&&(t.flags|=128,r=!0,Xr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=je(),t.sibling=null,n=Se.current,he(Se,r?n&1|2:n&1),t):(Xe(t),null);case 22:case 23:return qi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function s0(e,t){switch(ji(t),t.tag){case 1:return ft(t.type)&&Ul(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _r(),ge(dt),ge(nt),$i(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zi(t),null;case 13:if(ge(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(Se),null;case 4:return _r(),null;case 10:return Ri(t.type._context),null;case 22:case 23:return qi(),null;case 24:return null;default:return null}}var ol=!1,et=!1,l0=typeof WeakSet=="function"?WeakSet:Set,D=null;function wr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(e,t,r)}else n.current=null}function Qa(e,t,n){try{n()}catch(r){Pe(e,t,r)}}var yc=!1;function o0(e,t){if(ba=Ml,e=mf(),Ci(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,a=-1,i=-1,c=0,f=0,d=e,m=null;t:for(;;){for(var x;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==l||r!==0&&d.nodeType!==3||(i=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)m=d,d=x;for(;;){if(d===e)break t;if(m===n&&++c===s&&(a=o),m===l&&++f===r&&(i=o),(x=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=x}n=a===-1||i===-1?null:{start:a,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ta={focusedElem:e,selectionRange:n},Ml=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,N=v.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?S:$t(t.type,S),N);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){Pe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return v=yc,yc=!1,v}function ds(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Qa(t,n,l)}s=s.next}while(s!==r)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Wa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function um(e){var t=e.alternate;t!==null&&(e.alternate=null,um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kt],delete t[Es],delete t[_a],delete t[Bp],delete t[Vp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cm(e){return e.tag===5||e.tag===3||e.tag===4}function vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$l));else if(r!==4&&(e=e.child,e!==null))for(qa(e,t,n),e=e.sibling;e!==null;)qa(e,t,n),e=e.sibling}function Ya(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ya(e,t,n),e=e.sibling;e!==null;)Ya(e,t,n),e=e.sibling}var Ve=null,Ut=!1;function vn(e,t,n){for(n=n.child;n!==null;)dm(e,t,n),n=n.sibling}function dm(e,t,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(so,n)}catch{}switch(n.tag){case 5:et||wr(n,t);case 6:var r=Ve,s=Ut;Ve=null,vn(e,t,n),Ve=r,Ut=s,Ve!==null&&(Ut?(e=Ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(Ut?(e=Ve,n=n.stateNode,e.nodeType===8?Bo(e.parentNode,n):e.nodeType===1&&Bo(e,n),ws(e)):Bo(Ve,n.stateNode));break;case 4:r=Ve,s=Ut,Ve=n.stateNode.containerInfo,Ut=!0,vn(e,t,n),Ve=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Qa(n,t,o),s=s.next}while(s!==r)}vn(e,t,n);break;case 1:if(!et&&(wr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,t,a)}vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,vn(e,t,n),et=r):vn(e,t,n);break;default:vn(e,t,n)}}function xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new l0),t.forEach(function(r){var s=p0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ve=a.stateNode,Ut=!1;break e;case 3:Ve=a.stateNode.containerInfo,Ut=!0;break e;case 4:Ve=a.stateNode.containerInfo,Ut=!0;break e}a=a.return}if(Ve===null)throw Error(A(160));dm(l,o,s),Ve=null,Ut=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(c){Pe(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fm(t,e),t=t.sibling}function fm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),qt(e),r&4){try{ds(3,e,e.return),mo(3,e)}catch(S){Pe(e,e.return,S)}try{ds(5,e,e.return)}catch(S){Pe(e,e.return,S)}}break;case 1:Lt(t,e),qt(e),r&512&&n!==null&&wr(n,n.return);break;case 5:if(Lt(t,e),qt(e),r&512&&n!==null&&wr(n,n.return),e.flags&32){var s=e.stateNode;try{gs(s,"")}catch(S){Pe(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,a=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&_d(s,l),xa(a,o);var c=xa(a,l);for(o=0;o<i.length;o+=2){var f=i[o],d=i[o+1];f==="style"?Ud(s,d):f==="dangerouslySetInnerHTML"?zd(s,d):f==="children"?gs(s,d):mi(s,f,d,c)}switch(a){case"input":ha(s,l);break;case"textarea":Md(s,l);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?kr(s,!!l.multiple,x,!1):m!==!!l.multiple&&(l.defaultValue!=null?kr(s,!!l.multiple,l.defaultValue,!0):kr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Es]=l}catch(S){Pe(e,e.return,S)}}break;case 6:if(Lt(t,e),qt(e),r&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(S){Pe(e,e.return,S)}}break;case 3:if(Lt(t,e),qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ws(t.containerInfo)}catch(S){Pe(e,e.return,S)}break;case 4:Lt(t,e),qt(e);break;case 13:Lt(t,e),qt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Qi=je())),r&4&&xc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(et=(c=et)||f,Lt(t,e),et=c):Lt(t,e),qt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(D=e,f=e.child;f!==null;){for(d=D=f;D!==null;){switch(m=D,x=m.child,m.tag){case 0:case 11:case 14:case 15:ds(4,m,m.return);break;case 1:wr(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){Pe(r,n,S)}}break;case 5:wr(m,m.return);break;case 22:if(m.memoizedState!==null){Sc(d);continue}}x!==null?(x.return=m,D=x):Sc(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,c?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=d.stateNode,i=d.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,a.style.display=$d("display",o))}catch(S){Pe(e,e.return,S)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){Pe(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lt(t,e),qt(e),r&4&&xc(e);break;case 21:break;default:Lt(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(cm(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gs(s,""),r.flags&=-33);var l=vc(e);Ya(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vc(e);qa(e,a,o);break;default:throw Error(A(161))}}catch(i){Pe(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function a0(e,t,n){D=e,mm(e)}function mm(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var s=D,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ol;if(!o){var a=s.alternate,i=a!==null&&a.memoizedState!==null||et;a=ol;var c=et;if(ol=o,(et=i)&&!c)for(D=s;D!==null;)o=D,i=o.child,o.tag===22&&o.memoizedState!==null?kc(s):i!==null?(i.return=o,D=i):kc(s);for(;l!==null;)D=l,mm(l),l=l.sibling;D=s,ol=a,et=c}wc(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,D=l):wc(e)}}function wc(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||mo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!et)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:$t(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&sc(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}sc(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ws(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}et||t.flags&512&&Wa(t)}catch(m){Pe(t,t.return,m)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function Sc(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function kc(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(i){Pe(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(i){Pe(t,s,i)}}var l=t.return;try{Wa(t)}catch(i){Pe(t,l,i)}break;case 5:var o=t.return;try{Wa(t)}catch(i){Pe(t,o,i)}}}catch(i){Pe(t,t.return,i)}if(t===e){D=null;break}var a=t.sibling;if(a!==null){a.return=t.return,D=a;break}D=t.return}}var i0=Math.ceil,ql=fn.ReactCurrentDispatcher,Gi=fn.ReactCurrentOwner,Tt=fn.ReactCurrentBatchConfig,ie=0,Oe=null,Re=null,We=0,gt=0,Sr=Dn(0),$e=0,As=null,er=0,ho=0,Hi=0,fs=null,ut=null,Qi=0,Lr=1/0,tn=null,Yl=!1,Ka=null,An=null,al=!1,Nn=null,Kl=0,ms=0,Xa=null,Nl=-1,El=0;function st(){return ie&6?je():Nl!==-1?Nl:Nl=je()}function Rn(e){return e.mode&1?ie&2&&We!==0?We&-We:Hp.transition!==null?(El===0&&(El=Kd()),El):(e=fe,e!==0||(e=window.event,e=e===void 0?16:rf(e.type)),e):1}function Bt(e,t,n,r){if(50<ms)throw ms=0,Xa=null,Error(A(185));Os(e,n,r),(!(ie&2)||e!==Oe)&&(e===Oe&&(!(ie&2)&&(ho|=n),$e===4&&kn(e,We)),mt(e,r),n===1&&ie===0&&!(t.mode&1)&&(Lr=je()+500,uo&&On()))}function mt(e,t){var n=e.callbackNode;Hh(e,t);var r=_l(e,e===Oe?We:0);if(r===0)n!==null&&Au(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Au(n),t===1)e.tag===0?Gp(Ic.bind(null,e)):If(Ic.bind(null,e)),Op(function(){!(ie&6)&&On()}),n=null;else{switch(Xd(r)){case 1:n=vi;break;case 4:n=qd;break;case 16:n=Rl;break;case 536870912:n=Yd;break;default:n=Rl}n=Sm(n,hm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hm(e,t){if(Nl=-1,El=0,ie&6)throw Error(A(327));var n=e.callbackNode;if(Pr()&&e.callbackNode!==n)return null;var r=_l(e,e===Oe?We:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xl(e,r);else{t=r;var s=ie;ie|=2;var l=gm();(Oe!==e||We!==t)&&(tn=null,Lr=je()+500,Yn(e,t));do try{d0();break}catch(a){pm(e,a)}while(!0);Ai(),ql.current=l,ie=s,Re!==null?t=0:(Oe=null,We=0,t=$e)}if(t!==0){if(t===2&&(s=Na(e),s!==0&&(r=s,t=Ja(e,s))),t===1)throw n=As,Yn(e,0),kn(e,r),mt(e,je()),n;if(t===6)kn(e,r);else{if(s=e.current.alternate,!(r&30)&&!u0(s)&&(t=Xl(e,r),t===2&&(l=Na(e),l!==0&&(r=l,t=Ja(e,l))),t===1))throw n=As,Yn(e,0),kn(e,r),mt(e,je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Hn(e,ut,tn);break;case 3:if(kn(e,r),(r&130023424)===r&&(t=Qi+500-je(),10<t)){if(_l(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){st(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ra(Hn.bind(null,e,ut,tn),t);break}Hn(e,ut,tn);break;case 4:if(kn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Ft(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i0(r/1960))-r,10<r){e.timeoutHandle=Ra(Hn.bind(null,e,ut,tn),r);break}Hn(e,ut,tn);break;case 5:Hn(e,ut,tn);break;default:throw Error(A(329))}}}return mt(e,je()),e.callbackNode===n?hm.bind(null,e):null}function Ja(e,t){var n=fs;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=Xl(e,t),e!==2&&(t=ut,ut=n,t!==null&&Za(t)),e}function Za(e){ut===null?ut=e:ut.push.apply(ut,e)}function u0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Vt(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~Hi,t&=~ho,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ft(t),r=1<<n;e[n]=-1,t&=~r}}function Ic(e){if(ie&6)throw Error(A(327));Pr();var t=_l(e,0);if(!(t&1))return mt(e,je()),null;var n=Xl(e,t);if(e.tag!==0&&n===2){var r=Na(e);r!==0&&(t=r,n=Ja(e,r))}if(n===1)throw n=As,Yn(e,0),kn(e,t),mt(e,je()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hn(e,ut,tn),mt(e,je()),null}function Wi(e,t){var n=ie;ie|=1;try{return e(t)}finally{ie=n,ie===0&&(Lr=je()+500,uo&&On())}}function tr(e){Nn!==null&&Nn.tag===0&&!(ie&6)&&Pr();var t=ie;ie|=1;var n=Tt.transition,r=fe;try{if(Tt.transition=null,fe=1,e)return e()}finally{fe=r,Tt.transition=n,ie=t,!(ie&6)&&On()}}function qi(){gt=Sr.current,ge(Sr)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Dp(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(ji(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ul();break;case 3:_r(),ge(dt),ge(nt),$i();break;case 5:zi(r);break;case 4:_r();break;case 13:ge(Se);break;case 19:ge(Se);break;case 10:Ri(r.type._context);break;case 22:case 23:qi()}n=n.return}if(Oe=e,Re=e=_n(e.current,null),We=gt=t,$e=0,As=null,Hi=ho=er=0,ut=fs=null,Wn!==null){for(t=0;t<Wn.length;t++)if(n=Wn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}Wn=null}return e}function pm(e,t){do{var n=Re;try{if(Ai(),Sl.current=Wl,Ql){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ql=!1}if(Zn=0,Ue=ze=ke=null,cs=!1,js=0,Gi.current=null,n===null||n.return===null){$e=1,As=t,Re=null;break}e:{var l=e,o=n.return,a=n,i=t;if(t=We,a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var c=i,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=cc(o);if(x!==null){x.flags&=-257,dc(x,o,a,l,t),x.mode&1&&uc(l,c,t),t=x,i=c;var v=t.updateQueue;if(v===null){var S=new Set;S.add(i),t.updateQueue=S}else v.add(i);break e}else{if(!(t&1)){uc(l,c,t),Yi();break e}i=Error(A(426))}}else if(ve&&a.mode&1){var N=cc(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),dc(N,o,a,l,t),bi(Mr(i,a));break e}}l=i=Mr(i,a),$e!==4&&($e=2),fs===null?fs=[l]:fs.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var h=Jf(l,i,t);rc(l,h);break e;case 1:a=i;var p=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(An===null||!An.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var w=Zf(l,a,t);rc(l,w);break e}}l=l.return}while(l!==null)}vm(n)}catch(k){t=k,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function gm(){var e=ql.current;return ql.current=Wl,e===null?Wl:e}function Yi(){($e===0||$e===3||$e===2)&&($e=4),Oe===null||!(er&268435455)&&!(ho&268435455)||kn(Oe,We)}function Xl(e,t){var n=ie;ie|=2;var r=gm();(Oe!==e||We!==t)&&(tn=null,Yn(e,t));do try{c0();break}catch(s){pm(e,s)}while(!0);if(Ai(),ie=n,ql.current=r,Re!==null)throw Error(A(261));return Oe=null,We=0,$e}function c0(){for(;Re!==null;)ym(Re)}function d0(){for(;Re!==null&&!zh();)ym(Re)}function ym(e){var t=wm(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?vm(e):Re=t,Gi.current=null}function vm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=s0(n,t),n!==null){n.flags&=32767,Re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Re=null;return}}else if(n=r0(n,t,gt),n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);$e===0&&($e=5)}function Hn(e,t,n){var r=fe,s=Tt.transition;try{Tt.transition=null,fe=1,f0(e,t,n,r)}finally{Tt.transition=s,fe=r}return null}function f0(e,t,n,r){do Pr();while(Nn!==null);if(ie&6)throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Qh(e,l),e===Oe&&(Re=Oe=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,Sm(Rl,function(){return Pr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Tt.transition,Tt.transition=null;var o=fe;fe=1;var a=ie;ie|=4,Gi.current=null,o0(e,n),fm(n,e),Rp(Ta),Ml=!!ba,Ta=ba=null,e.current=n,a0(n),$h(),ie=a,fe=o,Tt.transition=l}else e.current=n;if(al&&(al=!1,Nn=e,Kl=s),l=e.pendingLanes,l===0&&(An=null),Oh(n.stateNode),mt(e,je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yl)throw Yl=!1,e=Ka,Ka=null,e;return Kl&1&&e.tag!==0&&Pr(),l=e.pendingLanes,l&1?e===Xa?ms++:(ms=0,Xa=e):ms=0,On(),null}function Pr(){if(Nn!==null){var e=Xd(Kl),t=Tt.transition,n=fe;try{if(Tt.transition=null,fe=16>e?16:e,Nn===null)var r=!1;else{if(e=Nn,Nn=null,Kl=0,ie&6)throw Error(A(331));var s=ie;for(ie|=4,D=e.current;D!==null;){var l=D,o=l.child;if(D.flags&16){var a=l.deletions;if(a!==null){for(var i=0;i<a.length;i++){var c=a[i];for(D=c;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:ds(8,f,l)}var d=f.child;if(d!==null)d.return=f,D=d;else for(;D!==null;){f=D;var m=f.sibling,x=f.return;if(um(f),f===c){D=null;break}if(m!==null){m.return=x,D=m;break}D=x}}}var v=l.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var N=S.sibling;S.sibling=null,S=N}while(S!==null)}}D=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,D=o;else e:for(;D!==null;){if(l=D,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ds(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,D=h;break e}D=l.return}}var p=e.current;for(D=p;D!==null;){o=D;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,D=y;else e:for(o=p;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mo(9,a)}}catch(k){Pe(a,a.return,k)}if(a===o){D=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,D=w;break e}D=a.return}}if(ie=s,On(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(so,e)}catch{}r=!0}return r}finally{fe=n,Tt.transition=t}}return!1}function Nc(e,t,n){t=Mr(n,t),t=Jf(e,t,1),e=Tn(e,t,1),t=st(),e!==null&&(Os(e,1,t),mt(e,t))}function Pe(e,t,n){if(e.tag===3)Nc(e,e,n);else for(;t!==null;){if(t.tag===3){Nc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(An===null||!An.has(r))){e=Mr(n,e),e=Zf(t,e,1),t=Tn(t,e,1),e=st(),t!==null&&(Os(t,1,e),mt(t,e));break}}t=t.return}}function m0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,Oe===e&&(We&n)===n&&($e===4||$e===3&&(We&130023424)===We&&500>je()-Qi?Yn(e,0):Hi|=n),mt(e,t)}function xm(e,t){t===0&&(e.mode&1?(t=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):t=1);var n=st();e=cn(e,t),e!==null&&(Os(e,t,n),mt(e,n))}function h0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xm(e,n)}function p0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),xm(e,n)}var wm;wm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ct=!1,n0(e,t,n);ct=!!(e.flags&131072)}else ct=!1,ve&&t.flags&1048576&&Nf(t,Fl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Il(e,t),e=t.pendingProps;var s=Tr(t,nt.current);Cr(t,n),s=Di(null,t,r,e,s,n);var l=Oi();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(r)?(l=!0,Dl(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Mi(t),s.updater=fo,t.stateNode=s,s._reactInternals=t,Da(t,r,e,n),t=Ba(null,t,r,!0,l,n)):(t.tag=0,ve&&l&&Pi(t),rt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Il(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=y0(r),e=$t(r,e),s){case 0:t=Fa(null,t,r,e,n);break e;case 1:t=hc(null,t,r,e,n);break e;case 11:t=fc(null,t,r,e,n);break e;case 14:t=mc(null,t,r,$t(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$t(r,s),Fa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$t(r,s),hc(e,t,r,s,n);case 3:e:{if(rm(t),e===null)throw Error(A(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Tf(e,t),Gl(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Mr(Error(A(423)),t),t=pc(e,t,r,n,s);break e}else if(r!==s){s=Mr(Error(A(424)),t),t=pc(e,t,r,n,s);break e}else for(yt=bn(t.stateNode.containerInfo.firstChild),vt=t,ve=!0,Dt=null,n=jf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ar(),r===s){t=dn(e,t,n);break e}rt(e,t,r,n)}t=t.child}return t;case 5:return Af(t),e===null&&za(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,Aa(r,s)?o=null:l!==null&&Aa(r,l)&&(t.flags|=32),nm(e,t),rt(e,t,o,n),t.child;case 6:return e===null&&za(t),null;case 13:return sm(e,t,n);case 4:return Li(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Rr(t,null,r,n):rt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$t(r,s),fc(e,t,r,s,n);case 7:return rt(e,t,t.pendingProps,n),t.child;case 8:return rt(e,t,t.pendingProps.children,n),t.child;case 12:return rt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,he(Bl,r._currentValue),r._currentValue=o,l!==null)if(Vt(l.value,o)){if(l.children===s.children&&!dt.current){t=dn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){o=l.child;for(var i=a.firstContext;i!==null;){if(i.context===r){if(l.tag===1){i=on(-1,n&-n),i.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i}}l.lanes|=n,i=l.alternate,i!==null&&(i.lanes|=n),$a(l.return,n,t),a.lanes|=n;break}i=i.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$a(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}rt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Cr(t,n),s=At(s),r=r(s),t.flags|=1,rt(e,t,r,n),t.child;case 14:return r=t.type,s=$t(r,t.pendingProps),s=$t(r.type,s),mc(e,t,r,s,n);case 15:return em(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$t(r,s),Il(e,t),t.tag=1,ft(r)?(e=!0,Dl(t)):e=!1,Cr(t,n),Xf(t,r,s),Da(t,r,s,n),Ba(null,t,r,!0,e,n);case 19:return lm(e,t,n);case 22:return tm(e,t,n)}throw Error(A(156,t.tag))};function Sm(e,t){return Wd(e,t)}function g0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,n,r){return new g0(e,t,n,r)}function Ki(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y0(e){if(typeof e=="function")return Ki(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pi)return 11;if(e===gi)return 14}return 2}function _n(e,t){var n=e.alternate;return n===null?(n=bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Cl(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")Ki(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case dr:return Kn(n.children,s,l,t);case hi:o=8,s|=8;break;case ua:return e=bt(12,n,t,s|2),e.elementType=ua,e.lanes=l,e;case ca:return e=bt(13,n,t,s),e.elementType=ca,e.lanes=l,e;case da:return e=bt(19,n,t,s),e.elementType=da,e.lanes=l,e;case Td:return po(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jd:o=10;break e;case bd:o=9;break e;case pi:o=11;break e;case gi:o=14;break e;case xn:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=bt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Kn(e,t,n,r){return e=bt(7,e,r,t),e.lanes=n,e}function po(e,t,n,r){return e=bt(22,e,r,t),e.elementType=Td,e.lanes=n,e.stateNode={isHidden:!1},e}function Ko(e,t,n){return e=bt(6,e,null,t),e.lanes=n,e}function Xo(e,t,n){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function v0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xi(e,t,n,r,s,l,o,a,i){return e=new v0(e,t,n,a,i),t===1?(t=1,l===!0&&(t|=8)):t=0,l=bt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(l),e}function x0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function km(e){if(!e)return $n;e=e._reactInternals;e:{if(sr(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(ft(n))return kf(e,n,t)}return t}function Im(e,t,n,r,s,l,o,a,i){return e=Xi(n,r,!0,e,s,l,o,a,i),e.context=km(null),n=e.current,r=st(),s=Rn(n),l=on(r,s),l.callback=t??null,Tn(n,l,s),e.current.lanes=s,Os(e,s,r),mt(e,r),e}function go(e,t,n,r){var s=t.current,l=st(),o=Rn(s);return n=km(n),t.context===null?t.context=n:t.pendingContext=n,t=on(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Tn(s,t,o),e!==null&&(Bt(e,s,o,l),wl(e,s,o)),o}function Jl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ec(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ji(e,t){Ec(e,t),(e=e.alternate)&&Ec(e,t)}function w0(){return null}var Nm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zi(e){this._internalRoot=e}yo.prototype.render=Zi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));go(e,t,null,null)};yo.prototype.unmount=Zi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tr(function(){go(null,e,null,null)}),t[un]=null}};function yo(e){this._internalRoot=e}yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=ef();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&nf(e)}};function eu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cc(){}function S0(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var c=Jl(o);l.call(c)}}var o=Im(t,r,e,0,null,!1,!1,"",Cc);return e._reactRootContainer=o,e[un]=o.current,Is(e.nodeType===8?e.parentNode:e),tr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Jl(i);a.call(c)}}var i=Xi(e,0,!1,null,null,!1,!1,"",Cc);return e._reactRootContainer=i,e[un]=i.current,Is(e.nodeType===8?e.parentNode:e),tr(function(){go(t,i,n,r)}),i}function xo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var a=s;s=function(){var i=Jl(o);a.call(i)}}go(t,o,e,s)}else o=S0(n,t,e,s,r);return Jl(o)}Jd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ts(t.pendingLanes);n!==0&&(xi(t,n|1),mt(t,je()),!(ie&6)&&(Lr=je()+500,On()))}break;case 13:tr(function(){var r=cn(e,1);if(r!==null){var s=st();Bt(r,e,1,s)}}),Ji(e,1)}};wi=function(e){if(e.tag===13){var t=cn(e,134217728);if(t!==null){var n=st();Bt(t,e,134217728,n)}Ji(e,134217728)}};Zd=function(e){if(e.tag===13){var t=Rn(e),n=cn(e,t);if(n!==null){var r=st();Bt(n,e,t,r)}Ji(e,t)}};ef=function(){return fe};tf=function(e,t){var n=fe;try{return fe=e,t()}finally{fe=n}};Sa=function(e,t,n){switch(t){case"input":if(ha(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=io(r);if(!s)throw Error(A(90));Rd(r),ha(r,s)}}}break;case"textarea":Md(e,n);break;case"select":t=n.value,t!=null&&kr(e,!!n.multiple,t,!1)}};Fd=Wi;Bd=tr;var k0={usingClientEntryPoint:!1,Events:[Bs,pr,io,Dd,Od,Wi]},Jr={findFiberByHostInstance:Qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I0={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hd(e),e===null?null:e.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||w0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{so=il.inject(I0),Jt=il}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k0;wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eu(t))throw Error(A(200));return x0(e,t,null,n)};wt.createRoot=function(e,t){if(!eu(e))throw Error(A(299));var n=!1,r="",s=Nm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Xi(e,1,!1,null,null,n,!1,r,s),e[un]=t.current,Is(e.nodeType===8?e.parentNode:e),new Zi(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Hd(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return tr(e)};wt.hydrate=function(e,t,n){if(!vo(t))throw Error(A(200));return xo(null,e,t,!0,n)};wt.hydrateRoot=function(e,t,n){if(!eu(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=Nm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Im(t,null,e,1,n??null,s,!1,l,o),e[un]=t.current,Is(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new yo(t)};wt.render=function(e,t,n){if(!vo(t))throw Error(A(200));return xo(null,e,t,!1,n)};wt.unmountComponentAtNode=function(e){if(!vo(e))throw Error(A(40));return e._reactRootContainer?(tr(function(){xo(null,null,e,!1,function(){e._reactRootContainer=null,e[un]=null})}),!0):!1};wt.unstable_batchedUpdates=Wi;wt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vo(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return xo(e,t,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function Em(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Em)}catch(e){console.error(e)}}Em(),Nd.exports=wt;var tu=Nd.exports,Pc=tu;aa.createRoot=Pc.createRoot,aa.hydrateRoot=Pc.hydrateRoot;const N0="modulepreload",E0=function(e){return"/"+e},jc={},tt=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(i=>{if(i=E0(i),i in jc)return;jc[i]=!0;const c=i.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":N0,c||(d.as="script"),d.crossOrigin="",d.href=i,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((m,x)=>{d.addEventListener("load",m),d.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&l(a.reason);return t().catch(l)})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rs.apply(this,arguments)}var En;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(En||(En={}));const bc="popstate";function C0(e){e===void 0&&(e={});function t(r,s){let{pathname:l,search:o,hash:a}=r.location;return ei("",{pathname:l,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Zl(s)}return j0(t,n,null,e)}function be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function P0(){return Math.random().toString(36).substr(2,8)}function Tc(e,t){return{usr:e.state,key:e.key,idx:t}}function ei(e,t,n,r){return n===void 0&&(n=null),Rs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Or(t):t,{state:n,key:t&&t.key||r||P0()})}function Zl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Or(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function j0(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,o=s.history,a=En.Pop,i=null,c=f();c==null&&(c=0,o.replaceState(Rs({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=En.Pop;let N=f(),h=N==null?null:N-c;c=N,i&&i({action:a,location:S.location,delta:h})}function m(N,h){a=En.Push;let p=ei(S.location,N,h);c=f()+1;let y=Tc(p,c),w=S.createHref(p);try{o.pushState(y,"",w)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(w)}l&&i&&i({action:a,location:S.location,delta:1})}function x(N,h){a=En.Replace;let p=ei(S.location,N,h);c=f();let y=Tc(p,c),w=S.createHref(p);o.replaceState(y,"",w),l&&i&&i({action:a,location:S.location,delta:0})}function v(N){let h=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof N=="string"?N:Zl(N);return p=p.replace(/ $/,"%20"),be(h,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,h)}let S={get action(){return a},get location(){return e(s,o)},listen(N){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(bc,d),i=N,()=>{s.removeEventListener(bc,d),i=null}},createHref(N){return t(s,N)},createURL:v,encodeLocation(N){let h=v(N);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:m,replace:x,go(N){return o.go(N)}};return S}var Ac;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ac||(Ac={}));function b0(e,t,n){return n===void 0&&(n="/"),T0(e,t,n)}function T0(e,t,n,r){let s=typeof t=="string"?Or(t):t,l=ru(s.pathname||"/",n);if(l==null)return null;let o=Cm(e);A0(o);let a=null;for(let i=0;a==null&&i<o.length;++i){let c=V0(l);a=O0(o[i],c)}return a}function Cm(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,o,a)=>{let i={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};i.relativePath.startsWith("/")&&(be(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let c=Mn([r,i.relativePath]),f=n.concat(i);l.children&&l.children.length>0&&(be(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Cm(l.children,t,f,c)),!(l.path==null&&!l.index)&&t.push({path:c,score:U0(c,l.index),routesMeta:f})};return e.forEach((l,o)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))s(l,o);else for(let i of Pm(l.path))s(l,o,i)}),t}function Pm(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let o=Pm(r.join("/")),a=[];return a.push(...o.map(i=>i===""?l:[l,i].join("/"))),s&&a.push(...o),a.map(i=>e.startsWith("/")&&i===""?"/":i)}function A0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:D0(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const R0=/^:[\w-]+$/,_0=3,M0=2,L0=1,z0=10,$0=-2,Rc=e=>e==="*";function U0(e,t){let n=e.split("/"),r=n.length;return n.some(Rc)&&(r+=$0),t&&(r+=M0),n.filter(s=>!Rc(s)).reduce((s,l)=>s+(R0.test(l)?_0:l===""?L0:z0),r)}function D0(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function O0(e,t,n){let{routesMeta:r}=e,s={},l="/",o=[];for(let a=0;a<r.length;++a){let i=r[a],c=a===r.length-1,f=l==="/"?t:t.slice(l.length)||"/",d=F0({path:i.relativePath,caseSensitive:i.caseSensitive,end:c},f),m=i.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Mn([l,d.pathname]),pathnameBase:q0(Mn([l,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(l=Mn([l,d.pathnameBase]))}return o}function F0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B0(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],o=l.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,f,d)=>{let{paramName:m,isOptional:x}=f;if(m==="*"){let S=a[d]||"";o=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[d];return x&&!v?c[m]=void 0:c[m]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:l,pathnameBase:o,pattern:e}}function B0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),nu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,i)=>(r.push({paramName:a,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function V0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ru(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const G0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H0=e=>G0.test(e);function Q0(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Or(e):e,l;if(n)if(H0(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),nu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=_c(n.substring(1),"/"):l=_c(n,t)}else l=t;return{pathname:l,search:Y0(r),hash:K0(s)}}function _c(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Jo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function W0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function su(e,t){let n=W0(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lu(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Or(e):(s=Rs({},e),be(!s.pathname||!s.pathname.includes("?"),Jo("?","pathname","search",s)),be(!s.pathname||!s.pathname.includes("#"),Jo("#","pathname","hash",s)),be(!s.search||!s.search.includes("#"),Jo("#","search","hash",s)));let l=e===""||s.pathname==="",o=l?"/":s.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}a=d>=0?t[d]:"/"}let i=Q0(s,a),c=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(c||f)&&(i.pathname+="/"),i}const Mn=e=>e.join("/").replace(/\/\/+/g,"/"),q0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,K0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function X0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jm=["post","put","patch","delete"];new Set(jm);const J0=["get",...jm];new Set(J0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _s(){return _s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_s.apply(this,arguments)}const ou=g.createContext(null),Z0=g.createContext(null),Fn=g.createContext(null),wo=g.createContext(null),mn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),bm=g.createContext(null);function eg(e,t){let{relative:n}=t===void 0?{}:t;Fr()||be(!1);let{basename:r,navigator:s}=g.useContext(Fn),{hash:l,pathname:o,search:a}=Am(e,{relative:n}),i=o;return r!=="/"&&(i=o==="/"?r:Mn([r,o])),s.createHref({pathname:i,search:a,hash:l})}function Fr(){return g.useContext(wo)!=null}function en(){return Fr()||be(!1),g.useContext(wo).location}function Tm(e){g.useContext(Fn).static||g.useLayoutEffect(e)}function Br(){let{isDataRoute:e}=g.useContext(mn);return e?mg():tg()}function tg(){Fr()||be(!1);let e=g.useContext(ou),{basename:t,future:n,navigator:r}=g.useContext(Fn),{matches:s}=g.useContext(mn),{pathname:l}=en(),o=JSON.stringify(su(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return Tm(()=>{a.current=!0}),g.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=lu(c,JSON.parse(o),l,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Mn([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,l,e])}function Hv(){let{matches:e}=g.useContext(mn),t=e[e.length-1];return t?t.params:{}}function Am(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=g.useContext(Fn),{matches:s}=g.useContext(mn),{pathname:l}=en(),o=JSON.stringify(su(s,r.v7_relativeSplatPath));return g.useMemo(()=>lu(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function ng(e,t){return rg(e,t)}function rg(e,t,n,r){Fr()||be(!1);let{navigator:s}=g.useContext(Fn),{matches:l}=g.useContext(mn),o=l[l.length-1],a=o?o.params:{};o&&o.pathname;let i=o?o.pathnameBase:"/";o&&o.route;let c=en(),f;if(t){var d;let N=typeof t=="string"?Or(t):t;i==="/"||(d=N.pathname)!=null&&d.startsWith(i)||be(!1),f=N}else f=c;let m=f.pathname||"/",x=m;if(i!=="/"){let N=i.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=b0(e,{pathname:x}),S=ig(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},a,N.params),pathname:Mn([i,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?i:Mn([i,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,r);return t&&S?g.createElement(wo.Provider,{value:{location:_s({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:En.Pop}},S):S}function sg(){let e=fg(),t=X0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const lg=g.createElement(sg,null);class og extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(mn.Provider,{value:this.props.routeContext},g.createElement(bm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ag(e){let{routeContext:t,match:n,children:r}=e,s=g.useContext(ou);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(mn.Provider,{value:t},r)}function ig(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||be(!1),o=o.slice(0,Math.min(o.length,f+1))}let i=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:m,errors:x}=n,v=d.route.loader&&m[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){i=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,d,m)=>{let x,v=!1,S=null,N=null;n&&(x=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||lg,i&&(c<0&&m===0?(hg("route-fallback"),v=!0,N=null):c===m&&(v=!0,N=d.route.hydrateFallbackElement||null)));let h=t.concat(o.slice(0,m+1)),p=()=>{let y;return x?y=S:v?y=N:d.route.Component?y=g.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,g.createElement(ag,{match:d,routeContext:{outlet:f,matches:h,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?g.createElement(og,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()},null)}var Rm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Rm||{}),_m=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_m||{});function ug(e){let t=g.useContext(ou);return t||be(!1),t}function cg(e){let t=g.useContext(Z0);return t||be(!1),t}function dg(e){let t=g.useContext(mn);return t||be(!1),t}function Mm(e){let t=dg(),n=t.matches[t.matches.length-1];return n.route.id||be(!1),n.route.id}function fg(){var e;let t=g.useContext(bm),n=cg(),r=Mm();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function mg(){let{router:e}=ug(Rm.UseNavigateStable),t=Mm(_m.UseNavigateStable),n=g.useRef(!1);return Tm(()=>{n.current=!0}),g.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,_s({fromRouteId:t},l)))},[e,t])}const Mc={};function hg(e,t,n){Mc[e]||(Mc[e]=!0)}function pg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function gg(e){let{to:t,replace:n,state:r,relative:s}=e;Fr()||be(!1);let{future:l,static:o}=g.useContext(Fn),{matches:a}=g.useContext(mn),{pathname:i}=en(),c=Br(),f=lu(t,su(a,l.v7_relativeSplatPath),i,s==="path"),d=JSON.stringify(f);return g.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function Je(e){be(!1)}function yg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=En.Pop,navigator:l,static:o=!1,future:a}=e;Fr()&&be(!1);let i=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:i,navigator:l,static:o,future:_s({v7_relativeSplatPath:!1},a)}),[i,a,l,o]);typeof r=="string"&&(r=Or(r));let{pathname:f="/",search:d="",hash:m="",state:x=null,key:v="default"}=r,S=g.useMemo(()=>{let N=ru(f,i);return N==null?null:{location:{pathname:N,search:d,hash:m,state:x,key:v},navigationType:s}},[i,f,d,m,x,v,s]);return S==null?null:g.createElement(Fn.Provider,{value:c},g.createElement(wo.Provider,{children:n,value:S}))}function vg(e){let{children:t,location:n}=e;return ng(ti(t),n)}new Promise(()=>{});function ti(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let l=[...t,s];if(r.type===g.Fragment){n.push.apply(n,ti(r.props.children,l));return}r.type!==Je&&be(!1),!r.props.index||!r.props.children||be(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ti(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ni.apply(this,arguments)}function xg(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,l;for(l=0;l<r.length;l++)s=r[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function wg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Sg(e,t){return e.button===0&&(!t||t==="_self")&&!wg(e)}function ri(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function kg(e,t){let n=ri(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(l=>{n.append(s,l)})}),n}const Ig=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ng="6";try{window.__reactRouterVersion=Ng}catch{}const Eg="startTransition",Lc=mh[Eg];function Cg(e){let{basename:t,children:n,future:r,window:s}=e,l=g.useRef();l.current==null&&(l.current=C0({window:s,v5Compat:!0}));let o=l.current,[a,i]=g.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=g.useCallback(d=>{c&&Lc?Lc(()=>i(d)):i(d)},[i,c]);return g.useLayoutEffect(()=>o.listen(f),[o,f]),g.useEffect(()=>pg(r),[r]),g.createElement(yg,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Pg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zc=g.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:l,replace:o,state:a,target:i,to:c,preventScrollReset:f,viewTransition:d}=t,m=xg(t,Ig),{basename:x}=g.useContext(Fn),v,S=!1;if(typeof c=="string"&&jg.test(c)&&(v=c,Pg))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),k=ru(w.pathname,x);w.origin===y.origin&&k!=null?c=k+w.search+w.hash:S=!0}catch{}let N=eg(c,{relative:s}),h=bg(c,{replace:o,state:a,target:i,preventScrollReset:f,relative:s,viewTransition:d});function p(y){r&&r(y),y.defaultPrevented||h(y)}return g.createElement("a",ni({},m,{href:v||N,onClick:S||l?r:p,ref:n,target:i}))});var $c;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($c||($c={}));var Uc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Uc||(Uc={}));function bg(e,t){let{target:n,replace:r,state:s,preventScrollReset:l,relative:o,viewTransition:a}=t===void 0?{}:t,i=Br(),c=en(),f=Am(e,{relative:o});return g.useCallback(d=>{if(Sg(d,n)){d.preventDefault();let m=r!==void 0?r:Zl(c)===Zl(f);i(e,{replace:m,state:s,preventScrollReset:l,relative:o,viewTransition:a})}},[c,i,f,r,s,n,e,l,o,a])}function Qv(e){let t=g.useRef(ri(e)),n=g.useRef(!1),r=en(),s=g.useMemo(()=>kg(r.search,n.current?null:t.current),[r.search]),l=Br(),o=g.useCallback((a,i)=>{const c=ri(typeof a=="function"?a(s):a);n.current=!0,l("?"+c,i)},[l,s]);return[s,o]}const Tg={},Dc=e=>{let t;const n=new Set,r=(f,d)=>{const m=typeof f=="function"?f(t):f;if(!Object.is(m,t)){const x=t;t=d??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(v=>v(t,x))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Tg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,i);return i},Ag=e=>e?Dc(e):Dc;var Lm={exports:{}},zm={},$m={exports:{}},Um={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr=g;function Rg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _g=typeof Object.is=="function"?Object.is:Rg,Mg=zr.useState,Lg=zr.useEffect,zg=zr.useLayoutEffect,$g=zr.useDebugValue;function Ug(e,t){var n=t(),r=Mg({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return zg(function(){s.value=n,s.getSnapshot=t,Zo(s)&&l({inst:s})},[e,n,t]),Lg(function(){return Zo(s)&&l({inst:s}),e(function(){Zo(s)&&l({inst:s})})},[e]),$g(n),n}function Zo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_g(e,n)}catch{return!0}}function Dg(e,t){return t()}var Og=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Dg:Ug;Um.useSyncExternalStore=zr.useSyncExternalStore!==void 0?zr.useSyncExternalStore:Og;$m.exports=Um;var Fg=$m.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=g,Bg=Fg;function Vg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gg=typeof Object.is=="function"?Object.is:Vg,Hg=Bg.useSyncExternalStore,Qg=So.useRef,Wg=So.useEffect,qg=So.useMemo,Yg=So.useDebugValue;zm.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var l=Qg(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=qg(function(){function i(x){if(!c){if(c=!0,f=x,x=r(x),s!==void 0&&o.hasValue){var v=o.value;if(s(v,x))return d=v}return d=x}if(v=d,Gg(f,x))return v;var S=r(x);return s!==void 0&&s(v,S)?(f=x,v):(f=x,d=S)}var c=!1,f,d,m=n===void 0?null:n;return[function(){return i(t())},m===null?void 0:function(){return i(m())}]},[t,n,r,s]);var a=Hg(e,l[0],l[1]);return Wg(function(){o.hasValue=!0,o.value=a},[a]),Yg(a),a};Lm.exports=zm;var Kg=Lm.exports;const Xg=fd(Kg),Dm={},{useDebugValue:Jg}=ci,{useSyncExternalStoreWithSelector:Zg}=Xg;let Oc=!1;const e1=e=>e;function t1(e,t=e1,n){(Dm?"production":void 0)!=="production"&&n&&!Oc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Oc=!0);const r=Zg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Jg(r),r}const Fc=e=>{(Dm?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Ag(e):e,n=(r,s)=>t1(t,r,s);return Object.assign(n,t),n},lr=e=>e?Fc(e):Fc,n1={};function r1(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var l;const o=i=>i===null?null:JSON.parse(i,void 0),a=(l=n.getItem(s))!=null?l:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,l)=>n.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>n.removeItem(s)}}const Ms=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Ms(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ms(r)(n)}}}},s1=(e,t)=>(n,r,s)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:N=>N,version:0,merge:(N,h)=>({...h,...N}),...t},o=!1;const a=new Set,i=new Set;let c;try{c=l.getStorage()}catch{}if(!c)return e((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...N)},r,s);const f=Ms(l.serialize),d=()=>{const N=l.partialize({...r()});let h;const p=f({state:N,version:l.version}).then(y=>c.setItem(l.name,y)).catch(y=>{h=y});if(h)throw h;return p},m=s.setState;s.setState=(N,h)=>{m(N,h),d()};const x=e((...N)=>{n(...N),d()},r,s);let v;const S=()=>{var N;if(!c)return;o=!1,a.forEach(p=>p(r()));const h=((N=l.onRehydrateStorage)==null?void 0:N.call(l,r()))||void 0;return Ms(c.getItem.bind(c))(l.name).then(p=>{if(p)return l.deserialize(p)}).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==l.version){if(l.migrate)return l.migrate(p.state,p.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return p.state}).then(p=>{var y;return v=l.merge(p,(y=r())!=null?y:x),n(v,!0),d()}).then(()=>{h==null||h(v,void 0),o=!0,i.forEach(p=>p(v))}).catch(p=>{h==null||h(void 0,p)})};return s.persist={setOptions:N=>{l={...l,...N},N.getStorage&&(c=N.getStorage())},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:N=>(a.add(N),()=>{a.delete(N)}),onFinishHydration:N=>(i.add(N),()=>{i.delete(N)})},S(),v||x},l1=(e,t)=>(n,r,s)=>{let l={storage:r1(()=>localStorage),partialize:S=>S,version:0,merge:(S,N)=>({...N,...S}),...t},o=!1;const a=new Set,i=new Set;let c=l.storage;if(!c)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...S)},r,s);const f=()=>{const S=l.partialize({...r()});return c.setItem(l.name,{state:S,version:l.version})},d=s.setState;s.setState=(S,N)=>{d(S,N),f()};const m=e((...S)=>{n(...S),f()},r,s);s.getInitialState=()=>m;let x;const v=()=>{var S,N;if(!c)return;o=!1,a.forEach(p=>{var y;return p((y=r())!=null?y:m)});const h=((N=l.onRehydrateStorage)==null?void 0:N.call(l,(S=r())!=null?S:m))||void 0;return Ms(c.getItem.bind(c))(l.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==l.version){if(l.migrate)return[!0,l.migrate(p.state,p.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var y;const[w,k]=p;if(x=l.merge(k,(y=r())!=null?y:m),n(x,!0),w)return f()}).then(()=>{h==null||h(x,void 0),x=r(),o=!0,i.forEach(p=>p(x))}).catch(p=>{h==null||h(void 0,p)})};return s.persist={setOptions:S=>{l={...l,...S},S.storage&&(c=S.storage)},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(i.add(S),()=>{i.delete(S)})},l.skipHydration||v(),x||m},o1=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((n1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),s1(e,t)):l1(e,t),Gs=o1,_={log:(...e)=>{},warn:(...e)=>{},error:(...e)=>{console.error(...e)},debug:(...e)=>{}};function Om(e){let t=null,n=null;function r(){return t?Promise.resolve(t):n||(n=new Promise((s,l)=>{const o=indexedDB.open(e,1);o.onupgradeneeded=()=>{const a=o.result;a.objectStoreNames.contains("zustand")||a.createObjectStore("zustand")},o.onsuccess=()=>{t=o.result,t.onclose=()=>{t=null,n=null},s(t)},o.onerror=()=>{n=null,l(o.error)}}),n)}return{getItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readonly").objectStore("zustand").get(s);c.onsuccess=()=>{const f=c.result;o(f?JSON.parse(f):null)},c.onerror=()=>{o(null)}})}catch{return null}},setItem:async(s,l)=>{const o=await r();return new Promise((a,i)=>{const d=o.transaction(["zustand"],"readwrite").objectStore("zustand").put(JSON.stringify(l),s);d.onsuccess=()=>{a()},d.onerror=()=>{i(d.error)}})},removeItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readwrite").objectStore("zustand").delete(s);c.onsuccess=()=>{o()},c.onerror=()=>{o()}})}catch{}}}}const Ls={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){_.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){_.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){_.error("Failed to clear localStorage:",e)}}};function a1(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}function Wv(e){const t=Math.floor(e/1e7),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function Pl(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function qv(e){return e&&Pl(e).replace(/'/g,"")}function Ot(){return(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!("MSStream"in window)}function i1(e){if(!e||e.trim()==="")return null;const t=e.trim().toLowerCase(),n=t.indexOf("_");return n===-1?{category:t,value:null}:{category:t.substring(0,n),value:t.substring(n+1)}}function Ze(e){if(e.length<=1)return[...e];const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function ea(e){return e.toLowerCase().replace(/[\u2018\u2019\u2032\u2033]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/'/g,"").replace(/[_\*\-\.]/g,"").replace(/\s+/g," ").trim()}function u1(e){if(!e)return[];const t=/\(\s*(?:feat\.?|ft\.?|featuring|with)\s+(.+?)\s*\)/gi,n=[];let r;for(;(r=t.exec(e))!==null;){const l=r[1].split(/,|\s+and\s+/i).map(o=>o.trim()).filter(Boolean);n.push(...l)}return n}function c1(e){if(!e.length)return{map:{},artistIdsByName:new Map};const t=new Map;for(const r of e)if(r.ArtistItems){for(const s of r.ArtistItems)if(s.Name&&s.Id){const l=ea(s.Name);t.has(l)||t.set(l,new Set),t.get(l).add(s.Id)}}const n={};for(const r of e){const s=u1(r.Name);if(s.length===0)continue;const l=new Set;for(const o of s){const a=ea(o),i=t.get(a);if(i){for(const c of i)l.add(c);continue}if(o.includes("&")){const c=o.split("&").map(f=>f.trim()).filter(Boolean);for(const f of c){const d=t.get(ea(f));if(d)for(const m of d)l.add(m)}}}for(const o of l)n[o]||(n[o]=[]),n[o].push(r)}return{map:n,artistIdsByName:t}}const d1=Om("tunetuna-storage");function Bc(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function Yv(e){const t=new Map;e.forEach(r=>{r.Grouping&&r.Grouping.forEach(s=>{const l=i1(s);l&&(t.has(l.category)||t.set(l.category,new Set),l.value&&t.get(l.category).add(l.value))})});const n=[];for(const[r,s]of t)n.push({name:Bc(r),key:r,values:Array.from(s).map(l=>Bc(l)).sort(),isSingleValue:s.size===0});return n.sort((r,s)=>r.name.localeCompare(s.name))}function Kv(e){return c1(e)}const re=lr()(Gs(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],shufflePool:[],lastPoolUpdate:null,loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1,feed:!1},feedTopSongs:[],feedNewReleases:[],feedLastUpdated:null,sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},recentlyAccessedMoods:{},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(l=>l.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t}),refreshShufflePool:()=>e(t=>{let r=t.songs;const s=Object.values(t.genreSongs).flat().length;if(t.songs.length===0&&s>0&&(r=Object.values(t.genreSongs).flat()),r.length===0)return{shufflePool:[]};const l=new Set(t.recentlyPlayed.slice(0,10).map(i=>i.Id));r=r.filter(i=>!l.has(i.Id));let o=r;if(o.length<30){const i=t.recentlyPlayed.slice(0,30-o.length);o=[...o,...i.map(c=>t.songs.find(f=>f.Id===c.Id)).filter(Boolean)]}return{shufflePool:Ze(o).slice(0,30),lastPoolUpdate:Date.now()}}),setFeedTopSongs:t=>e({feedTopSongs:t}),setFeedNewReleases:t=>e({feedNewReleases:t}),setFeedLastUpdated:t=>e({feedLastUpdated:t}),recordMoodAccess:t=>e(n=>({recentlyAccessedMoods:{...n.recentlyAccessedMoods,[t.toLowerCase()]:Date.now()}}))}),{name:"music-storage",storage:d1,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,shufflePool:e.shufflePool,lastPoolUpdate:e.lastPoolUpdate,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed,recentlyAccessedMoods:e.recentlyAccessedMoods,feedTopSongs:e.feedTopSongs,feedNewReleases:e.feedNewReleases,feedLastUpdated:e.feedLastUpdated})})),Vc=3e4,Gc=15e3,ul=2,Hc=1e3,Qc=12*60*60*1e3,Xv=6*60*60*1e3,Ct=200,Wc=1e3,qc=5e4,f1=/^https?:\/\/100\.\d+\.\d+\.\d+/,Fm="Tunetuna",m1="Web",Bm="1.0.0",Qe=lr()(Gs(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!0,stats:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),showQueueRecommendations:!0,setShowQueueRecommendations:t=>e({showQueueRecommendations:t}),recommendationsQuality:"good",setRecommendationsQuality:t=>e({recommendationsQuality:t}),statsTrackingEnabled:!0,setStatsTrackingEnabled:t=>e({statsTrackingEnabled:t}),feedCountry:"gb",setFeedCountry:t=>e({feedCountry:t}),showMoodCards:!0,setShowMoodCards:t=>e({showMoodCards:t}),showTop10:!0,setShowTop10:t=>e({showTop10:t}),showNewReleases:!1,setShowNewReleases:t=>e({showNewReleases:t}),showRecentlyPlayed:!0,setShowRecentlyPlayed:t=>e({showRecentlyPlayed:t}),muspyRssUrl:"",setMuspyRssUrl:t=>e({muspyRssUrl:t}),localServerUrl:"",setLocalServerUrl:t=>e({localServerUrl:t})}),{name:"settings-storage"})),h1=Object.freeze(Object.defineProperty({__proto__:null,useSettingsStore:Qe},Symbol.toStringTag,{value:"Module"})),De=lr(e=>({toasts:[],addToast:(t,n="success",r=3e3)=>{const s=`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,l={id:s,message:t,type:n,duration:r};e(o=>({toasts:[...o.toasts,l]})),r>0&&setTimeout(()=>{e(o=>({toasts:o.toasts.filter(a=>a.id!==s)}))},r)},removeToast:t=>{e(n=>({toasts:n.toasts.filter(r=>r.id!==t)}))}})),pt="/api/stats",p1=Om("tunetuna-stats-storage");async function g1(e,t){const n=`${e}::${t}`,r=new TextEncoder,s=await crypto.subtle.digest("SHA-256",r.encode(n));return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}function y1(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function cl(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim()}async function ta(e){const{pendingEvents:t}=e();await e().updateStatsKey();const{cachedStatsKey:n,cachedStatsToken:r}=e();if(!n||!r)return[...t];try{const s=await fetch(`${pt}/${n}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":r}});if(s.ok){const o=(await s.json()).events||[],a=new Set(o.map(c=>`${c.ts}-${c.songId}`)),i=t.filter(c=>!a.has(`${c.ts}-${c.songId}`));return[...o,...i]}}catch{}return[...t]}function v1(e){var t,n;return{ts:Date.now(),songId:e.Id,songName:e.Name||"Unknown",artistIds:((t=e.ArtistItems)==null?void 0:t.map(r=>r.Id))||[],artistNames:((n=e.ArtistItems)==null?void 0:n.map(r=>r.Name||"Unknown"))||[e.AlbumArtist||"Unknown"],albumId:e.AlbumId||"",albumName:e.Album||"Unknown",genres:e.Genres||[],year:e.ProductionYear||null,fullDurationMs:e.RunTimeTicks?e.RunTimeTicks/1e4:0}}let na=!1;const Ge=lr()(Gs((e,t)=>({pendingEvents:[],lastSyncedAt:null,cachedEvents:[],cacheRange:null,currentPlay:null,cachedStatsKey:null,cachedStatsToken:null,metadataVersion:0,oldestEventTs:null,startPlay:n=>{e({currentPlay:{track:n,startedAt:Date.now()}})},recordPlay:(n,r)=>{if(!Qe.getState().statsTrackingEnabled)return;const{pendingEvents:s}=t(),l=n.RunTimeTicks?n.RunTimeTicks/1e4:0,o=l>0&&l<6e4;if(!(r>=6e4||o&&r>=l*.8))return;const i=v1(n),c=[...s,i];e({pendingEvents:c,currentPlay:null}),t().syncToServer()},syncToServer:async()=>{if(!na){na=!0;try{const{pendingEvents:n}=t();if(n.length===0)return;const{serverUrl:r,userId:s}=we.getState();if(!r||!s)return;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return;const a=[...n];try{const i=await fetch(`${pt}/${l}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":o},body:JSON.stringify({_token:o,events:a})});i.ok?e(c=>({pendingEvents:c.pendingEvents.filter(f=>!a.some(d=>d.ts===f.ts&&d.songId===f.songId)),lastSyncedAt:Date.now(),cacheRange:null})):console.error("[Stats] Sync failed:",i.status,i.statusText)}catch(i){console.error("[Stats] Sync error:",i)}}finally{na=!1}}},updateStatsKey:async()=>{const{serverUrl:n,userId:r}=we.getState();if(!n||!r){e({cachedStatsKey:null,cachedStatsToken:null});return}const{cachedStatsToken:s}=t(),l=s||y1(),o=await g1(n,r);e({cachedStatsKey:o,cachedStatsToken:l})},fetchEvents:async(n,r)=>{const{cacheRange:s,cachedEvents:l,pendingEvents:o}=t(),{serverUrl:a,userId:i}=we.getState();if(!a||!i)return[];if(s&&s.from<=n&&s.to>=r){const d=l.filter(x=>x.ts>=n&&x.ts<=r),m=o.filter(x=>x.ts>=n&&x.ts<=r);return[...d,...m].sort((x,v)=>x.ts-v.ts)}await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(!c||!f)return[];try{const d=await fetch(`${pt}/${c}/events?from=${n}&to=${r}`,{headers:{"X-Stats-Token":f}});if(!d.ok)return[];const x=(await d.json()).events||[];e({cachedEvents:x,cacheRange:{from:n,to:r}});const v=o.filter(S=>S.ts>=n&&S.ts<=r);return[...x,...v].sort((S,N)=>S.ts-N.ts)}catch{return[]}},clearCache:()=>{e({cachedEvents:[],cacheRange:null})},updateEventMetadata:(n,r,s)=>{const{cachedEvents:l,pendingEvents:o}=t(),a=i=>{let c=!1;return(n==="song"&&i.songId===r||n==="album"&&i.albumId===r||n==="artist"&&i.artistIds.includes(r))&&(c=!0),c?{...i,...s.songName!==void 0&&{songName:s.songName},...s.artistNames!==void 0&&{artistNames:s.artistNames},...s.albumName!==void 0&&{albumName:s.albumName},...s.genres!==void 0&&{genres:s.genres},...s.year!==void 0&&{year:s.year}}:i};e(i=>({cachedEvents:l.map(a),pendingEvents:o.map(a),metadataVersion:i.metadataVersion+1})),(async()=>{const{serverUrl:i,userId:c}=we.getState();if(!i||!c)return;await t().updateStatsKey();const{cachedStatsKey:f,cachedStatsToken:d}=t();if(!(!f||!d))try{await fetch(`${pt}/${f}/events/metadata`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Stats-Token":d},body:JSON.stringify({itemType:n,itemId:r,metadata:s})})}catch{}})()},exportStats:async()=>{const{pendingEvents:n}=t(),{serverUrl:r,userId:s}=we.getState();let l=[...n];if(r&&s){await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(c&&f)try{const d=await fetch(`${pt}/${c}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":f}});if(d.ok){const x=(await d.json()).events||[],v=new Set(l.map(S=>`${S.ts}-${S.songId}`));for(const S of x){const N=`${S.ts}-${S.songId}`;v.has(N)||l.push(S)}}}catch{}}l.sort((c,f)=>c.ts-f.ts);const o=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download=`tunetuna-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},clearLocalStats:()=>{e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null})},clearAllStats:async()=>{const{serverUrl:n,userId:r}=we.getState();if(e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null}),n&&r){await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l}=t();if(s&&l)try{return(await fetch(`${pt}/${s}/events`,{method:"DELETE",headers:{"X-Stats-Token":l}})).ok}catch{return!1}}return!0},importStats:async n=>{const{serverUrl:r,userId:s}=we.getState();if(!r||!s)throw new Error("Not authenticated");const l=await n.text();let o;try{o=JSON.parse(l)}catch{throw new Error("Invalid JSON file")}if(!Array.isArray(o))throw new Error("File must contain an array of events");const a=o.filter(v=>typeof v.ts=="number"&&typeof v.songId=="string"&&typeof v.songName=="string"&&Array.isArray(v.artistIds)&&Array.isArray(v.artistNames)&&typeof v.albumId=="string"&&typeof v.albumName=="string"&&Array.isArray(v.genres)&&typeof v.fullDurationMs=="number");if(a.length===0)throw new Error("No valid events found in file");await t().updateStatsKey();const{cachedStatsKey:i,cachedStatsToken:c}=t();if(!i||!c)throw new Error("Failed to initialize stats authentication");let f=new Set;try{const v=await fetch(`${pt}/${i}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":c}});if(v.ok){const N=(await v.json()).events||[];f=new Set(N.map(h=>`${h.ts}-${h.songId}`))}}catch{}const{pendingEvents:d}=t();for(const v of d)f.add(`${v.ts}-${v.songId}`);const m=a.filter(v=>!f.has(`${v.ts}-${v.songId}`));if(m.length===0)return{imported:0,skipped:a.length};if(!(await fetch(`${pt}/${i}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":c},body:JSON.stringify(m)})).ok)throw new Error("Failed to upload events");return e({cacheRange:null}),{imported:m.length,skipped:a.length-m.length}},hasStats:async()=>{var a;const{pendingEvents:n}=t();if(n.length>0)return!0;const{serverUrl:r,userId:s}=we.getState();if(!r||!s)return!1;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return!1;try{const i=await fetch(`${pt}/${l}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":o}});if(i.ok)return(((a=(await i.json()).events)==null?void 0:a.length)||0)>0}catch{}return!1},initializeOldestTs:async()=>{const{serverUrl:n,userId:r}=we.getState();if(!n||!r)return;await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l,pendingEvents:o}=t();if(!(!s||!l))try{const a=await fetch(`${pt}/${s}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":l}});if(a.ok){const c=(await a.json()).events||[];o.length>0&&await t().syncToServer();const f=[...c,...o];if(f.length>0){const d=Math.min(...f.map(m=>m.ts));e({oldestEventTs:d})}}}catch{}},detectMismatchedEvents:async()=>{const{serverUrl:n,userId:r}=we.getState();if(!n||!r)return{mismatched:0,total:0};const s=await ta(t);if(s.length===0)return{mismatched:0,total:0};const{songs:l}=re.getState();if(l.length===0)return{mismatched:0,total:0};const o=new Set(l.map(i=>i.Id));return{mismatched:s.filter(i=>!o.has(i.songId)).length,total:s.length}},remapEvents:async()=>{var v,S;const{serverUrl:n,userId:r}=we.getState();if(!n||!r)throw new Error("Not authenticated");const s=await ta(t);if(s.length===0)return{remapped:0,unmatched:0};const{songs:l}=re.getState(),o=new Set(l.map(N=>N.Id)),a=new Map;for(const N of l){const h=((S=(v=N.ArtistItems)==null?void 0:v[0])==null?void 0:S.Name)||N.AlbumArtist||"",p=`${cl(N.Name)}::${cl(h)}`;a.has(p)||a.set(p,N)}let i=0,c=0;const f=s.map(N=>{var w,k;if(o.has(N.songId))return N;const h=N.artistNames[0]||"",p=`${cl(N.songName)}::${cl(h)}`,y=a.get(p);return y?(i++,{...N,songId:y.Id,albumId:y.AlbumId||N.albumId,albumName:y.Album||N.albumName,artistIds:((w=y.ArtistItems)==null?void 0:w.map(E=>E.Id))||N.artistIds,artistNames:((k=y.ArtistItems)==null?void 0:k.map(E=>E.Name||"Unknown"))||N.artistNames}):(c++,N)});await t().clearAllStats(),await t().updateStatsKey();const{cachedStatsKey:d,cachedStatsToken:m}=t();if(!d||!m)throw new Error("Failed to initialize stats authentication");if(!(await fetch(`${pt}/${d}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":m},body:JSON.stringify(f)})).ok)throw new Error("Failed to upload remapped events");return e({cacheRange:null}),{remapped:i,unmatched:c}},removeMismatchedEvents:async()=>{const{serverUrl:n,userId:r}=we.getState();if(!n||!r)throw new Error("Not authenticated");const s=await ta(t);if(s.length===0)return{removed:0,kept:0};const{songs:l}=re.getState(),o=new Set(l.map(c=>c.Id)),a=s.filter(c=>o.has(c.songId)),i=s.length-a.length;if(i===0)return{removed:0,kept:a.length};if(await t().clearAllStats(),a.length>0){await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(!c||!f)throw new Error("Failed to initialize stats authentication");if(!(await fetch(`${pt}/${c}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":f},body:JSON.stringify(a)})).ok)throw new Error("Failed to upload filtered events")}return e({cacheRange:null}),{removed:i,kept:a.length}}}),{name:"stats-storage",storage:p1,partialize:e=>({pendingEvents:e.pendingEvents,lastSyncedAt:e.lastSyncedAt,cachedStatsToken:e.cachedStatsToken,oldestEventTs:e.oldestEventTs})}));let Yc=!1,ra=null;function Kc(){const{pendingEvents:e,cachedStatsKey:t,cachedStatsToken:n}=Ge.getState();if(e.length>0&&t&&n){const r={_token:n,events:e},s=new Blob([JSON.stringify(r)],{type:"application/json"});return navigator.sendBeacon(`${pt}/${t}/events`,s),!0}return!1}function x1(){Yc||typeof document>"u"||(Yc=!0,document.addEventListener("visibilitychange",()=>{const{pendingEvents:e}=Ge.getState();document.visibilityState==="hidden"?e.length>0&&Kc():document.visibilityState==="visible"&&e.length>0&&Ge.getState().syncToServer()}),window.addEventListener("beforeunload",()=>{Kc()}),setTimeout(()=>{ra&&ra(),ra=we.subscribe((n,r)=>{(n.serverUrl!==r.serverUrl||n.userId!==r.userId)&&(Ge.getState().updateStatsKey(),Ge.getState().initializeOldestTs())});const{serverUrl:e,userId:t}=we.getState();e&&t&&(Ge.getState().updateStatsKey(),Ge.getState().initializeOldestTs())},0))}x1();const Xc=100,hs=new Set,eo=new Map,to=new Set;let it=null;function w1(){if(hs.size>Xc){const e=Array.from(hs);e.slice(0,e.length-Xc).forEach(n=>hs.delete(n))}}function si(){hs.clear();for(const e of eo.values())clearTimeout(e);eo.clear();for(const e of to)clearTimeout(e);to.clear(),it&&(clearTimeout(it),it=null)}function sa(e,t,n=5e3){const r=setTimeout(async()=>{const s=t();if((s==null?void 0:s.Id)===e)try{await $.markItemAsPlayed(e),hs.add(e),w1();const l=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}})),to.delete(l)},4e3);to.add(l)}catch{}eo.delete(e)},n);eo.set(e,r)}const te=lr()(Gs((e,t)=>({songs:[],currentIndex:-1,previousIndex:-1,standardOrder:[],shuffleOrder:[],isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,nextAudioElement:null,nextTrackId:null,isFetchingRecommendations:!1,isLoadingMoreSongs:!1,shuffleHasMoreSongs:!1,lastPlayedTrack:null,isShuffleAllActive:!1,isShuffleGenreActive:!1,manuallyCleared:!1,hasRecordedCurrentTrackStats:!1,isQueueSidebarOpen:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setNextAudioElement:n=>{e({nextAudioElement:n}),n&&(n.volume=t().volume)},preBufferNextTrack:()=>{const{nextAudioElement:n,currentIndex:r,songs:s,repeat:l,nextTrackId:o}=t();if(!n||l==="one")return;let a=r+1;if(a>=s.length)if(l==="all")a=0;else{o&&(e({nextTrackId:null}),n.removeAttribute("src"),n.load());return}const i=s[a];if(!i||o===i.Id)return;const c=$.serverBaseUrl;if(!c)return;const f=`${c}/Audio/${i.Id}/stream?static=true`;n.src=f,n.load(),e({nextTrackId:i.Id})},swapToPreBuffered:()=>{const{audioElement:n,nextAudioElement:r,nextTrackId:s,currentIndex:l,songs:o,repeat:a}=t();if(!r||!s)return;let i=l+1;if(i>=o.length)if(a==="all")i=0;else return;const c=o[i];if(!c||c.Id!==s){t().cancelPreBuffer();return}const f=t();if(!f.hasRecordedCurrentTrackStats&&f.currentIndex>=0&&f.currentIndex<f.songs.length){const x=f.songs[f.currentIndex];Ge.getState().recordPlay(x,f.currentTime*1e3)}const d=l>=0?o[l]:null;if(Ot()){r.removeAttribute("src"),r.load();const x=$.serverBaseUrl;if(!x||!n)return;const v=`${x}/Audio/${c.Id}/stream?static=true`;e({nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:0,isPlaying:!0}),n.src=v,n.load(),n.play().then(()=>{sa(c.Id,()=>t().songs[t().currentIndex]||null),re.getState().addToRecentlyPlayed(c),Ge.getState().startPlay(c)}).catch(S=>{_.error("[iOS Gapless] Playback error:",S),e({isPlaying:!1})});return}n&&(n.pause(),n.removeAttribute("src"),n.load());const m=r.duration&&!isNaN(r.duration)?r.duration:0;e({audioElement:r,nextAudioElement:n,nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:m,isPlaying:!0}),r.play().then(()=>{sa(c.Id,()=>t().songs[t().currentIndex]||null),re.getState().addToRecentlyPlayed(c),Ge.getState().startPlay(c)}).catch(x=>{_.error("[Gapless] Playback error on swapped element:",x),e({isPlaying:!1})})},cancelPreBuffer:()=>{const{nextAudioElement:n}=t();n&&(n.removeAttribute("src"),n.load()),e({nextTrackId:null})},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setIsLoadingMoreSongs:n=>{e({isLoadingMoreSongs:n})},setCurrentTime:n=>{const{currentIndex:r,songs:s,hasRecordedCurrentTrackStats:l}=t();if(e({currentTime:n}),n>=60&&!l&&r>=0&&r<s.length){const o=s[r];Ge.getState().recordPlay(o,n*1e3),e({hasRecordedCurrentTrackStats:!0})}},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n);const s=t().nextAudioElement;s&&(s.volume=n)},clearQueue:()=>{t().cancelPreBuffer(),it&&(clearTimeout(it),it=null),e(n=>{const r=n.currentIndex>=0?[n.songs[n.currentIndex]]:[];return{songs:r,currentIndex:r.length>0?0:-1,previousIndex:-1,standardOrder:r.map(s=>s.Id),shuffleOrder:r.map(s=>s.Id),manuallyCleared:!0}})},addToQueue:(n,r=!1,s="user")=>{t().cancelPreBuffer(),e(l=>{const o=l.currentIndex>=0?l.songs[l.currentIndex]:null,a=n.map(v=>({...v,source:s}));let i;const c=a;if(r){const v=l.shuffle?Ze([...a]):a,S=l.currentIndex+1,N=l.songs.slice(0,S),h=l.songs.slice(S);i=[...N,...v,...h]}else if(s==="recommendation")i=[...l.songs,...c];else{const v=l.songs.findIndex((S,N)=>N>l.currentIndex&&S.source==="recommendation");v!==-1?i=[...l.songs.slice(0,v),...c,...l.songs.slice(v)]:i=[...l.songs,...c]}let f=l.currentIndex;if(l.currentIndex>=0&&o){const v=i.findIndex(S=>S.Id===o.Id);v!==-1?f=v:_.error("[addToQueue] CRITICAL: Could not find current song in new queue!")}let d=i;if(i.length>1e3){const v=i.slice(0,f),S=i.slice(f+1),N=v.slice(-5),h=S,p=1e3-N.length-(o?1:0)-h.length,y=v.slice(-Math.max(0,p));d=[...y,...o?[o]:[],...h],f=o?y.length:-1}const x=d.filter(v=>v.source==="user").map(v=>v.Id);return{songs:d,currentIndex:f,standardOrder:x,shuffleOrder:x,manuallyCleared:!1}})},addToQueueWithToast:n=>{t().addToQueue(n,!1,"user");const r=n.length,s=r===1?"Added to queue":`${r} songs added to queue`;De.getState().addToast(s,"success",2e3)},removeFromQueue:n=>{t().cancelPreBuffer(),e(r=>{if(n<0||n>=r.songs.length)return r;const s=r.songs[n],l=r.songs.filter((f,d)=>d!==n);let o=r.standardOrder.filter(f=>f!==s.Id),a=r.shuffleOrder.filter(f=>f!==s.Id),i=r.currentIndex,c=r.previousIndex;return n<r.currentIndex?i=r.currentIndex-1:n===r.currentIndex&&(i=-1),n<r.previousIndex?c=r.previousIndex-1:n===r.previousIndex&&(c=-1),{songs:l,currentIndex:i,previousIndex:c,standardOrder:o,shuffleOrder:a}})},reorderQueue:(n,r)=>{t().cancelPreBuffer(),e(s=>{if(n<0||r<0||n>=s.songs.length||r>=s.songs.length||n===r)return s;const l=s.songs[n],o=s.songs[r];if(l.source!==o.source)return s;const a=[...s.songs],[i]=a.splice(n,1);if(a.splice(r,0,i),l.source==="user"){const f=s.shuffle?"shuffleOrder":"standardOrder",d=s[f],m=d.indexOf(l.Id);if(m>=0){const x=[...d];x.splice(m,1);const S=a.slice(0,r+1).filter(h=>h.source==="user").length-1;x.splice(S,0,l.Id);const N=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,[f]:x,currentIndex:N,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}}}const c=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,currentIndex:c,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}})},play:()=>{const{audioElement:n,currentIndex:r,songs:s,currentTime:l}=t();if(n&&r>=0&&r<s.length){const o=s[r],a=$.serverBaseUrl,i=a?`${a}/Audio/${o.Id}/stream?static=true`:"";n.src!==i?(n.src=i,n.load()):l===0&&n.currentTime>.5&&(n.currentTime=0,n.duration&&!isNaN(n.duration)&&e({duration:n.duration})),n.play().then(()=>{e({isPlaying:!0,hasRecordedCurrentTrackStats:!1}),sa(o.Id,()=>t().songs[t().currentIndex]||null),re.getState().addToRecentlyPlayed(o),Ge.getState().startPlay(o)}).catch(c=>{_.error("Playback error:",c),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const n=t();if(_.debug("[PlayerStore] next() called",{currentIndex:n.currentIndex,queueLength:n.songs.length}),n.songs.length===0)return;if(n.repeat==="one"&&n.currentIndex>=0){t().seek(0),t().play();return}let r=n.currentIndex+1;if(r>=n.songs.length)if(n.repeat==="all")r=0;else{if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];Ge.getState().recordPlay(o,n.currentTime*1e3)}t().pause();return}const s=n.songs[r];if(n.nextTrackId&&s&&n.nextTrackId===s.Id){t().swapToPreBuffered();return}if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];Ge.getState().recordPlay(o,n.currentTime*1e3)}const l=n.currentIndex>=0?n.songs[n.currentIndex]:null;e({previousIndex:n.currentIndex,currentIndex:r,lastPlayedTrack:l}),t().play()},previous:()=>{t().cancelPreBuffer(),e(n=>{if(n.songs.length===0)return n;let r=n.currentIndex,s=n.currentIndex;if(n.currentIndex>0)r=n.currentIndex-1;else if(n.repeat==="all")r=n.songs.length-1;else return n;return{currentIndex:r,previousIndex:s}}),t().play()},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n})),window.dispatchEvent(new CustomEvent("playerSeek"))},toggleShuffle:()=>{t().cancelPreBuffer(),e(n=>{const r=!n.shuffle;if(r){const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,o=n.songs.slice(n.currentIndex+1).filter(m=>m.source==="user"),a=n.songs.filter(m=>m.source==="recommendation"),i=Ze(o.map(m=>m.Id)),c=i.map(m=>o.find(x=>x.Id===m)).filter(Boolean),f=[...s,...l?[l]:[],...c,...a],d=[...n.standardOrder.slice(0,n.currentIndex+1),...i];return{shuffle:r,shuffleOrder:d,songs:f}}else{const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,a=n.standardOrder.slice(n.currentIndex+1).map(f=>n.songs.find(d=>d.Id===f&&d.source==="user")).filter(Boolean),i=n.songs.filter(f=>f.source==="recommendation"),c=[...s,...l?[l]:[],...a,...i];return{shuffle:r,songs:c}}})},toggleRepeat:()=>{t().cancelPreBuffer(),e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{t().cancelPreBuffer();let s,l;r?(s=r,l=r.findIndex(a=>a.Id===n.Id),l===-1&&(s=[n,...r.filter(a=>a.Id!==n.Id)],l=0)):(s=[n],l=0);const o=s.map(a=>({...a,source:"user"}));e({songs:o,standardOrder:o.map(a=>a.Id),shuffleOrder:o.map(a=>a.Id),currentIndex:l,previousIndex:l>0?l-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playAlbum:(n,r=0)=>{t().cancelPreBuffer();const s=n.map(l=>({...l,source:"user"}));e({songs:s,standardOrder:s.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:r,previousIndex:r>0?r-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playNext:n=>{t().addToQueue(n,!0);const r=n.length,s=r===1?"Playing next":`${r} songs playing next`;De.getState().addToast(s,"success",2e3)},shuffleArtist:n=>{t().cancelPreBuffer();const r=n.map(l=>({...l,source:"user"})),s=Ze(r);e({songs:s,standardOrder:r.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},shuffleAllSongs:async()=>{t().clearQueue();const{setShowQueueRecommendations:n}=Qe.getState();n(!1);const s=typeof window<"u"&&window.innerWidth<768?400:800,l=re.getState();let o=[];if(l.shufflePool.length>=1){const d=Math.min(5,l.shufflePool.length);o=l.shufflePool.slice(0,d);const m=l.shufflePool.slice(d),x=l.songs,v=new Set(l.recentlyPlayed.slice(0,10).map(p=>p.Id)),S=x.filter(p=>!v.has(p.Id)),N=Ze(S).slice(0,d),h=[...m,...N];re.setState({shufflePool:h,lastPoolUpdate:Date.now()})}else{let d=l.songs;if(!d||d.length===0)try{d=(await $.getSongs({limit:Math.max(50,s),sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]}catch(m){_.error("Failed to fetch songs for shuffle all:",m);return}o=Ze(d).slice(0,5),d.filter(m=>!o.some(x=>x.Id===m.Id)),re.setState({songs:d,shufflePool:Ze(d).slice(0,30),lastPoolUpdate:Date.now()})}const a=o.map(d=>({...d,source:"user"})),i=o.length,f=l.songs.length+Object.values(l.genreSongs).flat().length>o.length;e({songs:a,standardOrder:a.map(d=>d.Id),shuffleOrder:a.map(d=>d.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:f,manuallyCleared:!0}),t().play(),it&&clearTimeout(it),it=setTimeout(async()=>{it=null;try{const d=t();if(!d.shuffle||d.songs.length!==i)return;let m=l.songs;(!m||m.length===0)&&(m=(await $.getSongs({limit:s,sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]);const x=Object.values(l.genreSongs).flat(),v=[...m,...x],S=new Map;v.forEach(y=>S.set(y.Id,y));const N=Array.from(S.values()),h=new Set(a.map(y=>y.Id)),p=N.filter(y=>!h.has(y.Id));if(p.length>0){const y=Math.min(s-i,p.length),k=Ze(p).slice(0,y).map(E=>({...E,source:"user"}));e(E=>{const I=new Set(a.map(W=>W.Id)),P=E.songs.filter(W=>!I.has(W.Id)&&W.source==="user"),R=[...a,...P,...k];let j=E.currentIndex;if(P.length>0&&E.currentIndex>=a.length){const W=E.songs[E.currentIndex];W&&(j=R.findIndex(ee=>ee.Id===W.Id))}return{songs:R,currentIndex:j>=0?j:E.currentIndex,standardOrder:R.map(W=>W.Id),shuffleOrder:R.map(W=>W.Id),shuffleHasMoreSongs:p.length>y,manuallyCleared:!1}}),re.getState().refreshShufflePool()}}catch(d){_.error("Failed to expand shuffle queue:",d)}},100)},shuffleGenreSongs:async(n,r)=>{t().clearQueue();const{setShowQueueRecommendations:s}=Qe.getState();s(!1);const o=typeof window<"u"&&window.innerWidth<768?400:800,a=re.getState().genreSongs[n];if(!a||a.length===0)return;const i=Ze(a).slice(0,5),c=a.filter(m=>!i.some(x=>x.Id===m.Id)),f=i.map(m=>({...m,source:"user"})),d=a.length>5;e({songs:f,standardOrder:f.map(m=>m.Id),shuffleOrder:f.map(m=>m.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:d,manuallyCleared:!0}),t().play(),it&&clearTimeout(it),it=setTimeout(async()=>{it=null;try{const m=t();if(!m.shuffle||m.songs.length!==5)return;if(c.length>0){const x=Math.min(o-5,c.length),S=Ze(c).slice(0,x).map(N=>({...N,source:"user"}));e(N=>{const h=new Set(f.map(k=>k.Id)),p=N.songs.filter(k=>!h.has(k.Id)&&k.source==="user"),y=[...f,...p,...S];let w=N.currentIndex;if(p.length>0&&N.currentIndex>=f.length){const k=N.songs[N.currentIndex];k&&(w=y.findIndex(E=>E.Id===k.Id))}return{songs:y,currentIndex:w>=0?w:N.currentIndex,standardOrder:y.map(k=>k.Id),shuffleOrder:y.map(k=>k.Id),shuffleHasMoreSongs:c.length>x,manuallyCleared:!1}})}}catch(m){_.error("Failed to expand genre shuffle queue:",m)}},100)},skipToTrack:n=>{t().cancelPreBuffer();const{songs:r,currentIndex:s}=t();if(n<0||n>=r.length)return;const l=s>=0?r[s]:null;e({previousIndex:s>=0?s:-1,currentIndex:n,lastPlayedTrack:l,currentTime:0}),t().play()},refreshCurrentTrack:async()=>{const{currentIndex:n,songs:r}=t();if(n<0||n>=r.length)return;const s=r[n];try{const l=await $.getSongById(s.Id);l&&e(o=>{const a=[...o.songs];return a[o.currentIndex]={...a[o.currentIndex],...l},{songs:a}})}catch(l){_.error("Failed to refresh current track:",l)}},toggleQueueSidebar:()=>{e(n=>({isQueueSidebarOpen:!n.isQueueSidebarOpen}))}}),{name:"player-storage",partialize:e=>({songs:e.songs,currentIndex:e.currentIndex,previousIndex:e.previousIndex,standardOrder:e.standardOrder,shuffleOrder:e.shuffleOrder,volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,isShuffleAllActive:e.isShuffleAllActive,isShuffleGenreActive:e.isShuffleGenreActive,manuallyCleared:e.manuallyCleared,isQueueSidebarOpen:e.isQueueSidebarOpen}),onRehydrateStorage:e=>{e&&(e.songs.length===0?(e.currentIndex=-1,e.previousIndex=-1,e.standardOrder=[],e.shuffleOrder=[]):e.currentIndex>=e.songs.length?(e.currentIndex=0,e.previousIndex=-1):e.currentIndex<-1&&(e.currentIndex=-1,e.previousIndex=-1),e.isPlaying=!1,e.currentTime=0,e.duration=0,e.audioElement=null,e.nextAudioElement=null,e.nextTrackId=null,e.isFetchingRecommendations=!1,e.isShuffleAllActive=!1,e.isShuffleGenreActive=!1)}}));class S1{constructor(){Et(this,"baseUrl","");Et(this,"accessToken","");Et(this,"userId","");Et(this,"genresCache",null);Et(this,"isPreloading",!1);Et(this,"pendingRequests",new Map)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getDeviceId(){let t=Ls.get("deviceId");return t||(t=a1(),Ls.set("deviceId",t)),t}getEmbyAuthHeader(){return`MediaBrowser Client="${Fm}", Device="${m1}", DeviceId="${this.getDeviceId()}", Version="${Bm}"`}getVpnWarning(t){return f1.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:""}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()}}async request(t,n={}){const r=`${this.baseUrl}${t}`,l=(n.method||"GET")==="GET",o=l?r:"";if(l&&this.pendingRequests.has(o))return this.pendingRequests.get(o);const a=this.executeRequest(r,n);return l&&(this.pendingRequests.set(o,a),a.finally(()=>{this.pendingRequests.delete(o)})),a}async executeRequest(t,n={}){let r=null;for(let s=0;s<=ul;s++){const l=new AbortController,o=setTimeout(()=>l.abort(),Gc);try{const a=await fetch(t,{...n,signal:l.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(o),!a.ok)throw a.status===401?(si(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${a.statusText}`);return a.json()}catch(a){if(clearTimeout(o),r=a instanceof Error?a:new Error(String(a)),r.message.includes("Unauthorized")||r.name==="AbortError")break;s<ul&&await new Promise(i=>setTimeout(i,Hc*(s+1)))}}throw r||new Error("Request failed")}async requestVoid(t,n={}){const r=`${this.baseUrl}${t}`;let s=null;for(let l=0;l<=ul;l++){const o=new AbortController,a=setTimeout(()=>o.abort(),Gc);try{const i=await fetch(r,{...n,signal:o.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(a),!i.ok)throw i.status===401?(si(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${i.statusText}`);return}catch(i){if(clearTimeout(a),s=i instanceof Error?i:new Error(String(i)),s.message.includes("Unauthorized")||s.name==="AbortError")break;l<ul&&await new Promise(c=>setTimeout(c,Hc*(l+1)))}}throw s||new Error("Request failed")}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",l=new AbortController,o=setTimeout(()=>{l.abort()},Vc);let a;try{a=await fetch(s,{method:"POST",signal:l.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(o)}catch(c){if(clearTimeout(o),c instanceof Error&&c.name==="AbortError"){const f=this.getVpnWarning(t);throw new Error(`Request timeout - server did not respond within ${Vc/1e3} seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${f}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(c instanceof TypeError){const f=c.message.toLowerCase();if(f.includes("failed to fetch")||f.includes("networkerror")){const d=this.getVpnWarning(t);throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${d}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${c.message}`)}throw c}if(!a.ok){const c=await a.text().catch(()=>"");throw new Error(c||`Authentication failed (${a.status})`)}const i=await a.json();return this.setCredentials(t,i.AccessToken,i.User.Id),i}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,a=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&a.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${a.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&(Array.isArray(t.sortOrder)?t.sortOrder.forEach(s=>r.append("SortOrder",s)):r.append("SortOrder",t.sortOrder)),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.genres&&t.genres.forEach(s=>r.append("Genres",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.tags&&t.tags.forEach(s=>r.append("Tags",s)),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Tags,ProductionYear,DateCreated,DateModified,DateLastSaved,AlbumArtist,ArtistItems,Album,AlbumId,ChildCount"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return _.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return _.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Grouping,MediaSources"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return _.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=re.getState();if(!t&&n.genres.length>0&&n.genresLastUpdated){const r=Date.now(),s=n.genresLastChecked||0;if(!(r-s>=Qc))return this.genresCache=n.genres,n.genres;try{const o=await this.getRecentlyAdded(50),a=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),i=[...o.Items||[],...a.Items||[]];let c=0;for(const f of i){if(f.DateCreated){const d=new Date(f.DateCreated).getTime();d>c&&(c=d)}if(f.DateLastSaved){const d=new Date(f.DateLastSaved).getTime();d>c&&(c=d)}}if(re.setState({genresLastChecked:r}),c<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch{return this.genresCache=n.genres,n.genres}}try{const r=await this.fetchAllSongsLightweight(),s=this.buildGenresFromSongs(r),l=Date.now();return re.getState().setGenres(s),re.setState({genresLastUpdated:l,genresLastChecked:l}),this.genresCache=s,s}catch(r){return _.error("[getGenres] Failed to build music genres:",r),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=re.getState();if(!t&&n.years.length>0&&n.yearsLastUpdated){const r=Date.now(),s=n.yearsLastChecked||0;if(!(r-s>=Qc))return n.years;try{const a=(await this.getRecentlyAdded(50)).Items||[];let i=0;for(const c of a)if(c.DateCreated){const f=new Date(c.DateCreated).getTime();f>i&&(i=f)}if(re.setState({yearsLastChecked:r}),i<=n.yearsLastUpdated)return n.years}catch{return n.years}}try{const r=new Set;let s=0,l=!0;for(;l;){const c=(await this.getSongs({limit:Ct,startIndex:s})).Items||[];if(c.forEach(f=>{f.ProductionYear&&f.ProductionYear>0&&r.add(f.ProductionYear)}),l=c.length===Ct,s+=Ct,s>1e4)break}const o=Array.from(r).sort((i,c)=>i-c),a=Date.now();return re.getState().setYears(o),re.setState({yearsLastUpdated:a,yearsLastChecked:a}),o}catch(r){return _.error("[getYears] Failed to extract years:",r),n.years.length>0?n.years:[]}}async getGenreSongs(t,n){return(await this.fetchAllSongsLightweight()).filter(s=>{var l;return(l=s.Genres)==null?void 0:l.some(o=>o.toLowerCase()===n.toLowerCase())})}async getSongsByGroupingTag(t){const n=await this.fetchAllSongsLightweight(),r=t.toLowerCase();return n.filter(s=>{var l;return(l=s.Grouping)==null?void 0:l.some(o=>o.toLowerCase()===r)})}async fetchAllSongsLightweight(t){let n=[],r=0,s=!0,l=null;for(;s;){const a=await this.getSongs({limit:Ct,startIndex:r},!0),i=a.Items||[];if(n.push(...i),l===null&&a.TotalRecordCount&&(l=a.TotalRecordCount),t&&l&&l>0){const c=Math.min(Math.round(n.length/l*100),99);t(c)}if(s=i.length===Ct,r+=Ct,r>qc)break}t&&t(100);const o=a=>!a||!Array.isArray(a)?[]:a.filter(i=>i.startsWith("grouping:")).map(i=>i.replace("grouping:",""));return n.map(a=>({Id:a.Id,Name:a.Name,AlbumArtist:a.AlbumArtist,ArtistItems:a.ArtistItems,Album:a.Album,AlbumId:a.AlbumId,IndexNumber:a.IndexNumber,ProductionYear:a.ProductionYear,PremiereDate:a.PremiereDate,RunTimeTicks:a.RunTimeTicks,Genres:a.Genres,Grouping:o(a.Tags)}))}async fetchAllSongsWithPaths(){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const t=[];let n=0,r=!0;for(;r;){const s=new URLSearchParams({IncludeItemTypes:"Audio",Recursive:"true",Limit:Ct.toString(),StartIndex:n.toString(),UserId:this.userId,Fields:"Path,AlbumArtist,ArtistItems,Album,AlbumId"}),o=(await this.request(`/Items?${s}`)).Items||[];if(t.push(...o),r=o.length===Ct,n+=Ct,n>qc)break}return t}buildGenresFromSongs(t){const n=new Map;t.forEach(s=>{s.Genres&&s.Genres.forEach(l=>{const o=l.toLowerCase();n.has(o)||n.set(o,l)})});const r=[];for(const[s,l]of n)r.push({Id:s.replace(/\s+/g,"-"),Name:l,Type:"Genre"});return r}distributeSongsToGenres(t,n,r){for(const s of n){if(!s.Name||!s.Id)continue;const l=t.filter(o=>{var a;return(a=o.Genres)==null?void 0:a.some(i=>i.toLowerCase()===s.Name.toLowerCase())});r.setGenreSongs(s.Id,l)}}async syncLibrary(t={scope:"incremental"},n){const r=re.getState();if(t.scope==="incremental"){const a=r.lastSyncCompleted,i=await this.getGenres(!1);let c=[];if(a){let w=0,k=!0;for(;k;){const I=(await this.getSongs({minDateLastSaved:new Date(a),limit:Ct,startIndex:w},!0)).Items||[];if(c.push(...I),k=I.length===Ct,w+=Ct,w>1e4)break}}else c=(await this.getSongs({limit:Wc,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const f=w=>!w||!Array.isArray(w)?[]:w.filter(k=>k.startsWith("grouping:")).map(k=>k.replace("grouping:","")),d=c.map(w=>({Id:w.Id,Name:w.Name,AlbumArtist:w.AlbumArtist,ArtistItems:w.ArtistItems,Album:w.Album,AlbumId:w.AlbumId,IndexNumber:w.IndexNumber,ProductionYear:w.ProductionYear,PremiereDate:w.PremiereDate,RunTimeTicks:w.RunTimeTicks,Genres:w.Genres,Grouping:f(w.Tags)})),m=r.songs,x=new Map(d.map(w=>[w.Id,w])),v=m.map(w=>x.get(w.Id)??w),S=new Set(m.map(w=>w.Id)),N=d.filter(w=>!S.has(w.Id));v.push(...N);try{r.setSongs(v)}catch(w){throw w instanceof DOMException&&w.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):w}const h=new Set;d.forEach(w=>{var k;(k=w.Genres)==null||k.forEach(E=>{i.forEach(I=>{var P;((P=I.Name)==null?void 0:P.toLowerCase())===E.toLowerCase()&&h.add(I.Id)})})});const p=new Map(d.map(w=>[w.Id,w])),y=Array.from(h).map(async w=>{const k=i.find(j=>j.Id===w);if(!(k!=null&&k.Name))return;const E=r.genreSongs[w]||[],I=E.map(j=>p.get(j.Id)??j),P=new Set(E.map(j=>j.Id)),R=N.filter(j=>{var W;return!P.has(j.Id)&&((W=j.Genres)==null?void 0:W.some(ee=>ee.toLowerCase()===k.Name.toLowerCase()))});I.push(...R),r.setGenreSongs(w,I)});await Promise.all(y);return}this.clearGenresCache(),r.clearGenreSongs();const s=await this.fetchAllSongsLightweight(n);_.log(`[syncLibrary] Fetched ${s.length} songs`);const l=this.buildGenresFromSongs(s);_.log(`[syncLibrary] Found ${l.length} genres in songs`);const o=Date.now();r.setGenres(l),re.setState({genresLastUpdated:o,genresLastChecked:o}),this.genresCache=l,r.setSongs(s),this.distributeSongsToGenres(s,l,r)}async search(t,n=20,r){var p,y;const s=t?Pl(t.trim()):"",l=s.length>0,o=s.length,a=l&&o<3,i={};(p=r==null?void 0:r.genres)!=null&&p.length&&(i.genres=r.genres),(y=r==null?void 0:r.years)!=null&&y.length&&(i.years=r.years);const c={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0,...i};l&&(c.searchTerm=s,o>=3&&(c.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const f=this.buildQueryString(c),d=await this.request(`/Items?${f}`);let m=[];const x=[],v=[],S=[],N=new Set;if(d.Items.forEach(w=>{w.Type==="MusicArtist"?m.push(w):w.Type==="MusicAlbum"?x.push(w):w.Type==="Playlist"?v.push(w):w.Type==="Audio"&&(S.push(w),N.add(w.Id))}),a)try{const w=await this.getArtists({limit:Wc}),k=s.toLowerCase();m=(w.Items||[]).filter(E=>Pl(E.Name||"").toLowerCase().includes(k))}catch(w){_.error("Failed to fetch all artists for short query:",w)}if(l&&m.length>0){const w=s.toLowerCase(),k=m.filter(E=>Pl(E.Name||"").toLowerCase().includes(w));if(k.length>0)try{const E=k.map(R=>R.Id),I=this.buildQueryString({artistIds:E,includeItemTypes:["Audio"],recursive:!0});(await this.request(`/Items?${I}`)).Items.forEach(R=>{N.has(R.Id)||(S.push(R),N.add(R.Id))})}catch(E){_.error("Failed to fetch songs for matching artists:",E)}}const h=S.map(w=>({...w,Grouping:(w.Tags||[]).filter(k=>k.startsWith("grouping:")).map(k=>k.replace("grouping:",""))}));return{Artists:{Items:m,TotalRecordCount:m.length,StartIndex:0},Albums:{Items:x,TotalRecordCount:x.length,StartIndex:0},Playlists:{Items:v,TotalRecordCount:v.length,StartIndex:0},Songs:{Items:h,TotalRecordCount:h.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"ParentIndexNumber,IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping,AlbumArtists"}),r=await this.request(`/Items?${n}`),s=[],l=[];return r.Items.forEach(o=>{o.Type==="MusicAlbum"?s.push(o):o.Type==="Audio"&&l.push(o)}),{albums:s,songs:l}}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch{}}async createPlaylist(t,n=[]){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");return this.request("/Playlists",{method:"POST",body:JSON.stringify({Name:t,Ids:n,UserId:this.userId,MediaType:"Audio"})})}async deleteItem(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}`,{method:"DELETE"})}async updatePlaylist(t,n){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid playlist ID");await this.requestVoid(`/Playlists/${t}`,{method:"POST",body:JSON.stringify({Name:n,UserId:this.userId})})}async uploadItemImage(t,n,r){if(!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}/Images/Primary`,{method:"POST",headers:{"Content-Type":r},body:n})}async deleteItemImage(t){if(!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}/Images/Primary`,{method:"DELETE"})}async addItemsToPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({ids:n.join(","),userId:this.userId});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"POST"})}async movePlaylistItem(t,n,r){if(!this.userId||!this.baseUrl||!t||!n)throw new Error("Not authenticated or invalid parameters");await this.requestVoid(`/Playlists/${t}/Items/${n}/Move/${r}`,{method:"POST"})}async removeItemsFromPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({entryIds:n.join(",")});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"DELETE"})}async getPlaylistItems(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Playlists/${t}/Items?${n}`)).Items}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const l=new URLSearchParams({UserId:this.userId}),o=`${this.baseUrl}${s}?${l}`;try{const a=await fetch(o,{headers:this.getHeaders()});if(a.ok){const i=await a.json();if(i.Lyrics&&Array.isArray(i.Lyrics)&&i.Lyrics.length>0)return i.Lyrics.map(f=>f.Text||"").join(`
`);if(typeof i=="string")return i;if(i.Text)return i.Text}else if(a.status===404){r=`404 for ${s}`;continue}else{const i=await a.text().catch(()=>"");r=`${a.status}: ${i}`;continue}}catch(a){r=a instanceof Error?a.message:String(a);continue}}return null}catch{return null}}}const $=new S1,k1=Object.freeze(Object.defineProperty({__proto__:null,jellyfinClient:$},Symbol.toStringTag,{value:"Module"})),Jc=500,Xt=new Map,rs=new Map;function Zc(){if(Xt.size>Jc){const e=Array.from(Xt.keys()).slice(0,Xt.size-Jc);for(const t of e)Xt.delete(t)}}async function Jv(e){if(Xt.has(e))return Xt.get(e)??null;if(rs.has(e))return rs.get(e);const t=(async()=>{try{const{albums:n,songs:r}=await $.getArtistItems(e),s=n[0],l=r.find(c=>c.AlbumId)||r[0],o=s||l,a=o?o.AlbumId||o.Id:null,i=a?$.getAlbumArtUrl(a,96):null;return Xt.set(e,i),Zc(),i}catch(n){return _.error("Failed to load fallback album art for artist:",e,n),Xt.set(e,null),Zc(),null}finally{rs.delete(e)}})();return rs.set(e,t),t}function Zv(e){return Xt.get(e)}function I1(){Xt.clear(),rs.clear()}function ko(){return window.__TUNETUNA_CONFIG__||{lockedServerUrl:"",lockedLocalServerUrl:""}}function Vm(){const e=ko();return!!(e.lockedServerUrl&&e.lockedServerUrl!=="__JELLYFIN_SERVER_URL__"&&e.lockedServerUrl.trim()!=="")}function N1(){return Vm()?ko().lockedServerUrl:null}function E1(){const e=ko();return!!(e.lockedLocalServerUrl&&e.lockedLocalServerUrl!=="__JELLYFIN_LOCAL_SERVER_URL__"&&e.lockedLocalServerUrl.trim()!=="")}function Io(){return E1()?ko().lockedLocalServerUrl:null}const C1=2e3;async function P1(e){const t=new AbortController,n=setTimeout(()=>t.abort(),C1);try{return await fetch(`${e.replace(/\/$/,"")}/System/Info/Public`,{signal:t.signal,mode:"no-cors"}),clearTimeout(n),!0}catch{return clearTimeout(n),!1}}async function au(e,t){return t&&await P1(t)?t:e}async function Gm(){const{useAuthStore:e}=await tt(async()=>{const{useAuthStore:i}=await Promise.resolve().then(()=>j1);return{useAuthStore:i}},void 0),{useSettingsStore:t}=await tt(async()=>{const{useSettingsStore:i}=await Promise.resolve().then(()=>h1);return{useSettingsStore:i}},void 0),{jellyfinClient:n}=await tt(async()=>{const{jellyfinClient:i}=await Promise.resolve().then(()=>k1);return{jellyfinClient:i}},void 0),{serverUrl:r,accessToken:s,userId:l}=e.getState();if(!r||!s||!l)return;const o=Io()||t.getState().localServerUrl;if(!o)return;const a=await au(r,o);a.replace(/\/$/,"")!==n.serverBaseUrl&&n.setCredentials(a,s,l)}const we=lr()(Gs(e=>({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await $.authenticate(t,n,r);e({serverUrl:t,serverId:s.ServerId??"",username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),$.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{si(),I1(),localStorage.removeItem("player-storage"),localStorage.removeItem("settings-storage"),indexedDB.deleteDatabase("tunetuna-storage"),indexedDB.deleteDatabase("tunetuna-stats-storage"),e({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),localStorage.removeItem("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),$.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{if(e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId){$.setCredentials(e.serverUrl,e.accessToken,e.userId);const t=Io()||Qe.getState().localServerUrl;t&&au(e.serverUrl,t).then(n=>{n!==e.serverUrl&&$.setCredentials(n,e.accessToken,e.userId)})}}})),j1=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:we},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),ed=e=>{const t=T1(e);return t.charAt(0).toUpperCase()+t.slice(1)},Hm=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),A1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:o,...a},i)=>g.createElement("svg",{ref:i,...R1,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Hm("lucide",s),...!l&&!A1(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,f])=>g.createElement(c,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(e,t)=>{const n=g.forwardRef(({className:r,...s},l)=>g.createElement(_1,{ref:l,iconNode:t,className:Hm(`lucide-${b1(ed(e))}`,`lucide-${e}`,r),...s}));return n.displayName=ed(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],L1=Z("chart-column",M1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$1=Z("check",z1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],D1=Z("chevron-down",U1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qm=Z("circle-alert",O1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],iu=Z("disc",F1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],la=Z("external-link",B1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],G1=Z("eye-off",V1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q1=Z("eye",H1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],q1=Z("file-text",W1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],K1=Z("grip-horizontal",Y1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],jl=Z("guitar",X1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Z1=Z("house",J1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ty=Z("info",ey);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],dl=Z("list-end",ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Wm=Z("list-music",ry);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],td=Z("list-plus",sy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],fl=Z("list-start",ly);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],li=Z("list-video",oy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],iy=Z("loader-circle",ay);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],cy=Z("mic-vocal",uy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],uu=Z("music",dy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],zs=Z("pause",fy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],hy=Z("pencil",my);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ln=Z("play",py);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yy=Z("plus",gy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ss=Z("refresh-cw",vy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],cu=Z("repeat-1",xy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],du=Z("repeat",wy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ky=Z("shield-alert",Sy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],jr=Z("shuffle",Iy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],fu=Z("skip-back",Ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],mu=Z("skip-forward",Ey);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],Py=Z("square-play",Cy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],by=Z("trash-2",jy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ay=Z("triangle-alert",Ty);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],nd=Z("upload",Ry);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],no=Z("user",_y);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],Ly=Z("volume-1",My);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],$y=Z("volume-2",zy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],Dy=Z("volume",Uy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nr=Z("x",Oy),rd="last-server-url",Fy=/^http:\/\/(localhost|127\.0\.0\.1|10\.\d+\.\d+\.\d+|172\.(1[6-9]|2\d|3[01])\.\d+\.\d+|192\.168\.\d+\.\d+)(:\d+)?/i;function By(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[s,l]=g.useState(""),[o,a]=g.useState(!1),[i,c]=g.useState(""),[f,d]=g.useState(!1),m=we(h=>h.login),x=g.useMemo(()=>e.trim().toLowerCase().startsWith("http://")?!Fy.test(e.trim()):!1,[e]),v=Vm(),S=N1();g.useEffect(()=>{if(v&&S)t(S);else{const h=Ls.get(rd);h&&t(h)}},[v,S]);const N=async h=>{h.preventDefault(),c(""),d(!0);const p=v&&S?S:e;!v&&p.trim()&&Ls.set(rd,p.trim());try{await m(p,n,s)}catch(y){c(y instanceof Error?y.message:"Login failed. Please check your credentials.")}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),u.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),u.jsxs("form",{onSubmit:N,className:"space-y-4",children:[!v&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),u.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:h=>t(h.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),x&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-amber-400 text-sm",children:[u.jsx(ky,{size:16,className:"mt-0.5 flex-shrink-0"}),u.jsx("span",{children:"Insecure connection. Your password will be sent unencrypted. Use HTTPS or a local network address."})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),u.jsx("input",{id:"username",type:"text",value:n,onChange:h=>r(h.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{id:"password",type:o?"text":"password",value:s,onChange:h=>l(h.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 pr-12 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:()=>a(!o),"aria-label":o?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:o?u.jsx(G1,{size:20}):u.jsx(Q1,{size:20})})]})]}),i&&u.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),u.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:f?"Signing in...":"Sign In"})]})]})})}const He=lr((e,t)=>({state:"idle",source:null,message:null,abortController:null,progress:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null,progress:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null,progress:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null,progress:null})},setProgress:n=>{e({progress:n})}}));function ln({variant:e="horizontal",onClose:t,onOpenPopover:n,popoverPosition:r,popoverDirection:s="up",className:l,onRef:o}){const{volume:a,setVolume:i}=te(),[c,f]=g.useState(!1),[d,m]=g.useState(1),x=g.useRef(null),v=M=>{o&&e==="compact"&&o(M)},S=M=>{o&&e==="horizontal"&&o(M)};g.useEffect(()=>{const M=localStorage.getItem("lastNonZeroVolume");M?m(Math.max(.01,Math.min(1,parseFloat(M)))):a>0&&m(a)},[]),g.useEffect(()=>{a>0&&(m(a),localStorage.setItem("lastNonZeroVolume",a.toString()))},[a]);const N=()=>a===0?Dy:a<=.5?Ly:$y,h=g.useCallback(M=>{if(!x.current)return;const J=x.current.getBoundingClientRect();let oe,ae;if(M instanceof TouchEvent||"touches"in M?(oe=M.touches[0].clientX,ae=M.touches[0].clientY):(oe=M.clientX,ae=M.clientY),e==="horizontal"){const b=oe-J.left,L=Math.max(0,Math.min(1,b/J.width));i(L)}else{const b=J.bottom-ae,L=Math.max(0,Math.min(1,b/J.height));i(L)}},[i,e]),p=M=>{M.preventDefault(),M.stopPropagation(),f(!0),h(M)},y=M=>{M.stopPropagation(),p(M)},w=M=>{M.stopPropagation(),I(M)},k=g.useCallback(M=>{c&&(M.preventDefault(),M.stopPropagation(),h(M))},[c,h]),E=g.useCallback(()=>{f(!1)},[]),I=M=>{M.preventDefault(),M.stopPropagation(),f(!0),h(M)},P=g.useCallback(M=>{c&&(M.preventDefault(),M.stopPropagation(),h(M))},[c,h]),R=g.useCallback(()=>{f(!1)},[]),j=M=>{M.stopPropagation(),te.getState().volume>0?i(0):i(d)},W=M=>{M.stopPropagation()};g.useEffect(()=>{if(c)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",E),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",R),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",R)}},[c,k,E,P,R]);const ee=N();if(e==="compact")return u.jsx("button",{ref:v,onClick:M=>{M.stopPropagation(),n&&n()},"aria-label":"Volume",className:l||"text-white/70 hover:text-zinc-300 transition-colors",children:u.jsx(ee,{className:"w-6 h-6"})});if(e==="horizontal")return u.jsxs("div",{ref:S,className:"flex items-center gap-2 px-2 select-none",style:{width:"120px"},onClick:W,children:[u.jsx("button",{onClick:j,"aria-label":a===0?"Unmute":"Mute",className:"text-white/70 hover:text-white hover:bg-zinc-800 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 transition-colors",children:u.jsx(ee,{className:"w-5 h-5"})}),u.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),className:"flex-1 relative cursor-pointer",style:{height:"24px"},onMouseDown:y,onTouchStart:w,children:u.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 h-1 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gray-400 rounded-full transition-all duration-100",style:{width:`${a*100}%`}})})})]});const X=r?{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,transform:s==="down"?"translate(-50%, 8px)":"translate(-50%, calc(-100% - 8px))"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return u.jsxs("div",{className:"fixed inset-0 z-50",children:[u.jsx("div",{className:"fixed inset-0",onClick:t,onTouchStart:M=>M.preventDefault(),onTouchMove:M=>M.preventDefault()}),u.jsx("div",{className:"relative z-10 bg-zinc-900 rounded-lg py-4 px-0 shadow-xl border border-zinc-700",style:X,children:u.jsxs("div",{className:"h-[200px] w-[38px] cursor-pointer group relative touch-none mx-auto",children:[u.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),onMouseDown:p,onTouchStart:I,className:"absolute inset-0"}),u.jsxs("div",{className:"h-full w-1 bg-white/10 rounded-full relative flex flex-col justify-end mx-auto",children:[u.jsx("div",{className:"w-full bg-gray-400 rounded-full transition-all",style:{height:`${a*100}%`}}),u.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",style:{bottom:`${a*100}%`,transform:"translate(-50%, 50%)"}})]})]})})]})}const Vy=[{path:"/",label:"Home",icon:Z1,key:"home"},{path:"/artists",label:"Artists",icon:no,key:"artists"},{path:"/albums",label:"Albums",icon:iu,key:"albums"},{path:"/songs",label:"Songs",icon:uu,key:"songs"},{path:"/genres",label:"Genres",icon:jl,key:"genres"},{path:"/playlists",label:"Playlists",icon:Wm,key:"playlists"},{path:"/stats",label:"Stats",icon:L1,key:"stats"}];function Gy(){const e=en(),{pageVisibility:t}=Qe(),{state:n}=He(),[r,s]=g.useState(!1),l=Vy.filter(i=>i.key==="home"?!0:t[i.key]),o=(i,c)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===c&&i.preventDefault()},a=e.pathname.startsWith("/artists/")&&e.pathname!=="/artists";return u.jsxs(u.Fragment,{children:[u.jsxs("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 lg:hidden",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:[u.jsxs("div",{className:"relative h-16",children:[u.jsx("div",{className:"max-w-[600px] mx-auto h-full",children:u.jsx("div",{className:"flex justify-around items-center h-full",children:l.map(i=>{const c=e.pathname===i.path,f=i.icon;return u.jsxs(zc,{to:i.path,onClick:d=>o(d,i.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${c?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[u.jsx(f,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.path)})})}),u.jsx("div",{className:"absolute right-4 top-3.5 hidden lg:block",children:!Ot()&&u.jsx(ln,{variant:"horizontal"})})]}),r&&!Ot()&&u.jsx(ln,{variant:"vertical",onClose:()=>s(!1)})]}),u.jsx("nav",{className:"fixed left-0 top-0 bottom-16 bg-black z-30 hidden lg:flex flex-col",style:{width:"4rem",top:n!=="idle"?"28px":"0px"},children:u.jsx("div",{className:`absolute inset-0 flex flex-col items-center justify-center ${a?"border-r border-zinc-800":""}`,children:l.map((i,c)=>{const f=e.pathname===i.path,d=i.icon;return u.jsxs(zc,{to:i.path,onClick:m=>o(m,i.path),className:`flex flex-col items-center justify-center py-5 transition-colors ${f?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"} ${c<l.length-1?"mb-0":""}`,style:{marginBottom:c<l.length-1?"0px":"0"},children:[u.jsx(d,{className:"w-6 h-6 mb-2"}),u.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:i.label})]},i.path)})})})]})}function hu(){return te(e=>{const{songs:t,currentIndex:n}=e;return n>=0&&t[n]?t[n]:null})}function pu(){return te(e=>e.lastPlayedTrack)}function $s({src:e,alt:t,className:n="",fallback:r,fallbackIcon:s,style:l,showOutline:o,rounded:a="rounded",loading:i="lazy",onError:c}){const[f,d]=g.useState(e),[m,x]=g.useState(!1),[v,S]=g.useState(!1),[N,h]=g.useState(!1);g.useEffect(()=>{d(e),x(!1),S(!1),h(!1)},[e]);const p=()=>{!m&&r?(d(r),x(!0)):c?(c(),S(!0)):h(!0)};return v?null:N?u.jsx("div",{className:"relative w-full h-full bg-zinc-800 flex items-center justify-center",children:s&&u.jsx(s,{className:"w-1/3 h-1/3 text-zinc-600"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsx("img",{src:f,alt:t,className:`block ${n}`,onError:p,loading:i,style:l}),o&&u.jsx("div",{className:`absolute inset-0 pointer-events-none border ${a}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function Us({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,l]=g.useState(!1),[o,a]=g.useState(!1);if(g.useEffect(()=>{if(e)l(!1),a(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(!0)})}),document.body.style.overflow="hidden";else{l(!1);const c=setTimeout(()=>{a(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(c),document.body.style.overflow=""}}},[e]),!o)return null;const i=u.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[u.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),u.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out md:hidden ${s?"translate-y-0":"translate-y-full"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pb-safe pt-4",children:u.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})}),u.jsx("div",{className:`hidden md:flex absolute inset-0 items-center justify-center p-4 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t,children:u.jsx("div",{className:`bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-700/50 w-full max-w-[480px] max-h-[80vh] overflow-y-auto transform transition-transform duration-300 ease-out ${s?"scale-100":"scale-95"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pt-4",children:n})})})]});return tu.createPortal(i,document.body)}const Hy="https://musicbrainz.org/ws/2",Qy=`${Fm}/${Bm} (https://github.com/AlessioLaiso/tunetuna)`,Wy="/api/coverart",qy="https://api.song.link/v1-alpha.1";let sd=0;const ld=1100;async function ex(e="gb",t=10){const n=`/api/stats/proxy/apple-music/${e}/${t}`,r=await fetch(n);if(!r.ok)throw new Error(`Apple Music RSS failed: ${r.status}`);return(await r.json()).feed.results}function tx(e,t=300){return e.replace(/\d+x\d+/,`${t}x${t}`)}async function Yy(){const t=Date.now()-sd;t<ld&&await new Promise(n=>setTimeout(n,ld-t)),sd=Date.now()}async function nx(e,t){await Yy();const n=`releasegroup:"${t}" AND artist:"${e}"`,r=new URLSearchParams({query:n,fmt:"json",limit:"1"}),s=await fetch(`${Hy}/release-group/?${r}`,{headers:{"User-Agent":Qy,Accept:"application/json"}});if(!s.ok)throw new Error(`MusicBrainz search failed: ${s.status}`);const o=(await s.json())["release-groups"]||[];return o.length===0?null:{id:o[0].id,type:o[0]["primary-type"]||"Album"}}function Ky(e,t=500){return`${Wy}/release-group/${e}/front-${t}`}async function rx(e,t){const n=new URLSearchParams({url:e});try{const r=await fetch(`${qy}/links?${n}`);if(!r.ok){if(r.status===404)return null;throw new Error(`Odesli API failed: ${r.status}`)}return await r.json()}catch{return null}}async function sx(e,t=10){if(!e)return[];const n=`/api/stats/proxy/muspy-rss?url=${encodeURIComponent(e)}`;console.log("[Muspy] Fetching from:",n);const r=await fetch(n);if(!r.ok)throw new Error(`Muspy RSS failed: ${r.status}`);const s=await r.text();console.log("[Muspy] Response length:",s.length,"First 500 chars:",s.substring(0,500));const o=new DOMParser().parseFromString(s,"text/xml"),a=o.querySelector("parsererror");a&&console.error("[Muspy] XML parse error:",a.textContent);const i=o.querySelectorAll("entry");console.log("[Muspy] Found",i.length,"entries");const c=[];return i.forEach((f,d)=>{var ee,X,M,J,oe,ae;if(d>=t)return;const m=((ee=f.querySelector("title"))==null?void 0:ee.textContent)||"",x=f.querySelector('link[rel="alternate"]')||f.querySelector("link"),v=(x==null?void 0:x.getAttribute("href"))||(x==null?void 0:x.textContent)||"",S=((X=f.querySelector("summary"))==null?void 0:X.textContent)||((M=f.querySelector("content"))==null?void 0:M.textContent)||"",N=((J=f.querySelector("updated"))==null?void 0:J.textContent)||((oe=f.querySelector("published"))==null?void 0:oe.textContent)||"";(ae=f.querySelector("id"))!=null&&ae.textContent;const h=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/i,y=f.outerHTML.match(h),w=y?y[0]:`muspy-${d}`,k=S.match(/\((Single|Album|EP)\)/i),E=k?k[1]:"Album",I=m.split(" - "),P=I.length>1?I[0].trim():S,R=I.length>1?I.slice(1).join(" - ").trim():m;let j="";if(N)try{j=new Date(N).toISOString().split("T")[0]}catch{j=N}const W=w.startsWith("muspy-")?v:`https://musicbrainz.org/release-group/${w}`;c.push({id:w,title:R,artistName:P,releaseDate:j,type:E,artworkUrl:w.startsWith("muspy-")?void 0:Ky(w,500),mbUrl:W})}),c}const Xy=[{id:"spotify",name:"Spotify",icon:"spotify"},{id:"appleMusic",name:"Apple Music",icon:"apple"},{id:"youtube",name:"YouTube",icon:"youtube"},{id:"youtubeMusic",name:"YouTube Music",icon:"youtube"},{id:"tidal",name:"Tidal",icon:"tidal"},{id:"deezer",name:"Deezer",icon:"deezer"},{id:"amazonMusic",name:"Amazon Music",icon:"amazon"},{id:"soundcloud",name:"SoundCloud",icon:"soundcloud"}];function Jy(e,t){const n=encodeURIComponent(`${e} ${t}`);return{entityUniqueId:"search",userCountry:"US",pageUrl:`https://www.google.com/search?q=${n}`,linksByPlatform:{spotify:{url:`https://open.spotify.com/search/${n}`},appleMusic:{url:`https://music.apple.com/search?term=${n}`},youtube:{url:`https://www.youtube.com/results?search_query=${n}`},youtubeMusic:{url:`https://music.youtube.com/search?q=${n}`},tidal:{url:`https://listen.tidal.com/search?q=${n}`},deezer:{url:`https://www.deezer.com/search/${n}`},amazonMusic:{url:`https://music.amazon.com/search/${n}`}}}}const ml={spotify:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})}),appleMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.802.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.296-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.045-1.773-.6-1.943-1.536a1.88 1.88 0 011.038-2.022c.323-.16.67-.25 1.018-.324.378-.082.758-.153 1.134-.24.274-.063.457-.23.51-.516a.904.904 0 00.02-.193c0-1.815 0-3.63-.002-5.443a.725.725 0 00-.026-.185c-.04-.15-.15-.243-.304-.234-.16.01-.318.035-.475.066-.76.15-1.52.303-2.28.456l-2.326.47-1.374.278c-.016.003-.032.01-.048.013-.277.077-.377.203-.39.49-.002.042 0 .086 0 .13-.002 2.602 0 5.204-.003 7.805 0 .42-.047.836-.215 1.227-.278.64-.77 1.04-1.434 1.233-.35.1-.71.16-1.075.172-.96.036-1.755-.6-1.92-1.544-.14-.812.23-1.685 1.154-2.075.357-.15.73-.232 1.108-.31.287-.06.575-.116.86-.177.383-.083.583-.323.6-.714v-.15c0-2.96 0-5.922.002-8.883 0-.123.013-.25.042-.37.07-.285.273-.448.546-.518.255-.065.515-.112.774-.165.733-.15 1.466-.296 2.2-.444l2.27-.46c.67-.134 1.34-.27 2.01-.403.22-.043.443-.088.664-.106.31-.025.523.17.554.482.008.073.012.148.012.223.002 1.91.002 3.822 0 5.732z"})}),youtube:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),youtubeMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.376 0 0 5.376 0 12s5.376 12 12 12 12-5.376 12-12S18.624 0 12 0zm0 19.104c-3.924 0-7.104-3.18-7.104-7.104S8.076 4.896 12 4.896s7.104 3.18 7.104 7.104-3.18 7.104-7.104 7.104zm0-13.332c-3.432 0-6.228 2.796-6.228 6.228S8.568 18.228 12 18.228s6.228-2.796 6.228-6.228S15.432 5.772 12 5.772zM9.684 15.54V8.46L15.816 12l-6.132 3.54z"})}),tidal:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12.012 3.992L8.008 7.996 4.004 3.992 0 7.996 4.004 12l4.004-4.004L12.012 12l4.004-4.004L20.02 12l4.004-4.004-4.004-4.004-4.004 4.004-4.004-4.004zM12.012 12.012L8.008 16.02l4.004 4.004 4.004-4.004-4.004-4.008z"})}),deezer:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M18.81 4.16v3.03H24V4.16h-5.19zM6.27 8.38v3.027h5.189V8.38h-5.19zm12.54 0v3.027H24V8.38h-5.19zM6.27 12.594v3.027h5.189v-3.027h-5.19zm6.27 0v3.027h5.19v-3.027h-5.19zm6.27 0v3.027H24v-3.027h-5.19zM0 16.81v3.029h5.19v-3.03H0zm6.27 0v3.029h5.189v-3.03h-5.19zm6.27 0v3.029h5.19v-3.03h-5.19zm6.27 0v3.029H24v-3.03h-5.19z"})}),amazonMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.118c.138-.053.209-.073.315-.073.186 0 .27.089.27.267 0 .178-.089.355-.267.533l-.178.178c-2.852 2.346-6.22 3.52-10.106 3.52-4.24 0-7.942-1.192-11.107-3.574-.168-.133-.217-.244-.217-.333 0-.089.044-.133.133-.178zm21.243-3.928c-.236-.178-.712-.267-1.424-.267-.712 0-1.598.178-2.665.533-1.067.356-2.134.89-3.201 1.602-.178.089-.267.178-.267.267s.089.133.267.133c.089 0 .178-.044.267-.089l.356-.178c1.156-.533 2.223-.8 3.2-.8.979 0 1.469.267 1.469.8 0 .356-.178.712-.534 1.068-.356.355-.89.711-1.6 1.066l-.535.267c-.356.178-.534.356-.534.534 0 .133.089.2.267.2.089 0 .178-.022.267-.067l.445-.222c1.6-.8 2.756-1.424 3.467-1.869.712-.444 1.068-.889 1.068-1.333 0-.445-.178-.712-.534-.978-.356-.267-.978-.4-1.868-.4zm-6.844-7.11c0-1.067-.267-1.957-.8-2.67-.533-.711-1.422-1.066-2.666-1.066-1.244 0-2.223.355-2.933 1.066-.712.712-1.156 1.78-1.334 3.2h7.733v-.533zm3.911 1.956H8.045c.089 1.422.445 2.489 1.067 3.2.622.712 1.511 1.067 2.666 1.067.89 0 1.69-.178 2.4-.533.712-.356 1.334-.89 1.868-1.6.178-.178.356-.267.534-.267.178 0 .267.089.267.267 0 .178-.089.356-.267.533-.622.8-1.422 1.423-2.4 1.868-.978.445-2.044.667-3.2.667-1.778 0-3.2-.533-4.267-1.6-1.067-1.066-1.6-2.577-1.6-4.533 0-1.956.533-3.467 1.6-4.533 1.067-1.067 2.489-1.6 4.267-1.6 1.778 0 3.111.445 4 1.334.89.889 1.334 2.177 1.334 3.866v1.067c0 .266-.089.4-.267.4l-.089-.003z"})}),soundcloud:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c-.009-.06-.048-.1-.098-.1m-.899.828c-.06 0-.091.037-.104.094L0 14.479l.165 1.308c.014.057.045.094.09.094s.089-.037.099-.094l.19-1.308-.19-1.334c-.01-.057-.045-.09-.09-.09m1.83-1.229c-.061 0-.12.045-.12.104l-.21 2.563.225 2.458c0 .06.045.104.106.104.061 0 .12-.044.12-.104l.24-2.458-.24-2.563c0-.06-.045-.104-.12-.104m.945-.089c-.075 0-.135.06-.15.135l-.193 2.64.21 2.544c.016.077.075.138.149.138.075 0 .135-.061.15-.138l.225-2.545-.225-2.64c-.015-.074-.06-.135-.135-.135m1.065.42c-.09 0-.149.075-.164.164l-.158 2.255.18 2.46c.015.09.074.165.164.165.089 0 .149-.075.164-.165l.209-2.46-.209-2.255c-.015-.09-.075-.164-.164-.164m.944-.54c-.104 0-.194.09-.209.195l-.149 2.81.164 2.445c.015.105.09.195.194.195.104 0 .195-.09.21-.195l.18-2.445-.18-2.81c-.015-.105-.09-.195-.194-.195m1.076-.505c-.119 0-.21.09-.225.21l-.135 3.3.149 2.4c.015.12.105.21.225.21.12 0 .21-.09.225-.21l.165-2.4-.165-3.3c-.015-.12-.105-.21-.225-.21m1.064-.54c-.135 0-.239.105-.254.24l-.12 3.825.135 2.354c.015.135.12.24.255.24.12 0 .24-.105.255-.24l.149-2.354-.149-3.825c-.015-.135-.12-.24-.255-.24m1.109-.27c-.015-.15-.135-.255-.27-.255-.15 0-.255.105-.27.255l-.12 4.08.12 2.31c.015.15.12.255.27.255.149 0 .255-.105.27-.255l.134-2.31-.134-4.08m.494 6.645c.015.165.135.284.285.284.149 0 .27-.12.284-.284l.121-2.325-.12-5.175c-.015-.165-.135-.285-.285-.285-.149 0-.27.12-.284.285l-.107 5.175.106 2.325m1.184-6.18c-.165 0-.3.135-.314.3l-.091 3.855.105 2.31c.015.165.135.3.3.3.164 0 .284-.135.299-.3l.12-2.31-.12-3.855c-.015-.165-.135-.3-.3-.3m1.199-.075c-.18 0-.314.135-.329.315l-.09 3.915.104 2.295c.015.18.135.315.315.315s.314-.135.314-.315l.12-2.295-.12-3.915c-.015-.18-.149-.315-.314-.315m1.139-.195c-.195 0-.345.149-.359.345l-.075 4.11.09 2.265c.014.195.149.345.344.345.195 0 .345-.15.359-.345l.105-2.265-.105-4.095c-.014-.195-.164-.36-.359-.36m1.305 0c-.209 0-.359.164-.374.359l-.074 4.095.089 2.25c.015.21.165.375.375.375.194 0 .359-.165.374-.375l.09-2.25-.09-4.095c-.015-.209-.165-.359-.375-.359m1.289.015c-.225 0-.39.18-.39.405l-.06 4.065.075 2.235c.016.225.166.39.391.39.225 0 .391-.165.406-.39l.09-2.235-.091-4.065c-.014-.24-.18-.405-.405-.405m1.35.09c-.24 0-.42.18-.42.42l-.045 3.975.06 2.205c.015.24.18.42.42.42.24 0 .404-.18.42-.42l.075-2.205-.075-3.975c-.015-.24-.18-.42-.42-.42m1.33.135c-.256 0-.435.194-.45.435l-.046 3.825.061 2.175c.015.255.195.45.435.45.256 0 .436-.195.45-.45l.076-2.175-.076-3.825c-.014-.255-.194-.435-.45-.435m1.453-.09c-.27 0-.48.21-.48.465l-.03 3.915.03 2.145c.015.27.21.465.48.465.27 0 .48-.195.48-.465l.045-2.145-.045-3.915c0-.255-.21-.465-.48-.465m1.444.285c-.285 0-.495.225-.51.495l-.015 3.645.03 2.13c.015.285.225.51.51.51.27 0 .494-.225.51-.51l.03-2.13-.03-3.645c-.016-.285-.225-.495-.51-.495m3.39.465c-.165-.045-.345-.075-.51-.075-.18 0-.345.015-.51.045-.044-.9-.39-1.695-.945-2.34-.556-.645-1.35-1.08-2.31-1.215-.27-.045-.405-.165-.405-.405V6.54c0-1.305-.465-2.415-1.395-3.345C19.2 2.265 18.09 1.8 16.77 1.8c-1.155 0-2.16.375-3.045 1.095-.885.72-1.44 1.635-1.68 2.745-.165-.03-.315-.045-.45-.045-1.35 0-2.355.93-2.355 2.115 0 .24.03.465.075.69-.645.12-1.17.435-1.59.945-.42.51-.63 1.095-.63 1.755 0 .75.255 1.38.765 1.89s1.14.765 1.89.765h10.53c.93 0 1.695-.285 2.31-.855.615-.57.93-1.29.93-2.145 0-.855-.3-1.575-.9-2.16-.6-.585-1.335-.885-2.205-.9"})}),jellyfin:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",role:"img","aria-label":"Jellyfin",children:u.jsx("path",{d:"M12.0001 2C9.35508 2 0.835078 17.448 2.13408 20.055C3.43308 22.662 20.5841 22.633 21.8691 20.055C23.1541 17.477 14.6481 2 12.0001 2ZM18.4691 17.793C17.6291 19.483 6.39208 19.501 5.54108 17.793C4.69008 16.085 10.2671 5.963 12.0001 5.963C13.7331 5.963 19.3111 16.1 18.4691 17.793ZM12.0001 9.664C11.1221 9.664 8.30008 14.789 8.72508 15.655C9.15008 16.521 14.8491 16.511 15.2751 15.655C15.7011 14.799 12.8801 9.664 12.0001 9.664Z"})})};function Zy(){return u.jsx("div",{className:"animate-pulse space-y-0",children:[...Array(4)].map((e,t)=>u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-24"})]},t))})}function od({isOpen:e,onClose:t,odesliData:n,loading:r=!1,title:s,mode:l="mobile",position:o,zIndex:a=99999,jellyfinItemId:i=null}){const c=we(y=>y.serverUrl),f=we(y=>y.serverId);if(!e)return null;const d=(c==null?void 0:c.replace(/\/$/,""))??"",m=!!(i&&d),x=n?Xy.filter(y=>n.linksByPlatform[y.id]):[],v=async y=>{if(y==="jellyfin"&&i&&d){let k=f;if(!k)try{const E=await fetch(`${d}/System/Info/Public`);E.ok&&(k=(await E.json()).Id??"")}catch{}k&&window.open(`${d}/web/#/details?id=${i}&serverId=${k}`,"_blank","noopener,noreferrer"),t();return}if(!n)return;const w=n.linksByPlatform[y];w!=null&&w.url&&window.open(w.url,"_blank","noopener,noreferrer"),t()},N=(()=>{if(s)return s;if(!(n!=null&&n.entitiesByUniqueId))return"Loading...";const y=Object.values(n.entitiesByUniqueId);for(const w of y)if(w.title)return w.title;return"Loading..."})(),h=m,p=r||!h&&(!n||x.length===0);if(l==="desktop"){const w=p?4:(h?1:0)+x.length,k=Math.min(400,w*44+48);let E=(o==null?void 0:o.x)||100,I=(o==null?void 0:o.y)||100;return E+220>window.innerWidth&&(E=window.innerWidth-220-10),I+k>window.innerHeight&&(I=window.innerHeight-k-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0",onClick:t,style:{zIndex:a-1}}),u.jsxs("div",{className:"fixed bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-2 min-w-[200px]",style:{left:E,top:I,zIndex:a},onClick:P=>P.stopPropagation(),children:[u.jsx("div",{className:"px-4 pb-2 mb-1 border-b border-zinc-700",children:u.jsx("div",{className:"text-sm font-medium text-white truncate",children:N})}),p?u.jsx(Zy,{}):u.jsxs("div",{className:"space-y-0",children:[h&&u.jsxs("button",{onClick:()=>v("jellyfin"),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:ml.jellyfin}),u.jsx("span",{className:"flex-1 text-sm text-white",children:"Jellyfin"})]}),x.map(P=>u.jsxs("button",{onClick:()=>v(P.id),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:ml[P.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-sm text-white",children:P.name})]},P.id))]})]})]})}return u.jsx(Us,{isOpen:e,onClose:t,zIndex:a,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:N})}),p?u.jsx("div",{className:"animate-pulse space-y-1",children:[...Array(4)].map((y,w)=>u.jsxs("div",{className:"flex items-center gap-4 pl-4 pr-4 py-3",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-28"})]},w))}):u.jsxs("div",{className:"space-y-1",children:[h&&u.jsxs("button",{onClick:()=>v("jellyfin"),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:ml.jellyfin}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:"Jellyfin"})]}),x.map(y=>u.jsxs("button",{onClick:()=>v(y.id),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:ml[y.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:y.name})]},y.id))]})]})})}function ev({isOpen:e,onClose:t,itemIds:n,zIndex:r}){const[s,l]=g.useState([]),[o,a]=g.useState(!1),[i,c]=g.useState(!1),[f,d]=g.useState(""),[m,x]=g.useState(null);g.useEffect(()=>{e&&(c(!1),d(""),x(null),v())},[e]);const v=async()=>{a(!0);try{const h=await $.getPlaylists({sortBy:["SortName"],sortOrder:"Ascending",limit:100});l(h.Items)}catch{De.getState().addToast("Failed to load playlists","error",3e3)}finally{a(!1)}},S=async h=>{x(h.Id);try{await $.addItemsToPlaylist(h.Id,n),De.getState().addToast(`Added to ${h.Name}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{De.getState().addToast("Failed to add to playlist","error",3e3)}finally{x(null)}},N=async()=>{const h=f.trim();if(h){x("create");try{await $.createPlaylist(h,n);const p=n.length===1?"1 song":`${n.length} songs`;De.getState().addToast(`Created "${h}" with ${p}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{De.getState().addToast("Failed to create playlist","error",3e3)}finally{x(null)}}};return u.jsx(Us,{isOpen:e,onClose:t,zIndex:r,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:"Add to Playlist"})}),u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>c(!i),disabled:m!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm bg-zinc-800 flex items-center justify-center flex-shrink-0",children:u.jsx(yy,{className:"w-5 h-5 text-white"})}),u.jsx("span",{className:"text-sm text-white font-medium",children:"Create New Playlist"})]}),i&&u.jsxs("div",{className:"px-4 pb-2 flex gap-2",children:[u.jsx("input",{type:"text",value:f,onChange:h=>d(h.target.value),onKeyDown:h=>{h.key==="Enter"&&N()},className:"flex-1 bg-zinc-800 text-white rounded-lg px-4 py-2.5 outline-none focus:ring-2 focus:ring-[var(--accent-color)] text-sm",placeholder:"Playlist name",autoFocus:!0,disabled:m==="create"}),u.jsx("button",{onClick:N,disabled:m==="create"||!f.trim(),className:"px-4 py-2.5 bg-[var(--accent-color)] text-white font-semibold rounded-lg transition-colors disabled:opacity-50 text-sm flex-shrink-0",children:m==="create"?u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Create"})]})]}),o?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[s.map(h=>u.jsxs("button",{onClick:()=>S(h),disabled:m!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-800",children:u.jsx($s,{src:$.getAlbumArtUrl(h.Id,80),alt:h.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",fallbackIcon:Wm})}),u.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:h.Name}),h.ChildCount!==void 0&&u.jsxs("div",{className:"text-xs text-gray-400",children:[h.ChildCount," tracks"]})]}),m===h.Id&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},h.Id)),s.length===0&&!o&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[u.jsx(uu,{className:"w-8 h-8 mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No playlists yet"})]})]})]})})}function ad({label:e,accept:t="image/*",value:n,onChange:r,previewUrl:s}){var k;const[l,o]=g.useState(!1),[a,i]=g.useState(!1),c=g.useRef(null),f=g.useRef(0),d=g.useCallback(E=>{E.preventDefault(),E.stopPropagation(),f.current++,o(!0)},[]),m=g.useCallback(E=>{E.preventDefault(),E.stopPropagation(),f.current--,f.current===0&&o(!1)},[]),x=g.useCallback(E=>{E.preventDefault(),E.stopPropagation()},[]),v=g.useCallback((E,I)=>I.split(",").some(P=>{const R=P.trim();return R.endsWith("/*")?E.type.startsWith(R.replace("/*","/")):R.startsWith(".")?E.name.toLowerCase().endsWith(R.toLowerCase()):E.type===R}),[]),S=g.useCallback(E=>{var P;E.preventDefault(),E.stopPropagation(),f.current=0,o(!1);const I=(P=E.dataTransfer.files)==null?void 0:P[0];I&&v(I,t)&&(i(!1),r(I))},[r,t,v]),N=()=>{var E;(E=c.current)==null||E.click()},h=E=>{var P;const I=(P=E.target.files)==null?void 0:P[0];I&&(i(!1),r(I)),E.target.value=""},p=E=>{E.stopPropagation(),i(!0),r(null)},y=((k=n==null?void 0:n.type)==null?void 0:k.startsWith("image/"))??!1,w=n&&y?URL.createObjectURL(n):a?null:s;return u.jsxs("div",{onClick:N,onDragEnter:d,onDragLeave:m,onDragOver:x,onDrop:S,className:`relative cursor-pointer rounded-lg border-2 border-dashed transition-colors ${l?"border-[var(--accent-color)] bg-[var(--accent-color)]/10":w||n&&!y?"border-zinc-700 bg-zinc-800/50":"border-zinc-700 bg-zinc-800/50 hover:border-zinc-500"}`,children:[u.jsx("input",{ref:c,type:"file",accept:t,onChange:h,className:"hidden"}),w?u.jsxs("div",{className:"relative aspect-square w-full overflow-hidden rounded-md",children:[u.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("button",{onClick:p,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(nr,{className:"w-4 h-4 text-white"})})]}):n?u.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(nd,{className:"w-6 h-6 text-[var(--accent-color)]"}),u.jsx("span",{className:"text-sm text-white text-center truncate max-w-full px-2",children:n.name}),u.jsx("button",{onClick:p,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(nr,{className:"w-4 h-4 text-white"})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(nd,{className:"w-6 h-6 text-gray-400"}),u.jsx("span",{className:"text-sm text-gray-400 text-center",children:e})]})]})}function tv(e){const n=e.replace(/^\uFEFF/,"").split(/\r\n|\r|\n/),r=[];_.log(`M3U parser: ${n.length} lines in file`);let s,l,o;for(const a of n){const i=a.trim();if(!i||i==="#EXTM3U")continue;if(i.startsWith("#EXTINF:")){const m=i.substring(8),x=m.indexOf(",");if(x!==-1){o=parseInt(m.substring(0,x),10)||void 0;const v=m.substring(x+1).trim(),S=v.lastIndexOf(" - ");S!==-1?(l=v.substring(0,S).trim(),s=v.substring(S+3).trim()):(l=v,s=void 0)}continue}if(i.startsWith("#"))continue;const c=i,f=c.replace(/\\/g,"/").split("/"),d=f[f.length-1];d&&r.push({filePath:c,fileName:d,artistName:s,songTitle:l,durationSecs:o}),s=void 0,l=void 0,o=void 0}return _.log(`M3U parser: ${r.length} entries parsed`),r.length>0&&_.log(`M3U parser: first entry filename="${r[0].fileName}", path="${r[0].filePath}"`),r}function zt(e){return e.normalize("NFC").toLowerCase()}function nv(e){const t=new Map;for(const n of e){if(!n.Path)continue;const r=n.Path.replace(/\\/g,"/").split("/"),s=zt(r[r.length-1]??"");if(!s)continue;const l=t.get(s);l?l.push(n):t.set(s,[n])}return t}function rv(e,t){const n=t.get(zt(e.fileName));if(!n||n.length===0)return null;if(n.length===1)return n[0];const r=e.filePath.replace(/\\/g,"/").split("/"),s=r.length>=2?zt(r[r.length-2]):"",l=r.length>=3?zt(r[r.length-3]):"";let o=n.filter(a=>{const i=(a.Path||"").replace(/\\/g,"/").split("/");return(i.length>=2?zt(i[i.length-2]):"")===s});if(o.length===1)return o[0];if(o.length>1){const a=o.filter(i=>{const c=(i.Path||"").replace(/\\/g,"/").split("/");return(c.length>=3?zt(c[c.length-3]):"")===l});if(a.length>=1)return a[0]}if(e.songTitle||e.artistName){const a=zt(e.songTitle||""),i=zt(e.artistName||""),f=(o.length>0?o:n).filter(d=>{const m=!a||zt(d.Name||"").includes(a),x=!i||[zt(d.AlbumArtist||""),...(d.ArtistItems||[]).map(v=>zt(v.Name||""))].some(v=>v.includes(i));return m&&x});if(f.length>=1)return f[0]}return n[0]}function sv(e,t,n){const r=nv(t);_.log(`M3U matcher: ${t.length} library songs, ${r.size} unique filenames, ${n.size} existing playlist items`);const s=[],l=[],o=[];for(const a of e){const i=rv(a,r);i?n.has(i.Id)?o.push({entry:a,matchedSong:i,status:"skipped_duplicate"}):s.push({entry:a,matchedSong:i,status:"matched"}):l.push({entry:a,matchedSong:null,status:"not_found"})}return{matched:s,notFound:l,skippedDuplicates:o,totalEntries:e.length}}function lv({result:e}){const[t,n]=g.useState(!1),r=e.notFound.length+e.skippedDuplicates.length,s=[...e.notFound,...e.skippedDuplicates].map(l=>l.entry.songTitle?`${l.entry.songTitle} - ${l.entry.artistName||"Unknown"}`:l.entry.fileName);return e.matched.length===0&&r===0?u.jsx("span",{className:"text-sm text-gray-400 text-center",children:"No songs matched"}):u.jsxs("span",{className:"text-sm text-white text-center",children:[e.matched.length>0&&u.jsxs(u.Fragment,{children:[e.matched.length," ",e.matched.length===1?"song":"songs"," matched"]}),e.matched.length>0&&r>0&&". ",r>0&&u.jsxs("span",{className:"relative text-zinc-400 cursor-help",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:l=>{l.stopPropagation(),n(o=>!o)},children:[e.matched.length===0&&"No songs matched. ",r," skipped",t&&u.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 max-h-48 overflow-y-auto bg-zinc-900 border border-zinc-700 rounded-lg p-2 text-xs text-zinc-300 text-left shadow-lg z-50",children:s.map((l,o)=>u.jsx("span",{className:"block truncate py-0.5",children:l},o))})]})]})}function ov({isOpen:e,onClose:t,editPlaylistId:n,initialName:r="",hasExistingImage:s=!1,onCreated:l,onSaved:o,imageCacheBust:a=0}){const i=!!n,[c,f]=g.useState(r),[d,m]=g.useState(null),[x,v]=g.useState(!1),[S,N]=g.useState(null),[h,p]=g.useState(!1),[y,w]=g.useState(null),[k,E]=g.useState(!1);g.useEffect(()=>{e&&(f(r),m(null),v(!1),N(null),w(null),p(!1),E(!1))},[e,n]);const I=()=>{t()},P=g.useRef(!1),R=async X=>{if(P.current=!0,N(X),w(null),!X){p(!1);return}if(!c.trim()){const M=X.name.replace(/\.(m3u8?|M3U8?)$/,"");f(M)}P.current=!1,p(!0);try{const M=await X.text(),J=tv(M);if(P.current)return;if(J.length===0){De.getState().addToast("No songs found in M3U file","error",3e3),N(null),p(!1);return}const oe=await $.fetchAllSongsWithPaths();if(P.current)return;let ae=new Set;if(n){const L=await $.getPlaylistItems(n);if(P.current)return;ae=new Set(L.map(F=>F.Id))}const b=sv(J,oe,ae);if(P.current)return;w(b)}catch(M){if(P.current)return;_.error("M3U import failed:",M),De.getState().addToast("Import failed","error",3e3),N(null),w(null)}finally{P.current||p(!1)}},j=()=>{P.current=!0,N(null),w(null),p(!1)},W=async()=>{const X=c.trim();if(X){E(!0);try{if(i){if(await $.updatePlaylist(n,X),d){const M=new FileReader,J=await new Promise((oe,ae)=>{M.onload=()=>{const b=M.result;oe(b.split(",")[1])},M.onerror=ae,M.readAsDataURL(d)});await $.uploadItemImage(n,J,d.type)}else x&&await $.deleteItemImage(n);if(y&&y.matched.length>0){const M=y.matched.map(J=>J.matchedSong.Id);await $.addItemsToPlaylist(n,M)}De.getState().addToast("Playlist updated","success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),I(),o==null||o()}else{const M=await $.createPlaylist(X);if(d)try{const J=new FileReader,oe=await new Promise((ae,b)=>{J.onload=()=>{const L=J.result;ae(L.split(",")[1])},J.onerror=b,J.readAsDataURL(d)});await $.uploadItemImage(M.Id,oe,d.type)}catch{_.error("Failed to upload playlist image")}if(y&&y.matched.length>0)try{const J=y.matched.map(ae=>ae.matchedSong.Id);await $.addItemsToPlaylist(M.Id,J);const oe=[`${y.matched.length} added`];y.notFound.length>0&&oe.push(`${y.notFound.length} not found`),De.getState().addToast(`Playlist created. ${oe.join(", ")}`,y.notFound.length>0?"info":"success",4e3)}catch{_.error("M3U import failed during playlist creation"),De.getState().addToast("Playlist created, but M3U import failed","info",3e3)}else De.getState().addToast("Playlist created","success",2e3);window.dispatchEvent(new CustomEvent("playlistUpdated")),I(),l==null||l(M.Id)}}catch{De.getState().addToast(i?"Failed to update playlist":"Failed to create playlist","error",3e3)}finally{E(!1)}}},ee=i&&s&&!x&&n?$.getImageUrl(n,"Primary",256)+(a?`&cb=${a}`:""):null;return u.jsx(Us,{isOpen:e,onClose:I,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:i?"Edit Playlist":"Create Playlist"})}),u.jsxs("div",{className:"px-4 space-y-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Playlist Name"}),u.jsx("input",{type:"text",value:c,onChange:X=>f(X.target.value),onKeyDown:X=>{X.key==="Enter"&&W()},className:"w-full bg-zinc-800 text-white rounded-lg px-3 py-2 border border-zinc-700 focus:outline-none focus:border-[var(--accent-color)] placeholder:text-zinc-500",placeholder:"Playlist name",autoFocus:!0,disabled:k})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Image (Optional)"}),u.jsx("div",{className:"w-32",children:u.jsx(ad,{label:"Drop or click",accept:"image/*",value:d,onChange:X=>{m(X),X?v(!1):s&&v(!0)},previewUrl:ee})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Add from M3U (Optional)"}),h?u.jsxs("div",{className:"relative rounded-lg border-2 border-dashed border-zinc-700 bg-zinc-800/50",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(iy,{className:"w-6 h-6 text-[var(--accent-color)] animate-spin"}),u.jsx("span",{className:"text-sm text-gray-400 text-center",children:"Matching songs..."})]}),u.jsx("button",{onClick:j,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(nr,{className:"w-4 h-4 text-white"})})]}):y?u.jsxs("div",{className:"relative rounded-lg border-2 border-dashed border-zinc-700 bg-zinc-800/50",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(q1,{className:"w-6 h-6 text-[var(--accent-color)]"}),u.jsx(lv,{result:y})]}),u.jsx("button",{onClick:j,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(nr,{className:"w-4 h-4 text-white"})})]}):u.jsx(ad,{label:"Drop .m3u file or click",accept:".m3u,.m3u8",value:S,onChange:R})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:I,className:"flex-1 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:W,disabled:k||h||!c.trim(),className:"flex-1 py-3 bg-[var(--accent-color)] text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:k||h?i?"Saving...":"Creating...":i?"Save":"Create"})]})]})]})})}const av=({className:e})=>u.jsx("svg",{viewBox:"0 0 24 24",className:e,fill:"currentColor",role:"img","aria-label":"Jellyfin",children:u.jsx("path",{d:"M12.0001 2C9.35508 2 0.835078 17.448 2.13408 20.055C3.43308 22.662 20.5841 22.633 21.8691 20.055C23.1541 17.477 14.6481 2 12.0001 2ZM18.4691 17.793C17.6291 19.483 6.39208 19.501 5.54108 17.793C4.69008 16.085 10.2671 5.963 12.0001 5.963C13.7331 5.963 19.3111 16.1 18.4691 17.793ZM12.0001 9.664C11.1221 9.664 8.30008 14.789 8.72508 15.655C9.15008 16.521 14.8491 16.511 15.2751 15.655C15.7011 14.799 12.8801 9.664 12.0001 9.664Z"})});function qm({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:l,mode:o="mobile",position:a,extraActions:i,onExtraAction:c}){const f=Br(),[d,m]=g.useState(!1),[x,v]=g.useState(null),[S,N]=g.useState(null),[h,p]=g.useState(!1),[y,w]=g.useState(void 0),[k,E]=g.useState(null),[I,P]=g.useState(null),[R,j]=g.useState(!1),[W,ee]=g.useState(""),[X,M]=g.useState(!1),[J,oe]=g.useState([]),[ae,b]=g.useState(!1),[L,F]=g.useState(null),[se,ue]=g.useState(""),[Te,ye]=g.useState(!1),[kt,Ae]=g.useState(!1),[It,Gt]=g.useState(null),[_e,Ne]=g.useState(""),[Nt,Me]=g.useState(!1),[O,H]=g.useState(0),{playTrack:B,playAlbum:K,addToQueueWithToast:Ee,playNext:ce,shuffleArtist:Le,toggleShuffle:Fe}=te(),Ht=He(V=>V.startSync),ht=He(V=>V.completeSync),de=re(V=>V.genres),{updateEventMetadata:_t}=Ge(),hn=g.useRef(null),Qt=g.useRef(e),Wt=g.useRef(t);g.useEffect(()=>{Qt.current=e,Wt.current=t},[e,t]),g.useEffect(()=>{if(!n||!e){N(null);return}(async()=>{var C,z;try{if(t==="album"){const Y=await $.getAlbumTracks(e.Id);Y.length>0&&((C=Y[0].Genres)!=null&&C[0])&&N(Y[0].Genres[0])}else if(t==="artist"){const{songs:Y}=await $.getArtistItems(e.Id);Y.length>0&&((z=Y[0].Genres)!=null&&z[0])&&N(Y[0].Genres[0])}}catch(Y){_.error("Failed to fetch genre:",Y)}})()},[n,e==null?void 0:e.Id,t]);const Bn=V=>{if(!V)return null;const C=de.find(z=>{var Y;return((Y=z.Name)==null?void 0:Y.toLowerCase())===V.toLowerCase()});return(C==null?void 0:C.Id)||null},Vn=g.useCallback(async V=>{var Y,T,G,Q,ne,me,Be,Ye,yn,No,Eo,Gr,yu,vu;const C=Qt.current,z=Wt.current;if(C){if(i!=null&&i.some(U=>U.id===V)){r(),c==null||c(V,C);return}if(V==="addToPlaylist"){if(z==="song")oe([C.Id]),r(),M(!0);else if(z==="album"){m(!0),v(V);try{const U=await $.getAlbumTracks(C.Id);oe(U.map(q=>q.Id)),r(),M(!0)}catch(U){_.error("Failed to fetch album tracks:",U)}finally{m(!1),v(null)}}return}if(V==="deletePlaylist"){F(C.Id),ue(C.Name||"this playlist"),r(),b(!0);return}if(V==="renamePlaylist"){Gt(C.Id),Ne(C.Name||""),Me(!!("ImageTags"in C&&((Y=C.ImageTags)!=null&&Y.Primary))),r(),Ae(!0);return}if(V==="viewDetails"){r(),l&&l(),f(`/song/${C.Id}`);return}if(V==="openInJellyfin"){const U=we.getState().serverUrl,q=we.getState().serverId,xe=(U==null?void 0:U.replace(/\/$/,""))??"";if(xe&&C.Id){let Ce=q;if(!Ce)try{const ar=await fetch(`${xe}/System/Info/Public`);ar.ok&&(Ce=(await ar.json()).Id??"")}catch{}Ce&&window.open(`${xe}/web/#/details?id=${C.Id}&serverId=${Ce}`,"_blank","noopener,noreferrer")}r();return}if(V==="openIn"){const U=((G=(T=C.ArtistItems)==null?void 0:T[0])==null?void 0:G.Name)||C.AlbumArtist||C.Name||"";let q="";z==="song"||z==="album"?q=C.Name||"":z==="artist"&&(q=""),ee(z==="artist"?U:`${U} - ${q}`),j(!0),P(null),E(C.Id??null);const xe=(Q=hn.current)==null?void 0:Q.getBoundingClientRect();w(xe?{x:xe.left,y:xe.top}:a),r(),p(!0);const Ce=Jy(U,q);P(Ce),j(!1);return}if(V.startsWith("goTo")){if(r(),l&&l(),V==="goToArtist"){const U=z==="song"?((me=(ne=C.ArtistItems)==null?void 0:ne[0])==null?void 0:me.Id)||("AlbumArtists"in C?(Ye=(Be=C.AlbumArtists)==null?void 0:Be[0])==null?void 0:Ye.Id:void 0):("AlbumArtists"in C?(No=(yn=C.AlbumArtists)==null?void 0:yn[0])==null?void 0:No.Id:void 0)||((Gr=(Eo=C.ArtistItems)==null?void 0:Eo[0])==null?void 0:Gr.Id);U&&f(`/artist/${U}`)}else if(V==="goToAlbum")C.AlbumId&&f(`/album/${C.AlbumId}`);else if(V==="goToGenre"){const U=z==="album"||z==="artist"?S:(yu=C.Genres)==null?void 0:yu[0];if(U){const q=Bn(U);if(q)f(`/genre/${encodeURIComponent(q)}`);else{const Ce=(await $.getGenres()).find(ar=>{var ir;return((ir=ar.Name)==null?void 0:ir.toLowerCase())===U.toLowerCase()});Ce!=null&&Ce.Id&&f(`/genre/${encodeURIComponent(Ce.Id)}`)}}}return}m(!0),v(V);try{switch(z){case"album":{if(V==="play"){const U=await $.getAlbumTracks(C.Id),{shuffle:q}=te.getState();q&&Fe(),K(U)}else if(V==="shuffle"){const U=await $.getAlbumTracks(C.Id),{shuffle:q}=te.getState();q&&Fe(),K(U),requestAnimationFrame(()=>{const{shuffle:xe}=te.getState();xe||Fe()})}else if(V==="playNext"){const U=await $.getAlbumTracks(C.Id);ce(U)}else if(V==="addToQueue"){const U=await $.getAlbumTracks(C.Id);Ee(U)}else if(V==="sync"){Ht("context-menu",`Syncing ${C.Name}...`);try{(await $.getAlbumTracks(C.Id)).forEach(q=>{var xe;_t("song",q.Id,{songName:q.Name||"Unknown",artistNames:(xe=q.ArtistItems)!=null&&xe.length?q.ArtistItems.map(Ce=>Ce.Name||"Unknown"):[q.AlbumArtist||"Unknown"],albumName:q.Album||"Unknown",genres:q.Genres||[],year:q.ProductionYear||null})}),ht(!0,`${C.Name} synced`)}catch{ht(!1,`Failed to sync ${C.Name}`)}}break}case"song":{if(V==="play")_.log("ContextMenu: Playing song",C.Name),B(C);else if(V==="playNext")_.log("ContextMenu: Adding song to play next",C.Name),ce([C]);else if(V==="addToQueue")_.log("ContextMenu: Adding song to queue",C.Name),Ee([C]);else if(V==="sync"){Ht("context-menu",`Syncing ${C.Name}...`);try{const U=await $.getSongById(C.Id);if(U.Genres){const q=await $.getGenres();U.Genres.forEach(xe=>{const Ce=q.find(ar=>{var ir;return((ir=ar.Name)==null?void 0:ir.toLowerCase())===xe.toLowerCase()});Ce!=null&&Ce.Id&&re.getState().clearGenreSongsForGenre(Ce.Id)})}_t("song",C.Id,{songName:U.Name||"Unknown",artistNames:(vu=U.ArtistItems)!=null&&vu.length?U.ArtistItems.map(q=>q.Name||"Unknown"):[U.AlbumArtist||"Unknown"],albumName:U.Album||"Unknown",genres:U.Genres||[],year:U.ProductionYear||null}),ht(!0,`${C.Name} synced`)}catch{ht(!1,`Failed to sync ${C.Name}`)}}break}case"artist":{if(V==="shuffle"){const{songs:U}=await $.getArtistItems(C.Id);Le(U)}else if(V==="playNext"){const{songs:U}=await $.getArtistItems(C.Id);ce(U)}else if(V==="addToQueue"){const{songs:U}=await $.getArtistItems(C.Id);Ee(U)}else if(V==="sync"){Ht("context-menu",`Syncing ${C.Name}...`);try{const{songs:U}=await $.getArtistItems(C.Id);U.forEach(q=>{var xe;_t("song",q.Id,{songName:q.Name||"Unknown",artistNames:(xe=q.ArtistItems)!=null&&xe.length?q.ArtistItems.map(Ce=>Ce.Name||"Unknown"):[q.AlbumArtist||"Unknown"],albumName:q.Album||"Unknown",genres:q.Genres||[],year:q.ProductionYear||null})}),ht(!0,`${C.Name} synced`)}catch{ht(!1,`Failed to sync ${C.Name}`)}}break}case"playlist":{if(V==="play"){const U=await $.getAlbumTracks(C.Id);if(U.length===0)break;const{shuffle:q}=te.getState();q&&Fe(),K(U)}else if(V==="shuffle"){const U=await $.getAlbumTracks(C.Id);if(U.length===0)break;const{shuffle:q}=te.getState();q&&Fe(),K(U),requestAnimationFrame(()=>{const{shuffle:xe}=te.getState();xe||Fe()})}else if(V==="playNext"){const U=await $.getAlbumTracks(C.Id);if(U.length===0)break;ce(U)}else if(V==="addToQueue"){const U=await $.getAlbumTracks(C.Id);if(U.length===0)break;Ee(U)}else if(V==="sync"){Ht("context-menu",`Syncing ${C.Name}...`);try{(await $.getAlbumTracks(C.Id)).forEach(q=>{var xe;_t("song",q.Id,{songName:q.Name||"Unknown",artistNames:(xe=q.ArtistItems)!=null&&xe.length?q.ArtistItems.map(Ce=>Ce.Name||"Unknown"):[q.AlbumArtist||"Unknown"],albumName:q.Album||"Unknown",genres:q.Genres||[],year:q.ProductionYear||null})}),ht(!0,`${C.Name} synced`)}catch{ht(!1,`Failed to sync ${C.Name}`)}}break}}r()}catch(U){_.error("Context menu action failed:",U)}finally{m(!1),v(null)}}},[r,l,f,S,Bn,B,K,Ee,ce,Le,Fe,Ht,ht]),Vr=async()=>{if(L){ye(!0);try{await $.deleteItem(L),De.getState().addToast("Playlist deleted","success",2e3),b(!1),window.dispatchEvent(new CustomEvent("playlistUpdated")),f("/playlists")}catch{De.getState().addToast("Failed to delete playlist","error",3e3)}finally{ye(!1)}}},pn=u.jsxs(u.Fragment,{children:[u.jsx(ev,{isOpen:X,onClose:()=>M(!1),itemIds:J,zIndex:s}),u.jsx(Us,{isOpen:ae,onClose:()=>b(!1),children:u.jsxs("div",{className:"pb-6",children:[u.jsxs("div",{className:"mb-6 px-4 flex items-start gap-3",children:[u.jsx(Ay,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-lg font-semibold text-white",children:"Delete Playlist?"}),u.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["",se," will be permanently deleted. This cannot be undone."]})]})]}),u.jsxs("div",{className:"px-4 flex gap-3",children:[u.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-3 bg-transparent border border-red-500 text-red-500 hover:bg-red-500/10 font-semibold rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:Vr,disabled:Te,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:Te?"Deleting...":"Delete"})]})]})}),u.jsx(ov,{isOpen:kt,onClose:()=>Ae(!1),editPlaylistId:It,initialName:_e,hasExistingImage:Nt,imageCacheBust:O,onSaved:()=>H(Date.now())})]});if(!e||!t)return u.jsxs(u.Fragment,{children:[u.jsx(od,{isOpen:h,onClose:()=>{p(!1),P(null),E(null)},odesliData:I,loading:R,title:W,mode:o,position:a,jellyfinItemId:k}),pn]});const gn=(()=>{var V,C,z,Y,T,G,Q;switch(t){case"album":{const ne=e.AlbumArtist||("AlbumArtists"in e?(C=(V=e.AlbumArtists)==null?void 0:V[0])==null?void 0:C.Name:void 0)||((Y=(z=e.ArtistItems)==null?void 0:z[0])==null?void 0:Y.Name)||"Artist",me=S||"Genre";return[{id:"play",label:"Play",icon:Ln},{id:"shuffle",label:"Shuffle",icon:jr},{id:"playNext",label:"Play Next",icon:fl},{id:"addToQueue",label:"Add to Queue",icon:dl},{id:"goToArtist",label:`Go to ${ne}`,icon:no},{id:"goToGenre",label:`Go to ${me}`,icon:jl},{id:"addToPlaylist",label:"Add to Playlist",icon:td},{id:"sync",label:"Sync",icon:ss},{id:"openIn",label:"Open in",icon:la}]}case"song":{const ne=((G=(T=e.ArtistItems)==null?void 0:T[0])==null?void 0:G.Name)||e.AlbumArtist||"Artist",me=e.Album||"Album",Be=((Q=e.Genres)==null?void 0:Q[0])||"Genre";return[{id:"play",label:"Play",icon:Ln},{id:"playNext",label:"Play Next",icon:fl},{id:"addToQueue",label:"Add to Queue",icon:dl},{id:"viewDetails",label:"Go to Song Details",icon:uu},{id:"goToAlbum",label:`Go to ${me}`,icon:iu},{id:"goToArtist",label:`Go to ${ne}`,icon:no},{id:"goToGenre",label:`Go to ${Be}`,icon:jl},{id:"addToPlaylist",label:"Add to Playlist",icon:td},...i||[],{id:"sync",label:"Sync",icon:ss},{id:"openIn",label:"Open in",icon:la}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:jr},{id:"playNext",label:"Play Next",icon:fl},{id:"addToQueue",label:"Add to Queue",icon:dl},{id:"goToGenre",label:`Go to ${S||"Genre"}`,icon:jl},{id:"sync",label:"Sync",icon:ss},{id:"openIn",label:"Open in",icon:la}];case"playlist":return[...("ChildCount"in e&&e.ChildCount!==void 0?e.ChildCount>0:!0)?[{id:"play",label:"Play",icon:Ln},{id:"shuffle",label:"Shuffle",icon:jr},{id:"playNext",label:"Play Next",icon:fl},{id:"addToQueue",label:"Add to Queue",icon:dl}]:[],{id:"renamePlaylist",label:"Edit Playlist",icon:hy},{id:"sync",label:"Sync",icon:ss},{id:"openInJellyfin",label:"Open in Jellyfin",icon:av},{id:"deletePlaylist",label:"Delete Playlist",icon:by}];default:return[]}})(),or=e.Name||"Unknown",Mt=u.jsx(od,{isOpen:h,onClose:()=>{p(!1),P(null),E(null)},odesliData:I,loading:R,title:W,mode:o,position:y,jellyfinItemId:k});if(o==="desktop"&&n){const C=Math.min(400,gn.length*44+8);let z=(a==null?void 0:a.x)||100,Y=(a==null?void 0:a.y)||100;return z+240>window.innerWidth&&(z=window.innerWidth-240-10),Y+C>window.innerHeight&&(Y=window.innerHeight-C-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),u.jsx("div",{ref:hn,className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:z,top:Y,zIndex:s},onClick:T=>T.stopPropagation(),children:u.jsx("div",{className:"space-y-0",children:gn.map(T=>{const G=T.icon,Q=d&&x===T.id;return u.jsxs("button",{onClick:()=>Vn(T.id),disabled:d,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[u.jsx(G,{className:"w-4 h-4 text-white flex-shrink-0"}),u.jsx("span",{className:"flex-1 text-sm text-white",children:T.label}),Q&&u.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},T.id)})})}),Mt,pn]})}return u.jsxs(u.Fragment,{children:[u.jsx(Us,{isOpen:n,onClose:r,zIndex:s,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:or})}),u.jsx("div",{className:"space-y-1",children:gn.map(V=>{const C=V.icon,z=d&&x===V.id;return u.jsxs("button",{onClick:()=>Vn(V.id),disabled:d,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(C,{className:"w-5 h-5 text-white"}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:V.label}),z&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},V.id)})})]})}),Mt,pn]})}function id(){return u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function iv({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=g.useRef(null),l=g.useRef(null),o=g.useRef(!1),a=g.useRef(null),i=g.useRef(!1),c=g.useCallback(m=>{o.current=!1,i.current=!1,l.current=m.target,!("button"in m&&m.button!==0)&&(m.preventDefault(),"touches"in m&&m.touches.length>0?a.current={x:m.touches[0].clientX,y:m.touches[0].clientY}:a.current=null,s.current=setTimeout(()=>{i.current||(o.current=!0,e(m))},n))},[e,n]),f=g.useCallback(m=>{if(!a.current||m.touches.length===0)return;const x=m.touches[0].clientX,v=m.touches[0].clientY,S=Math.abs(x-a.current.x),N=Math.abs(v-a.current.y);Math.sqrt(S*S+N*N)>r&&(i.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),d=g.useCallback(m=>{if("button"in m&&m.button!==0){o.current=!1,i.current=!1,l.current=null,a.current=null;return}const x=o.current;s.current&&(clearTimeout(s.current),s.current=null),t&&l.current===m.target&&!x&&!i.current&&t(m),o.current=!1,i.current=!1,l.current=null,a.current=null},[t]);return{onMouseDown:c,onTouchStart:c,onTouchMove:f,onMouseUp:d,onMouseLeave:m=>{s.current&&(clearTimeout(s.current),s.current=null),o.current=!1,i.current=!1,l.current=null,a.current=null},onTouchEnd:d}}const uv=45,cv=45,hl=g.memo(function({track:t,index:n,isCurrent:r,isPlaying:s,showRemoveButton:l=!0,onClick:o,onRemove:a,onReorderDragStart:i,onReorderDragEnd:c,onReorderDrop:f,onContextMenu:d,isDragOver:m,onDragEnterRow:x}){var E,I,P,R;const v=Br(),S=g.useRef(!1),N=iv({onLongPress:j=>{j.preventDefault(),S.current=!0,d(t,"mobile"),setTimeout(()=>{S.current=!1},300)}}),h=g.useCallback(j=>{if(S.current){j.preventDefault(),j.stopPropagation();return}o()},[o]),p=g.useCallback(j=>{j.preventDefault(),S.current=!0,d(t,"desktop",{x:j.clientX,y:j.clientY}),setTimeout(()=>{S.current=!1},300)},[d,t]),y=g.useCallback(j=>{j.preventDefault(),j.dataTransfer.dropEffect="move"},[]),w=g.useCallback(j=>{j.preventDefault(),r||x(n)},[r,x,n]),k=g.useCallback(j=>{r||f(j,n)},[r,f,n]);return u.jsxs("div",{onDragOver:y,onDragEnter:w,onDrop:k,className:`group queue-row flex items-center gap-3 p-3 ${r?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${r?"bg-zinc-900":""} relative focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] focus-visible:ring-inset`,onClick:r?void 0:h,onContextMenu:p,tabIndex:0,role:"button","aria-label":`${t.Name} by ${((I=(E=t.ArtistItems)==null?void 0:E[0])==null?void 0:I.Name)||t.AlbumArtist||"Unknown Artist"}`,...N,children:[m&&!r&&u.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),u.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:u.jsx($s,{src:$.getAlbumArtUrl(t.AlbumId||t.Id,96),alt:t.Name,className:"w-full h-full object-cover",showOutline:!1,rounded:"rounded-sm"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`text-sm font-medium truncate transition-colors ${r?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:t.Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:(R=(P=t.ArtistItems)==null?void 0:P[0])!=null&&R.Id?u.jsx("span",{className:"clickable-text",onClick:j=>{j.stopPropagation(),v(`/artist/${t.ArtistItems[0].Id}`)},children:t.ArtistItems[0].Name||t.AlbumArtist||"Unknown Artist"}):t.AlbumArtist||"Unknown Artist"})]}),r?u.jsx("button",{onClick:j=>{j.stopPropagation(),o()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":s?"Pause":"Play",children:s?u.jsx(zs,{className:"w-5 h-5"}):u.jsx(Ln,{className:"w-5 h-5"})}):u.jsx(u.Fragment,{children:l&&u.jsxs("div",{className:"flex items-center queue-actions whitespace-nowrap",children:[u.jsx("button",{draggable:!0,onMouseDown:j=>j.stopPropagation(),onTouchStart:j=>j.stopPropagation(),onDragStart:j=>{j.stopPropagation(),i(j,n)},onDragEnd:j=>{j.stopPropagation(),c()},className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Drag to reorder",children:u.jsx(K1,{className:"w-4 h-4"})}),a&&u.jsx("button",{onClick:j=>{j.stopPropagation(),a()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Remove from queue",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})});function gu({onNavigateFromContextMenu:e,header:t,contentPaddingBottom:n="8rem"}){const[r,s]=g.useState(!1),[l,o]=g.useState(null),[a,i]=g.useState("mobile"),[c,f]=g.useState(null),[d,m]=g.useState(null),[x,v]=g.useState(null),[S,N]=g.useState(uv),[h,p]=g.useState(!1),[y,w]=g.useState(!1),k=g.useRef(null),{songs:E,currentIndex:I,isPlaying:P,togglePlayPause:R,skipToTrack:j,removeFromQueue:W,reorderQueue:ee,isFetchingRecommendations:X,isLoadingMoreSongs:M,repeat:J}=te(),{showQueueRecommendations:oe,setShowQueueRecommendations:ae,recommendationsQuality:b}=Qe(),L=g.useCallback((O,H)=>{O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",H.toString()),v(H),k.current=H;const B=O.currentTarget,K=B==null?void 0:B.closest(".queue-row");if(K&&O.dataTransfer.setDragImage){const ce=K.querySelector(".queue-drag-art")??K,Le=ce.getBoundingClientRect();O.dataTransfer.setDragImage(ce,Le.width/2,Le.height/2)}},[]),F=g.useCallback(()=>{v(null),m(null),k.current=null},[]),se=g.useCallback((O,H)=>{O.preventDefault();const B=O.dataTransfer.getData("text/plain")||O.dataTransfer.getData("text/html"),K=parseInt(B,10);if(Number.isNaN(K))return;const Ee=k.current??K,ce=te.getState().songs,Le=ce[Ee],Fe=ce[H];if(Le&&Fe&&Le.source!==Fe.source){m(null),v(null),k.current=null;return}K!==H&&ee(K,H),m(null),v(null),k.current=null},[ee]),ue=g.useCallback((O,H="mobile",B)=>{o(O),i(H),f(B||null),s(!0)},[]),Te=g.useCallback(O=>{if(k.current==null)return;const H=te.getState().songs,B=H[k.current],K=H[O];if(!(!B||!K)){if(B.source!==K.source){m(null);return}m(O)}},[]),ye=I>=0?E[I]:null,kt=E.filter((O,H)=>H<I);let Ae=-1;for(let O=E.length-1;O>I;O--)if(E[O].source==="user"){Ae=O;break}const It=E.filter((O,H)=>H<=I?!1:Ae!==-1?H<=Ae:!1),Gt=E.filter((O,H)=>O.source!=="recommendation"||H<=I?!1:Ae!==-1?H>Ae:!0);let _e=S;const Ne=kt.slice(-Math.min(_e,kt.length));_e-=Ne.length,_e-=ye?1:0;const Nt=It.slice(0,Math.max(0,_e));_e-=Nt.length;const Me=Gt.slice(0,Math.max(0,_e));return g.useEffect(()=>{const O=document.querySelector(".queue-list-container");if(!O)return;const H=()=>{const B=O.scrollTop,K=O.clientHeight,Ee=O.scrollHeight;B+K*2.5>=Ee&&N(ce=>Math.min(ce+cv,E.length))};return O.addEventListener("scroll",H,{passive:!0}),H(),()=>O.removeEventListener("scroll",H)},[E.length]),g.useEffect(()=>{if(X){const O=setTimeout(()=>{w(!0)},2e3);return()=>clearTimeout(O)}else w(!1)},[X]),u.jsx("div",{className:"flex-1 flex flex-col min-h-0 w-full relative",children:u.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 queue-list-container w-full",style:{paddingBottom:"8rem"},children:[u.jsxs("div",{className:"max-w-[864px] mx-auto w-full",children:[t,E.length===0&&!ye?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 py-10",children:u.jsx("p",{children:"Queue is empty"})}):u.jsxs("div",{children:[Ne.length>0&&h&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Previous"}),u.jsx("button",{onClick:()=>p(!1),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Hide"})]}),Ne.map((O,H)=>{const B=E.indexOf(O);return u.jsx(hl,{track:O,index:B,isCurrent:!1,isPlaying:!1,showRemoveButton:!1,onClick:()=>j(B),onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:se,onContextMenu:ue,isDragOver:!1,onDragEnterRow:Te},`${O.Id}-${H}`)})]}),ye&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Now Playing"}),Ne.length>0&&!h&&u.jsx("button",{onClick:()=>p(!0),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Show Previous"})]}),u.jsx(hl,{track:ye,index:I,isCurrent:!0,isPlaying:P,showRemoveButton:!1,onClick:R,onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:se,onContextMenu:ue,isDragOver:!1,onDragEnterRow:Te})]}),Nt.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Coming Up"}),u.jsx("button",{onClick:()=>{const H=E.filter((K,Ee)=>Ee<=I||K.source==="recommendation"),B=Math.min(I,H.length-1);te.setState({songs:H,currentIndex:B,standardOrder:H.filter(K=>K.source==="user").map(K=>K.Id),shuffleOrder:H.filter(K=>K.source==="user").map(K=>K.Id)})},className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]}),Nt.map((O,H)=>{const B=E.indexOf(O);return u.jsx(hl,{track:O,index:B,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>j(B),onRemove:()=>W(B),onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:se,onContextMenu:ue,isDragOver:d===B,onDragEnterRow:Te},`${O.Id}-${H}`)}),M&&u.jsxs("div",{className:"flex items-center justify-center py-4",children:[u.jsx(id,{}),u.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading more songs..."})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Recommendations"}),u.jsx("button",{disabled:J!=="off",onClick:()=>{const O=!oe;if(ae(O),!O){const H=E.filter((B,K)=>K<=I?!0:B.source==="user");te.setState({songs:H,currentIndex:I,standardOrder:H.filter(B=>B.source==="user").map(B=>B.Id),shuffleOrder:H.filter(B=>B.source==="user").map(B=>B.Id)})}},className:`relative w-12 h-6 rounded-full transition-colors ${oe&&J==="off"?"bg-[var(--accent-color)]":"bg-zinc-600"} ${J!=="off"?"opacity-50 cursor-not-allowed":""}`,children:u.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${oe&&J==="off"?"translate-x-6":"translate-x-0"}`})})]}),u.jsxs("div",{className:"px-4 pb-2",children:[J!=="off"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block mb-1",children:"Disabled when repeat mode is active"}),(y||b==="failed")&&u.jsxs(u.Fragment,{children:[y&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Syncing genres..."}),!X&&b==="failed"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Sync library in settings"})]})]}),oe&&J==="off"&&u.jsxs(u.Fragment,{children:[Me.map((O,H)=>{const B=E.indexOf(O);return u.jsx(hl,{track:O,index:B,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>j(B),onRemove:()=>W(B),onReorderDragStart:L,onReorderDragEnd:F,onReorderDrop:se,onContextMenu:ue,isDragOver:d===B,onDragEnterRow:Te},`${O.Id}-${H}`)}),y&&u.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:u.jsx(id,{})})]})]})]})]}),u.jsx(qm,{item:l,itemType:l?"song":null,isOpen:r,onClose:()=>{s(!1),o(null)},onNavigate:e,mode:a,position:c||void 0})]})})}function dv({onClose:e,onNavigateFromContextMenu:t}){const{songs:n,currentIndex:r,isPlaying:s,shuffle:l,repeat:o,togglePlayPause:a,toggleShuffle:i,toggleRepeat:c,next:f,previous:d}=te(),m=r>=0&&r<n.length-1,x=r>0;return u.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[u.jsx(gu,{onNavigateFromContextMenu:t,contentPaddingBottom:"8rem"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:u.jsx("div",{className:"px-6 pt-2 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"},children:u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsx("button",{onClick:i,"aria-label":l?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${l?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(jr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:d,disabled:!x,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${x?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(fu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:a,"aria-label":s?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:s?u.jsx(zs,{className:"w-8 h-8"}):u.jsx(Ln,{className:"w-8 h-8"})}),u.jsx("button",{onClick:f,disabled:!m,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${m?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(mu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:c,"aria-label":o==="off"?"Enable repeat":o==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${o!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:o==="one"?u.jsx(cu,{className:"w-6 h-6"}):u.jsx(du,{className:"w-6 h-6"})})]})})})]})}function fv(){const e=hu(),t=pu(),{isQueueSidebarOpen:n}=te(),r=e||t,[s,l]=g.useState(null),[o,a]=g.useState(!1);return g.useEffect(()=>{(async()=>{if(!r){l(null);return}a(!0);try{const c=await $.getLyrics(r.Id);l(c)}catch(c){_.error("Failed to fetch lyrics:",c),l(null)}finally{a(!1)}})()},[r==null?void 0:r.Id]),r?u.jsxs("div",{className:`fixed left-0 right-0 z-[55] flex flex-col transition-[right] duration-300 ease-out ${n?"lyrics-with-sidebar":""}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:[u.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 py-4 relative",children:o?u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50",children:"Loading lyrics..."})}):s?u.jsx("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto pb-8 pl-8 pr-4",children:u.jsx("div",{className:"text-white text-center whitespace-pre-line text-xl lg:text-3xl",children:s.split(`
`).map((i,c)=>u.jsx("div",{className:"mb-6 leading-relaxed",children:i},c))})}):u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50 text-center",children:"This song has no lyrics"})})}),u.jsx("div",{className:"h-px bg-white/20 flex-shrink-0"})]}):null}function mv({onClose:e,onClosingStart:t,closeRef:n}){const r=Br(),{songs:s,currentIndex:l,isPlaying:o,currentTime:a,duration:i,shuffle:c,repeat:f,togglePlayPause:d,next:m,previous:x,seek:v,setVolume:S,toggleShuffle:N,toggleRepeat:h,playTrack:p,isQueueSidebarOpen:y,toggleQueueSidebar:w}=te(),k=hu(),E=pu(),I=k||E,[P,R]=g.useState(!1);g.useEffect(()=>{R(!1)},[]);const[j,W]=g.useState(!1),[ee,X]=g.useState(!1),[M,J]=g.useState(null),[oe,ae]=g.useState("up"),[b,L]=g.useState(null),[F,se]=g.useState(null),[ue,Te]=g.useState(!1),[ye,kt]=g.useState(!1),[Ae,It]=g.useState(!1),[Gt,_e]=g.useState(!1),[Ne,Nt]=g.useState(null),[Me,O]=g.useState(null),H=g.useRef(null),B=g.useRef(null),K=g.useRef(null),Ee=g.useRef(null),ce=g.useRef(!1),Le=g.useRef(null);g.useEffect(()=>{const T=window.getComputedStyle(document.body).overflowY,G=window.getComputedStyle(document.documentElement).overflowY,Q=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const ne=document.getElementById("root");return ne&&(ne.style.overflowY="hidden"),()=>{document.body.style.overflowY=T,document.documentElement.style.overflowY=G,ne&&(ne.style.overflowY=Q!=="N/A"?Q:"")}},[]),g.useEffect(()=>{requestAnimationFrame(()=>{It(!0)})},[]);const Fe=s.length>0&&(l<0||l<s.length-1||f!=="off"),Ht=l>0||f==="all"&&s.length>0;g.useEffect(()=>{(async()=>{if(!I){Te(!1);return}try{const G=await $.getLyrics(I.Id),Q=G!==null&&G.trim().length>0;Te(Q)}catch{Te(!1)}})()},[I]);const ht=T=>{if(!T)return"Unknown";if(T.Name&&T.Name.trim())return T.Name;const G=T.Path;return G&&typeof G=="string"&&(G.split("/").pop()||G.split("\\").pop())||"Unknown"},de=T=>{var G,Q;return T&&(((Q=(G=T.ArtistItems)==null?void 0:G[0])==null?void 0:Q.Name)||T.AlbumArtist)||""};if(g.useEffect(()=>{"mediaSession"in navigator&&I&&(navigator.mediaSession.metadata=new MediaMetadata({title:ht(I),artist:de(I),album:I.Album||"",artwork:[{src:$.getAlbumArtUrl(I.AlbumId||I.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",d),navigator.mediaSession.setActionHandler("pause",d),navigator.mediaSession.setActionHandler("previoustrack",x),navigator.mediaSession.setActionHandler("nexttrack",m))},[I,o,d,m,x]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&i>0)try{navigator.mediaSession.setPositionState({duration:i,playbackRate:1,position:Math.min(a,i)})}catch{}},[a,i]),g.useEffect(()=>{_e(!1)},[I==null?void 0:I.Id]),g.useEffect(()=>{if(!I)return;const T=$.getAlbumArtUrl(I.AlbumId||I.Id);if(!Ne){Nt(T);return}if(T===Ne)return;const G=new window.Image,Q=()=>{O(Ne),Nt(T),setTimeout(()=>{O(null)},1100)};G.onload=Q,G.onerror=Q,G.src=T},[I==null?void 0:I.Id,I==null?void 0:I.AlbumId]),!I)return null;const _t=i>0?a/i*100:0,hn=T=>{const G=Math.floor(T/60),Q=Math.floor(T%60);return`${G}:${Q.toString().padStart(2,"0")}`},Qt=()=>{if(I.Name&&I.Name.trim())return I.Name;const T=I.Path;return T&&typeof T=="string"&&(T.split("/").pop()||T.split("\\").pop())||"Unknown"},Wt=()=>{var T,G;return((G=(T=I.ArtistItems)==null?void 0:T[0])==null?void 0:G.Name)||I.AlbumArtist},Bn=I.AlbumId&&I.Album&&I.Album.trim(),Vn=T=>{if(!H.current||!i||ce.current)return;const G=H.current.getBoundingClientRect(),Q=(T.clientX-G.left)/G.width;v(Math.max(0,Math.min(1,Q))*i)},Vr=T=>{if(!H.current||!i)return;ce.current=!0,Le.current=T.clientX;const G=H.current.getBoundingClientRect(),Q=(T.clientX-G.left)/G.width;v(Math.max(0,Math.min(1,Q))*i)},pn=()=>{ce.current=!1,Le.current=null},Hs=T=>{if(!H.current||!i)return;T.stopPropagation(),ce.current=!0;const G=T.touches[0],Q=H.current.getBoundingClientRect(),ne=(G.clientX-Q.left)/Q.width;v(Math.max(0,Math.min(1,ne))*i)},gn=T=>{if(!ce.current||!H.current||!i)return;T.stopPropagation(),T.preventDefault();const G=T.touches[0],Q=H.current.getBoundingClientRect(),ne=(G.clientX-Q.left)/Q.width;v(Math.max(0,Math.min(1,ne))*i)},or=T=>{T.stopPropagation(),ce.current=!1,Le.current=null};g.useEffect(()=>{let T=null;const G=ne=>{!ce.current||!H.current||!i||T===null&&(T=requestAnimationFrame(()=>{if(T=null,!ce.current||!H.current)return;const me=H.current.getBoundingClientRect(),Be=(ne.clientX-me.left)/me.width;v(Math.max(0,Math.min(1,Be))*i)}))},Q=()=>{ce.current&&(ce.current=!1,Le.current=null),T!==null&&(cancelAnimationFrame(T),T=null)};return document.addEventListener("mousemove",G),document.addEventListener("mouseup",Q),()=>{document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",Q),T!==null&&cancelAnimationFrame(T)}},[i,v]);const Mt=()=>{kt(!0),t==null||t(),setTimeout(()=>{e()},300)},V=(T="up")=>{const G=T==="down"?F:b;if(G){const Q=G.getBoundingClientRect();J({top:T==="down"?Q.bottom:Q.top,left:Q.left+Q.width/2}),ae(T),X(!0)}};g.useEffect(()=>(n&&(n.current=Mt),()=>{n&&(n.current=null)}),[n]);const C=T=>{P||j||(B.current=T.touches[0].clientY,K.current=Date.now())},z=T=>{if(P||j||B.current===null)return;const Q=T.touches[0].clientY-B.current;if(Q>0&&Ee.current){const ne=Math.min(Q,window.innerHeight*.5);Ee.current.style.transform=`translateY(${ne}px)`}},Y=T=>{if(P||j||B.current===null||K.current===null){B.current=null,K.current=null,Ee.current&&(Ee.current.style.transform="");return}const Q=T.changedTouches[0].clientY-B.current,ne=Date.now()-K.current,me=50,Be=.3;Ee.current&&(Ee.current.style.transform="");const Ye=Q/ne;(Q>me||Q>30&&Ye>Be)&&Mt(),B.current=null,K.current=null};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }

      @media (min-width: 1024px) {
        .lg\\:max-w-\\[864px\\] { max-width: 864px; }
      }

      /* Queue sidebar in player modal - transparent backgrounds (exclude fixed elements like context menus) */
      .queue-xl-container .bg-zinc-900:not([style*="position: fixed"]):not(.fixed) { background-color: transparent; }
      .queue-xl-container .hover\\:bg-zinc-900:hover:not([style*="position: fixed"]):not(.fixed) { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .hover\\:bg-zinc-800:hover { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .text-\\[var\\(--accent-color\\)\\] { color: white; }

      /* Background crossfade animation - only on large screens */
      @keyframes bgFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .bg-fade-in {
        animation: none; /* Instant on smaller screens */
      }
      @media (min-width: 1280px) {
        .bg-fade-in {
          animation: bgFadeIn 1s ease-out forwards;
        }
      }

      /* Lyrics modal with sidebar - adjust right edge on xl screens */
      @media (min-width: 1280px) {
        .lyrics-with-sidebar { right: var(--sidebar-width) !important; }
      }
    `}),u.jsxs("div",{ref:Ee,onTouchStart:C,onTouchMove:z,onTouchEnd:Y,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex transition-transform duration-300 ease-out overflow-hidden ${ye?"translate-y-full":Ae?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:B.current===null?"transform 300ms ease-out":"none"},children:[!Gt&&(Ne||Me)&&u.jsxs("div",{className:P?"hidden xl:contents":"contents",children:[Me&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Me})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]}),Ne&&u.jsxs("div",{className:"absolute inset-0 bg-fade-in",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Ne})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]},Ne)]}),u.jsx("div",{className:P?"hidden xl:contents":"contents",children:u.jsx("div",{className:"absolute inset-0 bg-black/40 z-[1] pointer-events-none"})}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-[2]",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[u.jsx("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:u.jsx("button",{onClick:Mt,"aria-label":"Close player",className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:u.jsx(D1,{className:"w-8 h-8"})})}),j&&I&&u.jsx("h2",{className:"hidden min-[480px]:block absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:Qt()}),u.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[u.jsx("div",{className:`${P?"xl:hidden":"md:hidden"}`,children:!Ot()&&u.jsx(ln,{variant:"compact",onOpenPopover:()=>V("down"),onRef:se,className:"text-white hover:text-zinc-300 hover:bg-white/10 rounded-full transition-colors p-2"})}),u.jsx("button",{onClick:()=>{!ue&&!j||(P&&R(!1),W(!j))},"aria-label":j?"Hide lyrics":"Show lyrics",className:`transition-colors p-2 rounded-full ${ue||j?`hover:bg-white/10 ${j?"text-[var(--accent-color)]":"text-white"}`:"hidden"}`,children:u.jsx(cy,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>{P||W(!1),R(!P)},"aria-label":P?"Show player":"Show queue",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 xl:hidden",children:P?u.jsx(Py,{className:"w-6 h-6"}):u.jsx(li,{className:"w-6 h-6"})}),!y&&u.jsx("button",{onClick:w,"aria-label":"Open queue sidebar",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 hidden xl:block",children:u.jsx(li,{className:"w-6 h-6"})})]})]}),P&&u.jsx("div",{className:"flex-1 bg-zinc-900 relative z-10 xl:hidden",children:u.jsx(dv,{onClose:()=>R(!1),onNavigateFromContextMenu:()=>{Mt()}})}),u.jsxs("div",{className:`flex-1 flex-col min-h-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full relative ${P?"hidden xl:flex":"flex"}`,style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[u.jsx("div",{className:`flex-1 overflow-hidden min-h-0 flex items-center justify-center ${j?"invisible":""}`,children:u.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8 md:pr-0",children:u.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[u.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:u.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 ${Gt?"":"bg-zinc-900 shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:Gt?u.jsx("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center relative",children:u.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:T=>{_.error("Failed to load vinyl image"),T.currentTarget.style.display="none"}})}):u.jsx($s,{src:$.getAlbumArtUrl(I.AlbumId||I.Id),alt:I.Name,className:"w-full h-full object-cover",rounded:"rounded",onError:()=>_e(!0)})})}),u.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:Qt()}),Wt()&&u.jsxs("button",{onClick:()=>{var G,Q;const T=(Q=(G=I.ArtistItems)==null?void 0:G[0])==null?void 0:Q.Id;T&&(e(),r(`/artist/${T}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[u.jsx(no,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:Wt()})]}),Bn&&u.jsxs("button",{onClick:()=>{e(),r(`/album/${I.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[u.jsx(iu,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:I.Album})]})]})]})})}),u.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[u.jsx("div",{className:"space-y-3 px-4 w-full",children:u.jsxs("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto",children:[u.jsx("div",{ref:H,className:"h-2 bg-white/10 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:Vn,onMouseDown:Vr,onMouseUp:pn,onMouseLeave:pn,onTouchStart:Hs,onTouchMove:gn,onTouchEnd:or,children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${_t}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:_t>=100?"9999px":"0",borderBottomRightRadius:_t>=100?"9999px":"0"}})}),u.jsxs("div",{className:"flex justify-between text-xs text-white/70 mt-2 tabular-nums",children:[u.jsx("span",{children:hn(a)}),u.jsx("span",{children:hn(i)})]})]})}),u.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 relative",children:[u.jsx("button",{onClick:N,"aria-label":c?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${c?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:u.jsx(jr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:x,disabled:!Ht,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Ht?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(fu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:()=>{k?d():I&&p(I)},"aria-label":o&&k?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:o&&k?u.jsx(zs,{className:"w-8 h-8"}):u.jsx(Ln,{className:"w-8 h-8"})}),u.jsx("button",{onClick:m,disabled:!Fe,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Fe?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(mu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:h,"aria-label":f==="off"?"Enable repeat":f==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${f!=="off"?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:f==="one"?u.jsx(cu,{className:"w-6 h-6"}):u.jsx(du,{className:"w-6 h-6"})}),u.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 hidden md:flex",children:!Ot()&&u.jsx(ln,{variant:"horizontal"})})]})]})]}),j&&u.jsx(fv,{}),ee&&M&&!Ot()&&u.jsx(ln,{variant:"vertical",onClose:()=>X(!1),popoverPosition:M,popoverDirection:oe})]}),u.jsx("div",{className:"hidden xl:flex flex-col flex-shrink-0 relative z-10 transition-[width] duration-300 ease-out overflow-hidden",style:{width:y?"var(--sidebar-width)":"0px"},children:u.jsxs("div",{className:"flex flex-col h-full flex-shrink-0",style:{width:"var(--sidebar-width)"},children:[u.jsx("div",{className:`border-l border-white/20 flex-shrink-0 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/20 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:w,"aria-label":"Close queue sidebar",className:"text-white/70 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 relative z-20",children:u.jsx(nr,{className:"w-5 h-5"})})]})}),u.jsx("div",{className:`flex-1 overflow-y-auto min-h-0 border-l border-white/20 queue-xl-container [&_.text-gray-400]:text-white/60 [&_.text-gray-500]:text-white/50 [&_.text-gray-300]:text-white/70 [&_.border-zinc-800]:border-white/20 [&_.bg-zinc-600]:bg-white/30 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsx(gu,{onNavigateFromContextMenu:Mt,contentPaddingBottom:"2rem"})})]})})]})]})}function hv(){var gn,or,Mt,V;const{songs:e,currentIndex:t,isPlaying:n,currentTime:r,duration:s,audioElement:l,setAudioElement:o,togglePlayPause:a,next:i,setCurrentTime:c,setDuration:f,playTrack:d,repeat:m,shuffle:x,toggleShuffle:v,toggleRepeat:S,previous:N,seek:h,skipToTrack:p,isQueueSidebarOpen:y,toggleQueueSidebar:w,setNextAudioElement:k,preBufferNextTrack:E}=te(),I=hu(),P=pu(),[R,j]=g.useState(!1),[W,ee]=g.useState(!1),[X,M]=g.useState(!1),[J,oe]=g.useState(!1),[ae,b]=g.useState(null),[L,F]=g.useState(null),[se,ue]=g.useState(null),[Te,ye]=g.useState(!1),[kt,Ae]=g.useState("mobile"),[It,Gt]=g.useState(null),_e=g.useRef(null),Ne=g.useRef(null),Nt=g.useRef(null),Me=g.useRef(null),O=g.useRef(!1),H=en(),B=g.useRef(null),K=g.useRef(null),Ee=g.useRef(null),ce=g.useRef(null),Le=g.useRef(!1),Fe=g.useRef(!1);g.useEffect(()=>{R&&(ee(!0),setTimeout(()=>{j(!1),ee(!1)},300))},[H.pathname]),g.useEffect(()=>{j(!1),ee(!1)},[]),g.useEffect(()=>{const C=()=>{R&&Nt.current&&Nt.current()};return window.addEventListener("closePlayerModal",C),()=>{window.removeEventListener("closePlayerModal",C)}},[R]);const Ht=()=>{ee(!0),setTimeout(()=>{j(!1),ee(!1)},300)};g.useEffect(()=>{_e.current||(_e.current=new Audio,_e.current.setAttribute("playsinline","true"),_e.current.setAttribute("preload","auto"),o(_e.current)),Ne.current||(Ne.current=new Audio,Ne.current.setAttribute("playsinline","true"),Ne.current.setAttribute("preload","auto"),k(Ne.current));const C=te.getState().volume;_e.current&&(_e.current.volume=C),Ne.current&&(Ne.current.volume=C)},[o,k]),g.useEffect(()=>{const C=()=>{O.current=!1};return window.addEventListener("playerSeek",C),()=>window.removeEventListener("playerSeek",C)},[]),g.useEffect(()=>{if(!Ot())return;const C=()=>{document.visibilityState==="visible"&&setTimeout(()=>{const z=te.getState(),Y=z.audioElement;!Y||!z.isPlaying||Y.paused&&Y.play().catch(()=>{te.setState({isPlaying:!1})})},300)};return document.addEventListener("visibilitychange",C),()=>document.removeEventListener("visibilitychange",C)},[]),g.useEffect(()=>{if(!l)return;let C=!0;O.current=!1;const z=()=>{if(!C)return;c(l.currentTime);const ne=l.duration-l.currentTime;if(l.duration>0&&ne<=15&&ne>0&&E(),!O.current&&l.duration>0&&ne<=1&&ne>0){O.current=!0;const me=te.getState(),Be=me.currentIndex>=0&&me.currentIndex<me.songs.length?me.songs[me.currentIndex]:null;if(me.repeat==="one"){if(Be&&!me.hasRecordedCurrentTrackStats){const Ye=l.currentTime*1e3;Ge.getState().recordPlay(Be,Ye)}te.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,O.current=!1;return}if(Be){$.markItemAsPlayed(Be.Id).catch(()=>{}),Me.current&&clearTimeout(Me.current);const Ye=Be.Id;Me.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Ye}})),Me.current=null},4e3)}i()}},Y=()=>{C&&(f(l.duration),O.current=!1,_.debug("[PlayerBar] Metadata loaded",{duration:l.duration}))},T=async()=>{if(_.debug("[PlayerBar] handleEnded fired",{preemptive:O.current}),!C)return;if(O.current){O.current=!1;return}const ne=te.getState(),me=ne.currentIndex>=0&&ne.currentIndex<ne.songs.length?ne.songs[ne.currentIndex]:null;if(me)try{await $.markItemAsPlayed(me.Id),Me.current&&clearTimeout(Me.current);const Ye=me.Id;Me.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Ye}})),Me.current=null},4e3)}catch{}if(ne.repeat==="one"){const Ye=ne.hasRecordedCurrentTrackStats;if(me&&!Ye){const yn=l.currentTime*1e3;Ge.getState().recordPlay(me,yn)}te.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,l.play();return}i()},G=()=>{C&&te.getState().audioElement===l&&(te.setState({isPlaying:!0}),_.debug("[PlayerBar] handlePlay",{src:l.src}))},Q=()=>{C&&te.getState().audioElement===l&&(te.setState({isPlaying:!1}),_.debug("[PlayerBar] handlePause",{paused:l.paused}))};return l.addEventListener("timeupdate",z),l.addEventListener("loadedmetadata",Y),l.addEventListener("ended",T),l.addEventListener("play",G),l.addEventListener("pause",Q),()=>{C=!1,l.removeEventListener("timeupdate",z),l.removeEventListener("loadedmetadata",Y),l.removeEventListener("ended",T),l.removeEventListener("play",G),l.removeEventListener("pause",Q),Me.current&&(clearTimeout(Me.current),Me.current=null)}},[l,c,f,i,E]),g.useEffect(()=>{var C,z;"mediaSession"in navigator&&I&&(navigator.mediaSession.metadata=new MediaMetadata({title:I.Name||"Unknown",artist:((z=(C=I.ArtistItems)==null?void 0:C[0])==null?void 0:z.Name)||I.AlbumArtist||"",album:I.Album||"",artwork:[{src:$.getAlbumArtUrl(I.AlbumId||I.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",a),navigator.mediaSession.setActionHandler("pause",a),navigator.mediaSession.setActionHandler("previoustrack",N),navigator.mediaSession.setActionHandler("nexttrack",i))},[I,a,i,N]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&s>0)try{navigator.mediaSession.setPositionState({duration:s,playbackRate:1,position:Math.min(r,s)})}catch{}},[r,s]),g.useEffect(()=>{if(I&&!n&&l){const C=$.serverBaseUrl,z=C?`${C}/Audio/${I.Id}/stream?static=true`:"";l.src!==z&&(l.src=z,l.load())}},[I,n,l]);const ht=e.length>0?e[0]:null,de=I||P||ht;g.useEffect(()=>{M(!1)},[de==null?void 0:de.Id]);const _t=s>0?r/s*100:0,hn=C=>{const z=Math.floor(C/60),Y=Math.floor(C%60);return`${z}:${Y.toString().padStart(2,"0")}`},Qt=e.length>0&&(t<0||t<e.length-1||m!=="off"),Wt=t>0||m==="all"&&e.length>0,Bn=()=>{const z=window.innerWidth<768?se:L;if(z){const Y=z.getBoundingClientRect();b({top:Y.top,left:Y.left+Y.width/2}),oe(!0)}},Vn=C=>{C.preventDefault(),C.stopPropagation(),Ae("desktop"),Gt({x:C.clientX,y:C.clientY}),ye(!0)},Vr=C=>{Le.current||(B.current=C.touches[0].clientX,K.current=Date.now(),Fe.current=!1,ce.current&&(ce.current.style.transition="none"))},pn=C=>{if(Le.current||B.current===null||!ce.current)return;const z=C.touches[0].clientX-B.current,Y=Math.max(.3,1-Math.abs(z)/300);ce.current.style.transform=`translateX(${z}px)`,ce.current.style.opacity=String(Y),Math.abs(z)>10&&(Fe.current=!0)},Hs=C=>{if(Le.current||B.current===null||K.current===null){B.current=null,K.current=null;return}const z=ce.current;if(!z){B.current=null,K.current=null;return}const T=C.changedTouches[0].clientX-B.current,G=Date.now()-K.current,Q=75,ne=.45,me=Math.abs(T)/G,Be=T>Q||T>45&&me>ne,Ye=T<-Q||T<-45&&me>ne,yn=Be&&Wt;if(yn||Ye&&Qt){Le.current=!0;const Gr=(yn?1:-1)*window.innerWidth;z.style.transition="transform 200ms ease-out, opacity 200ms ease-out",z.style.transform=`translateX(${Gr}px)`,z.style.opacity="0",setTimeout(()=>{yn?N():i(),z.style.transition="none",z.style.transform=`translateX(${-Gr}px)`,z.style.opacity="0",z.offsetHeight,z.style.transition="transform 200ms ease-out, opacity 200ms ease-out",z.style.transform="translateX(0)",z.style.opacity="1",setTimeout(()=>{z.style.transition="",z.style.transform="",z.style.opacity="",Le.current=!1},200)},200)}else z.style.transition="transform 200ms ease-out, opacity 200ms ease-out",z.style.transform="translateX(0)",z.style.opacity="1",setTimeout(()=>{z.style.transition="",z.style.transform="",z.style.opacity=""},200);B.current=null,K.current=null};return de?u.jsxs(u.Fragment,{children:[u.jsxs("div",{ref:Ee,className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer bottom-[calc(4rem-8px)] lg:bottom-0",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:()=>{Fe.current||j(!0)},onTouchStart:Vr,onTouchMove:pn,onTouchEnd:Hs,children:[de&&u.jsx("div",{className:"hidden lg:block absolute left-0 right-0 cursor-pointer group",style:{top:"-10px",height:"24px"},onClick:C=>{if(C.stopPropagation(),!s)return;const z=C.currentTarget.getBoundingClientRect(),Y=(C.clientX-z.left)/z.width;h(Math.max(0,Math.min(1,Y))*s)},onTouchStart:C=>{if(C.stopPropagation(),!s)return;const z=C.touches[0],Y=C.currentTarget.getBoundingClientRect(),T=(z.clientX-Y.left)/Y.width;h(Math.max(0,Math.min(1,T))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 bottom-[10px] h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${_t}%`}})})}),u.jsxs("div",{className:"hidden md:block md:relative md:px-4 md:pt-3 md:pb-1 lg:pb-3",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0 max-w-[37%]",onContextMenu:Vn,children:[!X&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx($s,{src:$.getAlbumArtUrl((I||de).AlbumId||(I||de).Id,96),alt:(I||de).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>M(!0)},(I==null?void 0:I.Id)||de.Id)}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(I||de).Name}),u.jsxs("div",{className:"text-xs text-gray-400 truncate flex items-center gap-1.5 min-w-0",children:[u.jsx("span",{className:"truncate",children:((or=(gn=(I||de).ArtistItems)==null?void 0:gn[0])==null?void 0:or.Name)||(I||de).AlbumArtist||"Unknown Artist"}),u.jsx("span",{className:"flex-shrink-0",children:""}),u.jsxs("span",{className:"tabular-nums flex-shrink-0",children:[hn(r),"/",hn(s)]})]})]})]}),u.jsxs("div",{className:"absolute top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 md:right-16 md:left-auto md:translate-x-0 lg:left-1/2 lg:right-auto lg:-translate-x-1/2 flex items-center gap-2",children:[u.jsx("button",{onClick:C=>{C.stopPropagation(),v()},"aria-label":x?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${x?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(jr,{className:"w-5 h-5"})}),u.jsx("button",{onClick:C=>{C.stopPropagation(),Wt&&N()},disabled:!Wt,"aria-label":"Previous track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${Wt?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(fu,{className:"w-5 h-5"})}),u.jsx("button",{onClick:C=>{C.stopPropagation(),I?a():e.length>0?p(0):de&&d(de)},"aria-label":n&&I?"Pause":"Play",className:"w-10 h-10 mx-2 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&I?u.jsx(zs,{className:"w-5 h-5"}):u.jsx(Ln,{className:"w-5 h-5"})}),u.jsx("button",{onClick:C=>{C.stopPropagation(),Qt&&i()},disabled:!Qt,"aria-label":"Next track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${Qt?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(mu,{className:"w-5 h-5"})}),u.jsx("button",{onClick:C=>{C.stopPropagation(),S()},"aria-label":m==="off"?"Enable repeat":m==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${m!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:m==="one"?u.jsx(cu,{className:"w-5 h-5"}):u.jsx(du,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"absolute right-4 top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 flex items-center gap-4",children:[u.jsx("div",{className:"hidden xl:block",children:!y&&u.jsx("button",{onClick:C=>{C.stopPropagation(),w()},className:"text-gray-400 hover:text-white hover:bg-zinc-800 transition-colors flex items-center justify-center w-10 h-10 rounded-full",title:"Open Queue","aria-label":"Open queue",children:u.jsx(li,{className:"w-5 h-5"})})}),u.jsx("div",{className:"hidden lg:block",onClick:C=>C.stopPropagation(),children:!Ot()&&u.jsx(ln,{variant:"horizontal"})}),u.jsx("div",{className:"hidden md:block lg:hidden",children:!Ot()&&u.jsx(ln,{variant:"compact",onOpenPopover:Bn,onRef:F,className:"w-10 h-10 flex items-center justify-center text-white hover:text-zinc-300 hover:bg-zinc-800 rounded-full transition-colors"})})]})]}),u.jsxs("div",{className:"flex items-center gap-3 pt-3 pb-1 pr-3 pl-4 md:hidden",children:[u.jsxs("div",{ref:ce,className:"flex items-center gap-3 flex-1 min-w-0",onContextMenu:Vn,children:[!X&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx($s,{src:$.getAlbumArtUrl((I||de).AlbumId||(I||de).Id,96),alt:(I||de).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>M(!0)},(I==null?void 0:I.Id)||de.Id)}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(I||de).Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:((V=(Mt=(I||de).ArtistItems)==null?void 0:Mt[0])==null?void 0:V.Name)||(I||de).AlbumArtist||"Unknown Artist"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!Ot()&&u.jsx(ln,{variant:"compact",onOpenPopover:Bn,onRef:ue,className:"text-white hover:text-zinc-300 transition-colors"}),u.jsx("button",{onClick:C=>{C.stopPropagation(),I?a():e.length>0?p(0):de&&d(de)},"aria-label":n&&I?"Pause":"Play",className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors",children:n&&I?u.jsx(zs,{className:"w-5 h-5"}):u.jsx(Ln,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"lg:hidden",style:{marginBottom:"-10px"},children:de&&u.jsx("div",{className:"relative cursor-pointer group flex items-center",style:{height:"24px"},onClick:C=>{if(C.stopPropagation(),!s)return;const z=C.currentTarget.getBoundingClientRect(),Y=(C.clientX-z.left)/z.width;h(Math.max(0,Math.min(1,Y))*s)},onTouchStart:C=>{if(C.stopPropagation(),!s)return;const z=C.touches[0],Y=C.currentTarget.getBoundingClientRect(),T=(z.clientX-Y.left)/Y.width;h(Math.max(0,Math.min(1,T))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${_t}%`}})})})})]}),R&&u.jsx(mv,{onClose:Ht,onClosingStart:()=>ee(!0),closeRef:Nt}),J&&ae&&!Ot()&&u.jsx(ln,{variant:"vertical",onClose:()=>oe(!1),popoverPosition:ae}),u.jsx(qm,{item:I||de,itemType:"song",isOpen:Te,onClose:()=>{ye(!1),Gt(null)},mode:kt,position:It||void 0})]}):null}function pv(){const e=He(c=>c.state),t=He(c=>c.message),n=He(c=>c.progress),r=He(c=>c.cancelSync),s=te(c=>c.isQueueSidebarOpen),l=Qe(c=>c.localServerUrl);if(e==="idle")return null;const o=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}},a=Io()||l,i=e==="syncing"&&a?$.serverBaseUrl===a.replace(/\/$/,"")?"Syncing via LAN server...":"Syncing via remote server...":t;return u.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${o()} transition-colors duration-300`,style:{height:"28px",top:"0px",paddingLeft:"16px",paddingRight:s?"var(--sidebar-width)":"12px",scrollbarGutter:"stable"},children:u.jsxs("div",{className:"h-full flex items-center",children:[u.jsxs("span",{className:"text-white text-sm font-medium truncate",children:[i,e==="syncing"&&n!==null&&u.jsxs("span",{className:"tabular-nums",children:[" (",n,"%)"]})]}),e==="syncing"&&u.jsx("button",{onClick:r,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors ml-8",children:"Cancel"})]})})}const oa=new Set;async function gv(e){const t=e.toLowerCase();if(!oa.has(t)){oa.add(t);try{_.log(`[Recommendations] Auto-syncing genre "${e}" for better recommendations...`);const{genres:n,setGenreSongs:r}=re.getState();let s=n;s.length===0&&(s=await $.getGenres());const l=s.find(a=>a.Name&&e&&a.Name.toLowerCase()===e.toLowerCase());if(!l||!l.Id){_.warn(`[Recommendations] Genre "${e}" not found in server`);return}_.log(`[Recommendations] Fetching songs for genre "${e}"...`);const o=await $.getGenreSongs(l.Id,e);o.length>0?(r(l.Id,o),_.log(`[Recommendations]  Successfully cached ${o.length} songs for genre "${e}"`)):_.warn(`[Recommendations] No songs found for genre "${e}" on server`)}catch(n){_.error(`[Recommendations] Failed to sync genre "${e}":`,n)}finally{setTimeout(()=>{oa.delete(t)},1e4)}}}async function yv({currentTrack:e,queue:t}){var w;if(!e)return{recommendations:[],hasGenreMatches:!1};const{songs:n,genreSongs:r,genres:s}=re.getState(),l=e.Genres||[];let o=[];if(l.length>0&&s.length>0){const k=s.filter(E=>E.Name&&l.some(I=>I.toLowerCase()===E.Name.toLowerCase())).map(E=>E.Id).filter(E=>r[E]&&r[E].length>0);k.length>0&&(o=k.flatMap(E=>r[E]),_.log(`[Recommendations] Using ${o.length} pre-filtered songs from ${k.length} matching genres`))}if(o.length===0&&n.length>0&&(o=n,_.log(`[Recommendations] Using ${o.length} songs from main cache`)),o.length===0){const k=Object.values(r).flat();k.length>0&&(o=k,_.log(`[Recommendations] Using ${o.length} songs from all genre caches`))}if(o.length===0){const{setRecommendationsQuality:k}=Qe.getState();return k("failed"),{recommendations:[],hasGenreMatches:!1}}_.log("[Recommendations] Using",o.length,"available songs"),_.log("[Recommendations] Current track genres:",l,"(count:",l.length+")"),_.log("[Recommendations] Current track year:",e.ProductionYear),_.log("[Recommendations] Queue size:",t.length),_.log("[Recommendations] Sample available songs:",o.slice(0,3).map(k=>{var E;return`${k.Name} (${k.ProductionYear}) [${(E=k.Genres)==null?void 0:E.join(", ")}]`}));let a=[],i=!1;const c=e.ProductionYear,f=c?[{range:3,years:Array.from({length:7},(k,E)=>c-3+E)},{range:6,years:Array.from({length:13},(k,E)=>c-6+E)},{range:10,years:Array.from({length:21},(k,E)=>c-10+E)}]:[],d=k=>{const E=k.Id!==e.Id,I=!t.some(R=>R.Id===k.Id),P=!a.some(R=>R.Id===k.Id);return E&&I&&P},m=k=>{var E;return l.length===0?!0:((E=k.Genres)==null?void 0:E.some(I=>l.some(P=>I.toLowerCase()===P.toLowerCase())))??!1},x=(k,E)=>c?k.ProductionYear!==void 0&&E.includes(k.ProductionYear):!0;let v=0;if(l.length>0&&(v=o.filter(k=>m(k)).length,v===0)){for(const k of l)gv(k).catch(E=>_.error(`[Recommendations] Genre sync failed for ${k}:`,E));return{recommendations:[],hasGenreMatches:!1,triggeredGenreSync:!0}}for(const{range:k,years:E}of f){if(a.length>=12){_.log(`[Recommendations] Have ${a.length} recommendations, stopping at ${k} year range`);break}const I=12-a.length,P=o.filter(R=>!(!d(R)||!m(R)||!x(R,E)));if(_.log(`[Recommendations] Year range ${k}: found ${P.length} candidates, need ${I}`),P.length>0){const j=Ze(P).slice(0,I);a.push(...j),_.log(`[Recommendations] Added ${j.length} songs from ${k} year range`)}}if(a.length<12&&!c&&l.length>0){const k=12-a.length,E=o.filter(R=>!(!d(R)||!m(R))),P=Ze(E).slice(0,k);a.push(...P),_.log(`[Recommendations] Added ${P.length} genre-only songs (no year on seed track)`)}if(a.length<12&&c&&l.length===0)for(const{range:k,years:E}of f){if(a.length>=12)break;const I=12-a.length,P=o.filter(W=>!(!d(W)||!x(W,E))),j=Ze(P).slice(0,I);a.push(...j),_.log(`[Recommendations] Added ${j.length} year-only songs from ${k} range (no genre on seed track)`)}i=l.length>0&&a.some(k=>m(k)),_.log("[Recommendations] Matching results:",{totalRecommendations:a.length,genreMatchSuccess:i,hasGenres:l.length>0,hasYear:!!c});const S=Ze(a),N=[],h=[...S];for(;h.length>0&&N.length<12;){let k=-1;if(N.length>0){const P=((w=N[N.length-1].ArtistItems)==null?void 0:w.map(R=>R.Id))||[];k=h.findIndex(R=>{var W;return!(((W=R.ArtistItems)==null?void 0:W.map(ee=>ee.Id))||[]).some(ee=>P.includes(ee))})}k===-1&&(k=0);const E=h.splice(k,1)[0];N.push(E)}const p=N,{setRecommendationsQuality:y}=Qe.getState();return _.log("[Recommendations] Quality decision:",{finalRecommendationsCount:p.length,genreMatchSuccess:i,hasGenres:l.length>0,availableSongsCount:o.length}),p.length===0?y("failed"):!i&&l.length>0?y("degraded"):y("good"),_.log(`[Recommendations] Generated ${p.length} recommendations`),p.length>0&&_.log("[Recommendations] Sample:",p.slice(0,3).map(k=>k.Name)),{recommendations:p,hasGenreMatches:i,triggeredGenreSync:!1}}function vv(e){var s;if(e.length<=1)return e;const t=Ze(e),n=[],r=[...t];for(;r.length>0;){let l=-1;if(n.length>0){const i=((s=n[n.length-1].ArtistItems)==null?void 0:s.map(c=>c.Id))||[];l=r.findIndex(c=>{var d;return!(((d=c.ArtistItems)==null?void 0:d.map(m=>m.Id))||[]).some(m=>i.includes(m))})}l===-1&&(l=0);const o=r.splice(l,1)[0];n.push(o)}return n}function xv(){const{currentIndex:e,addToQueue:t,refreshCurrentTrack:n,isFetchingRecommendations:r,setIsFetchingRecommendations:s,repeat:l}=te(),o=te(v=>v.songs.length),{showQueueRecommendations:a}=Qe(),i=g.useRef([]),c=g.useRef(!1),f=g.useRef(0),d=g.useRef(0),m=g.useRef(0),x=3;g.useEffect(()=>{const v=te.getState().songs;i.current=v.slice(-20)},[o]),g.useEffect(()=>{f.current=0,d.current=0,m.current=0},[e]),g.useEffect(()=>{f.current=0,d.current=0,m.current=0},[a]),g.useEffect(()=>{const v=te.getState().songs,S=v.slice(e+1).filter(w=>w.source==="recommendation").length,N=Date.now()-f.current,h=Date.now()-d.current;if(!!!(a&&l==="off"&&!c.current&&!r&&e>=0&&S<12&&N>1e4&&h>5e3))return S>=12||l==="all",void 0;(async()=>{var k;c.current=!0,s(!0);const w=setTimeout(()=>{c.current=!1,s(!1)},3e4);try{await n();const E=v[e];if(!E)return;const I=[E],P=[e-1,e+1,e+2];for(const b of P)if(b>=0&&b<v.length&&I.length<3){const L=v[b];L&&!I.some(F=>F.Id===L.Id)&&I.push(L)}const R=[];for(const b of I){_.log(`[Recommendations] Generating recommendations for seed: ${b.Name}`);const L=await yv({currentTrack:b,queue:v,recentQueue:i.current,lastPlayedTrack:null});if(_.log(`[Recommendations] Result for seed ${b.Name}:`,{recommendationsCount:((k=L.recommendations)==null?void 0:k.length)||0,hasGenreMatches:L.hasGenreMatches,triggeredGenreSync:L.triggeredGenreSync,resultType:typeof L,isArray:Array.isArray(L)}),L.triggeredGenreSync){if(m.current+=1,m.current>x){_.warn("[Recommendations] Max retries reached, giving up"),f.current=Date.now();const{setRecommendationsQuality:se}=Qe.getState();se("failed");return}const F=15e3*Math.pow(2,m.current-1);_.log(`[Recommendations] Genre sync triggered (attempt ${m.current}/${x}), retry in ${F/1e3}s`),setTimeout(()=>{f.current=0},F);return}L.recommendations&&Array.isArray(L.recommendations)?R.push(L):_.warn(`[Recommendations] Invalid result for seed ${b.Name}:`,L)}const j=R.filter(b=>b.hasGenreMatches);if(_.log(`[Recommendations] ${j.length} out of ${I.length} seeds found genre matches`),j.length===0){const{setRecommendationsQuality:b}=Qe.getState();b("degraded"),_.log("[Recommendations] No genre matches found - falling back to year/artist only")}const W=v.slice(e+1).filter(b=>b.source==="recommendation").length,ee=Math.max(0,12-W);if(ee===0){_.log("[Recommendations] Already have 12 upcoming recommendations, skipping");return}_.log(`[Recommendations] Currently have ${W} upcoming, need ${ee} more to reach 12`);const X=j.length>0?j:R,M=Math.ceil(ee/X.length),J=[];for(const b of X){const L=b.recommendations.filter(se=>{const ue=v.some(ye=>ye.Id===se.Id),Te=J.some(ye=>ye.Id===se.Id);return!ue&&!Te}),F=L.slice(0,M);J.push(...F),_.log(`[Recommendations] Added ${F.length} recommendations from seed (${L.length} available, genreMatch: ${b.hasGenreMatches})`)}const oe=J.slice(0,ee),ae=vv(oe);_.log(`[Recommendations] Final ${oe.length} recommendations (distributed across ${I.length} seeds)`),ae.length>0?(_.log(`[Recommendations] Adding ${ae.length} recommendations (had ${W}, will have ${W+ae.length})`),_.log("[Recommendations] Recommendations to add:",ae.map(b=>b.Name)),f.current=0,d.current=Date.now(),m.current=0,t(ae,!1,"recommendation"),_.log("[Recommendations] Successfully added recommendations to queue")):(_.log("[Recommendations] No safe recommendations to add - marking as failed attempt"),f.current=Date.now())}catch(E){_.error("[Recommendations Hook] Failed to get recommendations:",E),c.current=!1,s(!1)}finally{clearTimeout(w),c.current=!1,s(!1)}})()},[o,e,t,n,a,r,s,l]),g.useEffect(()=>{if(l!=="off"){a&&Qe.getState().setShowQueueRecommendations(!1);const v=te.getState().songs;if(v.some((N,h)=>h>e&&N.source==="recommendation")){const N=v.filter((h,p)=>p<=e?!0:h.source==="user");te.setState({songs:N,standardOrder:N.filter(h=>h.source==="user").map(h=>h.Id),shuffleOrder:N.filter(h=>h.source==="user").map(h=>h.Id)})}}},[l,e,o,a])}function wv(){const{accessToken:e,isAuthenticated:t}=we(),n=g.useRef(null),r=g.useRef(null),s=g.useRef(null),l=g.useRef(5e3);g.useEffect(()=>{if(!t||!e)return;const o=$.serverBaseUrl;if(!o)return;const a=()=>{if(n.current&&n.current.readyState<=WebSocket.OPEN)return;const c=Ls.get("deviceId")||"unknown",f=o.startsWith("https")?"wss":"ws",d=o.replace(/^https?:\/\//,"").replace(/\/$/,""),m=`${f}://${d}/socket?api_key=${e}&deviceId=${c}`,x=new WebSocket(m);n.current=x,x.onopen=()=>{l.current=5e3},x.onmessage=v=>{var S,N,h;try{const p=JSON.parse(v.data);if(p.MessageType!=="LibraryChanged")return;const y=p.Data;if(!(((S=y==null?void 0:y.ItemsAdded)==null?void 0:S.length)>0||((N=y==null?void 0:y.ItemsUpdated)==null?void 0:N.length)>0||((h=y==null?void 0:y.ItemsRemoved)==null?void 0:h.length)>0))return;_.log("[useLibraryChanged] Library changed, scheduling incremental sync"),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{Sv()},5e3)}catch{}},x.onclose=()=>{i()},x.onerror=()=>{}},i=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{a(),l.current=Math.min(l.current*2,6e4)},l.current)};return a(),()=>{s.current&&clearTimeout(s.current),r.current&&clearTimeout(r.current),n.current&&(n.current.onclose=null,n.current.close(),n.current=null)}},[t,e])}async function Sv(){const{state:e}=He.getState();if(e!=="idle")return;const{lastSyncCompleted:t}=re.getState();if(t===null)return;const{startSync:n,completeSync:r}=He.getState();try{await Gm(),n("auto","New content detected, syncing..."),await $.syncLibrary({scope:"incremental"});const l=(await $.getGenres()||[]).sort((a,i)=>(a.Name||"").localeCompare(i.Name||""));re.getState().setGenres(l),re.getState().setLastSyncCompleted(Date.now());const o=await $.getRecentlyAdded(18);re.getState().setRecentlyAdded(o.Items||[]),r(!0,"Library synced")}catch(s){He.getState().state==="syncing"&&r(!1,s instanceof Error?s.message:"Sync failed")}}function kv(){const{isQueueSidebarOpen:e,toggleQueueSidebar:t}=te();return g.useEffect(()=>{const n=r=>{r.key==="Escape"&&e&&t()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]),e?u.jsxs("div",{className:"fixed top-0 right-0 bottom-0 bg-black border-l border-zinc-800 z-30 flex flex-col hidden xl:flex shadow-xl",style:{width:"var(--sidebar-width)",paddingTop:"var(--header-offset, 0px)"},children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-zinc-800",children:u.jsx(nr,{className:"w-5 h-5"})})]}),u.jsx(gu,{contentPaddingBottom:"8rem"})]}):null}const ud={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function Iv({children:e}){const t=en();xv(),wv();const{accentColor:n}=Qe(),r=re(d=>d.genres),s=re(d=>d.songs),l=re(d=>d.genreSongs),o=He(d=>d.state),a=He(d=>d.startSync),i=He(d=>d.completeSync),{isQueueSidebarOpen:c}=te(),f=g.useRef(!1);return g.useEffect(()=>{const d=ud[n]||ud.blue;document.documentElement.style.setProperty("--accent-color",d)},[n]),g.useEffect(()=>{const d=o!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",d)},[o]),g.useEffect(()=>{r.length===0&&$.getGenres().catch(d=>{})},[r.length]),g.useEffect(()=>{if(f.current)return;const d=setTimeout(async()=>{const{lastSyncCompleted:m}=re.getState(),{state:x}=He.getState();if(m!==null||x!=="idle")return;f.current=!0;const{setProgress:v}=He.getState();try{if(await Gm(),a("auto","Syncing library..."),await $.syncLibrary({scope:"full"},v),He.getState().state!=="syncing")return;const N=(await $.getGenres()||[]).sort((h,p)=>(h.Name||"").localeCompare(p.Name||""));re.getState().setGenres(N),re.getState().setLastSyncCompleted(Date.now()),i(!0,"Library synced successfully")}catch(S){He.getState().state==="syncing"&&i(!1,S instanceof Error?S.message:"Failed to sync library")}},500);return()=>clearTimeout(d)},[a,i]),g.useEffect(()=>{const d=re.getState(),m=s.length+Object.values(l).flat().length;if(m>0&&d.shufflePool.length===0)try{d.refreshShufflePool()}catch{}else m===0&&setTimeout(async()=>{const x=re.getState();if(!(x.songs.length+Object.values(x.genreSongs).flat().length>0))try{const N=(await $.getSongs({limit:1})).TotalRecordCount||1e3,h=[];for(let k=0;k<3;k++){const E=Math.floor(Math.random()*N);h.push(E)}const p=h.map(k=>$.getSongs({limit:1,sortBy:["SortName"],sortOrder:"Ascending",startIndex:k})),w=(await Promise.all(p)).flatMap(k=>k.Items||[]);if(w.length>0){const k=w.map(E=>({Id:E.Id,Name:E.Name,AlbumArtist:E.AlbumArtist,ArtistItems:E.ArtistItems,Album:E.Album,AlbumId:E.AlbumId,IndexNumber:E.IndexNumber,ProductionYear:E.ProductionYear,PremiereDate:E.PremiereDate,RunTimeTicks:E.RunTimeTicks,Genres:E.Genres}));re.setState({songs:k,shufflePool:Ze(k),lastPoolUpdate:Date.now()})}}catch{}},300)},[s.length,l]),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed top-0 right-0 bg-black z-50 pointer-events-none left-0 lg:left-8",style:{height:"env(safe-area-inset-top)",top:o!=="idle"?"28px":"0px"}}),u.jsx(pv,{}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none lg:hidden",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),u.jsx("div",{className:"fixed top-0 left-0 bottom-0 bg-black z-30 pointer-events-none hidden lg:block",style:{width:"4rem"}}),u.jsxs("div",{className:`main-scrollable h-screen bg-black text-white lg:pl-16 transition-[padding] duration-300 ${c?"sidebar-open-padding":""}`,style:{paddingBottom:"calc(6rem + env(safe-area-inset-bottom))",paddingTop:o!=="idle"?"28px":"0",overflowY:"auto",overflowX:"hidden",maxWidth:"100vw",width:"100%",scrollbarGutter:"stable"},children:[u.jsx("div",{className:`w-full mx-auto lg:flex lg:justify-center ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:u.jsx("div",{className:`w-full ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:e})}),u.jsx(hv,{}),u.jsx(Gy,{})]}),u.jsx(kv,{})]})}function Nv(){const{pathname:e}=en();return g.useEffect(()=>{const t=document.querySelector(".main-scrollable");t&&t.scrollTo({top:0,behavior:"auto"})},[e]),null}const Ev=g.memo(function({toast:t}){const{removeToast:n}=De(),r={success:u.jsx($1,{className:"w-4 h-4"}),error:u.jsx(Qm,{className:"w-4 h-4"}),info:u.jsx(ty,{className:"w-4 h-4"})},s={success:"bg-zinc-900 border border-zinc-700",error:"bg-red-900/90 border border-red-700",info:"bg-zinc-900 border border-zinc-700"};return u.jsxs("div",{className:`${s[t.type]} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px] max-w-[320px] animate-slide-up`,role:"alert",children:[u.jsx("span",{className:"flex-shrink-0",children:r[t.type]}),u.jsx("span",{className:"flex-1 text-sm font-medium",children:t.message}),u.jsx("button",{onClick:()=>n(t.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Dismiss notification",children:u.jsx(nr,{className:"w-4 h-4"})})]})});function cd(){const{toasts:e}=De();return tu.createPortal(u.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-[99999] flex flex-col gap-2 items-center pointer-events-none",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.map(t=>u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Ev,{toast:t})},t.id))}),document.body)}class Cv extends g.Component{constructor(n){super(n);Et(this,"handleReset",()=>{var n,r;this.setState({hasError:!1,error:null}),(r=(n=this.props).onReset)==null||r.call(n)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){_.error(`[${this.props.componentName||"Component"}] Error:`,n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:u.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center bg-zinc-900/50 rounded-lg border border-zinc-800",children:[u.jsx(Qm,{className:"w-8 h-8 text-red-400 mb-3"}),u.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Something went wrong",this.props.componentName?` in ${this.props.componentName}`:"","."]}),u.jsxs("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)]",children:[u.jsx(ss,{className:"w-4 h-4"}),"Try again"]})]}):this.props.children}}function Pv(){const{serverUrl:e,accessToken:t,userId:n,isAuthenticated:r}=we(),s=Qe(o=>o.localServerUrl),l=g.useRef(null);g.useEffect(()=>{if(!r||!e||!t||!n)return;const o=Io()||s;if(!o)return;const a=()=>{au(e,o).then(c=>{c!==$.serverBaseUrl&&$.setCredentials(c,t,n)})};l.current&&clearTimeout(l.current),l.current=setTimeout(a,1e3);const i=()=>{document.visibilityState==="visible"&&a()};return document.addEventListener("visibilitychange",i),()=>{l.current&&clearTimeout(l.current),document.removeEventListener("visibilitychange",i)}},[r,e,t,n,s])}const jv=g.lazy(()=>tt(()=>import("./HomePage-DOWCgPWr.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),bv=g.lazy(()=>tt(()=>import("./ArtistsPage-BSadw5FW.js"),__vite__mapDeps([7,8,5,4,1,2,3,9]))),Tv=g.lazy(()=>tt(()=>import("./AlbumsPage-DP6cLaAS.js"),__vite__mapDeps([10,8,5,4,1,2,3,11,9]))),Av=g.lazy(()=>tt(()=>import("./SongsPage-D-3CzdVI.js"),__vite__mapDeps([12,13,8,5,4,1,2,3,9]))),Rv=g.lazy(()=>tt(()=>import("./GenresPage-CVukQeaP.js"),__vite__mapDeps([14,15,3]))),_v=g.lazy(()=>tt(()=>import("./PlaylistsPage-CPDwQf-a.js"),__vite__mapDeps([16,1,2,3,9]))),dd=g.lazy(()=>tt(()=>import("./PlaylistDetailPage-xF_NN7oZ.js"),__vite__mapDeps([17,11,18,6,9]))),Mv=g.lazy(()=>tt(()=>import("./SettingsPage-BVMPGns8.js"),__vite__mapDeps([19,18,20]))),Lv=g.lazy(()=>tt(()=>import("./ArtistDetailPage-WeNv3HJQ.js"),__vite__mapDeps([21,11,18,6,22,9]))),zv=g.lazy(()=>tt(()=>import("./AlbumDetailPage-CjGI2tnW.js"),__vite__mapDeps([23,18,6,22]))),$v=g.lazy(()=>tt(()=>import("./GenreSongsPage-pF_lZ2yM.js"),__vite__mapDeps([24,11,13,8,5,18,9]))),Uv=g.lazy(()=>tt(()=>import("./StatsPage--AxOivbe.js"),__vite__mapDeps([25,26,20,15]))),Dv=g.lazy(()=>tt(()=>import("./SongDetailPage-B1gFKwL4.js"),__vite__mapDeps([27,18,6,26,2,3])));function Ov(){return u.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:u.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-color)] border-t-transparent rounded-full animate-spin"})})}function at(e,t){return u.jsx(Cv,{componentName:t,children:e})}function Fv(){const{isAuthenticated:e,logout:t}=we(),{pageVisibility:n}=Qe();return Pv(),g.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?u.jsxs(u.Fragment,{children:[u.jsxs(Cg,{children:[u.jsx(Nv,{}),u.jsx(Iv,{children:u.jsx(g.Suspense,{fallback:u.jsx(Ov,{}),children:u.jsxs(vg,{children:[u.jsx(Je,{path:"/",element:at(u.jsx(jv,{}),"Home")}),u.jsx(Je,{path:"/song/:id",element:at(u.jsx(Dv,{}),"Song")}),u.jsx(Je,{path:"/mood/:moodValue",element:at(u.jsx(dd,{}),"Mood")}),u.jsx(Je,{path:"/settings",element:at(u.jsx(Mv,{}),"Settings")}),n.artists&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/artists",element:at(u.jsx(bv,{}),"Artists")}),u.jsx(Je,{path:"/artist/:id",element:at(u.jsx(Lv,{}),"Artist")})]}),n.albums&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/albums",element:at(u.jsx(Tv,{}),"Albums")}),u.jsx(Je,{path:"/album/:id",element:at(u.jsx(zv,{}),"Album")})]}),n.songs&&u.jsx(Je,{path:"/songs",element:at(u.jsx(Av,{}),"Songs")}),n.genres&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/genres",element:at(u.jsx(Rv,{}),"Genres")}),u.jsx(Je,{path:"/genre/:id",element:at(u.jsx($v,{}),"Genre")})]}),n.playlists&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/playlists",element:at(u.jsx(_v,{}),"Playlists")}),u.jsx(Je,{path:"/playlist/:id",element:at(u.jsx(dd,{}),"Playlist")})]}),n.stats&&u.jsx(u.Fragment,{children:u.jsx(Je,{path:"/stats",element:at(u.jsx(Uv,{}),"Stats")})}),u.jsx(Je,{path:"*",element:u.jsx(gg,{to:"/",replace:!0})})]})})})]}),u.jsx(cd,{})]}):u.jsxs(u.Fragment,{children:[u.jsx(By,{}),u.jsx(cd,{})]})}class Bv extends g.Component{constructor(){super(...arguments);Et(this,"state",{hasError:!1,error:null,showCopied:!1});Et(this,"handleCopyError",async()=>{var r,s;const n=`Error: ${(r=this.state.error)==null?void 0:r.message}

Stack: ${((s=this.state.error)==null?void 0:s.stack)||"N/A"}`;try{await navigator.clipboard.writeText(n),this.setState({showCopied:!0}),setTimeout(()=>this.setState({showCopied:!1}),2e3)}catch{}});Et(this,"handleReload",()=>{window.location.reload()});Et(this,"handleClearAndReload",()=>{localStorage.clear(),indexedDB.deleteDatabase("tunetuna-storage"),window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){_.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center max-w-md",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:u.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"The app encountered an unexpected error. You can try reloading, or clear data if the issue persists."}),u.jsx("div",{className:"bg-zinc-900 rounded-lg p-3 mb-4 text-left",children:u.jsx("p",{className:"text-red-400 text-sm font-mono break-all",children:((n=this.state.error)==null?void 0:n.message)||"Unknown error"})}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("button",{onClick:this.handleReload,className:"w-full bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-3 px-4 rounded-lg transition-all",children:"Reload App"}),u.jsx("button",{onClick:this.handleClearAndReload,className:"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"}),u.jsx("button",{onClick:this.handleCopyError,className:"w-full text-gray-400 hover:text-white py-2 px-4 text-sm transition-colors",children:this.state.showCopied?" Copied to clipboard":"Copy error details"})]})]})}):this.props.children}}aa.createRoot(document.getElementById("root")).render(u.jsx(ci.StrictMode,{children:u.jsx(Bv,{children:u.jsx(Fv,{})})}));const Vv=async()=>{try{const e=await navigator.serviceWorker.getRegistration();e&&(e.waiting&&(_.log("New app version available, activating..."),e.waiting.postMessage({type:"SKIP_WAITING"})),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&_.log("New app version installed and ready")})}))}catch{}};"serviceWorker"in navigator&&Vv();export{E1 as $,ov as A,tu as B,qm as C,iu as D,Ln as E,Xv as F,jl as G,dl as H,$s as I,qv as J,Hv as K,Wm as L,uu as M,en as N,De as O,od as P,zs as Q,Us as R,jr as S,Wv as T,no as U,K1 as V,we as W,nr as X,He as Y,Ge as Z,Vm as _,te as a,Io as a0,ss as a1,nd as a2,by as a3,Ay as a4,Gm as a5,Kv as a6,ea as a7,D1 as a8,ci as a9,L1 as aa,Br as b,Z as c,Qv as d,$ as e,iv as f,Yv as g,Qe as h,hu as i,u as j,ex as k,_ as l,tx as m,sx as n,Ky as o,rx as p,Jy as q,g as r,nx as s,Zv as t,re as u,Jv as v,id as w,i1 as x,cy as y,yy as z};
