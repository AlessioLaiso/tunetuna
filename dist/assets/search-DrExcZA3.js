import{r as f,j as m,f as b,n as a}from"./index-CB1tZ40M.js";const C=f.forwardRef(({value:e,onChange:l,placeholder:o="Search...",debounceMs:n=150,showClearButton:u=!1,onClear:p},i)=>{const[d,A]=f.useState(e),r=f.useRef(l),w=f.useRef(null),L=s=>{w.current=s,typeof i=="function"?i(s):i&&(i.current=s)};return f.useEffect(()=>{r.current=l},[l]),f.useEffect(()=>{const s=setTimeout(()=>{r.current(d)},n);return()=>clearTimeout(s)},[d,n]),f.useEffect(()=>{e===""&&d!==""&&A(e)},[e]),m.jsxs("div",{className:"relative",children:[m.jsx("input",{ref:L,type:"text",value:d,onChange:s=>{A(s.target.value)},placeholder:o,className:"w-full px-4 py-2 pl-10 pr-10 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),m.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),m.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),A(""),p&&p(),setTimeout(()=>{var x;(x=w.current)==null||x.focus()},0)},className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-opacity ${u&&d?"text-gray-400 hover:text-white opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-label":"Clear search",type:"button",children:m.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})});C.displayName="SearchInput";async function E(e,l){var S,I,R,j;const o=await b.search(e,l);let n=((S=o.Songs)==null?void 0:S.Items)||[],u=((I=o.Albums)==null?void 0:I.Items)||[],p=((R=o.Artists)==null?void 0:R.Items)||[],i=((j=o.Playlists)==null?void 0:j.Items)||[];if(!(n.length>0||u.length>0||p.length>0||i.length>0)&&e.trim().length>0){const t=await k(l);n=t.songs,u=t.albums,p=t.artists,i=t.playlists}const r=a(e).toLowerCase().trim(),w=n.filter(t=>{var y,g,v;if(a(t.Name||"").toLowerCase().includes(r))return!0;const h=[];return t.AlbumArtist&&h.push(a(t.AlbumArtist)),(y=t.AlbumArtists)!=null&&y.length&&h.push(...t.AlbumArtists.map(c=>a(c.Name||"")).filter(Boolean)),(g=t.ArtistItems)!=null&&g.length&&h.push(...t.ArtistItems.map(c=>a(c.Name||"")).filter(Boolean)),!!(h.some(c=>c.toLowerCase().includes(r))||(v=t.Genres)!=null&&v.some(c=>a(c).toLowerCase().includes(r)))}),L=p.filter(t=>a(t.Name||"").toLowerCase().includes(r)),s=u.filter(t=>{var y,g;const N=a(t.Name||""),h=a(t.AlbumArtist||((g=(y=t.ArtistItems)==null?void 0:y[0])==null?void 0:g.Name)||"");return N.toLowerCase().includes(r)||h.toLowerCase().includes(r)}),x=i.filter(t=>a(t.Name||"").toLowerCase().includes(r));return{artists:L,albums:s,playlists:x,songs:w}}async function k(e){const[l,o,n,u]=await Promise.all([b.getArtists({limit:e}),b.getAlbums({limit:e}),b.getPlaylists({limit:e}),b.getSongs({limit:e})]);return{artists:l.Items||[],albums:o.Items||[],playlists:n.Items||[],songs:u.Items||[]}}export{C as S,k as f,E as u};
