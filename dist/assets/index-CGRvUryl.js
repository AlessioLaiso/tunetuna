const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-Fj5NXqS7.js","assets/search-CLKUzEQC.js","assets/tag-qu5Bmic4.js","assets/piano-D_6wLoPK.js","assets/useSearch-BXbJ8ylv.js","assets/chevron-right-CLb5gNRg.js","assets/ellipsis-BwAsU9Jn.js","assets/ArtistsPage-CR9FByOS.js","assets/Pagination-BqnPUhVO.js","assets/arrow-up-down-Oh2KK2ce.js","assets/AlbumsPage-BHOqG7DP.js","assets/useScrollLazyLoad-Cgh5pZ3-.js","assets/SongsPage-51mKB8-L.js","assets/SongItem-0LAdyBrX.js","assets/GenresPage-bNrJvUd9.js","assets/flame-DLwu42Y_.js","assets/PlaylistsPage-BRiEOkNU.js","assets/PlaylistDetailPage-CuNJwbHY.js","assets/arrow-left-CwuGyWtl.js","assets/SettingsPage-BT13vuGK.js","assets/ArtistDetailPage-BCA3-ocJ.js","assets/chevron-up-BE0abVjt.js","assets/AlbumDetailPage-Bwr_l3VC.js","assets/GenreSongsPage-ygXneRI5.js","assets/StatsPage-Dg7iTAmC.js","assets/clock-Ceo-OiCJ.js","assets/SongDetailPage-Cc6_0te7.js"])))=>i.map(i=>d[i]);
var $h=Object.defineProperty;var Uh=(e,t,n)=>t in e?$h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Nt=(e,t,n)=>Uh(e,typeof t!="symbol"?t+"":t,n);function Dh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function td(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nd={exports:{}},Jl={},rd={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs=Symbol.for("react.element"),Oh=Symbol.for("react.portal"),Fh=Symbol.for("react.fragment"),Bh=Symbol.for("react.strict_mode"),Vh=Symbol.for("react.profiler"),Gh=Symbol.for("react.provider"),Hh=Symbol.for("react.context"),Qh=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),qh=Symbol.for("react.memo"),Yh=Symbol.for("react.lazy"),iu=Symbol.iterator;function Kh(e){return e===null||typeof e!="object"?null:(e=iu&&e[iu]||e["@@iterator"],typeof e=="function"?e:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ld=Object.assign,od={};function Lr(e,t,n){this.props=e,this.context=t,this.refs=od,this.updater=n||sd}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ad(){}ad.prototype=Lr.prototype;function Xa(e,t,n){this.props=e,this.context=t,this.refs=od,this.updater=n||sd}var Ja=Xa.prototype=new ad;Ja.constructor=Xa;ld(Ja,Lr.prototype);Ja.isPureReactComponent=!0;var uu=Array.isArray,id=Object.prototype.hasOwnProperty,Za={current:null},ud={key:!0,ref:!0,__self:!0,__source:!0};function cd(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)id.call(t,r)&&!ud.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var i=Array(a),c=0;c<a;c++)i[c]=arguments[c+2];s.children=i}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:zs,type:e,key:l,ref:o,props:s,_owner:Za.current}}function Xh(e,t){return{$$typeof:zs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ei(e){return typeof e=="object"&&e!==null&&e.$$typeof===zs}function Jh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cu=/\/+/g;function xo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jh(""+e.key):t.toString(36)}function cl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case zs:case Oh:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+xo(o,0):r,uu(s)?(n="",e!=null&&(n=e.replace(cu,"$&/")+"/"),cl(s,t,n,"",function(c){return c})):s!=null&&(ei(s)&&(s=Xh(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",uu(e))for(var a=0;a<e.length;a++){l=e[a];var i=r+xo(l,a);o+=cl(l,t,n,i,s)}else if(i=Kh(e),typeof i=="function")for(e=i.call(e),a=0;!(l=e.next()).done;)l=l.value,i=r+xo(l,a++),o+=cl(l,t,n,i,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bs(e,t,n){if(e==null)return e;var r=[],s=0;return cl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Zh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var it={current:null},dl={transition:null},em={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:dl,ReactCurrentOwner:Za};function dd(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Bs,forEach:function(e,t,n){Bs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bs(e,function(){t++}),t},toArray:function(e){return Bs(e,function(t){return t})||[]},only:function(e){if(!ei(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Lr;oe.Fragment=Fh;oe.Profiler=Vh;oe.PureComponent=Xa;oe.StrictMode=Bh;oe.Suspense=Wh;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=em;oe.act=dd;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ld({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Za.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(i in t)id.call(t,i)&&!ud.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&a!==void 0?a[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){a=Array(i);for(var c=0;c<i;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zs,type:e.type,key:s,ref:l,props:r,_owner:o}};oe.createContext=function(e){return e={$$typeof:Hh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Gh,_context:e},e.Consumer=e};oe.createElement=cd;oe.createFactory=function(e){var t=cd.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:Qh,render:e}};oe.isValidElement=ei;oe.lazy=function(e){return{$$typeof:Yh,_payload:{_status:-1,_result:e},_init:Zh}};oe.memo=function(e,t){return{$$typeof:qh,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=dl.transition;dl.transition={};try{e()}finally{dl.transition=t}};oe.unstable_act=dd;oe.useCallback=function(e,t){return it.current.useCallback(e,t)};oe.useContext=function(e){return it.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return it.current.useDeferredValue(e)};oe.useEffect=function(e,t){return it.current.useEffect(e,t)};oe.useId=function(){return it.current.useId()};oe.useImperativeHandle=function(e,t,n){return it.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return it.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return it.current.useReducer(e,t,n)};oe.useRef=function(e){return it.current.useRef(e)};oe.useState=function(e){return it.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return it.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return it.current.useTransition()};oe.version="18.3.1";rd.exports=oe;var g=rd.exports;const ti=td(g),tm=Dh({__proto__:null,default:ti},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=g,rm=Symbol.for("react.element"),sm=Symbol.for("react.fragment"),lm=Object.prototype.hasOwnProperty,om=nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,am={key:!0,ref:!0,__self:!0,__source:!0};function fd(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)lm.call(t,r)&&!am.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:rm,type:e,key:l,ref:o,props:s,_owner:om.current}}Jl.Fragment=sm;Jl.jsx=fd;Jl.jsxs=fd;nd.exports=Jl;var u=nd.exports,Jo={},hd={exports:{}},kt={},md={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,L){var V=j.length;j.push(L);e:for(;0<V;){var se=V-1>>>1,ce=j[se];if(0<s(ce,L))j[se]=L,j[V]=ce,V=se;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var L=j[0],V=j.pop();if(V!==L){j[0]=V;e:for(var se=0,ce=j.length,xe=ce>>>1;se<xe;){var me=2*(se+1)-1,ct=j[me],pe=me+1,Re=j[pe];if(0>s(ct,V))pe<ce&&0>s(Re,ct)?(j[se]=Re,j[pe]=V,se=pe):(j[se]=ct,j[me]=V,se=me);else if(pe<ce&&0>s(Re,V))j[se]=Re,j[pe]=V,se=pe;else break e}}return L}function s(j,L){var V=j.sortIndex-L.sortIndex;return V!==0?V:j.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var i=[],c=[],f=1,d=null,h=3,x=!1,v=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=j)r(c),L.sortIndex=L.expirationTime,t(i,L);else break;L=n(c)}}function w(j){if(S=!1,y(j),!v)if(n(i)!==null)v=!0,le(I);else{var L=n(c);L!==null&&ae(w,L.startTime-j)}}function I(j,L){v=!1,S&&(S=!1,m(C),C=-1),x=!0;var V=h;try{for(y(L),d=n(i);d!==null&&(!(d.expirationTime>L)||j&&!Q());){var se=d.callback;if(typeof se=="function"){d.callback=null,h=d.priorityLevel;var ce=se(d.expirationTime<=L);L=e.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(i)&&r(i),y(L)}else r(i);d=n(i)}if(d!==null)var xe=!0;else{var me=n(c);me!==null&&ae(w,me.startTime-L),xe=!1}return xe}finally{d=null,h=V,x=!1}}var N=!1,k=null,C=-1,T=5,P=-1;function Q(){return!(e.unstable_now()-P<T)}function K(){if(k!==null){var j=e.unstable_now();P=j;var L=!0;try{L=k(!0,j)}finally{L?J():(N=!1,k=null)}}else N=!1}var J;if(typeof p=="function")J=function(){p(K)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Z=R.port2;R.port1.onmessage=K,J=function(){Z.postMessage(null)}}else J=function(){E(K,0)};function le(j){k=j,N||(N=!0,J())}function ae(j,L){C=E(function(){j(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,le(I))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var V=h;h=L;try{return j()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,L){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var V=h;h=j;try{return L()}finally{h=V}},e.unstable_scheduleCallback=function(j,L,V){var se=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?se+V:se):V=se,j){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=V+ce,j={id:f++,callback:L,priorityLevel:j,startTime:V,expirationTime:ce,sortIndex:-1},V>se?(j.sortIndex=V,t(c,j),n(i)===null&&j===n(c)&&(S?(m(C),C=-1):S=!0,ae(w,V-se))):(j.sortIndex=ce,t(i,j),v||x||(v=!0,le(I))),j},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(j){var L=h;return function(){var V=h;h=L;try{return j.apply(this,arguments)}finally{h=V}}}})(pd);md.exports=pd;var im=md.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um=g,St=im;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,fs={};function tr(e,t){Pr(e,t),Pr(e+"Capture",t)}function Pr(e,t){for(fs[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=Object.prototype.hasOwnProperty,cm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,du={},fu={};function dm(e){return Zo.call(fu,e)?!0:Zo.call(du,e)?!1:cm.test(e)?fu[e]=!0:(du[e]=!0,!1)}function fm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hm(e,t,n,r){if(t===null||typeof t>"u"||fm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var ni=/[\-:]([a-z])/g;function ri(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ni,ri);Xe[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ni,ri);Xe[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ni,ri);Xe[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function si(e,t,n,r){var s=Xe.hasOwnProperty(t)?Xe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hm(t,n,s,r)&&(n=null),r||s===null?dm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var cn=um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),ir=Symbol.for("react.portal"),ur=Symbol.for("react.fragment"),li=Symbol.for("react.strict_mode"),ea=Symbol.for("react.profiler"),yd=Symbol.for("react.provider"),vd=Symbol.for("react.context"),oi=Symbol.for("react.forward_ref"),ta=Symbol.for("react.suspense"),na=Symbol.for("react.suspense_list"),ai=Symbol.for("react.memo"),gn=Symbol.for("react.lazy"),xd=Symbol.for("react.offscreen"),hu=Symbol.iterator;function Br(e){return e===null||typeof e!="object"?null:(e=hu&&e[hu]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,wo;function Kr(e){if(wo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wo=t&&t[1]||""}return`
`+wo+e}var So=!1;function ko(e,t){if(!e||So)return"";So=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,a=l.length-1;1<=o&&0<=a&&s[o]!==l[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==l[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==l[a]){var i=`
`+s[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=a);break}}}finally{So=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Kr(e):""}function mm(e){switch(e.tag){case 5:return Kr(e.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return e=ko(e.type,!1),e;case 11:return e=ko(e.type.render,!1),e;case 1:return e=ko(e.type,!0),e;default:return""}}function ra(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ur:return"Fragment";case ir:return"Portal";case ea:return"Profiler";case li:return"StrictMode";case ta:return"Suspense";case na:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vd:return(e.displayName||"Context")+".Consumer";case yd:return(e._context.displayName||"Context")+".Provider";case oi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ai:return t=e.displayName||null,t!==null?t:ra(e.type)||"Memo";case gn:t=e._payload,e=e._init;try{return ra(e(t))}catch{}}return null}function pm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ra(t);case 8:return t===li?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _n(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gm(e){var t=wd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gs(e){e._valueTracker||(e._valueTracker=gm(e))}function Sd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Nl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sa(e,t){var n=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function mu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_n(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kd(e,t){t=t.checked,t!=null&&si(e,"checked",t,!1)}function la(e,t){kd(e,t);var n=_n(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oa(e,t.type,n):t.hasOwnProperty("defaultValue")&&oa(e,t.type,_n(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function oa(e,t,n){(t!=="number"||Nl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Xr=Array.isArray;function wr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_n(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function aa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(b(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(b(92));if(Xr(n)){if(1<n.length)throw Error(b(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_n(n)}}function Id(e,t){var n=_n(t.value),r=_n(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ia(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hs,Ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hs=Hs||document.createElement("div"),Hs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ym=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(e){ym.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ns[t]=ns[e]})});function Cd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ns.hasOwnProperty(e)&&ns[e]?(""+t).trim():t+"px"}function Pd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Cd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var vm=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ua(e,t){if(t){if(vm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(b(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(b(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(b(61))}if(t.style!=null&&typeof t.style!="object")throw Error(b(62))}}function ca(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var da=null;function ii(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fa=null,Sr=null,kr=null;function vu(e){if(e=Ds(e)){if(typeof fa!="function")throw Error(b(280));var t=e.stateNode;t&&(t=ro(t),fa(e.stateNode,e.type,t))}}function jd(e){Sr?kr?kr.push(e):kr=[e]:Sr=e}function bd(){if(Sr){var e=Sr,t=kr;if(kr=Sr=null,vu(e),t)for(e=0;e<t.length;e++)vu(t[e])}}function Td(e,t){return e(t)}function Ad(){}var Io=!1;function Rd(e,t,n){if(Io)return e(t,n);Io=!0;try{return Td(e,t,n)}finally{Io=!1,(Sr!==null||kr!==null)&&(Ad(),bd())}}function ms(e,t){var n=e.stateNode;if(n===null)return null;var r=ro(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var ha=!1;if(ln)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){ha=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{ha=!1}function xm(e,t,n,r,s,l,o,a,i){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var rs=!1,El=null,Cl=!1,ma=null,wm={onError:function(e){rs=!0,El=e}};function Sm(e,t,n,r,s,l,o,a,i){rs=!1,El=null,xm.apply(wm,arguments)}function km(e,t,n,r,s,l,o,a,i){if(Sm.apply(this,arguments),rs){if(rs){var c=El;rs=!1,El=null}else throw Error(b(198));Cl||(Cl=!0,ma=c)}}function nr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xu(e){if(nr(e)!==e)throw Error(b(188))}function Im(e){var t=e.alternate;if(!t){if(t=nr(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return xu(s),e;if(l===r)return xu(s),t;l=l.sibling}throw Error(b(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=l;break}if(a===r){o=!0,r=s,n=l;break}a=a.sibling}if(!o){for(a=l.child;a;){if(a===n){o=!0,n=l,r=s;break}if(a===r){o=!0,r=l,n=s;break}a=a.sibling}if(!o)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function Md(e){return e=Im(e),e!==null?Ld(e):null}function Ld(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ld(e);if(t!==null)return t;e=e.sibling}return null}var zd=St.unstable_scheduleCallback,wu=St.unstable_cancelCallback,Nm=St.unstable_shouldYield,Em=St.unstable_requestPaint,Te=St.unstable_now,Cm=St.unstable_getCurrentPriorityLevel,ui=St.unstable_ImmediatePriority,$d=St.unstable_UserBlockingPriority,Pl=St.unstable_NormalPriority,Pm=St.unstable_LowPriority,Ud=St.unstable_IdlePriority,Zl=null,Wt=null;function jm(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Zl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Am,bm=Math.log,Tm=Math.LN2;function Am(e){return e>>>=0,e===0?32:31-(bm(e)/Tm|0)|0}var Qs=64,Ws=4194304;function Jr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Jr(a):(l&=o,l!==0&&(r=Jr(l)))}else o=n&~s,o!==0?r=Jr(o):l!==0&&(r=Jr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ut(t),s=1<<n,r|=e[n],t&=~s;return r}function Rm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _m(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Ut(l),a=1<<o,i=s[o];i===-1?(!(a&n)||a&r)&&(s[o]=Rm(a,t)):i<=t&&(e.expiredLanes|=a),l&=~a}}function pa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dd(){var e=Qs;return Qs<<=1,!(Qs&4194240)&&(Qs=64),e}function No(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $s(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=n}function Mm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ut(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function ci(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ut(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function Od(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fd,di,Bd,Vd,Gd,ga=!1,qs=[],In=null,Nn=null,En=null,ps=new Map,gs=new Map,vn=[],Lm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Su(e,t){switch(e){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(t.pointerId)}}function Gr(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Ds(t),t!==null&&di(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function zm(e,t,n,r,s){switch(t){case"focusin":return In=Gr(In,e,t,n,r,s),!0;case"dragenter":return Nn=Gr(Nn,e,t,n,r,s),!0;case"mouseover":return En=Gr(En,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return ps.set(l,Gr(ps.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,gs.set(l,Gr(gs.get(l)||null,e,t,n,r,s)),!0}return!1}function Hd(e){var t=Gn(e.target);if(t!==null){var n=nr(t);if(n!==null){if(t=n.tag,t===13){if(t=_d(n),t!==null){e.blockedOn=t,Gd(e.priority,function(){Bd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ya(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);da=r,n.target.dispatchEvent(r),da=null}else return t=Ds(n),t!==null&&di(t),e.blockedOn=n,!1;t.shift()}return!0}function ku(e,t,n){fl(e)&&n.delete(t)}function $m(){ga=!1,In!==null&&fl(In)&&(In=null),Nn!==null&&fl(Nn)&&(Nn=null),En!==null&&fl(En)&&(En=null),ps.forEach(ku),gs.forEach(ku)}function Hr(e,t){e.blockedOn===t&&(e.blockedOn=null,ga||(ga=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,$m)))}function ys(e){function t(s){return Hr(s,e)}if(0<qs.length){Hr(qs[0],e);for(var n=1;n<qs.length;n++){var r=qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(In!==null&&Hr(In,e),Nn!==null&&Hr(Nn,e),En!==null&&Hr(En,e),ps.forEach(t),gs.forEach(t),n=0;n<vn.length;n++)r=vn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<vn.length&&(n=vn[0],n.blockedOn===null);)Hd(n),n.blockedOn===null&&vn.shift()}var Ir=cn.ReactCurrentBatchConfig,bl=!0;function Um(e,t,n,r){var s=ye,l=Ir.transition;Ir.transition=null;try{ye=1,fi(e,t,n,r)}finally{ye=s,Ir.transition=l}}function Dm(e,t,n,r){var s=ye,l=Ir.transition;Ir.transition=null;try{ye=4,fi(e,t,n,r)}finally{ye=s,Ir.transition=l}}function fi(e,t,n,r){if(bl){var s=ya(e,t,n,r);if(s===null)Mo(e,t,r,Tl,n),Su(e,r);else if(zm(s,e,t,n,r))r.stopPropagation();else if(Su(e,r),t&4&&-1<Lm.indexOf(e)){for(;s!==null;){var l=Ds(s);if(l!==null&&Fd(l),l=ya(e,t,n,r),l===null&&Mo(e,t,r,Tl,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Mo(e,t,r,null,n)}}var Tl=null;function ya(e,t,n,r){if(Tl=null,e=ii(r),e=Gn(e),e!==null)if(t=nr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tl=e,null}function Qd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cm()){case ui:return 1;case $d:return 4;case Pl:case Pm:return 16;case Ud:return 536870912;default:return 16}default:return 16}}var wn=null,hi=null,hl=null;function Wd(){if(hl)return hl;var e,t=hi,n=t.length,r,s="value"in wn?wn.value:wn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return hl=s.slice(e,1<r?1-r:void 0)}function ml(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ys(){return!0}function Iu(){return!1}function It(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ys:Iu,this.isPropagationStopped=Iu,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),t}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=It(zr),Us=Ee({},zr,{view:0,detail:0}),Om=It(Us),Eo,Co,Qr,eo=Ee({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(Eo=e.screenX-Qr.screenX,Co=e.screenY-Qr.screenY):Co=Eo=0,Qr=e),Eo)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),Nu=It(eo),Fm=Ee({},eo,{dataTransfer:0}),Bm=It(Fm),Vm=Ee({},Us,{relatedTarget:0}),Po=It(Vm),Gm=Ee({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hm=It(Gm),Qm=Ee({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wm=It(Qm),qm=Ee({},zr,{data:0}),Eu=It(qm),Ym={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Km={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xm[e])?!!t[e]:!1}function pi(){return Jm}var Zm=Ee({},Us,{key:function(e){if(e.key){var t=Ym[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Km[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(e){return e.type==="keypress"?ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ep=It(Zm),tp=Ee({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cu=It(tp),np=Ee({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),rp=It(np),sp=Ee({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),lp=It(sp),op=Ee({},eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ap=It(op),ip=[9,13,27,32],gi=ln&&"CompositionEvent"in window,ss=null;ln&&"documentMode"in document&&(ss=document.documentMode);var up=ln&&"TextEvent"in window&&!ss,qd=ln&&(!gi||ss&&8<ss&&11>=ss),Pu=" ",ju=!1;function Yd(e,t){switch(e){case"keyup":return ip.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cr=!1;function cp(e,t){switch(e){case"compositionend":return Kd(t);case"keypress":return t.which!==32?null:(ju=!0,Pu);case"textInput":return e=t.data,e===Pu&&ju?null:e;default:return null}}function dp(e,t){if(cr)return e==="compositionend"||!gi&&Yd(e,t)?(e=Wd(),hl=hi=wn=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qd&&t.locale!=="ko"?null:t.data;default:return null}}var fp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fp[e.type]:t==="textarea"}function Xd(e,t,n,r){jd(r),t=Al(t,"onChange"),0<t.length&&(n=new mi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ls=null,vs=null;function hp(e){uf(e,0)}function to(e){var t=hr(e);if(Sd(t))return e}function mp(e,t){if(e==="change")return t}var Jd=!1;if(ln){var jo;if(ln){var bo="oninput"in document;if(!bo){var Tu=document.createElement("div");Tu.setAttribute("oninput","return;"),bo=typeof Tu.oninput=="function"}jo=bo}else jo=!1;Jd=jo&&(!document.documentMode||9<document.documentMode)}function Au(){ls&&(ls.detachEvent("onpropertychange",Zd),vs=ls=null)}function Zd(e){if(e.propertyName==="value"&&to(vs)){var t=[];Xd(t,vs,e,ii(e)),Rd(hp,t)}}function pp(e,t,n){e==="focusin"?(Au(),ls=t,vs=n,ls.attachEvent("onpropertychange",Zd)):e==="focusout"&&Au()}function gp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return to(vs)}function yp(e,t){if(e==="click")return to(t)}function vp(e,t){if(e==="input"||e==="change")return to(t)}function xp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:xp;function xs(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zo.call(t,s)||!Ot(e[s],t[s]))return!1}return!0}function Ru(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _u(e,t){var n=Ru(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ru(n)}}function ef(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ef(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tf(){for(var e=window,t=Nl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Nl(e.document)}return t}function yi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wp(e){var t=tf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ef(n.ownerDocument.documentElement,n)){if(r!==null&&yi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=_u(n,l);var o=_u(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Sp=ln&&"documentMode"in document&&11>=document.documentMode,dr=null,va=null,os=null,xa=!1;function Mu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xa||dr==null||dr!==Nl(r)||(r=dr,"selectionStart"in r&&yi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),os&&xs(os,r)||(os=r,r=Al(va,"onSelect"),0<r.length&&(t=new mi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dr)))}function Ks(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},To={},nf={};ln&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function no(e){if(To[e])return To[e];if(!fr[e])return e;var t=fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nf)return To[e]=t[n];return e}var rf=no("animationend"),sf=no("animationiteration"),lf=no("animationstart"),of=no("transitionend"),af=new Map,Lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(e,t){af.set(e,t),tr(t,[e])}for(var Ao=0;Ao<Lu.length;Ao++){var Ro=Lu[Ao],kp=Ro.toLowerCase(),Ip=Ro[0].toUpperCase()+Ro.slice(1);Ln(kp,"on"+Ip)}Ln(rf,"onAnimationEnd");Ln(sf,"onAnimationIteration");Ln(lf,"onAnimationStart");Ln("dblclick","onDoubleClick");Ln("focusin","onFocus");Ln("focusout","onBlur");Ln(of,"onTransitionEnd");Pr("onMouseEnter",["mouseout","mouseover"]);Pr("onMouseLeave",["mouseout","mouseover"]);Pr("onPointerEnter",["pointerout","pointerover"]);Pr("onPointerLeave",["pointerout","pointerover"]);tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Np=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function zu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,km(r,t,void 0,e),e.currentTarget=null}function uf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],i=a.instance,c=a.currentTarget;if(a=a.listener,i!==l&&s.isPropagationStopped())break e;zu(s,a,c),l=i}else for(o=0;o<r.length;o++){if(a=r[o],i=a.instance,c=a.currentTarget,a=a.listener,i!==l&&s.isPropagationStopped())break e;zu(s,a,c),l=i}}}if(Cl)throw e=ma,Cl=!1,ma=null,e}function we(e,t){var n=t[Na];n===void 0&&(n=t[Na]=new Set);var r=e+"__bubble";n.has(r)||(cf(t,e,2,!1),n.add(r))}function _o(e,t,n){var r=0;t&&(r|=4),cf(n,e,r,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function ws(e){if(!e[Xs]){e[Xs]=!0,gd.forEach(function(n){n!=="selectionchange"&&(Np.has(n)||_o(n,!1,e),_o(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,_o("selectionchange",!1,t))}}function cf(e,t,n,r){switch(Qd(t)){case 1:var s=Um;break;case 4:s=Dm;break;default:s=fi}n=s.bind(null,t,n,e),s=void 0,!ha||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Mo(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Gn(a),o===null)return;if(i=o.tag,i===5||i===6){r=l=o;continue e}a=a.parentNode}}r=r.return}Rd(function(){var c=l,f=ii(n),d=[];e:{var h=af.get(e);if(h!==void 0){var x=mi,v=e;switch(e){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":x=ep;break;case"focusin":v="focus",x=Po;break;case"focusout":v="blur",x=Po;break;case"beforeblur":case"afterblur":x=Po;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=rp;break;case rf:case sf:case lf:x=Hm;break;case of:x=lp;break;case"scroll":x=Om;break;case"wheel":x=ap;break;case"copy":case"cut":case"paste":x=Wm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Cu}var S=(t&4)!==0,E=!S&&e==="scroll",m=S?h!==null?h+"Capture":null:h;S=[];for(var p=c,y;p!==null;){y=p;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,m!==null&&(w=ms(p,m),w!=null&&S.push(Ss(p,w,y)))),E)break;p=p.return}0<S.length&&(h=new x(h,v,null,n,f),d.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==da&&(v=n.relatedTarget||n.fromElement)&&(Gn(v)||v[on]))break e;if((x||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=c,v=v?Gn(v):null,v!==null&&(E=nr(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=c),x!==v)){if(S=Nu,w="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(S=Cu,w="onPointerLeave",m="onPointerEnter",p="pointer"),E=x==null?h:hr(x),y=v==null?h:hr(v),h=new S(w,p+"leave",x,n,f),h.target=E,h.relatedTarget=y,w=null,Gn(f)===c&&(S=new S(m,p+"enter",v,n,f),S.target=y,S.relatedTarget=E,w=S),E=w,x&&v)t:{for(S=x,m=v,p=0,y=S;y;y=ar(y))p++;for(y=0,w=m;w;w=ar(w))y++;for(;0<p-y;)S=ar(S),p--;for(;0<y-p;)m=ar(m),y--;for(;p--;){if(S===m||m!==null&&S===m.alternate)break t;S=ar(S),m=ar(m)}S=null}else S=null;x!==null&&$u(d,h,x,S,!1),v!==null&&E!==null&&$u(d,E,v,S,!0)}}e:{if(h=c?hr(c):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var I=mp;else if(bu(h))if(Jd)I=vp;else{I=gp;var N=pp}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=yp);if(I&&(I=I(e,c))){Xd(d,I,n,f);break e}N&&N(e,h,c),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&oa(h,"number",h.value)}switch(N=c?hr(c):window,e){case"focusin":(bu(N)||N.contentEditable==="true")&&(dr=N,va=c,os=null);break;case"focusout":os=va=dr=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,Mu(d,n,f);break;case"selectionchange":if(Sp)break;case"keydown":case"keyup":Mu(d,n,f)}var k;if(gi)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else cr?Yd(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(qd&&n.locale!=="ko"&&(cr||C!=="onCompositionStart"?C==="onCompositionEnd"&&cr&&(k=Wd()):(wn=f,hi="value"in wn?wn.value:wn.textContent,cr=!0)),N=Al(c,C),0<N.length&&(C=new Eu(C,e,null,n,f),d.push({event:C,listeners:N}),k?C.data=k:(k=Kd(n),k!==null&&(C.data=k)))),(k=up?cp(e,n):dp(e,n))&&(c=Al(c,"onBeforeInput"),0<c.length&&(f=new Eu("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=k))}uf(d,t)})}function Ss(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Al(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=ms(e,n),l!=null&&r.unshift(Ss(e,l,s)),l=ms(e,t),l!=null&&r.push(Ss(e,l,s))),e=e.return}return r}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $u(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var a=n,i=a.alternate,c=a.stateNode;if(i!==null&&i===r)break;a.tag===5&&c!==null&&(a=c,s?(i=ms(n,l),i!=null&&o.unshift(Ss(n,i,a))):s||(i=ms(n,l),i!=null&&o.push(Ss(n,i,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ep=/\r\n?/g,Cp=/\u0000|\uFFFD/g;function Uu(e){return(typeof e=="string"?e:""+e).replace(Ep,`
`).replace(Cp,"")}function Js(e,t,n){if(t=Uu(t),Uu(e)!==t&&n)throw Error(b(425))}function Rl(){}var wa=null,Sa=null;function ka(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ia=typeof setTimeout=="function"?setTimeout:void 0,Pp=typeof clearTimeout=="function"?clearTimeout:void 0,Du=typeof Promise=="function"?Promise:void 0,jp=typeof queueMicrotask=="function"?queueMicrotask:typeof Du<"u"?function(e){return Du.resolve(null).then(e).catch(bp)}:Ia;function bp(e){setTimeout(function(){throw e})}function Lo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ys(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ys(t)}function Cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ou(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $r=Math.random().toString(36).slice(2),Ht="__reactFiber$"+$r,ks="__reactProps$"+$r,on="__reactContainer$"+$r,Na="__reactEvents$"+$r,Tp="__reactListeners$"+$r,Ap="__reactHandles$"+$r;function Gn(e){var t=e[Ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[on]||n[Ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ou(e);e!==null;){if(n=e[Ht])return n;e=Ou(e)}return t}e=n,n=e.parentNode}return null}function Ds(e){return e=e[Ht]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(b(33))}function ro(e){return e[ks]||null}var Ea=[],mr=-1;function zn(e){return{current:e}}function Se(e){0>mr||(e.current=Ea[mr],Ea[mr]=null,mr--)}function ve(e,t){mr++,Ea[mr]=e.current,e.current=t}var Mn={},st=zn(Mn),pt=zn(!1),Yn=Mn;function jr(e,t){var n=e.type.contextTypes;if(!n)return Mn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gt(e){return e=e.childContextTypes,e!=null}function _l(){Se(pt),Se(st)}function Fu(e,t,n){if(st.current!==Mn)throw Error(b(168));ve(st,t),ve(pt,n)}function df(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(b(108,pm(e)||"Unknown",s));return Ee({},n,r)}function Ml(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mn,Yn=st.current,ve(st,e),ve(pt,pt.current),!0}function Bu(e,t,n){var r=e.stateNode;if(!r)throw Error(b(169));n?(e=df(e,t,Yn),r.__reactInternalMemoizedMergedChildContext=e,Se(pt),Se(st),ve(st,e)):Se(pt),ve(pt,n)}var en=null,so=!1,zo=!1;function ff(e){en===null?en=[e]:en.push(e)}function Rp(e){so=!0,ff(e)}function $n(){if(!zo&&en!==null){zo=!0;var e=0,t=ye;try{var n=en;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}en=null,so=!1}catch(s){throw en!==null&&(en=en.slice(e+1)),zd(ui,$n),s}finally{ye=t,zo=!1}}return null}var pr=[],gr=0,Ll=null,zl=0,Ct=[],Pt=0,Kn=null,tn=1,nn="";function Bn(e,t){pr[gr++]=zl,pr[gr++]=Ll,Ll=e,zl=t}function hf(e,t,n){Ct[Pt++]=tn,Ct[Pt++]=nn,Ct[Pt++]=Kn,Kn=e;var r=tn;e=nn;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var l=32-Ut(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,tn=1<<32-Ut(t)+s|n<<s|r,nn=l+e}else tn=1<<l|n<<s|r,nn=e}function vi(e){e.return!==null&&(Bn(e,1),hf(e,1,0))}function xi(e){for(;e===Ll;)Ll=pr[--gr],pr[gr]=null,zl=pr[--gr],pr[gr]=null;for(;e===Kn;)Kn=Ct[--Pt],Ct[Pt]=null,nn=Ct[--Pt],Ct[Pt]=null,tn=Ct[--Pt],Ct[Pt]=null}var wt=null,xt=null,ke=!1,zt=null;function mf(e,t){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,xt=Cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kn!==null?{id:tn,overflow:nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wt=e,xt=null,!0):!1;default:return!1}}function Ca(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pa(e){if(ke){var t=xt;if(t){var n=t;if(!Vu(e,t)){if(Ca(e))throw Error(b(418));t=Cn(n.nextSibling);var r=wt;t&&Vu(e,t)?mf(r,n):(e.flags=e.flags&-4097|2,ke=!1,wt=e)}}else{if(Ca(e))throw Error(b(418));e.flags=e.flags&-4097|2,ke=!1,wt=e}}}function Gu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function Zs(e){if(e!==wt)return!1;if(!ke)return Gu(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ka(e.type,e.memoizedProps)),t&&(t=xt)){if(Ca(e))throw pf(),Error(b(418));for(;t;)mf(e,t),t=Cn(t.nextSibling)}if(Gu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=Cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=wt?Cn(e.stateNode.nextSibling):null;return!0}function pf(){for(var e=xt;e;)e=Cn(e.nextSibling)}function br(){xt=wt=null,ke=!1}function wi(e){zt===null?zt=[e]:zt.push(e)}var _p=cn.ReactCurrentBatchConfig;function Wr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var a=s.refs;o===null?delete a[l]:a[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,e))}return e}function el(e,t){throw e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hu(e){var t=e._init;return t(e._payload)}function gf(e){function t(m,p){if(e){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=Tn(m,p),m.index=0,m.sibling=null,m}function l(m,p,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,p,y,w){return p===null||p.tag!==6?(p=Vo(y,m.mode,w),p.return=m,p):(p=s(p,y),p.return=m,p)}function i(m,p,y,w){var I=y.type;return I===ur?f(m,p,y.props.children,w,y.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===gn&&Hu(I)===p.type)?(w=s(p,y.props),w.ref=Wr(m,p,y),w.return=m,w):(w=Sl(y.type,y.key,y.props,null,m.mode,w),w.ref=Wr(m,p,y),w.return=m,w)}function c(m,p,y,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Go(y,m.mode,w),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function f(m,p,y,w,I){return p===null||p.tag!==7?(p=qn(y,m.mode,w,I),p.return=m,p):(p=s(p,y),p.return=m,p)}function d(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Vo(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Vs:return y=Sl(p.type,p.key,p.props,null,m.mode,y),y.ref=Wr(m,null,p),y.return=m,y;case ir:return p=Go(p,m.mode,y),p.return=m,p;case gn:var w=p._init;return d(m,w(p._payload),y)}if(Xr(p)||Br(p))return p=qn(p,m.mode,y,null),p.return=m,p;el(m,p)}return null}function h(m,p,y,w){var I=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return I!==null?null:a(m,p,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vs:return y.key===I?i(m,p,y,w):null;case ir:return y.key===I?c(m,p,y,w):null;case gn:return I=y._init,h(m,p,I(y._payload),w)}if(Xr(y)||Br(y))return I!==null?null:f(m,p,y,w,null);el(m,y)}return null}function x(m,p,y,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(y)||null,a(p,m,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vs:return m=m.get(w.key===null?y:w.key)||null,i(p,m,w,I);case ir:return m=m.get(w.key===null?y:w.key)||null,c(p,m,w,I);case gn:var N=w._init;return x(m,p,y,N(w._payload),I)}if(Xr(w)||Br(w))return m=m.get(y)||null,f(p,m,w,I,null);el(p,w)}return null}function v(m,p,y,w){for(var I=null,N=null,k=p,C=p=0,T=null;k!==null&&C<y.length;C++){k.index>C?(T=k,k=null):T=k.sibling;var P=h(m,k,y[C],w);if(P===null){k===null&&(k=T);break}e&&k&&P.alternate===null&&t(m,k),p=l(P,p,C),N===null?I=P:N.sibling=P,N=P,k=T}if(C===y.length)return n(m,k),ke&&Bn(m,C),I;if(k===null){for(;C<y.length;C++)k=d(m,y[C],w),k!==null&&(p=l(k,p,C),N===null?I=k:N.sibling=k,N=k);return ke&&Bn(m,C),I}for(k=r(m,k);C<y.length;C++)T=x(k,m,C,y[C],w),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?C:T.key),p=l(T,p,C),N===null?I=T:N.sibling=T,N=T);return e&&k.forEach(function(Q){return t(m,Q)}),ke&&Bn(m,C),I}function S(m,p,y,w){var I=Br(y);if(typeof I!="function")throw Error(b(150));if(y=I.call(y),y==null)throw Error(b(151));for(var N=I=null,k=p,C=p=0,T=null,P=y.next();k!==null&&!P.done;C++,P=y.next()){k.index>C?(T=k,k=null):T=k.sibling;var Q=h(m,k,P.value,w);if(Q===null){k===null&&(k=T);break}e&&k&&Q.alternate===null&&t(m,k),p=l(Q,p,C),N===null?I=Q:N.sibling=Q,N=Q,k=T}if(P.done)return n(m,k),ke&&Bn(m,C),I;if(k===null){for(;!P.done;C++,P=y.next())P=d(m,P.value,w),P!==null&&(p=l(P,p,C),N===null?I=P:N.sibling=P,N=P);return ke&&Bn(m,C),I}for(k=r(m,k);!P.done;C++,P=y.next())P=x(k,m,C,P.value,w),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),p=l(P,p,C),N===null?I=P:N.sibling=P,N=P);return e&&k.forEach(function(K){return t(m,K)}),ke&&Bn(m,C),I}function E(m,p,y,w){if(typeof y=="object"&&y!==null&&y.type===ur&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Vs:e:{for(var I=y.key,N=p;N!==null;){if(N.key===I){if(I=y.type,I===ur){if(N.tag===7){n(m,N.sibling),p=s(N,y.props.children),p.return=m,m=p;break e}}else if(N.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===gn&&Hu(I)===N.type){n(m,N.sibling),p=s(N,y.props),p.ref=Wr(m,N,y),p.return=m,m=p;break e}n(m,N);break}else t(m,N);N=N.sibling}y.type===ur?(p=qn(y.props.children,m.mode,w,y.key),p.return=m,m=p):(w=Sl(y.type,y.key,y.props,null,m.mode,w),w.ref=Wr(m,p,y),w.return=m,m=w)}return o(m);case ir:e:{for(N=y.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else t(m,p);p=p.sibling}p=Go(y,m.mode,w),p.return=m,m=p}return o(m);case gn:return N=y._init,E(m,p,N(y._payload),w)}if(Xr(y))return v(m,p,y,w);if(Br(y))return S(m,p,y,w);el(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,y),p.return=m,m=p):(n(m,p),p=Vo(y,m.mode,w),p.return=m,m=p),o(m)):n(m,p)}return E}var Tr=gf(!0),yf=gf(!1),$l=zn(null),Ul=null,yr=null,Si=null;function ki(){Si=yr=Ul=null}function Ii(e){var t=$l.current;Se($l),e._currentValue=t}function ja(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nr(e,t){Ul=e,Si=yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mt=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},yr===null){if(Ul===null)throw Error(b(308));yr=e,Ul.dependencies={lanes:0,firstContext:e}}else yr=yr.next=e;return t}var Hn=null;function Ni(e){Hn===null?Hn=[e]:Hn.push(e)}function vf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ni(t)):(n.next=s.next,s.next=n),t.interleaved=n,an(e,r)}function an(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yn=!1;function Ei(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,an(e,n)}return s=r.interleaved,s===null?(t.next=t,Ni(r)):(t.next=s.next,s.next=t),r.interleaved=t,an(e,n)}function pl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ci(e,n)}}function Qu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Dl(e,t,n,r){var s=e.updateQueue;yn=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var i=a,c=i.next;i.next=null,o===null?l=c:o.next=c,o=i;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=i))}if(l!==null){var d=s.baseState;o=0,f=c=i=null,a=l;do{var h=a.lane,x=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,S=a;switch(h=t,x=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(x,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,h=typeof v=="function"?v.call(x,d,h):v,h==null)break e;d=Ee({},d,h);break e;case 2:yn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=x,i=d):f=f.next=x,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(i=d),s.baseState=i,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Jn|=o,e.lanes=o,e.memoizedState=d}}function Wu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(b(191,s));s.call(r)}}}var Os={},qt=zn(Os),Is=zn(Os),Ns=zn(Os);function Qn(e){if(e===Os)throw Error(b(174));return e}function Ci(e,t){switch(ve(Ns,t),ve(Is,e),ve(qt,Os),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ia(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ia(t,e)}Se(qt),ve(qt,t)}function Ar(){Se(qt),Se(Is),Se(Ns)}function wf(e){Qn(Ns.current);var t=Qn(qt.current),n=ia(t,e.type);t!==n&&(ve(Is,e),ve(qt,n))}function Pi(e){Is.current===e&&(Se(qt),Se(Is))}var Ie=zn(0);function Ol(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $o=[];function ji(){for(var e=0;e<$o.length;e++)$o[e]._workInProgressVersionPrimary=null;$o.length=0}var gl=cn.ReactCurrentDispatcher,Uo=cn.ReactCurrentBatchConfig,Xn=0,Ne=null,Oe=null,Ve=null,Fl=!1,as=!1,Es=0,Mp=0;function Je(){throw Error(b(321))}function bi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ot(e[n],t[n]))return!1;return!0}function Ti(e,t,n,r,s,l){if(Xn=l,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gl.current=e===null||e.memoizedState===null?Up:Dp,e=n(r,s),as){l=0;do{if(as=!1,Es=0,25<=l)throw Error(b(301));l+=1,Ve=Oe=null,t.updateQueue=null,gl.current=Op,e=n(r,s)}while(as)}if(gl.current=Bl,t=Oe!==null&&Oe.next!==null,Xn=0,Ve=Oe=Ne=null,Fl=!1,t)throw Error(b(300));return e}function Ai(){var e=Es!==0;return Es=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ne.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function At(){if(Oe===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Ve===null?Ne.memoizedState:Ve.next;if(t!==null)Ve=t,Oe=e;else{if(e===null)throw Error(b(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ve===null?Ne.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function Cs(e,t){return typeof t=="function"?t(e):t}function Do(e){var t=At(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=Oe,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=o=null,i=null,c=l;do{var f=c.lane;if((Xn&f)===f)i!==null&&(i=i.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};i===null?(a=i=d,o=r):i=i.next=d,Ne.lanes|=f,Jn|=f}c=c.next}while(c!==null&&c!==l);i===null?o=r:i.next=a,Ot(r,t.memoizedState)||(mt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ne.lanes|=l,Jn|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=At(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);Ot(l,t.memoizedState)||(mt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Sf(){}function kf(e,t){var n=Ne,r=At(),s=t(),l=!Ot(r.memoizedState,s);if(l&&(r.memoizedState=s,mt=!0),r=r.queue,Ri(Ef.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Ps(9,Nf.bind(null,n,r,s,t),void 0,null),He===null)throw Error(b(349));Xn&30||If(n,t,s)}return s}function If(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Nf(e,t,n,r){t.value=n,t.getSnapshot=r,Cf(t)&&Pf(e)}function Ef(e,t,n){return n(function(){Cf(t)&&Pf(e)})}function Cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ot(e,n)}catch{return!0}}function Pf(e){var t=an(e,1);t!==null&&Dt(t,e,1,-1)}function qu(e){var t=Gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t.queue=e,e=e.dispatch=$p.bind(null,Ne,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function jf(){return At().memoizedState}function yl(e,t,n,r){var s=Gt();Ne.flags|=e,s.memoizedState=Ps(1|t,n,void 0,r===void 0?null:r)}function lo(e,t,n,r){var s=At();r=r===void 0?null:r;var l=void 0;if(Oe!==null){var o=Oe.memoizedState;if(l=o.destroy,r!==null&&bi(r,o.deps)){s.memoizedState=Ps(t,n,l,r);return}}Ne.flags|=e,s.memoizedState=Ps(1|t,n,l,r)}function Yu(e,t){return yl(8390656,8,e,t)}function Ri(e,t){return lo(2048,8,e,t)}function bf(e,t){return lo(4,2,e,t)}function Tf(e,t){return lo(4,4,e,t)}function Af(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rf(e,t,n){return n=n!=null?n.concat([e]):null,lo(4,4,Af.bind(null,t,e),n)}function _i(){}function _f(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mf(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Lf(e,t,n){return Xn&21?(Ot(n,t)||(n=Dd(),Ne.lanes|=n,Jn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=n)}function Lp(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=Uo.transition;Uo.transition={};try{e(!1),t()}finally{ye=n,Uo.transition=r}}function zf(){return At().memoizedState}function zp(e,t,n){var r=bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$f(e))Uf(t,n);else if(n=vf(e,t,n,r),n!==null){var s=at();Dt(n,e,r,s),Df(n,t,r)}}function $p(e,t,n){var r=bn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($f(e))Uf(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,a=l(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ot(a,o)){var i=t.interleaved;i===null?(s.next=s,Ni(t)):(s.next=i.next,i.next=s),t.interleaved=s;return}}catch{}finally{}n=vf(e,t,s,r),n!==null&&(s=at(),Dt(n,e,r,s),Df(n,t,r))}}function $f(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function Uf(e,t){as=Fl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Df(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ci(e,n)}}var Bl={readContext:Tt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Up={readContext:Tt,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Yu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yl(4194308,4,Af.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yl(4194308,4,e,t)},useInsertionEffect:function(e,t){return yl(4,2,e,t)},useMemo:function(e,t){var n=Gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=zp.bind(null,Ne,e),[r.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:qu,useDebugValue:_i,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=qu(!1),t=e[0];return e=Lp.bind(null,e[1]),Gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ne,s=Gt();if(ke){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),He===null)throw Error(b(349));Xn&30||If(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Yu(Ef.bind(null,r,l,e),[e]),r.flags|=2048,Ps(9,Nf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Gt(),t=He.identifierPrefix;if(ke){var n=nn,r=tn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Es++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Mp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dp={readContext:Tt,useCallback:_f,useContext:Tt,useEffect:Ri,useImperativeHandle:Rf,useInsertionEffect:bf,useLayoutEffect:Tf,useMemo:Mf,useReducer:Do,useRef:jf,useState:function(){return Do(Cs)},useDebugValue:_i,useDeferredValue:function(e){var t=At();return Lf(t,Oe.memoizedState,e)},useTransition:function(){var e=Do(Cs)[0],t=At().memoizedState;return[e,t]},useMutableSource:Sf,useSyncExternalStore:kf,useId:zf,unstable_isNewReconciler:!1},Op={readContext:Tt,useCallback:_f,useContext:Tt,useEffect:Ri,useImperativeHandle:Rf,useInsertionEffect:bf,useLayoutEffect:Tf,useMemo:Mf,useReducer:Oo,useRef:jf,useState:function(){return Oo(Cs)},useDebugValue:_i,useDeferredValue:function(e){var t=At();return Oe===null?t.memoizedState=e:Lf(t,Oe.memoizedState,e)},useTransition:function(){var e=Oo(Cs)[0],t=At().memoizedState;return[e,t]},useMutableSource:Sf,useSyncExternalStore:kf,useId:zf,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ba(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oo={isMounted:function(e){return(e=e._reactInternals)?nr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=at(),s=bn(e),l=sn(r,s);l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,s),t!==null&&(Dt(t,e,s,r),pl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=at(),s=bn(e),l=sn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,s),t!==null&&(Dt(t,e,s,r),pl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=at(),r=bn(e),s=sn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Pn(e,s,r),t!==null&&(Dt(t,e,r,n),pl(t,e,r))}};function Ku(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!xs(n,r)||!xs(s,l):!0}function Of(e,t,n){var r=!1,s=Mn,l=t.contextType;return typeof l=="object"&&l!==null?l=Tt(l):(s=gt(t)?Yn:st.current,r=t.contextTypes,l=(r=r!=null)?jr(e,s):Mn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Xu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oo.enqueueReplaceState(t,t.state,null)}function Ta(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ei(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Tt(l):(l=gt(t)?Yn:st.current,s.context=jr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ba(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&oo.enqueueReplaceState(s,s.state,null),Dl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Rr(e,t){try{var n="",r=t;do n+=mm(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Fo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Aa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Fp=typeof WeakMap=="function"?WeakMap:Map;function Ff(e,t,n){n=sn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Fa=r),Aa(e,t)},n}function Bf(e,t,n){n=sn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Aa(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Aa(e,t),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ju(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Fp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=t0.bind(null,e,t,n),t.then(e,e))}function Zu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ec(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=sn(-1,1),t.tag=2,Pn(n,t,1))),n.lanes|=1),e)}var Bp=cn.ReactCurrentOwner,mt=!1;function ot(e,t,n,r){t.child=e===null?yf(t,null,n,r):Tr(t,e.child,n,r)}function tc(e,t,n,r,s){n=n.render;var l=t.ref;return Nr(t,s),r=Ti(e,t,n,r,l,s),n=Ai(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,un(e,t,s)):(ke&&n&&vi(t),t.flags|=1,ot(e,t,r,s),t.child)}function nc(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Fi(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Vf(e,t,l,r,s)):(e=Sl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:xs,n(o,r)&&e.ref===t.ref)return un(e,t,s)}return t.flags|=1,e=Tn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Vf(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(xs(l,r)&&e.ref===t.ref)if(mt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(mt=!0);else return t.lanes=e.lanes,un(e,t,s)}return Ra(e,t,n,r,s)}function Gf(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(xr,vt),vt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(xr,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ve(xr,vt),vt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ve(xr,vt),vt|=r;return ot(e,t,s,n),t.child}function Hf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,r,s){var l=gt(n)?Yn:st.current;return l=jr(t,l),Nr(t,s),n=Ti(e,t,n,r,l,s),r=Ai(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,un(e,t,s)):(ke&&r&&vi(t),t.flags|=1,ot(e,t,n,s),t.child)}function rc(e,t,n,r,s){if(gt(n)){var l=!0;Ml(t)}else l=!1;if(Nr(t,s),t.stateNode===null)vl(e,t),Of(t,n,r),Ta(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var i=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Tt(c):(c=gt(n)?Yn:st.current,c=jr(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||i!==c)&&Xu(t,o,r,c),yn=!1;var h=t.memoizedState;o.state=h,Dl(t,r,o,s),i=t.memoizedState,a!==r||h!==i||pt.current||yn?(typeof f=="function"&&(ba(t,n,f,r),i=t.memoizedState),(a=yn||Ku(t,n,a,r,h,i,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xf(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Mt(t.type,a),o.props=c,d=t.pendingProps,h=o.context,i=n.contextType,typeof i=="object"&&i!==null?i=Tt(i):(i=gt(n)?Yn:st.current,i=jr(t,i));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==i)&&Xu(t,o,r,i),yn=!1,h=t.memoizedState,o.state=h,Dl(t,r,o,s);var v=t.memoizedState;a!==d||h!==v||pt.current||yn?(typeof x=="function"&&(ba(t,n,x,r),v=t.memoizedState),(c=yn||Ku(t,n,c,r,h,v,i)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=i,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _a(e,t,n,r,l,s)}function _a(e,t,n,r,s,l){Hf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Bu(t,n,!1),un(e,t,l);r=t.stateNode,Bp.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tr(t,e.child,null,l),t.child=Tr(t,null,a,l)):ot(e,t,a,l),t.memoizedState=r.state,s&&Bu(t,n,!0),t.child}function Qf(e){var t=e.stateNode;t.pendingContext?Fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fu(e,t.context,!1),Ci(e,t.containerInfo)}function sc(e,t,n,r,s){return br(),wi(s),t.flags|=256,ot(e,t,n,r),t.child}var Ma={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wf(e,t,n){var r=t.pendingProps,s=Ie.current,l=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ve(Ie,s&1),e===null)return Pa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=uo(o,r,0,null),e=qn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=La(n),t.memoizedState=Ma,e):Mi(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Vp(e,t,o,r,a,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,a=s.sibling;var i={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=Tn(s,i),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=Tn(a,l):(l=qn(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?La(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=Ma,r}return l=e.child,e=l.sibling,r=Tn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mi(e,t){return t=uo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tl(e,t,n,r){return r!==null&&wi(r),Tr(t,e.child,null,n),e=Mi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Vp(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=Fo(Error(b(422))),tl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=uo({mode:"visible",children:r.children},s,0,null),l=qn(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Tr(t,e.child,null,o),t.child.memoizedState=La(o),t.memoizedState=Ma,l);if(!(t.mode&1))return tl(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(b(419)),r=Fo(l,r,void 0),tl(e,t,o,r)}if(a=(o&e.childLanes)!==0,mt||a){if(r=He,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,an(e,s),Dt(r,e,s,-1))}return Oi(),r=Fo(Error(b(421))),tl(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=n0.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,xt=Cn(s.nextSibling),wt=t,ke=!0,zt=null,e!==null&&(Ct[Pt++]=tn,Ct[Pt++]=nn,Ct[Pt++]=Kn,tn=e.id,nn=e.overflow,Kn=t),t=Mi(t,r.children),t.flags|=4096,t)}function lc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ja(e.return,t,n)}function Bo(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function qf(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(ot(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lc(e,n,t);else if(e.tag===19)lc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ve(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ol(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ol(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,l);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=Tn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Tn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Gp(e,t,n){switch(t.tag){case 3:Qf(t),br();break;case 5:wf(t);break;case 1:gt(t.type)&&Ml(t);break;case 4:Ci(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ve($l,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Wf(e,t,n):(ve(Ie,Ie.current&1),e=un(e,t,n),e!==null?e.sibling:null);ve(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return qf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,Gf(e,t,n)}return un(e,t,n)}var Yf,za,Kf,Xf;Yf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};za=function(){};Kf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qn(qt.current);var l=null;switch(n){case"input":s=sa(e,s),r=sa(e,r),l=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),l=[];break;case"textarea":s=aa(e,s),r=aa(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rl)}ua(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fs.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var i=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&i!==a&&(i!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in i)i.hasOwnProperty(o)&&a[o]!==i[o]&&(n||(n={}),n[o]=i[o])}else n||(l||(l=[]),l.push(c,n)),n=i;else c==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,a=a?a.__html:void 0,i!=null&&a!==i&&(l=l||[]).push(c,i)):c==="children"?typeof i!="string"&&typeof i!="number"||(l=l||[]).push(c,""+i):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fs.hasOwnProperty(c)?(i!=null&&c==="onScroll"&&we("scroll",e),l||a===i||(l=[])):(l=l||[]).push(c,i))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};Xf=function(e,t,n,r){n!==r&&(t.flags|=4)};function qr(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hp(e,t,n){var r=t.pendingProps;switch(xi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return gt(t.type)&&_l(),Ze(t),null;case 3:return r=t.stateNode,Ar(),Se(pt),Se(st),ji(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(Ga(zt),zt=null))),za(e,t),Ze(t),null;case 5:Pi(t);var s=Qn(Ns.current);if(n=t.type,e!==null&&t.stateNode!=null)Kf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(b(166));return Ze(t),null}if(e=Qn(qt.current),Zs(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Ht]=t,r[ks]=l,e=(t.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<Zr.length;s++)we(Zr[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":mu(r,l),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},we("invalid",r);break;case"textarea":gu(r,l),we("invalid",r)}ua(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Js(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Js(r.textContent,a,e),s=["children",""+a]):fs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":Gs(r),pu(r,l,!0);break;case"textarea":Gs(r),yu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Rl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ht]=t,e[ks]=r,Yf(e,t,!1,!1),t.stateNode=e;e:{switch(o=ca(n,r),n){case"dialog":we("cancel",e),we("close",e),s=r;break;case"iframe":case"object":case"embed":we("load",e),s=r;break;case"video":case"audio":for(s=0;s<Zr.length;s++)we(Zr[s],e);s=r;break;case"source":we("error",e),s=r;break;case"img":case"image":case"link":we("error",e),we("load",e),s=r;break;case"details":we("toggle",e),s=r;break;case"input":mu(e,r),s=sa(e,r),we("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),we("invalid",e);break;case"textarea":gu(e,r),s=aa(e,r),we("invalid",e);break;default:s=r}ua(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var i=a[l];l==="style"?Pd(e,i):l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Ed(e,i)):l==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&hs(e,i):typeof i=="number"&&hs(e,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fs.hasOwnProperty(l)?i!=null&&l==="onScroll"&&we("scroll",e):i!=null&&si(e,l,i,o))}switch(n){case"input":Gs(e),pu(e,r,!1);break;case"textarea":Gs(e),yu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_n(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?wr(e,!!r.multiple,l,!1):r.defaultValue!=null&&wr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)Xf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(b(166));if(n=Qn(Ns.current),Qn(qt.current),Zs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ht]=t,(l=r.nodeValue!==n)&&(e=wt,e!==null))switch(e.tag){case 3:Js(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Js(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ht]=t,t.stateNode=r}return Ze(t),null;case 13:if(Se(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&xt!==null&&t.mode&1&&!(t.flags&128))pf(),br(),t.flags|=98560,l=!1;else if(l=Zs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(b(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(b(317));l[Ht]=t}else br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),l=!1}else zt!==null&&(Ga(zt),zt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Fe===0&&(Fe=3):Oi())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return Ar(),za(e,t),e===null&&ws(t.stateNode.containerInfo),Ze(t),null;case 10:return Ii(t.type._context),Ze(t),null;case 17:return gt(t.type)&&_l(),Ze(t),null;case 19:if(Se(Ie),l=t.memoizedState,l===null)return Ze(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)qr(l,!1);else{if(Fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ol(e),o!==null){for(t.flags|=128,qr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ve(Ie,Ie.current&1|2),t.child}e=e.sibling}l.tail!==null&&Te()>_r&&(t.flags|=128,r=!0,qr(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ol(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!ke)return Ze(t),null}else 2*Te()-l.renderingStartTime>_r&&n!==1073741824&&(t.flags|=128,r=!0,qr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Te(),t.sibling=null,n=Ie.current,ve(Ie,r?n&1|2:n&1),t):(Ze(t),null);case 22:case 23:return Di(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?vt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(b(156,t.tag))}function Qp(e,t){switch(xi(t),t.tag){case 1:return gt(t.type)&&_l(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ar(),Se(pt),Se(st),ji(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pi(t),null;case 13:if(Se(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(Ie),null;case 4:return Ar(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return Di(),null;case 24:return null;default:return null}}var nl=!1,nt=!1,Wp=typeof WeakSet=="function"?WeakSet:Set,O=null;function vr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(e,t,r)}else n.current=null}function $a(e,t,n){try{n()}catch(r){Ce(e,t,r)}}var oc=!1;function qp(e,t){if(wa=bl,e=tf(),yi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,a=-1,i=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var x;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==l||r!==0&&d.nodeType!==3||(i=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)h=d,d=x;for(;;){if(d===e)break t;if(h===n&&++c===s&&(a=o),h===l&&++f===r&&(i=o),(x=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=x}n=a===-1||i===-1?null:{start:a,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sa={focusedElem:e,selectionRange:n},bl=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?S:Mt(t.type,S),E);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(w){Ce(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return v=oc,oc=!1,v}function is(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&$a(t,n,l)}s=s.next}while(s!==r)}}function ao(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ua(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Jf(e){var t=e.alternate;t!==null&&(e.alternate=null,Jf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[ks],delete t[Na],delete t[Tp],delete t[Ap])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zf(e){return e.tag===5||e.tag===3||e.tag===4}function ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Da(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rl));else if(r!==4&&(e=e.child,e!==null))for(Da(e,t,n),e=e.sibling;e!==null;)Da(e,t,n),e=e.sibling}function Oa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Oa(e,t,n),e=e.sibling;e!==null;)Oa(e,t,n),e=e.sibling}var Qe=null,Lt=!1;function pn(e,t,n){for(n=n.child;n!==null;)eh(e,t,n),n=n.sibling}function eh(e,t,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:nt||vr(n,t);case 6:var r=Qe,s=Lt;Qe=null,pn(e,t,n),Qe=r,Lt=s,Qe!==null&&(Lt?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Lt?(e=Qe,n=n.stateNode,e.nodeType===8?Lo(e.parentNode,n):e.nodeType===1&&Lo(e,n),ys(e)):Lo(Qe,n.stateNode));break;case 4:r=Qe,s=Lt,Qe=n.stateNode.containerInfo,Lt=!0,pn(e,t,n),Qe=r,Lt=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&$a(n,t,o),s=s.next}while(s!==r)}pn(e,t,n);break;case 1:if(!nt&&(vr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ce(n,t,a)}pn(e,t,n);break;case 21:pn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,pn(e,t,n),nt=r):pn(e,t,n);break;default:pn(e,t,n)}}function ic(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Wp),t.forEach(function(r){var s=r0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qe=a.stateNode,Lt=!1;break e;case 3:Qe=a.stateNode.containerInfo,Lt=!0;break e;case 4:Qe=a.stateNode.containerInfo,Lt=!0;break e}a=a.return}if(Qe===null)throw Error(b(160));eh(l,o,s),Qe=null,Lt=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(c){Ce(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)th(t,e),t=t.sibling}function th(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Bt(e),r&4){try{is(3,e,e.return),ao(3,e)}catch(S){Ce(e,e.return,S)}try{is(5,e,e.return)}catch(S){Ce(e,e.return,S)}}break;case 1:Rt(t,e),Bt(e),r&512&&n!==null&&vr(n,n.return);break;case 5:if(Rt(t,e),Bt(e),r&512&&n!==null&&vr(n,n.return),e.flags&32){var s=e.stateNode;try{hs(s,"")}catch(S){Ce(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,a=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&kd(s,l),ca(a,o);var c=ca(a,l);for(o=0;o<i.length;o+=2){var f=i[o],d=i[o+1];f==="style"?Pd(s,d):f==="dangerouslySetInnerHTML"?Ed(s,d):f==="children"?hs(s,d):si(s,f,d,c)}switch(a){case"input":la(s,l);break;case"textarea":Id(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?wr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?wr(s,!!l.multiple,l.defaultValue,!0):wr(s,!!l.multiple,l.multiple?[]:"",!1))}s[ks]=l}catch(S){Ce(e,e.return,S)}}break;case 6:if(Rt(t,e),Bt(e),r&4){if(e.stateNode===null)throw Error(b(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(S){Ce(e,e.return,S)}}break;case 3:if(Rt(t,e),Bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ys(t.containerInfo)}catch(S){Ce(e,e.return,S)}break;case 4:Rt(t,e),Bt(e);break;case 13:Rt(t,e),Bt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||($i=Te())),r&4&&ic(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(c=nt)||f,Rt(t,e),nt=c):Rt(t,e),Bt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(O=e,f=e.child;f!==null;){for(d=O=f;O!==null;){switch(h=O,x=h.child,h.tag){case 0:case 11:case 14:case 15:is(4,h,h.return);break;case 1:vr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){Ce(r,n,S)}}break;case 5:vr(h,h.return);break;case 22:if(h.memoizedState!==null){cc(d);continue}}x!==null?(x.return=h,O=x):cc(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,c?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=d.stateNode,i=d.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,a.style.display=Cd("display",o))}catch(S){Ce(e,e.return,S)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){Ce(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rt(t,e),Bt(e),r&4&&ic(e);break;case 21:break;default:Rt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zf(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hs(s,""),r.flags&=-33);var l=ac(e);Oa(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ac(e);Da(e,a,o);break;default:throw Error(b(161))}}catch(i){Ce(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yp(e,t,n){O=e,nh(e)}function nh(e,t,n){for(var r=(e.mode&1)!==0;O!==null;){var s=O,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nl;if(!o){var a=s.alternate,i=a!==null&&a.memoizedState!==null||nt;a=nl;var c=nt;if(nl=o,(nt=i)&&!c)for(O=s;O!==null;)o=O,i=o.child,o.tag===22&&o.memoizedState!==null?dc(s):i!==null?(i.return=o,O=i):dc(s);for(;l!==null;)O=l,nh(l),l=l.sibling;O=s,nl=a,nt=c}uc(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,O=l):uc(e)}}function uc(e){for(;O!==null;){var t=O;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||ao(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Mt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Wu(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ys(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}nt||t.flags&512&&Ua(t)}catch(h){Ce(t,t.return,h)}}if(t===e){O=null;break}if(n=t.sibling,n!==null){n.return=t.return,O=n;break}O=t.return}}function cc(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var n=t.sibling;if(n!==null){n.return=t.return,O=n;break}O=t.return}}function dc(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ao(4,t)}catch(i){Ce(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(i){Ce(t,s,i)}}var l=t.return;try{Ua(t)}catch(i){Ce(t,l,i)}break;case 5:var o=t.return;try{Ua(t)}catch(i){Ce(t,o,i)}}}catch(i){Ce(t,t.return,i)}if(t===e){O=null;break}var a=t.sibling;if(a!==null){a.return=t.return,O=a;break}O=t.return}}var Kp=Math.ceil,Vl=cn.ReactCurrentDispatcher,Li=cn.ReactCurrentOwner,bt=cn.ReactCurrentBatchConfig,de=0,He=null,Ue=null,Ke=0,vt=0,xr=zn(0),Fe=0,js=null,Jn=0,io=0,zi=0,us=null,ht=null,$i=0,_r=1/0,Zt=null,Gl=!1,Fa=null,jn=null,rl=!1,Sn=null,Hl=0,cs=0,Ba=null,xl=-1,wl=0;function at(){return de&6?Te():xl!==-1?xl:xl=Te()}function bn(e){return e.mode&1?de&2&&Ke!==0?Ke&-Ke:_p.transition!==null?(wl===0&&(wl=Dd()),wl):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Qd(e.type)),e):1}function Dt(e,t,n,r){if(50<cs)throw cs=0,Ba=null,Error(b(185));$s(e,n,r),(!(de&2)||e!==He)&&(e===He&&(!(de&2)&&(io|=n),Fe===4&&xn(e,Ke)),yt(e,r),n===1&&de===0&&!(t.mode&1)&&(_r=Te()+500,so&&$n()))}function yt(e,t){var n=e.callbackNode;_m(e,t);var r=jl(e,e===He?Ke:0);if(r===0)n!==null&&wu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&wu(n),t===1)e.tag===0?Rp(fc.bind(null,e)):ff(fc.bind(null,e)),jp(function(){!(de&6)&&$n()}),n=null;else{switch(Od(r)){case 1:n=ui;break;case 4:n=$d;break;case 16:n=Pl;break;case 536870912:n=Ud;break;default:n=Pl}n=ch(n,rh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rh(e,t){if(xl=-1,wl=0,de&6)throw Error(b(327));var n=e.callbackNode;if(Er()&&e.callbackNode!==n)return null;var r=jl(e,e===He?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ql(e,r);else{t=r;var s=de;de|=2;var l=lh();(He!==e||Ke!==t)&&(Zt=null,_r=Te()+500,Wn(e,t));do try{Zp();break}catch(a){sh(e,a)}while(!0);ki(),Vl.current=l,de=s,Ue!==null?t=0:(He=null,Ke=0,t=Fe)}if(t!==0){if(t===2&&(s=pa(e),s!==0&&(r=s,t=Va(e,s))),t===1)throw n=js,Wn(e,0),xn(e,r),yt(e,Te()),n;if(t===6)xn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Xp(s)&&(t=Ql(e,r),t===2&&(l=pa(e),l!==0&&(r=l,t=Va(e,l))),t===1))throw n=js,Wn(e,0),xn(e,r),yt(e,Te()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(b(345));case 2:Vn(e,ht,Zt);break;case 3:if(xn(e,r),(r&130023424)===r&&(t=$i+500-Te(),10<t)){if(jl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){at(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ia(Vn.bind(null,e,ht,Zt),t);break}Vn(e,ht,Zt);break;case 4:if(xn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Ut(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=Te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kp(r/1960))-r,10<r){e.timeoutHandle=Ia(Vn.bind(null,e,ht,Zt),r);break}Vn(e,ht,Zt);break;case 5:Vn(e,ht,Zt);break;default:throw Error(b(329))}}}return yt(e,Te()),e.callbackNode===n?rh.bind(null,e):null}function Va(e,t){var n=us;return e.current.memoizedState.isDehydrated&&(Wn(e,t).flags|=256),e=Ql(e,t),e!==2&&(t=ht,ht=n,t!==null&&Ga(t)),e}function Ga(e){ht===null?ht=e:ht.push.apply(ht,e)}function Xp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Ot(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xn(e,t){for(t&=~zi,t&=~io,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function fc(e){if(de&6)throw Error(b(327));Er();var t=jl(e,0);if(!(t&1))return yt(e,Te()),null;var n=Ql(e,t);if(e.tag!==0&&n===2){var r=pa(e);r!==0&&(t=r,n=Va(e,r))}if(n===1)throw n=js,Wn(e,0),xn(e,t),yt(e,Te()),n;if(n===6)throw Error(b(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vn(e,ht,Zt),yt(e,Te()),null}function Ui(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(_r=Te()+500,so&&$n())}}function Zn(e){Sn!==null&&Sn.tag===0&&!(de&6)&&Er();var t=de;de|=1;var n=bt.transition,r=ye;try{if(bt.transition=null,ye=1,e)return e()}finally{ye=r,bt.transition=n,de=t,!(de&6)&&$n()}}function Di(){vt=xr.current,Se(xr)}function Wn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Pp(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(xi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_l();break;case 3:Ar(),Se(pt),Se(st),ji();break;case 5:Pi(r);break;case 4:Ar();break;case 13:Se(Ie);break;case 19:Se(Ie);break;case 10:Ii(r.type._context);break;case 22:case 23:Di()}n=n.return}if(He=e,Ue=e=Tn(e.current,null),Ke=vt=t,Fe=0,js=null,zi=io=Jn=0,ht=us=null,Hn!==null){for(t=0;t<Hn.length;t++)if(n=Hn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}Hn=null}return e}function sh(e,t){do{var n=Ue;try{if(ki(),gl.current=Bl,Fl){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fl=!1}if(Xn=0,Ve=Oe=Ne=null,as=!1,Es=0,Li.current=null,n===null||n.return===null){Fe=1,js=t,Ue=null;break}e:{var l=e,o=n.return,a=n,i=t;if(t=Ke,a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var c=i,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Zu(o);if(x!==null){x.flags&=-257,ec(x,o,a,l,t),x.mode&1&&Ju(l,c,t),t=x,i=c;var v=t.updateQueue;if(v===null){var S=new Set;S.add(i),t.updateQueue=S}else v.add(i);break e}else{if(!(t&1)){Ju(l,c,t),Oi();break e}i=Error(b(426))}}else if(ke&&a.mode&1){var E=Zu(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),ec(E,o,a,l,t),wi(Rr(i,a));break e}}l=i=Rr(i,a),Fe!==4&&(Fe=2),us===null?us=[l]:us.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var m=Ff(l,i,t);Qu(l,m);break e;case 1:a=i;var p=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(jn===null||!jn.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var w=Bf(l,a,t);Qu(l,w);break e}}l=l.return}while(l!==null)}ah(n)}catch(I){t=I,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function lh(){var e=Vl.current;return Vl.current=Bl,e===null?Bl:e}function Oi(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(Jn&268435455)&&!(io&268435455)||xn(He,Ke)}function Ql(e,t){var n=de;de|=2;var r=lh();(He!==e||Ke!==t)&&(Zt=null,Wn(e,t));do try{Jp();break}catch(s){sh(e,s)}while(!0);if(ki(),de=n,Vl.current=r,Ue!==null)throw Error(b(261));return He=null,Ke=0,Fe}function Jp(){for(;Ue!==null;)oh(Ue)}function Zp(){for(;Ue!==null&&!Nm();)oh(Ue)}function oh(e){var t=uh(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?ah(e):Ue=t,Li.current=null}function ah(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Qp(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Ue=null;return}}else if(n=Hp(n,t,vt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Fe===0&&(Fe=5)}function Vn(e,t,n){var r=ye,s=bt.transition;try{bt.transition=null,ye=1,e0(e,t,n,r)}finally{bt.transition=s,ye=r}return null}function e0(e,t,n,r){do Er();while(Sn!==null);if(de&6)throw Error(b(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(b(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Mm(e,l),e===He&&(Ue=He=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rl||(rl=!0,ch(Pl,function(){return Er(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=bt.transition,bt.transition=null;var o=ye;ye=1;var a=de;de|=4,Li.current=null,qp(e,n),th(n,e),wp(Sa),bl=!!wa,Sa=wa=null,e.current=n,Yp(n),Em(),de=a,ye=o,bt.transition=l}else e.current=n;if(rl&&(rl=!1,Sn=e,Hl=s),l=e.pendingLanes,l===0&&(jn=null),jm(n.stateNode),yt(e,Te()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Gl)throw Gl=!1,e=Fa,Fa=null,e;return Hl&1&&e.tag!==0&&Er(),l=e.pendingLanes,l&1?e===Ba?cs++:(cs=0,Ba=e):cs=0,$n(),null}function Er(){if(Sn!==null){var e=Od(Hl),t=bt.transition,n=ye;try{if(bt.transition=null,ye=16>e?16:e,Sn===null)var r=!1;else{if(e=Sn,Sn=null,Hl=0,de&6)throw Error(b(331));var s=de;for(de|=4,O=e.current;O!==null;){var l=O,o=l.child;if(O.flags&16){var a=l.deletions;if(a!==null){for(var i=0;i<a.length;i++){var c=a[i];for(O=c;O!==null;){var f=O;switch(f.tag){case 0:case 11:case 15:is(8,f,l)}var d=f.child;if(d!==null)d.return=f,O=d;else for(;O!==null;){f=O;var h=f.sibling,x=f.return;if(Jf(f),f===c){O=null;break}if(h!==null){h.return=x,O=h;break}O=x}}}var v=l.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}O=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,O=o;else e:for(;O!==null;){if(l=O,l.flags&2048)switch(l.tag){case 0:case 11:case 15:is(9,l,l.return)}var m=l.sibling;if(m!==null){m.return=l.return,O=m;break e}O=l.return}}var p=e.current;for(O=p;O!==null;){o=O;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,O=y;else e:for(o=p;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ao(9,a)}}catch(I){Ce(a,a.return,I)}if(a===o){O=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,O=w;break e}O=a.return}}if(de=s,$n(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Zl,e)}catch{}r=!0}return r}finally{ye=n,bt.transition=t}}return!1}function hc(e,t,n){t=Rr(n,t),t=Ff(e,t,1),e=Pn(e,t,1),t=at(),e!==null&&($s(e,1,t),yt(e,t))}function Ce(e,t,n){if(e.tag===3)hc(e,e,n);else for(;t!==null;){if(t.tag===3){hc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){e=Rr(n,e),e=Bf(t,e,1),t=Pn(t,e,1),e=at(),t!==null&&($s(t,1,e),yt(t,e));break}}t=t.return}}function t0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&n,He===e&&(Ke&n)===n&&(Fe===4||Fe===3&&(Ke&130023424)===Ke&&500>Te()-$i?Wn(e,0):zi|=n),yt(e,t)}function ih(e,t){t===0&&(e.mode&1?(t=Ws,Ws<<=1,!(Ws&130023424)&&(Ws=4194304)):t=1);var n=at();e=an(e,t),e!==null&&($s(e,t,n),yt(e,n))}function n0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ih(e,n)}function r0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(t),ih(e,n)}var uh;uh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mt=!1,Gp(e,t,n);mt=!!(e.flags&131072)}else mt=!1,ke&&t.flags&1048576&&hf(t,zl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;vl(e,t),e=t.pendingProps;var s=jr(t,st.current);Nr(t,n),s=Ti(null,t,r,e,s,n);var l=Ai();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(r)?(l=!0,Ml(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ei(t),s.updater=oo,t.stateNode=s,s._reactInternals=t,Ta(t,r,e,n),t=_a(null,t,r,!0,l,n)):(t.tag=0,ke&&l&&vi(t),ot(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(vl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=l0(r),e=Mt(r,e),s){case 0:t=Ra(null,t,r,e,n);break e;case 1:t=rc(null,t,r,e,n);break e;case 11:t=tc(null,t,r,e,n);break e;case 14:t=nc(null,t,r,Mt(r.type,e),n);break e}throw Error(b(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),Ra(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),rc(e,t,r,s,n);case 3:e:{if(Qf(t),e===null)throw Error(b(387));r=t.pendingProps,l=t.memoizedState,s=l.element,xf(e,t),Dl(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Rr(Error(b(423)),t),t=sc(e,t,r,n,s);break e}else if(r!==s){s=Rr(Error(b(424)),t),t=sc(e,t,r,n,s);break e}else for(xt=Cn(t.stateNode.containerInfo.firstChild),wt=t,ke=!0,zt=null,n=yf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(br(),r===s){t=un(e,t,n);break e}ot(e,t,r,n)}t=t.child}return t;case 5:return wf(t),e===null&&Pa(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,ka(r,s)?o=null:l!==null&&ka(r,l)&&(t.flags|=32),Hf(e,t),ot(e,t,o,n),t.child;case 6:return e===null&&Pa(t),null;case 13:return Wf(e,t,n);case 4:return Ci(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tr(t,null,r,n):ot(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),tc(e,t,r,s,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,ve($l,r._currentValue),r._currentValue=o,l!==null)if(Ot(l.value,o)){if(l.children===s.children&&!pt.current){t=un(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){o=l.child;for(var i=a.firstContext;i!==null;){if(i.context===r){if(l.tag===1){i=sn(-1,n&-n),i.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i}}l.lanes|=n,i=l.alternate,i!==null&&(i.lanes|=n),ja(l.return,n,t),a.lanes|=n;break}i=i.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(b(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ja(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ot(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Nr(t,n),s=Tt(s),r=r(s),t.flags|=1,ot(e,t,r,n),t.child;case 14:return r=t.type,s=Mt(r,t.pendingProps),s=Mt(r.type,s),nc(e,t,r,s,n);case 15:return Vf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Mt(r,s),vl(e,t),t.tag=1,gt(r)?(e=!0,Ml(t)):e=!1,Nr(t,n),Of(t,r,s),Ta(t,r,s,n),_a(null,t,r,!0,e,n);case 19:return qf(e,t,n);case 22:return Gf(e,t,n)}throw Error(b(156,t.tag))};function ch(e,t){return zd(e,t)}function s0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,n,r){return new s0(e,t,n,r)}function Fi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function l0(e){if(typeof e=="function")return Fi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oi)return 11;if(e===ai)return 14}return 2}function Tn(e,t){var n=e.alternate;return n===null?(n=jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Sl(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")Fi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ur:return qn(n.children,s,l,t);case li:o=8,s|=8;break;case ea:return e=jt(12,n,t,s|2),e.elementType=ea,e.lanes=l,e;case ta:return e=jt(13,n,t,s),e.elementType=ta,e.lanes=l,e;case na:return e=jt(19,n,t,s),e.elementType=na,e.lanes=l,e;case xd:return uo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yd:o=10;break e;case vd:o=9;break e;case oi:o=11;break e;case ai:o=14;break e;case gn:o=16,r=null;break e}throw Error(b(130,e==null?e:typeof e,""))}return t=jt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function qn(e,t,n,r){return e=jt(7,e,r,t),e.lanes=n,e}function uo(e,t,n,r){return e=jt(22,e,r,t),e.elementType=xd,e.lanes=n,e.stateNode={isHidden:!1},e}function Vo(e,t,n){return e=jt(6,e,null,t),e.lanes=n,e}function Go(e,t,n){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function o0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=No(0),this.expirationTimes=No(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=No(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bi(e,t,n,r,s,l,o,a,i){return e=new o0(e,t,n,a,i),t===1?(t=1,l===!0&&(t|=8)):t=0,l=jt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ei(l),e}function a0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dh(e){if(!e)return Mn;e=e._reactInternals;e:{if(nr(e)!==e||e.tag!==1)throw Error(b(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(b(171))}if(e.tag===1){var n=e.type;if(gt(n))return df(e,n,t)}return t}function fh(e,t,n,r,s,l,o,a,i){return e=Bi(n,r,!0,e,s,l,o,a,i),e.context=dh(null),n=e.current,r=at(),s=bn(n),l=sn(r,s),l.callback=t??null,Pn(n,l,s),e.current.lanes=s,$s(e,s,r),yt(e,r),e}function co(e,t,n,r){var s=t.current,l=at(),o=bn(s);return n=dh(n),t.context===null?t.context=n:t.pendingContext=n,t=sn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pn(s,t,o),e!==null&&(Dt(e,s,o,l),pl(e,s,o)),o}function Wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vi(e,t){mc(e,t),(e=e.alternate)&&mc(e,t)}function i0(){return null}var hh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gi(e){this._internalRoot=e}fo.prototype.render=Gi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));co(e,t,null,null)};fo.prototype.unmount=Gi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zn(function(){co(null,e,null,null)}),t[on]=null}};function fo(e){this._internalRoot=e}fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vn.length&&t!==0&&t<vn[n].priority;n++);vn.splice(n,0,e),n===0&&Hd(e)}};function Hi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ho(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pc(){}function u0(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var c=Wl(o);l.call(c)}}var o=fh(t,r,e,0,null,!1,!1,"",pc);return e._reactRootContainer=o,e[on]=o.current,ws(e.nodeType===8?e.parentNode:e),Zn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Wl(i);a.call(c)}}var i=Bi(e,0,!1,null,null,!1,!1,"",pc);return e._reactRootContainer=i,e[on]=i.current,ws(e.nodeType===8?e.parentNode:e),Zn(function(){co(t,i,n,r)}),i}function mo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var a=s;s=function(){var i=Wl(o);a.call(i)}}co(t,o,e,s)}else o=u0(n,t,e,s,r);return Wl(o)}Fd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Jr(t.pendingLanes);n!==0&&(ci(t,n|1),yt(t,Te()),!(de&6)&&(_r=Te()+500,$n()))}break;case 13:Zn(function(){var r=an(e,1);if(r!==null){var s=at();Dt(r,e,1,s)}}),Vi(e,1)}};di=function(e){if(e.tag===13){var t=an(e,134217728);if(t!==null){var n=at();Dt(t,e,134217728,n)}Vi(e,134217728)}};Bd=function(e){if(e.tag===13){var t=bn(e),n=an(e,t);if(n!==null){var r=at();Dt(n,e,t,r)}Vi(e,t)}};Vd=function(){return ye};Gd=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};fa=function(e,t,n){switch(t){case"input":if(la(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ro(r);if(!s)throw Error(b(90));Sd(r),la(r,s)}}}break;case"textarea":Id(e,n);break;case"select":t=n.value,t!=null&&wr(e,!!n.multiple,t,!1)}};Td=Ui;Ad=Zn;var c0={usingClientEntryPoint:!1,Events:[Ds,hr,ro,jd,bd,Ui]},Yr={findFiberByHostInstance:Gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d0={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Md(e),e===null?null:e.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||i0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Zl=sl.inject(d0),Wt=sl}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c0;kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hi(t))throw Error(b(200));return a0(e,t,null,n)};kt.createRoot=function(e,t){if(!Hi(e))throw Error(b(299));var n=!1,r="",s=hh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bi(e,1,!1,null,null,n,!1,r,s),e[on]=t.current,ws(e.nodeType===8?e.parentNode:e),new Gi(t)};kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=Md(t),e=e===null?null:e.stateNode,e};kt.flushSync=function(e){return Zn(e)};kt.hydrate=function(e,t,n){if(!ho(t))throw Error(b(200));return mo(null,e,t,!0,n)};kt.hydrateRoot=function(e,t,n){if(!Hi(e))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=hh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fh(t,null,e,1,n??null,s,!1,l,o),e[on]=t.current,ws(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new fo(t)};kt.render=function(e,t,n){if(!ho(t))throw Error(b(200));return mo(null,e,t,!1,n)};kt.unmountComponentAtNode=function(e){if(!ho(e))throw Error(b(40));return e._reactRootContainer?(Zn(function(){mo(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};kt.unstable_batchedUpdates=Ui;kt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ho(n))throw Error(b(200));if(e==null||e._reactInternals===void 0)throw Error(b(38));return mo(e,t,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function mh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mh)}catch(e){console.error(e)}}mh(),hd.exports=kt;var Qi=hd.exports,gc=Qi;Jo.createRoot=gc.createRoot,Jo.hydrateRoot=gc.hydrateRoot;const f0="modulepreload",h0=function(e){return"/"+e},yc={},rt=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(i=>{if(i=h0(i),i in yc)return;yc[i]=!0;const c=i.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":f0,c||(d.as="script"),d.crossOrigin="",d.href=i,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,x)=>{d.addEventListener("load",h),d.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&l(a.reason);return t().catch(l)})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bs(){return bs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bs.apply(this,arguments)}var kn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(kn||(kn={}));const vc="popstate";function m0(e){e===void 0&&(e={});function t(r,s){let{pathname:l,search:o,hash:a}=r.location;return Ha("",{pathname:l,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ql(s)}return g0(t,n,null,e)}function Ae(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Wi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function p0(){return Math.random().toString(36).substr(2,8)}function xc(e,t){return{usr:e.state,key:e.key,idx:t}}function Ha(e,t,n,r){return n===void 0&&(n=null),bs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ur(t):t,{state:n,key:t&&t.key||r||p0()})}function ql(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ur(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g0(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,o=s.history,a=kn.Pop,i=null,c=f();c==null&&(c=0,o.replaceState(bs({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=kn.Pop;let E=f(),m=E==null?null:E-c;c=E,i&&i({action:a,location:S.location,delta:m})}function h(E,m){a=kn.Push;let p=Ha(S.location,E,m);c=f()+1;let y=xc(p,c),w=S.createHref(p);try{o.pushState(y,"",w)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(w)}l&&i&&i({action:a,location:S.location,delta:1})}function x(E,m){a=kn.Replace;let p=Ha(S.location,E,m);c=f();let y=xc(p,c),w=S.createHref(p);o.replaceState(y,"",w),l&&i&&i({action:a,location:S.location,delta:0})}function v(E){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof E=="string"?E:ql(E);return p=p.replace(/ $/,"%20"),Ae(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let S={get action(){return a},get location(){return e(s,o)},listen(E){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(vc,d),i=E,()=>{s.removeEventListener(vc,d),i=null}},createHref(E){return t(s,E)},createURL:v,encodeLocation(E){let m=v(E);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:x,go(E){return o.go(E)}};return S}var wc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wc||(wc={}));function y0(e,t,n){return n===void 0&&(n="/"),v0(e,t,n)}function v0(e,t,n,r){let s=typeof t=="string"?Ur(t):t,l=qi(s.pathname||"/",n);if(l==null)return null;let o=ph(e);x0(o);let a=null;for(let i=0;a==null&&i<o.length;++i){let c=A0(l);a=j0(o[i],c)}return a}function ph(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,o,a)=>{let i={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};i.relativePath.startsWith("/")&&(Ae(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let c=An([r,i.relativePath]),f=n.concat(i);l.children&&l.children.length>0&&(Ae(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ph(l.children,t,f,c)),!(l.path==null&&!l.index)&&t.push({path:c,score:C0(c,l.index),routesMeta:f})};return e.forEach((l,o)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))s(l,o);else for(let i of gh(l.path))s(l,o,i)}),t}function gh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let o=gh(r.join("/")),a=[];return a.push(...o.map(i=>i===""?l:[l,i].join("/"))),s&&a.push(...o),a.map(i=>e.startsWith("/")&&i===""?"/":i)}function x0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:P0(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const w0=/^:[\w-]+$/,S0=3,k0=2,I0=1,N0=10,E0=-2,Sc=e=>e==="*";function C0(e,t){let n=e.split("/"),r=n.length;return n.some(Sc)&&(r+=E0),t&&(r+=k0),n.filter(s=>!Sc(s)).reduce((s,l)=>s+(w0.test(l)?S0:l===""?I0:N0),r)}function P0(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function j0(e,t,n){let{routesMeta:r}=e,s={},l="/",o=[];for(let a=0;a<r.length;++a){let i=r[a],c=a===r.length-1,f=l==="/"?t:t.slice(l.length)||"/",d=b0({path:i.relativePath,caseSensitive:i.caseSensitive,end:c},f),h=i.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:An([l,d.pathname]),pathnameBase:z0(An([l,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(l=An([l,d.pathnameBase]))}return o}function b0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=T0(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],o=l.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,f,d)=>{let{paramName:h,isOptional:x}=f;if(h==="*"){let S=a[d]||"";o=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[d];return x&&!v?c[h]=void 0:c[h]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:l,pathnameBase:o,pattern:e}}function T0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Wi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,i)=>(r.push({paramName:a,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function A0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const R0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_0=e=>R0.test(e);function M0(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Ur(e):e,l;if(n)if(_0(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Wi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=kc(n.substring(1),"/"):l=kc(n,t)}else l=t;return{pathname:l,search:$0(r),hash:U0(s)}}function kc(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ho(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Yi(e,t){let n=L0(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ki(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Ur(e):(s=bs({},e),Ae(!s.pathname||!s.pathname.includes("?"),Ho("?","pathname","search",s)),Ae(!s.pathname||!s.pathname.includes("#"),Ho("#","pathname","hash",s)),Ae(!s.search||!s.search.includes("#"),Ho("#","search","hash",s)));let l=e===""||s.pathname==="",o=l?"/":s.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?t[d]:"/"}let i=M0(s,a),c=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(c||f)&&(i.pathname+="/"),i}const An=e=>e.join("/").replace(/\/\/+/g,"/"),z0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,U0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function D0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yh=["post","put","patch","delete"];new Set(yh);const O0=["get",...yh];new Set(O0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ts.apply(this,arguments)}const Xi=g.createContext(null),F0=g.createContext(null),Un=g.createContext(null),po=g.createContext(null),dn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),vh=g.createContext(null);function B0(e,t){let{relative:n}=t===void 0?{}:t;Dr()||Ae(!1);let{basename:r,navigator:s}=g.useContext(Un),{hash:l,pathname:o,search:a}=wh(e,{relative:n}),i=o;return r!=="/"&&(i=o==="/"?r:An([r,o])),s.createHref({pathname:i,search:a,hash:l})}function Dr(){return g.useContext(po)!=null}function Yt(){return Dr()||Ae(!1),g.useContext(po).location}function xh(e){g.useContext(Un).static||g.useLayoutEffect(e)}function Or(){let{isDataRoute:e}=g.useContext(dn);return e?tg():V0()}function V0(){Dr()||Ae(!1);let e=g.useContext(Xi),{basename:t,future:n,navigator:r}=g.useContext(Un),{matches:s}=g.useContext(dn),{pathname:l}=Yt(),o=JSON.stringify(Yi(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return xh(()=>{a.current=!0}),g.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Ki(c,JSON.parse(o),l,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:An([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,l,e])}function Rv(){let{matches:e}=g.useContext(dn),t=e[e.length-1];return t?t.params:{}}function wh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=g.useContext(Un),{matches:s}=g.useContext(dn),{pathname:l}=Yt(),o=JSON.stringify(Yi(s,r.v7_relativeSplatPath));return g.useMemo(()=>Ki(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function G0(e,t){return H0(e,t)}function H0(e,t,n,r){Dr()||Ae(!1);let{navigator:s}=g.useContext(Un),{matches:l}=g.useContext(dn),o=l[l.length-1],a=o?o.params:{};o&&o.pathname;let i=o?o.pathnameBase:"/";o&&o.route;let c=Yt(),f;if(t){var d;let E=typeof t=="string"?Ur(t):t;i==="/"||(d=E.pathname)!=null&&d.startsWith(i)||Ae(!1),f=E}else f=c;let h=f.pathname||"/",x=h;if(i!=="/"){let E=i.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=y0(e,{pathname:x}),S=K0(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:An([i,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?i:An([i,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),l,n,r);return t&&S?g.createElement(po.Provider,{value:{location:Ts({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:kn.Pop}},S):S}function Q0(){let e=eg(),t=D0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const W0=g.createElement(Q0,null);class q0 extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(dn.Provider,{value:this.props.routeContext},g.createElement(vh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y0(e){let{routeContext:t,match:n,children:r}=e,s=g.useContext(Xi);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(dn.Provider,{value:t},r)}function K0(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||Ae(!1),o=o.slice(0,Math.min(o.length,f+1))}let i=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:h,errors:x}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){i=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let x,v=!1,S=null,E=null;n&&(x=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||W0,i&&(c<0&&h===0?(ng("route-fallback"),v=!0,E=null):c===h&&(v=!0,E=d.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,h+1)),p=()=>{let y;return x?y=S:v?y=E:d.route.Component?y=g.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,g.createElement(Y0,{match:d,routeContext:{outlet:f,matches:m,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?g.createElement(q0,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Sh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Sh||{}),kh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kh||{});function X0(e){let t=g.useContext(Xi);return t||Ae(!1),t}function J0(e){let t=g.useContext(F0);return t||Ae(!1),t}function Z0(e){let t=g.useContext(dn);return t||Ae(!1),t}function Ih(e){let t=Z0(),n=t.matches[t.matches.length-1];return n.route.id||Ae(!1),n.route.id}function eg(){var e;let t=g.useContext(vh),n=J0(),r=Ih();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function tg(){let{router:e}=X0(Sh.UseNavigateStable),t=Ih(kh.UseNavigateStable),n=g.useRef(!1);return xh(()=>{n.current=!0}),g.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ts({fromRouteId:t},l)))},[e,t])}const Ic={};function ng(e,t,n){Ic[e]||(Ic[e]=!0)}function rg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sg(e){let{to:t,replace:n,state:r,relative:s}=e;Dr()||Ae(!1);let{future:l,static:o}=g.useContext(Un),{matches:a}=g.useContext(dn),{pathname:i}=Yt(),c=Or(),f=Ki(t,Yi(a,l.v7_relativeSplatPath),i,s==="path"),d=JSON.stringify(f);return g.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function et(e){Ae(!1)}function lg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=kn.Pop,navigator:l,static:o=!1,future:a}=e;Dr()&&Ae(!1);let i=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:i,navigator:l,static:o,future:Ts({v7_relativeSplatPath:!1},a)}),[i,a,l,o]);typeof r=="string"&&(r=Ur(r));let{pathname:f="/",search:d="",hash:h="",state:x=null,key:v="default"}=r,S=g.useMemo(()=>{let E=qi(f,i);return E==null?null:{location:{pathname:E,search:d,hash:h,state:x,key:v},navigationType:s}},[i,f,d,h,x,v,s]);return S==null?null:g.createElement(Un.Provider,{value:c},g.createElement(po.Provider,{children:n,value:S}))}function og(e){let{children:t,location:n}=e;return G0(Qa(t),n)}new Promise(()=>{});function Qa(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let l=[...t,s];if(r.type===g.Fragment){n.push.apply(n,Qa(r.props.children,l));return}r.type!==et&&Ae(!1),!r.props.index||!r.props.children||Ae(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qa(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wa.apply(this,arguments)}function ag(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,l;for(l=0;l<r.length;l++)s=r[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ig(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ug(e,t){return e.button===0&&(!t||t==="_self")&&!ig(e)}function qa(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function cg(e,t){let n=qa(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(l=>{n.append(s,l)})}),n}const dg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fg="6";try{window.__reactRouterVersion=fg}catch{}const hg="startTransition",Nc=tm[hg];function mg(e){let{basename:t,children:n,future:r,window:s}=e,l=g.useRef();l.current==null&&(l.current=m0({window:s,v5Compat:!0}));let o=l.current,[a,i]=g.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=g.useCallback(d=>{c&&Nc?Nc(()=>i(d)):i(d)},[i,c]);return g.useLayoutEffect(()=>o.listen(f),[o,f]),g.useEffect(()=>rg(r),[r]),g.createElement(lg,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const pg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ec=g.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:l,replace:o,state:a,target:i,to:c,preventScrollReset:f,viewTransition:d}=t,h=ag(t,dg),{basename:x}=g.useContext(Un),v,S=!1;if(typeof c=="string"&&gg.test(c)&&(v=c,pg))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),I=qi(w.pathname,x);w.origin===y.origin&&I!=null?c=I+w.search+w.hash:S=!0}catch{}let E=B0(c,{relative:s}),m=yg(c,{replace:o,state:a,target:i,preventScrollReset:f,relative:s,viewTransition:d});function p(y){r&&r(y),y.defaultPrevented||m(y)}return g.createElement("a",Wa({},h,{href:v||E,onClick:S||l?r:p,ref:n,target:i}))});var Cc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cc||(Cc={}));var Pc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Pc||(Pc={}));function yg(e,t){let{target:n,replace:r,state:s,preventScrollReset:l,relative:o,viewTransition:a}=t===void 0?{}:t,i=Or(),c=Yt(),f=wh(e,{relative:o});return g.useCallback(d=>{if(ug(d,n)){d.preventDefault();let h=r!==void 0?r:ql(c)===ql(f);i(e,{replace:h,state:s,preventScrollReset:l,relative:o,viewTransition:a})}},[c,i,f,r,s,n,e,l,o,a])}function _v(e){let t=g.useRef(qa(e)),n=g.useRef(!1),r=Yt(),s=g.useMemo(()=>cg(r.search,n.current?null:t.current),[r.search]),l=Or(),o=g.useCallback((a,i)=>{const c=qa(typeof a=="function"?a(s):a);n.current=!0,l("?"+c,i)},[l,s]);return[s,o]}const vg={},jc=e=>{let t;const n=new Set,r=(f,d)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const x=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,x))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(vg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,i);return i},xg=e=>e?jc(e):jc;var Nh={exports:{}},Eh={},Ch={exports:{}},Ph={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr=g;function wg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sg=typeof Object.is=="function"?Object.is:wg,kg=Mr.useState,Ig=Mr.useEffect,Ng=Mr.useLayoutEffect,Eg=Mr.useDebugValue;function Cg(e,t){var n=t(),r=kg({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return Ng(function(){s.value=n,s.getSnapshot=t,Qo(s)&&l({inst:s})},[e,n,t]),Ig(function(){return Qo(s)&&l({inst:s}),e(function(){Qo(s)&&l({inst:s})})},[e]),Eg(n),n}function Qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Sg(e,n)}catch{return!0}}function Pg(e,t){return t()}var jg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Pg:Cg;Ph.useSyncExternalStore=Mr.useSyncExternalStore!==void 0?Mr.useSyncExternalStore:jg;Ch.exports=Ph;var bg=Ch.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=g,Tg=bg;function Ag(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rg=typeof Object.is=="function"?Object.is:Ag,_g=Tg.useSyncExternalStore,Mg=go.useRef,Lg=go.useEffect,zg=go.useMemo,$g=go.useDebugValue;Eh.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var l=Mg(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=zg(function(){function i(x){if(!c){if(c=!0,f=x,x=r(x),s!==void 0&&o.hasValue){var v=o.value;if(s(v,x))return d=v}return d=x}if(v=d,Rg(f,x))return v;var S=r(x);return s!==void 0&&s(v,S)?(f=x,v):(f=x,d=S)}var c=!1,f,d,h=n===void 0?null:n;return[function(){return i(t())},h===null?void 0:function(){return i(h())}]},[t,n,r,s]);var a=_g(e,l[0],l[1]);return Lg(function(){o.hasValue=!0,o.value=a},[a]),$g(a),a};Nh.exports=Eh;var Ug=Nh.exports;const Dg=td(Ug),jh={},{useDebugValue:Og}=ti,{useSyncExternalStoreWithSelector:Fg}=Dg;let bc=!1;const Bg=e=>e;function Vg(e,t=Bg,n){(jh?"production":void 0)!=="production"&&n&&!bc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),bc=!0);const r=Fg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Og(r),r}const Tc=e=>{(jh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?xg(e):e,n=(r,s)=>Vg(t,r,s);return Object.assign(n,t),n},rr=e=>e?Tc(e):Tc,Gg={};function Hg(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var l;const o=i=>i===null?null:JSON.parse(i,void 0),a=(l=n.getItem(s))!=null?l:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,l)=>n.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>n.removeItem(s)}}const As=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return As(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return As(r)(n)}}}},Qg=(e,t)=>(n,r,s)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,m)=>({...m,...E}),...t},o=!1;const a=new Set,i=new Set;let c;try{c=l.getStorage()}catch{}if(!c)return e((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...E)},r,s);const f=As(l.serialize),d=()=>{const E=l.partialize({...r()});let m;const p=f({state:E,version:l.version}).then(y=>c.setItem(l.name,y)).catch(y=>{m=y});if(m)throw m;return p},h=s.setState;s.setState=(E,m)=>{h(E,m),d()};const x=e((...E)=>{n(...E),d()},r,s);let v;const S=()=>{var E;if(!c)return;o=!1,a.forEach(p=>p(r()));const m=((E=l.onRehydrateStorage)==null?void 0:E.call(l,r()))||void 0;return As(c.getItem.bind(c))(l.name).then(p=>{if(p)return l.deserialize(p)}).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==l.version){if(l.migrate)return l.migrate(p.state,p.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return p.state}).then(p=>{var y;return v=l.merge(p,(y=r())!=null?y:x),n(v,!0),d()}).then(()=>{m==null||m(v,void 0),o=!0,i.forEach(p=>p(v))}).catch(p=>{m==null||m(void 0,p)})};return s.persist={setOptions:E=>{l={...l,...E},E.getStorage&&(c=E.getStorage())},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(i.add(E),()=>{i.delete(E)})},S(),v||x},Wg=(e,t)=>(n,r,s)=>{let l={storage:Hg(()=>localStorage),partialize:S=>S,version:0,merge:(S,E)=>({...E,...S}),...t},o=!1;const a=new Set,i=new Set;let c=l.storage;if(!c)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...S)},r,s);const f=()=>{const S=l.partialize({...r()});return c.setItem(l.name,{state:S,version:l.version})},d=s.setState;s.setState=(S,E)=>{d(S,E),f()};const h=e((...S)=>{n(...S),f()},r,s);s.getInitialState=()=>h;let x;const v=()=>{var S,E;if(!c)return;o=!1,a.forEach(p=>{var y;return p((y=r())!=null?y:h)});const m=((E=l.onRehydrateStorage)==null?void 0:E.call(l,(S=r())!=null?S:h))||void 0;return As(c.getItem.bind(c))(l.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==l.version){if(l.migrate)return[!0,l.migrate(p.state,p.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var y;const[w,I]=p;if(x=l.merge(I,(y=r())!=null?y:h),n(x,!0),w)return f()}).then(()=>{m==null||m(x,void 0),x=r(),o=!0,i.forEach(p=>p(x))}).catch(p=>{m==null||m(void 0,p)})};return s.persist={setOptions:S=>{l={...l,...S},S.storage&&(c=S.storage)},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(i.add(S),()=>{i.delete(S)})},l.skipHydration||v(),x||h},qg=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Gg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Qg(e,t)):Wg(e,t),Fs=qg,A={log:(...e)=>{},warn:(...e)=>{},error:(...e)=>{console.error(...e)},debug:(...e)=>{}};function bh(e){let t=null,n=null;function r(){return t?Promise.resolve(t):n||(n=new Promise((s,l)=>{const o=indexedDB.open(e,1);o.onupgradeneeded=()=>{const a=o.result;a.objectStoreNames.contains("zustand")||a.createObjectStore("zustand")},o.onsuccess=()=>{t=o.result,t.onclose=()=>{t=null,n=null},s(t)},o.onerror=()=>{n=null,l(o.error)}}),n)}return{getItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readonly").objectStore("zustand").get(s);c.onsuccess=()=>{const f=c.result;o(f?JSON.parse(f):null)},c.onerror=()=>{o(null)}})}catch{return null}},setItem:async(s,l)=>{const o=await r();return new Promise((a,i)=>{const d=o.transaction(["zustand"],"readwrite").objectStore("zustand").put(JSON.stringify(l),s);d.onsuccess=()=>{a()},d.onerror=()=>{i(d.error)}})},removeItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readwrite").objectStore("zustand").delete(s);c.onsuccess=()=>{o()},c.onerror=()=>{o()}})}catch{}}}}const Rs={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){A.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){A.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){A.error("Failed to clear localStorage:",e)}}};function Yg(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}function Mv(e){const t=Math.floor(e/1e7),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function kl(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function Lv(e){return e&&kl(e).replace(/'/g,"")}function $t(){return(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!("MSStream"in window)}function Kg(e){if(!e||e.trim()==="")return null;const t=e.trim().toLowerCase(),n=t.indexOf("_");return n===-1?{category:t,value:null}:{category:t.substring(0,n),value:t.substring(n+1)}}function tt(e){if(e.length<=1)return[...e];const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}const Xg=bh("tunetuna-storage");function Ac(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function zv(e){const t=new Map;e.forEach(r=>{r.Grouping&&r.Grouping.forEach(s=>{const l=Kg(s);l&&(t.has(l.category)||t.set(l.category,new Set),l.value&&t.get(l.category).add(l.value))})});const n=[];for(const[r,s]of t)n.push({name:Ac(r),key:r,values:Array.from(s).map(l=>Ac(l)).sort(),isSingleValue:s.size===0});return n.sort((r,s)=>r.name.localeCompare(s.name))}const ue=rr()(Fs(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],shufflePool:[],lastPoolUpdate:null,loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1,feed:!1},feedTopSongs:[],feedNewReleases:[],feedLastUpdated:null,sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},recentlyAccessedMoods:{},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(l=>l.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t}),refreshShufflePool:()=>e(t=>{let r=t.songs;const s=Object.values(t.genreSongs).flat().length;if(t.songs.length===0&&s>0&&(r=Object.values(t.genreSongs).flat()),r.length===0)return{shufflePool:[]};const l=new Set(t.recentlyPlayed.slice(0,10).map(i=>i.Id));r=r.filter(i=>!l.has(i.Id));let o=r;if(o.length<30){const i=t.recentlyPlayed.slice(0,30-o.length);o=[...o,...i.map(c=>t.songs.find(f=>f.Id===c.Id)).filter(Boolean)]}return{shufflePool:tt(o).slice(0,30),lastPoolUpdate:Date.now()}}),setFeedTopSongs:t=>e({feedTopSongs:t}),setFeedNewReleases:t=>e({feedNewReleases:t}),setFeedLastUpdated:t=>e({feedLastUpdated:t}),recordMoodAccess:t=>e(n=>({recentlyAccessedMoods:{...n.recentlyAccessedMoods,[t.toLowerCase()]:Date.now()}}))}),{name:"music-storage",storage:Xg,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,shufflePool:e.shufflePool,lastPoolUpdate:e.lastPoolUpdate,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed,recentlyAccessedMoods:e.recentlyAccessedMoods,feedTopSongs:e.feedTopSongs,feedNewReleases:e.feedNewReleases,feedLastUpdated:e.feedLastUpdated})})),Rc=3e4,_c=15e3,ll=2,Mc=1e3,Lc=12*60*60*1e3,$v=6*60*60*1e3,Et=200,zc=1e3,$c=5e4,Jg=/^https?:\/\/100\.\d+\.\d+\.\d+/,Th="Tunetuna",Zg="Web",Ah="1.0.0",Ye=rr()(Fs(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!0,stats:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),showQueueRecommendations:!0,setShowQueueRecommendations:t=>e({showQueueRecommendations:t}),recommendationsQuality:"good",setRecommendationsQuality:t=>e({recommendationsQuality:t}),statsTrackingEnabled:!0,setStatsTrackingEnabled:t=>e({statsTrackingEnabled:t}),feedCountry:"gb",setFeedCountry:t=>e({feedCountry:t}),showMoodCards:!0,setShowMoodCards:t=>e({showMoodCards:t}),showTop10:!0,setShowTop10:t=>e({showTop10:t}),showNewReleases:!1,setShowNewReleases:t=>e({showNewReleases:t}),showRecentlyPlayed:!0,setShowRecentlyPlayed:t=>e({showRecentlyPlayed:t}),muspyRssUrl:"",setMuspyRssUrl:t=>e({muspyRssUrl:t}),localServerUrl:"",setLocalServerUrl:t=>e({localServerUrl:t})}),{name:"settings-storage"})),e1=Object.freeze(Object.defineProperty({__proto__:null,useSettingsStore:Ye},Symbol.toStringTag,{value:"Module"})),Ge=rr(e=>({toasts:[],addToast:(t,n="success",r=3e3)=>{const s=`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,l={id:s,message:t,type:n,duration:r};e(o=>({toasts:[...o.toasts,l]})),r>0&&setTimeout(()=>{e(o=>({toasts:o.toasts.filter(a=>a.id!==s)}))},r)},removeToast:t=>{e(n=>({toasts:n.toasts.filter(r=>r.id!==t)}))}})),Vt="/api/stats",t1=bh("tunetuna-stats-storage");async function n1(e,t){const n=`${e}::${t}`,r=new TextEncoder,s=await crypto.subtle.digest("SHA-256",r.encode(n));return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}function r1(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function s1(e){var t,n;return{ts:Date.now(),songId:e.Id,songName:e.Name||"Unknown",artistIds:((t=e.ArtistItems)==null?void 0:t.map(r=>r.Id))||[],artistNames:((n=e.ArtistItems)==null?void 0:n.map(r=>r.Name||"Unknown"))||[e.AlbumArtist||"Unknown"],albumId:e.AlbumId||"",albumName:e.Album||"Unknown",genres:e.Genres||[],year:e.ProductionYear||null,fullDurationMs:e.RunTimeTicks?e.RunTimeTicks/1e4:0}}let Wo=!1;const We=rr()(Fs((e,t)=>({pendingEvents:[],lastSyncedAt:null,cachedEvents:[],cacheRange:null,currentPlay:null,cachedStatsKey:null,cachedStatsToken:null,metadataVersion:0,oldestEventTs:null,startPlay:n=>{e({currentPlay:{track:n,startedAt:Date.now()}})},recordPlay:(n,r)=>{if(!Ye.getState().statsTrackingEnabled)return;const{pendingEvents:s}=t(),l=n.RunTimeTicks?n.RunTimeTicks/1e4:0,o=l>0&&l<6e4;if(!(r>=6e4||o&&r>=l*.8))return;const i=s1(n),c=[...s,i];e({pendingEvents:c,currentPlay:null}),t().syncToServer()},syncToServer:async()=>{if(!Wo){Wo=!0;try{const{pendingEvents:n}=t();if(n.length===0)return;const{serverUrl:r,userId:s}=$e.getState();if(!r||!s)return;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return;const a=[...n];try{const i=await fetch(`${Vt}/${l}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":o},body:JSON.stringify({_token:o,events:a})});i.ok?e(c=>({pendingEvents:c.pendingEvents.filter(f=>!a.some(d=>d.ts===f.ts&&d.songId===f.songId)),lastSyncedAt:Date.now(),cacheRange:null})):console.error("[Stats] Sync failed:",i.status,i.statusText)}catch(i){console.error("[Stats] Sync error:",i)}}finally{Wo=!1}}},updateStatsKey:async()=>{const{serverUrl:n,userId:r}=$e.getState();if(!n||!r){e({cachedStatsKey:null,cachedStatsToken:null});return}const{cachedStatsToken:s}=t(),l=s||r1(),o=await n1(n,r);e({cachedStatsKey:o,cachedStatsToken:l})},fetchEvents:async(n,r)=>{const{cacheRange:s,cachedEvents:l,pendingEvents:o}=t(),{serverUrl:a,userId:i}=$e.getState();if(!a||!i)return[];if(s&&s.from<=n&&s.to>=r){const d=l.filter(x=>x.ts>=n&&x.ts<=r),h=o.filter(x=>x.ts>=n&&x.ts<=r);return[...d,...h].sort((x,v)=>x.ts-v.ts)}await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(!c||!f)return[];try{const d=await fetch(`${Vt}/${c}/events?from=${n}&to=${r}`,{headers:{"X-Stats-Token":f}});if(!d.ok)return[];const x=(await d.json()).events||[];e({cachedEvents:x,cacheRange:{from:n,to:r}});const v=o.filter(S=>S.ts>=n&&S.ts<=r);return[...x,...v].sort((S,E)=>S.ts-E.ts)}catch{return[]}},clearCache:()=>{e({cachedEvents:[],cacheRange:null})},updateEventMetadata:(n,r,s)=>{const{cachedEvents:l,pendingEvents:o}=t(),a=i=>{let c=!1;return(n==="song"&&i.songId===r||n==="album"&&i.albumId===r||n==="artist"&&i.artistIds.includes(r))&&(c=!0),c?{...i,...s.songName!==void 0&&{songName:s.songName},...s.artistNames!==void 0&&{artistNames:s.artistNames},...s.albumName!==void 0&&{albumName:s.albumName},...s.genres!==void 0&&{genres:s.genres},...s.year!==void 0&&{year:s.year}}:i};e(i=>({cachedEvents:l.map(a),pendingEvents:o.map(a),metadataVersion:i.metadataVersion+1})),(async()=>{const{serverUrl:i,userId:c}=$e.getState();if(!i||!c)return;await t().updateStatsKey();const{cachedStatsKey:f,cachedStatsToken:d}=t();if(!(!f||!d))try{await fetch(`${Vt}/${f}/events/metadata`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Stats-Token":d},body:JSON.stringify({itemType:n,itemId:r,metadata:s})})}catch{}})()},exportStats:async()=>{const{pendingEvents:n}=t(),{serverUrl:r,userId:s}=$e.getState();let l=[...n];if(r&&s){await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(c&&f)try{const d=await fetch(`${Vt}/${c}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":f}});if(d.ok){const x=(await d.json()).events||[],v=new Set(l.map(S=>`${S.ts}-${S.songId}`));for(const S of x){const E=`${S.ts}-${S.songId}`;v.has(E)||l.push(S)}}}catch{}}l.sort((c,f)=>c.ts-f.ts);const o=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download=`tunetuna-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},clearLocalStats:()=>{e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null})},clearAllStats:async()=>{const{serverUrl:n,userId:r}=$e.getState();if(e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null}),n&&r){await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l}=t();if(s&&l)try{return(await fetch(`${Vt}/${s}/events`,{method:"DELETE",headers:{"X-Stats-Token":l}})).ok}catch{return!1}}return!0},importStats:async n=>{const{serverUrl:r,userId:s}=$e.getState();if(!r||!s)throw new Error("Not authenticated");const l=await n.text();let o;try{o=JSON.parse(l)}catch{throw new Error("Invalid JSON file")}if(!Array.isArray(o))throw new Error("File must contain an array of events");const a=o.filter(v=>typeof v.ts=="number"&&typeof v.songId=="string"&&typeof v.songName=="string"&&Array.isArray(v.artistIds)&&Array.isArray(v.artistNames)&&typeof v.albumId=="string"&&typeof v.albumName=="string"&&Array.isArray(v.genres)&&typeof v.fullDurationMs=="number");if(a.length===0)throw new Error("No valid events found in file");await t().updateStatsKey();const{cachedStatsKey:i,cachedStatsToken:c}=t();if(!i||!c)throw new Error("Failed to initialize stats authentication");let f=new Set;try{const v=await fetch(`${Vt}/${i}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":c}});if(v.ok){const E=(await v.json()).events||[];f=new Set(E.map(m=>`${m.ts}-${m.songId}`))}}catch{}const{pendingEvents:d}=t();for(const v of d)f.add(`${v.ts}-${v.songId}`);const h=a.filter(v=>!f.has(`${v.ts}-${v.songId}`));if(h.length===0)return{imported:0,skipped:a.length};if(!(await fetch(`${Vt}/${i}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":c},body:JSON.stringify(h)})).ok)throw new Error("Failed to upload events");return e({cacheRange:null}),{imported:h.length,skipped:a.length-h.length}},hasStats:async()=>{var a;const{pendingEvents:n}=t();if(n.length>0)return!0;const{serverUrl:r,userId:s}=$e.getState();if(!r||!s)return!1;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return!1;try{const i=await fetch(`${Vt}/${l}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":o}});if(i.ok)return(((a=(await i.json()).events)==null?void 0:a.length)||0)>0}catch{}return!1},initializeOldestTs:async()=>{const{serverUrl:n,userId:r}=$e.getState();if(!n||!r)return;await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l,pendingEvents:o}=t();if(!(!s||!l))try{const a=await fetch(`${Vt}/${s}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":l}});if(a.ok){const c=(await a.json()).events||[];o.length>0&&await t().syncToServer();const f=[...c,...o];if(f.length>0){const d=Math.min(...f.map(h=>h.ts));e({oldestEventTs:d})}}}catch{}}}),{name:"stats-storage",storage:t1,partialize:e=>({pendingEvents:e.pendingEvents,lastSyncedAt:e.lastSyncedAt,cachedStatsToken:e.cachedStatsToken,oldestEventTs:e.oldestEventTs})}));let Uc=!1,qo=null;function Dc(){const{pendingEvents:e,cachedStatsKey:t,cachedStatsToken:n}=We.getState();if(e.length>0&&t&&n){const r={_token:n,events:e},s=new Blob([JSON.stringify(r)],{type:"application/json"});return navigator.sendBeacon(`${Vt}/${t}/events`,s),!0}return!1}function l1(){Uc||typeof document>"u"||(Uc=!0,document.addEventListener("visibilitychange",()=>{const{pendingEvents:e}=We.getState();document.visibilityState==="hidden"?e.length>0&&Dc():document.visibilityState==="visible"&&e.length>0&&We.getState().syncToServer()}),window.addEventListener("beforeunload",()=>{Dc()}),setTimeout(()=>{qo&&qo(),qo=$e.subscribe((n,r)=>{(n.serverUrl!==r.serverUrl||n.userId!==r.userId)&&(We.getState().updateStatsKey(),We.getState().initializeOldestTs())});const{serverUrl:e,userId:t}=$e.getState();e&&t&&(We.getState().updateStatsKey(),We.getState().initializeOldestTs())},0))}l1();const Oc=100,ds=new Set,Yl=new Map,Kl=new Set;let ft=null;function o1(){if(ds.size>Oc){const e=Array.from(ds);e.slice(0,e.length-Oc).forEach(n=>ds.delete(n))}}function Ya(){ds.clear();for(const e of Yl.values())clearTimeout(e);Yl.clear();for(const e of Kl)clearTimeout(e);Kl.clear(),ft&&(clearTimeout(ft),ft=null)}function Yo(e,t,n=5e3){const r=setTimeout(async()=>{const s=t();if((s==null?void 0:s.Id)===e)try{await z.markItemAsPlayed(e),ds.add(e),o1();const l=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}})),Kl.delete(l)},4e3);Kl.add(l)}catch{}Yl.delete(e)},n);Yl.set(e,r)}const ne=rr()(Fs((e,t)=>({songs:[],currentIndex:-1,previousIndex:-1,standardOrder:[],shuffleOrder:[],isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,nextAudioElement:null,nextTrackId:null,isFetchingRecommendations:!1,isLoadingMoreSongs:!1,shuffleHasMoreSongs:!1,lastPlayedTrack:null,isShuffleAllActive:!1,isShuffleGenreActive:!1,manuallyCleared:!1,hasRecordedCurrentTrackStats:!1,isQueueSidebarOpen:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setNextAudioElement:n=>{e({nextAudioElement:n}),n&&(n.volume=t().volume)},preBufferNextTrack:()=>{const{nextAudioElement:n,currentIndex:r,songs:s,repeat:l,nextTrackId:o}=t();if(!n||l==="one")return;let a=r+1;if(a>=s.length)if(l==="all")a=0;else{o&&(e({nextTrackId:null}),n.removeAttribute("src"),n.load());return}const i=s[a];if(!i||o===i.Id)return;const c=z.serverBaseUrl;if(!c)return;const f=`${c}/Audio/${i.Id}/stream?static=true`;n.src=f,n.load(),e({nextTrackId:i.Id})},swapToPreBuffered:()=>{const{audioElement:n,nextAudioElement:r,nextTrackId:s,currentIndex:l,songs:o,repeat:a}=t();if(!r||!s)return;let i=l+1;if(i>=o.length)if(a==="all")i=0;else return;const c=o[i];if(!c||c.Id!==s){t().cancelPreBuffer();return}const f=t();if(!f.hasRecordedCurrentTrackStats&&f.currentIndex>=0&&f.currentIndex<f.songs.length){const x=f.songs[f.currentIndex];We.getState().recordPlay(x,f.currentTime*1e3)}const d=l>=0?o[l]:null;if($t()){r.removeAttribute("src"),r.load();const x=z.serverBaseUrl;if(!x||!n)return;const v=`${x}/Audio/${c.Id}/stream?static=true`;e({nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:0,isPlaying:!0}),n.src=v,n.load(),n.play().then(()=>{Yo(c.Id,()=>t().songs[t().currentIndex]||null),ue.getState().addToRecentlyPlayed(c),We.getState().startPlay(c)}).catch(S=>{A.error("[iOS Gapless] Playback error:",S),e({isPlaying:!1})});return}n&&(n.pause(),n.removeAttribute("src"),n.load());const h=r.duration&&!isNaN(r.duration)?r.duration:0;e({audioElement:r,nextAudioElement:n,nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:h,isPlaying:!0}),r.play().then(()=>{Yo(c.Id,()=>t().songs[t().currentIndex]||null),ue.getState().addToRecentlyPlayed(c),We.getState().startPlay(c)}).catch(x=>{A.error("[Gapless] Playback error on swapped element:",x),e({isPlaying:!1})})},cancelPreBuffer:()=>{const{nextAudioElement:n}=t();n&&(n.removeAttribute("src"),n.load()),e({nextTrackId:null})},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setIsLoadingMoreSongs:n=>{e({isLoadingMoreSongs:n})},setCurrentTime:n=>{const{currentIndex:r,songs:s,hasRecordedCurrentTrackStats:l}=t();if(e({currentTime:n}),n>=60&&!l&&r>=0&&r<s.length){const o=s[r];We.getState().recordPlay(o,n*1e3),e({hasRecordedCurrentTrackStats:!0})}},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n);const s=t().nextAudioElement;s&&(s.volume=n)},clearQueue:()=>{t().cancelPreBuffer(),ft&&(clearTimeout(ft),ft=null),e(n=>{const r=n.currentIndex>=0?[n.songs[n.currentIndex]]:[];return{songs:r,currentIndex:r.length>0?0:-1,previousIndex:-1,standardOrder:r.map(s=>s.Id),shuffleOrder:r.map(s=>s.Id),manuallyCleared:!0}})},addToQueue:(n,r=!1,s="user")=>{t().cancelPreBuffer(),e(l=>{const o=l.currentIndex>=0?l.songs[l.currentIndex]:null,a=n.map(v=>({...v,source:s}));let i;const c=a;if(r){const v=l.shuffle?tt([...a]):a,S=l.currentIndex+1,E=l.songs.slice(0,S),m=l.songs.slice(S);i=[...E,...v,...m]}else if(s==="recommendation")i=[...l.songs,...c];else{const v=l.songs.findIndex((S,E)=>E>l.currentIndex&&S.source==="recommendation");v!==-1?i=[...l.songs.slice(0,v),...c,...l.songs.slice(v)]:i=[...l.songs,...c]}let f=l.currentIndex;if(l.currentIndex>=0&&o){const v=i.findIndex(S=>S.Id===o.Id);v!==-1?f=v:A.error("[addToQueue] CRITICAL: Could not find current song in new queue!")}let d=i;if(i.length>1e3){const v=i.slice(0,f),S=i.slice(f+1),E=v.slice(-5),m=S,p=1e3-E.length-(o?1:0)-m.length,y=v.slice(-Math.max(0,p));d=[...y,...o?[o]:[],...m],f=o?y.length:-1}const x=d.filter(v=>v.source==="user").map(v=>v.Id);return{songs:d,currentIndex:f,standardOrder:x,shuffleOrder:x,manuallyCleared:!1}})},addToQueueWithToast:n=>{t().addToQueue(n,!1,"user");const r=n.length,s=r===1?"Added to queue":`${r} songs added to queue`;Ge.getState().addToast(s,"success",2e3)},removeFromQueue:n=>{t().cancelPreBuffer(),e(r=>{if(n<0||n>=r.songs.length)return r;const s=r.songs[n],l=r.songs.filter((f,d)=>d!==n);let o=r.standardOrder.filter(f=>f!==s.Id),a=r.shuffleOrder.filter(f=>f!==s.Id),i=r.currentIndex,c=r.previousIndex;return n<r.currentIndex?i=r.currentIndex-1:n===r.currentIndex&&(i=-1),n<r.previousIndex?c=r.previousIndex-1:n===r.previousIndex&&(c=-1),{songs:l,currentIndex:i,previousIndex:c,standardOrder:o,shuffleOrder:a}})},reorderQueue:(n,r)=>{t().cancelPreBuffer(),e(s=>{if(n<0||r<0||n>=s.songs.length||r>=s.songs.length||n===r)return s;const l=s.songs[n],o=s.songs[r];if(l.source!==o.source)return s;const a=[...s.songs],[i]=a.splice(n,1);if(a.splice(r,0,i),l.source==="user"){const f=s.shuffle?"shuffleOrder":"standardOrder",d=s[f],h=d.indexOf(l.Id);if(h>=0){const x=[...d];x.splice(h,1);const S=a.slice(0,r+1).filter(m=>m.source==="user").length-1;x.splice(S,0,l.Id);const E=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,[f]:x,currentIndex:E,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}}}const c=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,currentIndex:c,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}})},play:()=>{const{audioElement:n,currentIndex:r,songs:s,currentTime:l}=t();if(n&&r>=0&&r<s.length){const o=s[r],a=z.serverBaseUrl,i=a?`${a}/Audio/${o.Id}/stream?static=true`:"";n.src!==i?(n.src=i,n.load()):l===0&&n.currentTime>.5&&(n.currentTime=0,n.duration&&!isNaN(n.duration)&&e({duration:n.duration})),n.play().then(()=>{e({isPlaying:!0,hasRecordedCurrentTrackStats:!1}),Yo(o.Id,()=>t().songs[t().currentIndex]||null),ue.getState().addToRecentlyPlayed(o),We.getState().startPlay(o)}).catch(c=>{A.error("Playback error:",c),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const n=t();if(A.debug("[PlayerStore] next() called",{currentIndex:n.currentIndex,queueLength:n.songs.length}),n.songs.length===0)return;if(n.repeat==="one"&&n.currentIndex>=0){t().seek(0),t().play();return}let r=n.currentIndex+1;if(r>=n.songs.length)if(n.repeat==="all")r=0;else{if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];We.getState().recordPlay(o,n.currentTime*1e3)}t().pause();return}const s=n.songs[r];if(n.nextTrackId&&s&&n.nextTrackId===s.Id){t().swapToPreBuffered();return}if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];We.getState().recordPlay(o,n.currentTime*1e3)}const l=n.currentIndex>=0?n.songs[n.currentIndex]:null;e({previousIndex:n.currentIndex,currentIndex:r,lastPlayedTrack:l}),t().play()},previous:()=>{t().cancelPreBuffer(),e(n=>{if(n.songs.length===0)return n;let r=n.currentIndex,s=n.currentIndex;if(n.currentIndex>0)r=n.currentIndex-1;else if(n.repeat==="all")r=n.songs.length-1;else return n;return{currentIndex:r,previousIndex:s}}),t().play()},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n})),window.dispatchEvent(new CustomEvent("playerSeek"))},toggleShuffle:()=>{t().cancelPreBuffer(),e(n=>{const r=!n.shuffle;if(r){const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,o=n.songs.slice(n.currentIndex+1).filter(h=>h.source==="user"),a=n.songs.filter(h=>h.source==="recommendation"),i=tt(o.map(h=>h.Id)),c=i.map(h=>o.find(x=>x.Id===h)).filter(Boolean),f=[...s,...l?[l]:[],...c,...a],d=[...n.standardOrder.slice(0,n.currentIndex+1),...i];return{shuffle:r,shuffleOrder:d,songs:f}}else{const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,a=n.standardOrder.slice(n.currentIndex+1).map(f=>n.songs.find(d=>d.Id===f&&d.source==="user")).filter(Boolean),i=n.songs.filter(f=>f.source==="recommendation"),c=[...s,...l?[l]:[],...a,...i];return{shuffle:r,songs:c}}})},toggleRepeat:()=>{t().cancelPreBuffer(),e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{t().cancelPreBuffer();let s,l;r?(s=r,l=r.findIndex(a=>a.Id===n.Id),l===-1&&(s=[n,...r.filter(a=>a.Id!==n.Id)],l=0)):(s=[n],l=0);const o=s.map(a=>({...a,source:"user"}));e({songs:o,standardOrder:o.map(a=>a.Id),shuffleOrder:o.map(a=>a.Id),currentIndex:l,previousIndex:l>0?l-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playAlbum:(n,r=0)=>{t().cancelPreBuffer();const s=n.map(l=>({...l,source:"user"}));e({songs:s,standardOrder:s.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:r,previousIndex:r>0?r-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playNext:n=>{t().addToQueue(n,!0);const r=n.length,s=r===1?"Playing next":`${r} songs playing next`;Ge.getState().addToast(s,"success",2e3)},shuffleArtist:n=>{t().cancelPreBuffer();const r=n.map(l=>({...l,source:"user"})),s=tt(r);e({songs:s,standardOrder:r.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},shuffleAllSongs:async()=>{t().clearQueue();const{setShowQueueRecommendations:n}=Ye.getState();n(!1);const s=typeof window<"u"&&window.innerWidth<768?400:800,l=ue.getState();let o=[];if(l.shufflePool.length>=1){const d=Math.min(5,l.shufflePool.length);o=l.shufflePool.slice(0,d);const h=l.shufflePool.slice(d),x=l.songs,v=new Set(l.recentlyPlayed.slice(0,10).map(p=>p.Id)),S=x.filter(p=>!v.has(p.Id)),E=tt(S).slice(0,d),m=[...h,...E];ue.setState({shufflePool:m,lastPoolUpdate:Date.now()})}else{let d=l.songs;if(!d||d.length===0)try{d=(await z.getSongs({limit:Math.max(50,s),sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]}catch(h){A.error("Failed to fetch songs for shuffle all:",h);return}o=tt(d).slice(0,5),d.filter(h=>!o.some(x=>x.Id===h.Id)),ue.setState({songs:d,shufflePool:tt(d).slice(0,30),lastPoolUpdate:Date.now()})}const a=o.map(d=>({...d,source:"user"})),i=o.length,f=l.songs.length+Object.values(l.genreSongs).flat().length>o.length;e({songs:a,standardOrder:a.map(d=>d.Id),shuffleOrder:a.map(d=>d.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:f,manuallyCleared:!0}),t().play(),ft&&clearTimeout(ft),ft=setTimeout(async()=>{ft=null;try{const d=t();if(!d.shuffle||d.songs.length!==i)return;let h=l.songs;(!h||h.length===0)&&(h=(await z.getSongs({limit:s,sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]);const x=Object.values(l.genreSongs).flat(),v=[...h,...x],S=new Map;v.forEach(y=>S.set(y.Id,y));const E=Array.from(S.values()),m=new Set(a.map(y=>y.Id)),p=E.filter(y=>!m.has(y.Id));if(p.length>0){const y=Math.min(s-i,p.length),I=tt(p).slice(0,y).map(N=>({...N,source:"user"}));e(N=>{const k=new Set(a.map(Q=>Q.Id)),C=N.songs.filter(Q=>!k.has(Q.Id)&&Q.source==="user"),T=[...a,...C,...I];let P=N.currentIndex;if(C.length>0&&N.currentIndex>=a.length){const Q=N.songs[N.currentIndex];Q&&(P=T.findIndex(K=>K.Id===Q.Id))}return{songs:T,currentIndex:P>=0?P:N.currentIndex,standardOrder:T.map(Q=>Q.Id),shuffleOrder:T.map(Q=>Q.Id),shuffleHasMoreSongs:p.length>y,manuallyCleared:!1}}),ue.getState().refreshShufflePool()}}catch(d){A.error("Failed to expand shuffle queue:",d)}},100)},shuffleGenreSongs:async(n,r)=>{t().clearQueue();const{setShowQueueRecommendations:s}=Ye.getState();s(!1);const o=typeof window<"u"&&window.innerWidth<768?400:800,a=ue.getState().genreSongs[n];if(!a||a.length===0)return;const i=tt(a).slice(0,5),c=a.filter(h=>!i.some(x=>x.Id===h.Id)),f=i.map(h=>({...h,source:"user"})),d=a.length>5;e({songs:f,standardOrder:f.map(h=>h.Id),shuffleOrder:f.map(h=>h.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:d,manuallyCleared:!0}),t().play(),ft&&clearTimeout(ft),ft=setTimeout(async()=>{ft=null;try{const h=t();if(!h.shuffle||h.songs.length!==5)return;if(c.length>0){const x=Math.min(o-5,c.length),S=tt(c).slice(0,x).map(E=>({...E,source:"user"}));e(E=>{const m=new Set(f.map(I=>I.Id)),p=E.songs.filter(I=>!m.has(I.Id)&&I.source==="user"),y=[...f,...p,...S];let w=E.currentIndex;if(p.length>0&&E.currentIndex>=f.length){const I=E.songs[E.currentIndex];I&&(w=y.findIndex(N=>N.Id===I.Id))}return{songs:y,currentIndex:w>=0?w:E.currentIndex,standardOrder:y.map(I=>I.Id),shuffleOrder:y.map(I=>I.Id),shuffleHasMoreSongs:c.length>x,manuallyCleared:!1}})}}catch(h){A.error("Failed to expand genre shuffle queue:",h)}},100)},skipToTrack:n=>{t().cancelPreBuffer();const{songs:r,currentIndex:s}=t();if(n<0||n>=r.length)return;const l=s>=0?r[s]:null;e({previousIndex:s>=0?s:-1,currentIndex:n,lastPlayedTrack:l,currentTime:0}),t().play()},refreshCurrentTrack:async()=>{const{currentIndex:n,songs:r}=t();if(n<0||n>=r.length)return;const s=r[n];try{const l=await z.getSongById(s.Id);l&&e(o=>{const a=[...o.songs];return a[o.currentIndex]={...a[o.currentIndex],...l},{songs:a}})}catch(l){A.error("Failed to refresh current track:",l)}},toggleQueueSidebar:()=>{e(n=>({isQueueSidebarOpen:!n.isQueueSidebarOpen}))}}),{name:"player-storage",partialize:e=>({songs:e.songs,currentIndex:e.currentIndex,previousIndex:e.previousIndex,standardOrder:e.standardOrder,shuffleOrder:e.shuffleOrder,volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,isShuffleAllActive:e.isShuffleAllActive,isShuffleGenreActive:e.isShuffleGenreActive,manuallyCleared:e.manuallyCleared,isQueueSidebarOpen:e.isQueueSidebarOpen}),onRehydrateStorage:e=>{e&&(e.songs.length===0?(e.currentIndex=-1,e.previousIndex=-1,e.standardOrder=[],e.shuffleOrder=[]):e.currentIndex>=e.songs.length?(e.currentIndex=0,e.previousIndex=-1):e.currentIndex<-1&&(e.currentIndex=-1,e.previousIndex=-1),e.isPlaying=!1,e.currentTime=0,e.duration=0,e.audioElement=null,e.nextAudioElement=null,e.nextTrackId=null,e.isFetchingRecommendations=!1,e.isShuffleAllActive=!1,e.isShuffleGenreActive=!1)}}));class a1{constructor(){Nt(this,"baseUrl","");Nt(this,"accessToken","");Nt(this,"userId","");Nt(this,"genresCache",null);Nt(this,"isPreloading",!1);Nt(this,"pendingRequests",new Map)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getDeviceId(){let t=Rs.get("deviceId");return t||(t=Yg(),Rs.set("deviceId",t)),t}getEmbyAuthHeader(){return`MediaBrowser Client="${Th}", Device="${Zg}", DeviceId="${this.getDeviceId()}", Version="${Ah}"`}getVpnWarning(t){return Jg.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:""}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()}}async request(t,n={}){const r=`${this.baseUrl}${t}`,l=(n.method||"GET")==="GET",o=l?r:"";if(l&&this.pendingRequests.has(o))return this.pendingRequests.get(o);const a=this.executeRequest(r,n);return l&&(this.pendingRequests.set(o,a),a.finally(()=>{this.pendingRequests.delete(o)})),a}async executeRequest(t,n={}){let r=null;for(let s=0;s<=ll;s++){const l=new AbortController,o=setTimeout(()=>l.abort(),_c);try{const a=await fetch(t,{...n,signal:l.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(o),!a.ok)throw a.status===401?(Ya(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${a.statusText}`);return a.json()}catch(a){if(clearTimeout(o),r=a instanceof Error?a:new Error(String(a)),r.message.includes("Unauthorized")||r.name==="AbortError")break;s<ll&&await new Promise(i=>setTimeout(i,Mc*(s+1)))}}throw r||new Error("Request failed")}async requestVoid(t,n={}){const r=`${this.baseUrl}${t}`;let s=null;for(let l=0;l<=ll;l++){const o=new AbortController,a=setTimeout(()=>o.abort(),_c);try{const i=await fetch(r,{...n,signal:o.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(a),!i.ok)throw i.status===401?(Ya(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${i.statusText}`);return}catch(i){if(clearTimeout(a),s=i instanceof Error?i:new Error(String(i)),s.message.includes("Unauthorized")||s.name==="AbortError")break;l<ll&&await new Promise(c=>setTimeout(c,Mc*(l+1)))}}throw s||new Error("Request failed")}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",l=new AbortController,o=setTimeout(()=>{l.abort()},Rc);let a;try{a=await fetch(s,{method:"POST",signal:l.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(o)}catch(c){if(clearTimeout(o),c instanceof Error&&c.name==="AbortError"){const f=this.getVpnWarning(t);throw new Error(`Request timeout - server did not respond within ${Rc/1e3} seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${f}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(c instanceof TypeError){const f=c.message.toLowerCase();if(f.includes("failed to fetch")||f.includes("networkerror")){const d=this.getVpnWarning(t);throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${d}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${c.message}`)}throw c}if(!a.ok){const c=await a.text().catch(()=>"");throw new Error(c||`Authentication failed (${a.status})`)}const i=await a.json();return this.setCredentials(t,i.AccessToken,i.User.Id),i}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,a=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&a.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${a.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&(Array.isArray(t.sortOrder)?t.sortOrder.forEach(s=>r.append("SortOrder",s)):r.append("SortOrder",t.sortOrder)),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.genres&&t.genres.forEach(s=>r.append("Genres",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.tags&&t.tags.forEach(s=>r.append("Tags",s)),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Tags,ProductionYear,DateCreated,DateModified,DateLastSaved,AlbumArtist,ArtistItems,Album,AlbumId,ChildCount"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return A.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return A.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Grouping,MediaSources"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return A.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=ue.getState();if(!t&&n.genres.length>0&&n.genresLastUpdated){const r=Date.now(),s=n.genresLastChecked||0;if(!(r-s>=Lc))return this.genresCache=n.genres,n.genres;try{const o=await this.getRecentlyAdded(50),a=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),i=[...o.Items||[],...a.Items||[]];let c=0;for(const f of i){if(f.DateCreated){const d=new Date(f.DateCreated).getTime();d>c&&(c=d)}if(f.DateLastSaved){const d=new Date(f.DateLastSaved).getTime();d>c&&(c=d)}}if(ue.setState({genresLastChecked:r}),c<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch{return this.genresCache=n.genres,n.genres}}try{const r=await this.fetchAllSongsLightweight(),s=this.buildGenresFromSongs(r),l=Date.now();return ue.getState().setGenres(s),ue.setState({genresLastUpdated:l,genresLastChecked:l}),this.genresCache=s,s}catch(r){return A.error("[getGenres] Failed to build music genres:",r),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=ue.getState();if(!t&&n.years.length>0&&n.yearsLastUpdated){const r=Date.now(),s=n.yearsLastChecked||0;if(!(r-s>=Lc))return n.years;try{const a=(await this.getRecentlyAdded(50)).Items||[];let i=0;for(const c of a)if(c.DateCreated){const f=new Date(c.DateCreated).getTime();f>i&&(i=f)}if(ue.setState({yearsLastChecked:r}),i<=n.yearsLastUpdated)return n.years}catch{return n.years}}try{const r=new Set;let s=0,l=!0;for(;l;){const c=(await this.getSongs({limit:Et,startIndex:s})).Items||[];if(c.forEach(f=>{f.ProductionYear&&f.ProductionYear>0&&r.add(f.ProductionYear)}),l=c.length===Et,s+=Et,s>1e4)break}const o=Array.from(r).sort((i,c)=>i-c),a=Date.now();return ue.getState().setYears(o),ue.setState({yearsLastUpdated:a,yearsLastChecked:a}),o}catch(r){return A.error("[getYears] Failed to extract years:",r),n.years.length>0?n.years:[]}}async getGenreSongs(t,n){return(await this.fetchAllSongsLightweight()).filter(s=>{var l;return(l=s.Genres)==null?void 0:l.some(o=>o.toLowerCase()===n.toLowerCase())})}async getSongsByGroupingTag(t){const n=await this.fetchAllSongsLightweight(),r=t.toLowerCase();return n.filter(s=>{var l;return(l=s.Grouping)==null?void 0:l.some(o=>o.toLowerCase()===r)})}async fetchAllSongsLightweight(t){let n=[],r=0,s=!0,l=null;for(;s;){const a=await this.getSongs({limit:Et,startIndex:r},!0),i=a.Items||[];if(n.push(...i),l===null&&a.TotalRecordCount&&(l=a.TotalRecordCount),t&&l&&l>0){const c=Math.min(Math.round(n.length/l*100),99);t(c)}if(s=i.length===Et,r+=Et,r>$c)break}t&&t(100);const o=a=>!a||!Array.isArray(a)?[]:a.filter(i=>i.startsWith("grouping:")).map(i=>i.replace("grouping:",""));return n.map(a=>({Id:a.Id,Name:a.Name,AlbumArtist:a.AlbumArtist,ArtistItems:a.ArtistItems,Album:a.Album,AlbumId:a.AlbumId,IndexNumber:a.IndexNumber,ProductionYear:a.ProductionYear,PremiereDate:a.PremiereDate,RunTimeTicks:a.RunTimeTicks,Genres:a.Genres,Grouping:o(a.Tags)}))}async fetchAllSongsWithPaths(){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const t=[];let n=0,r=!0;for(;r;){const s=new URLSearchParams({IncludeItemTypes:"Audio",Recursive:"true",Limit:Et.toString(),StartIndex:n.toString(),UserId:this.userId,Fields:"Path,AlbumArtist,ArtistItems,Album,AlbumId"}),o=(await this.request(`/Items?${s}`)).Items||[];if(t.push(...o),r=o.length===Et,n+=Et,n>$c)break}return t}buildGenresFromSongs(t){const n=new Map;t.forEach(s=>{s.Genres&&s.Genres.forEach(l=>{const o=l.toLowerCase();n.has(o)||n.set(o,l)})});const r=[];for(const[s,l]of n)r.push({Id:s.replace(/\s+/g,"-"),Name:l,Type:"Genre"});return r}distributeSongsToGenres(t,n,r){for(const s of n){if(!s.Name||!s.Id)continue;const l=t.filter(o=>{var a;return(a=o.Genres)==null?void 0:a.some(i=>i.toLowerCase()===s.Name.toLowerCase())});r.setGenreSongs(s.Id,l)}}async syncLibrary(t={scope:"incremental"},n){const r=ue.getState();if(t.scope==="incremental"){const a=r.lastSyncCompleted,i=await this.getGenres(!1);let c=[];if(a){let w=0,I=!0;for(;I;){const k=(await this.getSongs({minDateLastSaved:new Date(a),limit:Et,startIndex:w},!0)).Items||[];if(c.push(...k),I=k.length===Et,w+=Et,w>1e4)break}}else c=(await this.getSongs({limit:zc,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const f=w=>!w||!Array.isArray(w)?[]:w.filter(I=>I.startsWith("grouping:")).map(I=>I.replace("grouping:","")),d=c.map(w=>({Id:w.Id,Name:w.Name,AlbumArtist:w.AlbumArtist,ArtistItems:w.ArtistItems,Album:w.Album,AlbumId:w.AlbumId,IndexNumber:w.IndexNumber,ProductionYear:w.ProductionYear,PremiereDate:w.PremiereDate,RunTimeTicks:w.RunTimeTicks,Genres:w.Genres,Grouping:f(w.Tags)})),h=r.songs,x=new Map(d.map(w=>[w.Id,w])),v=h.map(w=>x.get(w.Id)??w),S=new Set(h.map(w=>w.Id)),E=d.filter(w=>!S.has(w.Id));v.push(...E);try{r.setSongs(v)}catch(w){throw w instanceof DOMException&&w.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):w}const m=new Set;d.forEach(w=>{var I;(I=w.Genres)==null||I.forEach(N=>{i.forEach(k=>{var C;((C=k.Name)==null?void 0:C.toLowerCase())===N.toLowerCase()&&m.add(k.Id)})})});const p=new Map(d.map(w=>[w.Id,w])),y=Array.from(m).map(async w=>{const I=i.find(P=>P.Id===w);if(!(I!=null&&I.Name))return;const N=r.genreSongs[w]||[],k=N.map(P=>p.get(P.Id)??P),C=new Set(N.map(P=>P.Id)),T=E.filter(P=>{var Q;return!C.has(P.Id)&&((Q=P.Genres)==null?void 0:Q.some(K=>K.toLowerCase()===I.Name.toLowerCase()))});k.push(...T),r.setGenreSongs(w,k)});await Promise.all(y);return}this.clearGenresCache(),r.clearGenreSongs();const s=await this.fetchAllSongsLightweight(n);A.log(`[syncLibrary] Fetched ${s.length} songs`);const l=this.buildGenresFromSongs(s);A.log(`[syncLibrary] Found ${l.length} genres in songs`);const o=Date.now();r.setGenres(l),ue.setState({genresLastUpdated:o,genresLastChecked:o}),this.genresCache=l,r.setSongs(s),this.distributeSongsToGenres(s,l,r)}async search(t,n=20,r){var p,y;const s=t?kl(t.trim()):"",l=s.length>0,o=s.length,a=l&&o<3,i={};(p=r==null?void 0:r.genres)!=null&&p.length&&(i.genres=r.genres),(y=r==null?void 0:r.years)!=null&&y.length&&(i.years=r.years);const c={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0,...i};l&&(c.searchTerm=s,o>=3&&(c.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const f=this.buildQueryString(c),d=await this.request(`/Items?${f}`);let h=[];const x=[],v=[],S=[],E=new Set;if(d.Items.forEach(w=>{w.Type==="MusicArtist"?h.push(w):w.Type==="MusicAlbum"?x.push(w):w.Type==="Playlist"?v.push(w):w.Type==="Audio"&&(S.push(w),E.add(w.Id))}),a)try{const w=await this.getArtists({limit:zc}),I=s.toLowerCase();h=(w.Items||[]).filter(N=>kl(N.Name||"").toLowerCase().includes(I))}catch(w){A.error("Failed to fetch all artists for short query:",w)}if(l&&h.length>0){const w=s.toLowerCase(),I=h.filter(N=>kl(N.Name||"").toLowerCase().includes(w));if(I.length>0)try{const N=I.map(T=>T.Id),k=this.buildQueryString({artistIds:N,includeItemTypes:["Audio"],recursive:!0});(await this.request(`/Items?${k}`)).Items.forEach(T=>{E.has(T.Id)||(S.push(T),E.add(T.Id))})}catch(N){A.error("Failed to fetch songs for matching artists:",N)}}const m=S.map(w=>({...w,Grouping:(w.Tags||[]).filter(I=>I.startsWith("grouping:")).map(I=>I.replace("grouping:",""))}));return{Artists:{Items:h,TotalRecordCount:h.length,StartIndex:0},Albums:{Items:x,TotalRecordCount:x.length,StartIndex:0},Playlists:{Items:v,TotalRecordCount:v.length,StartIndex:0},Songs:{Items:m,TotalRecordCount:m.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"ParentIndexNumber,IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"}),r=await this.request(`/Items?${n}`),s=[],l=[];return r.Items.forEach(o=>{o.Type==="MusicAlbum"?s.push(o):o.Type==="Audio"&&l.push(o)}),{albums:s,songs:l}}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch{}}async createPlaylist(t,n=[]){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");return this.request("/Playlists",{method:"POST",body:JSON.stringify({Name:t,Ids:n,UserId:this.userId,MediaType:"Audio"})})}async deleteItem(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}`,{method:"DELETE"})}async updatePlaylist(t,n){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid playlist ID");await this.requestVoid(`/Playlists/${t}`,{method:"POST",body:JSON.stringify({Name:n,UserId:this.userId})})}async uploadItemImage(t,n,r){if(!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}/Images/Primary`,{method:"POST",headers:{"Content-Type":r},body:n})}async deleteItemImage(t){if(!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}/Images/Primary`,{method:"DELETE"})}async addItemsToPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({ids:n.join(","),userId:this.userId});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"POST"})}async movePlaylistItem(t,n,r){if(!this.userId||!this.baseUrl||!t||!n)throw new Error("Not authenticated or invalid parameters");await this.requestVoid(`/Playlists/${t}/Items/${n}/Move/${r}`,{method:"POST"})}async removeItemsFromPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({entryIds:n.join(",")});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"DELETE"})}async getPlaylistItems(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Playlists/${t}/Items?${n}`)).Items}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const l=new URLSearchParams({UserId:this.userId}),o=`${this.baseUrl}${s}?${l}`;try{const a=await fetch(o,{headers:this.getHeaders()});if(a.ok){const i=await a.json();if(i.Lyrics&&Array.isArray(i.Lyrics)&&i.Lyrics.length>0)return i.Lyrics.map(f=>f.Text||"").join(`
`);if(typeof i=="string")return i;if(i.Text)return i.Text}else if(a.status===404){r=`404 for ${s}`;continue}else{const i=await a.text().catch(()=>"");r=`${a.status}: ${i}`;continue}}catch(a){r=a instanceof Error?a.message:String(a);continue}}return null}catch{return null}}}const z=new a1,i1=Object.freeze(Object.defineProperty({__proto__:null,jellyfinClient:z},Symbol.toStringTag,{value:"Module"})),Fc=500,Qt=new Map,es=new Map;function Bc(){if(Qt.size>Fc){const e=Array.from(Qt.keys()).slice(0,Qt.size-Fc);for(const t of e)Qt.delete(t)}}async function Uv(e){if(Qt.has(e))return Qt.get(e)??null;if(es.has(e))return es.get(e);const t=(async()=>{try{const{albums:n,songs:r}=await z.getArtistItems(e),s=n[0],l=r.find(c=>c.AlbumId)||r[0],o=s||l,a=o?o.AlbumId||o.Id:null,i=a?z.getAlbumArtUrl(a,96):null;return Qt.set(e,i),Bc(),i}catch(n){return A.error("Failed to load fallback album art for artist:",e,n),Qt.set(e,null),Bc(),null}finally{es.delete(e)}})();return es.set(e,t),t}function Dv(e){return Qt.get(e)}function u1(){Qt.clear(),es.clear()}function yo(){return window.__TUNETUNA_CONFIG__||{lockedServerUrl:"",lockedLocalServerUrl:""}}function Rh(){const e=yo();return!!(e.lockedServerUrl&&e.lockedServerUrl!=="__JELLYFIN_SERVER_URL__"&&e.lockedServerUrl.trim()!=="")}function c1(){return Rh()?yo().lockedServerUrl:null}function d1(){const e=yo();return!!(e.lockedLocalServerUrl&&e.lockedLocalServerUrl!=="__JELLYFIN_LOCAL_SERVER_URL__"&&e.lockedLocalServerUrl.trim()!=="")}function vo(){return d1()?yo().lockedLocalServerUrl:null}const f1=2e3;async function h1(e){const t=new AbortController,n=setTimeout(()=>t.abort(),f1);try{return await fetch(`${e.replace(/\/$/,"")}/System/Info/Public`,{signal:t.signal,mode:"no-cors"}),clearTimeout(n),!0}catch{return clearTimeout(n),!1}}async function Ji(e,t){return t&&await h1(t)?t:e}async function _h(){const{useAuthStore:e}=await rt(async()=>{const{useAuthStore:i}=await Promise.resolve().then(()=>m1);return{useAuthStore:i}},void 0),{useSettingsStore:t}=await rt(async()=>{const{useSettingsStore:i}=await Promise.resolve().then(()=>e1);return{useSettingsStore:i}},void 0),{jellyfinClient:n}=await rt(async()=>{const{jellyfinClient:i}=await Promise.resolve().then(()=>i1);return{jellyfinClient:i}},void 0),{serverUrl:r,accessToken:s,userId:l}=e.getState();if(!r||!s||!l)return;const o=vo()||t.getState().localServerUrl;if(!o)return;const a=await Ji(r,o);a.replace(/\/$/,"")!==n.serverBaseUrl&&n.setCredentials(a,s,l)}const $e=rr()(Fs(e=>({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await z.authenticate(t,n,r);e({serverUrl:t,serverId:s.ServerId??"",username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),z.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{Ya(),u1(),localStorage.removeItem("player-storage"),localStorage.removeItem("settings-storage"),indexedDB.deleteDatabase("tunetuna-storage"),indexedDB.deleteDatabase("tunetuna-stats-storage"),e({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),localStorage.removeItem("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),z.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{if(e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId){z.setCredentials(e.serverUrl,e.accessToken,e.userId);const t=vo()||Ye.getState().localServerUrl;t&&Ji(e.serverUrl,t).then(n=>{n!==e.serverUrl&&z.setCredentials(n,e.accessToken,e.userId)})}}})),m1=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:$e},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Vc=e=>{const t=g1(e);return t.charAt(0).toUpperCase()+t.slice(1)},Mh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),y1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:o,...a},i)=>g.createElement("svg",{ref:i,...v1,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Mh("lucide",s),...!l&&!y1(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,f])=>g.createElement(c,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(e,t)=>{const n=g.forwardRef(({className:r,...s},l)=>g.createElement(x1,{ref:l,iconNode:t,className:Mh(`lucide-${p1(Vc(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Vc(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],S1=ee("chart-column",w1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],I1=ee("check",k1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],E1=ee("chevron-down",N1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lh=ee("circle-alert",C1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zi=ee("disc",P1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ko=ee("external-link",j1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],T1=ee("eye-off",b1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],R1=ee("eye",A1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],M1=ee("file-text",_1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],z1=ee("grip-horizontal",L1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],Il=ee("guitar",$1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],D1=ee("house",U1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],F1=ee("info",O1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],ol=ee("list-end",B1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],zh=ee("list-music",V1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Gc=ee("list-plus",G1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],al=ee("list-start",H1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],Ka=ee("list-video",Q1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],q1=ee("loader-circle",W1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],K1=ee("mic-vocal",Y1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],eu=ee("music",X1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],_s=ee("pause",J1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ey=ee("pencil",Z1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Rn=ee("play",ty);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ry=ee("plus",ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ts=ee("refresh-cw",sy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],tu=ee("repeat-1",ly);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],nu=ee("repeat",oy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],iy=ee("shield-alert",ay);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Cr=ee("shuffle",uy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],ru=ee("skip-back",cy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],su=ee("skip-forward",dy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],hy=ee("square-play",fy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],py=ee("trash-2",my);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yy=ee("triangle-alert",gy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Hc=ee("upload",vy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xl=ee("user",xy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],Sy=ee("volume-1",wy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Iy=ee("volume-2",ky);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],Ey=ee("volume",Ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],er=ee("x",Cy),Qc="last-server-url",Py=/^http:\/\/(localhost|127\.0\.0\.1|10\.\d+\.\d+\.\d+|172\.(1[6-9]|2\d|3[01])\.\d+\.\d+|192\.168\.\d+\.\d+)(:\d+)?/i;function jy(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[s,l]=g.useState(""),[o,a]=g.useState(!1),[i,c]=g.useState(""),[f,d]=g.useState(!1),h=$e(m=>m.login),x=g.useMemo(()=>e.trim().toLowerCase().startsWith("http://")?!Py.test(e.trim()):!1,[e]),v=Rh(),S=c1();g.useEffect(()=>{if(v&&S)t(S);else{const m=Rs.get(Qc);m&&t(m)}},[v,S]);const E=async m=>{m.preventDefault(),c(""),d(!0);const p=v&&S?S:e;!v&&p.trim()&&Rs.set(Qc,p.trim());try{await h(p,n,s)}catch(y){c(y instanceof Error?y.message:"Login failed. Please check your credentials.")}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),u.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),u.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!v&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),u.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:m=>t(m.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),x&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-amber-400 text-sm",children:[u.jsx(iy,{size:16,className:"mt-0.5 flex-shrink-0"}),u.jsx("span",{children:"Insecure connection. Your password will be sent unencrypted. Use HTTPS or a local network address."})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),u.jsx("input",{id:"username",type:"text",value:n,onChange:m=>r(m.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{id:"password",type:o?"text":"password",value:s,onChange:m=>l(m.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 pr-12 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:()=>a(!o),"aria-label":o?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:o?u.jsx(T1,{size:20}):u.jsx(R1,{size:20})})]})]}),i&&u.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),u.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:f?"Signing in...":"Sign In"})]})]})})}const qe=rr((e,t)=>({state:"idle",source:null,message:null,abortController:null,progress:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null,progress:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null,progress:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null,progress:null})},setProgress:n=>{e({progress:n})}}));function rn({variant:e="horizontal",onClose:t,onOpenPopover:n,popoverPosition:r,popoverDirection:s="up",className:l,onRef:o}){const{volume:a,setVolume:i}=ne(),[c,f]=g.useState(!1),[d,h]=g.useState(1),x=g.useRef(null),v=R=>{o&&e==="compact"&&o(R)},S=R=>{o&&e==="horizontal"&&o(R)};g.useEffect(()=>{const R=localStorage.getItem("lastNonZeroVolume");R?h(Math.max(.01,Math.min(1,parseFloat(R)))):a>0&&h(a)},[]),g.useEffect(()=>{a>0&&(h(a),localStorage.setItem("lastNonZeroVolume",a.toString()))},[a]);const E=()=>a===0?Ey:a<=.5?Sy:Iy,m=g.useCallback(R=>{if(!x.current)return;const Z=x.current.getBoundingClientRect();let le,ae;if(R instanceof TouchEvent||"touches"in R?(le=R.touches[0].clientX,ae=R.touches[0].clientY):(le=R.clientX,ae=R.clientY),e==="horizontal"){const j=le-Z.left,L=Math.max(0,Math.min(1,j/Z.width));i(L)}else{const j=Z.bottom-ae,L=Math.max(0,Math.min(1,j/Z.height));i(L)}},[i,e]),p=R=>{R.preventDefault(),R.stopPropagation(),f(!0),m(R)},y=R=>{R.stopPropagation(),p(R)},w=R=>{R.stopPropagation(),k(R)},I=g.useCallback(R=>{c&&(R.preventDefault(),R.stopPropagation(),m(R))},[c,m]),N=g.useCallback(()=>{f(!1)},[]),k=R=>{R.preventDefault(),R.stopPropagation(),f(!0),m(R)},C=g.useCallback(R=>{c&&(R.preventDefault(),R.stopPropagation(),m(R))},[c,m]),T=g.useCallback(()=>{f(!1)},[]),P=R=>{R.stopPropagation(),ne.getState().volume>0?i(0):i(d)},Q=R=>{R.stopPropagation()};g.useEffect(()=>{if(c)return document.addEventListener("mousemove",I),document.addEventListener("mouseup",N),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("touchend",T),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",C),document.removeEventListener("touchend",T)}},[c,I,N,C,T]);const K=E();if(e==="compact")return u.jsx("button",{ref:v,onClick:R=>{R.stopPropagation(),n&&n()},"aria-label":"Volume",className:l||"text-white/70 hover:text-zinc-300 transition-colors",children:u.jsx(K,{className:"w-6 h-6"})});if(e==="horizontal")return u.jsxs("div",{ref:S,className:"flex items-center gap-2 px-2 select-none",style:{width:"120px"},onClick:Q,children:[u.jsx("button",{onClick:P,"aria-label":a===0?"Unmute":"Mute",className:"text-white/70 hover:text-white hover:bg-zinc-800 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 transition-colors",children:u.jsx(K,{className:"w-5 h-5"})}),u.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),className:"flex-1 relative cursor-pointer",style:{height:"24px"},onMouseDown:y,onTouchStart:w,children:u.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 h-1 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gray-400 rounded-full transition-all duration-100",style:{width:`${a*100}%`}})})})]});const J=r?{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,transform:s==="down"?"translate(-50%, 8px)":"translate(-50%, calc(-100% - 8px))"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return u.jsxs("div",{className:"fixed inset-0 z-50",children:[u.jsx("div",{className:"fixed inset-0",onClick:t,onTouchStart:R=>R.preventDefault(),onTouchMove:R=>R.preventDefault()}),u.jsx("div",{className:"relative z-10 bg-zinc-900 rounded-lg py-4 px-0 shadow-xl border border-zinc-700",style:J,children:u.jsxs("div",{className:"h-[200px] w-[38px] cursor-pointer group relative touch-none mx-auto",children:[u.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),onMouseDown:p,onTouchStart:k,className:"absolute inset-0"}),u.jsxs("div",{className:"h-full w-1 bg-white/10 rounded-full relative flex flex-col justify-end mx-auto",children:[u.jsx("div",{className:"w-full bg-gray-400 rounded-full transition-all",style:{height:`${a*100}%`}}),u.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",style:{bottom:`${a*100}%`,transform:"translate(-50%, 50%)"}})]})]})})]})}const by=[{path:"/",label:"Home",icon:D1,key:"home"},{path:"/artists",label:"Artists",icon:Xl,key:"artists"},{path:"/albums",label:"Albums",icon:Zi,key:"albums"},{path:"/songs",label:"Songs",icon:eu,key:"songs"},{path:"/genres",label:"Genres",icon:Il,key:"genres"},{path:"/playlists",label:"Playlists",icon:zh,key:"playlists"},{path:"/stats",label:"Stats",icon:S1,key:"stats"}];function Ty(){const e=Yt(),{pageVisibility:t}=Ye(),{state:n}=qe(),[r,s]=g.useState(!1),l=by.filter(i=>i.key==="home"?!0:t[i.key]),o=(i,c)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===c&&i.preventDefault()},a=e.pathname.startsWith("/artists/")&&e.pathname!=="/artists";return u.jsxs(u.Fragment,{children:[u.jsxs("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 lg:hidden",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:[u.jsxs("div",{className:"relative h-16",children:[u.jsx("div",{className:"max-w-[600px] mx-auto h-full",children:u.jsx("div",{className:"flex justify-around items-center h-full",children:l.map(i=>{const c=e.pathname===i.path,f=i.icon;return u.jsxs(Ec,{to:i.path,onClick:d=>o(d,i.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${c?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[u.jsx(f,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.path)})})}),u.jsx("div",{className:"absolute right-4 top-3.5 hidden lg:block",children:!$t()&&u.jsx(rn,{variant:"horizontal"})})]}),r&&!$t()&&u.jsx(rn,{variant:"vertical",onClose:()=>s(!1)})]}),u.jsx("nav",{className:"fixed left-0 top-0 bottom-16 bg-black z-30 hidden lg:flex flex-col",style:{width:"4rem",top:n!=="idle"?"28px":"0px"},children:u.jsx("div",{className:`absolute inset-0 flex flex-col items-center justify-center ${a?"border-r border-zinc-800":""}`,children:l.map((i,c)=>{const f=e.pathname===i.path,d=i.icon;return u.jsxs(Ec,{to:i.path,onClick:h=>o(h,i.path),className:`flex flex-col items-center justify-center py-5 transition-colors ${f?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"} ${c<l.length-1?"mb-0":""}`,style:{marginBottom:c<l.length-1?"0px":"0"},children:[u.jsx(d,{className:"w-6 h-6 mb-2"}),u.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:i.label})]},i.path)})})})]})}function lu(){return ne(e=>{const{songs:t,currentIndex:n}=e;return n>=0&&t[n]?t[n]:null})}function ou(){return ne(e=>e.lastPlayedTrack)}function Ms({src:e,alt:t,className:n="",fallback:r,fallbackIcon:s,style:l,showOutline:o,rounded:a="rounded",loading:i="lazy",onError:c}){const[f,d]=g.useState(e),[h,x]=g.useState(!1),[v,S]=g.useState(!1),[E,m]=g.useState(!1);g.useEffect(()=>{d(e),x(!1),S(!1),m(!1)},[e]);const p=()=>{!h&&r?(d(r),x(!0)):c?(c(),S(!0)):m(!0)};return v?null:E?u.jsx("div",{className:"relative w-full h-full bg-zinc-800 flex items-center justify-center",children:s&&u.jsx(s,{className:"w-1/3 h-1/3 text-zinc-600"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsx("img",{src:f,alt:t,className:`block ${n}`,onError:p,loading:i,style:l}),o&&u.jsx("div",{className:`absolute inset-0 pointer-events-none border ${a}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function Wc(){return u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function Ls({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,l]=g.useState(!1),[o,a]=g.useState(!1);if(g.useEffect(()=>{if(e)l(!1),a(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(!0)})}),document.body.style.overflow="hidden";else{l(!1);const c=setTimeout(()=>{a(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(c),document.body.style.overflow=""}}},[e]),!o)return null;const i=u.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[u.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),u.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out md:hidden ${s?"translate-y-0":"translate-y-full"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pb-safe pt-4",children:u.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})}),u.jsx("div",{className:`hidden md:flex absolute inset-0 items-center justify-center p-4 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t,children:u.jsx("div",{className:`bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-700/50 w-full max-w-[480px] max-h-[80vh] overflow-y-auto transform transition-transform duration-300 ease-out ${s?"scale-100":"scale-95"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pt-4",children:n})})})]});return Qi.createPortal(i,document.body)}const Ay="https://musicbrainz.org/ws/2",Ry=`${Th}/${Ah} (https://github.com/AlessioLaiso/tunetuna)`,_y="/api/coverart",My="https://api.song.link/v1-alpha.1";let qc=0;const Yc=1100;async function Ov(e="gb",t=10){const n=`/api/stats/proxy/apple-music/${e}/${t}`,r=await fetch(n);if(!r.ok)throw new Error(`Apple Music RSS failed: ${r.status}`);return(await r.json()).feed.results}function Fv(e,t=300){return e.replace(/\d+x\d+/,`${t}x${t}`)}async function Ly(){const t=Date.now()-qc;t<Yc&&await new Promise(n=>setTimeout(n,Yc-t)),qc=Date.now()}async function Bv(e,t){await Ly();const n=`releasegroup:"${t}" AND artist:"${e}"`,r=new URLSearchParams({query:n,fmt:"json",limit:"1"}),s=await fetch(`${Ay}/release-group/?${r}`,{headers:{"User-Agent":Ry,Accept:"application/json"}});if(!s.ok)throw new Error(`MusicBrainz search failed: ${s.status}`);const o=(await s.json())["release-groups"]||[];return o.length===0?null:{id:o[0].id,type:o[0]["primary-type"]||"Album"}}function zy(e,t=500){return`${_y}/release-group/${e}/front-${t}`}async function Vv(e,t){const n=new URLSearchParams({url:e});try{const r=await fetch(`${My}/links?${n}`);if(!r.ok){if(r.status===404)return null;throw new Error(`Odesli API failed: ${r.status}`)}return await r.json()}catch{return null}}async function Gv(e,t=10){if(!e)return[];const n=`/api/stats/proxy/muspy-rss?url=${encodeURIComponent(e)}`;console.log("[Muspy] Fetching from:",n);const r=await fetch(n);if(!r.ok)throw new Error(`Muspy RSS failed: ${r.status}`);const s=await r.text();console.log("[Muspy] Response length:",s.length,"First 500 chars:",s.substring(0,500));const o=new DOMParser().parseFromString(s,"text/xml"),a=o.querySelector("parsererror");a&&console.error("[Muspy] XML parse error:",a.textContent);const i=o.querySelectorAll("entry");console.log("[Muspy] Found",i.length,"entries");const c=[];return i.forEach((f,d)=>{var K,J,R,Z,le,ae;if(d>=t)return;const h=((K=f.querySelector("title"))==null?void 0:K.textContent)||"",x=f.querySelector('link[rel="alternate"]')||f.querySelector("link"),v=(x==null?void 0:x.getAttribute("href"))||(x==null?void 0:x.textContent)||"",S=((J=f.querySelector("summary"))==null?void 0:J.textContent)||((R=f.querySelector("content"))==null?void 0:R.textContent)||"",E=((Z=f.querySelector("updated"))==null?void 0:Z.textContent)||((le=f.querySelector("published"))==null?void 0:le.textContent)||"";(ae=f.querySelector("id"))!=null&&ae.textContent;const m=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/i,y=f.outerHTML.match(m),w=y?y[0]:`muspy-${d}`,I=S.match(/\((Single|Album|EP)\)/i),N=I?I[1]:"Album",k=h.split(" - "),C=k.length>1?k[0].trim():S,T=k.length>1?k.slice(1).join(" - ").trim():h;let P="";if(E)try{P=new Date(E).toISOString().split("T")[0]}catch{P=E}const Q=w.startsWith("muspy-")?v:`https://musicbrainz.org/release-group/${w}`;c.push({id:w,title:T,artistName:C,releaseDate:P,type:N,artworkUrl:w.startsWith("muspy-")?void 0:zy(w,500),mbUrl:Q})}),c}const $y=[{id:"spotify",name:"Spotify",icon:"spotify"},{id:"appleMusic",name:"Apple Music",icon:"apple"},{id:"youtube",name:"YouTube",icon:"youtube"},{id:"youtubeMusic",name:"YouTube Music",icon:"youtube"},{id:"tidal",name:"Tidal",icon:"tidal"},{id:"deezer",name:"Deezer",icon:"deezer"},{id:"amazonMusic",name:"Amazon Music",icon:"amazon"},{id:"soundcloud",name:"SoundCloud",icon:"soundcloud"}];function Uy(e,t){const n=encodeURIComponent(`${e} ${t}`);return{entityUniqueId:"search",userCountry:"US",pageUrl:`https://www.google.com/search?q=${n}`,linksByPlatform:{spotify:{url:`https://open.spotify.com/search/${n}`},appleMusic:{url:`https://music.apple.com/search?term=${n}`},youtube:{url:`https://www.youtube.com/results?search_query=${n}`},youtubeMusic:{url:`https://music.youtube.com/search?q=${n}`},tidal:{url:`https://listen.tidal.com/search?q=${n}`},deezer:{url:`https://www.deezer.com/search/${n}`},amazonMusic:{url:`https://music.amazon.com/search/${n}`}}}}const il={spotify:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})}),appleMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.802.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.296-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.045-1.773-.6-1.943-1.536a1.88 1.88 0 011.038-2.022c.323-.16.67-.25 1.018-.324.378-.082.758-.153 1.134-.24.274-.063.457-.23.51-.516a.904.904 0 00.02-.193c0-1.815 0-3.63-.002-5.443a.725.725 0 00-.026-.185c-.04-.15-.15-.243-.304-.234-.16.01-.318.035-.475.066-.76.15-1.52.303-2.28.456l-2.326.47-1.374.278c-.016.003-.032.01-.048.013-.277.077-.377.203-.39.49-.002.042 0 .086 0 .13-.002 2.602 0 5.204-.003 7.805 0 .42-.047.836-.215 1.227-.278.64-.77 1.04-1.434 1.233-.35.1-.71.16-1.075.172-.96.036-1.755-.6-1.92-1.544-.14-.812.23-1.685 1.154-2.075.357-.15.73-.232 1.108-.31.287-.06.575-.116.86-.177.383-.083.583-.323.6-.714v-.15c0-2.96 0-5.922.002-8.883 0-.123.013-.25.042-.37.07-.285.273-.448.546-.518.255-.065.515-.112.774-.165.733-.15 1.466-.296 2.2-.444l2.27-.46c.67-.134 1.34-.27 2.01-.403.22-.043.443-.088.664-.106.31-.025.523.17.554.482.008.073.012.148.012.223.002 1.91.002 3.822 0 5.732z"})}),youtube:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),youtubeMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.376 0 0 5.376 0 12s5.376 12 12 12 12-5.376 12-12S18.624 0 12 0zm0 19.104c-3.924 0-7.104-3.18-7.104-7.104S8.076 4.896 12 4.896s7.104 3.18 7.104 7.104-3.18 7.104-7.104 7.104zm0-13.332c-3.432 0-6.228 2.796-6.228 6.228S8.568 18.228 12 18.228s6.228-2.796 6.228-6.228S15.432 5.772 12 5.772zM9.684 15.54V8.46L15.816 12l-6.132 3.54z"})}),tidal:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12.012 3.992L8.008 7.996 4.004 3.992 0 7.996 4.004 12l4.004-4.004L12.012 12l4.004-4.004L20.02 12l4.004-4.004-4.004-4.004-4.004 4.004-4.004-4.004zM12.012 12.012L8.008 16.02l4.004 4.004 4.004-4.004-4.004-4.008z"})}),deezer:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M18.81 4.16v3.03H24V4.16h-5.19zM6.27 8.38v3.027h5.189V8.38h-5.19zm12.54 0v3.027H24V8.38h-5.19zM6.27 12.594v3.027h5.189v-3.027h-5.19zm6.27 0v3.027h5.19v-3.027h-5.19zm6.27 0v3.027H24v-3.027h-5.19zM0 16.81v3.029h5.19v-3.03H0zm6.27 0v3.029h5.189v-3.03h-5.19zm6.27 0v3.029h5.19v-3.03h-5.19zm6.27 0v3.029H24v-3.03h-5.19z"})}),amazonMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.118c.138-.053.209-.073.315-.073.186 0 .27.089.27.267 0 .178-.089.355-.267.533l-.178.178c-2.852 2.346-6.22 3.52-10.106 3.52-4.24 0-7.942-1.192-11.107-3.574-.168-.133-.217-.244-.217-.333 0-.089.044-.133.133-.178zm21.243-3.928c-.236-.178-.712-.267-1.424-.267-.712 0-1.598.178-2.665.533-1.067.356-2.134.89-3.201 1.602-.178.089-.267.178-.267.267s.089.133.267.133c.089 0 .178-.044.267-.089l.356-.178c1.156-.533 2.223-.8 3.2-.8.979 0 1.469.267 1.469.8 0 .356-.178.712-.534 1.068-.356.355-.89.711-1.6 1.066l-.535.267c-.356.178-.534.356-.534.534 0 .133.089.2.267.2.089 0 .178-.022.267-.067l.445-.222c1.6-.8 2.756-1.424 3.467-1.869.712-.444 1.068-.889 1.068-1.333 0-.445-.178-.712-.534-.978-.356-.267-.978-.4-1.868-.4zm-6.844-7.11c0-1.067-.267-1.957-.8-2.67-.533-.711-1.422-1.066-2.666-1.066-1.244 0-2.223.355-2.933 1.066-.712.712-1.156 1.78-1.334 3.2h7.733v-.533zm3.911 1.956H8.045c.089 1.422.445 2.489 1.067 3.2.622.712 1.511 1.067 2.666 1.067.89 0 1.69-.178 2.4-.533.712-.356 1.334-.89 1.868-1.6.178-.178.356-.267.534-.267.178 0 .267.089.267.267 0 .178-.089.356-.267.533-.622.8-1.422 1.423-2.4 1.868-.978.445-2.044.667-3.2.667-1.778 0-3.2-.533-4.267-1.6-1.067-1.066-1.6-2.577-1.6-4.533 0-1.956.533-3.467 1.6-4.533 1.067-1.067 2.489-1.6 4.267-1.6 1.778 0 3.111.445 4 1.334.89.889 1.334 2.177 1.334 3.866v1.067c0 .266-.089.4-.267.4l-.089-.003z"})}),soundcloud:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c-.009-.06-.048-.1-.098-.1m-.899.828c-.06 0-.091.037-.104.094L0 14.479l.165 1.308c.014.057.045.094.09.094s.089-.037.099-.094l.19-1.308-.19-1.334c-.01-.057-.045-.09-.09-.09m1.83-1.229c-.061 0-.12.045-.12.104l-.21 2.563.225 2.458c0 .06.045.104.106.104.061 0 .12-.044.12-.104l.24-2.458-.24-2.563c0-.06-.045-.104-.12-.104m.945-.089c-.075 0-.135.06-.15.135l-.193 2.64.21 2.544c.016.077.075.138.149.138.075 0 .135-.061.15-.138l.225-2.545-.225-2.64c-.015-.074-.06-.135-.135-.135m1.065.42c-.09 0-.149.075-.164.164l-.158 2.255.18 2.46c.015.09.074.165.164.165.089 0 .149-.075.164-.165l.209-2.46-.209-2.255c-.015-.09-.075-.164-.164-.164m.944-.54c-.104 0-.194.09-.209.195l-.149 2.81.164 2.445c.015.105.09.195.194.195.104 0 .195-.09.21-.195l.18-2.445-.18-2.81c-.015-.105-.09-.195-.194-.195m1.076-.505c-.119 0-.21.09-.225.21l-.135 3.3.149 2.4c.015.12.105.21.225.21.12 0 .21-.09.225-.21l.165-2.4-.165-3.3c-.015-.12-.105-.21-.225-.21m1.064-.54c-.135 0-.239.105-.254.24l-.12 3.825.135 2.354c.015.135.12.24.255.24.12 0 .24-.105.255-.24l.149-2.354-.149-3.825c-.015-.135-.12-.24-.255-.24m1.109-.27c-.015-.15-.135-.255-.27-.255-.15 0-.255.105-.27.255l-.12 4.08.12 2.31c.015.15.12.255.27.255.149 0 .255-.105.27-.255l.134-2.31-.134-4.08m.494 6.645c.015.165.135.284.285.284.149 0 .27-.12.284-.284l.121-2.325-.12-5.175c-.015-.165-.135-.285-.285-.285-.149 0-.27.12-.284.285l-.107 5.175.106 2.325m1.184-6.18c-.165 0-.3.135-.314.3l-.091 3.855.105 2.31c.015.165.135.3.3.3.164 0 .284-.135.299-.3l.12-2.31-.12-3.855c-.015-.165-.135-.3-.3-.3m1.199-.075c-.18 0-.314.135-.329.315l-.09 3.915.104 2.295c.015.18.135.315.315.315s.314-.135.314-.315l.12-2.295-.12-3.915c-.015-.18-.149-.315-.314-.315m1.139-.195c-.195 0-.345.149-.359.345l-.075 4.11.09 2.265c.014.195.149.345.344.345.195 0 .345-.15.359-.345l.105-2.265-.105-4.095c-.014-.195-.164-.36-.359-.36m1.305 0c-.209 0-.359.164-.374.359l-.074 4.095.089 2.25c.015.21.165.375.375.375.194 0 .359-.165.374-.375l.09-2.25-.09-4.095c-.015-.209-.165-.359-.375-.359m1.289.015c-.225 0-.39.18-.39.405l-.06 4.065.075 2.235c.016.225.166.39.391.39.225 0 .391-.165.406-.39l.09-2.235-.091-4.065c-.014-.24-.18-.405-.405-.405m1.35.09c-.24 0-.42.18-.42.42l-.045 3.975.06 2.205c.015.24.18.42.42.42.24 0 .404-.18.42-.42l.075-2.205-.075-3.975c-.015-.24-.18-.42-.42-.42m1.33.135c-.256 0-.435.194-.45.435l-.046 3.825.061 2.175c.015.255.195.45.435.45.256 0 .436-.195.45-.45l.076-2.175-.076-3.825c-.014-.255-.194-.435-.45-.435m1.453-.09c-.27 0-.48.21-.48.465l-.03 3.915.03 2.145c.015.27.21.465.48.465.27 0 .48-.195.48-.465l.045-2.145-.045-3.915c0-.255-.21-.465-.48-.465m1.444.285c-.285 0-.495.225-.51.495l-.015 3.645.03 2.13c.015.285.225.51.51.51.27 0 .494-.225.51-.51l.03-2.13-.03-3.645c-.016-.285-.225-.495-.51-.495m3.39.465c-.165-.045-.345-.075-.51-.075-.18 0-.345.015-.51.045-.044-.9-.39-1.695-.945-2.34-.556-.645-1.35-1.08-2.31-1.215-.27-.045-.405-.165-.405-.405V6.54c0-1.305-.465-2.415-1.395-3.345C19.2 2.265 18.09 1.8 16.77 1.8c-1.155 0-2.16.375-3.045 1.095-.885.72-1.44 1.635-1.68 2.745-.165-.03-.315-.045-.45-.045-1.35 0-2.355.93-2.355 2.115 0 .24.03.465.075.69-.645.12-1.17.435-1.59.945-.42.51-.63 1.095-.63 1.755 0 .75.255 1.38.765 1.89s1.14.765 1.89.765h10.53c.93 0 1.695-.285 2.31-.855.615-.57.93-1.29.93-2.145 0-.855-.3-1.575-.9-2.16-.6-.585-1.335-.885-2.205-.9"})}),jellyfin:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",role:"img","aria-label":"Jellyfin",children:u.jsx("path",{d:"M12.0001 2C9.35508 2 0.835078 17.448 2.13408 20.055C3.43308 22.662 20.5841 22.633 21.8691 20.055C23.1541 17.477 14.6481 2 12.0001 2ZM18.4691 17.793C17.6291 19.483 6.39208 19.501 5.54108 17.793C4.69008 16.085 10.2671 5.963 12.0001 5.963C13.7331 5.963 19.3111 16.1 18.4691 17.793ZM12.0001 9.664C11.1221 9.664 8.30008 14.789 8.72508 15.655C9.15008 16.521 14.8491 16.511 15.2751 15.655C15.7011 14.799 12.8801 9.664 12.0001 9.664Z"})})};function Dy(){return u.jsx("div",{className:"animate-pulse space-y-0",children:[...Array(4)].map((e,t)=>u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-24"})]},t))})}function Kc({isOpen:e,onClose:t,odesliData:n,loading:r=!1,title:s,mode:l="mobile",position:o,zIndex:a=99999,jellyfinItemId:i=null}){const c=$e(y=>y.serverUrl),f=$e(y=>y.serverId);if(!e)return null;const d=(c==null?void 0:c.replace(/\/$/,""))??"",h=!!(i&&d),x=n?$y.filter(y=>n.linksByPlatform[y.id]):[],v=async y=>{if(y==="jellyfin"&&i&&d){let I=f;if(!I)try{const N=await fetch(`${d}/System/Info/Public`);N.ok&&(I=(await N.json()).Id??"")}catch{}I&&window.open(`${d}/web/#/details?id=${i}&serverId=${I}`,"_blank","noopener,noreferrer"),t();return}if(!n)return;const w=n.linksByPlatform[y];w!=null&&w.url&&window.open(w.url,"_blank","noopener,noreferrer"),t()},E=(()=>{if(s)return s;if(!(n!=null&&n.entitiesByUniqueId))return"Loading...";const y=Object.values(n.entitiesByUniqueId);for(const w of y)if(w.title)return w.title;return"Loading..."})(),m=h,p=r||!m&&(!n||x.length===0);if(l==="desktop"){const w=p?4:(m?1:0)+x.length,I=Math.min(400,w*44+48);let N=(o==null?void 0:o.x)||100,k=(o==null?void 0:o.y)||100;return N+220>window.innerWidth&&(N=window.innerWidth-220-10),k+I>window.innerHeight&&(k=window.innerHeight-I-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0",onClick:t,style:{zIndex:a-1}}),u.jsxs("div",{className:"fixed bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-2 min-w-[200px]",style:{left:N,top:k,zIndex:a},onClick:C=>C.stopPropagation(),children:[u.jsx("div",{className:"px-4 pb-2 mb-1 border-b border-zinc-700",children:u.jsx("div",{className:"text-sm font-medium text-white truncate",children:E})}),p?u.jsx(Dy,{}):u.jsxs("div",{className:"space-y-0",children:[m&&u.jsxs("button",{onClick:()=>v("jellyfin"),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:il.jellyfin}),u.jsx("span",{className:"flex-1 text-sm text-white",children:"Jellyfin"})]}),x.map(C=>u.jsxs("button",{onClick:()=>v(C.id),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:il[C.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-sm text-white",children:C.name})]},C.id))]})]})]})}return u.jsx(Ls,{isOpen:e,onClose:t,zIndex:a,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:E})}),p?u.jsx("div",{className:"animate-pulse space-y-1",children:[...Array(4)].map((y,w)=>u.jsxs("div",{className:"flex items-center gap-4 pl-4 pr-4 py-3",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-28"})]},w))}):u.jsxs("div",{className:"space-y-1",children:[m&&u.jsxs("button",{onClick:()=>v("jellyfin"),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:il.jellyfin}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:"Jellyfin"})]}),x.map(y=>u.jsxs("button",{onClick:()=>v(y.id),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:il[y.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:y.name})]},y.id))]})]})})}function Oy({isOpen:e,onClose:t,itemIds:n,zIndex:r}){const[s,l]=g.useState([]),[o,a]=g.useState(!1),[i,c]=g.useState(!1),[f,d]=g.useState(""),[h,x]=g.useState(null);g.useEffect(()=>{e&&(c(!1),d(""),x(null),v())},[e]);const v=async()=>{a(!0);try{const m=await z.getPlaylists({sortBy:["SortName"],sortOrder:"Ascending",limit:100});l(m.Items)}catch{Ge.getState().addToast("Failed to load playlists","error",3e3)}finally{a(!1)}},S=async m=>{x(m.Id);try{await z.addItemsToPlaylist(m.Id,n),Ge.getState().addToast(`Added to ${m.Name}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{Ge.getState().addToast("Failed to add to playlist","error",3e3)}finally{x(null)}},E=async()=>{const m=f.trim();if(m){x("create");try{await z.createPlaylist(m,n);const p=n.length===1?"1 song":`${n.length} songs`;Ge.getState().addToast(`Created "${m}" with ${p}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{Ge.getState().addToast("Failed to create playlist","error",3e3)}finally{x(null)}}};return u.jsx(Ls,{isOpen:e,onClose:t,zIndex:r,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:"Add to Playlist"})}),u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>c(!i),disabled:h!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm bg-zinc-800 flex items-center justify-center flex-shrink-0",children:u.jsx(ry,{className:"w-5 h-5 text-white"})}),u.jsx("span",{className:"text-sm text-white font-medium",children:"Create New Playlist"})]}),i&&u.jsxs("div",{className:"px-4 pb-2 flex gap-2",children:[u.jsx("input",{type:"text",value:f,onChange:m=>d(m.target.value),onKeyDown:m=>{m.key==="Enter"&&E()},className:"flex-1 bg-zinc-800 text-white rounded-lg px-4 py-2.5 outline-none focus:ring-2 focus:ring-[var(--accent-color)] text-sm",placeholder:"Playlist name",autoFocus:!0,disabled:h==="create"}),u.jsx("button",{onClick:E,disabled:h==="create"||!f.trim(),className:"px-4 py-2.5 bg-[var(--accent-color)] text-white font-semibold rounded-lg transition-colors disabled:opacity-50 text-sm flex-shrink-0",children:h==="create"?u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Create"})]})]}),o?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[s.map(m=>u.jsxs("button",{onClick:()=>S(m),disabled:h!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-800",children:u.jsx(Ms,{src:z.getAlbumArtUrl(m.Id,80),alt:m.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",fallbackIcon:zh})}),u.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:m.Name}),m.ChildCount!==void 0&&u.jsxs("div",{className:"text-xs text-gray-400",children:[m.ChildCount," tracks"]})]}),h===m.Id&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},m.Id)),s.length===0&&!o&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[u.jsx(eu,{className:"w-8 h-8 mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No playlists yet"})]})]})]})})}function Xc({label:e,accept:t="image/*",value:n,onChange:r,previewUrl:s}){var I;const[l,o]=g.useState(!1),[a,i]=g.useState(!1),c=g.useRef(null),f=g.useRef(0),d=g.useCallback(N=>{N.preventDefault(),N.stopPropagation(),f.current++,o(!0)},[]),h=g.useCallback(N=>{N.preventDefault(),N.stopPropagation(),f.current--,f.current===0&&o(!1)},[]),x=g.useCallback(N=>{N.preventDefault(),N.stopPropagation()},[]),v=g.useCallback((N,k)=>k.split(",").some(C=>{const T=C.trim();return T.endsWith("/*")?N.type.startsWith(T.replace("/*","/")):T.startsWith(".")?N.name.toLowerCase().endsWith(T.toLowerCase()):N.type===T}),[]),S=g.useCallback(N=>{var C;N.preventDefault(),N.stopPropagation(),f.current=0,o(!1);const k=(C=N.dataTransfer.files)==null?void 0:C[0];k&&v(k,t)&&(i(!1),r(k))},[r,t,v]),E=()=>{var N;(N=c.current)==null||N.click()},m=N=>{var C;const k=(C=N.target.files)==null?void 0:C[0];k&&(i(!1),r(k)),N.target.value=""},p=N=>{N.stopPropagation(),i(!0),r(null)},y=((I=n==null?void 0:n.type)==null?void 0:I.startsWith("image/"))??!1,w=n&&y?URL.createObjectURL(n):a?null:s;return u.jsxs("div",{onClick:E,onDragEnter:d,onDragLeave:h,onDragOver:x,onDrop:S,className:`relative cursor-pointer rounded-lg border-2 border-dashed transition-colors ${l?"border-[var(--accent-color)] bg-[var(--accent-color)]/10":w||n&&!y?"border-zinc-700 bg-zinc-800/50":"border-zinc-700 bg-zinc-800/50 hover:border-zinc-500"}`,children:[u.jsx("input",{ref:c,type:"file",accept:t,onChange:m,className:"hidden"}),w?u.jsxs("div",{className:"relative aspect-square w-full overflow-hidden rounded-md",children:[u.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("button",{onClick:p,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):n?u.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(Hc,{className:"w-6 h-6 text-[var(--accent-color)]"}),u.jsx("span",{className:"text-sm text-white text-center truncate max-w-full px-2",children:n.name}),u.jsx("button",{onClick:p,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(Hc,{className:"w-6 h-6 text-gray-400"}),u.jsx("span",{className:"text-sm text-gray-400 text-center",children:e})]})]})}function Fy(e){const n=e.replace(/^\uFEFF/,"").split(/\r\n|\r|\n/),r=[];A.log(`M3U parser: ${n.length} lines in file`);let s,l,o;for(const a of n){const i=a.trim();if(!i||i==="#EXTM3U")continue;if(i.startsWith("#EXTINF:")){const h=i.substring(8),x=h.indexOf(",");if(x!==-1){o=parseInt(h.substring(0,x),10)||void 0;const v=h.substring(x+1).trim(),S=v.lastIndexOf(" - ");S!==-1?(l=v.substring(0,S).trim(),s=v.substring(S+3).trim()):(l=v,s=void 0)}continue}if(i.startsWith("#"))continue;const c=i,f=c.replace(/\\/g,"/").split("/"),d=f[f.length-1];d&&r.push({filePath:c,fileName:d,artistName:s,songTitle:l,durationSecs:o}),s=void 0,l=void 0,o=void 0}return A.log(`M3U parser: ${r.length} entries parsed`),r.length>0&&A.log(`M3U parser: first entry filename="${r[0].fileName}", path="${r[0].filePath}"`),r}function _t(e){return e.normalize("NFC").toLowerCase()}function By(e){const t=new Map;for(const n of e){if(!n.Path)continue;const r=n.Path.replace(/\\/g,"/").split("/"),s=_t(r[r.length-1]??"");if(!s)continue;const l=t.get(s);l?l.push(n):t.set(s,[n])}return t}function Vy(e,t){const n=t.get(_t(e.fileName));if(!n||n.length===0)return null;if(n.length===1)return n[0];const r=e.filePath.replace(/\\/g,"/").split("/"),s=r.length>=2?_t(r[r.length-2]):"",l=r.length>=3?_t(r[r.length-3]):"";let o=n.filter(a=>{const i=(a.Path||"").replace(/\\/g,"/").split("/");return(i.length>=2?_t(i[i.length-2]):"")===s});if(o.length===1)return o[0];if(o.length>1){const a=o.filter(i=>{const c=(i.Path||"").replace(/\\/g,"/").split("/");return(c.length>=3?_t(c[c.length-3]):"")===l});if(a.length>=1)return a[0]}if(e.songTitle||e.artistName){const a=_t(e.songTitle||""),i=_t(e.artistName||""),f=(o.length>0?o:n).filter(d=>{const h=!a||_t(d.Name||"").includes(a),x=!i||[_t(d.AlbumArtist||""),...(d.ArtistItems||[]).map(v=>_t(v.Name||""))].some(v=>v.includes(i));return h&&x});if(f.length>=1)return f[0]}return n[0]}function Gy(e,t,n){const r=By(t);A.log(`M3U matcher: ${t.length} library songs, ${r.size} unique filenames, ${n.size} existing playlist items`);const s=[],l=[],o=[];for(const a of e){const i=Vy(a,r);i?n.has(i.Id)?o.push({entry:a,matchedSong:i,status:"skipped_duplicate"}):s.push({entry:a,matchedSong:i,status:"matched"}):l.push({entry:a,matchedSong:null,status:"not_found"})}return{matched:s,notFound:l,skippedDuplicates:o,totalEntries:e.length}}function Hy({result:e}){const[t,n]=g.useState(!1),r=e.notFound.length+e.skippedDuplicates.length,s=[...e.notFound,...e.skippedDuplicates].map(l=>l.entry.songTitle?`${l.entry.songTitle} - ${l.entry.artistName||"Unknown"}`:l.entry.fileName);return e.matched.length===0&&r===0?u.jsx("span",{className:"text-sm text-gray-400 text-center",children:"No songs matched"}):u.jsxs("span",{className:"text-sm text-white text-center",children:[e.matched.length>0&&u.jsxs(u.Fragment,{children:[e.matched.length," ",e.matched.length===1?"song":"songs"," matched"]}),e.matched.length>0&&r>0&&". ",r>0&&u.jsxs("span",{className:"relative text-zinc-400 cursor-help",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:l=>{l.stopPropagation(),n(o=>!o)},children:[e.matched.length===0&&"No songs matched. ",r," skipped",t&&u.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 max-h-48 overflow-y-auto bg-zinc-900 border border-zinc-700 rounded-lg p-2 text-xs text-zinc-300 text-left shadow-lg z-50",children:s.map((l,o)=>u.jsx("span",{className:"block truncate py-0.5",children:l},o))})]})]})}function Qy({isOpen:e,onClose:t,editPlaylistId:n,initialName:r="",hasExistingImage:s=!1,onCreated:l,onSaved:o,imageCacheBust:a=0}){const i=!!n,[c,f]=g.useState(r),[d,h]=g.useState(null),[x,v]=g.useState(!1),[S,E]=g.useState(null),[m,p]=g.useState(!1),[y,w]=g.useState(null),[I,N]=g.useState(!1);g.useEffect(()=>{e&&(f(r),h(null),v(!1),E(null),w(null),p(!1),N(!1))},[e,n]);const k=()=>{t()},C=g.useRef(!1),T=async J=>{if(C.current=!0,E(J),w(null),!J){p(!1);return}if(!c.trim()){const R=J.name.replace(/\.(m3u8?|M3U8?)$/,"");f(R)}C.current=!1,p(!0);try{const R=await J.text(),Z=Fy(R);if(C.current)return;if(Z.length===0){Ge.getState().addToast("No songs found in M3U file","error",3e3),E(null),p(!1);return}const le=await z.fetchAllSongsWithPaths();if(C.current)return;let ae=new Set;if(n){const L=await z.getPlaylistItems(n);if(C.current)return;ae=new Set(L.map(V=>V.Id))}const j=Gy(Z,le,ae);if(C.current)return;w(j)}catch(R){if(C.current)return;A.error("M3U import failed:",R),Ge.getState().addToast("Import failed","error",3e3),E(null),w(null)}finally{C.current||p(!1)}},P=()=>{C.current=!0,E(null),w(null),p(!1)},Q=async()=>{const J=c.trim();if(J){N(!0);try{if(i){if(await z.updatePlaylist(n,J),d){const R=new FileReader,Z=await new Promise((le,ae)=>{R.onload=()=>{const j=R.result;le(j.split(",")[1])},R.onerror=ae,R.readAsDataURL(d)});await z.uploadItemImage(n,Z,d.type)}else x&&await z.deleteItemImage(n);if(y&&y.matched.length>0){const R=y.matched.map(Z=>Z.matchedSong.Id);await z.addItemsToPlaylist(n,R)}Ge.getState().addToast("Playlist updated","success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),k(),o==null||o()}else{const R=await z.createPlaylist(J);if(d)try{const Z=new FileReader,le=await new Promise((ae,j)=>{Z.onload=()=>{const L=Z.result;ae(L.split(",")[1])},Z.onerror=j,Z.readAsDataURL(d)});await z.uploadItemImage(R.Id,le,d.type)}catch{A.error("Failed to upload playlist image")}if(y&&y.matched.length>0)try{const Z=y.matched.map(ae=>ae.matchedSong.Id);await z.addItemsToPlaylist(R.Id,Z);const le=[`${y.matched.length} added`];y.notFound.length>0&&le.push(`${y.notFound.length} not found`),Ge.getState().addToast(`Playlist created. ${le.join(", ")}`,y.notFound.length>0?"info":"success",4e3)}catch{A.error("M3U import failed during playlist creation"),Ge.getState().addToast("Playlist created, but M3U import failed","info",3e3)}else Ge.getState().addToast("Playlist created","success",2e3);window.dispatchEvent(new CustomEvent("playlistUpdated")),k(),l==null||l(R.Id)}}catch{Ge.getState().addToast(i?"Failed to update playlist":"Failed to create playlist","error",3e3)}finally{N(!1)}}},K=i&&s&&!x&&n?z.getImageUrl(n,"Primary",256)+(a?`&cb=${a}`:""):null;return u.jsx(Ls,{isOpen:e,onClose:k,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:i?"Edit Playlist":"Create Playlist"})}),u.jsxs("div",{className:"px-4 space-y-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Playlist Name"}),u.jsx("input",{type:"text",value:c,onChange:J=>f(J.target.value),onKeyDown:J=>{J.key==="Enter"&&Q()},className:"w-full bg-zinc-800 text-white rounded-lg px-3 py-2 border border-zinc-700 focus:outline-none focus:border-[var(--accent-color)] placeholder:text-zinc-500",placeholder:"Playlist name",autoFocus:!0,disabled:I})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Image (Optional)"}),u.jsx("div",{className:"w-32",children:u.jsx(Xc,{label:"Drop or click",accept:"image/*",value:d,onChange:J=>{h(J),J?v(!1):s&&v(!0)},previewUrl:K})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Add from M3U (Optional)"}),m?u.jsxs("div",{className:"relative rounded-lg border-2 border-dashed border-zinc-700 bg-zinc-800/50",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(q1,{className:"w-6 h-6 text-[var(--accent-color)] animate-spin"}),u.jsx("span",{className:"text-sm text-gray-400 text-center",children:"Matching songs..."})]}),u.jsx("button",{onClick:P,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):y?u.jsxs("div",{className:"relative rounded-lg border-2 border-dashed border-zinc-700 bg-zinc-800/50",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(M1,{className:"w-6 h-6 text-[var(--accent-color)]"}),u.jsx(Hy,{result:y})]}),u.jsx("button",{onClick:P,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):u.jsx(Xc,{label:"Drop .m3u file or click",accept:".m3u,.m3u8",value:S,onChange:T})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:k,className:"flex-1 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:Q,disabled:I||m||!c.trim(),className:"flex-1 py-3 bg-[var(--accent-color)] text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:I||m?i?"Saving...":"Creating...":i?"Save":"Create"})]})]})]})})}const Wy=({className:e})=>u.jsx("svg",{viewBox:"0 0 24 24",className:e,fill:"currentColor",role:"img","aria-label":"Jellyfin",children:u.jsx("path",{d:"M12.0001 2C9.35508 2 0.835078 17.448 2.13408 20.055C3.43308 22.662 20.5841 22.633 21.8691 20.055C23.1541 17.477 14.6481 2 12.0001 2ZM18.4691 17.793C17.6291 19.483 6.39208 19.501 5.54108 17.793C4.69008 16.085 10.2671 5.963 12.0001 5.963C13.7331 5.963 19.3111 16.1 18.4691 17.793ZM12.0001 9.664C11.1221 9.664 8.30008 14.789 8.72508 15.655C9.15008 16.521 14.8491 16.511 15.2751 15.655C15.7011 14.799 12.8801 9.664 12.0001 9.664Z"})});function qy({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:l,mode:o="mobile",position:a,extraActions:i,onExtraAction:c}){const f=Or(),[d,h]=g.useState(!1),[x,v]=g.useState(null),[S,E]=g.useState(null),[m,p]=g.useState(!1),[y,w]=g.useState(null),[I,N]=g.useState(null),[k,C]=g.useState(!1),[T,P]=g.useState(""),[Q,K]=g.useState(!1),[J,R]=g.useState([]),[Z,le]=g.useState(!1),[ae,j]=g.useState(null),[L,V]=g.useState(""),[se,ce]=g.useState(!1),[xe,me]=g.useState(!1),[ct,pe]=g.useState(null),[Re,Kt]=g.useState(""),[_e,Pe]=g.useState(!1),[Ft,lt]=g.useState(0),{playTrack:B,playAlbum:F,addToQueueWithToast:H,playNext:re,shuffleArtist:X,toggleShuffle:ge}=ne(),De=qe(D=>D.startSync),Me=qe(D=>D.completeSync),Xt=ue(D=>D.genres),{updateEventMetadata:Jt}=We(),sr=g.useRef(e),fn=g.useRef(t);g.useEffect(()=>{sr.current=e,fn.current=t},[e,t]),g.useEffect(()=>{if(!n||!e){E(null);return}(async()=>{var M,ie;try{if(t==="album"){const te=await z.getAlbumTracks(e.Id);te.length>0&&((M=te[0].Genres)!=null&&M[0])&&E(te[0].Genres[0])}else if(t==="artist"){const{songs:te}=await z.getArtistItems(e.Id);te.length>0&&((ie=te[0].Genres)!=null&&ie[0])&&E(te[0].Genres[0])}}catch(te){A.error("Failed to fetch genre:",te)}})()},[n,e==null?void 0:e.Id,t]);const Dn=D=>{if(!D)return null;const M=Xt.find(ie=>{var te;return((te=ie.Name)==null?void 0:te.toLowerCase())===D.toLowerCase()});return(M==null?void 0:M.Id)||null},hn=g.useCallback(async D=>{var te,fe,Be,Le,_,q,Y,je,Fn;const M=sr.current,ie=fn.current;if(M){if(i!=null&&i.some(U=>U.id===D)){r(),c==null||c(D,M);return}if(D==="addToPlaylist"){if(ie==="song")R([M.Id]),r(),K(!0);else if(ie==="album"){h(!0),v(D);try{const U=await z.getAlbumTracks(M.Id);R(U.map(W=>W.Id)),r(),K(!0)}catch(U){A.error("Failed to fetch album tracks:",U)}finally{h(!1),v(null)}}return}if(D==="deletePlaylist"){j(M.Id),V(M.Name||"this playlist"),r(),le(!0);return}if(D==="renamePlaylist"){pe(M.Id),Kt(M.Name||""),Pe(!!("ImageTags"in M&&((te=M.ImageTags)!=null&&te.Primary))),r(),me(!0);return}if(D==="viewDetails"){r(),l&&l(),f(`/song/${M.Id}`);return}if(D==="openInJellyfin"){const U=$e.getState().serverUrl,W=$e.getState().serverId,be=(U==null?void 0:U.replace(/\/$/,""))??"";if(be&&M.Id){let ze=W;if(!ze)try{const lr=await fetch(`${be}/System/Info/Public`);lr.ok&&(ze=(await lr.json()).Id??"")}catch{}ze&&window.open(`${be}/web/#/details?id=${M.Id}&serverId=${ze}`,"_blank","noopener,noreferrer")}r();return}if(D==="openIn"){const U=((Be=(fe=M.ArtistItems)==null?void 0:fe[0])==null?void 0:Be.Name)||M.AlbumArtist||M.Name||"";let W="";ie==="song"||ie==="album"?W=M.Name||"":ie==="artist"&&(W=""),P(ie==="artist"?U:`${U} - ${W}`),C(!0),N(null),w(M.Id??null),r(),p(!0);const be=Uy(U,W);N(be),C(!1);return}if(D.startsWith("goTo")){if(r(),l&&l(),D==="goToArtist"){const U=((_=(Le=M.ArtistItems)==null?void 0:Le[0])==null?void 0:_.Id)||("AlbumArtists"in M?(Y=(q=M.AlbumArtists)==null?void 0:q[0])==null?void 0:Y.Id:void 0);U&&f(`/artist/${U}`)}else if(D==="goToAlbum")M.AlbumId&&f(`/album/${M.AlbumId}`);else if(D==="goToGenre"){const U=ie==="album"||ie==="artist"?S:(je=M.Genres)==null?void 0:je[0];if(U){const W=Dn(U);if(W)f(`/genre/${encodeURIComponent(W)}`);else{const ze=(await z.getGenres()).find(lr=>{var or;return((or=lr.Name)==null?void 0:or.toLowerCase())===U.toLowerCase()});ze!=null&&ze.Id&&f(`/genre/${encodeURIComponent(ze.Id)}`)}}}return}h(!0),v(D);try{switch(ie){case"album":{if(D==="play"){const U=await z.getAlbumTracks(M.Id),{shuffle:W}=ne.getState();W&&ge(),F(U)}else if(D==="shuffle"){const U=await z.getAlbumTracks(M.Id),{shuffle:W}=ne.getState();W&&ge(),F(U),requestAnimationFrame(()=>{const{shuffle:be}=ne.getState();be||ge()})}else if(D==="playNext"){const U=await z.getAlbumTracks(M.Id);re(U)}else if(D==="addToQueue"){const U=await z.getAlbumTracks(M.Id);H(U)}else if(D==="sync"){De("context-menu",`Syncing ${M.Name}...`);try{(await z.getAlbumTracks(M.Id)).forEach(W=>{var be;Jt("song",W.Id,{songName:W.Name||"Unknown",artistNames:(be=W.ArtistItems)!=null&&be.length?W.ArtistItems.map(ze=>ze.Name||"Unknown"):[W.AlbumArtist||"Unknown"],albumName:W.Album||"Unknown",genres:W.Genres||[],year:W.ProductionYear||null})}),Me(!0,`${M.Name} synced`)}catch{Me(!1,`Failed to sync ${M.Name}`)}}break}case"song":{if(D==="play")A.log("ContextMenu: Playing song",M.Name),B(M);else if(D==="playNext")A.log("ContextMenu: Adding song to play next",M.Name),re([M]);else if(D==="addToQueue")A.log("ContextMenu: Adding song to queue",M.Name),H([M]);else if(D==="sync"){De("context-menu",`Syncing ${M.Name}...`);try{const U=await z.getSongById(M.Id);if(U.Genres){const W=await z.getGenres();U.Genres.forEach(be=>{const ze=W.find(lr=>{var or;return((or=lr.Name)==null?void 0:or.toLowerCase())===be.toLowerCase()});ze!=null&&ze.Id&&ue.getState().clearGenreSongsForGenre(ze.Id)})}Jt("song",M.Id,{songName:U.Name||"Unknown",artistNames:(Fn=U.ArtistItems)!=null&&Fn.length?U.ArtistItems.map(W=>W.Name||"Unknown"):[U.AlbumArtist||"Unknown"],albumName:U.Album||"Unknown",genres:U.Genres||[],year:U.ProductionYear||null}),Me(!0,`${M.Name} synced`)}catch{Me(!1,`Failed to sync ${M.Name}`)}}break}case"artist":{if(D==="shuffle"){const{songs:U}=await z.getArtistItems(M.Id);X(U)}else if(D==="playNext"){const{songs:U}=await z.getArtistItems(M.Id);re(U)}else if(D==="addToQueue"){const{songs:U}=await z.getArtistItems(M.Id);H(U)}else if(D==="sync"){De("context-menu",`Syncing ${M.Name}...`);try{const{songs:U}=await z.getArtistItems(M.Id);U.forEach(W=>{var be;Jt("song",W.Id,{songName:W.Name||"Unknown",artistNames:(be=W.ArtistItems)!=null&&be.length?W.ArtistItems.map(ze=>ze.Name||"Unknown"):[W.AlbumArtist||"Unknown"],albumName:W.Album||"Unknown",genres:W.Genres||[],year:W.ProductionYear||null})}),Me(!0,`${M.Name} synced`)}catch{Me(!1,`Failed to sync ${M.Name}`)}}break}case"playlist":{if(D==="play"){const U=await z.getAlbumTracks(M.Id);if(U.length===0)break;const{shuffle:W}=ne.getState();W&&ge(),F(U)}else if(D==="shuffle"){const U=await z.getAlbumTracks(M.Id);if(U.length===0)break;const{shuffle:W}=ne.getState();W&&ge(),F(U),requestAnimationFrame(()=>{const{shuffle:be}=ne.getState();be||ge()})}else if(D==="playNext"){const U=await z.getAlbumTracks(M.Id);if(U.length===0)break;re(U)}else if(D==="addToQueue"){const U=await z.getAlbumTracks(M.Id);if(U.length===0)break;H(U)}else if(D==="sync"){De("context-menu",`Syncing ${M.Name}...`);try{(await z.getAlbumTracks(M.Id)).forEach(W=>{var be;Jt("song",W.Id,{songName:W.Name||"Unknown",artistNames:(be=W.ArtistItems)!=null&&be.length?W.ArtistItems.map(ze=>ze.Name||"Unknown"):[W.AlbumArtist||"Unknown"],albumName:W.Album||"Unknown",genres:W.Genres||[],year:W.ProductionYear||null})}),Me(!0,`${M.Name} synced`)}catch{Me(!1,`Failed to sync ${M.Name}`)}}break}}r()}catch(U){A.error("Context menu action failed:",U)}finally{h(!1),v(null)}}},[r,l,f,S,Dn,B,F,H,re,X,ge,De,Me]),On=async()=>{if(ae){ce(!0);try{await z.deleteItem(ae),Ge.getState().addToast("Playlist deleted","success",2e3),le(!1),window.dispatchEvent(new CustomEvent("playlistUpdated")),f("/playlists")}catch{Ge.getState().addToast("Failed to delete playlist","error",3e3)}finally{ce(!1)}}},mn=u.jsxs(u.Fragment,{children:[u.jsx(Oy,{isOpen:Q,onClose:()=>K(!1),itemIds:J,zIndex:s}),u.jsx(Ls,{isOpen:Z,onClose:()=>le(!1),children:u.jsxs("div",{className:"pb-6",children:[u.jsxs("div",{className:"mb-6 px-4 flex items-start gap-3",children:[u.jsx(yy,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-lg font-semibold text-white",children:"Delete Playlist?"}),u.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["",L," will be permanently deleted. This cannot be undone."]})]})]}),u.jsxs("div",{className:"px-4 flex gap-3",children:[u.jsx("button",{onClick:()=>le(!1),className:"flex-1 py-3 bg-transparent border border-red-500 text-red-500 hover:bg-red-500/10 font-semibold rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:On,disabled:se,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:se?"Deleting...":"Delete"})]})]})}),u.jsx(Qy,{isOpen:xe,onClose:()=>me(!1),editPlaylistId:ct,initialName:Re,hasExistingImage:_e,imageCacheBust:Ft,onSaved:()=>lt(Date.now())})]});if(!e||!t)return u.jsxs(u.Fragment,{children:[u.jsx(Kc,{isOpen:m,onClose:()=>{p(!1),N(null),w(null)},odesliData:I,loading:k,title:T,mode:o,position:a,jellyfinItemId:y}),mn]});const $=(()=>{var D,M,ie,te,fe,Be,Le;switch(t){case"album":{const _=((M=(D=e.ArtistItems)==null?void 0:D[0])==null?void 0:M.Name)||("AlbumArtists"in e?(te=(ie=e.AlbumArtists)==null?void 0:ie[0])==null?void 0:te.Name:void 0)||"Artist",q=S||"Genre";return[{id:"play",label:"Play",icon:Rn},{id:"shuffle",label:"Shuffle",icon:Cr},{id:"playNext",label:"Play Next",icon:al},{id:"addToQueue",label:"Add to Queue",icon:ol},{id:"goToArtist",label:`Go to ${_}`,icon:Xl},{id:"goToGenre",label:`Go to ${q}`,icon:Il},{id:"addToPlaylist",label:"Add to Playlist",icon:Gc},{id:"sync",label:"Sync",icon:ts},{id:"openIn",label:"Open in",icon:Ko}]}case"song":{const _=((Be=(fe=e.ArtistItems)==null?void 0:fe[0])==null?void 0:Be.Name)||e.AlbumArtist||"Artist",q=e.Album||"Album",Y=((Le=e.Genres)==null?void 0:Le[0])||"Genre";return[{id:"play",label:"Play",icon:Rn},{id:"playNext",label:"Play Next",icon:al},{id:"addToQueue",label:"Add to Queue",icon:ol},{id:"viewDetails",label:"Go to Song Details",icon:eu},{id:"goToAlbum",label:`Go to ${q}`,icon:Zi},{id:"goToArtist",label:`Go to ${_}`,icon:Xl},{id:"goToGenre",label:`Go to ${Y}`,icon:Il},{id:"addToPlaylist",label:"Add to Playlist",icon:Gc},...i||[],{id:"sync",label:"Sync",icon:ts},{id:"openIn",label:"Open in",icon:Ko}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:Cr},{id:"playNext",label:"Play Next",icon:al},{id:"addToQueue",label:"Add to Queue",icon:ol},{id:"goToGenre",label:`Go to ${S||"Genre"}`,icon:Il},{id:"sync",label:"Sync",icon:ts},{id:"openIn",label:"Open in",icon:Ko}];case"playlist":return[...("ChildCount"in e&&e.ChildCount!==void 0?e.ChildCount>0:!0)?[{id:"play",label:"Play",icon:Rn},{id:"shuffle",label:"Shuffle",icon:Cr},{id:"playNext",label:"Play Next",icon:al},{id:"addToQueue",label:"Add to Queue",icon:ol}]:[],{id:"renamePlaylist",label:"Edit Playlist",icon:ey},{id:"sync",label:"Sync",icon:ts},{id:"openInJellyfin",label:"Open in Jellyfin",icon:Wy},{id:"deletePlaylist",label:"Delete Playlist",icon:py}];default:return[]}})(),G=e.Name||"Unknown",he=u.jsx(Kc,{isOpen:m,onClose:()=>{p(!1),N(null),w(null)},odesliData:I,loading:k,title:T,mode:o,position:a,jellyfinItemId:y});if(o==="desktop"&&n){const M=Math.min(400,$.length*44+8);let ie=(a==null?void 0:a.x)||100,te=(a==null?void 0:a.y)||100;return ie+240>window.innerWidth&&(ie=window.innerWidth-240-10),te+M>window.innerHeight&&(te=window.innerHeight-M-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),u.jsx("div",{className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:ie,top:te,zIndex:s},onClick:fe=>fe.stopPropagation(),children:u.jsx("div",{className:"space-y-0",children:$.map(fe=>{const Be=fe.icon,Le=d&&x===fe.id;return u.jsxs("button",{onClick:()=>hn(fe.id),disabled:d,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[u.jsx(Be,{className:"w-4 h-4 text-white flex-shrink-0"}),u.jsx("span",{className:"flex-1 text-sm text-white",children:fe.label}),Le&&u.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},fe.id)})})}),he,mn]})}return u.jsxs(u.Fragment,{children:[u.jsx(Ls,{isOpen:n,onClose:r,zIndex:s,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:G})}),u.jsx("div",{className:"space-y-1",children:$.map(D=>{const M=D.icon,ie=d&&x===D.id;return u.jsxs("button",{onClick:()=>hn(D.id),disabled:d,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(M,{className:"w-5 h-5 text-white"}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:D.label}),ie&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},D.id)})})]})}),he,mn]})}function Yy({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=g.useRef(null),l=g.useRef(null),o=g.useRef(!1),a=g.useRef(null),i=g.useRef(!1),c=g.useCallback(h=>{o.current=!1,i.current=!1,l.current=h.target,!("button"in h&&h.button!==0)&&(h.preventDefault(),"touches"in h&&h.touches.length>0?a.current={x:h.touches[0].clientX,y:h.touches[0].clientY}:a.current=null,s.current=setTimeout(()=>{i.current||(o.current=!0,e(h))},n))},[e,n]),f=g.useCallback(h=>{if(!a.current||h.touches.length===0)return;const x=h.touches[0].clientX,v=h.touches[0].clientY,S=Math.abs(x-a.current.x),E=Math.abs(v-a.current.y);Math.sqrt(S*S+E*E)>r&&(i.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),d=g.useCallback(h=>{if("button"in h&&h.button!==0){o.current=!1,i.current=!1,l.current=null,a.current=null;return}const x=o.current;s.current&&(clearTimeout(s.current),s.current=null),t&&l.current===h.target&&!x&&!i.current&&t(h),o.current=!1,i.current=!1,l.current=null,a.current=null},[t]);return{onMouseDown:c,onTouchStart:c,onTouchMove:f,onMouseUp:d,onMouseLeave:h=>{s.current&&(clearTimeout(s.current),s.current=null),o.current=!1,i.current=!1,l.current=null,a.current=null},onTouchEnd:d}}const Ky=45,Xy=45,ul=g.memo(function({track:t,index:n,isCurrent:r,isPlaying:s,showRemoveButton:l=!0,onClick:o,onRemove:a,onReorderDragStart:i,onReorderDragEnd:c,onReorderDrop:f,onContextMenu:d,isDragOver:h,onDragEnterRow:x}){var N,k,C,T;const v=Or(),S=g.useRef(!1),E=Yy({onLongPress:P=>{P.preventDefault(),S.current=!0,d(t,"mobile"),setTimeout(()=>{S.current=!1},300)}}),m=g.useCallback(P=>{if(S.current){P.preventDefault(),P.stopPropagation();return}o()},[o]),p=g.useCallback(P=>{P.preventDefault(),S.current=!0,d(t,"desktop",{x:P.clientX,y:P.clientY}),setTimeout(()=>{S.current=!1},300)},[d,t]),y=g.useCallback(P=>{P.preventDefault(),P.dataTransfer.dropEffect="move"},[]),w=g.useCallback(P=>{P.preventDefault(),r||x(n)},[r,x,n]),I=g.useCallback(P=>{r||f(P,n)},[r,f,n]);return u.jsxs("div",{onDragOver:y,onDragEnter:w,onDrop:I,className:`group queue-row flex items-center gap-3 p-3 ${r?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${r?"bg-zinc-900":""} relative focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] focus-visible:ring-inset`,onClick:r?void 0:m,onContextMenu:p,tabIndex:0,role:"button","aria-label":`${t.Name} by ${((k=(N=t.ArtistItems)==null?void 0:N[0])==null?void 0:k.Name)||t.AlbumArtist||"Unknown Artist"}`,...E,children:[h&&!r&&u.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),u.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:u.jsx(Ms,{src:z.getAlbumArtUrl(t.AlbumId||t.Id,96),alt:t.Name,className:"w-full h-full object-cover",showOutline:!1,rounded:"rounded-sm"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`text-sm font-medium truncate transition-colors ${r?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:t.Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:(T=(C=t.ArtistItems)==null?void 0:C[0])!=null&&T.Id?u.jsx("span",{className:"clickable-text",onClick:P=>{P.stopPropagation(),v(`/artist/${t.ArtistItems[0].Id}`)},children:t.ArtistItems[0].Name||t.AlbumArtist||"Unknown Artist"}):t.AlbumArtist||"Unknown Artist"})]}),r?u.jsx("button",{onClick:P=>{P.stopPropagation(),o()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":s?"Pause":"Play",children:s?u.jsx(_s,{className:"w-5 h-5"}):u.jsx(Rn,{className:"w-5 h-5"})}):u.jsx(u.Fragment,{children:l&&u.jsxs("div",{className:"flex items-center queue-actions whitespace-nowrap",children:[u.jsx("button",{draggable:!0,onMouseDown:P=>P.stopPropagation(),onTouchStart:P=>P.stopPropagation(),onDragStart:P=>{P.stopPropagation(),i(P,n)},onDragEnd:P=>{P.stopPropagation(),c()},className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Drag to reorder",children:u.jsx(z1,{className:"w-4 h-4"})}),a&&u.jsx("button",{onClick:P=>{P.stopPropagation(),a()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Remove from queue",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})});function au({onNavigateFromContextMenu:e,header:t,contentPaddingBottom:n="8rem"}){const[r,s]=g.useState(!1),[l,o]=g.useState(null),[a,i]=g.useState("mobile"),[c,f]=g.useState(null),[d,h]=g.useState(null),[x,v]=g.useState(null),[S,E]=g.useState(Ky),[m,p]=g.useState(!1),[y,w]=g.useState(!1),I=g.useRef(null),{songs:N,currentIndex:k,isPlaying:C,togglePlayPause:T,skipToTrack:P,removeFromQueue:Q,reorderQueue:K,isFetchingRecommendations:J,isLoadingMoreSongs:R,repeat:Z}=ne(),{showQueueRecommendations:le,setShowQueueRecommendations:ae,recommendationsQuality:j}=Ye(),L=g.useCallback((B,F)=>{B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("text/plain",F.toString()),v(F),I.current=F;const H=B.currentTarget,re=H==null?void 0:H.closest(".queue-row");if(re&&B.dataTransfer.setDragImage){const ge=re.querySelector(".queue-drag-art")??re,De=ge.getBoundingClientRect();B.dataTransfer.setDragImage(ge,De.width/2,De.height/2)}},[]),V=g.useCallback(()=>{v(null),h(null),I.current=null},[]),se=g.useCallback((B,F)=>{B.preventDefault();const H=B.dataTransfer.getData("text/plain")||B.dataTransfer.getData("text/html"),re=parseInt(H,10);if(Number.isNaN(re))return;const X=I.current??re,ge=ne.getState().songs,De=ge[X],Me=ge[F];if(De&&Me&&De.source!==Me.source){h(null),v(null),I.current=null;return}re!==F&&K(re,F),h(null),v(null),I.current=null},[K]),ce=g.useCallback((B,F="mobile",H)=>{o(B),i(F),f(H||null),s(!0)},[]),xe=g.useCallback(B=>{if(I.current==null)return;const F=ne.getState().songs,H=F[I.current],re=F[B];if(!(!H||!re)){if(H.source!==re.source){h(null);return}h(B)}},[]),me=k>=0?N[k]:null,ct=N.filter((B,F)=>F<k);let pe=-1;for(let B=N.length-1;B>k;B--)if(N[B].source==="user"){pe=B;break}const Re=N.filter((B,F)=>F<=k?!1:pe!==-1?F<=pe:!1),Kt=N.filter((B,F)=>B.source!=="recommendation"||F<=k?!1:pe!==-1?F>pe:!0);let _e=S;const Pe=ct.slice(-Math.min(_e,ct.length));_e-=Pe.length,_e-=me?1:0;const Ft=Re.slice(0,Math.max(0,_e));_e-=Ft.length;const lt=Kt.slice(0,Math.max(0,_e));return g.useEffect(()=>{const B=document.querySelector(".queue-list-container");if(!B)return;const F=()=>{const H=B.scrollTop,re=B.clientHeight,X=B.scrollHeight;H+re*2.5>=X&&E(ge=>Math.min(ge+Xy,N.length))};return B.addEventListener("scroll",F,{passive:!0}),F(),()=>B.removeEventListener("scroll",F)},[N.length]),g.useEffect(()=>{if(J){const B=setTimeout(()=>{w(!0)},2e3);return()=>clearTimeout(B)}else w(!1)},[J]),u.jsx("div",{className:"flex-1 flex flex-col min-h-0 w-full relative",children:u.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 queue-list-container w-full",style:{paddingBottom:"8rem"},children:[u.jsxs("div",{className:"max-w-[864px] mx-auto w-full",children:[t,N.length===0&&!me?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 py-10",children:u.jsx("p",{children:"Queue is empty"})}):u.jsxs("div",{children:[Pe.length>0&&m&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Previous"}),u.jsx("button",{onClick:()=>p(!1),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Hide"})]}),Pe.map((B,F)=>{const H=N.indexOf(B);return u.jsx(ul,{track:B,index:H,isCurrent:!1,isPlaying:!1,showRemoveButton:!1,onClick:()=>P(H),onReorderDragStart:L,onReorderDragEnd:V,onReorderDrop:se,onContextMenu:ce,isDragOver:!1,onDragEnterRow:xe},`${B.Id}-${F}`)})]}),me&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Now Playing"}),Pe.length>0&&!m&&u.jsx("button",{onClick:()=>p(!0),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Show Previous"})]}),u.jsx(ul,{track:me,index:k,isCurrent:!0,isPlaying:C,showRemoveButton:!1,onClick:T,onReorderDragStart:L,onReorderDragEnd:V,onReorderDrop:se,onContextMenu:ce,isDragOver:!1,onDragEnterRow:xe})]}),Ft.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Coming Up"}),u.jsx("button",{onClick:()=>{const F=N.filter((re,X)=>X<=k||re.source==="recommendation"),H=Math.min(k,F.length-1);ne.setState({songs:F,currentIndex:H,standardOrder:F.filter(re=>re.source==="user").map(re=>re.Id),shuffleOrder:F.filter(re=>re.source==="user").map(re=>re.Id)})},className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]}),Ft.map((B,F)=>{const H=N.indexOf(B);return u.jsx(ul,{track:B,index:H,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>P(H),onRemove:()=>Q(H),onReorderDragStart:L,onReorderDragEnd:V,onReorderDrop:se,onContextMenu:ce,isDragOver:d===H,onDragEnterRow:xe},`${B.Id}-${F}`)}),R&&u.jsxs("div",{className:"flex items-center justify-center py-4",children:[u.jsx(Wc,{}),u.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading more songs..."})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Recommendations"}),u.jsx("button",{disabled:Z!=="off",onClick:()=>{const B=!le;if(ae(B),!B){const F=N.filter((H,re)=>re<=k?!0:H.source==="user");ne.setState({songs:F,currentIndex:k,standardOrder:F.filter(H=>H.source==="user").map(H=>H.Id),shuffleOrder:F.filter(H=>H.source==="user").map(H=>H.Id)})}},className:`relative w-12 h-6 rounded-full transition-colors ${le&&Z==="off"?"bg-[var(--accent-color)]":"bg-zinc-600"} ${Z!=="off"?"opacity-50 cursor-not-allowed":""}`,children:u.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${le&&Z==="off"?"translate-x-6":"translate-x-0"}`})})]}),u.jsxs("div",{className:"px-4 pb-2",children:[Z!=="off"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block mb-1",children:"Disabled when repeat mode is active"}),(y||j==="failed")&&u.jsxs(u.Fragment,{children:[y&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Syncing genres..."}),!J&&j==="failed"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Sync library in settings"})]})]}),le&&Z==="off"&&u.jsxs(u.Fragment,{children:[lt.map((B,F)=>{const H=N.indexOf(B);return u.jsx(ul,{track:B,index:H,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>P(H),onRemove:()=>Q(H),onReorderDragStart:L,onReorderDragEnd:V,onReorderDrop:se,onContextMenu:ce,isDragOver:d===H,onDragEnterRow:xe},`${B.Id}-${F}`)}),y&&u.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:u.jsx(Wc,{})})]})]})]})]}),u.jsx(qy,{item:l,itemType:l?"song":null,isOpen:r,onClose:()=>{s(!1),o(null)},onNavigate:e,mode:a,position:c||void 0})]})})}function Jy({onClose:e,onNavigateFromContextMenu:t}){const{songs:n,currentIndex:r,isPlaying:s,shuffle:l,repeat:o,togglePlayPause:a,toggleShuffle:i,toggleRepeat:c,next:f,previous:d}=ne(),h=r>=0&&r<n.length-1,x=r>0;return u.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[u.jsx(au,{onNavigateFromContextMenu:t,contentPaddingBottom:"8rem"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:u.jsx("div",{className:"px-6 pt-2 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"},children:u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsx("button",{onClick:i,"aria-label":l?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${l?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(Cr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:d,disabled:!x,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${x?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(ru,{className:"w-8 h-8"})}),u.jsx("button",{onClick:a,"aria-label":s?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:s?u.jsx(_s,{className:"w-8 h-8"}):u.jsx(Rn,{className:"w-8 h-8"})}),u.jsx("button",{onClick:f,disabled:!h,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${h?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(su,{className:"w-8 h-8"})}),u.jsx("button",{onClick:c,"aria-label":o==="off"?"Enable repeat":o==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${o!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:o==="one"?u.jsx(tu,{className:"w-6 h-6"}):u.jsx(nu,{className:"w-6 h-6"})})]})})})]})}function Zy(){const e=lu(),t=ou(),{isQueueSidebarOpen:n}=ne(),r=e||t,[s,l]=g.useState(null),[o,a]=g.useState(!1);return g.useEffect(()=>{(async()=>{if(!r){l(null);return}a(!0);try{const c=await z.getLyrics(r.Id);l(c)}catch(c){A.error("Failed to fetch lyrics:",c),l(null)}finally{a(!1)}})()},[r==null?void 0:r.Id]),r?u.jsxs("div",{className:`fixed left-0 right-0 z-[55] flex flex-col transition-[right] duration-300 ease-out ${n?"lyrics-with-sidebar":""}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:[u.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 py-4 relative",children:o?u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50",children:"Loading lyrics..."})}):s?u.jsx("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto pb-8 pl-8 pr-4",children:u.jsx("div",{className:"text-white text-center whitespace-pre-line text-xl lg:text-3xl",children:s.split(`
`).map((i,c)=>u.jsx("div",{className:"mb-6 leading-relaxed",children:i},c))})}):u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50 text-center",children:"This song has no lyrics"})})}),u.jsx("div",{className:"h-px bg-white/20 flex-shrink-0"})]}):null}function ev({onClose:e,onClosingStart:t,closeRef:n}){const r=Or(),{songs:s,currentIndex:l,isPlaying:o,currentTime:a,duration:i,shuffle:c,repeat:f,togglePlayPause:d,next:h,previous:x,seek:v,setVolume:S,toggleShuffle:E,toggleRepeat:m,playTrack:p,isQueueSidebarOpen:y,toggleQueueSidebar:w}=ne(),I=lu(),N=ou(),k=I||N,[C,T]=g.useState(!1);g.useEffect(()=>{T(!1)},[]);const[P,Q]=g.useState(!1),[K,J]=g.useState(!1),[R,Z]=g.useState(null),[le,ae]=g.useState("up"),[j,L]=g.useState(null),[V,se]=g.useState(null),[ce,xe]=g.useState(!1),[me,ct]=g.useState(!1),[pe,Re]=g.useState(!1),[Kt,_e]=g.useState(!1),[Pe,Ft]=g.useState(null),[lt,B]=g.useState(null),F=g.useRef(null),H=g.useRef(null),re=g.useRef(null),X=g.useRef(null),ge=g.useRef(!1),De=g.useRef(null);g.useEffect(()=>{const _=window.getComputedStyle(document.body).overflowY,q=window.getComputedStyle(document.documentElement).overflowY,Y=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const je=document.getElementById("root");return je&&(je.style.overflowY="hidden"),()=>{document.body.style.overflowY=_,document.documentElement.style.overflowY=q,je&&(je.style.overflowY=Y!=="N/A"?Y:"")}},[]),g.useEffect(()=>{requestAnimationFrame(()=>{Re(!0)})},[]);const Me=s.length>0&&(l<0||l<s.length-1||f!=="off"),Xt=l>0||f==="all"&&s.length>0;g.useEffect(()=>{(async()=>{if(!k){xe(!1);return}try{const q=await z.getLyrics(k.Id),Y=q!==null&&q.trim().length>0;xe(Y)}catch{xe(!1)}})()},[k]);const Jt=_=>{if(!_)return"Unknown";if(_.Name&&_.Name.trim())return _.Name;const q=_.Path;return q&&typeof q=="string"&&(q.split("/").pop()||q.split("\\").pop())||"Unknown"},sr=_=>{var q,Y;return _&&(((Y=(q=_.ArtistItems)==null?void 0:q[0])==null?void 0:Y.Name)||_.AlbumArtist)||""};if(g.useEffect(()=>{"mediaSession"in navigator&&k&&(navigator.mediaSession.metadata=new MediaMetadata({title:Jt(k),artist:sr(k),album:k.Album||"",artwork:[{src:z.getAlbumArtUrl(k.AlbumId||k.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",d),navigator.mediaSession.setActionHandler("pause",d),navigator.mediaSession.setActionHandler("previoustrack",x),navigator.mediaSession.setActionHandler("nexttrack",h))},[k,o,d,h,x]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&i>0)try{navigator.mediaSession.setPositionState({duration:i,playbackRate:1,position:Math.min(a,i)})}catch{}},[a,i]),g.useEffect(()=>{_e(!1)},[k==null?void 0:k.Id]),g.useEffect(()=>{if(!k)return;const _=z.getAlbumArtUrl(k.AlbumId||k.Id);if(!Pe){Ft(_);return}if(_===Pe)return;const q=new window.Image,Y=()=>{B(Pe),Ft(_),setTimeout(()=>{B(null)},1100)};q.onload=Y,q.onerror=Y,q.src=_},[k==null?void 0:k.Id,k==null?void 0:k.AlbumId]),!k)return null;const fn=i>0?a/i*100:0,Dn=_=>{const q=Math.floor(_/60),Y=Math.floor(_%60);return`${q}:${Y.toString().padStart(2,"0")}`},hn=()=>{if(k.Name&&k.Name.trim())return k.Name;const _=k.Path;return _&&typeof _=="string"&&(_.split("/").pop()||_.split("\\").pop())||"Unknown"},On=()=>{var _,q;return((q=(_=k.ArtistItems)==null?void 0:_[0])==null?void 0:q.Name)||k.AlbumArtist},mn=k.AlbumId&&k.Album&&k.Album.trim(),Fr=_=>{if(!F.current||!i||ge.current)return;const q=F.current.getBoundingClientRect(),Y=(_.clientX-q.left)/q.width;v(Math.max(0,Math.min(1,Y))*i)},$=_=>{if(!F.current||!i)return;ge.current=!0,De.current=_.clientX;const q=F.current.getBoundingClientRect(),Y=(_.clientX-q.left)/q.width;v(Math.max(0,Math.min(1,Y))*i)},G=()=>{ge.current=!1,De.current=null},he=_=>{if(!F.current||!i)return;_.stopPropagation(),ge.current=!0;const q=_.touches[0],Y=F.current.getBoundingClientRect(),je=(q.clientX-Y.left)/Y.width;v(Math.max(0,Math.min(1,je))*i)},D=_=>{if(!ge.current||!F.current||!i)return;_.stopPropagation(),_.preventDefault();const q=_.touches[0],Y=F.current.getBoundingClientRect(),je=(q.clientX-Y.left)/Y.width;v(Math.max(0,Math.min(1,je))*i)},M=_=>{_.stopPropagation(),ge.current=!1,De.current=null};g.useEffect(()=>{let _=null;const q=je=>{!ge.current||!F.current||!i||_===null&&(_=requestAnimationFrame(()=>{if(_=null,!ge.current||!F.current)return;const Fn=F.current.getBoundingClientRect(),U=(je.clientX-Fn.left)/Fn.width;v(Math.max(0,Math.min(1,U))*i)}))},Y=()=>{ge.current&&(ge.current=!1,De.current=null),_!==null&&(cancelAnimationFrame(_),_=null)};return document.addEventListener("mousemove",q),document.addEventListener("mouseup",Y),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",Y),_!==null&&cancelAnimationFrame(_)}},[i,v]);const ie=()=>{ct(!0),t==null||t(),setTimeout(()=>{e()},300)},te=(_="up")=>{const q=_==="down"?V:j;if(q){const Y=q.getBoundingClientRect();Z({top:_==="down"?Y.bottom:Y.top,left:Y.left+Y.width/2}),ae(_),J(!0)}};g.useEffect(()=>(n&&(n.current=ie),()=>{n&&(n.current=null)}),[n]);const fe=_=>{C||P||(H.current=_.touches[0].clientY,re.current=Date.now())},Be=_=>{if(C||P||H.current===null)return;const Y=_.touches[0].clientY-H.current;if(Y>0&&X.current){const je=Math.min(Y,window.innerHeight*.5);X.current.style.transform=`translateY(${je}px)`}},Le=_=>{if(C||P||H.current===null||re.current===null){H.current=null,re.current=null,X.current&&(X.current.style.transform="");return}const Y=_.changedTouches[0].clientY-H.current,je=Date.now()-re.current,Fn=50,U=.3;X.current&&(X.current.style.transform="");const W=Y/je;(Y>Fn||Y>30&&W>U)&&ie(),H.current=null,re.current=null};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }

      @media (min-width: 1024px) {
        .lg\\:max-w-\\[864px\\] { max-width: 864px; }
      }

      /* Queue sidebar in player modal - transparent backgrounds (exclude fixed elements like context menus) */
      .queue-xl-container .bg-zinc-900:not([style*="position: fixed"]):not(.fixed) { background-color: transparent; }
      .queue-xl-container .hover\\:bg-zinc-900:hover:not([style*="position: fixed"]):not(.fixed) { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .hover\\:bg-zinc-800:hover { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .text-\\[var\\(--accent-color\\)\\] { color: white; }

      /* Background crossfade animation - only on large screens */
      @keyframes bgFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .bg-fade-in {
        animation: none; /* Instant on smaller screens */
      }
      @media (min-width: 1280px) {
        .bg-fade-in {
          animation: bgFadeIn 1s ease-out forwards;
        }
      }

      /* Lyrics modal with sidebar - adjust right edge on xl screens */
      @media (min-width: 1280px) {
        .lyrics-with-sidebar { right: var(--sidebar-width) !important; }
      }
    `}),u.jsxs("div",{ref:X,onTouchStart:fe,onTouchMove:Be,onTouchEnd:Le,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex transition-transform duration-300 ease-out overflow-hidden ${me?"translate-y-full":pe?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:H.current===null?"transform 300ms ease-out":"none"},children:[!Kt&&(Pe||lt)&&u.jsxs("div",{className:C?"hidden xl:contents":"contents",children:[lt&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${lt})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]}),Pe&&u.jsxs("div",{className:"absolute inset-0 bg-fade-in",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Pe})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]},Pe)]}),u.jsx("div",{className:C?"hidden xl:contents":"contents",children:u.jsx("div",{className:"absolute inset-0 bg-black/40 z-[1] pointer-events-none"})}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-[2]",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[u.jsx("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:u.jsx("button",{onClick:ie,"aria-label":"Close player",className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:u.jsx(E1,{className:"w-8 h-8"})})}),P&&k&&u.jsx("h2",{className:"hidden min-[480px]:block absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:hn()}),u.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[u.jsx("div",{className:`${C?"xl:hidden":"md:hidden"}`,children:!$t()&&u.jsx(rn,{variant:"compact",onOpenPopover:()=>te("down"),onRef:se,className:"text-white hover:text-zinc-300 hover:bg-white/10 rounded-full transition-colors p-2"})}),u.jsx("button",{onClick:()=>{!ce&&!P||(C&&T(!1),Q(!P))},"aria-label":P?"Hide lyrics":"Show lyrics",className:`transition-colors p-2 rounded-full ${ce||P?`hover:bg-white/10 ${P?"text-[var(--accent-color)]":"text-white"}`:"hidden"}`,children:u.jsx(K1,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>{C||Q(!1),T(!C)},"aria-label":C?"Show player":"Show queue",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 xl:hidden",children:C?u.jsx(hy,{className:"w-6 h-6"}):u.jsx(Ka,{className:"w-6 h-6"})}),!y&&u.jsx("button",{onClick:w,"aria-label":"Open queue sidebar",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 hidden xl:block",children:u.jsx(Ka,{className:"w-6 h-6"})})]})]}),C&&u.jsx("div",{className:"flex-1 bg-zinc-900 relative z-10 xl:hidden",children:u.jsx(Jy,{onClose:()=>T(!1),onNavigateFromContextMenu:()=>{ie()}})}),u.jsxs("div",{className:`flex-1 flex-col min-h-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full relative ${C?"hidden xl:flex":"flex"}`,style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[u.jsx("div",{className:`flex-1 overflow-hidden min-h-0 flex items-center justify-center ${P?"invisible":""}`,children:u.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8 md:pr-0",children:u.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[u.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:u.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 ${Kt?"":"bg-zinc-900 shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:Kt?u.jsx("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center relative",children:u.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:_=>{A.error("Failed to load vinyl image"),_.currentTarget.style.display="none"}})}):u.jsx(Ms,{src:z.getAlbumArtUrl(k.AlbumId||k.Id),alt:k.Name,className:"w-full h-full object-cover",rounded:"rounded",onError:()=>_e(!0)})})}),u.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:hn()}),On()&&u.jsxs("button",{onClick:()=>{var q,Y;const _=(Y=(q=k.ArtistItems)==null?void 0:q[0])==null?void 0:Y.Id;_&&(e(),r(`/artist/${_}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[u.jsx(Xl,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:On()})]}),mn&&u.jsxs("button",{onClick:()=>{e(),r(`/album/${k.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[u.jsx(Zi,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:k.Album})]})]})]})})}),u.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[u.jsx("div",{className:"space-y-3 px-4 w-full",children:u.jsxs("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto",children:[u.jsx("div",{ref:F,className:"h-2 bg-white/10 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:Fr,onMouseDown:$,onMouseUp:G,onMouseLeave:G,onTouchStart:he,onTouchMove:D,onTouchEnd:M,children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${fn}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:fn>=100?"9999px":"0",borderBottomRightRadius:fn>=100?"9999px":"0"}})}),u.jsxs("div",{className:"flex justify-between text-xs text-white/70 mt-2 tabular-nums",children:[u.jsx("span",{children:Dn(a)}),u.jsx("span",{children:Dn(i)})]})]})}),u.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 relative",children:[u.jsx("button",{onClick:E,"aria-label":c?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${c?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:u.jsx(Cr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:x,disabled:!Xt,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Xt?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(ru,{className:"w-8 h-8"})}),u.jsx("button",{onClick:()=>{I?d():k&&p(k)},"aria-label":o&&I?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:o&&I?u.jsx(_s,{className:"w-8 h-8"}):u.jsx(Rn,{className:"w-8 h-8"})}),u.jsx("button",{onClick:h,disabled:!Me,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Me?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(su,{className:"w-8 h-8"})}),u.jsx("button",{onClick:m,"aria-label":f==="off"?"Enable repeat":f==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${f!=="off"?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:f==="one"?u.jsx(tu,{className:"w-6 h-6"}):u.jsx(nu,{className:"w-6 h-6"})}),u.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 hidden md:flex",children:!$t()&&u.jsx(rn,{variant:"horizontal"})})]})]})]}),P&&u.jsx(Zy,{}),K&&R&&!$t()&&u.jsx(rn,{variant:"vertical",onClose:()=>J(!1),popoverPosition:R,popoverDirection:le})]}),u.jsx("div",{className:"hidden xl:flex flex-col flex-shrink-0 relative z-10 transition-[width] duration-300 ease-out overflow-hidden",style:{width:y?"var(--sidebar-width)":"0px"},children:u.jsxs("div",{className:"flex flex-col h-full flex-shrink-0",style:{width:"var(--sidebar-width)"},children:[u.jsx("div",{className:`border-l border-white/20 flex-shrink-0 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/20 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:w,"aria-label":"Close queue sidebar",className:"text-white/70 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 relative z-20",children:u.jsx(er,{className:"w-5 h-5"})})]})}),u.jsx("div",{className:`flex-1 overflow-y-auto min-h-0 border-l border-white/20 queue-xl-container [&_.text-gray-400]:text-white/60 [&_.text-gray-500]:text-white/50 [&_.text-gray-300]:text-white/70 [&_.border-zinc-800]:border-white/20 [&_.bg-zinc-600]:bg-white/30 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsx(au,{onNavigateFromContextMenu:ie,contentPaddingBottom:"2rem"})})]})})]})]})}function tv(){var hn,On,mn,Fr;const{songs:e,currentIndex:t,isPlaying:n,currentTime:r,duration:s,audioElement:l,setAudioElement:o,togglePlayPause:a,next:i,setCurrentTime:c,setDuration:f,playTrack:d,repeat:h,shuffle:x,toggleShuffle:v,toggleRepeat:S,previous:E,seek:m,skipToTrack:p,isQueueSidebarOpen:y,toggleQueueSidebar:w,setNextAudioElement:I,preBufferNextTrack:N}=ne(),k=lu(),C=ou(),[T,P]=g.useState(!1),[Q,K]=g.useState(!1),[J,R]=g.useState(!1),[Z,le]=g.useState(!1),[ae,j]=g.useState(null),[L,V]=g.useState(null),[se,ce]=g.useState(null),xe=g.useRef(null),me=g.useRef(null),ct=g.useRef(null),pe=g.useRef(null),Re=g.useRef(!1),Kt=Yt(),_e=g.useRef(null),Pe=g.useRef(null),Ft=g.useRef(null),lt=g.useRef(null),B=g.useRef(!1),F=g.useRef(!1);g.useEffect(()=>{T&&(K(!0),setTimeout(()=>{P(!1),K(!1)},300))},[Kt.pathname]),g.useEffect(()=>{P(!1),K(!1)},[]),g.useEffect(()=>{const $=()=>{T&&ct.current&&ct.current()};return window.addEventListener("closePlayerModal",$),()=>{window.removeEventListener("closePlayerModal",$)}},[T]);const H=()=>{K(!0),setTimeout(()=>{P(!1),K(!1)},300)};g.useEffect(()=>{xe.current||(xe.current=new Audio,xe.current.setAttribute("playsinline","true"),xe.current.setAttribute("preload","auto"),o(xe.current)),me.current||(me.current=new Audio,me.current.setAttribute("playsinline","true"),me.current.setAttribute("preload","auto"),I(me.current));const $=ne.getState().volume;xe.current&&(xe.current.volume=$),me.current&&(me.current.volume=$)},[o,I]),g.useEffect(()=>{const $=()=>{Re.current=!1};return window.addEventListener("playerSeek",$),()=>window.removeEventListener("playerSeek",$)},[]),g.useEffect(()=>{if(!$t())return;const $=()=>{document.visibilityState==="visible"&&setTimeout(()=>{const G=ne.getState(),he=G.audioElement;!he||!G.isPlaying||he.paused&&he.play().catch(()=>{ne.setState({isPlaying:!1})})},300)};return document.addEventListener("visibilitychange",$),()=>document.removeEventListener("visibilitychange",$)},[]),g.useEffect(()=>{if(!l)return;let $=!0;Re.current=!1;const G=()=>{if(!$)return;c(l.currentTime);const te=l.duration-l.currentTime;if(l.duration>0&&te<=15&&te>0&&N(),!Re.current&&l.duration>0&&te<=1&&te>0){Re.current=!0;const fe=ne.getState(),Be=fe.currentIndex>=0&&fe.currentIndex<fe.songs.length?fe.songs[fe.currentIndex]:null;if(fe.repeat==="one"){if(Be&&!fe.hasRecordedCurrentTrackStats){const Le=l.currentTime*1e3;We.getState().recordPlay(Be,Le)}ne.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,Re.current=!1;return}if(Be){z.markItemAsPlayed(Be.Id).catch(()=>{}),pe.current&&clearTimeout(pe.current);const Le=Be.Id;pe.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Le}})),pe.current=null},4e3)}i()}},he=()=>{$&&(f(l.duration),Re.current=!1,A.debug("[PlayerBar] Metadata loaded",{duration:l.duration}))},D=async()=>{if(A.debug("[PlayerBar] handleEnded fired",{preemptive:Re.current}),!$)return;if(Re.current){Re.current=!1;return}const te=ne.getState(),fe=te.currentIndex>=0&&te.currentIndex<te.songs.length?te.songs[te.currentIndex]:null;if(fe)try{await z.markItemAsPlayed(fe.Id),pe.current&&clearTimeout(pe.current);const Le=fe.Id;pe.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:Le}})),pe.current=null},4e3)}catch{}if(te.repeat==="one"){const Le=te.hasRecordedCurrentTrackStats;if(fe&&!Le){const _=l.currentTime*1e3;We.getState().recordPlay(fe,_)}ne.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,l.play();return}i()},M=()=>{$&&ne.getState().audioElement===l&&(ne.setState({isPlaying:!0}),A.debug("[PlayerBar] handlePlay",{src:l.src}))},ie=()=>{$&&ne.getState().audioElement===l&&(ne.setState({isPlaying:!1}),A.debug("[PlayerBar] handlePause",{paused:l.paused}))};return l.addEventListener("timeupdate",G),l.addEventListener("loadedmetadata",he),l.addEventListener("ended",D),l.addEventListener("play",M),l.addEventListener("pause",ie),()=>{$=!1,l.removeEventListener("timeupdate",G),l.removeEventListener("loadedmetadata",he),l.removeEventListener("ended",D),l.removeEventListener("play",M),l.removeEventListener("pause",ie),pe.current&&(clearTimeout(pe.current),pe.current=null)}},[l,c,f,i,N]),g.useEffect(()=>{var $,G;"mediaSession"in navigator&&k&&(navigator.mediaSession.metadata=new MediaMetadata({title:k.Name||"Unknown",artist:((G=($=k.ArtistItems)==null?void 0:$[0])==null?void 0:G.Name)||k.AlbumArtist||"",album:k.Album||"",artwork:[{src:z.getAlbumArtUrl(k.AlbumId||k.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",a),navigator.mediaSession.setActionHandler("pause",a),navigator.mediaSession.setActionHandler("previoustrack",E),navigator.mediaSession.setActionHandler("nexttrack",i))},[k,a,i,E]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&s>0)try{navigator.mediaSession.setPositionState({duration:s,playbackRate:1,position:Math.min(r,s)})}catch{}},[r,s]),g.useEffect(()=>{if(k&&!n&&l){const $=z.serverBaseUrl,G=$?`${$}/Audio/${k.Id}/stream?static=true`:"";l.src!==G&&(l.src=G,l.load())}},[k,n,l]);const re=e.length>0?e[0]:null,X=k||C||re;g.useEffect(()=>{R(!1)},[X==null?void 0:X.Id]);const ge=s>0?r/s*100:0,De=$=>{const G=Math.floor($/60),he=Math.floor($%60);return`${G}:${he.toString().padStart(2,"0")}`},Me=e.length>0&&(t<0||t<e.length-1||h!=="off"),Xt=t>0||h==="all"&&e.length>0,Jt=()=>{const G=window.innerWidth<768?se:L;if(G){const he=G.getBoundingClientRect();j({top:he.top,left:he.left+he.width/2}),le(!0)}},sr=$=>{B.current||(_e.current=$.touches[0].clientX,Pe.current=Date.now(),F.current=!1,lt.current&&(lt.current.style.transition="none"))},fn=$=>{if(B.current||_e.current===null||!lt.current)return;const G=$.touches[0].clientX-_e.current,he=Math.max(.3,1-Math.abs(G)/300);lt.current.style.transform=`translateX(${G}px)`,lt.current.style.opacity=String(he),Math.abs(G)>10&&(F.current=!0)},Dn=$=>{if(B.current||_e.current===null||Pe.current===null){_e.current=null,Pe.current=null;return}const G=lt.current;if(!G){_e.current=null,Pe.current=null;return}const D=$.changedTouches[0].clientX-_e.current,M=Date.now()-Pe.current,ie=75,te=.45,fe=Math.abs(D)/M,Be=D>ie||D>45&&fe>te,Le=D<-ie||D<-45&&fe>te,_=Be&&Xt;if(_||Le&&Me){B.current=!0;const je=(_?1:-1)*window.innerWidth;G.style.transition="transform 200ms ease-out, opacity 200ms ease-out",G.style.transform=`translateX(${je}px)`,G.style.opacity="0",setTimeout(()=>{_?E():i(),G.style.transition="none",G.style.transform=`translateX(${-je}px)`,G.style.opacity="0",G.offsetHeight,G.style.transition="transform 200ms ease-out, opacity 200ms ease-out",G.style.transform="translateX(0)",G.style.opacity="1",setTimeout(()=>{G.style.transition="",G.style.transform="",G.style.opacity="",B.current=!1},200)},200)}else G.style.transition="transform 200ms ease-out, opacity 200ms ease-out",G.style.transform="translateX(0)",G.style.opacity="1",setTimeout(()=>{G.style.transition="",G.style.transform="",G.style.opacity=""},200);_e.current=null,Pe.current=null};return X?u.jsxs(u.Fragment,{children:[u.jsxs("div",{ref:Ft,className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer bottom-[calc(4rem-8px)] lg:bottom-0",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:()=>{F.current||P(!0)},onTouchStart:sr,onTouchMove:fn,onTouchEnd:Dn,children:[X&&u.jsx("div",{className:"hidden lg:block absolute left-0 right-0 cursor-pointer group",style:{top:"-10px",height:"24px"},onClick:$=>{if($.stopPropagation(),!s)return;const G=$.currentTarget.getBoundingClientRect(),he=($.clientX-G.left)/G.width;m(Math.max(0,Math.min(1,he))*s)},onTouchStart:$=>{if($.stopPropagation(),!s)return;const G=$.touches[0],he=$.currentTarget.getBoundingClientRect(),D=(G.clientX-he.left)/he.width;m(Math.max(0,Math.min(1,D))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 bottom-[10px] h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${ge}%`}})})}),u.jsxs("div",{className:"hidden md:block md:relative md:px-4 md:pt-3 md:pb-1 lg:pb-3",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0 max-w-[37%]",children:[!J&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx(Ms,{src:z.getAlbumArtUrl((k||X).AlbumId||(k||X).Id,96),alt:(k||X).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>R(!0)},(k==null?void 0:k.Id)||X.Id)}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(k||X).Name}),u.jsxs("div",{className:"text-xs text-gray-400 truncate flex items-center gap-1.5 min-w-0",children:[u.jsx("span",{className:"truncate",children:((On=(hn=(k||X).ArtistItems)==null?void 0:hn[0])==null?void 0:On.Name)||(k||X).AlbumArtist||"Unknown Artist"}),u.jsx("span",{className:"flex-shrink-0",children:""}),u.jsxs("span",{className:"tabular-nums flex-shrink-0",children:[De(r),"/",De(s)]})]})]})]}),u.jsxs("div",{className:"absolute top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 md:right-16 md:left-auto md:translate-x-0 lg:left-1/2 lg:right-auto lg:-translate-x-1/2 flex items-center gap-2",children:[u.jsx("button",{onClick:$=>{$.stopPropagation(),v()},"aria-label":x?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${x?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(Cr,{className:"w-5 h-5"})}),u.jsx("button",{onClick:$=>{$.stopPropagation(),Xt&&E()},disabled:!Xt,"aria-label":"Previous track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${Xt?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(ru,{className:"w-5 h-5"})}),u.jsx("button",{onClick:$=>{$.stopPropagation(),k?a():e.length>0?p(0):X&&d(X)},"aria-label":n&&k?"Pause":"Play",className:"w-10 h-10 mx-2 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&k?u.jsx(_s,{className:"w-5 h-5"}):u.jsx(Rn,{className:"w-5 h-5"})}),u.jsx("button",{onClick:$=>{$.stopPropagation(),Me&&i()},disabled:!Me,"aria-label":"Next track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${Me?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(su,{className:"w-5 h-5"})}),u.jsx("button",{onClick:$=>{$.stopPropagation(),S()},"aria-label":h==="off"?"Enable repeat":h==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${h!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:h==="one"?u.jsx(tu,{className:"w-5 h-5"}):u.jsx(nu,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"absolute right-4 top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 flex items-center gap-4",children:[u.jsx("div",{className:"hidden xl:block",children:!y&&u.jsx("button",{onClick:$=>{$.stopPropagation(),w()},className:"text-gray-400 hover:text-white hover:bg-zinc-800 transition-colors flex items-center justify-center w-10 h-10 rounded-full",title:"Open Queue","aria-label":"Open queue",children:u.jsx(Ka,{className:"w-5 h-5"})})}),u.jsx("div",{className:"hidden lg:block",onClick:$=>$.stopPropagation(),children:!$t()&&u.jsx(rn,{variant:"horizontal"})}),u.jsx("div",{className:"hidden md:block lg:hidden",children:!$t()&&u.jsx(rn,{variant:"compact",onOpenPopover:Jt,onRef:V,className:"w-10 h-10 flex items-center justify-center text-white hover:text-zinc-300 hover:bg-zinc-800 rounded-full transition-colors"})})]})]}),u.jsxs("div",{className:"flex items-center gap-3 pt-3 pb-1 pr-3 pl-4 md:hidden",children:[u.jsxs("div",{ref:lt,className:"flex items-center gap-3 flex-1 min-w-0",children:[!J&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx(Ms,{src:z.getAlbumArtUrl((k||X).AlbumId||(k||X).Id,96),alt:(k||X).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>R(!0)},(k==null?void 0:k.Id)||X.Id)}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(k||X).Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:((Fr=(mn=(k||X).ArtistItems)==null?void 0:mn[0])==null?void 0:Fr.Name)||(k||X).AlbumArtist||"Unknown Artist"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!$t()&&u.jsx(rn,{variant:"compact",onOpenPopover:Jt,onRef:ce,className:"text-white hover:text-zinc-300 transition-colors"}),u.jsx("button",{onClick:$=>{$.stopPropagation(),k?a():e.length>0?p(0):X&&d(X)},"aria-label":n&&k?"Pause":"Play",className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors",children:n&&k?u.jsx(_s,{className:"w-5 h-5"}):u.jsx(Rn,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"lg:hidden",style:{marginBottom:"-10px"},children:X&&u.jsx("div",{className:"relative cursor-pointer group flex items-center",style:{height:"24px"},onClick:$=>{if($.stopPropagation(),!s)return;const G=$.currentTarget.getBoundingClientRect(),he=($.clientX-G.left)/G.width;m(Math.max(0,Math.min(1,he))*s)},onTouchStart:$=>{if($.stopPropagation(),!s)return;const G=$.touches[0],he=$.currentTarget.getBoundingClientRect(),D=(G.clientX-he.left)/he.width;m(Math.max(0,Math.min(1,D))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${ge}%`}})})})})]}),T&&u.jsx(ev,{onClose:H,onClosingStart:()=>K(!0),closeRef:ct}),Z&&ae&&!$t()&&u.jsx(rn,{variant:"vertical",onClose:()=>le(!1),popoverPosition:ae})]}):null}function nv(){const e=qe(c=>c.state),t=qe(c=>c.message),n=qe(c=>c.progress),r=qe(c=>c.cancelSync),s=ne(c=>c.isQueueSidebarOpen),l=Ye(c=>c.localServerUrl);if(e==="idle")return null;const o=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}},a=vo()||l,i=e==="syncing"&&a?z.serverBaseUrl===a.replace(/\/$/,"")?"Syncing via LAN server...":"Syncing via remote server...":t;return u.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${o()} transition-colors duration-300`,style:{height:"28px",top:"0px",paddingLeft:"16px",paddingRight:s?"var(--sidebar-width)":"12px",scrollbarGutter:"stable"},children:u.jsxs("div",{className:"h-full flex items-center",children:[u.jsxs("span",{className:"text-white text-sm font-medium truncate",children:[i,e==="syncing"&&n!==null&&u.jsxs("span",{className:"tabular-nums",children:[" (",n,"%)"]})]}),e==="syncing"&&u.jsx("button",{onClick:r,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors ml-8",children:"Cancel"})]})})}const Xo=new Set;async function rv(e){const t=e.toLowerCase();if(!Xo.has(t)){Xo.add(t);try{A.log(`[Recommendations] Auto-syncing genre "${e}" for better recommendations...`);const{genres:n,setGenreSongs:r}=ue.getState();let s=n;s.length===0&&(s=await z.getGenres());const l=s.find(a=>a.Name&&e&&a.Name.toLowerCase()===e.toLowerCase());if(!l||!l.Id){A.warn(`[Recommendations] Genre "${e}" not found in server`);return}A.log(`[Recommendations] Fetching songs for genre "${e}"...`);const o=await z.getGenreSongs(l.Id,e);o.length>0?(r(l.Id,o),A.log(`[Recommendations]  Successfully cached ${o.length} songs for genre "${e}"`)):A.warn(`[Recommendations] No songs found for genre "${e}" on server`)}catch(n){A.error(`[Recommendations] Failed to sync genre "${e}":`,n)}finally{setTimeout(()=>{Xo.delete(t)},1e4)}}}async function sv({currentTrack:e,queue:t}){var w;if(!e)return{recommendations:[],hasGenreMatches:!1};const{songs:n,genreSongs:r,genres:s}=ue.getState(),l=e.Genres||[];let o=[];if(l.length>0&&s.length>0){const I=s.filter(N=>N.Name&&l.some(k=>k.toLowerCase()===N.Name.toLowerCase())).map(N=>N.Id).filter(N=>r[N]&&r[N].length>0);I.length>0&&(o=I.flatMap(N=>r[N]),A.log(`[Recommendations] Using ${o.length} pre-filtered songs from ${I.length} matching genres`))}if(o.length===0&&n.length>0&&(o=n,A.log(`[Recommendations] Using ${o.length} songs from main cache`)),o.length===0){const I=Object.values(r).flat();I.length>0&&(o=I,A.log(`[Recommendations] Using ${o.length} songs from all genre caches`))}if(o.length===0){const{setRecommendationsQuality:I}=Ye.getState();return I("failed"),{recommendations:[],hasGenreMatches:!1}}A.log("[Recommendations] Using",o.length,"available songs"),A.log("[Recommendations] Current track genres:",l,"(count:",l.length+")"),A.log("[Recommendations] Current track year:",e.ProductionYear),A.log("[Recommendations] Queue size:",t.length),A.log("[Recommendations] Sample available songs:",o.slice(0,3).map(I=>{var N;return`${I.Name} (${I.ProductionYear}) [${(N=I.Genres)==null?void 0:N.join(", ")}]`}));let a=[],i=!1;const c=e.ProductionYear,f=c?[{range:3,years:Array.from({length:7},(I,N)=>c-3+N)},{range:6,years:Array.from({length:13},(I,N)=>c-6+N)},{range:10,years:Array.from({length:21},(I,N)=>c-10+N)}]:[],d=I=>{const N=I.Id!==e.Id,k=!t.some(T=>T.Id===I.Id),C=!a.some(T=>T.Id===I.Id);return N&&k&&C},h=I=>{var N;return l.length===0?!0:((N=I.Genres)==null?void 0:N.some(k=>l.some(C=>k.toLowerCase()===C.toLowerCase())))??!1},x=(I,N)=>c?I.ProductionYear!==void 0&&N.includes(I.ProductionYear):!0;let v=0;if(l.length>0&&(v=o.filter(I=>h(I)).length,v===0)){for(const I of l)rv(I).catch(N=>A.error(`[Recommendations] Genre sync failed for ${I}:`,N));return{recommendations:[],hasGenreMatches:!1,triggeredGenreSync:!0}}for(const{range:I,years:N}of f){if(a.length>=12){A.log(`[Recommendations] Have ${a.length} recommendations, stopping at ${I} year range`);break}const k=12-a.length,C=o.filter(T=>!(!d(T)||!h(T)||!x(T,N)));if(A.log(`[Recommendations] Year range ${I}: found ${C.length} candidates, need ${k}`),C.length>0){const P=tt(C).slice(0,k);a.push(...P),A.log(`[Recommendations] Added ${P.length} songs from ${I} year range`)}}if(a.length<12&&!c&&l.length>0){const I=12-a.length,N=o.filter(T=>!(!d(T)||!h(T))),C=tt(N).slice(0,I);a.push(...C),A.log(`[Recommendations] Added ${C.length} genre-only songs (no year on seed track)`)}if(a.length<12&&c&&l.length===0)for(const{range:I,years:N}of f){if(a.length>=12)break;const k=12-a.length,C=o.filter(Q=>!(!d(Q)||!x(Q,N))),P=tt(C).slice(0,k);a.push(...P),A.log(`[Recommendations] Added ${P.length} year-only songs from ${I} range (no genre on seed track)`)}i=l.length>0&&a.some(I=>h(I)),A.log("[Recommendations] Matching results:",{totalRecommendations:a.length,genreMatchSuccess:i,hasGenres:l.length>0,hasYear:!!c});const S=tt(a),E=[],m=[...S];for(;m.length>0&&E.length<12;){let I=-1;if(E.length>0){const C=((w=E[E.length-1].ArtistItems)==null?void 0:w.map(T=>T.Id))||[];I=m.findIndex(T=>{var Q;return!(((Q=T.ArtistItems)==null?void 0:Q.map(K=>K.Id))||[]).some(K=>C.includes(K))})}I===-1&&(I=0);const N=m.splice(I,1)[0];E.push(N)}const p=E,{setRecommendationsQuality:y}=Ye.getState();return A.log("[Recommendations] Quality decision:",{finalRecommendationsCount:p.length,genreMatchSuccess:i,hasGenres:l.length>0,availableSongsCount:o.length}),p.length===0?y("failed"):!i&&l.length>0?y("degraded"):y("good"),A.log(`[Recommendations] Generated ${p.length} recommendations`),p.length>0&&A.log("[Recommendations] Sample:",p.slice(0,3).map(I=>I.Name)),{recommendations:p,hasGenreMatches:i,triggeredGenreSync:!1}}function lv(e){var s;if(e.length<=1)return e;const t=tt(e),n=[],r=[...t];for(;r.length>0;){let l=-1;if(n.length>0){const i=((s=n[n.length-1].ArtistItems)==null?void 0:s.map(c=>c.Id))||[];l=r.findIndex(c=>{var d;return!(((d=c.ArtistItems)==null?void 0:d.map(h=>h.Id))||[]).some(h=>i.includes(h))})}l===-1&&(l=0);const o=r.splice(l,1)[0];n.push(o)}return n}function ov(){const{currentIndex:e,addToQueue:t,refreshCurrentTrack:n,isFetchingRecommendations:r,setIsFetchingRecommendations:s,repeat:l}=ne(),o=ne(v=>v.songs.length),{showQueueRecommendations:a}=Ye(),i=g.useRef([]),c=g.useRef(!1),f=g.useRef(0),d=g.useRef(0),h=g.useRef(0),x=3;g.useEffect(()=>{const v=ne.getState().songs;i.current=v.slice(-20)},[o]),g.useEffect(()=>{f.current=0,d.current=0,h.current=0},[e]),g.useEffect(()=>{f.current=0,d.current=0,h.current=0},[a]),g.useEffect(()=>{const v=ne.getState().songs,S=v.slice(e+1).filter(w=>w.source==="recommendation").length,E=Date.now()-f.current,m=Date.now()-d.current;if(!!!(a&&l==="off"&&!c.current&&!r&&e>=0&&S<12&&E>1e4&&m>5e3))return S>=12||l==="all",void 0;(async()=>{var I;c.current=!0,s(!0);const w=setTimeout(()=>{c.current=!1,s(!1)},3e4);try{await n();const N=v[e];if(!N)return;const k=[N],C=[e-1,e+1,e+2];for(const j of C)if(j>=0&&j<v.length&&k.length<3){const L=v[j];L&&!k.some(V=>V.Id===L.Id)&&k.push(L)}const T=[];for(const j of k){A.log(`[Recommendations] Generating recommendations for seed: ${j.Name}`);const L=await sv({currentTrack:j,queue:v,recentQueue:i.current,lastPlayedTrack:null});if(A.log(`[Recommendations] Result for seed ${j.Name}:`,{recommendationsCount:((I=L.recommendations)==null?void 0:I.length)||0,hasGenreMatches:L.hasGenreMatches,triggeredGenreSync:L.triggeredGenreSync,resultType:typeof L,isArray:Array.isArray(L)}),L.triggeredGenreSync){if(h.current+=1,h.current>x){A.warn("[Recommendations] Max retries reached, giving up"),f.current=Date.now();const{setRecommendationsQuality:se}=Ye.getState();se("failed");return}const V=15e3*Math.pow(2,h.current-1);A.log(`[Recommendations] Genre sync triggered (attempt ${h.current}/${x}), retry in ${V/1e3}s`),setTimeout(()=>{f.current=0},V);return}L.recommendations&&Array.isArray(L.recommendations)?T.push(L):A.warn(`[Recommendations] Invalid result for seed ${j.Name}:`,L)}const P=T.filter(j=>j.hasGenreMatches);if(A.log(`[Recommendations] ${P.length} out of ${k.length} seeds found genre matches`),P.length===0){const{setRecommendationsQuality:j}=Ye.getState();j("degraded"),A.log("[Recommendations] No genre matches found - falling back to year/artist only")}const Q=v.slice(e+1).filter(j=>j.source==="recommendation").length,K=Math.max(0,12-Q);if(K===0){A.log("[Recommendations] Already have 12 upcoming recommendations, skipping");return}A.log(`[Recommendations] Currently have ${Q} upcoming, need ${K} more to reach 12`);const J=P.length>0?P:T,R=Math.ceil(K/J.length),Z=[];for(const j of J){const L=j.recommendations.filter(se=>{const ce=v.some(me=>me.Id===se.Id),xe=Z.some(me=>me.Id===se.Id);return!ce&&!xe}),V=L.slice(0,R);Z.push(...V),A.log(`[Recommendations] Added ${V.length} recommendations from seed (${L.length} available, genreMatch: ${j.hasGenreMatches})`)}const le=Z.slice(0,K),ae=lv(le);A.log(`[Recommendations] Final ${le.length} recommendations (distributed across ${k.length} seeds)`),ae.length>0?(A.log(`[Recommendations] Adding ${ae.length} recommendations (had ${Q}, will have ${Q+ae.length})`),A.log("[Recommendations] Recommendations to add:",ae.map(j=>j.Name)),f.current=0,d.current=Date.now(),h.current=0,t(ae,!1,"recommendation"),A.log("[Recommendations] Successfully added recommendations to queue")):(A.log("[Recommendations] No safe recommendations to add - marking as failed attempt"),f.current=Date.now())}catch(N){A.error("[Recommendations Hook] Failed to get recommendations:",N),c.current=!1,s(!1)}finally{clearTimeout(w),c.current=!1,s(!1)}})()},[o,e,t,n,a,r,s,l]),g.useEffect(()=>{if(l!=="off"){a&&Ye.getState().setShowQueueRecommendations(!1);const v=ne.getState().songs;if(v.some((E,m)=>m>e&&E.source==="recommendation")){const E=v.filter((m,p)=>p<=e?!0:m.source==="user");ne.setState({songs:E,standardOrder:E.filter(m=>m.source==="user").map(m=>m.Id),shuffleOrder:E.filter(m=>m.source==="user").map(m=>m.Id)})}}},[l,e,o,a])}function av(){const{accessToken:e,isAuthenticated:t}=$e(),n=g.useRef(null),r=g.useRef(null),s=g.useRef(null),l=g.useRef(5e3);g.useEffect(()=>{if(!t||!e)return;const o=z.serverBaseUrl;if(!o)return;const a=()=>{if(n.current&&n.current.readyState<=WebSocket.OPEN)return;const c=Rs.get("deviceId")||"unknown",f=o.startsWith("https")?"wss":"ws",d=o.replace(/^https?:\/\//,"").replace(/\/$/,""),h=`${f}://${d}/socket?api_key=${e}&deviceId=${c}`,x=new WebSocket(h);n.current=x,x.onopen=()=>{l.current=5e3},x.onmessage=v=>{var S,E,m;try{const p=JSON.parse(v.data);if(p.MessageType!=="LibraryChanged")return;const y=p.Data;if(!(((S=y==null?void 0:y.ItemsAdded)==null?void 0:S.length)>0||((E=y==null?void 0:y.ItemsUpdated)==null?void 0:E.length)>0||((m=y==null?void 0:y.ItemsRemoved)==null?void 0:m.length)>0))return;A.log("[useLibraryChanged] Library changed, scheduling incremental sync"),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{iv()},5e3)}catch{}},x.onclose=()=>{i()},x.onerror=()=>{}},i=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{a(),l.current=Math.min(l.current*2,6e4)},l.current)};return a(),()=>{s.current&&clearTimeout(s.current),r.current&&clearTimeout(r.current),n.current&&(n.current.onclose=null,n.current.close(),n.current=null)}},[t,e])}async function iv(){const{state:e}=qe.getState();if(e!=="idle")return;const{lastSyncCompleted:t}=ue.getState();if(t===null)return;const{startSync:n,completeSync:r}=qe.getState();try{await _h(),n("auto","New content detected, syncing..."),await z.syncLibrary({scope:"incremental"});const l=(await z.getGenres()||[]).sort((a,i)=>(a.Name||"").localeCompare(i.Name||""));ue.getState().setGenres(l),ue.getState().setLastSyncCompleted(Date.now());const o=await z.getRecentlyAdded(18);ue.getState().setRecentlyAdded(o.Items||[]),r(!0,"Library synced")}catch(s){qe.getState().state==="syncing"&&r(!1,s instanceof Error?s.message:"Sync failed")}}function uv(){const{isQueueSidebarOpen:e,toggleQueueSidebar:t}=ne();return g.useEffect(()=>{const n=r=>{r.key==="Escape"&&e&&t()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]),e?u.jsxs("div",{className:"fixed top-0 right-0 bottom-0 bg-black border-l border-zinc-800 z-30 flex flex-col hidden xl:flex shadow-xl",style:{width:"var(--sidebar-width)",paddingTop:"var(--header-offset, 0px)"},children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-zinc-800",children:u.jsx(er,{className:"w-5 h-5"})})]}),u.jsx(au,{contentPaddingBottom:"8rem"})]}):null}const Jc={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function cv({children:e}){const t=Yt();ov(),av();const{accentColor:n}=Ye(),r=ue(d=>d.genres),s=ue(d=>d.songs),l=ue(d=>d.genreSongs),o=qe(d=>d.state),a=qe(d=>d.startSync),i=qe(d=>d.completeSync),{isQueueSidebarOpen:c}=ne(),f=g.useRef(!1);return g.useEffect(()=>{const d=Jc[n]||Jc.blue;document.documentElement.style.setProperty("--accent-color",d)},[n]),g.useEffect(()=>{const d=o!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",d)},[o]),g.useEffect(()=>{r.length===0&&z.getGenres().catch(d=>{})},[r.length]),g.useEffect(()=>{if(f.current)return;const d=setTimeout(async()=>{const{lastSyncCompleted:h}=ue.getState(),{state:x}=qe.getState();if(h!==null||x!=="idle")return;f.current=!0;const{setProgress:v}=qe.getState();try{if(await _h(),a("auto","Syncing library..."),await z.syncLibrary({scope:"full"},v),qe.getState().state!=="syncing")return;const E=(await z.getGenres()||[]).sort((m,p)=>(m.Name||"").localeCompare(p.Name||""));ue.getState().setGenres(E),ue.getState().setLastSyncCompleted(Date.now()),i(!0,"Library synced successfully")}catch(S){qe.getState().state==="syncing"&&i(!1,S instanceof Error?S.message:"Failed to sync library")}},500);return()=>clearTimeout(d)},[a,i]),g.useEffect(()=>{const d=ue.getState(),h=s.length+Object.values(l).flat().length;if(h>0&&d.shufflePool.length===0)try{d.refreshShufflePool()}catch{}else h===0&&setTimeout(async()=>{const x=ue.getState();if(!(x.songs.length+Object.values(x.genreSongs).flat().length>0))try{const E=(await z.getSongs({limit:1})).TotalRecordCount||1e3,m=[];for(let I=0;I<3;I++){const N=Math.floor(Math.random()*E);m.push(N)}const p=m.map(I=>z.getSongs({limit:1,sortBy:["SortName"],sortOrder:"Ascending",startIndex:I})),w=(await Promise.all(p)).flatMap(I=>I.Items||[]);if(w.length>0){const I=w.map(N=>({Id:N.Id,Name:N.Name,AlbumArtist:N.AlbumArtist,ArtistItems:N.ArtistItems,Album:N.Album,AlbumId:N.AlbumId,IndexNumber:N.IndexNumber,ProductionYear:N.ProductionYear,PremiereDate:N.PremiereDate,RunTimeTicks:N.RunTimeTicks,Genres:N.Genres}));ue.setState({songs:I,shufflePool:tt(I),lastPoolUpdate:Date.now()})}}catch{}},300)},[s.length,l]),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed top-0 right-0 bg-black z-50 pointer-events-none left-0 lg:left-8",style:{height:"env(safe-area-inset-top)",top:o!=="idle"?"28px":"0px"}}),u.jsx(nv,{}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none lg:hidden",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),u.jsx("div",{className:"fixed top-0 left-0 bottom-0 bg-black z-30 pointer-events-none hidden lg:block",style:{width:"4rem"}}),u.jsxs("div",{className:`main-scrollable h-screen bg-black text-white lg:pl-16 transition-[padding] duration-300 ${c?"sidebar-open-padding":""}`,style:{paddingBottom:"calc(6rem + env(safe-area-inset-bottom))",paddingTop:o!=="idle"?"28px":"0",overflowY:"auto",overflowX:"hidden",maxWidth:"100vw",width:"100%",scrollbarGutter:"stable"},children:[u.jsx("div",{className:`w-full mx-auto lg:flex lg:justify-center ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:u.jsx("div",{className:`w-full ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:e})}),u.jsx(tv,{}),u.jsx(Ty,{})]}),u.jsx(uv,{})]})}function dv(){const{pathname:e}=Yt();return g.useEffect(()=>{const t=document.querySelector(".main-scrollable");t&&t.scrollTo({top:0,behavior:"auto"})},[e]),null}const fv=g.memo(function({toast:t}){const{removeToast:n}=Ge(),r={success:u.jsx(I1,{className:"w-4 h-4"}),error:u.jsx(Lh,{className:"w-4 h-4"}),info:u.jsx(F1,{className:"w-4 h-4"})},s={success:"bg-zinc-900 border border-zinc-700",error:"bg-red-900/90 border border-red-700",info:"bg-zinc-900 border border-zinc-700"};return u.jsxs("div",{className:`${s[t.type]} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px] max-w-[320px] animate-slide-up`,role:"alert",children:[u.jsx("span",{className:"flex-shrink-0",children:r[t.type]}),u.jsx("span",{className:"flex-1 text-sm font-medium",children:t.message}),u.jsx("button",{onClick:()=>n(t.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Dismiss notification",children:u.jsx(er,{className:"w-4 h-4"})})]})});function Zc(){const{toasts:e}=Ge();return Qi.createPortal(u.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-[99999] flex flex-col gap-2 items-center pointer-events-none",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.map(t=>u.jsx("div",{className:"pointer-events-auto",children:u.jsx(fv,{toast:t})},t.id))}),document.body)}class hv extends g.Component{constructor(n){super(n);Nt(this,"handleReset",()=>{var n,r;this.setState({hasError:!1,error:null}),(r=(n=this.props).onReset)==null||r.call(n)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){A.error(`[${this.props.componentName||"Component"}] Error:`,n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:u.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center bg-zinc-900/50 rounded-lg border border-zinc-800",children:[u.jsx(Lh,{className:"w-8 h-8 text-red-400 mb-3"}),u.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Something went wrong",this.props.componentName?` in ${this.props.componentName}`:"","."]}),u.jsxs("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)]",children:[u.jsx(ts,{className:"w-4 h-4"}),"Try again"]})]}):this.props.children}}function mv(){const{serverUrl:e,accessToken:t,userId:n,isAuthenticated:r}=$e(),s=Ye(o=>o.localServerUrl),l=g.useRef(null);g.useEffect(()=>{if(!r||!e||!t||!n)return;const o=vo()||s;if(!o)return;const a=()=>{Ji(e,o).then(c=>{c!==z.serverBaseUrl&&z.setCredentials(c,t,n)})};l.current&&clearTimeout(l.current),l.current=setTimeout(a,1e3);const i=()=>{document.visibilityState==="visible"&&a()};return document.addEventListener("visibilitychange",i),()=>{l.current&&clearTimeout(l.current),document.removeEventListener("visibilitychange",i)}},[r,e,t,n,s])}const pv=g.lazy(()=>rt(()=>import("./HomePage-Fj5NXqS7.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),gv=g.lazy(()=>rt(()=>import("./ArtistsPage-CR9FByOS.js"),__vite__mapDeps([7,8,5,4,1,2,3,9]))),yv=g.lazy(()=>rt(()=>import("./AlbumsPage-BHOqG7DP.js"),__vite__mapDeps([10,8,5,4,1,2,3,11,9]))),vv=g.lazy(()=>rt(()=>import("./SongsPage-51mKB8-L.js"),__vite__mapDeps([12,13,8,5,4,1,2,3,9]))),xv=g.lazy(()=>rt(()=>import("./GenresPage-bNrJvUd9.js"),__vite__mapDeps([14,15,3]))),wv=g.lazy(()=>rt(()=>import("./PlaylistsPage-BRiEOkNU.js"),__vite__mapDeps([16,1,2,3,9]))),ed=g.lazy(()=>rt(()=>import("./PlaylistDetailPage-CuNJwbHY.js"),__vite__mapDeps([17,11,18,6,9]))),Sv=g.lazy(()=>rt(()=>import("./SettingsPage-BT13vuGK.js"),__vite__mapDeps([19,18]))),kv=g.lazy(()=>rt(()=>import("./ArtistDetailPage-BCA3-ocJ.js"),__vite__mapDeps([20,11,18,6,21,9]))),Iv=g.lazy(()=>rt(()=>import("./AlbumDetailPage-Bwr_l3VC.js"),__vite__mapDeps([22,18,6,21]))),Nv=g.lazy(()=>rt(()=>import("./GenreSongsPage-ygXneRI5.js"),__vite__mapDeps([23,11,13,8,5,18,9]))),Ev=g.lazy(()=>rt(()=>import("./StatsPage-Dg7iTAmC.js"),__vite__mapDeps([24,25,15]))),Cv=g.lazy(()=>rt(()=>import("./SongDetailPage-Cc6_0te7.js"),__vite__mapDeps([26,18,6,25,2,3])));function Pv(){return u.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:u.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-color)] border-t-transparent rounded-full animate-spin"})})}function dt(e,t){return u.jsx(hv,{componentName:t,children:e})}function jv(){const{isAuthenticated:e,logout:t}=$e(),{pageVisibility:n}=Ye();return mv(),g.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?u.jsxs(u.Fragment,{children:[u.jsxs(mg,{children:[u.jsx(dv,{}),u.jsx(cv,{children:u.jsx(g.Suspense,{fallback:u.jsx(Pv,{}),children:u.jsxs(og,{children:[u.jsx(et,{path:"/",element:dt(u.jsx(pv,{}),"Home")}),u.jsx(et,{path:"/song/:id",element:dt(u.jsx(Cv,{}),"Song")}),u.jsx(et,{path:"/mood/:moodValue",element:dt(u.jsx(ed,{}),"Mood")}),u.jsx(et,{path:"/settings",element:dt(u.jsx(Sv,{}),"Settings")}),n.artists&&u.jsxs(u.Fragment,{children:[u.jsx(et,{path:"/artists",element:dt(u.jsx(gv,{}),"Artists")}),u.jsx(et,{path:"/artist/:id",element:dt(u.jsx(kv,{}),"Artist")})]}),n.albums&&u.jsxs(u.Fragment,{children:[u.jsx(et,{path:"/albums",element:dt(u.jsx(yv,{}),"Albums")}),u.jsx(et,{path:"/album/:id",element:dt(u.jsx(Iv,{}),"Album")})]}),n.songs&&u.jsx(et,{path:"/songs",element:dt(u.jsx(vv,{}),"Songs")}),n.genres&&u.jsxs(u.Fragment,{children:[u.jsx(et,{path:"/genres",element:dt(u.jsx(xv,{}),"Genres")}),u.jsx(et,{path:"/genre/:id",element:dt(u.jsx(Nv,{}),"Genre")})]}),n.playlists&&u.jsxs(u.Fragment,{children:[u.jsx(et,{path:"/playlists",element:dt(u.jsx(wv,{}),"Playlists")}),u.jsx(et,{path:"/playlist/:id",element:dt(u.jsx(ed,{}),"Playlist")})]}),n.stats&&u.jsx(u.Fragment,{children:u.jsx(et,{path:"/stats",element:dt(u.jsx(Ev,{}),"Stats")})}),u.jsx(et,{path:"*",element:u.jsx(sg,{to:"/",replace:!0})})]})})})]}),u.jsx(Zc,{})]}):u.jsxs(u.Fragment,{children:[u.jsx(jy,{}),u.jsx(Zc,{})]})}class bv extends g.Component{constructor(){super(...arguments);Nt(this,"state",{hasError:!1,error:null,showCopied:!1});Nt(this,"handleCopyError",async()=>{var r,s;const n=`Error: ${(r=this.state.error)==null?void 0:r.message}

Stack: ${((s=this.state.error)==null?void 0:s.stack)||"N/A"}`;try{await navigator.clipboard.writeText(n),this.setState({showCopied:!0}),setTimeout(()=>this.setState({showCopied:!1}),2e3)}catch{}});Nt(this,"handleReload",()=>{window.location.reload()});Nt(this,"handleClearAndReload",()=>{localStorage.clear(),indexedDB.deleteDatabase("tunetuna-storage"),window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){A.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center max-w-md",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:u.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"The app encountered an unexpected error. You can try reloading, or clear data if the issue persists."}),u.jsx("div",{className:"bg-zinc-900 rounded-lg p-3 mb-4 text-left",children:u.jsx("p",{className:"text-red-400 text-sm font-mono break-all",children:((n=this.state.error)==null?void 0:n.message)||"Unknown error"})}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("button",{onClick:this.handleReload,className:"w-full bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-3 px-4 rounded-lg transition-all",children:"Reload App"}),u.jsx("button",{onClick:this.handleClearAndReload,className:"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"}),u.jsx("button",{onClick:this.handleCopyError,className:"w-full text-gray-400 hover:text-white py-2 px-4 text-sm transition-colors",children:this.state.showCopied?" Copied to clipboard":"Copy error details"})]})]})}):this.props.children}}Jo.createRoot(document.getElementById("root")).render(u.jsx(ti.StrictMode,{children:u.jsx(bv,{children:u.jsx(jv,{})})}));const Tv=async()=>{try{const e=await navigator.serviceWorker.getRegistration();e&&(e.waiting&&(A.log("New app version available, activating..."),e.waiting.postMessage({type:"SKIP_WAITING"})),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&A.log("New app version installed and ready")})}))}catch{}};"serviceWorker"in navigator&&Tv();export{d1 as $,Qy as A,Qi as B,qy as C,Zi as D,Rn as E,$v as F,Il as G,ol as H,Ms as I,Lv as J,Rv as K,zh as L,eu as M,Yt as N,Ge as O,Kc as P,_s as Q,Ls as R,Cr as S,Mv as T,Xl as U,z1 as V,$e as W,er as X,qe as Y,We as Z,Rh as _,ne as a,vo as a0,ts as a1,Hc as a2,py as a3,yy as a4,_h as a5,E1 as a6,ti as a7,S1 as a8,Or as b,ee as c,_v as d,z as e,Yy as f,zv as g,Ye as h,lu as i,u as j,Ov as k,A as l,Fv as m,Gv as n,zy as o,Vv as p,Uy as q,g as r,Bv as s,Dv as t,ue as u,Uv as v,Wc as w,Kg as x,K1 as y,ry as z};
