const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-Ctn9ppOg.js","assets/search-CX8aL8TO.js","assets/tag-Z6C-w5NC.js","assets/piano-GaLAw_6p.js","assets/useSearch-D67U20TW.js","assets/chevron-right-CeVrquWf.js","assets/ellipsis-CqmsnN94.js","assets/ArtistsPage-C-3JAyF8.js","assets/Pagination-CuABUUiW.js","assets/arrow-up-down-CUJ3dVTa.js","assets/AlbumsPage-Cjx3W4BL.js","assets/SongsPage-CfFp6dk7.js","assets/SongItem-Ibzt6uhN.js","assets/GenresPage-BrSoYuaG.js","assets/flame-dCjsrSIZ.js","assets/PlaylistsPage-Cm48JxMg.js","assets/PlaylistDetailPage-CifatnC0.js","assets/useScrollLazyLoad-DmodI_VF.js","assets/arrow-left-7VMywoCX.js","assets/SettingsPage-BPsFzirU.js","assets/ArtistDetailPage-BQtO4No8.js","assets/chevron-up-3dl01qHu.js","assets/AlbumDetailPage-GTZlsN2X.js","assets/GenreSongsPage-9xwP8vxo.js","assets/StatsPage-DKMQbudl.js","assets/clock-Cupj8OS0.js","assets/SongDetailPage-pmqqk_1q.js"])))=>i.map(i=>d[i]);
var zh=Object.defineProperty;var $h=(e,t,n)=>t in e?zh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var kt=(e,t,n)=>$h(e,typeof t!="symbol"?t+"":t,n);function Uh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function ed(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var td={exports:{}},Kl={},nd={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _s=Symbol.for("react.element"),Dh=Symbol.for("react.portal"),Oh=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),Vh=Symbol.for("react.provider"),Gh=Symbol.for("react.context"),Hh=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Wh=Symbol.for("react.memo"),qh=Symbol.for("react.lazy"),au=Symbol.iterator;function Yh(e){return e===null||typeof e!="object"?null:(e=au&&e[au]||e["@@iterator"],typeof e=="function"?e:null)}var rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sd=Object.assign,ld={};function Lr(e,t,n){this.props=e,this.context=t,this.refs=ld,this.updater=n||rd}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function od(){}od.prototype=Lr.prototype;function Ka(e,t,n){this.props=e,this.context=t,this.refs=ld,this.updater=n||rd}var Xa=Ka.prototype=new od;Xa.constructor=Ka;sd(Xa,Lr.prototype);Xa.isPureReactComponent=!0;var iu=Array.isArray,ad=Object.prototype.hasOwnProperty,Ja={current:null},id={key:!0,ref:!0,__self:!0,__source:!0};function ud(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)ad.call(t,r)&&!id.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var i=Array(a),c=0;c<a;c++)i[c]=arguments[c+2];s.children=i}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:_s,type:e,key:l,ref:o,props:s,_owner:Ja.current}}function Kh(e,t){return{$$typeof:_s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Za(e){return typeof e=="object"&&e!==null&&e.$$typeof===_s}function Xh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uu=/\/+/g;function vo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xh(""+e.key):t.toString(36)}function il(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _s:case Dh:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+vo(o,0):r,iu(s)?(n="",e!=null&&(n=e.replace(uu,"$&/")+"/"),il(s,t,n,"",function(c){return c})):s!=null&&(Za(s)&&(s=Kh(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(uu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",iu(e))for(var a=0;a<e.length;a++){l=e[a];var i=r+vo(l,a);o+=il(l,t,n,i,s)}else if(i=Yh(e),typeof i=="function")for(e=i.call(e),a=0;!(l=e.next()).done;)l=l.value,i=r+vo(l,a++),o+=il(l,t,n,i,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Os(e,t,n){if(e==null)return e;var r=[],s=0;return il(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Jh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},ul={transition:null},Zh={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:ul,ReactCurrentOwner:Ja};function cd(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Os,forEach:function(e,t,n){Os(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Os(e,function(){t++}),t},toArray:function(e){return Os(e,function(t){return t})||[]},only:function(e){if(!Za(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=Lr;se.Fragment=Oh;se.Profiler=Bh;se.PureComponent=Ka;se.StrictMode=Fh;se.Suspense=Qh;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zh;se.act=cd;se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sd({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Ja.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(i in t)ad.call(t,i)&&!id.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&a!==void 0?a[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){a=Array(i);for(var c=0;c<i;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_s,type:e.type,key:s,ref:l,props:r,_owner:o}};se.createContext=function(e){return e={$$typeof:Gh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vh,_context:e},e.Consumer=e};se.createElement=ud;se.createFactory=function(e){var t=ud.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:Hh,render:e}};se.isValidElement=Za;se.lazy=function(e){return{$$typeof:qh,_payload:{_status:-1,_result:e},_init:Jh}};se.memo=function(e,t){return{$$typeof:Wh,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=ul.transition;ul.transition={};try{e()}finally{ul.transition=t}};se.unstable_act=cd;se.useCallback=function(e,t){return ot.current.useCallback(e,t)};se.useContext=function(e){return ot.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};se.useEffect=function(e,t){return ot.current.useEffect(e,t)};se.useId=function(){return ot.current.useId()};se.useImperativeHandle=function(e,t,n){return ot.current.useImperativeHandle(e,t,n)};se.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return ot.current.useMemo(e,t)};se.useReducer=function(e,t,n){return ot.current.useReducer(e,t,n)};se.useRef=function(e){return ot.current.useRef(e)};se.useState=function(e){return ot.current.useState(e)};se.useSyncExternalStore=function(e,t,n){return ot.current.useSyncExternalStore(e,t,n)};se.useTransition=function(){return ot.current.useTransition()};se.version="18.3.1";nd.exports=se;var g=nd.exports;const ei=ed(g),em=Uh({__proto__:null,default:ei},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm=g,nm=Symbol.for("react.element"),rm=Symbol.for("react.fragment"),sm=Object.prototype.hasOwnProperty,lm=tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,om={key:!0,ref:!0,__self:!0,__source:!0};function dd(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)sm.call(t,r)&&!om.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:nm,type:e,key:l,ref:o,props:s,_owner:lm.current}}Kl.Fragment=rm;Kl.jsx=dd;Kl.jsxs=dd;td.exports=Kl;var u=td.exports,Xo={},fd={exports:{}},wt={},hd={exports:{}},md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,L){var B=j.length;j.push(L);e:for(;0<B;){var te=B-1>>>1,ie=j[te];if(0<s(ie,L))j[te]=L,j[B]=ie,B=te;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var L=j[0],B=j.pop();if(B!==L){j[0]=B;e:for(var te=0,ie=j.length,ye=ie>>>1;te<ye;){var fe=2*(te+1)-1,it=j[fe],he=fe+1,be=j[he];if(0>s(it,B))he<ie&&0>s(be,it)?(j[te]=be,j[he]=B,te=he):(j[te]=it,j[fe]=B,te=fe);else if(he<ie&&0>s(be,B))j[te]=be,j[he]=B,te=he;else break e}}return L}function s(j,L){var B=j.sortIndex-L.sortIndex;return B!==0?B:j.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var i=[],c=[],f=1,d=null,h=3,x=!1,v=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=j)r(c),L.sortIndex=L.expirationTime,t(i,L);else break;L=n(c)}}function w(j){if(k=!1,y(j),!v)if(n(i)!==null)v=!0,re(N);else{var L=n(c);L!==null&&le(w,L.startTime-j)}}function N(j,L){v=!1,k&&(k=!1,p(C),C=-1),x=!0;var B=h;try{for(y(L),d=n(i);d!==null&&(!(d.expirationTime>L)||j&&!H());){var te=d.callback;if(typeof te=="function"){d.callback=null,h=d.priorityLevel;var ie=te(d.expirationTime<=L);L=e.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(i)&&r(i),y(L)}else r(i);d=n(i)}if(d!==null)var ye=!0;else{var fe=n(c);fe!==null&&le(w,fe.startTime-L),ye=!1}return ye}finally{d=null,h=B,x=!1}}var E=!1,I=null,C=-1,P=5,b=-1;function H(){return!(e.unstable_now()-b<P)}function Y(){if(I!==null){var j=e.unstable_now();b=j;var L=!0;try{L=I(!0,j)}finally{L?K():(E=!1,I=null)}}else E=!1}var K;if(typeof m=="function")K=function(){m(Y)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ee=M.port2;M.port1.onmessage=Y,K=function(){ee.postMessage(null)}}else K=function(){S(Y,0)};function re(j){I=j,E||(E=!0,K())}function le(j,L){C=S(function(){j(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,re(N))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var B=h;h=L;try{return j()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,L){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=h;h=j;try{return L()}finally{h=B}},e.unstable_scheduleCallback=function(j,L,B){var te=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?te+B:te):B=te,j){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=B+ie,j={id:f++,callback:L,priorityLevel:j,startTime:B,expirationTime:ie,sortIndex:-1},B>te?(j.sortIndex=B,t(c,j),n(i)===null&&j===n(c)&&(k?(p(C),C=-1):k=!0,le(w,B-te))):(j.sortIndex=ie,t(i,j),v||x||(v=!0,re(N))),j},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(j){var L=h;return function(){var B=h;h=L;try{return j.apply(this,arguments)}finally{h=B}}}})(md);hd.exports=md;var am=hd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im=g,xt=am;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pd=new Set,cs={};function tr(e,t){Pr(e,t),Pr(e+"Capture",t)}function Pr(e,t){for(cs[e]=t,e=0;e<t.length;e++)pd.add(t[e])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=Object.prototype.hasOwnProperty,um=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cu={},du={};function cm(e){return Jo.call(du,e)?!0:Jo.call(cu,e)?!1:um.test(e)?du[e]=!0:(cu[e]=!0,!1)}function dm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fm(e,t,n,r){if(t===null||typeof t>"u"||dm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ye[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ye[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ye[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ye[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ye[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ye[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ye[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ye[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ye[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var ti=/[\-:]([a-z])/g;function ni(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ti,ni);Ye[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ti,ni);Ye[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ti,ni);Ye[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ye[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ye[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function ri(e,t,n,r){var s=Ye.hasOwnProperty(t)?Ye[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fm(t,n,s,r)&&(n=null),r||s===null?cm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hn=im.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fs=Symbol.for("react.element"),ir=Symbol.for("react.portal"),ur=Symbol.for("react.fragment"),si=Symbol.for("react.strict_mode"),Zo=Symbol.for("react.profiler"),gd=Symbol.for("react.provider"),yd=Symbol.for("react.context"),li=Symbol.for("react.forward_ref"),ea=Symbol.for("react.suspense"),ta=Symbol.for("react.suspense_list"),oi=Symbol.for("react.memo"),yn=Symbol.for("react.lazy"),vd=Symbol.for("react.offscreen"),fu=Symbol.iterator;function Or(e){return e===null||typeof e!="object"?null:(e=fu&&e[fu]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,xo;function qr(e){if(xo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xo=t&&t[1]||""}return`
`+xo+e}var wo=!1;function So(e,t){if(!e||wo)return"";wo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,a=l.length-1;1<=o&&0<=a&&s[o]!==l[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==l[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==l[a]){var i=`
`+s[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=a);break}}}finally{wo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qr(e):""}function hm(e){switch(e.tag){case 5:return qr(e.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 2:case 15:return e=So(e.type,!1),e;case 11:return e=So(e.type.render,!1),e;case 1:return e=So(e.type,!0),e;default:return""}}function na(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ur:return"Fragment";case ir:return"Portal";case Zo:return"Profiler";case si:return"StrictMode";case ea:return"Suspense";case ta:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yd:return(e.displayName||"Context")+".Consumer";case gd:return(e._context.displayName||"Context")+".Provider";case li:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oi:return t=e.displayName||null,t!==null?t:na(e.type)||"Memo";case yn:t=e._payload,e=e._init;try{return na(e(t))}catch{}}return null}function mm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return na(t);case 8:return t===si?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pm(e){var t=xd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bs(e){e._valueTracker||(e._valueTracker=pm(e))}function wd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function kl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ra(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sd(e,t){t=t.checked,t!=null&&ri(e,"checked",t,!1)}function sa(e,t){Sd(e,t);var n=Mn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?la(e,t.type,n):t.hasOwnProperty("defaultValue")&&la(e,t.type,Mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function la(e,t,n){(t!=="number"||kl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yr=Array.isArray;function wr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function oa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(T(92));if(Yr(n)){if(1<n.length)throw Error(T(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mn(n)}}function kd(e,t){var n=Mn(t.value),r=Mn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Id(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Id(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vs,Nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ds(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gm=["Webkit","ms","Moz","O"];Object.keys(es).forEach(function(e){gm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),es[t]=es[e]})});function Ed(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||es.hasOwnProperty(e)&&es[e]?(""+t).trim():t+"px"}function Cd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ed(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ym=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ia(e,t){if(t){if(ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function ua(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ca=null;function ai(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var da=null,Sr=null,kr=null;function yu(e){if(e=zs(e)){if(typeof da!="function")throw Error(T(280));var t=e.stateNode;t&&(t=to(t),da(e.stateNode,e.type,t))}}function Pd(e){Sr?kr?kr.push(e):kr=[e]:Sr=e}function jd(){if(Sr){var e=Sr,t=kr;if(kr=Sr=null,yu(e),t)for(e=0;e<t.length;e++)yu(t[e])}}function bd(e,t){return e(t)}function Td(){}var ko=!1;function Ad(e,t,n){if(ko)return e(t,n);ko=!0;try{return bd(e,t,n)}finally{ko=!1,(Sr!==null||kr!==null)&&(Td(),jd())}}function fs(e,t){var n=e.stateNode;if(n===null)return null;var r=to(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(T(231,t,typeof n));return n}var fa=!1;if(un)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){fa=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{fa=!1}function vm(e,t,n,r,s,l,o,a,i){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var ts=!1,Il=null,Nl=!1,ha=null,xm={onError:function(e){ts=!0,Il=e}};function wm(e,t,n,r,s,l,o,a,i){ts=!1,Il=null,vm.apply(xm,arguments)}function Sm(e,t,n,r,s,l,o,a,i){if(wm.apply(this,arguments),ts){if(ts){var c=Il;ts=!1,Il=null}else throw Error(T(198));Nl||(Nl=!0,ha=c)}}function nr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Rd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vu(e){if(nr(e)!==e)throw Error(T(188))}function km(e){var t=e.alternate;if(!t){if(t=nr(e),t===null)throw Error(T(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return vu(s),e;if(l===r)return vu(s),t;l=l.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=l;break}if(a===r){o=!0,r=s,n=l;break}a=a.sibling}if(!o){for(a=l.child;a;){if(a===n){o=!0,n=l,r=s;break}if(a===r){o=!0,r=l,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?e:t}function _d(e){return e=km(e),e!==null?Md(e):null}function Md(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Md(e);if(t!==null)return t;e=e.sibling}return null}var Ld=xt.unstable_scheduleCallback,xu=xt.unstable_cancelCallback,Im=xt.unstable_shouldYield,Nm=xt.unstable_requestPaint,Pe=xt.unstable_now,Em=xt.unstable_getCurrentPriorityLevel,ii=xt.unstable_ImmediatePriority,zd=xt.unstable_UserBlockingPriority,El=xt.unstable_NormalPriority,Cm=xt.unstable_LowPriority,$d=xt.unstable_IdlePriority,Xl=null,Wt=null;function Pm(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Xl,e,void 0,(e.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:Tm,jm=Math.log,bm=Math.LN2;function Tm(e){return e>>>=0,e===0?32:31-(jm(e)/bm|0)|0}var Gs=64,Hs=4194304;function Kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Kr(a):(l&=o,l!==0&&(r=Kr(l)))}else o=n&~s,o!==0?r=Kr(o):l!==0&&(r=Kr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-$t(t),s=1<<n,r|=e[n],t&=~s;return r}function Am(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-$t(l),a=1<<o,i=s[o];i===-1?(!(a&n)||a&r)&&(s[o]=Am(a,t)):i<=t&&(e.expiredLanes|=a),l&=~a}}function ma(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=Gs;return Gs<<=1,!(Gs&4194240)&&(Gs=64),e}function Io(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ms(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$t(t),e[t]=n}function _m(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-$t(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function ui(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-$t(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var me=0;function Dd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Od,ci,Fd,Bd,Vd,pa=!1,Qs=[],Nn=null,En=null,Cn=null,hs=new Map,ms=new Map,xn=[],Mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wu(e,t){switch(e){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":hs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ms.delete(t.pointerId)}}function Br(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=zs(t),t!==null&&ci(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Lm(e,t,n,r,s){switch(t){case"focusin":return Nn=Br(Nn,e,t,n,r,s),!0;case"dragenter":return En=Br(En,e,t,n,r,s),!0;case"mouseover":return Cn=Br(Cn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return hs.set(l,Br(hs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,ms.set(l,Br(ms.get(l)||null,e,t,n,r,s)),!0}return!1}function Gd(e){var t=Gn(e.target);if(t!==null){var n=nr(t);if(n!==null){if(t=n.tag,t===13){if(t=Rd(n),t!==null){e.blockedOn=t,Vd(e.priority,function(){Fd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ga(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ca=r,n.target.dispatchEvent(r),ca=null}else return t=zs(n),t!==null&&ci(t),e.blockedOn=n,!1;t.shift()}return!0}function Su(e,t,n){cl(e)&&n.delete(t)}function zm(){pa=!1,Nn!==null&&cl(Nn)&&(Nn=null),En!==null&&cl(En)&&(En=null),Cn!==null&&cl(Cn)&&(Cn=null),hs.forEach(Su),ms.forEach(Su)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,pa||(pa=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,zm)))}function ps(e){function t(s){return Vr(s,e)}if(0<Qs.length){Vr(Qs[0],e);for(var n=1;n<Qs.length;n++){var r=Qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Nn!==null&&Vr(Nn,e),En!==null&&Vr(En,e),Cn!==null&&Vr(Cn,e),hs.forEach(t),ms.forEach(t),n=0;n<xn.length;n++)r=xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xn.length&&(n=xn[0],n.blockedOn===null);)Gd(n),n.blockedOn===null&&xn.shift()}var Ir=hn.ReactCurrentBatchConfig,Pl=!0;function $m(e,t,n,r){var s=me,l=Ir.transition;Ir.transition=null;try{me=1,di(e,t,n,r)}finally{me=s,Ir.transition=l}}function Um(e,t,n,r){var s=me,l=Ir.transition;Ir.transition=null;try{me=4,di(e,t,n,r)}finally{me=s,Ir.transition=l}}function di(e,t,n,r){if(Pl){var s=ga(e,t,n,r);if(s===null)_o(e,t,r,jl,n),wu(e,r);else if(Lm(s,e,t,n,r))r.stopPropagation();else if(wu(e,r),t&4&&-1<Mm.indexOf(e)){for(;s!==null;){var l=zs(s);if(l!==null&&Od(l),l=ga(e,t,n,r),l===null&&_o(e,t,r,jl,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else _o(e,t,r,null,n)}}var jl=null;function ga(e,t,n,r){if(jl=null,e=ai(r),e=Gn(e),e!==null)if(t=nr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Rd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jl=e,null}function Hd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Em()){case ii:return 1;case zd:return 4;case El:case Cm:return 16;case $d:return 536870912;default:return 16}default:return 16}}var Sn=null,fi=null,dl=null;function Qd(){if(dl)return dl;var e,t=fi,n=t.length,r,s="value"in Sn?Sn.value:Sn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return dl=s.slice(e,1<r?1-r:void 0)}function fl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function ku(){return!1}function St(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ws:ku,this.isPropagationStopped=ku,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=St(zr),Ls=Ie({},zr,{view:0,detail:0}),Dm=St(Ls),No,Eo,Gr,Jl=Ie({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gr&&(Gr&&e.type==="mousemove"?(No=e.screenX-Gr.screenX,Eo=e.screenY-Gr.screenY):Eo=No=0,Gr=e),No)},movementY:function(e){return"movementY"in e?e.movementY:Eo}}),Iu=St(Jl),Om=Ie({},Jl,{dataTransfer:0}),Fm=St(Om),Bm=Ie({},Ls,{relatedTarget:0}),Co=St(Bm),Vm=Ie({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gm=St(Vm),Hm=Ie({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qm=St(Hm),Wm=Ie({},zr,{data:0}),Nu=St(Wm),qm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ym={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Km={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Km[e])?!!t[e]:!1}function mi(){return Xm}var Jm=Ie({},Ls,{key:function(e){if(e.key){var t=qm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ym[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(e){return e.type==="keypress"?fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zm=St(Jm),ep=Ie({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eu=St(ep),tp=Ie({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi}),np=St(tp),rp=Ie({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sp=St(rp),lp=Ie({},Jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),op=St(lp),ap=[9,13,27,32],pi=un&&"CompositionEvent"in window,ns=null;un&&"documentMode"in document&&(ns=document.documentMode);var ip=un&&"TextEvent"in window&&!ns,Wd=un&&(!pi||ns&&8<ns&&11>=ns),Cu=" ",Pu=!1;function qd(e,t){switch(e){case"keyup":return ap.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cr=!1;function up(e,t){switch(e){case"compositionend":return Yd(t);case"keypress":return t.which!==32?null:(Pu=!0,Cu);case"textInput":return e=t.data,e===Cu&&Pu?null:e;default:return null}}function cp(e,t){if(cr)return e==="compositionend"||!pi&&qd(e,t)?(e=Qd(),dl=fi=Sn=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wd&&t.locale!=="ko"?null:t.data;default:return null}}var dp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dp[e.type]:t==="textarea"}function Kd(e,t,n,r){Pd(r),t=bl(t,"onChange"),0<t.length&&(n=new hi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var rs=null,gs=null;function fp(e){af(e,0)}function Zl(e){var t=hr(e);if(wd(t))return e}function hp(e,t){if(e==="change")return t}var Xd=!1;if(un){var Po;if(un){var jo="oninput"in document;if(!jo){var bu=document.createElement("div");bu.setAttribute("oninput","return;"),jo=typeof bu.oninput=="function"}Po=jo}else Po=!1;Xd=Po&&(!document.documentMode||9<document.documentMode)}function Tu(){rs&&(rs.detachEvent("onpropertychange",Jd),gs=rs=null)}function Jd(e){if(e.propertyName==="value"&&Zl(gs)){var t=[];Kd(t,gs,e,ai(e)),Ad(fp,t)}}function mp(e,t,n){e==="focusin"?(Tu(),rs=t,gs=n,rs.attachEvent("onpropertychange",Jd)):e==="focusout"&&Tu()}function pp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zl(gs)}function gp(e,t){if(e==="click")return Zl(t)}function yp(e,t){if(e==="input"||e==="change")return Zl(t)}function vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:vp;function ys(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jo.call(t,s)||!Dt(e[s],t[s]))return!1}return!0}function Au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ru(e,t){var n=Au(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Au(n)}}function Zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ef(){for(var e=window,t=kl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=kl(e.document)}return t}function gi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xp(e){var t=ef(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zd(n.ownerDocument.documentElement,n)){if(r!==null&&gi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Ru(n,l);var o=Ru(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wp=un&&"documentMode"in document&&11>=document.documentMode,dr=null,ya=null,ss=null,va=!1;function _u(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;va||dr==null||dr!==kl(r)||(r=dr,"selectionStart"in r&&gi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ss&&ys(ss,r)||(ss=r,r=bl(ya,"onSelect"),0<r.length&&(t=new hi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dr)))}function qs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionend:qs("Transition","TransitionEnd")},bo={},tf={};un&&(tf=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function eo(e){if(bo[e])return bo[e];if(!fr[e])return e;var t=fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tf)return bo[e]=t[n];return e}var nf=eo("animationend"),rf=eo("animationiteration"),sf=eo("animationstart"),lf=eo("transitionend"),of=new Map,Mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(e,t){of.set(e,t),tr(t,[e])}for(var To=0;To<Mu.length;To++){var Ao=Mu[To],Sp=Ao.toLowerCase(),kp=Ao[0].toUpperCase()+Ao.slice(1);zn(Sp,"on"+kp)}zn(nf,"onAnimationEnd");zn(rf,"onAnimationIteration");zn(sf,"onAnimationStart");zn("dblclick","onDoubleClick");zn("focusin","onFocus");zn("focusout","onBlur");zn(lf,"onTransitionEnd");Pr("onMouseEnter",["mouseout","mouseover"]);Pr("onMouseLeave",["mouseout","mouseover"]);Pr("onPointerEnter",["pointerout","pointerover"]);Pr("onPointerLeave",["pointerout","pointerover"]);tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ip=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Lu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Sm(r,t,void 0,e),e.currentTarget=null}function af(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],i=a.instance,c=a.currentTarget;if(a=a.listener,i!==l&&s.isPropagationStopped())break e;Lu(s,a,c),l=i}else for(o=0;o<r.length;o++){if(a=r[o],i=a.instance,c=a.currentTarget,a=a.listener,i!==l&&s.isPropagationStopped())break e;Lu(s,a,c),l=i}}}if(Nl)throw e=ha,Nl=!1,ha=null,e}function ve(e,t){var n=t[Ia];n===void 0&&(n=t[Ia]=new Set);var r=e+"__bubble";n.has(r)||(uf(t,e,2,!1),n.add(r))}function Ro(e,t,n){var r=0;t&&(r|=4),uf(n,e,r,t)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function vs(e){if(!e[Ys]){e[Ys]=!0,pd.forEach(function(n){n!=="selectionchange"&&(Ip.has(n)||Ro(n,!1,e),Ro(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ys]||(t[Ys]=!0,Ro("selectionchange",!1,t))}}function uf(e,t,n,r){switch(Hd(t)){case 1:var s=$m;break;case 4:s=Um;break;default:s=di}n=s.bind(null,t,n,e),s=void 0,!fa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function _o(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Gn(a),o===null)return;if(i=o.tag,i===5||i===6){r=l=o;continue e}a=a.parentNode}}r=r.return}Ad(function(){var c=l,f=ai(n),d=[];e:{var h=of.get(e);if(h!==void 0){var x=hi,v=e;switch(e){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":x=Zm;break;case"focusin":v="focus",x=Co;break;case"focusout":v="blur",x=Co;break;case"beforeblur":case"afterblur":x=Co;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Fm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=np;break;case nf:case rf:case sf:x=Gm;break;case lf:x=sp;break;case"scroll":x=Dm;break;case"wheel":x=op;break;case"copy":case"cut":case"paste":x=Qm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Eu}var k=(t&4)!==0,S=!k&&e==="scroll",p=k?h!==null?h+"Capture":null:h;k=[];for(var m=c,y;m!==null;){y=m;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,p!==null&&(w=fs(m,p),w!=null&&k.push(xs(m,w,y)))),S)break;m=m.return}0<k.length&&(h=new x(h,v,null,n,f),d.push({event:h,listeners:k}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==ca&&(v=n.relatedTarget||n.fromElement)&&(Gn(v)||v[cn]))break e;if((x||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=c,v=v?Gn(v):null,v!==null&&(S=nr(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=c),x!==v)){if(k=Iu,w="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(k=Eu,w="onPointerLeave",p="onPointerEnter",m="pointer"),S=x==null?h:hr(x),y=v==null?h:hr(v),h=new k(w,m+"leave",x,n,f),h.target=S,h.relatedTarget=y,w=null,Gn(f)===c&&(k=new k(p,m+"enter",v,n,f),k.target=y,k.relatedTarget=S,w=k),S=w,x&&v)t:{for(k=x,p=v,m=0,y=k;y;y=ar(y))m++;for(y=0,w=p;w;w=ar(w))y++;for(;0<m-y;)k=ar(k),m--;for(;0<y-m;)p=ar(p),y--;for(;m--;){if(k===p||p!==null&&k===p.alternate)break t;k=ar(k),p=ar(p)}k=null}else k=null;x!==null&&zu(d,h,x,k,!1),v!==null&&S!==null&&zu(d,S,v,k,!0)}}e:{if(h=c?hr(c):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var N=hp;else if(ju(h))if(Xd)N=yp;else{N=pp;var E=mp}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=gp);if(N&&(N=N(e,c))){Kd(d,N,n,f);break e}E&&E(e,h,c),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&la(h,"number",h.value)}switch(E=c?hr(c):window,e){case"focusin":(ju(E)||E.contentEditable==="true")&&(dr=E,ya=c,ss=null);break;case"focusout":ss=ya=dr=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,_u(d,n,f);break;case"selectionchange":if(wp)break;case"keydown":case"keyup":_u(d,n,f)}var I;if(pi)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else cr?qd(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Wd&&n.locale!=="ko"&&(cr||C!=="onCompositionStart"?C==="onCompositionEnd"&&cr&&(I=Qd()):(Sn=f,fi="value"in Sn?Sn.value:Sn.textContent,cr=!0)),E=bl(c,C),0<E.length&&(C=new Nu(C,e,null,n,f),d.push({event:C,listeners:E}),I?C.data=I:(I=Yd(n),I!==null&&(C.data=I)))),(I=ip?up(e,n):cp(e,n))&&(c=bl(c,"onBeforeInput"),0<c.length&&(f=new Nu("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=I))}af(d,t)})}function xs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=fs(e,n),l!=null&&r.unshift(xs(e,l,s)),l=fs(e,t),l!=null&&r.push(xs(e,l,s))),e=e.return}return r}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zu(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var a=n,i=a.alternate,c=a.stateNode;if(i!==null&&i===r)break;a.tag===5&&c!==null&&(a=c,s?(i=fs(n,l),i!=null&&o.unshift(xs(n,i,a))):s||(i=fs(n,l),i!=null&&o.push(xs(n,i,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Np=/\r\n?/g,Ep=/\u0000|\uFFFD/g;function $u(e){return(typeof e=="string"?e:""+e).replace(Np,`
`).replace(Ep,"")}function Ks(e,t,n){if(t=$u(t),$u(e)!==t&&n)throw Error(T(425))}function Tl(){}var xa=null,wa=null;function Sa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ka=typeof setTimeout=="function"?setTimeout:void 0,Cp=typeof clearTimeout=="function"?clearTimeout:void 0,Uu=typeof Promise=="function"?Promise:void 0,Pp=typeof queueMicrotask=="function"?queueMicrotask:typeof Uu<"u"?function(e){return Uu.resolve(null).then(e).catch(jp)}:ka;function jp(e){setTimeout(function(){throw e})}function Mo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ps(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ps(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Du(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $r=Math.random().toString(36).slice(2),Ht="__reactFiber$"+$r,ws="__reactProps$"+$r,cn="__reactContainer$"+$r,Ia="__reactEvents$"+$r,bp="__reactListeners$"+$r,Tp="__reactHandles$"+$r;function Gn(e){var t=e[Ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cn]||n[Ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Du(e);e!==null;){if(n=e[Ht])return n;e=Du(e)}return t}e=n,n=e.parentNode}return null}function zs(e){return e=e[Ht]||e[cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function to(e){return e[ws]||null}var Na=[],mr=-1;function $n(e){return{current:e}}function xe(e){0>mr||(e.current=Na[mr],Na[mr]=null,mr--)}function ge(e,t){mr++,Na[mr]=e.current,e.current=t}var Ln={},nt=$n(Ln),ht=$n(!1),Yn=Ln;function jr(e,t){var n=e.type.contextTypes;if(!n)return Ln;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mt(e){return e=e.childContextTypes,e!=null}function Al(){xe(ht),xe(nt)}function Ou(e,t,n){if(nt.current!==Ln)throw Error(T(168));ge(nt,t),ge(ht,n)}function cf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(T(108,mm(e)||"Unknown",s));return Ie({},n,r)}function Rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ln,Yn=nt.current,ge(nt,e),ge(ht,ht.current),!0}function Fu(e,t,n){var r=e.stateNode;if(!r)throw Error(T(169));n?(e=cf(e,t,Yn),r.__reactInternalMemoizedMergedChildContext=e,xe(ht),xe(nt),ge(nt,e)):xe(ht),ge(ht,n)}var rn=null,no=!1,Lo=!1;function df(e){rn===null?rn=[e]:rn.push(e)}function Ap(e){no=!0,df(e)}function Un(){if(!Lo&&rn!==null){Lo=!0;var e=0,t=me;try{var n=rn;for(me=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rn=null,no=!1}catch(s){throw rn!==null&&(rn=rn.slice(e+1)),Ld(ii,Un),s}finally{me=t,Lo=!1}}return null}var pr=[],gr=0,_l=null,Ml=0,Nt=[],Et=0,Kn=null,sn=1,ln="";function Bn(e,t){pr[gr++]=Ml,pr[gr++]=_l,_l=e,Ml=t}function ff(e,t,n){Nt[Et++]=sn,Nt[Et++]=ln,Nt[Et++]=Kn,Kn=e;var r=sn;e=ln;var s=32-$t(r)-1;r&=~(1<<s),n+=1;var l=32-$t(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,sn=1<<32-$t(t)+s|n<<s|r,ln=l+e}else sn=1<<l|n<<s|r,ln=e}function yi(e){e.return!==null&&(Bn(e,1),ff(e,1,0))}function vi(e){for(;e===_l;)_l=pr[--gr],pr[gr]=null,Ml=pr[--gr],pr[gr]=null;for(;e===Kn;)Kn=Nt[--Et],Nt[Et]=null,ln=Nt[--Et],Nt[Et]=null,sn=Nt[--Et],Nt[Et]=null}var vt=null,yt=null,we=!1,Lt=null;function hf(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vt=e,yt=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kn!==null?{id:sn,overflow:ln}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vt=e,yt=null,!0):!1;default:return!1}}function Ea(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ca(e){if(we){var t=yt;if(t){var n=t;if(!Bu(e,t)){if(Ea(e))throw Error(T(418));t=Pn(n.nextSibling);var r=vt;t&&Bu(e,t)?hf(r,n):(e.flags=e.flags&-4097|2,we=!1,vt=e)}}else{if(Ea(e))throw Error(T(418));e.flags=e.flags&-4097|2,we=!1,vt=e}}}function Vu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vt=e}function Xs(e){if(e!==vt)return!1;if(!we)return Vu(e),we=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sa(e.type,e.memoizedProps)),t&&(t=yt)){if(Ea(e))throw mf(),Error(T(418));for(;t;)hf(e,t),t=Pn(t.nextSibling)}if(Vu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=vt?Pn(e.stateNode.nextSibling):null;return!0}function mf(){for(var e=yt;e;)e=Pn(e.nextSibling)}function br(){yt=vt=null,we=!1}function xi(e){Lt===null?Lt=[e]:Lt.push(e)}var Rp=hn.ReactCurrentBatchConfig;function Hr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var a=s.refs;o===null?delete a[l]:a[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,e))}return e}function Js(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gu(e){var t=e._init;return t(e._payload)}function pf(e){function t(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=An(p,m),p.index=0,p.sibling=null,p}function l(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,y,w){return m===null||m.tag!==6?(m=Bo(y,p.mode,w),m.return=p,m):(m=s(m,y),m.return=p,m)}function i(p,m,y,w){var N=y.type;return N===ur?f(p,m,y.props.children,w,y.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===yn&&Gu(N)===m.type)?(w=s(m,y.props),w.ref=Hr(p,m,y),w.return=p,w):(w=xl(y.type,y.key,y.props,null,p.mode,w),w.ref=Hr(p,m,y),w.return=p,w)}function c(p,m,y,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Vo(y,p.mode,w),m.return=p,m):(m=s(m,y.children||[]),m.return=p,m)}function f(p,m,y,w,N){return m===null||m.tag!==7?(m=qn(y,p.mode,w,N),m.return=p,m):(m=s(m,y),m.return=p,m)}function d(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Bo(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Fs:return y=xl(m.type,m.key,m.props,null,p.mode,y),y.ref=Hr(p,null,m),y.return=p,y;case ir:return m=Vo(m,p.mode,y),m.return=p,m;case yn:var w=m._init;return d(p,w(m._payload),y)}if(Yr(m)||Or(m))return m=qn(m,p.mode,y,null),m.return=p,m;Js(p,m)}return null}function h(p,m,y,w){var N=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:a(p,m,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fs:return y.key===N?i(p,m,y,w):null;case ir:return y.key===N?c(p,m,y,w):null;case yn:return N=y._init,h(p,m,N(y._payload),w)}if(Yr(y)||Or(y))return N!==null?null:f(p,m,y,w,null);Js(p,y)}return null}function x(p,m,y,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(y)||null,a(m,p,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fs:return p=p.get(w.key===null?y:w.key)||null,i(m,p,w,N);case ir:return p=p.get(w.key===null?y:w.key)||null,c(m,p,w,N);case yn:var E=w._init;return x(p,m,y,E(w._payload),N)}if(Yr(w)||Or(w))return p=p.get(y)||null,f(m,p,w,N,null);Js(m,w)}return null}function v(p,m,y,w){for(var N=null,E=null,I=m,C=m=0,P=null;I!==null&&C<y.length;C++){I.index>C?(P=I,I=null):P=I.sibling;var b=h(p,I,y[C],w);if(b===null){I===null&&(I=P);break}e&&I&&b.alternate===null&&t(p,I),m=l(b,m,C),E===null?N=b:E.sibling=b,E=b,I=P}if(C===y.length)return n(p,I),we&&Bn(p,C),N;if(I===null){for(;C<y.length;C++)I=d(p,y[C],w),I!==null&&(m=l(I,m,C),E===null?N=I:E.sibling=I,E=I);return we&&Bn(p,C),N}for(I=r(p,I);C<y.length;C++)P=x(I,p,C,y[C],w),P!==null&&(e&&P.alternate!==null&&I.delete(P.key===null?C:P.key),m=l(P,m,C),E===null?N=P:E.sibling=P,E=P);return e&&I.forEach(function(H){return t(p,H)}),we&&Bn(p,C),N}function k(p,m,y,w){var N=Or(y);if(typeof N!="function")throw Error(T(150));if(y=N.call(y),y==null)throw Error(T(151));for(var E=N=null,I=m,C=m=0,P=null,b=y.next();I!==null&&!b.done;C++,b=y.next()){I.index>C?(P=I,I=null):P=I.sibling;var H=h(p,I,b.value,w);if(H===null){I===null&&(I=P);break}e&&I&&H.alternate===null&&t(p,I),m=l(H,m,C),E===null?N=H:E.sibling=H,E=H,I=P}if(b.done)return n(p,I),we&&Bn(p,C),N;if(I===null){for(;!b.done;C++,b=y.next())b=d(p,b.value,w),b!==null&&(m=l(b,m,C),E===null?N=b:E.sibling=b,E=b);return we&&Bn(p,C),N}for(I=r(p,I);!b.done;C++,b=y.next())b=x(I,p,C,b.value,w),b!==null&&(e&&b.alternate!==null&&I.delete(b.key===null?C:b.key),m=l(b,m,C),E===null?N=b:E.sibling=b,E=b);return e&&I.forEach(function(Y){return t(p,Y)}),we&&Bn(p,C),N}function S(p,m,y,w){if(typeof y=="object"&&y!==null&&y.type===ur&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Fs:e:{for(var N=y.key,E=m;E!==null;){if(E.key===N){if(N=y.type,N===ur){if(E.tag===7){n(p,E.sibling),m=s(E,y.props.children),m.return=p,p=m;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===yn&&Gu(N)===E.type){n(p,E.sibling),m=s(E,y.props),m.ref=Hr(p,E,y),m.return=p,p=m;break e}n(p,E);break}else t(p,E);E=E.sibling}y.type===ur?(m=qn(y.props.children,p.mode,w,y.key),m.return=p,p=m):(w=xl(y.type,y.key,y.props,null,p.mode,w),w.ref=Hr(p,m,y),w.return=p,p=w)}return o(p);case ir:e:{for(E=y.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=s(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=Vo(y,p.mode,w),m.return=p,p=m}return o(p);case yn:return E=y._init,S(p,m,E(y._payload),w)}if(Yr(y))return v(p,m,y,w);if(Or(y))return k(p,m,y,w);Js(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,y),m.return=p,p=m):(n(p,m),m=Bo(y,p.mode,w),m.return=p,p=m),o(p)):n(p,m)}return S}var Tr=pf(!0),gf=pf(!1),Ll=$n(null),zl=null,yr=null,wi=null;function Si(){wi=yr=zl=null}function ki(e){var t=Ll.current;xe(Ll),e._currentValue=t}function Pa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nr(e,t){zl=e,wi=yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},yr===null){if(zl===null)throw Error(T(308));yr=e,zl.dependencies={lanes:0,firstContext:e}}else yr=yr.next=e;return t}var Hn=null;function Ii(e){Hn===null?Hn=[e]:Hn.push(e)}function yf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ii(t)):(n.next=s.next,s.next=n),t.interleaved=n,dn(e,r)}function dn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vn=!1;function Ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function an(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,dn(e,n)}return s=r.interleaved,s===null?(t.next=t,Ii(r)):(t.next=s.next,s.next=t),r.interleaved=t,dn(e,n)}function hl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ui(e,n)}}function Hu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $l(e,t,n,r){var s=e.updateQueue;vn=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var i=a,c=i.next;i.next=null,o===null?l=c:o.next=c,o=i;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=i))}if(l!==null){var d=s.baseState;o=0,f=c=i=null,a=l;do{var h=a.lane,x=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,k=a;switch(h=t,x=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){d=v.call(x,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,h=typeof v=="function"?v.call(x,d,h):v,h==null)break e;d=Ie({},d,h);break e;case 2:vn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=x,i=d):f=f.next=x,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(i=d),s.baseState=i,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Jn|=o,e.lanes=o,e.memoizedState=d}}function Qu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var $s={},qt=$n($s),Ss=$n($s),ks=$n($s);function Qn(e){if(e===$s)throw Error(T(174));return e}function Ei(e,t){switch(ge(ks,t),ge(Ss,e),ge(qt,$s),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:aa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=aa(t,e)}xe(qt),ge(qt,t)}function Ar(){xe(qt),xe(Ss),xe(ks)}function xf(e){Qn(ks.current);var t=Qn(qt.current),n=aa(t,e.type);t!==n&&(ge(Ss,e),ge(qt,n))}function Ci(e){Ss.current===e&&(xe(qt),xe(Ss))}var Se=$n(0);function Ul(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zo=[];function Pi(){for(var e=0;e<zo.length;e++)zo[e]._workInProgressVersionPrimary=null;zo.length=0}var ml=hn.ReactCurrentDispatcher,$o=hn.ReactCurrentBatchConfig,Xn=0,ke=null,ze=null,De=null,Dl=!1,ls=!1,Is=0,_p=0;function Ke(){throw Error(T(321))}function ji(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dt(e[n],t[n]))return!1;return!0}function bi(e,t,n,r,s,l){if(Xn=l,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ml.current=e===null||e.memoizedState===null?$p:Up,e=n(r,s),ls){l=0;do{if(ls=!1,Is=0,25<=l)throw Error(T(301));l+=1,De=ze=null,t.updateQueue=null,ml.current=Dp,e=n(r,s)}while(ls)}if(ml.current=Ol,t=ze!==null&&ze.next!==null,Xn=0,De=ze=ke=null,Dl=!1,t)throw Error(T(300));return e}function Ti(){var e=Is!==0;return Is=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?ke.memoizedState=De=e:De=De.next=e,De}function bt(){if(ze===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=De===null?ke.memoizedState:De.next;if(t!==null)De=t,ze=e;else{if(e===null)throw Error(T(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},De===null?ke.memoizedState=De=e:De=De.next=e}return De}function Ns(e,t){return typeof t=="function"?t(e):t}function Uo(e){var t=bt(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=ze,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=o=null,i=null,c=l;do{var f=c.lane;if((Xn&f)===f)i!==null&&(i=i.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};i===null?(a=i=d,o=r):i=i.next=d,ke.lanes|=f,Jn|=f}c=c.next}while(c!==null&&c!==l);i===null?o=r:i.next=a,Dt(r,t.memoizedState)||(ft=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,ke.lanes|=l,Jn|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=bt(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);Dt(l,t.memoizedState)||(ft=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function wf(){}function Sf(e,t){var n=ke,r=bt(),s=t(),l=!Dt(r.memoizedState,s);if(l&&(r.memoizedState=s,ft=!0),r=r.queue,Ai(Nf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Es(9,If.bind(null,n,r,s,t),void 0,null),Fe===null)throw Error(T(349));Xn&30||kf(n,t,s)}return s}function kf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function If(e,t,n,r){t.value=n,t.getSnapshot=r,Ef(t)&&Cf(e)}function Nf(e,t,n){return n(function(){Ef(t)&&Cf(e)})}function Ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dt(e,n)}catch{return!0}}function Cf(e){var t=dn(e,1);t!==null&&Ut(t,e,1,-1)}function Wu(e){var t=Gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:e},t.queue=e,e=e.dispatch=zp.bind(null,ke,e),[t.memoizedState,e]}function Es(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Pf(){return bt().memoizedState}function pl(e,t,n,r){var s=Gt();ke.flags|=e,s.memoizedState=Es(1|t,n,void 0,r===void 0?null:r)}function ro(e,t,n,r){var s=bt();r=r===void 0?null:r;var l=void 0;if(ze!==null){var o=ze.memoizedState;if(l=o.destroy,r!==null&&ji(r,o.deps)){s.memoizedState=Es(t,n,l,r);return}}ke.flags|=e,s.memoizedState=Es(1|t,n,l,r)}function qu(e,t){return pl(8390656,8,e,t)}function Ai(e,t){return ro(2048,8,e,t)}function jf(e,t){return ro(4,2,e,t)}function bf(e,t){return ro(4,4,e,t)}function Tf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Af(e,t,n){return n=n!=null?n.concat([e]):null,ro(4,4,Tf.bind(null,t,e),n)}function Ri(){}function Rf(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _f(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ji(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Mf(e,t,n){return Xn&21?(Dt(n,t)||(n=Ud(),ke.lanes|=n,Jn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function Mp(e,t){var n=me;me=n!==0&&4>n?n:4,e(!0);var r=$o.transition;$o.transition={};try{e(!1),t()}finally{me=n,$o.transition=r}}function Lf(){return bt().memoizedState}function Lp(e,t,n){var r=Tn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zf(e))$f(t,n);else if(n=yf(e,t,n,r),n!==null){var s=lt();Ut(n,e,r,s),Uf(n,t,r)}}function zp(e,t,n){var r=Tn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zf(e))$f(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,a=l(o,n);if(s.hasEagerState=!0,s.eagerState=a,Dt(a,o)){var i=t.interleaved;i===null?(s.next=s,Ii(t)):(s.next=i.next,i.next=s),t.interleaved=s;return}}catch{}finally{}n=yf(e,t,s,r),n!==null&&(s=lt(),Ut(n,e,r,s),Uf(n,t,r))}}function zf(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function $f(e,t){ls=Dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ui(e,n)}}var Ol={readContext:jt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},$p={readContext:jt,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:qu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,pl(4194308,4,Tf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pl(4194308,4,e,t)},useInsertionEffect:function(e,t){return pl(4,2,e,t)},useMemo:function(e,t){var n=Gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Lp.bind(null,ke,e),[r.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:Wu,useDebugValue:Ri,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=Wu(!1),t=e[0];return e=Mp.bind(null,e[1]),Gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ke,s=Gt();if(we){if(n===void 0)throw Error(T(407));n=n()}else{if(n=t(),Fe===null)throw Error(T(349));Xn&30||kf(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,qu(Nf.bind(null,r,l,e),[e]),r.flags|=2048,Es(9,If.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Gt(),t=Fe.identifierPrefix;if(we){var n=ln,r=sn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Is++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_p++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Up={readContext:jt,useCallback:Rf,useContext:jt,useEffect:Ai,useImperativeHandle:Af,useInsertionEffect:jf,useLayoutEffect:bf,useMemo:_f,useReducer:Uo,useRef:Pf,useState:function(){return Uo(Ns)},useDebugValue:Ri,useDeferredValue:function(e){var t=bt();return Mf(t,ze.memoizedState,e)},useTransition:function(){var e=Uo(Ns)[0],t=bt().memoizedState;return[e,t]},useMutableSource:wf,useSyncExternalStore:Sf,useId:Lf,unstable_isNewReconciler:!1},Dp={readContext:jt,useCallback:Rf,useContext:jt,useEffect:Ai,useImperativeHandle:Af,useInsertionEffect:jf,useLayoutEffect:bf,useMemo:_f,useReducer:Do,useRef:Pf,useState:function(){return Do(Ns)},useDebugValue:Ri,useDeferredValue:function(e){var t=bt();return ze===null?t.memoizedState=e:Mf(t,ze.memoizedState,e)},useTransition:function(){var e=Do(Ns)[0],t=bt().memoizedState;return[e,t]},useMutableSource:wf,useSyncExternalStore:Sf,useId:Lf,unstable_isNewReconciler:!1};function _t(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ja(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return(e=e._reactInternals)?nr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lt(),s=Tn(e),l=an(r,s);l.payload=t,n!=null&&(l.callback=n),t=jn(e,l,s),t!==null&&(Ut(t,e,s,r),hl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lt(),s=Tn(e),l=an(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=jn(e,l,s),t!==null&&(Ut(t,e,s,r),hl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lt(),r=Tn(e),s=an(n,r);s.tag=2,t!=null&&(s.callback=t),t=jn(e,s,r),t!==null&&(Ut(t,e,r,n),hl(t,e,r))}};function Yu(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!ys(n,r)||!ys(s,l):!0}function Df(e,t,n){var r=!1,s=Ln,l=t.contextType;return typeof l=="object"&&l!==null?l=jt(l):(s=mt(t)?Yn:nt.current,r=t.contextTypes,l=(r=r!=null)?jr(e,s):Ln),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ku(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ni(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=jt(l):(l=mt(t)?Yn:nt.current,s.context=jr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ja(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),$l(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Rr(e,t){try{var n="",r=t;do n+=hm(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Oo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ta(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Op=typeof WeakMap=="function"?WeakMap:Map;function Of(e,t,n){n=an(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bl||(Bl=!0,Oa=r),Ta(e,t)},n}function Ff(e,t,n){n=an(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ta(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Ta(e,t),typeof r!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Xu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Op;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=e0.bind(null,e,t,n),t.then(e,e))}function Ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=an(-1,1),t.tag=2,jn(n,t,1))),n.lanes|=1),e)}var Fp=hn.ReactCurrentOwner,ft=!1;function st(e,t,n,r){t.child=e===null?gf(t,null,n,r):Tr(t,e.child,n,r)}function ec(e,t,n,r,s){n=n.render;var l=t.ref;return Nr(t,s),r=bi(e,t,n,r,l,s),n=Ti(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(we&&n&&yi(t),t.flags|=1,st(e,t,r,s),t.child)}function tc(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Oi(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Bf(e,t,l,r,s)):(e=xl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:ys,n(o,r)&&e.ref===t.ref)return fn(e,t,s)}return t.flags|=1,e=An(l,r),e.ref=t.ref,e.return=t,t.child=e}function Bf(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(ys(l,r)&&e.ref===t.ref)if(ft=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,fn(e,t,s)}return Aa(e,t,n,r,s)}function Vf(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(xr,gt),gt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(xr,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ge(xr,gt),gt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ge(xr,gt),gt|=r;return st(e,t,s,n),t.child}function Gf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,s){var l=mt(n)?Yn:nt.current;return l=jr(t,l),Nr(t,s),n=bi(e,t,n,r,l,s),r=Ti(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(we&&r&&yi(t),t.flags|=1,st(e,t,n,s),t.child)}function nc(e,t,n,r,s){if(mt(n)){var l=!0;Rl(t)}else l=!1;if(Nr(t,s),t.stateNode===null)gl(e,t),Df(t,n,r),ba(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var i=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jt(c):(c=mt(n)?Yn:nt.current,c=jr(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||i!==c)&&Ku(t,o,r,c),vn=!1;var h=t.memoizedState;o.state=h,$l(t,r,o,s),i=t.memoizedState,a!==r||h!==i||ht.current||vn?(typeof f=="function"&&(ja(t,n,f,r),i=t.memoizedState),(a=vn||Yu(t,n,a,r,h,i,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vf(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:_t(t.type,a),o.props=c,d=t.pendingProps,h=o.context,i=n.contextType,typeof i=="object"&&i!==null?i=jt(i):(i=mt(n)?Yn:nt.current,i=jr(t,i));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==i)&&Ku(t,o,r,i),vn=!1,h=t.memoizedState,o.state=h,$l(t,r,o,s);var v=t.memoizedState;a!==d||h!==v||ht.current||vn?(typeof x=="function"&&(ja(t,n,x,r),v=t.memoizedState),(c=vn||Yu(t,n,c,r,h,v,i)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=i,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,l,s)}function Ra(e,t,n,r,s,l){Gf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Fu(t,n,!1),fn(e,t,l);r=t.stateNode,Fp.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tr(t,e.child,null,l),t.child=Tr(t,null,a,l)):st(e,t,a,l),t.memoizedState=r.state,s&&Fu(t,n,!0),t.child}function Hf(e){var t=e.stateNode;t.pendingContext?Ou(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ou(e,t.context,!1),Ei(e,t.containerInfo)}function rc(e,t,n,r,s){return br(),xi(s),t.flags|=256,st(e,t,n,r),t.child}var _a={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qf(e,t,n){var r=t.pendingProps,s=Se.current,l=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ge(Se,s&1),e===null)return Ca(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=ao(o,r,0,null),e=qn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ma(n),t.memoizedState=_a,e):_i(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Bp(e,t,o,r,a,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,a=s.sibling;var i={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=An(s,i),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=An(a,l):(l=qn(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?Ma(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=_a,r}return l=e.child,e=l.sibling,r=An(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _i(e,t){return t=ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zs(e,t,n,r){return r!==null&&xi(r),Tr(t,e.child,null,n),e=_i(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bp(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=Oo(Error(T(422))),Zs(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=ao({mode:"visible",children:r.children},s,0,null),l=qn(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Tr(t,e.child,null,o),t.child.memoizedState=Ma(o),t.memoizedState=_a,l);if(!(t.mode&1))return Zs(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(T(419)),r=Oo(l,r,void 0),Zs(e,t,o,r)}if(a=(o&e.childLanes)!==0,ft||a){if(r=Fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,dn(e,s),Ut(r,e,s,-1))}return Di(),r=Oo(Error(T(421))),Zs(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=t0.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,yt=Pn(s.nextSibling),vt=t,we=!0,Lt=null,e!==null&&(Nt[Et++]=sn,Nt[Et++]=ln,Nt[Et++]=Kn,sn=e.id,ln=e.overflow,Kn=t),t=_i(t,r.children),t.flags|=4096,t)}function sc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Pa(e.return,t,n)}function Fo(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Wf(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(st(e,t,r.children,n),r=Se.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sc(e,n,t);else if(e.tag===19)sc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ge(Se,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ul(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Fo(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ul(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Fo(t,!0,n,null,l);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,n=An(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=An(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vp(e,t,n){switch(t.tag){case 3:Hf(t),br();break;case 5:xf(t);break;case 1:mt(t.type)&&Rl(t);break;case 4:Ei(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ge(Ll,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),t.flags|=128,null):n&t.child.childLanes?Qf(e,t,n):(ge(Se,Se.current&1),e=fn(e,t,n),e!==null?e.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Wf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return t.lanes=0,Vf(e,t,n)}return fn(e,t,n)}var qf,La,Yf,Kf;qf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};La=function(){};Yf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qn(qt.current);var l=null;switch(n){case"input":s=ra(e,s),r=ra(e,r),l=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),l=[];break;case"textarea":s=oa(e,s),r=oa(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Tl)}ia(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(cs.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var i=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&i!==a&&(i!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in i)i.hasOwnProperty(o)&&a[o]!==i[o]&&(n||(n={}),n[o]=i[o])}else n||(l||(l=[]),l.push(c,n)),n=i;else c==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,a=a?a.__html:void 0,i!=null&&a!==i&&(l=l||[]).push(c,i)):c==="children"?typeof i!="string"&&typeof i!="number"||(l=l||[]).push(c,""+i):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(cs.hasOwnProperty(c)?(i!=null&&c==="onScroll"&&ve("scroll",e),l||a===i||(l=[])):(l=l||[]).push(c,i))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};Kf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qr(e,t){if(!we)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gp(e,t,n){var r=t.pendingProps;switch(vi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return mt(t.type)&&Al(),Xe(t),null;case 3:return r=t.stateNode,Ar(),xe(ht),xe(nt),Pi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Xs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Lt!==null&&(Va(Lt),Lt=null))),La(e,t),Xe(t),null;case 5:Ci(t);var s=Qn(ks.current);if(n=t.type,e!==null&&t.stateNode!=null)Yf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(T(166));return Xe(t),null}if(e=Qn(qt.current),Xs(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Ht]=t,r[ws]=l,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<Xr.length;s++)ve(Xr[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":hu(r,l),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},ve("invalid",r);break;case"textarea":pu(r,l),ve("invalid",r)}ia(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Ks(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Ks(r.textContent,a,e),s=["children",""+a]):cs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":Bs(r),mu(r,l,!0);break;case"textarea":Bs(r),gu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Tl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Id(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ht]=t,e[ws]=r,qf(e,t,!1,!1),t.stateNode=e;e:{switch(o=ua(n,r),n){case"dialog":ve("cancel",e),ve("close",e),s=r;break;case"iframe":case"object":case"embed":ve("load",e),s=r;break;case"video":case"audio":for(s=0;s<Xr.length;s++)ve(Xr[s],e);s=r;break;case"source":ve("error",e),s=r;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=r;break;case"details":ve("toggle",e),s=r;break;case"input":hu(e,r),s=ra(e,r),ve("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ve("invalid",e);break;case"textarea":pu(e,r),s=oa(e,r),ve("invalid",e);break;default:s=r}ia(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var i=a[l];l==="style"?Cd(e,i):l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Nd(e,i)):l==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&ds(e,i):typeof i=="number"&&ds(e,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(cs.hasOwnProperty(l)?i!=null&&l==="onScroll"&&ve("scroll",e):i!=null&&ri(e,l,i,o))}switch(n){case"input":Bs(e),mu(e,r,!1);break;case"textarea":Bs(e),gu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?wr(e,!!r.multiple,l,!1):r.defaultValue!=null&&wr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Tl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Kf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(T(166));if(n=Qn(ks.current),Qn(qt.current),Xs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ht]=t,(l=r.nodeValue!==n)&&(e=vt,e!==null))switch(e.tag){case 3:Ks(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ks(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ht]=t,t.stateNode=r}return Xe(t),null;case 13:if(xe(Se),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(we&&yt!==null&&t.mode&1&&!(t.flags&128))mf(),br(),t.flags|=98560,l=!1;else if(l=Xs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(T(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(T(317));l[Ht]=t}else br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),l=!1}else Lt!==null&&(Va(Lt),Lt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?$e===0&&($e=3):Di())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Ar(),La(e,t),e===null&&vs(t.stateNode.containerInfo),Xe(t),null;case 10:return ki(t.type._context),Xe(t),null;case 17:return mt(t.type)&&Al(),Xe(t),null;case 19:if(xe(Se),l=t.memoizedState,l===null)return Xe(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Qr(l,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ul(e),o!==null){for(t.flags|=128,Qr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),t.child}e=e.sibling}l.tail!==null&&Pe()>_r&&(t.flags|=128,r=!0,Qr(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ul(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!we)return Xe(t),null}else 2*Pe()-l.renderingStartTime>_r&&n!==1073741824&&(t.flags|=128,r=!0,Qr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Pe(),t.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),t):(Xe(t),null);case 22:case 23:return Ui(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function Hp(e,t){switch(vi(t),t.tag){case 1:return mt(t.type)&&Al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ar(),xe(ht),xe(nt),Pi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ci(t),null;case 13:if(xe(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Se),null;case 4:return Ar(),null;case 10:return ki(t.type._context),null;case 22:case 23:return Ui(),null;case 24:return null;default:return null}}var el=!1,et=!1,Qp=typeof WeakSet=="function"?WeakSet:Set,F=null;function vr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(e,t,r)}else n.current=null}function za(e,t,n){try{n()}catch(r){Ee(e,t,r)}}var lc=!1;function Wp(e,t){if(xa=Pl,e=ef(),gi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,a=-1,i=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var x;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==l||r!==0&&d.nodeType!==3||(i=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)h=d,d=x;for(;;){if(d===e)break t;if(h===n&&++c===s&&(a=o),h===l&&++f===r&&(i=o),(x=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=x}n=a===-1||i===-1?null:{start:a,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(wa={focusedElem:e,selectionRange:n},Pl=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,S=v.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?k:_t(t.type,k),S);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(w){Ee(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return v=lc,lc=!1,v}function os(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&za(t,n,l)}s=s.next}while(s!==r)}}function lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $a(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xf(e){var t=e.alternate;t!==null&&(e.alternate=null,Xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[ws],delete t[Ia],delete t[bp],delete t[Tp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jf(e){return e.tag===5||e.tag===3||e.tag===4}function oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ua(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tl));else if(r!==4&&(e=e.child,e!==null))for(Ua(e,t,n),e=e.sibling;e!==null;)Ua(e,t,n),e=e.sibling}function Da(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Da(e,t,n),e=e.sibling;e!==null;)Da(e,t,n),e=e.sibling}var Ge=null,Mt=!1;function gn(e,t,n){for(n=n.child;n!==null;)Zf(e,t,n),n=n.sibling}function Zf(e,t,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Xl,n)}catch{}switch(n.tag){case 5:et||vr(n,t);case 6:var r=Ge,s=Mt;Ge=null,gn(e,t,n),Ge=r,Mt=s,Ge!==null&&(Mt?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Mt?(e=Ge,n=n.stateNode,e.nodeType===8?Mo(e.parentNode,n):e.nodeType===1&&Mo(e,n),ps(e)):Mo(Ge,n.stateNode));break;case 4:r=Ge,s=Mt,Ge=n.stateNode.containerInfo,Mt=!0,gn(e,t,n),Ge=r,Mt=s;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&za(n,t,o),s=s.next}while(s!==r)}gn(e,t,n);break;case 1:if(!et&&(vr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ee(n,t,a)}gn(e,t,n);break;case 21:gn(e,t,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,gn(e,t,n),et=r):gn(e,t,n);break;default:gn(e,t,n)}}function ac(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qp),t.forEach(function(r){var s=n0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ge=a.stateNode,Mt=!1;break e;case 3:Ge=a.stateNode.containerInfo,Mt=!0;break e;case 4:Ge=a.stateNode.containerInfo,Mt=!0;break e}a=a.return}if(Ge===null)throw Error(T(160));Zf(l,o,s),Ge=null,Mt=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(c){Ee(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eh(t,e),t=t.sibling}function eh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Bt(e),r&4){try{os(3,e,e.return),lo(3,e)}catch(k){Ee(e,e.return,k)}try{os(5,e,e.return)}catch(k){Ee(e,e.return,k)}}break;case 1:Rt(t,e),Bt(e),r&512&&n!==null&&vr(n,n.return);break;case 5:if(Rt(t,e),Bt(e),r&512&&n!==null&&vr(n,n.return),e.flags&32){var s=e.stateNode;try{ds(s,"")}catch(k){Ee(e,e.return,k)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,a=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&Sd(s,l),ua(a,o);var c=ua(a,l);for(o=0;o<i.length;o+=2){var f=i[o],d=i[o+1];f==="style"?Cd(s,d):f==="dangerouslySetInnerHTML"?Nd(s,d):f==="children"?ds(s,d):ri(s,f,d,c)}switch(a){case"input":sa(s,l);break;case"textarea":kd(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?wr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?wr(s,!!l.multiple,l.defaultValue,!0):wr(s,!!l.multiple,l.multiple?[]:"",!1))}s[ws]=l}catch(k){Ee(e,e.return,k)}}break;case 6:if(Rt(t,e),Bt(e),r&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(k){Ee(e,e.return,k)}}break;case 3:if(Rt(t,e),Bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ps(t.containerInfo)}catch(k){Ee(e,e.return,k)}break;case 4:Rt(t,e),Bt(e);break;case 13:Rt(t,e),Bt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(zi=Pe())),r&4&&ac(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(et=(c=et)||f,Rt(t,e),et=c):Rt(t,e),Bt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(F=e,f=e.child;f!==null;){for(d=F=f;F!==null;){switch(h=F,x=h.child,h.tag){case 0:case 11:case 14:case 15:os(4,h,h.return);break;case 1:vr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){Ee(r,n,k)}}break;case 5:vr(h,h.return);break;case 22:if(h.memoizedState!==null){uc(d);continue}}x!==null?(x.return=h,F=x):uc(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,c?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=d.stateNode,i=d.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,a.style.display=Ed("display",o))}catch(k){Ee(e,e.return,k)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(k){Ee(e,e.return,k)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rt(t,e),Bt(e),r&4&&ac(e);break;case 21:break;default:Rt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jf(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ds(s,""),r.flags&=-33);var l=oc(e);Da(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=oc(e);Ua(e,a,o);break;default:throw Error(T(161))}}catch(i){Ee(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qp(e,t,n){F=e,th(e)}function th(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var s=F,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||el;if(!o){var a=s.alternate,i=a!==null&&a.memoizedState!==null||et;a=el;var c=et;if(el=o,(et=i)&&!c)for(F=s;F!==null;)o=F,i=o.child,o.tag===22&&o.memoizedState!==null?cc(s):i!==null?(i.return=o,F=i):cc(s);for(;l!==null;)F=l,th(l),l=l.sibling;F=s,el=a,et=c}ic(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,F=l):ic(e)}}function ic(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||lo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!et)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:_t(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Qu(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ps(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}et||t.flags&512&&$a(t)}catch(h){Ee(t,t.return,h)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function uc(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function cc(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{lo(4,t)}catch(i){Ee(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(i){Ee(t,s,i)}}var l=t.return;try{$a(t)}catch(i){Ee(t,l,i)}break;case 5:var o=t.return;try{$a(t)}catch(i){Ee(t,o,i)}}}catch(i){Ee(t,t.return,i)}if(t===e){F=null;break}var a=t.sibling;if(a!==null){a.return=t.return,F=a;break}F=t.return}}var Yp=Math.ceil,Fl=hn.ReactCurrentDispatcher,Mi=hn.ReactCurrentOwner,Pt=hn.ReactCurrentBatchConfig,ue=0,Fe=null,Me=null,qe=0,gt=0,xr=$n(0),$e=0,Cs=null,Jn=0,oo=0,Li=0,as=null,dt=null,zi=0,_r=1/0,nn=null,Bl=!1,Oa=null,bn=null,tl=!1,kn=null,Vl=0,is=0,Fa=null,yl=-1,vl=0;function lt(){return ue&6?Pe():yl!==-1?yl:yl=Pe()}function Tn(e){return e.mode&1?ue&2&&qe!==0?qe&-qe:Rp.transition!==null?(vl===0&&(vl=Ud()),vl):(e=me,e!==0||(e=window.event,e=e===void 0?16:Hd(e.type)),e):1}function Ut(e,t,n,r){if(50<is)throw is=0,Fa=null,Error(T(185));Ms(e,n,r),(!(ue&2)||e!==Fe)&&(e===Fe&&(!(ue&2)&&(oo|=n),$e===4&&wn(e,qe)),pt(e,r),n===1&&ue===0&&!(t.mode&1)&&(_r=Pe()+500,no&&Un()))}function pt(e,t){var n=e.callbackNode;Rm(e,t);var r=Cl(e,e===Fe?qe:0);if(r===0)n!==null&&xu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xu(n),t===1)e.tag===0?Ap(dc.bind(null,e)):df(dc.bind(null,e)),Pp(function(){!(ue&6)&&Un()}),n=null;else{switch(Dd(r)){case 1:n=ii;break;case 4:n=zd;break;case 16:n=El;break;case 536870912:n=$d;break;default:n=El}n=uh(n,nh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nh(e,t){if(yl=-1,vl=0,ue&6)throw Error(T(327));var n=e.callbackNode;if(Er()&&e.callbackNode!==n)return null;var r=Cl(e,e===Fe?qe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gl(e,r);else{t=r;var s=ue;ue|=2;var l=sh();(Fe!==e||qe!==t)&&(nn=null,_r=Pe()+500,Wn(e,t));do try{Jp();break}catch(a){rh(e,a)}while(!0);Si(),Fl.current=l,ue=s,Me!==null?t=0:(Fe=null,qe=0,t=$e)}if(t!==0){if(t===2&&(s=ma(e),s!==0&&(r=s,t=Ba(e,s))),t===1)throw n=Cs,Wn(e,0),wn(e,r),pt(e,Pe()),n;if(t===6)wn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Kp(s)&&(t=Gl(e,r),t===2&&(l=ma(e),l!==0&&(r=l,t=Ba(e,l))),t===1))throw n=Cs,Wn(e,0),wn(e,r),pt(e,Pe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(T(345));case 2:Vn(e,dt,nn);break;case 3:if(wn(e,r),(r&130023424)===r&&(t=zi+500-Pe(),10<t)){if(Cl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){lt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ka(Vn.bind(null,e,dt,nn),t);break}Vn(e,dt,nn);break;case 4:if(wn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-$t(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yp(r/1960))-r,10<r){e.timeoutHandle=ka(Vn.bind(null,e,dt,nn),r);break}Vn(e,dt,nn);break;case 5:Vn(e,dt,nn);break;default:throw Error(T(329))}}}return pt(e,Pe()),e.callbackNode===n?nh.bind(null,e):null}function Ba(e,t){var n=as;return e.current.memoizedState.isDehydrated&&(Wn(e,t).flags|=256),e=Gl(e,t),e!==2&&(t=dt,dt=n,t!==null&&Va(t)),e}function Va(e){dt===null?dt=e:dt.push.apply(dt,e)}function Kp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Dt(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~Li,t&=~oo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$t(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(ue&6)throw Error(T(327));Er();var t=Cl(e,0);if(!(t&1))return pt(e,Pe()),null;var n=Gl(e,t);if(e.tag!==0&&n===2){var r=ma(e);r!==0&&(t=r,n=Ba(e,r))}if(n===1)throw n=Cs,Wn(e,0),wn(e,t),pt(e,Pe()),n;if(n===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vn(e,dt,nn),pt(e,Pe()),null}function $i(e,t){var n=ue;ue|=1;try{return e(t)}finally{ue=n,ue===0&&(_r=Pe()+500,no&&Un())}}function Zn(e){kn!==null&&kn.tag===0&&!(ue&6)&&Er();var t=ue;ue|=1;var n=Pt.transition,r=me;try{if(Pt.transition=null,me=1,e)return e()}finally{me=r,Pt.transition=n,ue=t,!(ue&6)&&Un()}}function Ui(){gt=xr.current,xe(xr)}function Wn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cp(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(vi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Al();break;case 3:Ar(),xe(ht),xe(nt),Pi();break;case 5:Ci(r);break;case 4:Ar();break;case 13:xe(Se);break;case 19:xe(Se);break;case 10:ki(r.type._context);break;case 22:case 23:Ui()}n=n.return}if(Fe=e,Me=e=An(e.current,null),qe=gt=t,$e=0,Cs=null,Li=oo=Jn=0,dt=as=null,Hn!==null){for(t=0;t<Hn.length;t++)if(n=Hn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}Hn=null}return e}function rh(e,t){do{var n=Me;try{if(Si(),ml.current=Ol,Dl){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dl=!1}if(Xn=0,De=ze=ke=null,ls=!1,Is=0,Mi.current=null,n===null||n.return===null){$e=1,Cs=t,Me=null;break}e:{var l=e,o=n.return,a=n,i=t;if(t=qe,a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var c=i,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Ju(o);if(x!==null){x.flags&=-257,Zu(x,o,a,l,t),x.mode&1&&Xu(l,c,t),t=x,i=c;var v=t.updateQueue;if(v===null){var k=new Set;k.add(i),t.updateQueue=k}else v.add(i);break e}else{if(!(t&1)){Xu(l,c,t),Di();break e}i=Error(T(426))}}else if(we&&a.mode&1){var S=Ju(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Zu(S,o,a,l,t),xi(Rr(i,a));break e}}l=i=Rr(i,a),$e!==4&&($e=2),as===null?as=[l]:as.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var p=Of(l,i,t);Hu(l,p);break e;case 1:a=i;var m=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(bn===null||!bn.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var w=Ff(l,a,t);Hu(l,w);break e}}l=l.return}while(l!==null)}oh(n)}catch(N){t=N,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function sh(){var e=Fl.current;return Fl.current=Ol,e===null?Ol:e}function Di(){($e===0||$e===3||$e===2)&&($e=4),Fe===null||!(Jn&268435455)&&!(oo&268435455)||wn(Fe,qe)}function Gl(e,t){var n=ue;ue|=2;var r=sh();(Fe!==e||qe!==t)&&(nn=null,Wn(e,t));do try{Xp();break}catch(s){rh(e,s)}while(!0);if(Si(),ue=n,Fl.current=r,Me!==null)throw Error(T(261));return Fe=null,qe=0,$e}function Xp(){for(;Me!==null;)lh(Me)}function Jp(){for(;Me!==null&&!Im();)lh(Me)}function lh(e){var t=ih(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?oh(e):Me=t,Mi.current=null}function oh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Hp(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Me=null;return}}else if(n=Gp(n,t,gt),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);$e===0&&($e=5)}function Vn(e,t,n){var r=me,s=Pt.transition;try{Pt.transition=null,me=1,Zp(e,t,n,r)}finally{Pt.transition=s,me=r}return null}function Zp(e,t,n,r){do Er();while(kn!==null);if(ue&6)throw Error(T(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(_m(e,l),e===Fe&&(Me=Fe=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tl||(tl=!0,uh(El,function(){return Er(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Pt.transition,Pt.transition=null;var o=me;me=1;var a=ue;ue|=4,Mi.current=null,Wp(e,n),eh(n,e),xp(wa),Pl=!!xa,wa=xa=null,e.current=n,qp(n),Nm(),ue=a,me=o,Pt.transition=l}else e.current=n;if(tl&&(tl=!1,kn=e,Vl=s),l=e.pendingLanes,l===0&&(bn=null),Pm(n.stateNode),pt(e,Pe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Bl)throw Bl=!1,e=Oa,Oa=null,e;return Vl&1&&e.tag!==0&&Er(),l=e.pendingLanes,l&1?e===Fa?is++:(is=0,Fa=e):is=0,Un(),null}function Er(){if(kn!==null){var e=Dd(Vl),t=Pt.transition,n=me;try{if(Pt.transition=null,me=16>e?16:e,kn===null)var r=!1;else{if(e=kn,kn=null,Vl=0,ue&6)throw Error(T(331));var s=ue;for(ue|=4,F=e.current;F!==null;){var l=F,o=l.child;if(F.flags&16){var a=l.deletions;if(a!==null){for(var i=0;i<a.length;i++){var c=a[i];for(F=c;F!==null;){var f=F;switch(f.tag){case 0:case 11:case 15:os(8,f,l)}var d=f.child;if(d!==null)d.return=f,F=d;else for(;F!==null;){f=F;var h=f.sibling,x=f.return;if(Xf(f),f===c){F=null;break}if(h!==null){h.return=x,F=h;break}F=x}}}var v=l.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var S=k.sibling;k.sibling=null,k=S}while(k!==null)}}F=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,F=o;else e:for(;F!==null;){if(l=F,l.flags&2048)switch(l.tag){case 0:case 11:case 15:os(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,F=p;break e}F=l.return}}var m=e.current;for(F=m;F!==null;){o=F;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,F=y;else e:for(o=m;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lo(9,a)}}catch(N){Ee(a,a.return,N)}if(a===o){F=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,F=w;break e}F=a.return}}if(ue=s,Un(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Xl,e)}catch{}r=!0}return r}finally{me=n,Pt.transition=t}}return!1}function fc(e,t,n){t=Rr(n,t),t=Of(e,t,1),e=jn(e,t,1),t=lt(),e!==null&&(Ms(e,1,t),pt(e,t))}function Ee(e,t,n){if(e.tag===3)fc(e,e,n);else for(;t!==null;){if(t.tag===3){fc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bn===null||!bn.has(r))){e=Rr(n,e),e=Ff(t,e,1),t=jn(t,e,1),e=lt(),t!==null&&(Ms(t,1,e),pt(t,e));break}}t=t.return}}function e0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&n,Fe===e&&(qe&n)===n&&($e===4||$e===3&&(qe&130023424)===qe&&500>Pe()-zi?Wn(e,0):Li|=n),pt(e,t)}function ah(e,t){t===0&&(e.mode&1?(t=Hs,Hs<<=1,!(Hs&130023424)&&(Hs=4194304)):t=1);var n=lt();e=dn(e,t),e!==null&&(Ms(e,t,n),pt(e,n))}function t0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ah(e,n)}function n0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(t),ah(e,n)}var ih;ih=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ft=!1,Vp(e,t,n);ft=!!(e.flags&131072)}else ft=!1,we&&t.flags&1048576&&ff(t,Ml,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;gl(e,t),e=t.pendingProps;var s=jr(t,nt.current);Nr(t,n),s=bi(null,t,r,e,s,n);var l=Ti();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(l=!0,Rl(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ni(t),s.updater=so,t.stateNode=s,s._reactInternals=t,ba(t,r,e,n),t=Ra(null,t,r,!0,l,n)):(t.tag=0,we&&l&&yi(t),st(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(gl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=s0(r),e=_t(r,e),s){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=nc(null,t,r,e,n);break e;case 11:t=ec(null,t,r,e,n);break e;case 14:t=tc(null,t,r,_t(r.type,e),n);break e}throw Error(T(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_t(r,s),Aa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_t(r,s),nc(e,t,r,s,n);case 3:e:{if(Hf(t),e===null)throw Error(T(387));r=t.pendingProps,l=t.memoizedState,s=l.element,vf(e,t),$l(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Rr(Error(T(423)),t),t=rc(e,t,r,n,s);break e}else if(r!==s){s=Rr(Error(T(424)),t),t=rc(e,t,r,n,s);break e}else for(yt=Pn(t.stateNode.containerInfo.firstChild),vt=t,we=!0,Lt=null,n=gf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(br(),r===s){t=fn(e,t,n);break e}st(e,t,r,n)}t=t.child}return t;case 5:return xf(t),e===null&&Ca(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,Sa(r,s)?o=null:l!==null&&Sa(r,l)&&(t.flags|=32),Gf(e,t),st(e,t,o,n),t.child;case 6:return e===null&&Ca(t),null;case 13:return Qf(e,t,n);case 4:return Ei(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tr(t,null,r,n):st(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_t(r,s),ec(e,t,r,s,n);case 7:return st(e,t,t.pendingProps,n),t.child;case 8:return st(e,t,t.pendingProps.children,n),t.child;case 12:return st(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,ge(Ll,r._currentValue),r._currentValue=o,l!==null)if(Dt(l.value,o)){if(l.children===s.children&&!ht.current){t=fn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){o=l.child;for(var i=a.firstContext;i!==null;){if(i.context===r){if(l.tag===1){i=an(-1,n&-n),i.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i}}l.lanes|=n,i=l.alternate,i!==null&&(i.lanes|=n),Pa(l.return,n,t),a.lanes|=n;break}i=i.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pa(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}st(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Nr(t,n),s=jt(s),r=r(s),t.flags|=1,st(e,t,r,n),t.child;case 14:return r=t.type,s=_t(r,t.pendingProps),s=_t(r.type,s),tc(e,t,r,s,n);case 15:return Bf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_t(r,s),gl(e,t),t.tag=1,mt(r)?(e=!0,Rl(t)):e=!1,Nr(t,n),Df(t,r,s),ba(t,r,s,n),Ra(null,t,r,!0,e,n);case 19:return Wf(e,t,n);case 22:return Vf(e,t,n)}throw Error(T(156,t.tag))};function uh(e,t){return Ld(e,t)}function r0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,r){return new r0(e,t,n,r)}function Oi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function s0(e){if(typeof e=="function")return Oi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===li)return 11;if(e===oi)return 14}return 2}function An(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xl(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")Oi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ur:return qn(n.children,s,l,t);case si:o=8,s|=8;break;case Zo:return e=Ct(12,n,t,s|2),e.elementType=Zo,e.lanes=l,e;case ea:return e=Ct(13,n,t,s),e.elementType=ea,e.lanes=l,e;case ta:return e=Ct(19,n,t,s),e.elementType=ta,e.lanes=l,e;case vd:return ao(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gd:o=10;break e;case yd:o=9;break e;case li:o=11;break e;case oi:o=14;break e;case yn:o=16,r=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=Ct(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function qn(e,t,n,r){return e=Ct(7,e,r,t),e.lanes=n,e}function ao(e,t,n,r){return e=Ct(22,e,r,t),e.elementType=vd,e.lanes=n,e.stateNode={isHidden:!1},e}function Bo(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function Vo(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Io(0),this.expirationTimes=Io(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Io(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fi(e,t,n,r,s,l,o,a,i){return e=new l0(e,t,n,a,i),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ct(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ni(l),e}function o0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ch(e){if(!e)return Ln;e=e._reactInternals;e:{if(nr(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var n=e.type;if(mt(n))return cf(e,n,t)}return t}function dh(e,t,n,r,s,l,o,a,i){return e=Fi(n,r,!0,e,s,l,o,a,i),e.context=ch(null),n=e.current,r=lt(),s=Tn(n),l=an(r,s),l.callback=t??null,jn(n,l,s),e.current.lanes=s,Ms(e,s,r),pt(e,r),e}function io(e,t,n,r){var s=t.current,l=lt(),o=Tn(s);return n=ch(n),t.context===null?t.context=n:t.pendingContext=n,t=an(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=jn(s,t,o),e!==null&&(Ut(e,s,o,l),hl(e,s,o)),o}function Hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Bi(e,t){hc(e,t),(e=e.alternate)&&hc(e,t)}function a0(){return null}var fh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vi(e){this._internalRoot=e}uo.prototype.render=Vi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));io(e,t,null,null)};uo.prototype.unmount=Vi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zn(function(){io(null,e,null,null)}),t[cn]=null}};function uo(e){this._internalRoot=e}uo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xn.length&&t!==0&&t<xn[n].priority;n++);xn.splice(n,0,e),n===0&&Gd(e)}};function Gi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mc(){}function i0(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var c=Hl(o);l.call(c)}}var o=dh(t,r,e,0,null,!1,!1,"",mc);return e._reactRootContainer=o,e[cn]=o.current,vs(e.nodeType===8?e.parentNode:e),Zn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Hl(i);a.call(c)}}var i=Fi(e,0,!1,null,null,!1,!1,"",mc);return e._reactRootContainer=i,e[cn]=i.current,vs(e.nodeType===8?e.parentNode:e),Zn(function(){io(t,i,n,r)}),i}function fo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var a=s;s=function(){var i=Hl(o);a.call(i)}}io(t,o,e,s)}else o=i0(n,t,e,s,r);return Hl(o)}Od=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Kr(t.pendingLanes);n!==0&&(ui(t,n|1),pt(t,Pe()),!(ue&6)&&(_r=Pe()+500,Un()))}break;case 13:Zn(function(){var r=dn(e,1);if(r!==null){var s=lt();Ut(r,e,1,s)}}),Bi(e,1)}};ci=function(e){if(e.tag===13){var t=dn(e,134217728);if(t!==null){var n=lt();Ut(t,e,134217728,n)}Bi(e,134217728)}};Fd=function(e){if(e.tag===13){var t=Tn(e),n=dn(e,t);if(n!==null){var r=lt();Ut(n,e,t,r)}Bi(e,t)}};Bd=function(){return me};Vd=function(e,t){var n=me;try{return me=e,t()}finally{me=n}};da=function(e,t,n){switch(t){case"input":if(sa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=to(r);if(!s)throw Error(T(90));wd(r),sa(r,s)}}}break;case"textarea":kd(e,n);break;case"select":t=n.value,t!=null&&wr(e,!!n.multiple,t,!1)}};bd=$i;Td=Zn;var u0={usingClientEntryPoint:!1,Events:[zs,hr,to,Pd,jd,$i]},Wr={findFiberByHostInstance:Gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c0={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_d(e),e===null?null:e.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||a0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{Xl=nl.inject(c0),Wt=nl}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u0;wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gi(t))throw Error(T(200));return o0(e,t,null,n)};wt.createRoot=function(e,t){if(!Gi(e))throw Error(T(299));var n=!1,r="",s=fh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Fi(e,1,!1,null,null,n,!1,r,s),e[cn]=t.current,vs(e.nodeType===8?e.parentNode:e),new Vi(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=_d(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return Zn(e)};wt.hydrate=function(e,t,n){if(!co(t))throw Error(T(200));return fo(null,e,t,!0,n)};wt.hydrateRoot=function(e,t,n){if(!Gi(e))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=fh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=dh(t,null,e,1,n??null,s,!1,l,o),e[cn]=t.current,vs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new uo(t)};wt.render=function(e,t,n){if(!co(t))throw Error(T(200));return fo(null,e,t,!1,n)};wt.unmountComponentAtNode=function(e){if(!co(e))throw Error(T(40));return e._reactRootContainer?(Zn(function(){fo(null,null,e,!1,function(){e._reactRootContainer=null,e[cn]=null})}),!0):!1};wt.unstable_batchedUpdates=$i;wt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!co(n))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return fo(e,t,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hh)}catch(e){console.error(e)}}hh(),fd.exports=wt;var ho=fd.exports,pc=ho;Xo.createRoot=pc.createRoot,Xo.hydrateRoot=pc.hydrateRoot;const d0="modulepreload",f0=function(e){return"/"+e},gc={},tt=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(i=>{if(i=f0(i),i in gc)return;gc[i]=!0;const c=i.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":d0,c||(d.as="script"),d.crossOrigin="",d.href=i,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,x)=>{d.addEventListener("load",h),d.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&l(a.reason);return t().catch(l)})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ps.apply(this,arguments)}var In;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(In||(In={}));const yc="popstate";function h0(e){e===void 0&&(e={});function t(r,s){let{pathname:l,search:o,hash:a}=r.location;return Ga("",{pathname:l,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ql(s)}return p0(t,n,null,e)}function je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function m0(){return Math.random().toString(36).substr(2,8)}function vc(e,t){return{usr:e.state,key:e.key,idx:t}}function Ga(e,t,n,r){return n===void 0&&(n=null),Ps({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ur(t):t,{state:n,key:t&&t.key||r||m0()})}function Ql(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ur(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p0(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,o=s.history,a=In.Pop,i=null,c=f();c==null&&(c=0,o.replaceState(Ps({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=In.Pop;let S=f(),p=S==null?null:S-c;c=S,i&&i({action:a,location:k.location,delta:p})}function h(S,p){a=In.Push;let m=Ga(k.location,S,p);c=f()+1;let y=vc(m,c),w=k.createHref(m);try{o.pushState(y,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(w)}l&&i&&i({action:a,location:k.location,delta:1})}function x(S,p){a=In.Replace;let m=Ga(k.location,S,p);c=f();let y=vc(m,c),w=k.createHref(m);o.replaceState(y,"",w),l&&i&&i({action:a,location:k.location,delta:0})}function v(S){let p=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof S=="string"?S:Ql(S);return m=m.replace(/ $/,"%20"),je(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let k={get action(){return a},get location(){return e(s,o)},listen(S){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(yc,d),i=S,()=>{s.removeEventListener(yc,d),i=null}},createHref(S){return t(s,S)},createURL:v,encodeLocation(S){let p=v(S);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:x,go(S){return o.go(S)}};return k}var xc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xc||(xc={}));function g0(e,t,n){return n===void 0&&(n="/"),y0(e,t,n)}function y0(e,t,n,r){let s=typeof t=="string"?Ur(t):t,l=Qi(s.pathname||"/",n);if(l==null)return null;let o=mh(e);v0(o);let a=null;for(let i=0;a==null&&i<o.length;++i){let c=T0(l);a=P0(o[i],c)}return a}function mh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,o,a)=>{let i={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};i.relativePath.startsWith("/")&&(je(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let c=Rn([r,i.relativePath]),f=n.concat(i);l.children&&l.children.length>0&&(je(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mh(l.children,t,f,c)),!(l.path==null&&!l.index)&&t.push({path:c,score:E0(c,l.index),routesMeta:f})};return e.forEach((l,o)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))s(l,o);else for(let i of ph(l.path))s(l,o,i)}),t}function ph(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let o=ph(r.join("/")),a=[];return a.push(...o.map(i=>i===""?l:[l,i].join("/"))),s&&a.push(...o),a.map(i=>e.startsWith("/")&&i===""?"/":i)}function v0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:C0(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const x0=/^:[\w-]+$/,w0=3,S0=2,k0=1,I0=10,N0=-2,wc=e=>e==="*";function E0(e,t){let n=e.split("/"),r=n.length;return n.some(wc)&&(r+=N0),t&&(r+=S0),n.filter(s=>!wc(s)).reduce((s,l)=>s+(x0.test(l)?w0:l===""?k0:I0),r)}function C0(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function P0(e,t,n){let{routesMeta:r}=e,s={},l="/",o=[];for(let a=0;a<r.length;++a){let i=r[a],c=a===r.length-1,f=l==="/"?t:t.slice(l.length)||"/",d=j0({path:i.relativePath,caseSensitive:i.caseSensitive,end:c},f),h=i.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Rn([l,d.pathname]),pathnameBase:L0(Rn([l,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(l=Rn([l,d.pathnameBase]))}return o}function j0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=b0(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],o=l.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,f,d)=>{let{paramName:h,isOptional:x}=f;if(h==="*"){let k=a[d]||"";o=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const v=a[d];return x&&!v?c[h]=void 0:c[h]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:l,pathnameBase:o,pattern:e}}function b0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Hi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,i)=>(r.push({paramName:a,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function T0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const A0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R0=e=>A0.test(e);function _0(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Ur(e):e,l;if(n)if(R0(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Hi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=Sc(n.substring(1),"/"):l=Sc(n,t)}else l=t;return{pathname:l,search:z0(r),hash:$0(s)}}function Sc(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Go(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Wi(e,t){let n=M0(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qi(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Ur(e):(s=Ps({},e),je(!s.pathname||!s.pathname.includes("?"),Go("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Go("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Go("#","search","hash",s)));let l=e===""||s.pathname==="",o=l?"/":s.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?t[d]:"/"}let i=_0(s,a),c=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(c||f)&&(i.pathname+="/"),i}const Rn=e=>e.join("/").replace(/\/\/+/g,"/"),L0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function U0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gh=["post","put","patch","delete"];new Set(gh);const D0=["get",...gh];new Set(D0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function js(){return js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},js.apply(this,arguments)}const Yi=g.createContext(null),O0=g.createContext(null),Dn=g.createContext(null),mo=g.createContext(null),mn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),yh=g.createContext(null);function F0(e,t){let{relative:n}=t===void 0?{}:t;Dr()||je(!1);let{basename:r,navigator:s}=g.useContext(Dn),{hash:l,pathname:o,search:a}=xh(e,{relative:n}),i=o;return r!=="/"&&(i=o==="/"?r:Rn([r,o])),s.createHref({pathname:i,search:a,hash:l})}function Dr(){return g.useContext(mo)!=null}function Yt(){return Dr()||je(!1),g.useContext(mo).location}function vh(e){g.useContext(Dn).static||g.useLayoutEffect(e)}function Us(){let{isDataRoute:e}=g.useContext(mn);return e?eg():B0()}function B0(){Dr()||je(!1);let e=g.useContext(Yi),{basename:t,future:n,navigator:r}=g.useContext(Dn),{matches:s}=g.useContext(mn),{pathname:l}=Yt(),o=JSON.stringify(Wi(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return vh(()=>{a.current=!0}),g.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=qi(c,JSON.parse(o),l,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Rn([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,l,e])}function Rv(){let{matches:e}=g.useContext(mn),t=e[e.length-1];return t?t.params:{}}function xh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=g.useContext(Dn),{matches:s}=g.useContext(mn),{pathname:l}=Yt(),o=JSON.stringify(Wi(s,r.v7_relativeSplatPath));return g.useMemo(()=>qi(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function V0(e,t){return G0(e,t)}function G0(e,t,n,r){Dr()||je(!1);let{navigator:s}=g.useContext(Dn),{matches:l}=g.useContext(mn),o=l[l.length-1],a=o?o.params:{};o&&o.pathname;let i=o?o.pathnameBase:"/";o&&o.route;let c=Yt(),f;if(t){var d;let S=typeof t=="string"?Ur(t):t;i==="/"||(d=S.pathname)!=null&&d.startsWith(i)||je(!1),f=S}else f=c;let h=f.pathname||"/",x=h;if(i!=="/"){let S=i.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=g0(e,{pathname:x}),k=Y0(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Rn([i,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?i:Rn([i,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,n,r);return t&&k?g.createElement(mo.Provider,{value:{location:js({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:In.Pop}},k):k}function H0(){let e=Z0(),t=U0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const Q0=g.createElement(H0,null);class W0 extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(mn.Provider,{value:this.props.routeContext},g.createElement(yh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q0(e){let{routeContext:t,match:n,children:r}=e,s=g.useContext(Yi);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(mn.Provider,{value:t},r)}function Y0(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let i=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:h,errors:x}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){i=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let x,v=!1,k=null,S=null;n&&(x=a&&d.route.id?a[d.route.id]:void 0,k=d.route.errorElement||Q0,i&&(c<0&&h===0?(tg("route-fallback"),v=!0,S=null):c===h&&(v=!0,S=d.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,h+1)),m=()=>{let y;return x?y=k:v?y=S:d.route.Component?y=g.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,g.createElement(q0,{match:d,routeContext:{outlet:f,matches:p,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?g.createElement(W0,{location:n.location,revalidation:n.revalidation,component:k,error:x,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var wh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wh||{}),Sh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Sh||{});function K0(e){let t=g.useContext(Yi);return t||je(!1),t}function X0(e){let t=g.useContext(O0);return t||je(!1),t}function J0(e){let t=g.useContext(mn);return t||je(!1),t}function kh(e){let t=J0(),n=t.matches[t.matches.length-1];return n.route.id||je(!1),n.route.id}function Z0(){var e;let t=g.useContext(yh),n=X0(),r=kh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function eg(){let{router:e}=K0(wh.UseNavigateStable),t=kh(Sh.UseNavigateStable),n=g.useRef(!1);return vh(()=>{n.current=!0}),g.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,js({fromRouteId:t},l)))},[e,t])}const kc={};function tg(e,t,n){kc[e]||(kc[e]=!0)}function ng(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function rg(e){let{to:t,replace:n,state:r,relative:s}=e;Dr()||je(!1);let{future:l,static:o}=g.useContext(Dn),{matches:a}=g.useContext(mn),{pathname:i}=Yt(),c=Us(),f=qi(t,Wi(a,l.v7_relativeSplatPath),i,s==="path"),d=JSON.stringify(f);return g.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function Je(e){je(!1)}function sg(e){let{basename:t="/",children:n=null,location:r,navigationType:s=In.Pop,navigator:l,static:o=!1,future:a}=e;Dr()&&je(!1);let i=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:i,navigator:l,static:o,future:js({v7_relativeSplatPath:!1},a)}),[i,a,l,o]);typeof r=="string"&&(r=Ur(r));let{pathname:f="/",search:d="",hash:h="",state:x=null,key:v="default"}=r,k=g.useMemo(()=>{let S=Qi(f,i);return S==null?null:{location:{pathname:S,search:d,hash:h,state:x,key:v},navigationType:s}},[i,f,d,h,x,v,s]);return k==null?null:g.createElement(Dn.Provider,{value:c},g.createElement(mo.Provider,{children:n,value:k}))}function lg(e){let{children:t,location:n}=e;return V0(Ha(t),n)}new Promise(()=>{});function Ha(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let l=[...t,s];if(r.type===g.Fragment){n.push.apply(n,Ha(r.props.children,l));return}r.type!==Je&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ha(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qa.apply(this,arguments)}function og(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,l;for(l=0;l<r.length;l++)s=r[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ag(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ig(e,t){return e.button===0&&(!t||t==="_self")&&!ag(e)}function Wa(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function ug(e,t){let n=Wa(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(l=>{n.append(s,l)})}),n}const cg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dg="6";try{window.__reactRouterVersion=dg}catch{}const fg="startTransition",Ic=em[fg];function hg(e){let{basename:t,children:n,future:r,window:s}=e,l=g.useRef();l.current==null&&(l.current=h0({window:s,v5Compat:!0}));let o=l.current,[a,i]=g.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=g.useCallback(d=>{c&&Ic?Ic(()=>i(d)):i(d)},[i,c]);return g.useLayoutEffect(()=>o.listen(f),[o,f]),g.useEffect(()=>ng(r),[r]),g.createElement(sg,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const mg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nc=g.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:l,replace:o,state:a,target:i,to:c,preventScrollReset:f,viewTransition:d}=t,h=og(t,cg),{basename:x}=g.useContext(Dn),v,k=!1;if(typeof c=="string"&&pg.test(c)&&(v=c,mg))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),N=Qi(w.pathname,x);w.origin===y.origin&&N!=null?c=N+w.search+w.hash:k=!0}catch{}let S=F0(c,{relative:s}),p=gg(c,{replace:o,state:a,target:i,preventScrollReset:f,relative:s,viewTransition:d});function m(y){r&&r(y),y.defaultPrevented||p(y)}return g.createElement("a",Qa({},h,{href:v||S,onClick:k||l?r:m,ref:n,target:i}))});var Ec;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ec||(Ec={}));var Cc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Cc||(Cc={}));function gg(e,t){let{target:n,replace:r,state:s,preventScrollReset:l,relative:o,viewTransition:a}=t===void 0?{}:t,i=Us(),c=Yt(),f=xh(e,{relative:o});return g.useCallback(d=>{if(ig(d,n)){d.preventDefault();let h=r!==void 0?r:Ql(c)===Ql(f);i(e,{replace:h,state:s,preventScrollReset:l,relative:o,viewTransition:a})}},[c,i,f,r,s,n,e,l,o,a])}function _v(e){let t=g.useRef(Wa(e)),n=g.useRef(!1),r=Yt(),s=g.useMemo(()=>ug(r.search,n.current?null:t.current),[r.search]),l=Us(),o=g.useCallback((a,i)=>{const c=Wa(typeof a=="function"?a(s):a);n.current=!0,l("?"+c,i)},[l,s]);return[s,o]}const yg={},Pc=e=>{let t;const n=new Set,r=(f,d)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const x=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,x))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(yg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,i);return i},vg=e=>e?Pc(e):Pc;var Ih={exports:{}},Nh={},Eh={exports:{}},Ch={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr=g;function xg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wg=typeof Object.is=="function"?Object.is:xg,Sg=Mr.useState,kg=Mr.useEffect,Ig=Mr.useLayoutEffect,Ng=Mr.useDebugValue;function Eg(e,t){var n=t(),r=Sg({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return Ig(function(){s.value=n,s.getSnapshot=t,Ho(s)&&l({inst:s})},[e,n,t]),kg(function(){return Ho(s)&&l({inst:s}),e(function(){Ho(s)&&l({inst:s})})},[e]),Ng(n),n}function Ho(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wg(e,n)}catch{return!0}}function Cg(e,t){return t()}var Pg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cg:Eg;Ch.useSyncExternalStore=Mr.useSyncExternalStore!==void 0?Mr.useSyncExternalStore:Pg;Eh.exports=Ch;var jg=Eh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=g,bg=jg;function Tg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ag=typeof Object.is=="function"?Object.is:Tg,Rg=bg.useSyncExternalStore,_g=po.useRef,Mg=po.useEffect,Lg=po.useMemo,zg=po.useDebugValue;Nh.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var l=_g(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=Lg(function(){function i(x){if(!c){if(c=!0,f=x,x=r(x),s!==void 0&&o.hasValue){var v=o.value;if(s(v,x))return d=v}return d=x}if(v=d,Ag(f,x))return v;var k=r(x);return s!==void 0&&s(v,k)?(f=x,v):(f=x,d=k)}var c=!1,f,d,h=n===void 0?null:n;return[function(){return i(t())},h===null?void 0:function(){return i(h())}]},[t,n,r,s]);var a=Rg(e,l[0],l[1]);return Mg(function(){o.hasValue=!0,o.value=a},[a]),zg(a),a};Ih.exports=Nh;var $g=Ih.exports;const Ug=ed($g),Ph={},{useDebugValue:Dg}=ei,{useSyncExternalStoreWithSelector:Og}=Ug;let jc=!1;const Fg=e=>e;function Bg(e,t=Fg,n){(Ph?"production":void 0)!=="production"&&n&&!jc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jc=!0);const r=Og(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Dg(r),r}const bc=e=>{(Ph?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?vg(e):e,n=(r,s)=>Bg(t,r,s);return Object.assign(n,t),n},rr=e=>e?bc(e):bc,Vg={};function Gg(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var l;const o=i=>i===null?null:JSON.parse(i,void 0),a=(l=n.getItem(s))!=null?l:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,l)=>n.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>n.removeItem(s)}}const bs=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return bs(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return bs(r)(n)}}}},Hg=(e,t)=>(n,r,s)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,p)=>({...p,...S}),...t},o=!1;const a=new Set,i=new Set;let c;try{c=l.getStorage()}catch{}if(!c)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...S)},r,s);const f=bs(l.serialize),d=()=>{const S=l.partialize({...r()});let p;const m=f({state:S,version:l.version}).then(y=>c.setItem(l.name,y)).catch(y=>{p=y});if(p)throw p;return m},h=s.setState;s.setState=(S,p)=>{h(S,p),d()};const x=e((...S)=>{n(...S),d()},r,s);let v;const k=()=>{var S;if(!c)return;o=!1,a.forEach(m=>m(r()));const p=((S=l.onRehydrateStorage)==null?void 0:S.call(l,r()))||void 0;return bs(c.getItem.bind(c))(l.name).then(m=>{if(m)return l.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==l.version){if(l.migrate)return l.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var y;return v=l.merge(m,(y=r())!=null?y:x),n(v,!0),d()}).then(()=>{p==null||p(v,void 0),o=!0,i.forEach(m=>m(v))}).catch(m=>{p==null||p(void 0,m)})};return s.persist={setOptions:S=>{l={...l,...S},S.getStorage&&(c=S.getStorage())},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(i.add(S),()=>{i.delete(S)})},k(),v||x},Qg=(e,t)=>(n,r,s)=>{let l={storage:Gg(()=>localStorage),partialize:k=>k,version:0,merge:(k,S)=>({...S,...k}),...t},o=!1;const a=new Set,i=new Set;let c=l.storage;if(!c)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},r,s);const f=()=>{const k=l.partialize({...r()});return c.setItem(l.name,{state:k,version:l.version})},d=s.setState;s.setState=(k,S)=>{d(k,S),f()};const h=e((...k)=>{n(...k),f()},r,s);s.getInitialState=()=>h;let x;const v=()=>{var k,S;if(!c)return;o=!1,a.forEach(m=>{var y;return m((y=r())!=null?y:h)});const p=((S=l.onRehydrateStorage)==null?void 0:S.call(l,(k=r())!=null?k:h))||void 0;return bs(c.getItem.bind(c))(l.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==l.version){if(l.migrate)return[!0,l.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var y;const[w,N]=m;if(x=l.merge(N,(y=r())!=null?y:h),n(x,!0),w)return f()}).then(()=>{p==null||p(x,void 0),x=r(),o=!0,i.forEach(m=>m(x))}).catch(m=>{p==null||p(void 0,m)})};return s.persist={setOptions:k=>{l={...l,...k},k.storage&&(c=k.storage)},clearStorage:()=>{c==null||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:k=>(a.add(k),()=>{a.delete(k)}),onFinishHydration:k=>(i.add(k),()=>{i.delete(k)})},l.skipHydration||v(),x||h},Wg=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Vg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Hg(e,t)):Qg(e,t),Ds=Wg,A={log:(...e)=>{},warn:(...e)=>{},error:(...e)=>{console.error(...e)},debug:(...e)=>{}};function jh(e){let t=null,n=null;function r(){return t?Promise.resolve(t):n||(n=new Promise((s,l)=>{const o=indexedDB.open(e,1);o.onupgradeneeded=()=>{const a=o.result;a.objectStoreNames.contains("zustand")||a.createObjectStore("zustand")},o.onsuccess=()=>{t=o.result,t.onclose=()=>{t=null,n=null},s(t)},o.onerror=()=>{n=null,l(o.error)}}),n)}return{getItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readonly").objectStore("zustand").get(s);c.onsuccess=()=>{const f=c.result;o(f?JSON.parse(f):null)},c.onerror=()=>{o(null)}})}catch{return null}},setItem:async(s,l)=>{const o=await r();return new Promise((a,i)=>{const d=o.transaction(["zustand"],"readwrite").objectStore("zustand").put(JSON.stringify(l),s);d.onsuccess=()=>{a()},d.onerror=()=>{i(d.error)}})},removeItem:async s=>{try{const l=await r();return new Promise(o=>{const c=l.transaction(["zustand"],"readwrite").objectStore("zustand").delete(s);c.onsuccess=()=>{o()},c.onerror=()=>{o()}})}catch{}}}}const Ts={get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){A.error("Failed to save to localStorage:",n)}},remove(e){try{localStorage.removeItem(e)}catch(t){A.error("Failed to remove from localStorage:",t)}},clear(){try{localStorage.clear()}catch(e){A.error("Failed to clear localStorage:",e)}}};function qg(){if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")}function Mv(e){const t=Math.floor(e/1e7),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function wl(e){return e&&e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2032\u2033]/g,"'")}function Lv(e){return e&&wl(e).replace(/'/g,"")}function zt(){return(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!("MSStream"in window)}function Yg(e){if(!e||e.trim()==="")return null;const t=e.trim().toLowerCase(),n=t.indexOf("_");return n===-1?{category:t,value:null}:{category:t.substring(0,n),value:t.substring(n+1)}}function Ze(e){if(e.length<=1)return[...e];const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}const Kg=jh("tunetuna-storage");function Tc(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function zv(e){const t=new Map;e.forEach(r=>{r.Grouping&&r.Grouping.forEach(s=>{const l=Yg(s);l&&(t.has(l.category)||t.set(l.category,new Set),l.value&&t.get(l.category).add(l.value))})});const n=[];for(const[r,s]of t)n.push({name:Tc(r),key:r,values:Array.from(s).map(l=>Tc(l)).sort(),isSingleValue:s.size===0});return n.sort((r,s)=>r.name.localeCompare(s.name))}const oe=rr()(Ds(e=>({artists:[],albums:[],songs:[],genres:[],genresLastUpdated:null,genresLastChecked:null,genreSongs:{},years:[],yearsLastUpdated:null,yearsLastChecked:null,lastSyncCompleted:null,recentlyAdded:[],recentlyPlayed:[],shufflePool:[],lastPoolUpdate:null,loading:{artists:!1,albums:!1,songs:!1,genres:!1,recentlyAdded:!1,recentlyPlayed:!1,feed:!1},feedTopSongs:[],feedNewReleases:[],feedLastUpdated:null,sortPreferences:{artists:"RecentlyAdded",albums:"RecentlyAdded",songs:"RecentlyAdded",playlists:"RecentlyAdded"},recentlyAccessedMoods:{},setArtists:t=>e({artists:t}),setAlbums:t=>e({albums:t}),setGenres:t=>e({genres:t}),setGenreSongs:(t,n)=>e(r=>({genreSongs:{...r.genreSongs,[t]:n}})),clearGenreSongs:()=>e({genreSongs:{}}),clearGenreSongsForGenre:t=>e(n=>{const r={...n.genreSongs};return delete r[t],{genreSongs:r}}),setYears:t=>e({years:t}),setRecentlyAdded:t=>e({recentlyAdded:t}),setRecentlyPlayed:t=>e({recentlyPlayed:t}),addToRecentlyPlayed:t=>e(n=>{const r=n.recentlyPlayed.filter(l=>l.Id!==t.Id);return{recentlyPlayed:[t,...r].slice(0,10)}}),setLoading:(t,n)=>e(r=>({loading:{...r.loading,[t]:n}})),setSortPreference:(t,n)=>e(r=>({sortPreferences:{...r.sortPreferences,[t]:n}})),setSongs:t=>e({songs:t}),setLastSyncCompleted:t=>e({lastSyncCompleted:t}),refreshShufflePool:()=>e(t=>{let r=t.songs;const s=Object.values(t.genreSongs).flat().length;if(t.songs.length===0&&s>0&&(r=Object.values(t.genreSongs).flat()),r.length===0)return{shufflePool:[]};const l=new Set(t.recentlyPlayed.slice(0,10).map(i=>i.Id));r=r.filter(i=>!l.has(i.Id));let o=r;if(o.length<30){const i=t.recentlyPlayed.slice(0,30-o.length);o=[...o,...i.map(c=>t.songs.find(f=>f.Id===c.Id)).filter(Boolean)]}return{shufflePool:Ze(o).slice(0,30),lastPoolUpdate:Date.now()}}),setFeedTopSongs:t=>e({feedTopSongs:t}),setFeedNewReleases:t=>e({feedNewReleases:t}),setFeedLastUpdated:t=>e({feedLastUpdated:t}),recordMoodAccess:t=>e(n=>({recentlyAccessedMoods:{...n.recentlyAccessedMoods,[t.toLowerCase()]:Date.now()}}))}),{name:"music-storage",storage:Kg,partialize:e=>({genres:e.genres,genresLastUpdated:e.genresLastUpdated,genresLastChecked:e.genresLastChecked,genreSongs:e.genreSongs,songs:e.songs,shufflePool:e.shufflePool,lastPoolUpdate:e.lastPoolUpdate,years:e.years,yearsLastUpdated:e.yearsLastUpdated,yearsLastChecked:e.yearsLastChecked,lastSyncCompleted:e.lastSyncCompleted,recentlyPlayed:e.recentlyPlayed,recentlyAccessedMoods:e.recentlyAccessedMoods,feedTopSongs:e.feedTopSongs,feedNewReleases:e.feedNewReleases,feedLastUpdated:e.feedLastUpdated})})),Ac=3e4,Rc=15e3,rl=2,_c=1e3,Mc=12*60*60*1e3,$v=6*60*60*1e3,It=200,Lc=1e3,zc=5e4,Xg=/^https?:\/\/100\.\d+\.\d+\.\d+/,bh="Tunetuna",Jg="Web",Th="1.0.0",We=rr()(Ds(e=>({serverUrl:"",setServerUrl:t=>e({serverUrl:t}),pageVisibility:{artists:!0,albums:!0,songs:!0,genres:!0,playlists:!1,stats:!0},setPageVisibility:t=>e(n=>({pageVisibility:{...n.pageVisibility,...t}})),accentColor:"blue",setAccentColor:t=>e({accentColor:t}),showQueueRecommendations:!0,setShowQueueRecommendations:t=>e({showQueueRecommendations:t}),recommendationsQuality:"good",setRecommendationsQuality:t=>e({recommendationsQuality:t}),statsTrackingEnabled:!0,setStatsTrackingEnabled:t=>e({statsTrackingEnabled:t}),feedCountry:"gb",setFeedCountry:t=>e({feedCountry:t}),showMoodCards:!0,setShowMoodCards:t=>e({showMoodCards:t}),showTop10:!0,setShowTop10:t=>e({showTop10:t}),showNewReleases:!1,setShowNewReleases:t=>e({showNewReleases:t}),showRecentlyPlayed:!0,setShowRecentlyPlayed:t=>e({showRecentlyPlayed:t}),muspyRssUrl:"",setMuspyRssUrl:t=>e({muspyRssUrl:t}),localServerUrl:"",setLocalServerUrl:t=>e({localServerUrl:t})}),{name:"settings-storage"})),Zg=Object.freeze(Object.defineProperty({__proto__:null,useSettingsStore:We},Symbol.toStringTag,{value:"Module"})),Oe=rr(e=>({toasts:[],addToast:(t,n="success",r=3e3)=>{const s=`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,l={id:s,message:t,type:n,duration:r};e(o=>({toasts:[...o.toasts,l]})),r>0&&setTimeout(()=>{e(o=>({toasts:o.toasts.filter(a=>a.id!==s)}))},r)},removeToast:t=>{e(n=>({toasts:n.toasts.filter(r=>r.id!==t)}))}})),Vt="/api/stats",e1=jh("tunetuna-stats-storage");async function t1(e,t){const n=`${e}::${t}`,r=new TextEncoder,s=await crypto.subtle.digest("SHA-256",r.encode(n));return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}function n1(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function r1(e,t){var n,r;return{ts:Date.now(),songId:e.Id,songName:e.Name||"Unknown",artistIds:((n=e.ArtistItems)==null?void 0:n.map(s=>s.Id))||[],artistNames:((r=e.ArtistItems)==null?void 0:r.map(s=>s.Name||"Unknown"))||[e.AlbumArtist||"Unknown"],albumId:e.AlbumId||"",albumName:e.Album||"Unknown",genres:e.Genres||[],year:e.ProductionYear||null,durationMs:t,fullDurationMs:e.RunTimeTicks?e.RunTimeTicks/1e4:0}}let Qo=!1;const He=rr()(Ds((e,t)=>({pendingEvents:[],lastSyncedAt:null,cachedEvents:[],cacheRange:null,currentPlay:null,cachedStatsKey:null,cachedStatsToken:null,metadataVersion:0,oldestEventTs:null,startPlay:n=>{e({currentPlay:{track:n,startedAt:Date.now()}})},recordPlay:(n,r)=>{if(!We.getState().statsTrackingEnabled)return;const{pendingEvents:s}=t(),l=n.RunTimeTicks?n.RunTimeTicks/1e4:0,o=l>0&&l<6e4;if(!(r>=6e4||o&&r>=l*.8))return;const i=r1(n,r),c=[...s,i];e({pendingEvents:c,currentPlay:null}),t().syncToServer()},syncToServer:async()=>{if(!Qo){Qo=!0;try{const{pendingEvents:n}=t();if(n.length===0)return;const{serverUrl:r,userId:s}=_e.getState();if(!r||!s)return;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return;const a=n.map(i=>({...i,durationMs:i.durationMs??i.fullDurationMs??6e4}));try{const i=await fetch(`${Vt}/${l}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":o},body:JSON.stringify({_token:o,events:a})});i.ok?e(c=>({pendingEvents:c.pendingEvents.filter(f=>!a.some(d=>d.ts===f.ts&&d.songId===f.songId)),lastSyncedAt:Date.now(),cacheRange:null})):console.error("[Stats] Sync failed:",i.status,i.statusText)}catch(i){console.error("[Stats] Sync error:",i)}}finally{Qo=!1}}},updateStatsKey:async()=>{const{serverUrl:n,userId:r}=_e.getState();if(!n||!r){e({cachedStatsKey:null,cachedStatsToken:null});return}const{cachedStatsToken:s}=t(),l=s||n1(),o=await t1(n,r);e({cachedStatsKey:o,cachedStatsToken:l})},fetchEvents:async(n,r)=>{const{cacheRange:s,cachedEvents:l,pendingEvents:o}=t(),{serverUrl:a,userId:i}=_e.getState();if(!a||!i)return[];if(s&&s.from<=n&&s.to>=r){const d=l.filter(x=>x.ts>=n&&x.ts<=r),h=o.filter(x=>x.ts>=n&&x.ts<=r);return[...d,...h].sort((x,v)=>x.ts-v.ts)}await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(!c||!f)return[];try{const d=await fetch(`${Vt}/${c}/events?from=${n}&to=${r}`,{headers:{"X-Stats-Token":f}});if(!d.ok)return[];const x=(await d.json()).events||[];e({cachedEvents:x,cacheRange:{from:n,to:r}});const v=o.filter(k=>k.ts>=n&&k.ts<=r);return[...x,...v].sort((k,S)=>k.ts-S.ts)}catch{return[]}},clearCache:()=>{e({cachedEvents:[],cacheRange:null})},updateEventMetadata:(n,r,s)=>{const{cachedEvents:l,pendingEvents:o}=t(),a=i=>{let c=!1;return(n==="song"&&i.songId===r||n==="album"&&i.albumId===r||n==="artist"&&i.artistIds.includes(r))&&(c=!0),c?{...i,...s.songName!==void 0&&{songName:s.songName},...s.artistNames!==void 0&&{artistNames:s.artistNames},...s.albumName!==void 0&&{albumName:s.albumName},...s.genres!==void 0&&{genres:s.genres},...s.year!==void 0&&{year:s.year}}:i};e(i=>({cachedEvents:l.map(a),pendingEvents:o.map(a),metadataVersion:i.metadataVersion+1})),(async()=>{const{serverUrl:i,userId:c}=_e.getState();if(!i||!c)return;await t().updateStatsKey();const{cachedStatsKey:f,cachedStatsToken:d}=t();if(!(!f||!d))try{await fetch(`${Vt}/${f}/events/metadata`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Stats-Token":d},body:JSON.stringify({itemType:n,itemId:r,metadata:s})})}catch{}})()},exportStats:async()=>{const{pendingEvents:n}=t(),{serverUrl:r,userId:s}=_e.getState();let l=[...n];if(r&&s){await t().updateStatsKey();const{cachedStatsKey:c,cachedStatsToken:f}=t();if(c&&f)try{const d=await fetch(`${Vt}/${c}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":f}});if(d.ok){const x=(await d.json()).events||[],v=new Set(l.map(k=>`${k.ts}-${k.songId}`));for(const k of x){const S=`${k.ts}-${k.songId}`;v.has(S)||l.push(k)}}}catch{}}l.sort((c,f)=>c.ts-f.ts);const o=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download=`tunetuna-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},clearLocalStats:()=>{e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null})},clearAllStats:async()=>{const{serverUrl:n,userId:r}=_e.getState();if(e({pendingEvents:[],cachedEvents:[],cacheRange:null,lastSyncedAt:null}),n&&r){await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l}=t();if(s&&l)try{return(await fetch(`${Vt}/${s}/events`,{method:"DELETE",headers:{"X-Stats-Token":l}})).ok}catch{return!1}}return!0},importStats:async n=>{const{serverUrl:r,userId:s}=_e.getState();if(!r||!s)throw new Error("Not authenticated");const l=await n.text();let o;try{o=JSON.parse(l)}catch{throw new Error("Invalid JSON file")}if(!Array.isArray(o))throw new Error("File must contain an array of events");const a=o.filter(v=>typeof v.ts=="number"&&typeof v.songId=="string"&&typeof v.songName=="string"&&Array.isArray(v.artistIds)&&Array.isArray(v.artistNames)&&typeof v.albumId=="string"&&typeof v.albumName=="string"&&Array.isArray(v.genres)&&typeof v.fullDurationMs=="number");if(a.length===0)throw new Error("No valid events found in file");await t().updateStatsKey();const{cachedStatsKey:i,cachedStatsToken:c}=t();if(!i||!c)throw new Error("Failed to initialize stats authentication");let f=new Set;try{const v=await fetch(`${Vt}/${i}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":c}});if(v.ok){const S=(await v.json()).events||[];f=new Set(S.map(p=>`${p.ts}-${p.songId}`))}}catch{}const{pendingEvents:d}=t();for(const v of d)f.add(`${v.ts}-${v.songId}`);const h=a.filter(v=>!f.has(`${v.ts}-${v.songId}`));if(h.length===0)return{imported:0,skipped:a.length};if(!(await fetch(`${Vt}/${i}/events`,{method:"POST",headers:{"Content-Type":"application/json","X-Stats-Token":c},body:JSON.stringify(h)})).ok)throw new Error("Failed to upload events");return e({cacheRange:null}),{imported:h.length,skipped:a.length-h.length}},hasStats:async()=>{var a;const{pendingEvents:n}=t();if(n.length>0)return!0;const{serverUrl:r,userId:s}=_e.getState();if(!r||!s)return!1;await t().updateStatsKey();const{cachedStatsKey:l,cachedStatsToken:o}=t();if(!l||!o)return!1;try{const i=await fetch(`${Vt}/${l}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":o}});if(i.ok)return(((a=(await i.json()).events)==null?void 0:a.length)||0)>0}catch{}return!1},initializeOldestTs:async()=>{const{serverUrl:n,userId:r}=_e.getState();if(!n||!r)return;await t().updateStatsKey();const{cachedStatsKey:s,cachedStatsToken:l,pendingEvents:o}=t();if(!(!s||!l))try{const a=await fetch(`${Vt}/${s}/events?from=0&to=${Date.now()}`,{headers:{"X-Stats-Token":l}});if(a.ok){const c=(await a.json()).events||[];o.length>0&&await t().syncToServer();const f=[...c,...o];if(f.length>0){const d=Math.min(...f.map(h=>h.ts));e({oldestEventTs:d})}}}catch{}}}),{name:"stats-storage",storage:e1,partialize:e=>({pendingEvents:e.pendingEvents,lastSyncedAt:e.lastSyncedAt,cachedStatsToken:e.cachedStatsToken,oldestEventTs:e.oldestEventTs})}));let $c=!1,Wo=null;function Uc(){const{pendingEvents:e,cachedStatsKey:t,cachedStatsToken:n}=He.getState();if(e.length>0&&t&&n){const r={_token:n,events:e},s=new Blob([JSON.stringify(r)],{type:"application/json"});return navigator.sendBeacon(`${Vt}/${t}/events`,s),!0}return!1}function s1(){$c||typeof document>"u"||($c=!0,document.addEventListener("visibilitychange",()=>{const{pendingEvents:e}=He.getState();document.visibilityState==="hidden"?e.length>0&&Uc():document.visibilityState==="visible"&&e.length>0&&He.getState().syncToServer()}),window.addEventListener("beforeunload",()=>{Uc()}),setTimeout(()=>{Wo&&Wo(),Wo=_e.subscribe((n,r)=>{(n.serverUrl!==r.serverUrl||n.userId!==r.userId)&&(He.getState().updateStatsKey(),He.getState().initializeOldestTs())});const{serverUrl:e,userId:t}=_e.getState();e&&t&&(He.getState().updateStatsKey(),He.getState().initializeOldestTs())},0))}s1();const Dc=100,us=new Set,Wl=new Map,ql=new Set;let ct=null;function l1(){if(us.size>Dc){const e=Array.from(us);e.slice(0,e.length-Dc).forEach(n=>us.delete(n))}}function qa(){us.clear();for(const e of Wl.values())clearTimeout(e);Wl.clear();for(const e of ql)clearTimeout(e);ql.clear(),ct&&(clearTimeout(ct),ct=null)}function qo(e,t,n=5e3){const r=setTimeout(async()=>{const s=t();if((s==null?void 0:s.Id)===e)try{await $.markItemAsPlayed(e),us.add(e),l1();const l=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:e}})),ql.delete(l)},4e3);ql.add(l)}catch{}Wl.delete(e)},n);Wl.set(e,r)}const Z=rr()(Ds((e,t)=>({songs:[],currentIndex:-1,previousIndex:-1,standardOrder:[],shuffleOrder:[],isPlaying:!1,currentTime:0,duration:0,volume:1,shuffle:!1,repeat:"off",audioElement:null,nextAudioElement:null,nextTrackId:null,isFetchingRecommendations:!1,isLoadingMoreSongs:!1,shuffleHasMoreSongs:!1,lastPlayedTrack:null,isShuffleAllActive:!1,isShuffleGenreActive:!1,manuallyCleared:!1,hasRecordedCurrentTrackStats:!1,isQueueSidebarOpen:!1,setAudioElement:n=>{e({audioElement:n}),n&&(n.volume=t().volume)},setNextAudioElement:n=>{e({nextAudioElement:n}),n&&(n.volume=t().volume)},preBufferNextTrack:()=>{const{nextAudioElement:n,currentIndex:r,songs:s,repeat:l,nextTrackId:o}=t();if(!n||l==="one")return;let a=r+1;if(a>=s.length)if(l==="all")a=0;else{o&&(e({nextTrackId:null}),n.removeAttribute("src"),n.load());return}const i=s[a];if(!i||o===i.Id)return;const c=$.serverBaseUrl;if(!c)return;const f=`${c}/Audio/${i.Id}/stream?static=true`;n.src=f,n.load(),e({nextTrackId:i.Id})},swapToPreBuffered:()=>{const{audioElement:n,nextAudioElement:r,nextTrackId:s,currentIndex:l,songs:o,repeat:a}=t();if(!r||!s)return;let i=l+1;if(i>=o.length)if(a==="all")i=0;else return;const c=o[i];if(!c||c.Id!==s){t().cancelPreBuffer();return}const f=t();if(!f.hasRecordedCurrentTrackStats&&f.currentIndex>=0&&f.currentIndex<f.songs.length){const x=f.songs[f.currentIndex];He.getState().recordPlay(x,f.currentTime*1e3)}const d=l>=0?o[l]:null;if(zt()){r.removeAttribute("src"),r.load();const x=$.serverBaseUrl;if(!x||!n)return;const v=`${x}/Audio/${c.Id}/stream?static=true`;e({nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:0,isPlaying:!0}),n.src=v,n.load(),n.play().then(()=>{qo(c.Id,()=>t().songs[t().currentIndex]||null),oe.getState().addToRecentlyPlayed(c),He.getState().startPlay(c)}).catch(k=>{A.error("[iOS Gapless] Playback error:",k),e({isPlaying:!1})});return}n&&(n.pause(),n.removeAttribute("src"),n.load());const h=r.duration&&!isNaN(r.duration)?r.duration:0;e({audioElement:r,nextAudioElement:n,nextTrackId:null,previousIndex:l,currentIndex:i,lastPlayedTrack:d,hasRecordedCurrentTrackStats:!1,currentTime:0,duration:h,isPlaying:!0}),r.play().then(()=>{qo(c.Id,()=>t().songs[t().currentIndex]||null),oe.getState().addToRecentlyPlayed(c),He.getState().startPlay(c)}).catch(x=>{A.error("[Gapless] Playback error on swapped element:",x),e({isPlaying:!1})})},cancelPreBuffer:()=>{const{nextAudioElement:n}=t();n&&(n.removeAttribute("src"),n.load()),e({nextTrackId:null})},setIsFetchingRecommendations:n=>{e({isFetchingRecommendations:n})},setIsLoadingMoreSongs:n=>{e({isLoadingMoreSongs:n})},setCurrentTime:n=>{const{currentIndex:r,songs:s,hasRecordedCurrentTrackStats:l}=t();if(e({currentTime:n}),n>=60&&!l&&r>=0&&r<s.length){const o=s[r];He.getState().recordPlay(o,n*1e3),e({hasRecordedCurrentTrackStats:!0})}},setDuration:n=>{e({duration:n})},setVolume:n=>{e({volume:n});const r=t().audioElement;r&&(r.volume=n);const s=t().nextAudioElement;s&&(s.volume=n)},clearQueue:()=>{t().cancelPreBuffer(),ct&&(clearTimeout(ct),ct=null),e(n=>{const r=n.currentIndex>=0?[n.songs[n.currentIndex]]:[];return{songs:r,currentIndex:r.length>0?0:-1,previousIndex:-1,standardOrder:r.map(s=>s.Id),shuffleOrder:r.map(s=>s.Id),manuallyCleared:!0}})},addToQueue:(n,r=!1,s="user")=>{t().cancelPreBuffer(),e(l=>{const o=l.currentIndex>=0?l.songs[l.currentIndex]:null,a=n.map(v=>({...v,source:s}));let i;const c=a;if(r){const v=l.shuffle?Ze([...a]):a,k=l.currentIndex+1,S=l.songs.slice(0,k),p=l.songs.slice(k);i=[...S,...v,...p]}else if(s==="recommendation")i=[...l.songs,...c];else{const v=l.songs.findIndex((k,S)=>S>l.currentIndex&&k.source==="recommendation");v!==-1?i=[...l.songs.slice(0,v),...c,...l.songs.slice(v)]:i=[...l.songs,...c]}let f=l.currentIndex;if(l.currentIndex>=0&&o){const v=i.findIndex(k=>k.Id===o.Id);v!==-1?f=v:A.error("[addToQueue] CRITICAL: Could not find current song in new queue!")}let d=i;if(i.length>1e3){const v=i.slice(0,f),k=i.slice(f+1),S=v.slice(-5),p=k,m=1e3-S.length-(o?1:0)-p.length,y=v.slice(-Math.max(0,m));d=[...y,...o?[o]:[],...p],f=o?y.length:-1}const x=d.filter(v=>v.source==="user").map(v=>v.Id);return{songs:d,currentIndex:f,standardOrder:x,shuffleOrder:x,manuallyCleared:!1}})},addToQueueWithToast:n=>{t().addToQueue(n,!1,"user");const r=n.length,s=r===1?"Added to queue":`${r} songs added to queue`;Oe.getState().addToast(s,"success",2e3)},removeFromQueue:n=>{t().cancelPreBuffer(),e(r=>{if(n<0||n>=r.songs.length)return r;const s=r.songs[n],l=r.songs.filter((f,d)=>d!==n);let o=r.standardOrder.filter(f=>f!==s.Id),a=r.shuffleOrder.filter(f=>f!==s.Id),i=r.currentIndex,c=r.previousIndex;return n<r.currentIndex?i=r.currentIndex-1:n===r.currentIndex&&(i=-1),n<r.previousIndex?c=r.previousIndex-1:n===r.previousIndex&&(c=-1),{songs:l,currentIndex:i,previousIndex:c,standardOrder:o,shuffleOrder:a}})},reorderQueue:(n,r)=>{t().cancelPreBuffer(),e(s=>{if(n<0||r<0||n>=s.songs.length||r>=s.songs.length||n===r)return s;const l=s.songs[n],o=s.songs[r];if(l.source!==o.source)return s;const a=[...s.songs],[i]=a.splice(n,1);if(a.splice(r,0,i),l.source==="user"){const f=s.shuffle?"shuffleOrder":"standardOrder",d=s[f],h=d.indexOf(l.Id);if(h>=0){const x=[...d];x.splice(h,1);const k=a.slice(0,r+1).filter(p=>p.source==="user").length-1;x.splice(k,0,l.Id);const S=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,[f]:x,currentIndex:S,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}}}const c=r===s.currentIndex||n===s.currentIndex?r:s.currentIndex;return{songs:a,currentIndex:c,previousIndex:r===s.previousIndex||n===s.previousIndex?r:s.previousIndex}})},play:()=>{const{audioElement:n,currentIndex:r,songs:s,currentTime:l}=t();if(n&&r>=0&&r<s.length){const o=s[r],a=$.serverBaseUrl,i=a?`${a}/Audio/${o.Id}/stream?static=true`:"";n.src!==i?(n.src=i,n.load()):l===0&&n.currentTime>.5&&(n.currentTime=0,n.duration&&!isNaN(n.duration)&&e({duration:n.duration})),n.play().then(()=>{e({isPlaying:!0,hasRecordedCurrentTrackStats:!1}),qo(o.Id,()=>t().songs[t().currentIndex]||null),oe.getState().addToRecentlyPlayed(o),He.getState().startPlay(o)}).catch(c=>{A.error("Playback error:",c),e({isPlaying:!1})})}},pause:()=>{const n=t().audioElement;n&&(n.pause(),e({isPlaying:!1}))},togglePlayPause:()=>{const{isPlaying:n,play:r,pause:s}=t();n?s():r()},next:()=>{const n=t();if(A.debug("[PlayerStore] next() called",{currentIndex:n.currentIndex,queueLength:n.songs.length}),n.songs.length===0)return;if(n.repeat==="one"&&n.currentIndex>=0){t().seek(0),t().play();return}let r=n.currentIndex+1;if(r>=n.songs.length)if(n.repeat==="all")r=0;else{if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];He.getState().recordPlay(o,n.currentTime*1e3)}t().pause();return}const s=n.songs[r];if(n.nextTrackId&&s&&n.nextTrackId===s.Id){t().swapToPreBuffered();return}if(!n.hasRecordedCurrentTrackStats&&n.currentIndex>=0&&n.currentIndex<n.songs.length){const o=n.songs[n.currentIndex];He.getState().recordPlay(o,n.currentTime*1e3)}const l=n.currentIndex>=0?n.songs[n.currentIndex]:null;e({previousIndex:n.currentIndex,currentIndex:r,lastPlayedTrack:l}),t().play()},previous:()=>{t().cancelPreBuffer(),e(n=>{if(n.songs.length===0)return n;let r=n.currentIndex,s=n.currentIndex;if(n.currentIndex>0)r=n.currentIndex-1;else if(n.repeat==="all")r=n.songs.length-1;else return n;return{currentIndex:r,previousIndex:s}}),t().play()},seek:n=>{const r=t().audioElement;r&&(r.currentTime=n,e({currentTime:n})),window.dispatchEvent(new CustomEvent("playerSeek"))},toggleShuffle:()=>{t().cancelPreBuffer(),e(n=>{const r=!n.shuffle;if(r){const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,o=n.songs.slice(n.currentIndex+1).filter(h=>h.source==="user"),a=n.songs.filter(h=>h.source==="recommendation"),i=Ze(o.map(h=>h.Id)),c=i.map(h=>o.find(x=>x.Id===h)).filter(Boolean),f=[...s,...l?[l]:[],...c,...a],d=[...n.standardOrder.slice(0,n.currentIndex+1),...i];return{shuffle:r,shuffleOrder:d,songs:f}}else{const s=n.songs.slice(0,n.currentIndex),l=n.currentIndex>=0?n.songs[n.currentIndex]:null,a=n.standardOrder.slice(n.currentIndex+1).map(f=>n.songs.find(d=>d.Id===f&&d.source==="user")).filter(Boolean),i=n.songs.filter(f=>f.source==="recommendation"),c=[...s,...l?[l]:[],...a,...i];return{shuffle:r,songs:c}}})},toggleRepeat:()=>{t().cancelPreBuffer(),e(n=>({repeat:n.repeat==="off"?"all":n.repeat==="all"?"one":"off"}))},playTrack:(n,r)=>{t().cancelPreBuffer();let s,l;r?(s=r,l=r.findIndex(a=>a.Id===n.Id),l===-1&&(s=[n,...r.filter(a=>a.Id!==n.Id)],l=0)):(s=[n],l=0);const o=s.map(a=>({...a,source:"user"}));e({songs:o,standardOrder:o.map(a=>a.Id),shuffleOrder:o.map(a=>a.Id),currentIndex:l,previousIndex:l>0?l-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playAlbum:(n,r=0)=>{t().cancelPreBuffer();const s=n.map(l=>({...l,source:"user"}));e({songs:s,standardOrder:s.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:r,previousIndex:r>0?r-1:-1,shuffle:!1,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},playNext:n=>{t().addToQueue(n,!0);const r=n.length,s=r===1?"Playing next":`${r} songs playing next`;Oe.getState().addToast(s,"success",2e3)},shuffleArtist:n=>{t().cancelPreBuffer();const r=n.map(l=>({...l,source:"user"})),s=Ze(r);e({songs:s,standardOrder:r.map(l=>l.Id),shuffleOrder:s.map(l=>l.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,manuallyCleared:!1}),t().play()},shuffleAllSongs:async()=>{t().clearQueue();const{setShowQueueRecommendations:n}=We.getState();n(!1);const s=typeof window<"u"&&window.innerWidth<768?400:800,l=oe.getState();let o=[];if(l.shufflePool.length>=1){const d=Math.min(5,l.shufflePool.length);o=l.shufflePool.slice(0,d);const h=l.shufflePool.slice(d),x=l.songs,v=new Set(l.recentlyPlayed.slice(0,10).map(m=>m.Id)),k=x.filter(m=>!v.has(m.Id)),S=Ze(k).slice(0,d),p=[...h,...S];oe.setState({shufflePool:p,lastPoolUpdate:Date.now()})}else{let d=l.songs;if(!d||d.length===0)try{d=(await $.getSongs({limit:Math.max(50,s),sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]}catch(h){A.error("Failed to fetch songs for shuffle all:",h);return}o=Ze(d).slice(0,5),d.filter(h=>!o.some(x=>x.Id===h.Id)),oe.setState({songs:d,shufflePool:Ze(d).slice(0,30),lastPoolUpdate:Date.now()})}const a=o.map(d=>({...d,source:"user"})),i=o.length,f=l.songs.length+Object.values(l.genreSongs).flat().length>o.length;e({songs:a,standardOrder:a.map(d=>d.Id),shuffleOrder:a.map(d=>d.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:f,manuallyCleared:!0}),t().play(),ct&&clearTimeout(ct),ct=setTimeout(async()=>{ct=null;try{const d=t();if(!d.shuffle||d.songs.length!==i)return;let h=l.songs;(!h||h.length===0)&&(h=(await $.getSongs({limit:s,sortBy:["SortName"],sortOrder:"Ascending"})).Items||[]);const x=Object.values(l.genreSongs).flat(),v=[...h,...x],k=new Map;v.forEach(y=>k.set(y.Id,y));const S=Array.from(k.values()),p=new Set(a.map(y=>y.Id)),m=S.filter(y=>!p.has(y.Id));if(m.length>0){const y=Math.min(s-i,m.length),N=Ze(m).slice(0,y).map(E=>({...E,source:"user"}));e(E=>{const I=new Set(a.map(H=>H.Id)),C=E.songs.filter(H=>!I.has(H.Id)&&H.source==="user"),P=[...a,...C,...N];let b=E.currentIndex;if(C.length>0&&E.currentIndex>=a.length){const H=E.songs[E.currentIndex];H&&(b=P.findIndex(Y=>Y.Id===H.Id))}return{songs:P,currentIndex:b>=0?b:E.currentIndex,standardOrder:P.map(H=>H.Id),shuffleOrder:P.map(H=>H.Id),shuffleHasMoreSongs:m.length>y,manuallyCleared:!1}}),oe.getState().refreshShufflePool()}}catch(d){A.error("Failed to expand shuffle queue:",d)}},100)},shuffleGenreSongs:async(n,r)=>{t().clearQueue();const{setShowQueueRecommendations:s}=We.getState();s(!1);const o=typeof window<"u"&&window.innerWidth<768?400:800,a=oe.getState().genreSongs[n];if(!a||a.length===0)return;const i=Ze(a).slice(0,5),c=a.filter(h=>!i.some(x=>x.Id===h.Id)),f=i.map(h=>({...h,source:"user"})),d=a.length>5;e({songs:f,standardOrder:f.map(h=>h.Id),shuffleOrder:f.map(h=>h.Id),currentIndex:0,previousIndex:-1,shuffle:!0,isPlaying:!1,currentTime:0,duration:0,isLoadingMoreSongs:!1,shuffleHasMoreSongs:d,manuallyCleared:!0}),t().play(),ct&&clearTimeout(ct),ct=setTimeout(async()=>{ct=null;try{const h=t();if(!h.shuffle||h.songs.length!==5)return;if(c.length>0){const x=Math.min(o-5,c.length),k=Ze(c).slice(0,x).map(S=>({...S,source:"user"}));e(S=>{const p=new Set(f.map(N=>N.Id)),m=S.songs.filter(N=>!p.has(N.Id)&&N.source==="user"),y=[...f,...m,...k];let w=S.currentIndex;if(m.length>0&&S.currentIndex>=f.length){const N=S.songs[S.currentIndex];N&&(w=y.findIndex(E=>E.Id===N.Id))}return{songs:y,currentIndex:w>=0?w:S.currentIndex,standardOrder:y.map(N=>N.Id),shuffleOrder:y.map(N=>N.Id),shuffleHasMoreSongs:c.length>x,manuallyCleared:!1}})}}catch(h){A.error("Failed to expand genre shuffle queue:",h)}},100)},skipToTrack:n=>{t().cancelPreBuffer();const{songs:r,currentIndex:s}=t();if(n<0||n>=r.length)return;const l=s>=0?r[s]:null;e({previousIndex:s>=0?s:-1,currentIndex:n,lastPlayedTrack:l,currentTime:0}),t().play()},refreshCurrentTrack:async()=>{const{currentIndex:n,songs:r}=t();if(n<0||n>=r.length)return;const s=r[n];try{const l=await $.getSongById(s.Id);l&&e(o=>{const a=[...o.songs];return a[o.currentIndex]={...a[o.currentIndex],...l},{songs:a}})}catch(l){A.error("Failed to refresh current track:",l)}},toggleQueueSidebar:()=>{e(n=>({isQueueSidebarOpen:!n.isQueueSidebarOpen}))}}),{name:"player-storage",partialize:e=>({songs:e.songs,currentIndex:e.currentIndex,previousIndex:e.previousIndex,standardOrder:e.standardOrder,shuffleOrder:e.shuffleOrder,volume:e.volume,shuffle:e.shuffle,repeat:e.repeat,lastPlayedTrack:e.lastPlayedTrack,isShuffleAllActive:e.isShuffleAllActive,isShuffleGenreActive:e.isShuffleGenreActive,manuallyCleared:e.manuallyCleared,isQueueSidebarOpen:e.isQueueSidebarOpen}),onRehydrateStorage:e=>{e&&(e.songs.length===0?(e.currentIndex=-1,e.previousIndex=-1,e.standardOrder=[],e.shuffleOrder=[]):e.currentIndex>=e.songs.length?(e.currentIndex=0,e.previousIndex=-1):e.currentIndex<-1&&(e.currentIndex=-1,e.previousIndex=-1),e.isPlaying=!1,e.currentTime=0,e.duration=0,e.audioElement=null,e.nextAudioElement=null,e.nextTrackId=null,e.isFetchingRecommendations=!1,e.isShuffleAllActive=!1,e.isShuffleGenreActive=!1)}}));class o1{constructor(){kt(this,"baseUrl","");kt(this,"accessToken","");kt(this,"userId","");kt(this,"genresCache",null);kt(this,"isPreloading",!1);kt(this,"pendingRequests",new Map)}get serverBaseUrl(){return this.baseUrl}setCredentials(t,n,r){this.baseUrl=t.replace(/\/$/,""),this.accessToken=n,this.userId=r,this.genresCache=null}clearGenresCache(){this.genresCache=null}getDeviceId(){let t=Ts.get("deviceId");return t||(t=qg(),Ts.set("deviceId",t)),t}getEmbyAuthHeader(){return`MediaBrowser Client="${bh}", Device="${Jg}", DeviceId="${this.getDeviceId()}", Version="${Th}"`}getVpnWarning(t){return Xg.test(t)?`
  VPN/Tailscale IP detected (100.x.x.x). Your phone may not be on the same VPN network.
   Try using your local network IP instead (e.g., http://192.168.1.x:8096)
`:""}getHeaders(){return{Authorization:`MediaBrowser Token="${this.accessToken}"`,"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()}}async request(t,n={}){const r=`${this.baseUrl}${t}`,l=(n.method||"GET")==="GET",o=l?r:"";if(l&&this.pendingRequests.has(o))return this.pendingRequests.get(o);const a=this.executeRequest(r,n);return l&&(this.pendingRequests.set(o,a),a.finally(()=>{this.pendingRequests.delete(o)})),a}async executeRequest(t,n={}){let r=null;for(let s=0;s<=rl;s++){const l=new AbortController,o=setTimeout(()=>l.abort(),Rc);try{const a=await fetch(t,{...n,signal:l.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(o),!a.ok)throw a.status===401?(qa(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${a.statusText}`);return a.json()}catch(a){if(clearTimeout(o),r=a instanceof Error?a:new Error(String(a)),r.message.includes("Unauthorized")||r.name==="AbortError")break;s<rl&&await new Promise(i=>setTimeout(i,_c*(s+1)))}}throw r||new Error("Request failed")}async requestVoid(t,n={}){const r=`${this.baseUrl}${t}`;let s=null;for(let l=0;l<=rl;l++){const o=new AbortController,a=setTimeout(()=>o.abort(),Rc);try{const i=await fetch(r,{...n,signal:o.signal,headers:{...this.getHeaders(),...n.headers}});if(clearTimeout(a),!i.ok)throw i.status===401?(qa(),new Error("Unauthorized - please login again")):new Error(`API request failed: ${i.statusText}`);return}catch(i){if(clearTimeout(a),s=i instanceof Error?i:new Error(String(i)),s.message.includes("Unauthorized")||s.name==="AbortError")break;l<rl&&await new Promise(c=>setTimeout(c,_c*(l+1)))}}throw s||new Error("Request failed")}async authenticate(t,n,r){const s=t.replace(/\/$/,"")+"/Users/authenticatebyname",l=new AbortController,o=setTimeout(()=>{l.abort()},Ac);let a;try{a=await fetch(s,{method:"POST",signal:l.signal,headers:{"Content-Type":"application/json","X-Emby-Authorization":this.getEmbyAuthHeader()},body:JSON.stringify({Username:n,Pw:r})}),clearTimeout(o)}catch(c){if(clearTimeout(o),c instanceof Error&&c.name==="AbortError"){const f=this.getVpnWarning(t);throw new Error(`Request timeout - server did not respond within ${Ac/1e3} seconds.

Possible issues:
- Server URL may be incorrect: ${s}
- Server may be down or unreachable${f}- CORS may be blocking the request (check browser console/Network tab)
- Network connectivity issues

If this was working earlier, check:
- Is the Jellyfin server still running?
- Are there any CORS errors in the browser console?
- Try accessing ${s} directly in your browser
- If using VPN/Tailscale IP, ensure your phone is on the same network`)}if(c instanceof TypeError){const f=c.message.toLowerCase();if(f.includes("failed to fetch")||f.includes("networkerror")){const d=this.getVpnWarning(t);throw new Error(`Network error - unable to reach server at ${s}

Possible issues:
- CORS is blocking the request (check Jellyfin server CORS settings)${d}- Server is not accessible from this network
- Invalid server URL

Check browser console for detailed error information.`)}throw new Error(`Network error: ${c.message}`)}throw c}if(!a.ok){const c=await a.text().catch(()=>"");throw new Error(c||`Authentication failed (${a.status})`)}const i=await a.json();return this.setCredentials(t,i.AccessToken,i.User.Id),i}getImageUrl(t,n="Primary",r){if(!this.baseUrl||!t)return"";const s=r??300,a=[`quality=${s<=128?75:90}`,`fillHeight=${s}`,`fillWidth=${s}`];return r&&a.push(`maxWidth=${r}`),`${this.baseUrl}/Items/${t}/Images/${n}?${a.join("&")}`}getArtistImageUrl(t,n){return this.getImageUrl(t,"Primary",n)}getArtistBackdropUrl(t,n){return this.getImageUrl(t,"Backdrop",n)}getAlbumArtUrl(t,n){return this.getImageUrl(t,"Primary",n)}buildQueryString(t,n=!1){const r=new URLSearchParams;return t.sortBy&&t.sortBy.forEach(s=>r.append("SortBy",s)),t.sortOrder&&(Array.isArray(t.sortOrder)?t.sortOrder.forEach(s=>r.append("SortOrder",s)):r.append("SortOrder",t.sortOrder)),t.limit&&r.append("Limit",t.limit.toString()),t.startIndex&&r.append("StartIndex",t.startIndex.toString()),t.includeItemTypes&&t.includeItemTypes.forEach(s=>r.append("IncludeItemTypes",s)),t.recursive!==void 0&&r.append("Recursive",t.recursive.toString()),t.parentId&&r.append("ParentId",t.parentId),t.searchTerm&&t.searchTerm.trim().length>0&&r.append("SearchTerm",t.searchTerm.trim()),t.genreIds&&t.genreIds.forEach(s=>r.append("GenreIds",s)),t.genres&&t.genres.forEach(s=>r.append("Genres",s)),t.artistIds&&t.artistIds.forEach(s=>r.append("ArtistIds",s)),t.albumIds&&t.albumIds.forEach(s=>r.append("AlbumIds",s)),t.years&&t.years.forEach(s=>r.append("Years",s.toString())),t.tags&&t.tags.forEach(s=>r.append("Tags",s)),t.minDateLastSaved&&r.append("MinDateLastSaved",t.minDateLastSaved.toISOString()),r.append("UserId",this.userId),r.append("Fields","PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Tags,ProductionYear,DateCreated,DateModified,DateLastSaved,AlbumArtist,ArtistItems,Album,AlbumId,ChildCount"),n&&r.append("_t",Date.now().toString()),r.toString()}async getArtistById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return A.error("Failed to get artist by ID:",r),null}}async getArtists(t={}){var s;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({...t,includeItemTypes:["MusicArtist"],recursive:!0});let r=await this.request(`/Artists?${n}`);return(((s=r.Items)==null?void 0:s.length)||0)===0&&(r.TotalRecordCount||0)===0&&(r=await this.request(`/Items?${n}`)),{Items:r.Items||[],TotalRecordCount:r.TotalRecordCount||0,StartIndex:r.StartIndex||0}}async getAlbumById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Overview"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return A.error("Failed to get album by ID:",r),null}}async getSongById(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount,Genres,Grouping,MediaSources"});try{return await this.request(`/Items/${t}?${n}`)}catch(r){return A.error("Failed to get song by ID:",r),null}}async getAlbums(t={}){const n=this.buildQueryString({...t,includeItemTypes:["MusicAlbum"],recursive:!0});return this.request(`/Items?${n}`)}async getSongs(t={},n=!1){const r=this.buildQueryString({...t,includeItemTypes:["Audio"],recursive:!0},n);return this.request(`/Items?${r}`)}async getGenres(t=!1){if(this.genresCache&&!t)return this.genresCache;if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=oe.getState();if(!t&&n.genres.length>0&&n.genresLastUpdated){const r=Date.now(),s=n.genresLastChecked||0;if(!(r-s>=Mc))return this.genresCache=n.genres,n.genres;try{const o=await this.getRecentlyAdded(50),a=await this.getSongs({limit:50,sortBy:["DateLastSaved"],sortOrder:"Descending"}),i=[...o.Items||[],...a.Items||[]];let c=0;for(const f of i){if(f.DateCreated){const d=new Date(f.DateCreated).getTime();d>c&&(c=d)}if(f.DateLastSaved){const d=new Date(f.DateLastSaved).getTime();d>c&&(c=d)}}if(oe.setState({genresLastChecked:r}),c<=n.genresLastUpdated)return this.genresCache=n.genres,n.genres}catch{return this.genresCache=n.genres,n.genres}}try{const r=await this.fetchAllSongsLightweight(),s=this.buildGenresFromSongs(r),l=Date.now();return oe.getState().setGenres(s),oe.setState({genresLastUpdated:l,genresLastChecked:l}),this.genresCache=s,s}catch(r){return A.error("[getGenres] Failed to build music genres:",r),n.genres.length>0?(this.genresCache=n.genres,n.genres):(this.genresCache=[],[])}}async getYears(t=!1){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=oe.getState();if(!t&&n.years.length>0&&n.yearsLastUpdated){const r=Date.now(),s=n.yearsLastChecked||0;if(!(r-s>=Mc))return n.years;try{const a=(await this.getRecentlyAdded(50)).Items||[];let i=0;for(const c of a)if(c.DateCreated){const f=new Date(c.DateCreated).getTime();f>i&&(i=f)}if(oe.setState({yearsLastChecked:r}),i<=n.yearsLastUpdated)return n.years}catch{return n.years}}try{const r=new Set;let s=0,l=!0;for(;l;){const c=(await this.getSongs({limit:It,startIndex:s})).Items||[];if(c.forEach(f=>{f.ProductionYear&&f.ProductionYear>0&&r.add(f.ProductionYear)}),l=c.length===It,s+=It,s>1e4)break}const o=Array.from(r).sort((i,c)=>i-c),a=Date.now();return oe.getState().setYears(o),oe.setState({yearsLastUpdated:a,yearsLastChecked:a}),o}catch(r){return A.error("[getYears] Failed to extract years:",r),n.years.length>0?n.years:[]}}async getGenreSongs(t,n){return(await this.fetchAllSongsLightweight()).filter(s=>{var l;return(l=s.Genres)==null?void 0:l.some(o=>o.toLowerCase()===n.toLowerCase())})}async getSongsByGroupingTag(t){const n=await this.fetchAllSongsLightweight(),r=t.toLowerCase();return n.filter(s=>{var l;return(l=s.Grouping)==null?void 0:l.some(o=>o.toLowerCase()===r)})}async fetchAllSongsLightweight(t){let n=[],r=0,s=!0,l=null;for(;s;){const a=await this.getSongs({limit:It,startIndex:r},!0),i=a.Items||[];if(n.push(...i),l===null&&a.TotalRecordCount&&(l=a.TotalRecordCount),t&&l&&l>0){const c=Math.min(Math.round(n.length/l*100),99);t(c)}if(s=i.length===It,r+=It,r>zc)break}t&&t(100);const o=a=>!a||!Array.isArray(a)?[]:a.filter(i=>i.startsWith("grouping:")).map(i=>i.replace("grouping:",""));return n.map(a=>({Id:a.Id,Name:a.Name,AlbumArtist:a.AlbumArtist,ArtistItems:a.ArtistItems,Album:a.Album,AlbumId:a.AlbumId,IndexNumber:a.IndexNumber,ProductionYear:a.ProductionYear,PremiereDate:a.PremiereDate,RunTimeTicks:a.RunTimeTicks,Genres:a.Genres,Grouping:o(a.Tags)}))}async fetchAllSongsWithPaths(){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const t=[];let n=0,r=!0;for(;r;){const s=new URLSearchParams({IncludeItemTypes:"Audio",Recursive:"true",Limit:It.toString(),StartIndex:n.toString(),UserId:this.userId,Fields:"Path,AlbumArtist,ArtistItems,Album,AlbumId"}),o=(await this.request(`/Items?${s}`)).Items||[];if(t.push(...o),r=o.length===It,n+=It,n>zc)break}return t}buildGenresFromSongs(t){const n=new Map;t.forEach(s=>{s.Genres&&s.Genres.forEach(l=>{const o=l.toLowerCase();n.has(o)||n.set(o,l)})});const r=[];for(const[s,l]of n)r.push({Id:s.replace(/\s+/g,"-"),Name:l,Type:"Genre"});return r}distributeSongsToGenres(t,n,r){for(const s of n){if(!s.Name||!s.Id)continue;const l=t.filter(o=>{var a;return(a=o.Genres)==null?void 0:a.some(i=>i.toLowerCase()===s.Name.toLowerCase())});r.setGenreSongs(s.Id,l)}}async syncLibrary(t={scope:"incremental"},n){const r=oe.getState();if(t.scope==="incremental"){const a=r.lastSyncCompleted,i=await this.getGenres(!1);let c=[];if(a){let w=0,N=!0;for(;N;){const I=(await this.getSongs({minDateLastSaved:new Date(a),limit:It,startIndex:w},!0)).Items||[];if(c.push(...I),N=I.length===It,w+=It,w>1e4)break}}else c=(await this.getSongs({limit:Lc,sortBy:["DateLastSaved"],sortOrder:"Descending"})).Items||[];const f=w=>!w||!Array.isArray(w)?[]:w.filter(N=>N.startsWith("grouping:")).map(N=>N.replace("grouping:","")),d=c.map(w=>({Id:w.Id,Name:w.Name,AlbumArtist:w.AlbumArtist,ArtistItems:w.ArtistItems,Album:w.Album,AlbumId:w.AlbumId,IndexNumber:w.IndexNumber,ProductionYear:w.ProductionYear,PremiereDate:w.PremiereDate,RunTimeTicks:w.RunTimeTicks,Genres:w.Genres,Grouping:f(w.Tags)})),h=r.songs,x=new Map(d.map(w=>[w.Id,w])),v=h.map(w=>x.get(w.Id)??w),k=new Set(h.map(w=>w.Id)),S=d.filter(w=>!k.has(w.Id));v.push(...S);try{r.setSongs(v)}catch(w){throw w instanceof DOMException&&w.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please clear some data or use a smaller sync scope."):w}const p=new Set;d.forEach(w=>{var N;(N=w.Genres)==null||N.forEach(E=>{i.forEach(I=>{var C;((C=I.Name)==null?void 0:C.toLowerCase())===E.toLowerCase()&&p.add(I.Id)})})});const m=new Map(d.map(w=>[w.Id,w])),y=Array.from(p).map(async w=>{const N=i.find(b=>b.Id===w);if(!(N!=null&&N.Name))return;const E=r.genreSongs[w]||[],I=E.map(b=>m.get(b.Id)??b),C=new Set(E.map(b=>b.Id)),P=S.filter(b=>{var H;return!C.has(b.Id)&&((H=b.Genres)==null?void 0:H.some(Y=>Y.toLowerCase()===N.Name.toLowerCase()))});I.push(...P),r.setGenreSongs(w,I)});await Promise.all(y);return}this.clearGenresCache(),r.clearGenreSongs();const s=await this.fetchAllSongsLightweight(n);A.log(`[syncLibrary] Fetched ${s.length} songs`);const l=this.buildGenresFromSongs(s);A.log(`[syncLibrary] Found ${l.length} genres in songs`);const o=Date.now();r.setGenres(l),oe.setState({genresLastUpdated:o,genresLastChecked:o}),this.genresCache=l,r.setSongs(s),this.distributeSongsToGenres(s,l,r)}async search(t,n=20,r){var m,y;const s=t?wl(t.trim()):"",l=s.length>0,o=s.length,a=l&&o<3,i={};(m=r==null?void 0:r.genres)!=null&&m.length&&(i.genres=r.genres),(y=r==null?void 0:r.years)!=null&&y.length&&(i.years=r.years);const c={limit:n,includeItemTypes:["MusicAlbum","Playlist","Audio"],recursive:!0,...i};l&&(c.searchTerm=s,o>=3&&(c.includeItemTypes=["MusicArtist","MusicAlbum","Playlist","Audio"]));const f=this.buildQueryString(c),d=await this.request(`/Items?${f}`);let h=[];const x=[],v=[],k=[],S=new Set;if(d.Items.forEach(w=>{w.Type==="MusicArtist"?h.push(w):w.Type==="MusicAlbum"?x.push(w):w.Type==="Playlist"?v.push(w):w.Type==="Audio"&&(k.push(w),S.add(w.Id))}),a)try{const w=await this.getArtists({limit:Lc}),N=s.toLowerCase();h=(w.Items||[]).filter(E=>wl(E.Name||"").toLowerCase().includes(N))}catch(w){A.error("Failed to fetch all artists for short query:",w)}if(l&&h.length>0){const w=s.toLowerCase(),N=h.filter(E=>wl(E.Name||"").toLowerCase().includes(w));if(N.length>0)try{const E=N.map(P=>P.Id),I=this.buildQueryString({artistIds:E,includeItemTypes:["Audio"],recursive:!0});(await this.request(`/Items?${I}`)).Items.forEach(P=>{S.has(P.Id)||(k.push(P),S.add(P.Id))})}catch(E){A.error("Failed to fetch songs for matching artists:",E)}}const p=k.map(w=>({...w,Grouping:(w.Tags||[]).filter(N=>N.startsWith("grouping:")).map(N=>N.replace("grouping:",""))}));return{Artists:{Items:h,TotalRecordCount:h.length,StartIndex:0},Albums:{Items:x,TotalRecordCount:x.length,StartIndex:0},Playlists:{Items:v,TotalRecordCount:v.length,StartIndex:0},Songs:{Items:p,TotalRecordCount:p.length,StartIndex:0}}}async getRecentlyAdded(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=this.buildQueryString({limit:t,includeItemTypes:["MusicAlbum"],recursive:!0,sortBy:["DateCreated"],sortOrder:"Descending"});return await this.request(`/Items?${n}`)}async getRecentlyPlayed(t=20){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({Limit:t.toString(),IncludeItemTypes:"Audio",Recursive:"true",SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return await this.request(`/Items?${n}`)}async getAlbumTracks(t){const n=new URLSearchParams({ParentId:t,IncludeItemTypes:"Audio",SortBy:"ParentIndexNumber,IndexNumber",SortOrder:"Ascending",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Items?${n}`)).Items}async getArtistItems(t){const n=new URLSearchParams({ArtistIds:t,IncludeItemTypes:"MusicAlbum,Audio",Recursive:"true",UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"}),r=await this.request(`/Items?${n}`),s=[],l=[];return r.Items.forEach(o=>{o.Type==="MusicAlbum"?s.push(o):o.Type==="Audio"&&l.push(o)}),{albums:s,songs:l}}async getPlaylists(t={}){const n=this.buildQueryString({...t,includeItemTypes:["Playlist"],recursive:!0});return this.request(`/Items?${n}`)}async markItemAsPlayed(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");try{await this.request(`/Users/${this.userId}/PlayedItems/${t}`,{method:"POST"})}catch{}}async createPlaylist(t,n=[]){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");return this.request("/Playlists",{method:"POST",body:JSON.stringify({Name:t,Ids:n,UserId:this.userId,MediaType:"Audio"})})}async deleteItem(t){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}`,{method:"DELETE"})}async updatePlaylist(t,n){if(!this.userId||!this.baseUrl||!t)throw new Error("Not authenticated or invalid playlist ID");await this.requestVoid(`/Playlists/${t}`,{method:"POST",body:JSON.stringify({Name:n,UserId:this.userId})})}async uploadItemImage(t,n,r){if(!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}/Images/Primary`,{method:"POST",headers:{"Content-Type":r},body:n})}async deleteItemImage(t){if(!this.baseUrl||!t)throw new Error("Not authenticated or invalid item ID");await this.requestVoid(`/Items/${t}/Images/Primary`,{method:"DELETE"})}async addItemsToPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({ids:n.join(","),userId:this.userId});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"POST"})}async movePlaylistItem(t,n,r){if(!this.userId||!this.baseUrl||!t||!n)throw new Error("Not authenticated or invalid parameters");await this.requestVoid(`/Playlists/${t}/Items/${n}/Move/${r}`,{method:"POST"})}async removeItemsFromPlaylist(t,n){if(!this.userId||!this.baseUrl||!t||n.length===0)throw new Error("Not authenticated or invalid parameters");const r=new URLSearchParams({entryIds:n.join(",")});await this.requestVoid(`/Playlists/${t}/Items?${r}`,{method:"DELETE"})}async getPlaylistItems(t){if(!this.userId||!this.baseUrl)throw new Error("Not authenticated");const n=new URLSearchParams({UserId:this.userId,Fields:"PrimaryImageAspectRatio,Genres,Grouping"});return(await this.request(`/Playlists/${t}/Items?${n}`)).Items}async getLyrics(t){if(!this.userId||!this.baseUrl||!t)return null;try{const n=[`/Items/${t}/Lyrics`,`/Items/${t}/RemoteLyrics`,`/Audio/${t}/Lyrics`];let r=null;for(const s of n){const l=new URLSearchParams({UserId:this.userId}),o=`${this.baseUrl}${s}?${l}`;try{const a=await fetch(o,{headers:this.getHeaders()});if(a.ok){const i=await a.json();if(i.Lyrics&&Array.isArray(i.Lyrics)&&i.Lyrics.length>0)return i.Lyrics.map(f=>f.Text||"").join(`
`);if(typeof i=="string")return i;if(i.Text)return i.Text}else if(a.status===404){r=`404 for ${s}`;continue}else{const i=await a.text().catch(()=>"");r=`${a.status}: ${i}`;continue}}catch(a){r=a instanceof Error?a.message:String(a);continue}}return null}catch{return null}}}const $=new o1,a1=Object.freeze(Object.defineProperty({__proto__:null,jellyfinClient:$},Symbol.toStringTag,{value:"Module"})),Oc=500,Qt=new Map,Jr=new Map;function Fc(){if(Qt.size>Oc){const e=Array.from(Qt.keys()).slice(0,Qt.size-Oc);for(const t of e)Qt.delete(t)}}async function Uv(e){if(Qt.has(e))return Qt.get(e)??null;if(Jr.has(e))return Jr.get(e);const t=(async()=>{try{const{albums:n,songs:r}=await $.getArtistItems(e),s=n[0],l=r.find(c=>c.AlbumId)||r[0],o=s||l,a=o?o.AlbumId||o.Id:null,i=a?$.getAlbumArtUrl(a,96):null;return Qt.set(e,i),Fc(),i}catch(n){return A.error("Failed to load fallback album art for artist:",e,n),Qt.set(e,null),Fc(),null}finally{Jr.delete(e)}})();return Jr.set(e,t),t}function Dv(e){return Qt.get(e)}function i1(){Qt.clear(),Jr.clear()}function go(){return window.__TUNETUNA_CONFIG__||{lockedServerUrl:"",lockedLocalServerUrl:""}}function Ah(){const e=go();return!!(e.lockedServerUrl&&e.lockedServerUrl!=="__JELLYFIN_SERVER_URL__"&&e.lockedServerUrl.trim()!=="")}function u1(){return Ah()?go().lockedServerUrl:null}function c1(){const e=go();return!!(e.lockedLocalServerUrl&&e.lockedLocalServerUrl!=="__JELLYFIN_LOCAL_SERVER_URL__"&&e.lockedLocalServerUrl.trim()!=="")}function yo(){return c1()?go().lockedLocalServerUrl:null}const d1=2e3;async function f1(e){const t=new AbortController,n=setTimeout(()=>t.abort(),d1);try{return await fetch(`${e.replace(/\/$/,"")}/System/Info/Public`,{signal:t.signal,mode:"no-cors"}),clearTimeout(n),!0}catch{return clearTimeout(n),!1}}async function Ki(e,t){return t&&await f1(t)?t:e}async function Rh(){const{useAuthStore:e}=await tt(async()=>{const{useAuthStore:i}=await Promise.resolve().then(()=>h1);return{useAuthStore:i}},void 0),{useSettingsStore:t}=await tt(async()=>{const{useSettingsStore:i}=await Promise.resolve().then(()=>Zg);return{useSettingsStore:i}},void 0),{jellyfinClient:n}=await tt(async()=>{const{jellyfinClient:i}=await Promise.resolve().then(()=>a1);return{jellyfinClient:i}},void 0),{serverUrl:r,accessToken:s,userId:l}=e.getState();if(!r||!s||!l)return;const o=yo()||t.getState().localServerUrl;if(!o)return;const a=await Ki(r,o);a.replace(/\/$/,"")!==n.serverBaseUrl&&n.setCredentials(a,s,l)}const _e=rr()(Ds(e=>({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1,login:async(t,n,r)=>{try{const s=await $.authenticate(t,n,r);e({serverUrl:t,serverId:s.ServerId??"",username:n,accessToken:s.AccessToken,userId:s.User.Id,isAuthenticated:!0}),$.setCredentials(t,s.AccessToken,s.User.Id)}catch(s){throw s}},logout:()=>{qa(),i1(),localStorage.removeItem("player-storage"),localStorage.removeItem("settings-storage"),indexedDB.deleteDatabase("tunetuna-storage"),indexedDB.deleteDatabase("tunetuna-stats-storage"),e({serverUrl:"",serverId:"",username:"",accessToken:"",userId:"",isAuthenticated:!1}),localStorage.removeItem("auth-storage")},setCredentials:(t,n,r)=>{e({serverUrl:t,accessToken:n,userId:r,isAuthenticated:!0}),$.setCredentials(t,n,r)}}),{name:"auth-storage",onRehydrateStorage:()=>e=>{if(e!=null&&e.isAuthenticated&&e.serverUrl&&e.accessToken&&e.userId){$.setCredentials(e.serverUrl,e.accessToken,e.userId);const t=yo()||We.getState().localServerUrl;t&&Ki(e.serverUrl,t).then(n=>{n!==e.serverUrl&&$.setCredentials(n,e.accessToken,e.userId)})}}})),h1=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Bc=e=>{const t=p1(e);return t.charAt(0).toUpperCase()+t.slice(1)},_h=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),g1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:o,...a},i)=>g.createElement("svg",{ref:i,...y1,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:_h("lucide",s),...!l&&!g1(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,f])=>g.createElement(c,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(e,t)=>{const n=g.forwardRef(({className:r,...s},l)=>g.createElement(v1,{ref:l,iconNode:t,className:_h(`lucide-${m1(Bc(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Bc(e),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],w1=X("chart-column",x1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],k1=X("check",S1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],N1=X("chevron-down",I1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mh=X("circle-alert",E1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xi=X("disc",C1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Yo=X("external-link",P1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],b1=X("eye-off",j1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A1=X("eye",T1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_1=X("file-text",R1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],L1=X("grip-horizontal",M1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z",key:"1de1vg"}]],Sl=X("guitar",z1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],U1=X("house",$1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],O1=X("info",D1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M9 19H3",key:"s61nz1"}],["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M21 5v12a2 2 0 0 1-2 2h-6",key:"hey24a"}]],sl=X("list-end",F1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],V1=X("list-music",B1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Vc=X("list-plus",G1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M3 5h6",key:"1ltk0q"}],["path",{d:"M3 12h13",key:"ppymz1"}],["path",{d:"M3 19h13",key:"bpdczq"}],["path",{d:"m16 8-3-3 3-3",key:"1pjpp6"}],["path",{d:"M21 19V7a2 2 0 0 0-2-2h-6",key:"4zzq67"}]],ll=X("list-start",H1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 19H3",key:"108z41"}],["path",{d:"M15 12.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"ms4nik"}]],Ya=X("list-video",Q1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],q1=X("loader-circle",W1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],K1=X("mic-vocal",Y1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Ji=X("music",X1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],As=X("pause",J1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ey=X("pencil",Z1);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],_n=X("play",ty);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ry=X("plus",ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Zr=X("refresh-cw",sy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Zi=X("repeat-1",ly);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],eu=X("repeat",oy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],iy=X("shield-alert",ay);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Cr=X("shuffle",uy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],tu=X("skip-back",cy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],nu=X("skip-forward",dy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],hy=X("square-play",fy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],py=X("trash-2",my);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yy=X("triangle-alert",gy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Gc=X("upload",vy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yl=X("user",xy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],Sy=X("volume-1",wy);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Iy=X("volume-2",ky);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],Ey=X("volume",Ny);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],er=X("x",Cy),Hc="last-server-url",Py=/^http:\/\/(localhost|127\.0\.0\.1|10\.\d+\.\d+\.\d+|172\.(1[6-9]|2\d|3[01])\.\d+\.\d+|192\.168\.\d+\.\d+)(:\d+)?/i;function jy(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[s,l]=g.useState(""),[o,a]=g.useState(!1),[i,c]=g.useState(""),[f,d]=g.useState(!1),h=_e(p=>p.login),x=g.useMemo(()=>e.trim().toLowerCase().startsWith("http://")?!Py.test(e.trim()):!1,[e]),v=Ah(),k=u1();g.useEffect(()=>{if(v&&k)t(k);else{const p=Ts.get(Hc);p&&t(p)}},[v,k]);const S=async p=>{p.preventDefault(),c(""),d(!0);const m=v&&k?k:e;!v&&m.trim()&&Ts.set(Hc,m.trim());try{await h(m,n,s)}catch(y){c(y instanceof Error?y.message:"Login failed. Please check your credentials.")}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tunetuna"}),u.jsx("p",{className:"text-gray-400",children:"Sign in to your Jellyfin server"})]}),u.jsxs("form",{onSubmit:S,className:"space-y-4",children:[!v&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"serverUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Server URL"}),u.jsx("input",{id:"serverUrl",type:"url",value:e,onChange:p=>t(p.target.value),placeholder:"https://your-server.com",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),x&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-amber-400 text-sm",children:[u.jsx(iy,{size:16,className:"mt-0.5 flex-shrink-0"}),u.jsx("span",{children:"Insecure connection. Your password will be sent unencrypted. Use HTTPS or a local network address."})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),u.jsx("input",{id:"username",type:"text",value:n,onChange:p=>r(p.target.value),placeholder:"Your username",required:!0,className:"w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{id:"password",type:o?"text":"password",value:s,onChange:p=>l(p.target.value),placeholder:"Your password",required:!0,className:"w-full px-4 py-3 pr-12 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:()=>a(!o),"aria-label":o?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:o?u.jsx(b1,{size:20}):u.jsx(A1,{size:20})})]})]}),i&&u.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),u.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[var(--accent-color)] hover:brightness-90 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:f?"Signing in...":"Sign In"})]})]})})}const Qe=rr((e,t)=>({state:"idle",source:null,message:null,abortController:null,progress:null,startSync:(n,r="Syncing...")=>{const s=new AbortController;e({state:"syncing",source:n,message:r,abortController:s})},completeSync:(n,r)=>{e({state:n?"success":"error",message:r||(n?"Sync complete":"Sync failed"),abortController:null,progress:null}),setTimeout(()=>{t().reset()},3e3)},cancelSync:()=>{const{abortController:n}=t();n&&n.abort(),e({state:"idle",source:null,message:null,abortController:null,progress:null})},reset:()=>{e({state:"idle",source:null,message:null,abortController:null,progress:null})},setProgress:n=>{e({progress:n})}}));function on({variant:e="horizontal",onClose:t,onOpenPopover:n,popoverPosition:r,popoverDirection:s="up",className:l,onRef:o}){const{volume:a,setVolume:i}=Z(),[c,f]=g.useState(!1),[d,h]=g.useState(1),x=g.useRef(null),v=M=>{o&&e==="compact"&&o(M)},k=M=>{o&&e==="horizontal"&&o(M)};g.useEffect(()=>{const M=localStorage.getItem("lastNonZeroVolume");M?h(Math.max(.01,Math.min(1,parseFloat(M)))):a>0&&h(a)},[]),g.useEffect(()=>{a>0&&(h(a),localStorage.setItem("lastNonZeroVolume",a.toString()))},[a]);const S=()=>a===0?Ey:a<=.5?Sy:Iy,p=g.useCallback(M=>{if(!x.current)return;const ee=x.current.getBoundingClientRect();let re,le;if(M instanceof TouchEvent||"touches"in M?(re=M.touches[0].clientX,le=M.touches[0].clientY):(re=M.clientX,le=M.clientY),e==="horizontal"){const j=re-ee.left,L=Math.max(0,Math.min(1,j/ee.width));i(L)}else{const j=ee.bottom-le,L=Math.max(0,Math.min(1,j/ee.height));i(L)}},[i,e]),m=M=>{M.preventDefault(),M.stopPropagation(),f(!0),p(M)},y=M=>{M.stopPropagation(),m(M)},w=M=>{M.stopPropagation(),I(M)},N=g.useCallback(M=>{c&&(M.preventDefault(),M.stopPropagation(),p(M))},[c,p]),E=g.useCallback(()=>{f(!1)},[]),I=M=>{M.preventDefault(),M.stopPropagation(),f(!0),p(M)},C=g.useCallback(M=>{c&&(M.preventDefault(),M.stopPropagation(),p(M))},[c,p]),P=g.useCallback(()=>{f(!1)},[]),b=M=>{M.stopPropagation(),Z.getState().volume>0?i(0):i(d)},H=M=>{M.stopPropagation()};g.useEffect(()=>{if(c)return document.addEventListener("mousemove",N),document.addEventListener("mouseup",E),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("touchend",P),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",C),document.removeEventListener("touchend",P)}},[c,N,E,C,P]);const Y=S();if(e==="compact")return u.jsx("button",{ref:v,onClick:M=>{M.stopPropagation(),n&&n()},"aria-label":"Volume",className:l||"text-white/70 hover:text-zinc-300 transition-colors",children:u.jsx(Y,{className:"w-6 h-6"})});if(e==="horizontal")return u.jsxs("div",{ref:k,className:"flex items-center gap-2 px-2 select-none",style:{width:"120px"},onClick:H,children:[u.jsx("button",{onClick:b,"aria-label":a===0?"Unmute":"Mute",className:"text-white/70 hover:text-white hover:bg-zinc-800 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 transition-colors",children:u.jsx(Y,{className:"w-5 h-5"})}),u.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),className:"flex-1 relative cursor-pointer",style:{height:"24px"},onMouseDown:y,onTouchStart:w,children:u.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 h-1 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gray-400 rounded-full transition-all duration-100",style:{width:`${a*100}%`}})})})]});const K=r?{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,transform:s==="down"?"translate(-50%, 8px)":"translate(-50%, calc(-100% - 8px))"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return u.jsxs("div",{className:"fixed inset-0 z-50",children:[u.jsx("div",{className:"fixed inset-0",onClick:t,onTouchStart:M=>M.preventDefault(),onTouchMove:M=>M.preventDefault()}),u.jsx("div",{className:"relative z-10 bg-zinc-900 rounded-lg py-4 px-0 shadow-xl border border-zinc-700",style:K,children:u.jsxs("div",{className:"h-[200px] w-[38px] cursor-pointer group relative touch-none mx-auto",children:[u.jsx("div",{ref:x,role:"slider","aria-label":"Volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(a*100),onMouseDown:m,onTouchStart:I,className:"absolute inset-0"}),u.jsxs("div",{className:"h-full w-1 bg-white/10 rounded-full relative flex flex-col justify-end mx-auto",children:[u.jsx("div",{className:"w-full bg-gray-400 rounded-full transition-all",style:{height:`${a*100}%`}}),u.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",style:{bottom:`${a*100}%`,transform:"translate(-50%, 50%)"}})]})]})})]})}const by=[{path:"/",label:"Home",icon:U1,key:"home"},{path:"/artists",label:"Artists",icon:Yl,key:"artists"},{path:"/albums",label:"Albums",icon:Xi,key:"albums"},{path:"/songs",label:"Songs",icon:Ji,key:"songs"},{path:"/genres",label:"Genres",icon:Sl,key:"genres"},{path:"/playlists",label:"Playlists",icon:V1,key:"playlists"},{path:"/stats",label:"Stats",icon:w1,key:"stats"}];function Ty(){const e=Yt(),{pageVisibility:t}=We(),{state:n}=Qe(),[r,s]=g.useState(!1),l=by.filter(i=>i.key==="home"?!0:t[i.key]),o=(i,c)=>{window.dispatchEvent(new CustomEvent("closePlayerModal")),e.pathname===c&&i.preventDefault()},a=e.pathname.startsWith("/artists/")&&e.pathname!=="/artists";return u.jsxs(u.Fragment,{children:[u.jsxs("nav",{className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 lg:hidden",style:{bottom:"calc(env(safe-area-inset-bottom) - 8px)"},children:[u.jsxs("div",{className:"relative h-16",children:[u.jsx("div",{className:"max-w-[600px] mx-auto h-full",children:u.jsx("div",{className:"flex justify-around items-center h-full",children:l.map(i=>{const c=e.pathname===i.path,f=i.icon;return u.jsxs(Nc,{to:i.path,onClick:d=>o(d,i.path),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${c?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:[u.jsx(f,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.path)})})}),u.jsx("div",{className:"absolute right-4 top-3.5 hidden lg:block",children:!zt()&&u.jsx(on,{variant:"horizontal"})})]}),r&&!zt()&&u.jsx(on,{variant:"vertical",onClose:()=>s(!1)})]}),u.jsx("nav",{className:"fixed left-0 top-0 bottom-16 bg-black z-30 hidden lg:flex flex-col",style:{width:"4rem",top:n!=="idle"?"28px":"0px"},children:u.jsx("div",{className:`absolute inset-0 flex flex-col items-center justify-center ${a?"border-r border-zinc-800":""}`,children:l.map((i,c)=>{const f=e.pathname===i.path,d=i.icon;return u.jsxs(Nc,{to:i.path,onClick:h=>o(h,i.path),className:`flex flex-col items-center justify-center py-5 transition-colors ${f?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"} ${c<l.length-1?"mb-0":""}`,style:{marginBottom:c<l.length-1?"0px":"0"},children:[u.jsx(d,{className:"w-6 h-6 mb-2"}),u.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:i.label})]},i.path)})})})]})}function ru(){return Z(e=>{const{songs:t,currentIndex:n}=e;return n>=0&&t[n]?t[n]:null})}function su(){return Z(e=>e.lastPlayedTrack)}function Rs({src:e,alt:t,className:n="",fallback:r,style:s,showOutline:l,rounded:o="rounded",loading:a="lazy",onError:i}){const[c,f]=g.useState(e),[d,h]=g.useState(!1),[x,v]=g.useState(!1),[k,S]=g.useState(!1);g.useEffect(()=>{f(e),h(!1),v(!1),S(!1)},[e]);const p=()=>{!d&&r?(f(r),h(!0)):i?(i(),v(!0)):S(!0)};return x?null:k?u.jsx("div",{className:"relative w-full h-full bg-zinc-900"}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsx("img",{src:c,alt:t,className:`block ${n}`,onError:p,loading:a,style:s}),l&&u.jsx("div",{className:`absolute inset-0 pointer-events-none border ${o}`,style:{borderColor:"rgba(24, 24, 27, 0.6)",borderWidth:"1px"}})]})}function Qc(){return u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-zinc-800 border-t-[var(--accent-color)]"})}function Lh({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,l]=g.useState(!1),[o,a]=g.useState(!1);if(g.useEffect(()=>{if(e)l(!1),a(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(!0)})}),document.body.style.overflow="hidden";else{l(!1);const c=setTimeout(()=>{a(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(c),document.body.style.overflow=""}}},[e]),!o)return null;const i=u.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[u.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),u.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out ${s?"translate-y-0":"translate-y-full"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pb-safe pt-4",children:u.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})})]});return ho.createPortal(i,document.body)}function lu({isOpen:e,onClose:t,children:n,zIndex:r=110}){const[s,l]=g.useState(!1),[o,a]=g.useState(!1);if(g.useEffect(()=>{if(e)l(!1),a(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(!0)})}),document.body.style.overflow="hidden";else{l(!1);const c=setTimeout(()=>{a(!1),document.body.style.overflow=""},300);return()=>{clearTimeout(c),document.body.style.overflow=""}}},[e]),!o)return null;const i=u.jsxs("div",{className:"fixed inset-0",style:{zIndex:r},children:[u.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t}),u.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-zinc-900 rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out md:hidden ${s?"translate-y-0":"translate-y-full"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pb-safe pt-4",children:u.jsx("div",{className:"max-w-[768px] mx-auto w-full",children:n})})}),u.jsx("div",{className:`hidden md:flex absolute inset-0 items-center justify-center p-4 transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:t,children:u.jsx("div",{className:`bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-700/50 w-full max-w-[480px] max-h-[80vh] overflow-y-auto transform transition-transform duration-300 ease-out ${s?"scale-100":"scale-95"}`,onClick:c=>c.stopPropagation(),children:u.jsx("div",{className:"pt-4",children:n})})})]});return ho.createPortal(i,document.body)}const Ay="https://musicbrainz.org/ws/2",Ry=`${bh}/${Th} (https://github.com/AlessioLaiso/tunetuna)`,_y="https://coverartarchive.org",My="https://api.song.link/v1-alpha.1";let Wc=0;const qc=1100;async function Ov(e="gb",t=10){const n=`/api/stats/proxy/apple-music/${e}/${t}`,r=await fetch(n);if(!r.ok)throw new Error(`Apple Music RSS failed: ${r.status}`);return(await r.json()).feed.results}function Fv(e,t=300){return e.replace(/\d+x\d+/,`${t}x${t}`)}async function Ly(){const t=Date.now()-Wc;t<qc&&await new Promise(n=>setTimeout(n,qc-t)),Wc=Date.now()}async function Bv(e,t){await Ly();const n=`releasegroup:"${t}" AND artist:"${e}"`,r=new URLSearchParams({query:n,fmt:"json",limit:"1"}),s=await fetch(`${Ay}/release-group/?${r}`,{headers:{"User-Agent":Ry,Accept:"application/json"}});if(!s.ok)throw new Error(`MusicBrainz search failed: ${s.status}`);const o=(await s.json())["release-groups"]||[];return o.length===0?null:{id:o[0].id,type:o[0]["primary-type"]||"Album"}}function zy(e,t=500){return`${_y}/release-group/${e}/front-${t}`}async function Vv(e,t){const n=new URLSearchParams({url:e});try{const r=await fetch(`${My}/links?${n}`);if(!r.ok){if(r.status===404)return null;throw new Error(`Odesli API failed: ${r.status}`)}return await r.json()}catch{return null}}async function Gv(e,t=10){if(!e)return[];const n=`https://api.allorigins.win/raw?url=${encodeURIComponent(e)}`;console.log("[Muspy] Fetching from:",n);const r=await fetch(n);if(!r.ok)throw new Error(`Muspy RSS failed: ${r.status}`);const s=await r.text();console.log("[Muspy] Response length:",s.length,"First 500 chars:",s.substring(0,500));const o=new DOMParser().parseFromString(s,"text/xml"),a=o.querySelector("parsererror");a&&console.error("[Muspy] XML parse error:",a.textContent);const i=o.querySelectorAll("entry");console.log("[Muspy] Found",i.length,"entries");const c=[];return i.forEach((f,d)=>{var Y,K,M,ee,re,le;if(d>=t)return;const h=((Y=f.querySelector("title"))==null?void 0:Y.textContent)||"",x=f.querySelector('link[rel="alternate"]')||f.querySelector("link"),v=(x==null?void 0:x.getAttribute("href"))||(x==null?void 0:x.textContent)||"",k=((K=f.querySelector("summary"))==null?void 0:K.textContent)||((M=f.querySelector("content"))==null?void 0:M.textContent)||"",S=((ee=f.querySelector("updated"))==null?void 0:ee.textContent)||((re=f.querySelector("published"))==null?void 0:re.textContent)||"";(le=f.querySelector("id"))!=null&&le.textContent;const p=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/i,y=f.outerHTML.match(p),w=y?y[0]:`muspy-${d}`,N=k.match(/\((Single|Album|EP)\)/i),E=N?N[1]:"Album",I=h.split(" - "),C=I.length>1?I[0].trim():k,P=I.length>1?I.slice(1).join(" - ").trim():h;let b="";if(S)try{b=new Date(S).toISOString().split("T")[0]}catch{b=S}const H=w.startsWith("muspy-")?v:`https://musicbrainz.org/release-group/${w}`;c.push({id:w,title:P,artistName:C,releaseDate:b,type:E,artworkUrl:w.startsWith("muspy-")?void 0:zy(w,500),mbUrl:H})}),c}const $y=[{id:"spotify",name:"Spotify",icon:"spotify"},{id:"appleMusic",name:"Apple Music",icon:"apple"},{id:"youtube",name:"YouTube",icon:"youtube"},{id:"youtubeMusic",name:"YouTube Music",icon:"youtube"},{id:"tidal",name:"Tidal",icon:"tidal"},{id:"deezer",name:"Deezer",icon:"deezer"},{id:"amazonMusic",name:"Amazon Music",icon:"amazon"},{id:"soundcloud",name:"SoundCloud",icon:"soundcloud"}];function Uy(e,t){const n=encodeURIComponent(`${e} ${t}`);return{entityUniqueId:"search",userCountry:"US",pageUrl:`https://www.google.com/search?q=${n}`,linksByPlatform:{spotify:{url:`https://open.spotify.com/search/${n}`},appleMusic:{url:`https://music.apple.com/search?term=${n}`},youtube:{url:`https://www.youtube.com/results?search_query=${n}`},youtubeMusic:{url:`https://music.youtube.com/search?q=${n}`},tidal:{url:`https://listen.tidal.com/search?q=${n}`},deezer:{url:`https://www.deezer.com/search/${n}`},amazonMusic:{url:`https://music.amazon.com/search/${n}`}}}}const ol={spotify:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})}),appleMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.802.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.296-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.045-1.773-.6-1.943-1.536a1.88 1.88 0 011.038-2.022c.323-.16.67-.25 1.018-.324.378-.082.758-.153 1.134-.24.274-.063.457-.23.51-.516a.904.904 0 00.02-.193c0-1.815 0-3.63-.002-5.443a.725.725 0 00-.026-.185c-.04-.15-.15-.243-.304-.234-.16.01-.318.035-.475.066-.76.15-1.52.303-2.28.456l-2.326.47-1.374.278c-.016.003-.032.01-.048.013-.277.077-.377.203-.39.49-.002.042 0 .086 0 .13-.002 2.602 0 5.204-.003 7.805 0 .42-.047.836-.215 1.227-.278.64-.77 1.04-1.434 1.233-.35.1-.71.16-1.075.172-.96.036-1.755-.6-1.92-1.544-.14-.812.23-1.685 1.154-2.075.357-.15.73-.232 1.108-.31.287-.06.575-.116.86-.177.383-.083.583-.323.6-.714v-.15c0-2.96 0-5.922.002-8.883 0-.123.013-.25.042-.37.07-.285.273-.448.546-.518.255-.065.515-.112.774-.165.733-.15 1.466-.296 2.2-.444l2.27-.46c.67-.134 1.34-.27 2.01-.403.22-.043.443-.088.664-.106.31-.025.523.17.554.482.008.073.012.148.012.223.002 1.91.002 3.822 0 5.732z"})}),youtube:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),youtubeMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.376 0 0 5.376 0 12s5.376 12 12 12 12-5.376 12-12S18.624 0 12 0zm0 19.104c-3.924 0-7.104-3.18-7.104-7.104S8.076 4.896 12 4.896s7.104 3.18 7.104 7.104-3.18 7.104-7.104 7.104zm0-13.332c-3.432 0-6.228 2.796-6.228 6.228S8.568 18.228 12 18.228s6.228-2.796 6.228-6.228S15.432 5.772 12 5.772zM9.684 15.54V8.46L15.816 12l-6.132 3.54z"})}),tidal:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M12.012 3.992L8.008 7.996 4.004 3.992 0 7.996 4.004 12l4.004-4.004L12.012 12l4.004-4.004L20.02 12l4.004-4.004-4.004-4.004-4.004 4.004-4.004-4.004zM12.012 12.012L8.008 16.02l4.004 4.004 4.004-4.004-4.004-4.008z"})}),deezer:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M18.81 4.16v3.03H24V4.16h-5.19zM6.27 8.38v3.027h5.189V8.38h-5.19zm12.54 0v3.027H24V8.38h-5.19zM6.27 12.594v3.027h5.189v-3.027h-5.19zm6.27 0v3.027h5.19v-3.027h-5.19zm6.27 0v3.027H24v-3.027h-5.19zM0 16.81v3.029h5.19v-3.03H0zm6.27 0v3.029h5.189v-3.03h-5.19zm6.27 0v3.029h5.19v-3.03h-5.19zm6.27 0v3.029H24v-3.03h-5.19z"})}),amazonMusic:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.118c.138-.053.209-.073.315-.073.186 0 .27.089.27.267 0 .178-.089.355-.267.533l-.178.178c-2.852 2.346-6.22 3.52-10.106 3.52-4.24 0-7.942-1.192-11.107-3.574-.168-.133-.217-.244-.217-.333 0-.089.044-.133.133-.178zm21.243-3.928c-.236-.178-.712-.267-1.424-.267-.712 0-1.598.178-2.665.533-1.067.356-2.134.89-3.201 1.602-.178.089-.267.178-.267.267s.089.133.267.133c.089 0 .178-.044.267-.089l.356-.178c1.156-.533 2.223-.8 3.2-.8.979 0 1.469.267 1.469.8 0 .356-.178.712-.534 1.068-.356.355-.89.711-1.6 1.066l-.535.267c-.356.178-.534.356-.534.534 0 .133.089.2.267.2.089 0 .178-.022.267-.067l.445-.222c1.6-.8 2.756-1.424 3.467-1.869.712-.444 1.068-.889 1.068-1.333 0-.445-.178-.712-.534-.978-.356-.267-.978-.4-1.868-.4zm-6.844-7.11c0-1.067-.267-1.957-.8-2.67-.533-.711-1.422-1.066-2.666-1.066-1.244 0-2.223.355-2.933 1.066-.712.712-1.156 1.78-1.334 3.2h7.733v-.533zm3.911 1.956H8.045c.089 1.422.445 2.489 1.067 3.2.622.712 1.511 1.067 2.666 1.067.89 0 1.69-.178 2.4-.533.712-.356 1.334-.89 1.868-1.6.178-.178.356-.267.534-.267.178 0 .267.089.267.267 0 .178-.089.356-.267.533-.622.8-1.422 1.423-2.4 1.868-.978.445-2.044.667-3.2.667-1.778 0-3.2-.533-4.267-1.6-1.067-1.066-1.6-2.577-1.6-4.533 0-1.956.533-3.467 1.6-4.533 1.067-1.067 2.489-1.6 4.267-1.6 1.778 0 3.111.445 4 1.334.89.889 1.334 2.177 1.334 3.866v1.067c0 .266-.089.4-.267.4l-.089-.003z"})}),soundcloud:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:u.jsx("path",{d:"M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c-.009-.06-.048-.1-.098-.1m-.899.828c-.06 0-.091.037-.104.094L0 14.479l.165 1.308c.014.057.045.094.09.094s.089-.037.099-.094l.19-1.308-.19-1.334c-.01-.057-.045-.09-.09-.09m1.83-1.229c-.061 0-.12.045-.12.104l-.21 2.563.225 2.458c0 .06.045.104.106.104.061 0 .12-.044.12-.104l.24-2.458-.24-2.563c0-.06-.045-.104-.12-.104m.945-.089c-.075 0-.135.06-.15.135l-.193 2.64.21 2.544c.016.077.075.138.149.138.075 0 .135-.061.15-.138l.225-2.545-.225-2.64c-.015-.074-.06-.135-.135-.135m1.065.42c-.09 0-.149.075-.164.164l-.158 2.255.18 2.46c.015.09.074.165.164.165.089 0 .149-.075.164-.165l.209-2.46-.209-2.255c-.015-.09-.075-.164-.164-.164m.944-.54c-.104 0-.194.09-.209.195l-.149 2.81.164 2.445c.015.105.09.195.194.195.104 0 .195-.09.21-.195l.18-2.445-.18-2.81c-.015-.105-.09-.195-.194-.195m1.076-.505c-.119 0-.21.09-.225.21l-.135 3.3.149 2.4c.015.12.105.21.225.21.12 0 .21-.09.225-.21l.165-2.4-.165-3.3c-.015-.12-.105-.21-.225-.21m1.064-.54c-.135 0-.239.105-.254.24l-.12 3.825.135 2.354c.015.135.12.24.255.24.12 0 .24-.105.255-.24l.149-2.354-.149-3.825c-.015-.135-.12-.24-.255-.24m1.109-.27c-.015-.15-.135-.255-.27-.255-.15 0-.255.105-.27.255l-.12 4.08.12 2.31c.015.15.12.255.27.255.149 0 .255-.105.27-.255l.134-2.31-.134-4.08m.494 6.645c.015.165.135.284.285.284.149 0 .27-.12.284-.284l.121-2.325-.12-5.175c-.015-.165-.135-.285-.285-.285-.149 0-.27.12-.284.285l-.107 5.175.106 2.325m1.184-6.18c-.165 0-.3.135-.314.3l-.091 3.855.105 2.31c.015.165.135.3.3.3.164 0 .284-.135.299-.3l.12-2.31-.12-3.855c-.015-.165-.135-.3-.3-.3m1.199-.075c-.18 0-.314.135-.329.315l-.09 3.915.104 2.295c.015.18.135.315.315.315s.314-.135.314-.315l.12-2.295-.12-3.915c-.015-.18-.149-.315-.314-.315m1.139-.195c-.195 0-.345.149-.359.345l-.075 4.11.09 2.265c.014.195.149.345.344.345.195 0 .345-.15.359-.345l.105-2.265-.105-4.095c-.014-.195-.164-.36-.359-.36m1.305 0c-.209 0-.359.164-.374.359l-.074 4.095.089 2.25c.015.21.165.375.375.375.194 0 .359-.165.374-.375l.09-2.25-.09-4.095c-.015-.209-.165-.359-.375-.359m1.289.015c-.225 0-.39.18-.39.405l-.06 4.065.075 2.235c.016.225.166.39.391.39.225 0 .391-.165.406-.39l.09-2.235-.091-4.065c-.014-.24-.18-.405-.405-.405m1.35.09c-.24 0-.42.18-.42.42l-.045 3.975.06 2.205c.015.24.18.42.42.42.24 0 .404-.18.42-.42l.075-2.205-.075-3.975c-.015-.24-.18-.42-.42-.42m1.33.135c-.256 0-.435.194-.45.435l-.046 3.825.061 2.175c.015.255.195.45.435.45.256 0 .436-.195.45-.45l.076-2.175-.076-3.825c-.014-.255-.194-.435-.45-.435m1.453-.09c-.27 0-.48.21-.48.465l-.03 3.915.03 2.145c.015.27.21.465.48.465.27 0 .48-.195.48-.465l.045-2.145-.045-3.915c0-.255-.21-.465-.48-.465m1.444.285c-.285 0-.495.225-.51.495l-.015 3.645.03 2.13c.015.285.225.51.51.51.27 0 .494-.225.51-.51l.03-2.13-.03-3.645c-.016-.285-.225-.495-.51-.495m3.39.465c-.165-.045-.345-.075-.51-.075-.18 0-.345.015-.51.045-.044-.9-.39-1.695-.945-2.34-.556-.645-1.35-1.08-2.31-1.215-.27-.045-.405-.165-.405-.405V6.54c0-1.305-.465-2.415-1.395-3.345C19.2 2.265 18.09 1.8 16.77 1.8c-1.155 0-2.16.375-3.045 1.095-.885.72-1.44 1.635-1.68 2.745-.165-.03-.315-.045-.45-.045-1.35 0-2.355.93-2.355 2.115 0 .24.03.465.075.69-.645.12-1.17.435-1.59.945-.42.51-.63 1.095-.63 1.755 0 .75.255 1.38.765 1.89s1.14.765 1.89.765h10.53c.93 0 1.695-.285 2.31-.855.615-.57.93-1.29.93-2.145 0-.855-.3-1.575-.9-2.16-.6-.585-1.335-.885-2.205-.9"})}),jellyfin:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",role:"img","aria-label":"Jellyfin",children:u.jsx("path",{d:"M12.0001 2C9.35508 2 0.835078 17.448 2.13408 20.055C3.43308 22.662 20.5841 22.633 21.8691 20.055C23.1541 17.477 14.6481 2 12.0001 2ZM18.4691 17.793C17.6291 19.483 6.39208 19.501 5.54108 17.793C4.69008 16.085 10.2671 5.963 12.0001 5.963C13.7331 5.963 19.3111 16.1 18.4691 17.793ZM12.0001 9.664C11.1221 9.664 8.30008 14.789 8.72508 15.655C9.15008 16.521 14.8491 16.511 15.2751 15.655C15.7011 14.799 12.8801 9.664 12.0001 9.664Z"})})};function Dy(){return u.jsx("div",{className:"animate-pulse space-y-0",children:[...Array(4)].map((e,t)=>u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-24"})]},t))})}function Yc({isOpen:e,onClose:t,odesliData:n,loading:r=!1,title:s,mode:l="mobile",position:o,zIndex:a=99999,jellyfinItemId:i=null}){const c=_e(y=>y.serverUrl),f=_e(y=>y.serverId);if(!e)return null;const d=(c==null?void 0:c.replace(/\/$/,""))??"",h=!!(i&&d),x=n?$y.filter(y=>n.linksByPlatform[y.id]):[],v=async y=>{if(y==="jellyfin"&&i&&d){let N=f;if(!N)try{const E=await fetch(`${d}/System/Info/Public`);E.ok&&(N=(await E.json()).Id??"")}catch{}N&&window.open(`${d}/web/#/details?id=${i}&serverId=${N}`,"_blank","noopener,noreferrer"),t();return}if(!n)return;const w=n.linksByPlatform[y];w!=null&&w.url&&window.open(w.url,"_blank","noopener,noreferrer"),t()},S=(()=>{if(s)return s;if(!(n!=null&&n.entitiesByUniqueId))return"Loading...";const y=Object.values(n.entitiesByUniqueId);for(const w of y)if(w.title)return w.title;return"Loading..."})(),p=h,m=r||!p&&(!n||x.length===0);if(l==="desktop"){const w=m?4:(p?1:0)+x.length,N=Math.min(400,w*44+48);let E=(o==null?void 0:o.x)||100,I=(o==null?void 0:o.y)||100;return E+220>window.innerWidth&&(E=window.innerWidth-220-10),I+N>window.innerHeight&&(I=window.innerHeight-N-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0",onClick:t,style:{zIndex:a-1}}),u.jsxs("div",{className:"fixed bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-2 min-w-[200px]",style:{left:E,top:I,zIndex:a},onClick:C=>C.stopPropagation(),children:[u.jsx("div",{className:"px-4 pb-2 mb-1 border-b border-zinc-700",children:u.jsx("div",{className:"text-sm font-medium text-white truncate",children:S})}),m?u.jsx(Dy,{}):u.jsxs("div",{className:"space-y-0",children:[p&&u.jsxs("button",{onClick:()=>v("jellyfin"),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:ol.jellyfin}),u.jsx("span",{className:"flex-1 text-sm text-white",children:"Jellyfin"})]}),x.map(C=>u.jsxs("button",{onClick:()=>v(C.id),className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-zinc-800 transition-colors text-left",children:[u.jsx("span",{className:"text-white flex-shrink-0",children:ol[C.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-sm text-white",children:C.name})]},C.id))]})]})]})}return u.jsx(Lh,{isOpen:e,onClose:t,zIndex:a,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:S})}),m?u.jsx("div",{className:"animate-pulse space-y-1",children:[...Array(4)].map((y,w)=>u.jsxs("div",{className:"flex items-center gap-4 pl-4 pr-4 py-3",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-zinc-700"}),u.jsx("div",{className:"h-4 bg-zinc-700 rounded w-28"})]},w))}):u.jsxs("div",{className:"space-y-1",children:[p&&u.jsxs("button",{onClick:()=>v("jellyfin"),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:ol.jellyfin}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:"Jellyfin"})]}),x.map(y=>u.jsxs("button",{onClick:()=>v(y.id),className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[u.jsx("span",{className:"text-white",children:ol[y.id]||u.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-xs",children:""})}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:y.name})]},y.id))]})]})})}function Oy({isOpen:e,onClose:t,itemIds:n}){const[r,s]=g.useState([]),[l,o]=g.useState(!1),[a,i]=g.useState(!1),[c,f]=g.useState(""),[d,h]=g.useState(null);g.useEffect(()=>{e&&(i(!1),f(""),h(null),x())},[e]);const x=async()=>{o(!0);try{const S=await $.getPlaylists({sortBy:["SortName"],sortOrder:"Ascending",limit:100});s(S.Items)}catch{Oe.getState().addToast("Failed to load playlists","error",3e3)}finally{o(!1)}},v=async S=>{h(S.Id);try{await $.addItemsToPlaylist(S.Id,n),Oe.getState().addToast(`Added to ${S.Name}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{Oe.getState().addToast("Failed to add to playlist","error",3e3)}finally{h(null)}},k=async()=>{const S=c.trim();if(S){h("create");try{await $.createPlaylist(S,n);const p=n.length===1?"1 song":`${n.length} songs`;Oe.getState().addToast(`Created "${S}" with ${p}`,"success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),t()}catch{Oe.getState().addToast("Failed to create playlist","error",3e3)}finally{h(null)}}};return u.jsx(lu,{isOpen:e,onClose:t,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:"Add to Playlist"})}),u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>i(!a),disabled:d!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm bg-zinc-800 flex items-center justify-center flex-shrink-0",children:u.jsx(ry,{className:"w-5 h-5 text-white"})}),u.jsx("span",{className:"text-white font-medium",children:"Create New Playlist"})]}),a&&u.jsxs("div",{className:"px-4 pb-2 flex gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:S=>f(S.target.value),onKeyDown:S=>{S.key==="Enter"&&k()},className:"flex-1 bg-zinc-800 text-white rounded-lg px-4 py-2.5 outline-none focus:ring-2 focus:ring-[var(--accent-color)] text-sm",placeholder:"Playlist name",autoFocus:!0,disabled:d==="create"}),u.jsx("button",{onClick:k,disabled:d==="create"||!c.trim(),className:"px-4 py-2.5 bg-[var(--accent-color)] text-white font-semibold rounded-lg transition-colors disabled:opacity-50 text-sm flex-shrink-0",children:d==="create"?u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Create"})]})]}),l?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[r.map(S=>u.jsxs("button",{onClick:()=>v(S),disabled:d!==null,className:"w-full flex items-center gap-4 px-4 py-3 hover:bg-white/10 transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"w-10 h-10 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-800",children:u.jsx(Rs,{src:$.getAlbumArtUrl(S.Id,80),alt:S.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm"})}),u.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:S.Name}),S.ChildCount!==void 0&&u.jsxs("div",{className:"text-xs text-gray-400",children:[S.ChildCount," tracks"]})]}),d===S.Id&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},S.Id)),r.length===0&&!l&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[u.jsx(Ji,{className:"w-8 h-8 mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No playlists yet"})]})]})]})})}function Kc({label:e,accept:t="image/*",value:n,onChange:r,previewUrl:s}){var N;const[l,o]=g.useState(!1),[a,i]=g.useState(!1),c=g.useRef(null),f=g.useRef(0),d=g.useCallback(E=>{E.preventDefault(),E.stopPropagation(),f.current++,o(!0)},[]),h=g.useCallback(E=>{E.preventDefault(),E.stopPropagation(),f.current--,f.current===0&&o(!1)},[]),x=g.useCallback(E=>{E.preventDefault(),E.stopPropagation()},[]),v=g.useCallback((E,I)=>I.split(",").some(C=>{const P=C.trim();return P.endsWith("/*")?E.type.startsWith(P.replace("/*","/")):P.startsWith(".")?E.name.toLowerCase().endsWith(P.toLowerCase()):E.type===P}),[]),k=g.useCallback(E=>{var C;E.preventDefault(),E.stopPropagation(),f.current=0,o(!1);const I=(C=E.dataTransfer.files)==null?void 0:C[0];I&&v(I,t)&&(i(!1),r(I))},[r,t,v]),S=()=>{var E;(E=c.current)==null||E.click()},p=E=>{var C;const I=(C=E.target.files)==null?void 0:C[0];I&&(i(!1),r(I)),E.target.value=""},m=E=>{E.stopPropagation(),i(!0),r(null)},y=((N=n==null?void 0:n.type)==null?void 0:N.startsWith("image/"))??!1,w=n&&y?URL.createObjectURL(n):a?null:s;return u.jsxs("div",{onClick:S,onDragEnter:d,onDragLeave:h,onDragOver:x,onDrop:k,className:`relative cursor-pointer rounded-lg border-2 border-dashed transition-colors ${l?"border-[var(--accent-color)] bg-[var(--accent-color)]/10":w||n&&!y?"border-zinc-700 bg-zinc-800/50":"border-zinc-700 bg-zinc-800/50 hover:border-zinc-500"}`,children:[u.jsx("input",{ref:c,type:"file",accept:t,onChange:p,className:"hidden"}),w?u.jsxs("div",{className:"relative aspect-square w-full overflow-hidden rounded-md",children:[u.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("button",{onClick:m,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):n?u.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(Gc,{className:"w-6 h-6 text-[var(--accent-color)]"}),u.jsx("span",{className:"text-sm text-white text-center truncate max-w-full px-2",children:n.name}),u.jsx("button",{onClick:m,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(Gc,{className:"w-6 h-6 text-gray-400"}),u.jsx("span",{className:"text-sm text-gray-400 text-center",children:e})]})]})}function Fy(e){const n=e.replace(/^\uFEFF/,"").split(/\r\n|\r|\n/),r=[];A.log(`M3U parser: ${n.length} lines in file`);let s,l,o;for(const a of n){const i=a.trim();if(!i||i==="#EXTM3U")continue;if(i.startsWith("#EXTINF:")){const h=i.substring(8),x=h.indexOf(",");if(x!==-1){o=parseInt(h.substring(0,x),10)||void 0;const v=h.substring(x+1).trim(),k=v.lastIndexOf(" - ");k!==-1?(l=v.substring(0,k).trim(),s=v.substring(k+3).trim()):(l=v,s=void 0)}continue}if(i.startsWith("#"))continue;const c=i,f=c.replace(/\\/g,"/").split("/"),d=f[f.length-1];d&&r.push({filePath:c,fileName:d,artistName:s,songTitle:l,durationSecs:o}),s=void 0,l=void 0,o=void 0}return A.log(`M3U parser: ${r.length} entries parsed`),r.length>0&&A.log(`M3U parser: first entry filename="${r[0].fileName}", path="${r[0].filePath}"`),r}function By(e){var n;const t=new Map;for(const r of e){if(!r.Path)continue;const s=r.Path.replace(/\\/g,"/").split("/"),l=(n=s[s.length-1])==null?void 0:n.toLowerCase();if(!l)continue;const o=t.get(l);o?o.push(r):t.set(l,[r])}return t}function Vy(e,t){var a,i;const n=t.get(e.fileName.toLowerCase());if(!n||n.length===0)return null;if(n.length===1)return n[0];const r=e.filePath.replace(/\\/g,"/").split("/"),s=r.length>=2?r[r.length-2].toLowerCase():"",l=r.length>=3?r[r.length-3].toLowerCase():"";let o=n.filter(c=>{const f=(c.Path||"").replace(/\\/g,"/").split("/");return(f.length>=2?f[f.length-2].toLowerCase():"")===s});if(o.length===1)return o[0];if(o.length>1){const c=o.filter(f=>{const d=(f.Path||"").replace(/\\/g,"/").split("/");return(d.length>=3?d[d.length-3].toLowerCase():"")===l});if(c.length>=1)return c[0]}if(e.songTitle||e.artistName){const c=((a=e.songTitle)==null?void 0:a.toLowerCase())||"",f=((i=e.artistName)==null?void 0:i.toLowerCase())||"",h=(o.length>0?o:n).filter(x=>{var S;const v=!c||(x.Name||"").toLowerCase().includes(c),k=!f||[(S=x.AlbumArtist)==null?void 0:S.toLowerCase(),...(x.ArtistItems||[]).map(p=>(p.Name||"").toLowerCase())].some(p=>p==null?void 0:p.includes(f));return v&&k});if(h.length>=1)return h[0]}return n[0]}function Gy(e,t,n){const r=By(t);A.log(`M3U matcher: ${t.length} library songs, ${r.size} unique filenames, ${n.size} existing playlist items`);const s=[],l=[],o=[];for(const a of e){const i=Vy(a,r);i?n.has(i.Id)?o.push({entry:a,matchedSong:i,status:"skipped_duplicate"}):s.push({entry:a,matchedSong:i,status:"matched"}):l.push({entry:a,matchedSong:null,status:"not_found"})}return{matched:s,notFound:l,skippedDuplicates:o,totalEntries:e.length}}function Hy({result:e}){const[t,n]=g.useState(!1),r=e.notFound.length+e.skippedDuplicates.length,s=[...e.notFound,...e.skippedDuplicates].map(l=>l.entry.songTitle?`${l.entry.songTitle} - ${l.entry.artistName||"Unknown"}`:l.entry.fileName);return e.matched.length===0&&r===0?u.jsx("span",{className:"text-sm text-gray-400 text-center",children:"No songs matched"}):u.jsxs("span",{className:"text-sm text-white text-center",children:[e.matched.length>0&&u.jsxs(u.Fragment,{children:[e.matched.length," ",e.matched.length===1?"song":"songs"," matched"]}),e.matched.length>0&&r>0&&". ",r>0&&u.jsxs("span",{className:"relative text-zinc-400 cursor-help",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:l=>{l.stopPropagation(),n(o=>!o)},children:[e.matched.length===0&&"No songs matched. ",r," skipped",t&&u.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 max-h-48 overflow-y-auto bg-zinc-900 border border-zinc-700 rounded-lg p-2 text-xs text-zinc-300 text-left shadow-lg z-50",children:s.map((l,o)=>u.jsx("span",{className:"block truncate py-0.5",children:l},o))})]})]})}function Qy({isOpen:e,onClose:t,editPlaylistId:n,initialName:r="",hasExistingImage:s=!1,onCreated:l,onSaved:o,imageCacheBust:a=0}){const i=!!n,[c,f]=g.useState(r),[d,h]=g.useState(null),[x,v]=g.useState(!1),[k,S]=g.useState(null),[p,m]=g.useState(!1),[y,w]=g.useState(null),[N,E]=g.useState(!1);g.useEffect(()=>{e&&(f(r),h(null),v(!1),S(null),w(null),m(!1),E(!1))},[e,n]);const I=()=>{t()},C=g.useRef(!1),P=async K=>{if(C.current=!0,S(K),w(null),!K){m(!1);return}if(!c.trim()){const M=K.name.replace(/\.(m3u8?|M3U8?)$/,"");f(M)}C.current=!1,m(!0);try{const M=await K.text(),ee=Fy(M);if(C.current)return;if(ee.length===0){Oe.getState().addToast("No songs found in M3U file","error",3e3),S(null),m(!1);return}const re=await $.fetchAllSongsWithPaths();if(C.current)return;let le=new Set;if(n){const L=await $.getPlaylistItems(n);if(C.current)return;le=new Set(L.map(B=>B.Id))}const j=Gy(ee,re,le);if(C.current)return;if(w(j),n){const L=j.matched.map(B=>B.matchedSong.Id);L.length>0&&(await $.addItemsToPlaylist(n,L),window.dispatchEvent(new CustomEvent("playlistUpdated")))}}catch(M){if(C.current)return;A.error("M3U import failed:",M),Oe.getState().addToast("Import failed","error",3e3),S(null),w(null)}finally{C.current||m(!1)}},b=()=>{C.current=!0,S(null),w(null),m(!1)},H=async()=>{const K=c.trim();if(K){E(!0);try{if(i){if(await $.updatePlaylist(n,K),d){const M=new FileReader,ee=await new Promise((re,le)=>{M.onload=()=>{const j=M.result;re(j.split(",")[1])},M.onerror=le,M.readAsDataURL(d)});await $.uploadItemImage(n,ee,d.type)}else x&&await $.deleteItemImage(n);Oe.getState().addToast("Playlist updated","success",2e3),window.dispatchEvent(new CustomEvent("playlistUpdated")),I(),o==null||o()}else{const M=await $.createPlaylist(K);if(d)try{const ee=new FileReader,re=await new Promise((le,j)=>{ee.onload=()=>{const L=ee.result;le(L.split(",")[1])},ee.onerror=j,ee.readAsDataURL(d)});await $.uploadItemImage(M.Id,re,d.type)}catch{A.error("Failed to upload playlist image")}if(y&&y.matched.length>0)try{const ee=y.matched.map(le=>le.matchedSong.Id);await $.addItemsToPlaylist(M.Id,ee);const re=[`${y.matched.length} added`];y.notFound.length>0&&re.push(`${y.notFound.length} not found`),Oe.getState().addToast(`Playlist created. ${re.join(", ")}`,y.notFound.length>0?"info":"success",4e3)}catch{A.error("M3U import failed during playlist creation"),Oe.getState().addToast("Playlist created, but M3U import failed","info",3e3)}else Oe.getState().addToast("Playlist created","success",2e3);window.dispatchEvent(new CustomEvent("playlistUpdated")),I(),l==null||l(M.Id)}}catch{Oe.getState().addToast(i?"Failed to update playlist":"Failed to create playlist","error",3e3)}finally{E(!1)}}},Y=i&&s&&!x&&n?$.getImageUrl(n,"Primary",256)+(a?`&cb=${a}`:""):null;return u.jsx(lu,{isOpen:e,onClose:I,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 px-4",children:u.jsx("div",{className:"text-lg font-semibold text-white",children:i?"Edit Playlist":"Create Playlist"})}),u.jsxs("div",{className:"px-4 space-y-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Playlist Name"}),u.jsx("input",{type:"text",value:c,onChange:K=>f(K.target.value),onKeyDown:K=>{K.key==="Enter"&&H()},className:"w-full bg-zinc-800 text-white rounded-lg px-3 py-2 border border-zinc-700 focus:outline-none focus:border-[var(--accent-color)] placeholder:text-zinc-500",placeholder:"Playlist name",autoFocus:!0,disabled:N})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Image (Optional)"}),u.jsx("div",{className:"w-32",children:u.jsx(Kc,{label:"Drop or click",accept:"image/*",value:d,onChange:K=>{h(K),K?v(!1):s&&v(!0)},previewUrl:Y})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-base font-medium text-white mb-2",children:"Add from M3U (Optional)"}),p?u.jsxs("div",{className:"relative rounded-lg border-2 border-dashed border-zinc-700 bg-zinc-800/50",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(q1,{className:"w-6 h-6 text-[var(--accent-color)] animate-spin"}),u.jsx("span",{className:"text-sm text-gray-400 text-center",children:"Matching songs..."})]}),u.jsx("button",{onClick:b,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):y?u.jsxs("div",{className:"relative rounded-lg border-2 border-dashed border-zinc-700 bg-zinc-800/50",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8 px-4",children:[u.jsx(_1,{className:"w-6 h-6 text-[var(--accent-color)]"}),u.jsx(Hy,{result:y})]}),u.jsx("button",{onClick:b,className:"absolute top-2 right-2 w-7 h-7 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-colors",children:u.jsx(er,{className:"w-4 h-4 text-white"})})]}):u.jsx(Kc,{label:"Drop .m3u file or click",accept:".m3u,.m3u8",value:k,onChange:P})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:I,className:"flex-1 py-3 bg-transparent border border-[var(--accent-color)] text-white hover:bg-[var(--accent-color)]/10 font-semibold rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:H,disabled:N||p||!c.trim(),className:"flex-1 py-3 bg-[var(--accent-color)] text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:N||p?i?"Saving...":"Creating...":i?"Save":"Create"})]})]})]})})}const Wy=({className:e})=>u.jsx("svg",{viewBox:"0 0 24 24",className:e,fill:"currentColor",role:"img","aria-label":"Jellyfin",children:u.jsx("path",{d:"M12.0001 2C9.35508 2 0.835078 17.448 2.13408 20.055C3.43308 22.662 20.5841 22.633 21.8691 20.055C23.1541 17.477 14.6481 2 12.0001 2ZM18.4691 17.793C17.6291 19.483 6.39208 19.501 5.54108 17.793C4.69008 16.085 10.2671 5.963 12.0001 5.963C13.7331 5.963 19.3111 16.1 18.4691 17.793ZM12.0001 9.664C11.1221 9.664 8.30008 14.789 8.72508 15.655C9.15008 16.521 14.8491 16.511 15.2751 15.655C15.7011 14.799 12.8801 9.664 12.0001 9.664Z"})});function qy({item:e,itemType:t,isOpen:n,onClose:r,zIndex:s,onNavigate:l,mode:o="mobile",position:a,extraActions:i,onExtraAction:c}){const f=Us(),[d,h]=g.useState(!1),[x,v]=g.useState(null),[k,S]=g.useState(null),[p,m]=g.useState(!1),[y,w]=g.useState(null),[N,E]=g.useState(null),[I,C]=g.useState(!1),[P,b]=g.useState(""),[H,Y]=g.useState(!1),[K,M]=g.useState([]),[ee,re]=g.useState(!1),[le,j]=g.useState(null),[L,B]=g.useState(""),[te,ie]=g.useState(!1),[ye,fe]=g.useState(!1),[it,he]=g.useState(null),[be,Kt]=g.useState(""),[Be,Te]=g.useState(!1),[Ot,Xt]=g.useState(0),{playTrack:V,playAlbum:R,addToQueueWithToast:G,playNext:J,shuffleArtist:Ne,toggleShuffle:de}=Z(),Le=Qe(O=>O.startSync),Ve=Qe(O=>O.completeSync),sr=oe(O=>O.genres),{updateEventMetadata:Jt}=He(),On=g.useRef(e),Zt=g.useRef(t);g.useEffect(()=>{On.current=e,Zt.current=t},[e,t]),g.useEffect(()=>{if(!n||!e){S(null);return}(async()=>{var _,ne;try{if(t==="album"){const pe=await $.getAlbumTracks(e.Id);pe.length>0&&((_=pe[0].Genres)!=null&&_[0])&&S(pe[0].Genres[0])}else if(t==="artist"){const{songs:pe}=await $.getArtistItems(e.Id);pe.length>0&&((ne=pe[0].Genres)!=null&&ne[0])&&S(pe[0].Genres[0])}}catch(pe){A.error("Failed to fetch genre:",pe)}})()},[n,e==null?void 0:e.Id,t]);const pn=O=>{if(!O)return null;const _=sr.find(ne=>{var pe;return((pe=ne.Name)==null?void 0:pe.toLowerCase())===O.toLowerCase()});return(_==null?void 0:_.Id)||null},U=g.useCallback(async O=>{var pe,rt,en,tn,z,W,q,Ue,Fn;const _=On.current,ne=Zt.current;if(_){if(i!=null&&i.some(D=>D.id===O)){r(),c==null||c(O,_);return}if(O==="addToPlaylist"){if(ne==="song")M([_.Id]),r(),Y(!0);else if(ne==="album"){h(!0),v(O);try{const D=await $.getAlbumTracks(_.Id);M(D.map(Q=>Q.Id)),r(),Y(!0)}catch(D){A.error("Failed to fetch album tracks:",D)}finally{h(!1),v(null)}}return}if(O==="deletePlaylist"){j(_.Id),B(_.Name||"this playlist"),r(),re(!0);return}if(O==="renamePlaylist"){he(_.Id),Kt(_.Name||""),Te(!!("ImageTags"in _&&((pe=_.ImageTags)!=null&&pe.Primary))),r(),fe(!0);return}if(O==="viewDetails"){r(),l&&l(),f(`/song/${_.Id}`);return}if(O==="openInJellyfin"){const D=_e.getState().serverUrl,Q=_e.getState().serverId,Ce=(D==null?void 0:D.replace(/\/$/,""))??"";if(Ce&&_.Id){let Re=Q;if(!Re)try{const lr=await fetch(`${Ce}/System/Info/Public`);lr.ok&&(Re=(await lr.json()).Id??"")}catch{}Re&&window.open(`${Ce}/web/#/details?id=${_.Id}&serverId=${Re}`,"_blank","noopener,noreferrer")}r();return}if(O==="openIn"){const D=((en=(rt=_.ArtistItems)==null?void 0:rt[0])==null?void 0:en.Name)||_.AlbumArtist||_.Name||"";let Q="";ne==="song"||ne==="album"?Q=_.Name||"":ne==="artist"&&(Q=""),b(ne==="artist"?D:`${D} - ${Q}`),C(!0),E(null),w(_.Id??null),r(),m(!0);const Ce=Uy(D,Q);E(Ce),C(!1);return}if(O.startsWith("goTo")){if(r(),l&&l(),O==="goToArtist"){const D=((z=(tn=_.ArtistItems)==null?void 0:tn[0])==null?void 0:z.Id)||("AlbumArtists"in _?(q=(W=_.AlbumArtists)==null?void 0:W[0])==null?void 0:q.Id:void 0);D&&f(`/artist/${D}`)}else if(O==="goToAlbum")_.AlbumId&&f(`/album/${_.AlbumId}`);else if(O==="goToGenre"){const D=ne==="album"||ne==="artist"?k:(Ue=_.Genres)==null?void 0:Ue[0];if(D){const Q=pn(D);if(Q)f(`/genre/${encodeURIComponent(Q)}`);else{const Re=(await $.getGenres()).find(lr=>{var or;return((or=lr.Name)==null?void 0:or.toLowerCase())===D.toLowerCase()});Re!=null&&Re.Id&&f(`/genre/${encodeURIComponent(Re.Id)}`)}}}return}h(!0),v(O);try{switch(ne){case"album":{if(O==="play"){const D=await $.getAlbumTracks(_.Id),{shuffle:Q}=Z.getState();Q&&de(),R(D)}else if(O==="shuffle"){const D=await $.getAlbumTracks(_.Id),{shuffle:Q}=Z.getState();Q&&de(),R(D),requestAnimationFrame(()=>{const{shuffle:Ce}=Z.getState();Ce||de()})}else if(O==="playNext"){const D=await $.getAlbumTracks(_.Id);J(D)}else if(O==="addToQueue"){const D=await $.getAlbumTracks(_.Id);G(D)}else if(O==="sync"){Le("context-menu",`Syncing ${_.Name}...`);try{(await $.getAlbumTracks(_.Id)).forEach(Q=>{var Ce;Jt("song",Q.Id,{songName:Q.Name||"Unknown",artistNames:(Ce=Q.ArtistItems)!=null&&Ce.length?Q.ArtistItems.map(Re=>Re.Name||"Unknown"):[Q.AlbumArtist||"Unknown"],albumName:Q.Album||"Unknown",genres:Q.Genres||[],year:Q.ProductionYear||null})}),Ve(!0,`${_.Name} synced`)}catch{Ve(!1,`Failed to sync ${_.Name}`)}}break}case"song":{if(O==="play")A.log("ContextMenu: Playing song",_.Name),V(_);else if(O==="playNext")A.log("ContextMenu: Adding song to play next",_.Name),J([_]);else if(O==="addToQueue")A.log("ContextMenu: Adding song to queue",_.Name),G([_]);else if(O==="sync"){Le("context-menu",`Syncing ${_.Name}...`);try{const D=await $.getSongById(_.Id);if(D.Genres){const Q=await $.getGenres();D.Genres.forEach(Ce=>{const Re=Q.find(lr=>{var or;return((or=lr.Name)==null?void 0:or.toLowerCase())===Ce.toLowerCase()});Re!=null&&Re.Id&&oe.getState().clearGenreSongsForGenre(Re.Id)})}Jt("song",_.Id,{songName:D.Name||"Unknown",artistNames:(Fn=D.ArtistItems)!=null&&Fn.length?D.ArtistItems.map(Q=>Q.Name||"Unknown"):[D.AlbumArtist||"Unknown"],albumName:D.Album||"Unknown",genres:D.Genres||[],year:D.ProductionYear||null}),Ve(!0,`${_.Name} synced`)}catch{Ve(!1,`Failed to sync ${_.Name}`)}}break}case"artist":{if(O==="shuffle"){const{songs:D}=await $.getArtistItems(_.Id);Ne(D)}else if(O==="playNext"){const{songs:D}=await $.getArtistItems(_.Id);J(D)}else if(O==="addToQueue"){const{songs:D}=await $.getArtistItems(_.Id);G(D)}else if(O==="sync"){Le("context-menu",`Syncing ${_.Name}...`);try{const{songs:D}=await $.getArtistItems(_.Id);D.forEach(Q=>{var Ce;Jt("song",Q.Id,{songName:Q.Name||"Unknown",artistNames:(Ce=Q.ArtistItems)!=null&&Ce.length?Q.ArtistItems.map(Re=>Re.Name||"Unknown"):[Q.AlbumArtist||"Unknown"],albumName:Q.Album||"Unknown",genres:Q.Genres||[],year:Q.ProductionYear||null})}),Ve(!0,`${_.Name} synced`)}catch{Ve(!1,`Failed to sync ${_.Name}`)}}break}case"playlist":{if(O==="play"){const D=await $.getAlbumTracks(_.Id);if(D.length===0)break;const{shuffle:Q}=Z.getState();Q&&de(),R(D)}else if(O==="shuffle"){const D=await $.getAlbumTracks(_.Id);if(D.length===0)break;const{shuffle:Q}=Z.getState();Q&&de(),R(D),requestAnimationFrame(()=>{const{shuffle:Ce}=Z.getState();Ce||de()})}else if(O==="playNext"){const D=await $.getAlbumTracks(_.Id);if(D.length===0)break;J(D)}else if(O==="addToQueue"){const D=await $.getAlbumTracks(_.Id);if(D.length===0)break;G(D)}else if(O==="sync"){Le("context-menu",`Syncing ${_.Name}...`);try{(await $.getAlbumTracks(_.Id)).forEach(Q=>{var Ce;Jt("song",Q.Id,{songName:Q.Name||"Unknown",artistNames:(Ce=Q.ArtistItems)!=null&&Ce.length?Q.ArtistItems.map(Re=>Re.Name||"Unknown"):[Q.AlbumArtist||"Unknown"],albumName:Q.Album||"Unknown",genres:Q.Genres||[],year:Q.ProductionYear||null})}),Ve(!0,`${_.Name} synced`)}catch{Ve(!1,`Failed to sync ${_.Name}`)}}break}}r()}catch(D){A.error("Context menu action failed:",D)}finally{h(!1),v(null)}}},[r,l,f,k,pn,V,R,G,J,Ne,de,Le,Ve]),ce=async()=>{if(le){ie(!0);try{await $.deleteItem(le),Oe.getState().addToast("Playlist deleted","success",2e3),re(!1),window.dispatchEvent(new CustomEvent("playlistUpdated")),f("/playlists")}catch{Oe.getState().addToast("Failed to delete playlist","error",3e3)}finally{ie(!1)}}},ae=u.jsxs(u.Fragment,{children:[u.jsx(Oy,{isOpen:H,onClose:()=>Y(!1),itemIds:K}),u.jsx(lu,{isOpen:ee,onClose:()=>re(!1),children:u.jsxs("div",{className:"pb-6",children:[u.jsxs("div",{className:"mb-6 px-4 flex items-start gap-3",children:[u.jsx(yy,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-lg font-semibold text-white",children:"Delete Playlist?"}),u.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["",L," will be permanently deleted. This cannot be undone."]})]})]}),u.jsxs("div",{className:"px-4 space-y-2",children:[u.jsx("button",{onClick:ce,disabled:te,className:"w-full py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-full transition-colors disabled:opacity-50",children:te?"Deleting...":"Delete"}),u.jsx("button",{onClick:()=>re(!1),className:"w-full py-3 text-white font-medium rounded-full transition-colors hover:bg-white/10",children:"Cancel"})]})]})}),u.jsx(Qy,{isOpen:ye,onClose:()=>fe(!1),editPlaylistId:it,initialName:be,hasExistingImage:Be,imageCacheBust:Ot,onSaved:()=>Xt(Date.now())})]});if(!e||!t)return u.jsxs(u.Fragment,{children:[u.jsx(Yc,{isOpen:p,onClose:()=>{m(!1),E(null),w(null)},odesliData:N,loading:I,title:P,mode:o,position:a,jellyfinItemId:y}),ae]});const At=(()=>{var O,_,ne,pe,rt,en,tn;switch(t){case"album":{const z=((_=(O=e.ArtistItems)==null?void 0:O[0])==null?void 0:_.Name)||("AlbumArtists"in e?(pe=(ne=e.AlbumArtists)==null?void 0:ne[0])==null?void 0:pe.Name:void 0)||"Artist",W=k||"Genre";return[{id:"play",label:"Play",icon:_n},{id:"shuffle",label:"Shuffle",icon:Cr},{id:"playNext",label:"Play Next",icon:ll},{id:"addToQueue",label:"Add to Queue",icon:sl},{id:"goToArtist",label:`Go to ${z}`,icon:Yl},{id:"goToGenre",label:`Go to ${W}`,icon:Sl},{id:"addToPlaylist",label:"Add to Playlist",icon:Vc},{id:"sync",label:"Sync",icon:Zr},{id:"openIn",label:"Open in",icon:Yo}]}case"song":{const z=((en=(rt=e.ArtistItems)==null?void 0:rt[0])==null?void 0:en.Name)||e.AlbumArtist||"Artist",W=e.Album||"Album",q=((tn=e.Genres)==null?void 0:tn[0])||"Genre";return[{id:"play",label:"Play",icon:_n},{id:"playNext",label:"Play Next",icon:ll},{id:"addToQueue",label:"Add to Queue",icon:sl},{id:"viewDetails",label:"Go to Song Details",icon:Ji},{id:"goToAlbum",label:`Go to ${W}`,icon:Xi},{id:"goToArtist",label:`Go to ${z}`,icon:Yl},{id:"goToGenre",label:`Go to ${q}`,icon:Sl},{id:"addToPlaylist",label:"Add to Playlist",icon:Vc},...i||[],{id:"sync",label:"Sync",icon:Zr},{id:"openIn",label:"Open in",icon:Yo}]}case"artist":return[{id:"shuffle",label:"Shuffle",icon:Cr},{id:"playNext",label:"Play Next",icon:ll},{id:"addToQueue",label:"Add to Queue",icon:sl},{id:"goToGenre",label:`Go to ${k||"Genre"}`,icon:Sl},{id:"sync",label:"Sync",icon:Zr},{id:"openIn",label:"Open in",icon:Yo}];case"playlist":return[...(e.ChildCount!==void 0?e.ChildCount>0:!0)?[{id:"play",label:"Play",icon:_n},{id:"shuffle",label:"Shuffle",icon:Cr},{id:"playNext",label:"Play Next",icon:ll},{id:"addToQueue",label:"Add to Queue",icon:sl}]:[],{id:"renamePlaylist",label:"Edit Playlist",icon:ey},{id:"deletePlaylist",label:"Delete Playlist",icon:py},{id:"sync",label:"Sync",icon:Zr},{id:"openInJellyfin",label:"Open in Jellyfin",icon:Wy}];default:return[]}})(),Ft=e.Name||"Unknown",Ae=u.jsx(Yc,{isOpen:p,onClose:()=>{m(!1),E(null),w(null)},odesliData:N,loading:I,title:P,mode:o,position:a,jellyfinItemId:y});if(o==="desktop"&&n){const _=Math.min(400,At.length*44+8);let ne=(a==null?void 0:a.x)||100,pe=(a==null?void 0:a.y)||100;return ne+240>window.innerWidth&&(ne=window.innerWidth-240-10),pe+_>window.innerHeight&&(pe=window.innerHeight-_-10),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:r,style:{zIndex:s-1}}),u.jsx("div",{className:"fixed z-50 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl py-1 min-w-[200px]",style:{left:ne,top:pe,zIndex:s},onClick:rt=>rt.stopPropagation(),children:u.jsx("div",{className:"space-y-0",children:At.map(rt=>{const en=rt.icon,tn=d&&x===rt.id;return u.jsxs("button",{onClick:()=>U(rt.id),disabled:d,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-zinc-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[u.jsx(en,{className:"w-4 h-4 text-white flex-shrink-0"}),u.jsx("span",{className:"flex-1 text-sm text-white",children:rt.label}),tn&&u.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin flex-shrink-0"})]},rt.id)})})}),Ae,ae]})}return u.jsxs(u.Fragment,{children:[u.jsx(Lh,{isOpen:n,onClose:r,zIndex:s,children:u.jsxs("div",{className:"pb-6",children:[u.jsx("div",{className:"mb-4 ml-4",children:u.jsx("div",{className:"text-lg font-semibold text-white break-words",children:Ft})}),u.jsx("div",{className:"space-y-1",children:At.map(O=>{const _=O.icon,ne=d&&x===O.id;return u.jsxs("button",{onClick:()=>U(O.id),disabled:d,className:"w-full flex items-center gap-4 pl-4 pr-4 py-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(_,{className:"w-5 h-5 text-white"}),u.jsx("span",{className:"flex-1 text-left text-white font-medium",children:O.label}),ne&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]},O.id)})})]})}),Ae,ae]})}function Yy({onLongPress:e,onClick:t,delay:n=500,moveThreshold:r=10}){const s=g.useRef(null),l=g.useRef(null),o=g.useRef(!1),a=g.useRef(null),i=g.useRef(!1),c=g.useCallback(h=>{o.current=!1,i.current=!1,l.current=h.target,!("button"in h&&h.button!==0)&&(h.preventDefault(),"touches"in h&&h.touches.length>0?a.current={x:h.touches[0].clientX,y:h.touches[0].clientY}:a.current=null,s.current=setTimeout(()=>{i.current||(o.current=!0,e(h))},n))},[e,n]),f=g.useCallback(h=>{if(!a.current||h.touches.length===0)return;const x=h.touches[0].clientX,v=h.touches[0].clientY,k=Math.abs(x-a.current.x),S=Math.abs(v-a.current.y);Math.sqrt(k*k+S*S)>r&&(i.current=!0,s.current&&(clearTimeout(s.current),s.current=null))},[r]),d=g.useCallback(h=>{if("button"in h&&h.button!==0){o.current=!1,i.current=!1,l.current=null,a.current=null;return}const x=o.current;s.current&&(clearTimeout(s.current),s.current=null),t&&l.current===h.target&&!x&&!i.current&&t(h),o.current=!1,i.current=!1,l.current=null,a.current=null},[t]);return{onMouseDown:c,onTouchStart:c,onTouchMove:f,onMouseUp:d,onMouseLeave:h=>{s.current&&(clearTimeout(s.current),s.current=null),o.current=!1,i.current=!1,l.current=null,a.current=null},onTouchEnd:d}}const Ky=45,Xy=45,al=g.memo(function({track:t,index:n,isCurrent:r,isPlaying:s,showRemoveButton:l=!0,onClick:o,onRemove:a,onReorderDragStart:i,onReorderDragEnd:c,onReorderDrop:f,onContextMenu:d,isDragOver:h,onDragEnterRow:x}){var N,E,I,C;const v=g.useRef(!1),k=Yy({onLongPress:P=>{P.preventDefault(),v.current=!0,d(t,"mobile"),setTimeout(()=>{v.current=!1},300)}}),S=g.useCallback(P=>{if(v.current){P.preventDefault(),P.stopPropagation();return}o()},[o]),p=g.useCallback(P=>{P.preventDefault(),v.current=!0,d(t,"desktop",{x:P.clientX,y:P.clientY}),setTimeout(()=>{v.current=!1},300)},[d,t]),m=g.useCallback(P=>{P.preventDefault(),P.dataTransfer.dropEffect="move"},[]),y=g.useCallback(P=>{P.preventDefault(),r||x(n)},[r,x,n]),w=g.useCallback(P=>{r||f(P,n)},[r,f,n]);return u.jsxs("div",{onDragOver:m,onDragEnter:y,onDrop:w,className:`group queue-row flex items-center gap-3 p-3 ${r?"cursor-pointer":"hover:bg-zinc-900 cursor-pointer"} ${r?"bg-zinc-900":""} relative focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] focus-visible:ring-inset`,onClick:r?void 0:S,onContextMenu:p,tabIndex:0,role:"button","aria-label":`${t.Name} by ${((E=(N=t.ArtistItems)==null?void 0:N[0])==null?void 0:E.Name)||t.AlbumArtist||"Unknown Artist"}`,...k,children:[h&&!r&&u.jsx("div",{className:"absolute left-3 right-3 top-0 h-0.5 bg-[var(--accent-color)] rounded-full pointer-events-none"}),u.jsx("div",{className:"queue-drag-art w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 ml-1",children:u.jsx(Rs,{src:$.getAlbumArtUrl(t.AlbumId||t.Id,96),alt:t.Name,className:"w-full h-full object-cover",showOutline:!1,rounded:"rounded-sm"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`text-sm font-medium truncate transition-colors ${r?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:t.Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:((C=(I=t.ArtistItems)==null?void 0:I[0])==null?void 0:C.Name)||t.AlbumArtist||"Unknown Artist"})]}),r?u.jsx("button",{onClick:P=>{P.stopPropagation(),o()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":s?"Pause":"Play",children:s?u.jsx(As,{className:"w-5 h-5"}):u.jsx(_n,{className:"w-5 h-5"})}):u.jsx(u.Fragment,{children:l&&u.jsxs(u.Fragment,{children:[u.jsx("button",{draggable:!0,onMouseDown:P=>P.stopPropagation(),onTouchStart:P=>P.stopPropagation(),onDragStart:P=>{P.stopPropagation(),i(P,n)},onDragEnd:P=>{P.stopPropagation(),c()},className:"text-gray-500 hover:text-zinc-300 transition-colors p-2 cursor-grab active:cursor-grabbing focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Drag to reorder",children:u.jsx(L1,{className:"w-4 h-4"})}),a&&u.jsx("button",{onClick:P=>{P.stopPropagation(),a()},className:"text-gray-400 hover:text-zinc-300 transition-colors p-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] rounded","aria-label":"Remove from queue",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})});function ou({onNavigateFromContextMenu:e,header:t,contentPaddingBottom:n="8rem"}){const[r,s]=g.useState(!1),[l,o]=g.useState(null),[a,i]=g.useState("mobile"),[c,f]=g.useState(null),[d,h]=g.useState(null),[x,v]=g.useState(null),[k,S]=g.useState(Ky),[p,m]=g.useState(!1),[y,w]=g.useState(!1),N=g.useRef(null),{songs:E,currentIndex:I,isPlaying:C,togglePlayPause:P,skipToTrack:b,removeFromQueue:H,reorderQueue:Y,isFetchingRecommendations:K,isLoadingMoreSongs:M,repeat:ee}=Z(),{showQueueRecommendations:re,setShowQueueRecommendations:le,recommendationsQuality:j}=We(),L=g.useCallback((V,R)=>{V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",R.toString()),v(R),N.current=R;const G=V.currentTarget,J=G==null?void 0:G.closest(".queue-row");if(J&&V.dataTransfer.setDragImage){const de=J.querySelector(".queue-drag-art")??J,Le=de.getBoundingClientRect();V.dataTransfer.setDragImage(de,Le.width/2,Le.height/2)}},[]),B=g.useCallback(()=>{v(null),h(null),N.current=null},[]),te=g.useCallback((V,R)=>{V.preventDefault();const G=V.dataTransfer.getData("text/plain")||V.dataTransfer.getData("text/html"),J=parseInt(G,10);if(Number.isNaN(J))return;const Ne=N.current??J,de=Z.getState().songs,Le=de[Ne],Ve=de[R];if(Le&&Ve&&Le.source!==Ve.source){h(null),v(null),N.current=null;return}J!==R&&Y(J,R),h(null),v(null),N.current=null},[Y]),ie=g.useCallback((V,R="mobile",G)=>{o(V),i(R),f(G||null),s(!0)},[]),ye=g.useCallback(V=>{if(N.current==null)return;const R=Z.getState().songs,G=R[N.current],J=R[V];if(!(!G||!J)){if(G.source!==J.source){h(null);return}h(V)}},[]),fe=I>=0?E[I]:null,it=E.filter((V,R)=>R<I);let he=-1;for(let V=E.length-1;V>I;V--)if(E[V].source==="user"){he=V;break}const be=E.filter((V,R)=>R<=I?!1:he!==-1?R<=he:!1),Kt=E.filter((V,R)=>V.source!=="recommendation"||R<=I?!1:he!==-1?R>he:!0);let Be=k;const Te=it.slice(-Math.min(Be,it.length));Be-=Te.length,Be-=fe?1:0;const Ot=be.slice(0,Math.max(0,Be));Be-=Ot.length;const Xt=Kt.slice(0,Math.max(0,Be));return g.useEffect(()=>{const V=document.querySelector(".queue-list-container");if(!V)return;const R=()=>{const G=V.scrollTop,J=V.clientHeight,Ne=V.scrollHeight;G+J*2.5>=Ne&&S(de=>Math.min(de+Xy,E.length))};return V.addEventListener("scroll",R,{passive:!0}),R(),()=>V.removeEventListener("scroll",R)},[E.length]),g.useEffect(()=>{if(K){const V=setTimeout(()=>{w(!0)},2e3);return()=>clearTimeout(V)}else w(!1)},[K]),u.jsx("div",{className:"flex-1 flex flex-col min-h-0 w-full relative",children:u.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 queue-list-container w-full",style:{paddingBottom:"8rem"},children:[u.jsxs("div",{className:"max-w-[864px] mx-auto w-full",children:[t,E.length===0&&!fe?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 py-10",children:u.jsx("p",{children:"Queue is empty"})}):u.jsxs("div",{children:[Te.length>0&&p&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Previous"}),u.jsx("button",{onClick:()=>m(!1),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Hide"})]}),Te.map((V,R)=>{const G=E.indexOf(V);return u.jsx(al,{track:V,index:G,isCurrent:!1,isPlaying:!1,showRemoveButton:!1,onClick:()=>b(G),onReorderDragStart:L,onReorderDragEnd:B,onReorderDrop:te,onContextMenu:ie,isDragOver:!1,onDragEnterRow:ye},`${V.Id}-${R}`)})]}),fe&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Now Playing"}),Te.length>0&&!p&&u.jsx("button",{onClick:()=>m(!0),className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Show Previous"})]}),u.jsx(al,{track:fe,index:I,isCurrent:!0,isPlaying:C,showRemoveButton:!1,onClick:P,onReorderDragStart:L,onReorderDragEnd:B,onReorderDrop:te,onContextMenu:ie,isDragOver:!1,onDragEnterRow:ye})]}),Ot.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Coming Up"}),u.jsx("button",{onClick:()=>{const R=E.filter((J,Ne)=>Ne<=I||J.source==="recommendation"),G=Math.min(I,R.length-1);Z.setState({songs:R,currentIndex:G,standardOrder:R.filter(J=>J.source==="user").map(J=>J.Id),shuffleOrder:R.filter(J=>J.source==="user").map(J=>J.Id)})},className:"text-xs font-semibold text-gray-300 hover:opacity-80 transition-opacity tracking-wider",children:"Clear"})]}),Ot.map((V,R)=>{const G=E.indexOf(V);return u.jsx(al,{track:V,index:G,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>b(G),onRemove:()=>H(G),onReorderDragStart:L,onReorderDragEnd:B,onReorderDrop:te,onContextMenu:ie,isDragOver:d===G,onDragEnterRow:ye},`${V.Id}-${R}`)}),M&&u.jsxs("div",{className:"flex items-center justify-center py-4",children:[u.jsx(Qc,{}),u.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading more songs..."})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"px-4 pb-0 pt-7 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-bold text-white tracking-wider",children:"Recommendations"}),u.jsx("button",{disabled:ee!=="off",onClick:()=>{const V=!re;if(le(V),!V){const R=E.filter((G,J)=>J<=I?!0:G.source==="user");Z.setState({songs:R,currentIndex:I,standardOrder:R.filter(G=>G.source==="user").map(G=>G.Id),shuffleOrder:R.filter(G=>G.source==="user").map(G=>G.Id)})}},className:`relative w-12 h-6 rounded-full transition-colors ${re&&ee==="off"?"bg-[var(--accent-color)]":"bg-zinc-600"} ${ee!=="off"?"opacity-50 cursor-not-allowed":""}`,children:u.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${re&&ee==="off"?"translate-x-6":"translate-x-0"}`})})]}),u.jsxs("div",{className:"px-4 pb-2",children:[ee!=="off"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block mb-1",children:"Disabled when repeat mode is active"}),(y||j==="failed")&&u.jsxs(u.Fragment,{children:[y&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Syncing genres..."}),!K&&j==="failed"&&u.jsx("span",{className:"text-xs text-gray-400 font-normal block",children:"Sync library in settings"})]})]}),re&&ee==="off"&&u.jsxs(u.Fragment,{children:[Xt.map((V,R)=>{const G=E.indexOf(V);return u.jsx(al,{track:V,index:G,isCurrent:!1,isPlaying:!1,showRemoveButton:!0,onClick:()=>b(G),onRemove:()=>H(G),onReorderDragStart:L,onReorderDragEnd:B,onReorderDrop:te,onContextMenu:ie,isDragOver:d===G,onDragEnterRow:ye},`${V.Id}-${R}`)}),y&&u.jsx("div",{className:"px-4 pt-4 pb-6 flex justify-center",children:u.jsx(Qc,{})})]})]})]})]}),u.jsx(qy,{item:l,itemType:l?"song":null,isOpen:r,onClose:()=>{s(!1),o(null)},onNavigate:e,mode:a,position:c||void 0})]})})}function Jy({onClose:e,onNavigateFromContextMenu:t}){const{songs:n,currentIndex:r,isPlaying:s,shuffle:l,repeat:o,togglePlayPause:a,toggleShuffle:i,toggleRepeat:c,next:f,previous:d}=Z(),h=r>=0&&r<n.length-1,x=r>0;return u.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[u.jsx(ou,{onNavigateFromContextMenu:t,contentPaddingBottom:"8rem"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:u.jsx("div",{className:"px-6 pt-2 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"},children:u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsx("button",{onClick:i,"aria-label":l?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${l?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(Cr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:d,disabled:!x,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${x?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(tu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:a,"aria-label":s?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:s?u.jsx(As,{className:"w-8 h-8"}):u.jsx(_n,{className:"w-8 h-8"})}),u.jsx("button",{onClick:f,disabled:!h,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${h?"text-white hover:bg-zinc-800 active:bg-zinc-800":"text-zinc-600 cursor-not-allowed"}`,children:u.jsx(nu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:c,"aria-label":o==="off"?"Enable repeat":o==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${o!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:o==="one"?u.jsx(Zi,{className:"w-6 h-6"}):u.jsx(eu,{className:"w-6 h-6"})})]})})})]})}function Zy(){const e=ru(),t=su(),{isQueueSidebarOpen:n}=Z(),r=e||t,[s,l]=g.useState(null),[o,a]=g.useState(!1);return g.useEffect(()=>{(async()=>{if(!r){l(null);return}a(!0);try{const c=await $.getLyrics(r.Id);l(c)}catch(c){A.error("Failed to fetch lyrics:",c),l(null)}finally{a(!1)}})()},[r==null?void 0:r.Id]),r?u.jsxs("div",{className:`fixed left-0 right-0 z-[55] flex flex-col transition-[right] duration-300 ease-out ${n?"lyrics-with-sidebar":""}`,style:{top:"calc(var(--header-offset, 0px) + env(safe-area-inset-top) + 4rem)",bottom:"calc(11rem + env(safe-area-inset-bottom))"},children:[u.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 py-4 relative",children:o?u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50",children:"Loading lyrics..."})}):s?u.jsx("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto pb-8 pl-8 pr-4",children:u.jsx("div",{className:"text-white text-center whitespace-pre-line text-xl lg:text-3xl",children:s.split(`
`).map((i,c)=>u.jsx("div",{className:"mb-6 leading-relaxed",children:i},c))})}):u.jsx("div",{className:"flex items-center justify-center h-full px-6",children:u.jsx("div",{className:"text-white/50 text-center",children:"This song has no lyrics"})})}),u.jsx("div",{className:"h-px bg-white/20 flex-shrink-0"})]}):null}function ev({onClose:e,onClosingStart:t,closeRef:n}){const r=Us(),{songs:s,currentIndex:l,isPlaying:o,currentTime:a,duration:i,shuffle:c,repeat:f,togglePlayPause:d,next:h,previous:x,seek:v,setVolume:k,toggleShuffle:S,toggleRepeat:p,playTrack:m,isQueueSidebarOpen:y,toggleQueueSidebar:w}=Z(),N=ru(),E=su(),I=N||E,[C,P]=g.useState(!1);g.useEffect(()=>{P(!1)},[]);const[b,H]=g.useState(!1),[Y,K]=g.useState(!1),[M,ee]=g.useState(null),[re,le]=g.useState("up"),[j,L]=g.useState(null),[B,te]=g.useState(null),[ie,ye]=g.useState(!1),[fe,it]=g.useState(!1),[he,be]=g.useState(!1),[Kt,Be]=g.useState(!1),[Te,Ot]=g.useState(null),[Xt,V]=g.useState(null),R=g.useRef(null),G=g.useRef(null),J=g.useRef(null),Ne=g.useRef(null),de=g.useRef(!1),Le=g.useRef(null);g.useEffect(()=>{const z=window.getComputedStyle(document.body).overflowY,W=window.getComputedStyle(document.documentElement).overflowY,q=document.getElementById("root")?window.getComputedStyle(document.getElementById("root")).overflowY:"N/A";document.body.style.overflowY="hidden",document.documentElement.style.overflowY="hidden";const Ue=document.getElementById("root");return Ue&&(Ue.style.overflowY="hidden"),()=>{document.body.style.overflowY=z,document.documentElement.style.overflowY=W,Ue&&(Ue.style.overflowY=q!=="N/A"?q:"")}},[]),g.useEffect(()=>{requestAnimationFrame(()=>{be(!0)})},[]);const Ve=s.length>0&&(l<0||l<s.length-1||f!=="off"),sr=l>0||f==="all"&&s.length>0;g.useEffect(()=>{(async()=>{if(!I){ye(!1);return}try{const W=await $.getLyrics(I.Id),q=W!==null&&W.trim().length>0;ye(q)}catch{ye(!1)}})()},[I]);const Jt=z=>{if(!z)return"Unknown";if(z.Name&&z.Name.trim())return z.Name;const W=z.Path;return W&&typeof W=="string"&&(W.split("/").pop()||W.split("\\").pop())||"Unknown"},On=z=>{var W,q;return z&&(((q=(W=z.ArtistItems)==null?void 0:W[0])==null?void 0:q.Name)||z.AlbumArtist)||""};if(g.useEffect(()=>{"mediaSession"in navigator&&I&&(navigator.mediaSession.metadata=new MediaMetadata({title:Jt(I),artist:On(I),album:I.Album||"",artwork:[{src:$.getAlbumArtUrl(I.AlbumId||I.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",d),navigator.mediaSession.setActionHandler("pause",d),navigator.mediaSession.setActionHandler("previoustrack",x),navigator.mediaSession.setActionHandler("nexttrack",h))},[I,o,d,h,x]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&i>0)try{navigator.mediaSession.setPositionState({duration:i,playbackRate:1,position:Math.min(a,i)})}catch{}},[a,i]),g.useEffect(()=>{Be(!1)},[I==null?void 0:I.Id]),g.useEffect(()=>{if(!I)return;const z=$.getAlbumArtUrl(I.AlbumId||I.Id);if(!Te){Ot(z);return}if(z===Te)return;const W=new window.Image,q=()=>{V(Te),Ot(z),setTimeout(()=>{V(null)},1100)};W.onload=q,W.onerror=q,W.src=z},[I==null?void 0:I.Id,I==null?void 0:I.AlbumId]),!I)return null;const Zt=i>0?a/i*100:0,pn=z=>{const W=Math.floor(z/60),q=Math.floor(z%60);return`${W}:${q.toString().padStart(2,"0")}`},U=()=>{if(I.Name&&I.Name.trim())return I.Name;const z=I.Path;return z&&typeof z=="string"&&(z.split("/").pop()||z.split("\\").pop())||"Unknown"},ce=()=>{var z,W;return((W=(z=I.ArtistItems)==null?void 0:z[0])==null?void 0:W.Name)||I.AlbumArtist},ae=I.AlbumId&&I.Album&&I.Album.trim(),Tt=z=>{if(!R.current||!i||de.current)return;const W=R.current.getBoundingClientRect(),q=(z.clientX-W.left)/W.width;v(Math.max(0,Math.min(1,q))*i)},At=z=>{if(!R.current||!i)return;de.current=!0,Le.current=z.clientX;const W=R.current.getBoundingClientRect(),q=(z.clientX-W.left)/W.width;v(Math.max(0,Math.min(1,q))*i)},Ft=()=>{de.current=!1,Le.current=null},Ae=z=>{if(!R.current||!i)return;z.stopPropagation(),de.current=!0;const W=z.touches[0],q=R.current.getBoundingClientRect(),Ue=(W.clientX-q.left)/q.width;v(Math.max(0,Math.min(1,Ue))*i)},O=z=>{if(!de.current||!R.current||!i)return;z.stopPropagation(),z.preventDefault();const W=z.touches[0],q=R.current.getBoundingClientRect(),Ue=(W.clientX-q.left)/q.width;v(Math.max(0,Math.min(1,Ue))*i)},_=z=>{z.stopPropagation(),de.current=!1,Le.current=null};g.useEffect(()=>{let z=null;const W=Ue=>{!de.current||!R.current||!i||z===null&&(z=requestAnimationFrame(()=>{if(z=null,!de.current||!R.current)return;const Fn=R.current.getBoundingClientRect(),D=(Ue.clientX-Fn.left)/Fn.width;v(Math.max(0,Math.min(1,D))*i)}))},q=()=>{de.current&&(de.current=!1,Le.current=null),z!==null&&(cancelAnimationFrame(z),z=null)};return document.addEventListener("mousemove",W),document.addEventListener("mouseup",q),()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",q),z!==null&&cancelAnimationFrame(z)}},[i,v]);const ne=()=>{it(!0),t==null||t(),setTimeout(()=>{e()},300)},pe=(z="up")=>{const W=z==="down"?B:j;if(W){const q=W.getBoundingClientRect();ee({top:z==="down"?q.bottom:q.top,left:q.left+q.width/2}),le(z),K(!0)}};g.useEffect(()=>(n&&(n.current=ne),()=>{n&&(n.current=null)}),[n]);const rt=z=>{C||b||(G.current=z.touches[0].clientY,J.current=Date.now())},en=z=>{if(C||b||G.current===null)return;const q=z.touches[0].clientY-G.current;if(q>0&&Ne.current){const Ue=Math.min(q,window.innerHeight*.5);Ne.current.style.transform=`translateY(${Ue}px)`}},tn=z=>{if(C||b||G.current===null||J.current===null){G.current=null,J.current=null,Ne.current&&(Ne.current.style.transform="");return}const q=z.changedTouches[0].clientY-G.current,Ue=Date.now()-J.current,Fn=50,D=.3;Ne.current&&(Ne.current.style.transform="");const Q=q/Ue;(q>Fn||q>30&&Q>D)&&ne(),G.current=null,J.current=null};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
      @media (min-aspect-ratio: 4/3) and (min-width: 768px) {
        .landscape\\:flex-row { flex-direction: row; }
        .landscape\\:items-center { align-items: center; }
        .landscape\\:gap-8 { gap: 2rem; }
        .landscape\\:order-1 { order: 1; }
        .landscape\\:flex-shrink-0 { flex-shrink: 0; }
        .landscape\\:order-2 { order: 2; }
        .landscape\\:text-left { text-align: left; }
        .landscape\\:flex-1 { flex: 1; }
        .landscape\\:max-w-xs { max-width: 20rem; }
        .landscape\\:justify-start { justify-content: flex-start; }
        .landscape\\:mx-0 { margin-left: 0; margin-right: 0; }
      }

      @media (min-width: 1024px) {
        .lg\\:max-w-\\[864px\\] { max-width: 864px; }
      }

      /* Queue sidebar in player modal - transparent backgrounds (exclude fixed elements like context menus) */
      .queue-xl-container .bg-zinc-900:not([style*="position: fixed"]):not(.fixed) { background-color: transparent; }
      .queue-xl-container .hover\\:bg-zinc-900:hover:not([style*="position: fixed"]):not(.fixed) { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .hover\\:bg-zinc-800:hover { background-color: rgba(255, 255, 255, 0.1); }
      .queue-xl-container .text-\\[var\\(--accent-color\\)\\] { color: white; }

      /* Background crossfade animation - only on large screens */
      @keyframes bgFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .bg-fade-in {
        animation: none; /* Instant on smaller screens */
      }
      @media (min-width: 1280px) {
        .bg-fade-in {
          animation: bgFadeIn 1s ease-out forwards;
        }
      }

      /* Lyrics modal with sidebar - adjust right edge on xl screens */
      @media (min-width: 1280px) {
        .lyrics-with-sidebar { right: var(--sidebar-width) !important; }
      }
    `}),u.jsxs("div",{ref:Ne,onTouchStart:rt,onTouchMove:en,onTouchEnd:tn,className:`fixed left-0 right-0 bg-zinc-900 z-[70] flex transition-transform duration-300 ease-out overflow-hidden ${fe?"translate-y-full":he?"translate-y-0":"translate-y-full"}`,style:{top:"var(--header-offset, 0px)",paddingTop:"calc(env(safe-area-inset-top) + var(--header-offset, 0px))",bottom:"calc(-1 * env(safe-area-inset-bottom))",height:"calc(100% + env(safe-area-inset-bottom) + var(--header-offset, 0px))",transition:G.current===null?"transform 300ms ease-out":"none"},children:[!Kt&&(Te||Xt)&&u.jsxs("div",{className:C?"hidden xl:contents":"contents",children:[Xt&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Xt})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]}),Te&&u.jsxs("div",{className:"absolute inset-0 bg-fade-in",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Te})`,filter:"blur(100px)",transform:"scale(1.2)"}}),u.jsx("div",{className:"absolute top-0 left-0 right-0 h-[150px] bg-gradient-to-b from-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[200px] bg-gradient-to-t from-zinc-900/50 to-transparent pointer-events-none"})]},Te)]}),u.jsx("div",{className:C?"hidden xl:contents":"contents",children:u.jsx("div",{className:"absolute inset-0 bg-black/40 z-[1] pointer-events-none"})}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-[2]",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 relative",children:[u.jsx("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:u.jsx("button",{onClick:ne,"aria-label":"Close player",className:"text-white hover:text-zinc-300 transition-colors z-10 flex-shrink-0",children:u.jsx(N1,{className:"w-8 h-8"})})}),b&&I&&u.jsx("h2",{className:"hidden min-[480px]:block absolute left-0 right-0 text-center text-white text-sm sm:text-base font-medium px-20 truncate",children:U()}),u.jsxs("div",{className:"flex items-center gap-2 z-10 flex-shrink-0",children:[u.jsx("div",{className:`${C?"xl:hidden":"md:hidden"}`,children:!zt()&&u.jsx(on,{variant:"compact",onOpenPopover:()=>pe("down"),onRef:te,className:"text-white hover:text-zinc-300 hover:bg-white/10 rounded-full transition-colors p-2"})}),u.jsx("button",{onClick:()=>{!ie&&!b||(C&&P(!1),H(!b))},"aria-label":b?"Hide lyrics":"Show lyrics",className:`transition-colors p-2 rounded-full ${ie||b?`hover:bg-white/10 ${b?"text-[var(--accent-color)]":"text-white"}`:"hidden"}`,children:u.jsx(K1,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>{C||H(!1),P(!C)},"aria-label":C?"Show player":"Show queue",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 xl:hidden",children:C?u.jsx(hy,{className:"w-6 h-6"}):u.jsx(Ya,{className:"w-6 h-6"})}),!y&&u.jsx("button",{onClick:w,"aria-label":"Open queue sidebar",className:"text-white hover:bg-white/10 rounded-full transition-colors p-2 hidden xl:block",children:u.jsx(Ya,{className:"w-6 h-6"})})]})]}),C&&u.jsx("div",{className:"flex-1 bg-zinc-900 relative z-10 xl:hidden",children:u.jsx(Jy,{onClose:()=>P(!1),onNavigateFromContextMenu:()=>{ne()}})}),u.jsxs("div",{className:`flex-1 flex-col min-h-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full relative ${C?"hidden xl:flex":"flex"}`,style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[u.jsx("div",{className:`flex-1 overflow-hidden min-h-0 flex items-center justify-center ${b?"invisible":""}`,children:u.jsx("div",{className:"w-full flex flex-col items-center px-4 sm:px-8 md:pr-0",children:u.jsxs("div",{className:"w-full flex flex-col items-center landscape:flex-row landscape:items-center landscape:gap-8",children:[u.jsx("div",{className:"landscape:order-1 landscape:flex-shrink-0",children:u.jsx("div",{className:`rounded overflow-hidden mb-4 lg:mb-8 ${Kt?"":"bg-zinc-900 shadow-2xl"}`,style:{width:"clamp(224px, min(70vw, 50vh), 480px)",height:"clamp(224px, min(70vw, 50vh), 480px)",maxWidth:"100%"},children:Kt?u.jsx("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center relative",children:u.jsx("img",{src:"/assets/vinyl.png",alt:"Vinyl Record",className:"w-full h-full object-cover",onError:z=>{A.error("Failed to load vinyl image"),z.currentTarget.style.display="none"}})}):u.jsx(Rs,{src:$.getAlbumArtUrl(I.AlbumId||I.Id),alt:I.Name,className:"w-full h-full object-cover",rounded:"rounded",onError:()=>Be(!0)})})}),u.jsxs("div",{className:"text-center landscape:text-left w-full landscape:order-2 landscape:flex-1 landscape:max-w-xs",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:U()}),ce()&&u.jsxs("button",{onClick:()=>{var W,q;const z=(q=(W=I.ArtistItems)==null?void 0:W[0])==null?void 0:q.Id;z&&(e(),r(`/artist/${z}`))},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left max-w-full min-w-0",children:[u.jsx(Yl,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:ce()})]}),ae&&u.jsxs("button",{onClick:()=>{e(),r(`/album/${I.AlbumId}`)},className:"flex items-center justify-start landscape:justify-start gap-2 text-white/70 text-base sm:text-lg hover:text-white transition-colors mx-auto landscape:mx-0 landscape:text-left mt-1 max-w-full min-w-0",children:[u.jsx(Xi,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),u.jsx("span",{className:"break-words min-w-0",children:I.Album})]})]})]})})}),u.jsxs("div",{className:"pt-2 space-y-6 flex-shrink-0 mt-4 sm:mt-0 max-w-[768px] lg:max-w-[864px] mx-auto w-full",style:{paddingBottom:"1.5rem"},children:[u.jsx("div",{className:"space-y-3 px-4 w-full",children:u.jsxs("div",{className:"max-w-[768px] lg:max-w-[864px] mx-auto",children:[u.jsx("div",{ref:R,className:"h-2 bg-white/10 rounded-full cursor-pointer w-full select-none overflow-hidden",onClick:Tt,onMouseDown:At,onMouseUp:Ft,onMouseLeave:Ft,onTouchStart:Ae,onTouchMove:O,onTouchEnd:_,children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${Zt}%`,borderTopLeftRadius:"9999px",borderBottomLeftRadius:"9999px",borderTopRightRadius:Zt>=100?"9999px":"0",borderBottomRightRadius:Zt>=100?"9999px":"0"}})}),u.jsxs("div",{className:"flex justify-between text-xs text-white/70 mt-2 tabular-nums",children:[u.jsx("span",{children:pn(a)}),u.jsx("span",{children:pn(i)})]})]})}),u.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 relative",children:[u.jsx("button",{onClick:S,"aria-label":c?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${c?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:u.jsx(Cr,{className:"w-6 h-6"})}),u.jsx("button",{onClick:x,disabled:!sr,"aria-label":"Previous track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${sr?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(tu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:()=>{N?d():I&&m(I)},"aria-label":o&&N?"Pause":"Play",className:"w-16 h-16 flex items-center justify-center rounded-full transition-colors aspect-square bg-[var(--accent-color)] text-white hover:opacity-90",children:o&&N?u.jsx(As,{className:"w-8 h-8"}):u.jsx(_n,{className:"w-8 h-8"})}),u.jsx("button",{onClick:h,disabled:!Ve,"aria-label":"Next track",className:`w-12 h-12 flex-shrink-0 aspect-square flex items-center justify-center rounded-full transition-colors ${Ve?"text-white hover:bg-zinc-800/35 active:bg-zinc-800/35":"text-white/30 cursor-not-allowed"}`,children:u.jsx(nu,{className:"w-8 h-8"})}),u.jsx("button",{onClick:p,"aria-label":f==="off"?"Enable repeat":f==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${f!=="off"?"text-[var(--accent-color)]":"text-white/70 hover:text-white"}`,children:f==="one"?u.jsx(Zi,{className:"w-6 h-6"}):u.jsx(eu,{className:"w-6 h-6"})}),u.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 hidden md:flex",children:!zt()&&u.jsx(on,{variant:"horizontal"})})]})]})]}),b&&u.jsx(Zy,{}),Y&&M&&!zt()&&u.jsx(on,{variant:"vertical",onClose:()=>K(!1),popoverPosition:M,popoverDirection:re})]}),u.jsx("div",{className:"hidden xl:flex flex-col flex-shrink-0 relative z-10 transition-[width] duration-300 ease-out overflow-hidden",style:{width:y?"var(--sidebar-width)":"0px"},children:u.jsxs("div",{className:"flex flex-col h-full flex-shrink-0",style:{width:"var(--sidebar-width)"},children:[u.jsx("div",{className:`border-l border-white/20 flex-shrink-0 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/20 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:w,"aria-label":"Close queue sidebar",className:"text-white/70 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 relative z-20",children:u.jsx(er,{className:"w-5 h-5"})})]})}),u.jsx("div",{className:`flex-1 overflow-y-auto min-h-0 border-l border-white/20 queue-xl-container [&_.text-gray-400]:text-white/60 [&_.text-gray-500]:text-white/50 [&_.text-gray-300]:text-white/70 [&_.border-zinc-800]:border-white/20 [&_.bg-zinc-600]:bg-white/30 transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:u.jsx(ou,{onNavigateFromContextMenu:ne,contentPaddingBottom:"2rem"})})]})})]})]})}function tv(){var Jt,On,Zt,pn;const{songs:e,currentIndex:t,isPlaying:n,currentTime:r,duration:s,audioElement:l,setAudioElement:o,togglePlayPause:a,next:i,setCurrentTime:c,setDuration:f,playTrack:d,repeat:h,shuffle:x,toggleShuffle:v,toggleRepeat:k,previous:S,seek:p,skipToTrack:m,isQueueSidebarOpen:y,toggleQueueSidebar:w,setNextAudioElement:N,preBufferNextTrack:E}=Z(),I=ru(),C=su(),[P,b]=g.useState(!1),[H,Y]=g.useState(!1),[K,M]=g.useState(!1),[ee,re]=g.useState(!1),[le,j]=g.useState(null),[L,B]=g.useState(null),[te,ie]=g.useState(null),ye=g.useRef(null),fe=g.useRef(null),it=g.useRef(null),he=g.useRef(null),be=g.useRef(!1),Kt=Yt(),Be=g.useRef(null),Te=g.useRef(null),Ot=g.useRef(null);g.useEffect(()=>{P&&(Y(!0),setTimeout(()=>{b(!1),Y(!1)},300))},[Kt.pathname]),g.useEffect(()=>{b(!1),Y(!1)},[]),g.useEffect(()=>{const U=()=>{P&&it.current&&it.current()};return window.addEventListener("closePlayerModal",U),()=>{window.removeEventListener("closePlayerModal",U)}},[P]);const Xt=()=>{Y(!0),setTimeout(()=>{b(!1),Y(!1)},300)};g.useEffect(()=>{ye.current||(ye.current=new Audio,ye.current.setAttribute("playsinline","true"),ye.current.setAttribute("preload","auto"),o(ye.current)),fe.current||(fe.current=new Audio,fe.current.setAttribute("playsinline","true"),fe.current.setAttribute("preload","auto"),N(fe.current));const U=Z.getState().volume;ye.current&&(ye.current.volume=U),fe.current&&(fe.current.volume=U)},[o,N]),g.useEffect(()=>{const U=()=>{be.current=!1};return window.addEventListener("playerSeek",U),()=>window.removeEventListener("playerSeek",U)},[]),g.useEffect(()=>{if(!zt())return;const U=()=>{document.visibilityState==="visible"&&setTimeout(()=>{const ce=Z.getState(),ae=ce.audioElement;!ae||!ce.isPlaying||ae.paused&&ae.play().catch(()=>{Z.setState({isPlaying:!1})})},300)};return document.addEventListener("visibilitychange",U),()=>document.removeEventListener("visibilitychange",U)},[]),g.useEffect(()=>{if(!l)return;let U=!0;be.current=!1;const ce=()=>{if(!U)return;c(l.currentTime);const Ae=l.duration-l.currentTime;if(l.duration>0&&Ae<=15&&Ae>0&&E(),!be.current&&l.duration>0&&Ae<=1&&Ae>0){be.current=!0;const O=Z.getState(),_=O.currentIndex>=0&&O.currentIndex<O.songs.length?O.songs[O.currentIndex]:null;if(O.repeat==="one"){if(_&&!O.hasRecordedCurrentTrackStats){const ne=l.currentTime*1e3;He.getState().recordPlay(_,ne)}Z.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,be.current=!1;return}if(_){$.markItemAsPlayed(_.Id).catch(()=>{}),he.current&&clearTimeout(he.current);const ne=_.Id;he.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:ne}})),he.current=null},4e3)}i()}},ae=()=>{U&&(f(l.duration),be.current=!1,A.debug("[PlayerBar] Metadata loaded",{duration:l.duration}))},Tt=async()=>{if(A.debug("[PlayerBar] handleEnded fired",{preemptive:be.current}),!U)return;if(be.current){be.current=!1;return}const Ae=Z.getState(),O=Ae.currentIndex>=0&&Ae.currentIndex<Ae.songs.length?Ae.songs[Ae.currentIndex]:null;if(O)try{await $.markItemAsPlayed(O.Id),he.current&&clearTimeout(he.current);const ne=O.Id;he.current=setTimeout(()=>{window.dispatchEvent(new CustomEvent("trackPlayed",{detail:{trackId:ne}})),he.current=null},4e3)}catch{}if(Ae.repeat==="one"){const ne=Ae.hasRecordedCurrentTrackStats;if(O&&!ne){const pe=l.currentTime*1e3;He.getState().recordPlay(O,pe)}Z.setState({hasRecordedCurrentTrackStats:!1}),l.currentTime=0,l.play();return}i()},At=()=>{U&&Z.getState().audioElement===l&&(Z.setState({isPlaying:!0}),A.debug("[PlayerBar] handlePlay",{src:l.src}))},Ft=()=>{U&&Z.getState().audioElement===l&&(Z.setState({isPlaying:!1}),A.debug("[PlayerBar] handlePause",{paused:l.paused}))};return l.addEventListener("timeupdate",ce),l.addEventListener("loadedmetadata",ae),l.addEventListener("ended",Tt),l.addEventListener("play",At),l.addEventListener("pause",Ft),()=>{U=!1,l.removeEventListener("timeupdate",ce),l.removeEventListener("loadedmetadata",ae),l.removeEventListener("ended",Tt),l.removeEventListener("play",At),l.removeEventListener("pause",Ft),he.current&&(clearTimeout(he.current),he.current=null)}},[l,c,f,i,E]),g.useEffect(()=>{var U,ce;"mediaSession"in navigator&&I&&(navigator.mediaSession.metadata=new MediaMetadata({title:I.Name||"Unknown",artist:((ce=(U=I.ArtistItems)==null?void 0:U[0])==null?void 0:ce.Name)||I.AlbumArtist||"",album:I.Album||"",artwork:[{src:$.getAlbumArtUrl(I.AlbumId||I.Id,512),sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",a),navigator.mediaSession.setActionHandler("pause",a),navigator.mediaSession.setActionHandler("previoustrack",S),navigator.mediaSession.setActionHandler("nexttrack",i))},[I,a,i,S]),g.useEffect(()=>{if("mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&s>0)try{navigator.mediaSession.setPositionState({duration:s,playbackRate:1,position:Math.min(r,s)})}catch{}},[r,s]),g.useEffect(()=>{if(I&&!n&&l){const U=$.serverBaseUrl,ce=U?`${U}/Audio/${I.Id}/stream?static=true`:"";l.src!==ce&&(l.src=ce,l.load())}},[I,n,l]);const V=e.length>0?e[0]:null,R=I||C||V;g.useEffect(()=>{M(!1)},[R==null?void 0:R.Id]);const G=s>0?r/s*100:0,J=U=>{const ce=Math.floor(U/60),ae=Math.floor(U%60);return`${ce}:${ae.toString().padStart(2,"0")}`},Ne=e.length>0&&(t<0||t<e.length-1||h!=="off"),de=t>0||h==="all"&&e.length>0,Le=()=>{const ce=window.innerWidth<768?te:L;if(ce){const ae=ce.getBoundingClientRect();j({top:ae.top,left:ae.left+ae.width/2}),re(!0)}},Ve=U=>{Be.current=U.touches[0].clientX,Te.current=Date.now()},sr=U=>{if(Be.current===null||Te.current===null){Be.current=null,Te.current=null;return}const ae=U.changedTouches[0].clientX-Be.current,Tt=Date.now()-Te.current,At=50,Ft=.3,Ae=Math.abs(ae)/Tt;ae>At||ae>30&&Ae>Ft?de&&S():(ae<-At||ae<-30&&Ae>Ft)&&Ne&&i(),Be.current=null,Te.current=null};return R?u.jsxs(u.Fragment,{children:[u.jsxs("div",{ref:Ot,className:"fixed left-0 right-0 bg-zinc-900 border-t border-zinc-800 z-40 cursor-pointer bottom-[calc(4rem-8px)] lg:bottom-0",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:()=>{b(!0)},onTouchStart:Ve,onTouchEnd:sr,children:[R&&u.jsx("div",{className:"hidden lg:block absolute left-0 right-0 cursor-pointer group",style:{top:"-10px",height:"24px"},onClick:U=>{if(U.stopPropagation(),!s)return;const ce=U.currentTarget.getBoundingClientRect(),ae=(U.clientX-ce.left)/ce.width;p(Math.max(0,Math.min(1,ae))*s)},onTouchStart:U=>{if(U.stopPropagation(),!s)return;const ce=U.touches[0],ae=U.currentTarget.getBoundingClientRect(),Tt=(ce.clientX-ae.left)/ae.width;p(Math.max(0,Math.min(1,Tt))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 bottom-[10px] h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${G}%`}})})}),u.jsxs("div",{className:"hidden md:block md:relative md:px-4 md:pt-3 md:pb-1 lg:pb-3",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0 max-w-[37%]",children:[!K&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx(Rs,{src:$.getAlbumArtUrl((I||R).AlbumId||(I||R).Id,96),alt:(I||R).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>M(!0)},(I==null?void 0:I.Id)||R.Id)}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(I||R).Name}),u.jsxs("div",{className:"text-xs text-gray-400 truncate flex items-center gap-1.5 min-w-0",children:[u.jsx("span",{className:"truncate",children:((On=(Jt=(I||R).ArtistItems)==null?void 0:Jt[0])==null?void 0:On.Name)||(I||R).AlbumArtist||"Unknown Artist"}),u.jsx("span",{className:"flex-shrink-0",children:""}),u.jsxs("span",{className:"tabular-nums flex-shrink-0",children:[J(r),"/",J(s)]})]})]})]}),u.jsxs("div",{className:"absolute top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 md:right-16 md:left-auto md:translate-x-0 lg:left-1/2 lg:right-auto lg:-translate-x-1/2 flex items-center gap-2",children:[u.jsx("button",{onClick:U=>{U.stopPropagation(),v()},"aria-label":x?"Disable shuffle":"Enable shuffle",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${x?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:u.jsx(Cr,{className:"w-5 h-5"})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),de&&S()},disabled:!de,"aria-label":"Previous track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${de?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(tu,{className:"w-5 h-5"})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),I?a():e.length>0?m(0):R&&d(R)},"aria-label":n&&I?"Pause":"Play",className:"w-10 h-10 mx-2 flex items-center justify-center rounded-full transition-colors text-white bg-[var(--accent-color)] hover:opacity-90",children:n&&I?u.jsx(As,{className:"w-5 h-5"}):u.jsx(_n,{className:"w-5 h-5"})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),Ne&&i()},disabled:!Ne,"aria-label":"Next track",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${Ne?"text-white hover:bg-zinc-800":"text-gray-600 cursor-not-allowed"}`,children:u.jsx(nu,{className:"w-5 h-5"})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),k()},"aria-label":h==="off"?"Enable repeat":h==="all"?"Repeat one":"Disable repeat",className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${h!=="off"?"text-[var(--accent-color)]":"text-gray-400 hover:text-zinc-300"}`,children:h==="one"?u.jsx(Zi,{className:"w-5 h-5"}):u.jsx(eu,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"absolute right-4 top-1/2 md:top-[calc(50%+4px)] lg:top-1/2 -translate-y-1/2 flex items-center gap-4",children:[u.jsx("div",{className:"hidden xl:block",children:!y&&u.jsx("button",{onClick:U=>{U.stopPropagation(),w()},className:"text-gray-400 hover:text-white hover:bg-zinc-800 transition-colors flex items-center justify-center w-10 h-10 rounded-full",title:"Open Queue","aria-label":"Open queue",children:u.jsx(Ya,{className:"w-5 h-5"})})}),u.jsx("div",{className:"hidden lg:block",onClick:U=>U.stopPropagation(),children:!zt()&&u.jsx(on,{variant:"horizontal"})}),u.jsx("div",{className:"hidden md:block lg:hidden",children:!zt()&&u.jsx(on,{variant:"compact",onOpenPopover:Le,onRef:B,className:"w-10 h-10 flex items-center justify-center text-white hover:text-zinc-300 hover:bg-zinc-800 rounded-full transition-colors"})})]})]}),u.jsxs("div",{className:"flex items-center gap-3 pt-3 pb-1 pr-3 pl-4 md:hidden",children:[!K&&u.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900",children:u.jsx(Rs,{src:$.getAlbumArtUrl((I||R).AlbumId||(I||R).Id,96),alt:(I||R).Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>M(!0)},(I==null?void 0:I.Id)||R.Id)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate",children:(I||R).Name}),u.jsx("div",{className:"text-xs text-gray-400 truncate",children:((pn=(Zt=(I||R).ArtistItems)==null?void 0:Zt[0])==null?void 0:pn.Name)||(I||R).AlbumArtist||"Unknown Artist"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!zt()&&u.jsx(on,{variant:"compact",onOpenPopover:Le,onRef:ie,className:"text-white hover:text-zinc-300 transition-colors"}),u.jsx("button",{onClick:U=>{U.stopPropagation(),I?a():e.length>0?m(0):R&&d(R)},"aria-label":n&&I?"Pause":"Play",className:"w-10 h-10 flex items-center justify-center text-white hover:bg-zinc-800 rounded-full transition-colors",children:n&&I?u.jsx(As,{className:"w-5 h-5"}):u.jsx(_n,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"lg:hidden",style:{marginBottom:"-10px"},children:R&&u.jsx("div",{className:"relative cursor-pointer group flex items-center",style:{height:"24px"},onClick:U=>{if(U.stopPropagation(),!s)return;const ce=U.currentTarget.getBoundingClientRect(),ae=(U.clientX-ce.left)/ce.width;p(Math.max(0,Math.min(1,ae))*s)},onTouchStart:U=>{if(U.stopPropagation(),!s)return;const ce=U.touches[0],ae=U.currentTarget.getBoundingClientRect(),Tt=(ce.clientX-ae.left)/ae.width;p(Math.max(0,Math.min(1,Tt))*s)},role:"slider","aria-label":"Seek","aria-valuemin":0,"aria-valuemax":s||100,"aria-valuenow":r,children:u.jsx("div",{className:"absolute left-0 right-0 h-1 bg-white/10 group-hover:bg-white/20 transition-colors duration-200",children:u.jsx("div",{className:"h-full bg-[var(--accent-color)] transition-all",style:{width:`${G}%`}})})})})]}),P&&u.jsx(ev,{onClose:Xt,onClosingStart:()=>Y(!0),closeRef:it}),ee&&le&&!zt()&&u.jsx(on,{variant:"vertical",onClose:()=>re(!1),popoverPosition:le})]}):null}function nv(){const e=Qe(c=>c.state),t=Qe(c=>c.message),n=Qe(c=>c.progress),r=Qe(c=>c.cancelSync),s=Z(c=>c.isQueueSidebarOpen),l=We(c=>c.localServerUrl);if(e==="idle")return null;const o=()=>{switch(e){case"syncing":return"bg-zinc-800";case"success":return"bg-green-800";case"error":return"bg-red-800";default:return"bg-zinc-800"}},a=yo()||l,i=e==="syncing"&&a?$.serverBaseUrl===a.replace(/\/$/,"")?"Syncing via LAN server...":"Syncing via remote server...":t;return u.jsx("div",{className:`fixed top-0 left-0 right-0 z-[10002] ${o()} transition-colors duration-300`,style:{height:"28px",top:"0px",paddingLeft:"16px",paddingRight:s?"var(--sidebar-width)":"12px",scrollbarGutter:"stable"},children:u.jsxs("div",{className:"h-full flex items-center",children:[u.jsxs("span",{className:"text-white text-sm font-medium truncate",children:[i,e==="syncing"&&n!==null&&u.jsxs("span",{className:"tabular-nums",children:[" (",n,"%)"]})]}),e==="syncing"&&u.jsx("button",{onClick:r,className:"text-white text-sm font-medium hover:text-zinc-300 transition-colors ml-8",children:"Cancel"})]})})}const Ko=new Set;async function rv(e){const t=e.toLowerCase();if(!Ko.has(t)){Ko.add(t);try{A.log(`[Recommendations] Auto-syncing genre "${e}" for better recommendations...`);const{genres:n,setGenreSongs:r}=oe.getState();let s=n;s.length===0&&(s=await $.getGenres());const l=s.find(a=>a.Name&&e&&a.Name.toLowerCase()===e.toLowerCase());if(!l||!l.Id){A.warn(`[Recommendations] Genre "${e}" not found in server`);return}A.log(`[Recommendations] Fetching songs for genre "${e}"...`);const o=await $.getGenreSongs(l.Id,e);o.length>0?(r(l.Id,o),A.log(`[Recommendations]  Successfully cached ${o.length} songs for genre "${e}"`)):A.warn(`[Recommendations] No songs found for genre "${e}" on server`)}catch(n){A.error(`[Recommendations] Failed to sync genre "${e}":`,n)}finally{setTimeout(()=>{Ko.delete(t)},1e4)}}}async function sv({currentTrack:e,queue:t}){var w;if(!e)return{recommendations:[],hasGenreMatches:!1};const{songs:n,genreSongs:r,genres:s}=oe.getState(),l=e.Genres||[];let o=[];if(l.length>0&&s.length>0){const N=s.filter(E=>E.Name&&l.some(I=>I.toLowerCase()===E.Name.toLowerCase())).map(E=>E.Id).filter(E=>r[E]&&r[E].length>0);N.length>0&&(o=N.flatMap(E=>r[E]),A.log(`[Recommendations] Using ${o.length} pre-filtered songs from ${N.length} matching genres`))}if(o.length===0&&n.length>0&&(o=n,A.log(`[Recommendations] Using ${o.length} songs from main cache`)),o.length===0){const N=Object.values(r).flat();N.length>0&&(o=N,A.log(`[Recommendations] Using ${o.length} songs from all genre caches`))}if(o.length===0){const{setRecommendationsQuality:N}=We.getState();return N("failed"),{recommendations:[],hasGenreMatches:!1}}A.log("[Recommendations] Using",o.length,"available songs"),A.log("[Recommendations] Current track genres:",l,"(count:",l.length+")"),A.log("[Recommendations] Current track year:",e.ProductionYear),A.log("[Recommendations] Queue size:",t.length),A.log("[Recommendations] Sample available songs:",o.slice(0,3).map(N=>{var E;return`${N.Name} (${N.ProductionYear}) [${(E=N.Genres)==null?void 0:E.join(", ")}]`}));let a=[],i=!1;const c=e.ProductionYear,f=c?[{range:3,years:Array.from({length:7},(N,E)=>c-3+E)},{range:6,years:Array.from({length:13},(N,E)=>c-6+E)},{range:10,years:Array.from({length:21},(N,E)=>c-10+E)}]:[],d=N=>{const E=N.Id!==e.Id,I=!t.some(P=>P.Id===N.Id),C=!a.some(P=>P.Id===N.Id);return E&&I&&C},h=N=>{var E;return l.length===0?!0:((E=N.Genres)==null?void 0:E.some(I=>l.some(C=>I.toLowerCase()===C.toLowerCase())))??!1},x=(N,E)=>c?N.ProductionYear!==void 0&&E.includes(N.ProductionYear):!0;let v=0;if(l.length>0&&(v=o.filter(N=>h(N)).length,v===0)){for(const N of l)rv(N).catch(E=>A.error(`[Recommendations] Genre sync failed for ${N}:`,E));return{recommendations:[],hasGenreMatches:!1,triggeredGenreSync:!0}}for(const{range:N,years:E}of f){if(a.length>=12){A.log(`[Recommendations] Have ${a.length} recommendations, stopping at ${N} year range`);break}const I=12-a.length,C=o.filter(P=>!(!d(P)||!h(P)||!x(P,E)));if(A.log(`[Recommendations] Year range ${N}: found ${C.length} candidates, need ${I}`),C.length>0){const b=Ze(C).slice(0,I);a.push(...b),A.log(`[Recommendations] Added ${b.length} songs from ${N} year range`)}}if(a.length<12&&!c&&l.length>0){const N=12-a.length,E=o.filter(P=>!(!d(P)||!h(P))),C=Ze(E).slice(0,N);a.push(...C),A.log(`[Recommendations] Added ${C.length} genre-only songs (no year on seed track)`)}if(a.length<12&&c&&l.length===0)for(const{range:N,years:E}of f){if(a.length>=12)break;const I=12-a.length,C=o.filter(H=>!(!d(H)||!x(H,E))),b=Ze(C).slice(0,I);a.push(...b),A.log(`[Recommendations] Added ${b.length} year-only songs from ${N} range (no genre on seed track)`)}i=l.length>0&&a.some(N=>h(N)),A.log("[Recommendations] Matching results:",{totalRecommendations:a.length,genreMatchSuccess:i,hasGenres:l.length>0,hasYear:!!c});const k=Ze(a),S=[],p=[...k];for(;p.length>0&&S.length<12;){let N=-1;if(S.length>0){const C=((w=S[S.length-1].ArtistItems)==null?void 0:w.map(P=>P.Id))||[];N=p.findIndex(P=>{var H;return!(((H=P.ArtistItems)==null?void 0:H.map(Y=>Y.Id))||[]).some(Y=>C.includes(Y))})}N===-1&&(N=0);const E=p.splice(N,1)[0];S.push(E)}const m=S,{setRecommendationsQuality:y}=We.getState();return A.log("[Recommendations] Quality decision:",{finalRecommendationsCount:m.length,genreMatchSuccess:i,hasGenres:l.length>0,availableSongsCount:o.length}),m.length===0?y("failed"):!i&&l.length>0?y("degraded"):y("good"),A.log(`[Recommendations] Generated ${m.length} recommendations`),m.length>0&&A.log("[Recommendations] Sample:",m.slice(0,3).map(N=>N.Name)),{recommendations:m,hasGenreMatches:i,triggeredGenreSync:!1}}function lv(e){var s;if(e.length<=1)return e;const t=Ze(e),n=[],r=[...t];for(;r.length>0;){let l=-1;if(n.length>0){const i=((s=n[n.length-1].ArtistItems)==null?void 0:s.map(c=>c.Id))||[];l=r.findIndex(c=>{var d;return!(((d=c.ArtistItems)==null?void 0:d.map(h=>h.Id))||[]).some(h=>i.includes(h))})}l===-1&&(l=0);const o=r.splice(l,1)[0];n.push(o)}return n}function ov(){const{currentIndex:e,addToQueue:t,refreshCurrentTrack:n,isFetchingRecommendations:r,setIsFetchingRecommendations:s,repeat:l}=Z(),o=Z(v=>v.songs.length),{showQueueRecommendations:a}=We(),i=g.useRef([]),c=g.useRef(!1),f=g.useRef(0),d=g.useRef(0),h=g.useRef(0),x=3;g.useEffect(()=>{const v=Z.getState().songs;i.current=v.slice(-20)},[o]),g.useEffect(()=>{f.current=0,d.current=0,h.current=0},[e]),g.useEffect(()=>{f.current=0,d.current=0,h.current=0},[a]),g.useEffect(()=>{const v=Z.getState().songs,k=v.slice(e+1).filter(w=>w.source==="recommendation").length,S=Date.now()-f.current,p=Date.now()-d.current;if(!!!(a&&l==="off"&&!c.current&&!r&&e>=0&&k<12&&S>1e4&&p>5e3))return k>=12||l==="all",void 0;(async()=>{var N;c.current=!0,s(!0);const w=setTimeout(()=>{c.current=!1,s(!1)},3e4);try{await n();const E=v[e];if(!E)return;const I=[E],C=[e-1,e+1,e+2];for(const j of C)if(j>=0&&j<v.length&&I.length<3){const L=v[j];L&&!I.some(B=>B.Id===L.Id)&&I.push(L)}const P=[];for(const j of I){A.log(`[Recommendations] Generating recommendations for seed: ${j.Name}`);const L=await sv({currentTrack:j,queue:v,recentQueue:i.current,lastPlayedTrack:null});if(A.log(`[Recommendations] Result for seed ${j.Name}:`,{recommendationsCount:((N=L.recommendations)==null?void 0:N.length)||0,hasGenreMatches:L.hasGenreMatches,triggeredGenreSync:L.triggeredGenreSync,resultType:typeof L,isArray:Array.isArray(L)}),L.triggeredGenreSync){if(h.current+=1,h.current>x){A.warn("[Recommendations] Max retries reached, giving up"),f.current=Date.now();const{setRecommendationsQuality:te}=We.getState();te("failed");return}const B=15e3*Math.pow(2,h.current-1);A.log(`[Recommendations] Genre sync triggered (attempt ${h.current}/${x}), retry in ${B/1e3}s`),setTimeout(()=>{f.current=0},B);return}L.recommendations&&Array.isArray(L.recommendations)?P.push(L):A.warn(`[Recommendations] Invalid result for seed ${j.Name}:`,L)}const b=P.filter(j=>j.hasGenreMatches);if(A.log(`[Recommendations] ${b.length} out of ${I.length} seeds found genre matches`),b.length===0){const{setRecommendationsQuality:j}=We.getState();j("degraded"),A.log("[Recommendations] No genre matches found - falling back to year/artist only")}const H=v.slice(e+1).filter(j=>j.source==="recommendation").length,Y=Math.max(0,12-H);if(Y===0){A.log("[Recommendations] Already have 12 upcoming recommendations, skipping");return}A.log(`[Recommendations] Currently have ${H} upcoming, need ${Y} more to reach 12`);const K=b.length>0?b:P,M=Math.ceil(Y/K.length),ee=[];for(const j of K){const L=j.recommendations.filter(te=>{const ie=v.some(fe=>fe.Id===te.Id),ye=ee.some(fe=>fe.Id===te.Id);return!ie&&!ye}),B=L.slice(0,M);ee.push(...B),A.log(`[Recommendations] Added ${B.length} recommendations from seed (${L.length} available, genreMatch: ${j.hasGenreMatches})`)}const re=ee.slice(0,Y),le=lv(re);A.log(`[Recommendations] Final ${re.length} recommendations (distributed across ${I.length} seeds)`),le.length>0?(A.log(`[Recommendations] Adding ${le.length} recommendations (had ${H}, will have ${H+le.length})`),A.log("[Recommendations] Recommendations to add:",le.map(j=>j.Name)),f.current=0,d.current=Date.now(),h.current=0,t(le,!1,"recommendation"),A.log("[Recommendations] Successfully added recommendations to queue")):(A.log("[Recommendations] No safe recommendations to add - marking as failed attempt"),f.current=Date.now())}catch(E){A.error("[Recommendations Hook] Failed to get recommendations:",E),c.current=!1,s(!1)}finally{clearTimeout(w),c.current=!1,s(!1)}})()},[o,e,t,n,a,r,s,l]),g.useEffect(()=>{if(l!=="off"){a&&We.getState().setShowQueueRecommendations(!1);const v=Z.getState().songs;if(v.some((S,p)=>p>e&&S.source==="recommendation")){const S=v.filter((p,m)=>m<=e?!0:p.source==="user");Z.setState({songs:S,standardOrder:S.filter(p=>p.source==="user").map(p=>p.Id),shuffleOrder:S.filter(p=>p.source==="user").map(p=>p.Id)})}}},[l,e,o,a])}function av(){const{accessToken:e,isAuthenticated:t}=_e(),n=g.useRef(null),r=g.useRef(null),s=g.useRef(null),l=g.useRef(5e3);g.useEffect(()=>{if(!t||!e)return;const o=$.serverBaseUrl;if(!o)return;const a=()=>{if(n.current&&n.current.readyState<=WebSocket.OPEN)return;const c=Ts.get("deviceId")||"unknown",f=o.startsWith("https")?"wss":"ws",d=o.replace(/^https?:\/\//,"").replace(/\/$/,""),h=`${f}://${d}/socket?api_key=${e}&deviceId=${c}`,x=new WebSocket(h);n.current=x,x.onopen=()=>{l.current=5e3},x.onmessage=v=>{var k,S,p;try{const m=JSON.parse(v.data);if(m.MessageType!=="LibraryChanged")return;const y=m.Data;if(!(((k=y==null?void 0:y.ItemsAdded)==null?void 0:k.length)>0||((S=y==null?void 0:y.ItemsUpdated)==null?void 0:S.length)>0||((p=y==null?void 0:y.ItemsRemoved)==null?void 0:p.length)>0))return;A.log("[useLibraryChanged] Library changed, scheduling incremental sync"),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{iv()},5e3)}catch{}},x.onclose=()=>{i()},x.onerror=()=>{}},i=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{a(),l.current=Math.min(l.current*2,6e4)},l.current)};return a(),()=>{s.current&&clearTimeout(s.current),r.current&&clearTimeout(r.current),n.current&&(n.current.onclose=null,n.current.close(),n.current=null)}},[t,e])}async function iv(){const{state:e}=Qe.getState();if(e!=="idle")return;const{lastSyncCompleted:t}=oe.getState();if(t===null)return;const{startSync:n,completeSync:r}=Qe.getState();try{await Rh(),n("auto","New content detected, syncing..."),await $.syncLibrary({scope:"incremental"});const l=(await $.getGenres()||[]).sort((a,i)=>(a.Name||"").localeCompare(i.Name||""));oe.getState().setGenres(l),oe.getState().setLastSyncCompleted(Date.now());const o=await $.getRecentlyAdded(18);oe.getState().setRecentlyAdded(o.Items||[]),r(!0,"Library synced")}catch(s){Qe.getState().state==="syncing"&&r(!1,s instanceof Error?s.message:"Sync failed")}}function uv(){const{isQueueSidebarOpen:e,toggleQueueSidebar:t}=Z();return g.useEffect(()=>{const n=r=>{r.key==="Escape"&&e&&t()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]),e?u.jsxs("div",{className:"fixed top-0 right-0 bottom-0 bg-black border-l border-zinc-800 z-30 flex flex-col hidden xl:flex shadow-xl",style:{width:"var(--sidebar-width)",paddingTop:"var(--header-offset, 0px)"},children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800 flex-shrink-0",children:[u.jsx("h2",{className:"text-base font-bold text-white tracking-wider",children:"Queue"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-zinc-800",children:u.jsx(er,{className:"w-5 h-5"})})]}),u.jsx(ou,{contentPaddingBottom:"8rem"})]}):null}const Xc={slate:"#64748b",gray:"#6b7280",zinc:"#71717a",neutral:"#737373",stone:"#78716c",red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e"};function cv({children:e}){const t=Yt();ov(),av();const{accentColor:n}=We(),r=oe(d=>d.genres),s=oe(d=>d.songs),l=oe(d=>d.genreSongs),o=Qe(d=>d.state),a=Qe(d=>d.startSync),i=Qe(d=>d.completeSync),{isQueueSidebarOpen:c}=Z(),f=g.useRef(!1);return g.useEffect(()=>{const d=Xc[n]||Xc.blue;document.documentElement.style.setProperty("--accent-color",d)},[n]),g.useEffect(()=>{const d=o!=="idle"?"28px":"0px";document.documentElement.style.setProperty("--header-offset",d)},[o]),g.useEffect(()=>{r.length===0&&$.getGenres().catch(d=>{})},[r.length]),g.useEffect(()=>{if(f.current)return;const d=setTimeout(async()=>{const{lastSyncCompleted:h}=oe.getState(),{state:x}=Qe.getState();if(h!==null||x!=="idle")return;f.current=!0;const{setProgress:v}=Qe.getState();try{if(await Rh(),a("auto","Syncing library..."),await $.syncLibrary({scope:"full"},v),Qe.getState().state!=="syncing")return;const S=(await $.getGenres()||[]).sort((p,m)=>(p.Name||"").localeCompare(m.Name||""));oe.getState().setGenres(S),oe.getState().setLastSyncCompleted(Date.now()),i(!0,"Library synced successfully")}catch(k){Qe.getState().state==="syncing"&&i(!1,k instanceof Error?k.message:"Failed to sync library")}},500);return()=>clearTimeout(d)},[a,i]),g.useEffect(()=>{const d=oe.getState(),h=s.length+Object.values(l).flat().length;if(h>0&&d.shufflePool.length===0)try{d.refreshShufflePool()}catch{}else h===0&&setTimeout(async()=>{const x=oe.getState();if(!(x.songs.length+Object.values(x.genreSongs).flat().length>0))try{const S=(await $.getSongs({limit:1})).TotalRecordCount||1e3,p=[];for(let N=0;N<3;N++){const E=Math.floor(Math.random()*S);p.push(E)}const m=p.map(N=>$.getSongs({limit:1,sortBy:["SortName"],sortOrder:"Ascending",startIndex:N})),w=(await Promise.all(m)).flatMap(N=>N.Items||[]);if(w.length>0){const N=w.map(E=>({Id:E.Id,Name:E.Name,AlbumArtist:E.AlbumArtist,ArtistItems:E.ArtistItems,Album:E.Album,AlbumId:E.AlbumId,IndexNumber:E.IndexNumber,ProductionYear:E.ProductionYear,PremiereDate:E.PremiereDate,RunTimeTicks:E.RunTimeTicks,Genres:E.Genres}));oe.setState({songs:N,shufflePool:Ze(N),lastPoolUpdate:Date.now()})}}catch{}},300)},[s.length,l]),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed top-0 right-0 bg-black z-50 pointer-events-none left-0 lg:left-8",style:{height:"env(safe-area-inset-top)",top:o!=="idle"?"28px":"0px"}}),u.jsx(nv,{}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 z-40 pointer-events-none lg:hidden",style:{height:"calc(4rem + env(safe-area-inset-bottom) - 8px)"}}),u.jsx("div",{className:"fixed top-0 left-0 bottom-0 bg-black z-30 pointer-events-none hidden lg:block",style:{width:"4rem"}}),u.jsxs("div",{className:`main-scrollable h-screen bg-black text-white lg:pl-16 transition-[padding] duration-300 ${c?"sidebar-open-padding":""}`,style:{paddingBottom:"calc(6rem + env(safe-area-inset-bottom))",paddingTop:o!=="idle"?"28px":"0",overflowY:"auto",overflowX:"hidden",maxWidth:"100vw",width:"100%",scrollbarGutter:"stable"},children:[u.jsx("div",{className:`w-full mx-auto lg:flex lg:justify-center ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:u.jsx("div",{className:`w-full ${t.pathname==="/"?"max-w-[768px] min-[1680px]:max-w-[1080px]":"max-w-[768px]"}`,children:e})}),u.jsx(tv,{}),u.jsx(Ty,{})]}),u.jsx(uv,{})]})}function dv(){const{pathname:e}=Yt();return g.useEffect(()=>{const t=document.querySelector(".main-scrollable");t&&t.scrollTo({top:0,behavior:"auto"})},[e]),null}const fv=g.memo(function({toast:t}){const{removeToast:n}=Oe(),r={success:u.jsx(k1,{className:"w-4 h-4"}),error:u.jsx(Mh,{className:"w-4 h-4"}),info:u.jsx(O1,{className:"w-4 h-4"})},s={success:"bg-zinc-900 border border-zinc-700",error:"bg-red-900/90 border border-red-700",info:"bg-zinc-900 border border-zinc-700"};return u.jsxs("div",{className:`${s[t.type]} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px] max-w-[320px] animate-slide-up`,role:"alert",children:[u.jsx("span",{className:"flex-shrink-0",children:r[t.type]}),u.jsx("span",{className:"flex-1 text-sm font-medium",children:t.message}),u.jsx("button",{onClick:()=>n(t.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Dismiss notification",children:u.jsx(er,{className:"w-4 h-4"})})]})});function Jc(){const{toasts:e}=Oe();return ho.createPortal(u.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-[99999] flex flex-col gap-2 items-center pointer-events-none",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.map(t=>u.jsx("div",{className:"pointer-events-auto",children:u.jsx(fv,{toast:t})},t.id))}),document.body)}class hv extends g.Component{constructor(n){super(n);kt(this,"handleReset",()=>{var n,r;this.setState({hasError:!1,error:null}),(r=(n=this.props).onReset)==null||r.call(n)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){A.error(`[${this.props.componentName||"Component"}] Error:`,n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:u.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center bg-zinc-900/50 rounded-lg border border-zinc-800",children:[u.jsx(Mh,{className:"w-8 h-8 text-red-400 mb-3"}),u.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Something went wrong",this.props.componentName?` in ${this.props.componentName}`:"","."]}),u.jsxs("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)]",children:[u.jsx(Zr,{className:"w-4 h-4"}),"Try again"]})]}):this.props.children}}function mv(){const{serverUrl:e,accessToken:t,userId:n,isAuthenticated:r}=_e(),s=We(o=>o.localServerUrl),l=g.useRef(null);g.useEffect(()=>{if(!r||!e||!t||!n)return;const o=yo()||s;if(!o)return;const a=()=>{Ki(e,o).then(c=>{c!==$.serverBaseUrl&&$.setCredentials(c,t,n)})};l.current&&clearTimeout(l.current),l.current=setTimeout(a,1e3);const i=()=>{document.visibilityState==="visible"&&a()};return document.addEventListener("visibilitychange",i),()=>{l.current&&clearTimeout(l.current),document.removeEventListener("visibilitychange",i)}},[r,e,t,n,s])}const pv=g.lazy(()=>tt(()=>import("./HomePage-Ctn9ppOg.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),gv=g.lazy(()=>tt(()=>import("./ArtistsPage-C-3JAyF8.js"),__vite__mapDeps([7,8,5,4,1,2,3,9]))),yv=g.lazy(()=>tt(()=>import("./AlbumsPage-Cjx3W4BL.js"),__vite__mapDeps([10,8,5,4,1,2,3,9]))),vv=g.lazy(()=>tt(()=>import("./SongsPage-CfFp6dk7.js"),__vite__mapDeps([11,12,8,5,4,1,2,3,9]))),xv=g.lazy(()=>tt(()=>import("./GenresPage-BrSoYuaG.js"),__vite__mapDeps([13,14,3]))),wv=g.lazy(()=>tt(()=>import("./PlaylistsPage-Cm48JxMg.js"),__vite__mapDeps([15,1,2,3,9]))),Zc=g.lazy(()=>tt(()=>import("./PlaylistDetailPage-CifatnC0.js"),__vite__mapDeps([16,17,18,6,9]))),Sv=g.lazy(()=>tt(()=>import("./SettingsPage-BPsFzirU.js"),__vite__mapDeps([19,18]))),kv=g.lazy(()=>tt(()=>import("./ArtistDetailPage-BQtO4No8.js"),__vite__mapDeps([20,17,18,6,21,9]))),Iv=g.lazy(()=>tt(()=>import("./AlbumDetailPage-GTZlsN2X.js"),__vite__mapDeps([22,18,6,21]))),Nv=g.lazy(()=>tt(()=>import("./GenreSongsPage-9xwP8vxo.js"),__vite__mapDeps([23,17,12,8,5,18,9]))),Ev=g.lazy(()=>tt(()=>import("./StatsPage-DKMQbudl.js"),__vite__mapDeps([24,25,14]))),Cv=g.lazy(()=>tt(()=>import("./SongDetailPage-pmqqk_1q.js"),__vite__mapDeps([26,18,6,25,2,3])));function Pv(){return u.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:u.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-color)] border-t-transparent rounded-full animate-spin"})})}function ut(e,t){return u.jsx(hv,{componentName:t,children:e})}function jv(){const{isAuthenticated:e,logout:t}=_e(),{pageVisibility:n}=We();return mv(),g.useEffect(()=>{e&&window.location.search.includes("logout=true")&&(t(),window.location.search="")},[e]),e?u.jsxs(u.Fragment,{children:[u.jsxs(hg,{children:[u.jsx(dv,{}),u.jsx(cv,{children:u.jsx(g.Suspense,{fallback:u.jsx(Pv,{}),children:u.jsxs(lg,{children:[u.jsx(Je,{path:"/",element:ut(u.jsx(pv,{}),"Home")}),u.jsx(Je,{path:"/song/:id",element:ut(u.jsx(Cv,{}),"Song")}),u.jsx(Je,{path:"/mood/:moodValue",element:ut(u.jsx(Zc,{}),"Mood")}),u.jsx(Je,{path:"/settings",element:ut(u.jsx(Sv,{}),"Settings")}),n.artists&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/artists",element:ut(u.jsx(gv,{}),"Artists")}),u.jsx(Je,{path:"/artist/:id",element:ut(u.jsx(kv,{}),"Artist")})]}),n.albums&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/albums",element:ut(u.jsx(yv,{}),"Albums")}),u.jsx(Je,{path:"/album/:id",element:ut(u.jsx(Iv,{}),"Album")})]}),n.songs&&u.jsx(Je,{path:"/songs",element:ut(u.jsx(vv,{}),"Songs")}),n.genres&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/genres",element:ut(u.jsx(xv,{}),"Genres")}),u.jsx(Je,{path:"/genre/:id",element:ut(u.jsx(Nv,{}),"Genre")})]}),n.playlists&&u.jsxs(u.Fragment,{children:[u.jsx(Je,{path:"/playlists",element:ut(u.jsx(wv,{}),"Playlists")}),u.jsx(Je,{path:"/playlist/:id",element:ut(u.jsx(Zc,{}),"Playlist")})]}),n.stats&&u.jsx(u.Fragment,{children:u.jsx(Je,{path:"/stats",element:ut(u.jsx(Ev,{}),"Stats")})}),u.jsx(Je,{path:"*",element:u.jsx(rg,{to:"/",replace:!0})})]})})})]}),u.jsx(Jc,{})]}):u.jsxs(u.Fragment,{children:[u.jsx(jy,{}),u.jsx(Jc,{})]})}class bv extends g.Component{constructor(){super(...arguments);kt(this,"state",{hasError:!1,error:null,showCopied:!1});kt(this,"handleCopyError",async()=>{var r,s;const n=`Error: ${(r=this.state.error)==null?void 0:r.message}

Stack: ${((s=this.state.error)==null?void 0:s.stack)||"N/A"}`;try{await navigator.clipboard.writeText(n),this.setState({showCopied:!0}),setTimeout(()=>this.setState({showCopied:!1}),2e3)}catch{}});kt(this,"handleReload",()=>{window.location.reload()});kt(this,"handleClearAndReload",()=>{localStorage.clear(),indexedDB.deleteDatabase("tunetuna-storage"),window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){A.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center max-w-md",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:u.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"The app encountered an unexpected error. You can try reloading, or clear data if the issue persists."}),u.jsx("div",{className:"bg-zinc-900 rounded-lg p-3 mb-4 text-left",children:u.jsx("p",{className:"text-red-400 text-sm font-mono break-all",children:((n=this.state.error)==null?void 0:n.message)||"Unknown error"})}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("button",{onClick:this.handleReload,className:"w-full bg-[var(--accent-color)] hover:brightness-90 text-white font-semibold py-3 px-4 rounded-lg transition-all",children:"Reload App"}),u.jsx("button",{onClick:this.handleClearAndReload,className:"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:"Clear Data & Reload"}),u.jsx("button",{onClick:this.handleCopyError,className:"w-full text-gray-400 hover:text-white py-2 px-4 text-sm transition-colors",children:this.state.showCopied?" Copied to clipboard":"Copy error details"})]})]})}):this.props.children}}Xo.createRoot(document.getElementById("root")).render(u.jsx(ei.StrictMode,{children:u.jsx(bv,{children:u.jsx(jv,{})})}));const Tv=async()=>{try{const e=await navigator.serviceWorker.getRegistration();e&&(e.waiting&&(A.log("New app version available, activating..."),e.waiting.postMessage({type:"SKIP_WAITING"})),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&A.log("New app version installed and ready")})}))}catch{}};"serviceWorker"in navigator&&Tv();export{yo as $,Qy as A,Lh as B,qy as C,Xi as D,ho as E,$v as F,Sl as G,_n as H,Rs as I,Lv as J,Rv as K,sl as L,Ji as M,Yt as N,Oe as O,Yc as P,As as Q,Mv as R,Cr as S,L1 as T,Yl as U,_e as V,Qe as W,er as X,He as Y,Ah as Z,c1 as _,Z as a,Zr as a0,Gc as a1,py as a2,yy as a3,Rh as a4,N1 as a5,ei as a6,w1 as a7,Us as b,X as c,_v as d,$ as e,Yy as f,zv as g,We as h,ru as i,u as j,Ov as k,A as l,Fv as m,Gv as n,zy as o,Vv as p,Uy as q,g as r,Bv as s,Dv as t,oe as u,Uv as v,Qc as w,Yg as x,K1 as y,ry as z};
