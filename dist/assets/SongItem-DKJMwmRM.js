import{r as n,a as T,b as D,i as S,e as E,f as O,j as s,D as R,I as U,T as $,C as z}from"./index-Cd7_tvNc.js";const X=n.memo(function({song:e,showImage:b=!0,onContextMenu:a,contextMenuItemId:I}){var f,p;const j=T(t=>t.playTrack),u=D(),c=S(),[m,o]=n.useState(!1),[A,x]=n.useState("mobile"),[k,d]=n.useState(null),r=n.useRef(!1),[N,w]=n.useState(!1),y=I===e.Id,C=n.useMemo(()=>E.getAlbumArtUrl(e.AlbumId||e.Id,96),[e.AlbumId,e.Id]),M=t=>{if(r.current){t.preventDefault(),r.current=!1;return}j(e)},P=t=>{var l,h,i,v;t.preventDefault(),t.stopPropagation(),(h=(l=t.nativeEvent)==null?void 0:l.preventDefault)==null||h.call(l),(v=(i=t.nativeEvent)==null?void 0:i.stopImmediatePropagation)==null||v.call(i),r.current=!0,a?a(e,"song","desktop",{x:t.clientX,y:t.clientY}):(x("desktop"),d({x:t.clientX,y:t.clientY}),o(!0)),setTimeout(()=>{r.current=!1},300)},g=O({onLongPress:t=>{t.preventDefault(),a?(r.current=!0,a(e,"song","mobile")):(r.current=!0,x("mobile"),d(null),o(!0))}});return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:t=>{if(m||r.current){t.preventDefault(),t.stopPropagation();return}M(t)},onContextMenu:P,className:`w-full flex items-center gap-3 hover:bg-white/10 transition-colors group px-4 py-3 ${y?"bg-white/10":""}`,...g,children:[s.jsx("div",{className:"w-12 h-12 rounded-sm overflow-hidden flex-shrink-0 bg-zinc-900 self-center flex items-center justify-center",children:N?s.jsx(R,{className:"w-6 h-6 text-gray-500"}):b?s.jsx(U,{src:C,alt:e.Name,className:"w-full h-full object-cover",showOutline:!0,rounded:"rounded-sm",onError:()=>w(!0)}):s.jsx("div",{className:"w-full h-full bg-zinc-900"})}),s.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[s.jsx("div",{className:`text-sm font-medium truncate transition-colors ${(c==null?void 0:c.Id)===e.Id?"text-[var(--accent-color)]":"text-white group-hover:text-[var(--accent-color)]"}`,children:e.Name}),s.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[(p=(f=e.ArtistItems)==null?void 0:f[0])!=null&&p.Id?s.jsx("span",{className:"clickable-text",onClick:t=>{t.stopPropagation(),u(`/artist/${e.ArtistItems[0].Id}`)},children:e.ArtistItems[0].Name||e.AlbumArtist||"Unknown Artist"}):e.AlbumArtist||"Unknown Artist",e.Album&&s.jsxs(s.Fragment,{children:[" â€¢ ",e.AlbumId?s.jsx("span",{className:"clickable-text",onClick:t=>{t.stopPropagation(),u(`/album/${e.AlbumId}`)},children:e.Album}):e.Album]})]})]}),e.RunTimeTicks&&s.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 text-right",children:$(e.RunTimeTicks)})]}),s.jsx(z,{item:e,itemType:"song",isOpen:m,onClose:()=>o(!1),mode:A,position:k||void 0})]})});export{X as S};
