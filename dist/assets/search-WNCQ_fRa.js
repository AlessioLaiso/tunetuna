import{r as m,j as f,e as b,n as a}from"./index-CzUmNj2K.js";const C=m.forwardRef(({value:e,onChange:l,placeholder:o="Search...",debounceMs:n=300,showClearButton:u=!1,onClear:p},i)=>{const[h,A]=m.useState(e),r=m.useRef(l),w=m.useRef(null),L=s=>{w.current=s,typeof i=="function"?i(s):i&&(i.current=s)};return m.useEffect(()=>{r.current=l},[l]),m.useEffect(()=>{const s=setTimeout(()=>{r.current(h)},n);return()=>clearTimeout(s)},[h,n]),m.useEffect(()=>{A(e)},[e]),f.jsxs("div",{className:"relative",children:[f.jsx("input",{ref:L,type:"text",value:h,onChange:s=>{A(s.target.value)},placeholder:o,className:"w-full px-4 py-2 pl-10 pr-10 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] focus:border-transparent"}),f.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),f.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),A(""),p&&p(),setTimeout(()=>{var x;(x=w.current)==null||x.focus()},0)},className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-opacity ${u&&h?"text-gray-400 hover:text-white opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-label":"Clear search",type:"button",children:f.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})});C.displayName="SearchInput";async function E(e,l){var S,I,v,R;const o=await b.search(e,l);let n=((S=o.Songs)==null?void 0:S.Items)||[],u=((I=o.Albums)==null?void 0:I.Items)||[],p=((v=o.Artists)==null?void 0:v.Items)||[],i=((R=o.Playlists)==null?void 0:R.Items)||[];if(!(n.length>0||u.length>0||p.length>0||i.length>0)&&e.trim().length>0){const t=await k(l);n=t.songs,u=t.albums,p=t.artists,i=t.playlists}const r=a(e).toLowerCase().trim(),w=n.filter(t=>{var y,g,j;if(a(t.Name||"").toLowerCase().includes(r))return!0;const d=[];return t.AlbumArtist&&d.push(a(t.AlbumArtist)),(y=t.AlbumArtists)!=null&&y.length&&d.push(...t.AlbumArtists.map(c=>a(c.Name||"")).filter(Boolean)),(g=t.ArtistItems)!=null&&g.length&&d.push(...t.ArtistItems.map(c=>a(c.Name||"")).filter(Boolean)),!!(d.some(c=>c.toLowerCase().includes(r))||(j=t.Genres)!=null&&j.some(c=>a(c).toLowerCase().includes(r)))}),L=p.filter(t=>a(t.Name||"").toLowerCase().includes(r)),s=u.filter(t=>{var y,g;const N=a(t.Name||""),d=a(t.AlbumArtist||((g=(y=t.ArtistItems)==null?void 0:y[0])==null?void 0:g.Name)||"");return N.toLowerCase().includes(r)||d.toLowerCase().includes(r)}),x=i.filter(t=>a(t.Name||"").toLowerCase().includes(r));return{artists:L,albums:s,playlists:x,songs:w}}async function k(e){const[l,o,n,u]=await Promise.all([b.getArtists({limit:e}),b.getAlbums({limit:e}),b.getPlaylists({limit:e}),b.getSongs({limit:e})]);return{artists:l.Items||[],albums:o.Items||[],playlists:n.Items||[],songs:u.Items||[]}}export{C as S,k as f,E as u};
