import{r,j as e,B as $,X as R}from"./index-9VyyR-5F.js";function B({isOpen:g,onClose:u,filterType:c,availableYears:i=[],yearRange:a={min:null,max:null},onApplyYear:f,genres:N=[],selectedValues:b=[],onApply:v}){const[l,j]=r.useState(a),[p,w]=r.useState(b),d=r.useRef(null),m=r.useRef(null);r.useEffect(()=>{j(a)},[a]),r.useEffect(()=>{w(b)},[b]);const S=t=>{w(n=>n.includes(t)?n.filter(s=>s!==t):[...n,t])},k=()=>{c==="year"&&f?f(l):c==="genre"&&v&&v(p),u()},z=()=>{c==="year"?(j({min:null,max:null}),f&&f({min:null,max:null})):c==="genre"&&w([]),u()},C=i.length>0?i[0]:1900,I=i.length>0?i[i.length-1]:new Date().getFullYear();r.useEffect(()=>{if(c==="year"&&g&&i.length>0){if(d.current&&l.min!==null){const t=i.indexOf(l.min);t!==-1&&setTimeout(()=>{var s;const n=(s=d.current)==null?void 0:s.querySelector(`[data-year-index="${t}"]`);n&&n.scrollIntoView({behavior:"smooth",block:"center"})},100)}if(m.current&&l.max!==null){const t=i.indexOf(l.max);t!==-1&&setTimeout(()=>{var s;const n=(s=m.current)==null?void 0:s.querySelector(`[data-year-index="${t}"]`);n&&n.scrollIntoView({behavior:"smooth",block:"center"})},100)}}},[c,g,l.min,l.max,i]);const y=(t,n)=>{j(s=>{if(t==="min"){const o=s.max!==null&&n>s.max?s.max:n;return setTimeout(()=>{const x=i.indexOf(o);if(x!==-1&&d.current){const h=d.current.querySelector(`[data-year-index="${x}"]`);h&&h.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...s,min:o}}else{const o=s.min!==null&&n<s.min?s.min:n;return setTimeout(()=>{const x=i.indexOf(o);if(x!==-1&&m.current){const h=m.current.querySelector(`[data-year-index="${x}"]`);h&&h.scrollIntoView({behavior:"smooth",block:"center"})}},50),{...s,max:o}}})},E=(l.min===null||l.min===C)&&(l.max===null||l.max===I)&&a.min===null&&a.max===null;return e.jsx($,{isOpen:g,onClose:u,zIndex:10001,children:e.jsxs("div",{className:"pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[e.jsxs("div",{className:"text-lg font-semibold text-white",children:["Filter by ",c==="genre"?"Genre":"Year"]}),e.jsx("button",{onClick:u,className:"w-8 h-8 flex items-center justify-center text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Close",children:e.jsx(R,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-4 max-h-[75vh] overflow-y-auto",children:c==="year"?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{ref:d,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:i.length>0?i.map((t,n)=>{const s=l.min===t,o=l.max!==null&&t>l.max;return e.jsx("button",{"data-year-index":n,onClick:()=>y("min",t),disabled:o,className:`w-full py-3 px-4 text-center snap-center transition-colors ${s?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":o?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:t},t)}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:e.jsx("div",{className:"text-sm",children:"No years available"})})}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 bg-gradient-to-b from-zinc-900 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-zinc-900 to-transparent pointer-events-none"})]}),e.jsx("div",{className:"text-white font-medium self-center",children:"to"}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{ref:m,className:"h-64 overflow-y-auto scroll-smooth snap-y snap-mandatory py-[calc(50%-1.5rem)]",children:i.length>0?i.map((t,n)=>{const s=l.max===t,o=l.min!==null&&t<l.min;return e.jsx("button",{"data-year-index":n,onClick:()=>y("max",t),disabled:o,className:`w-full py-3 px-4 text-center snap-center transition-colors ${s?"bg-[var(--accent-color)] text-white font-semibold rounded-lg":o?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:t},t)}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:e.jsx("div",{className:"text-sm",children:"No years available"})})}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-14 bg-gradient-to-b from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-14 bg-gradient-to-t from-zinc-900 via-zinc-900/80 to-transparent pointer-events-none"})]})]})}):e.jsx("div",{className:"space-y-2",children:c==="genre"?N.length>0?[...N].sort((t,n)=>(t.Name||"").localeCompare(n.Name||"")).map(t=>{const n=t.Name||"",s=p.includes(n);return e.jsxs("button",{onClick:()=>S(n),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-white/10 transition-colors text-left",children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${s?"bg-white border-white":"border-white/40 bg-transparent"}`,children:s&&e.jsx("svg",{className:"w-3 h-3 text-zinc-900",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-white font-medium",children:n})]},t.Id)}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:e.jsx("div",{className:"text-sm",children:"No genres available"})}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:e.jsx("div",{className:"text-sm",children:"No genres available"})})})}),e.jsxs("div",{className:"flex gap-3 mt-6 px-4",children:[e.jsx("button",{onClick:z,disabled:c==="year"&&E,className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 disabled:opacity-30 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:"Clear"}),e.jsx("button",{onClick:k,className:"flex-1 px-4 py-3 bg-white text-zinc-900 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Apply"})]})]})})}export{B as F};
