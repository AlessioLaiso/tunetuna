import{r as n}from"./index-BqlUlFYw.js";function g({totalCount:e,visibleCount:c,increment:o,setVisibleCount:s,threshold:l=1,enabled:a=!0}){const i=n.useRef(0),f=100,t=n.useCallback(()=>{const r=document.querySelector(".main-scrollable");if(!r)return;const u=Date.now();if(u-i.current<f||(i.current=u,c>=e))return;const{scrollTop:m,clientHeight:d,scrollHeight:p}=r,S=c/e,y=p*S;m+d*(1+l)>=y&&s(E=>Math.min(E+o,e))},[e,c,o,s,l]);n.useEffect(()=>{if(!a)return;const r=document.querySelector(".main-scrollable");if(r)return r.addEventListener("scroll",t,{passive:!0}),t(),()=>{r.removeEventListener("scroll",t)}},[t,a])}export{g as u};
